var n2=l=>{throw TypeError(l)};var Ad=(l,t,e)=>t.has(l)||n2("Cannot "+e);var We=(l,t,e)=>(Ad(l,t,"read from private field"),e?e.call(l):t.get(l)),nr=(l,t,e)=>t.has(l)?n2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(l):t.set(l,e),ln=(l,t,e,i)=>(Ad(l,t,"write to private field"),i?i.call(l,e):t.set(l,e),e),rr=(l,t,e)=>(Ad(l,t,"access private method"),e);var r2=(l,t,e,i)=>({set _(r){ln(l,t,r,e)},get _(){return We(l,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var d0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $y(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var _d={exports:{}},cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s2;function Vy(){if(s2)return cl;s2=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var u in r)u!=="key"&&(a[u]=r[u])}else a=r;return r=a.ref,{$$typeof:l,type:i,key:o,ref:r!==void 0?r:null,props:a}}return cl.Fragment=t,cl.jsx=e,cl.jsxs=e,cl}var a2;function Yy(){return a2||(a2=1,_d.exports=Vy()),_d.exports}var X=Yy(),kd={exports:{}},se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o2;function Xy(){if(o2)return se;o2=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),b=Symbol.iterator;function v(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function A(L,P,ot){this.props=L,this.context=P,this.refs=_,this.updater=ot||w}A.prototype.isReactComponent={},A.prototype.setState=function(L,P){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,P,"setState")},A.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function T(){}T.prototype=A.prototype;function M(L,P,ot){this.props=L,this.context=P,this.refs=_,this.updater=ot||w}var N=M.prototype=new T;N.constructor=M,x(N,A.prototype),N.isPureReactComponent=!0;var R=Array.isArray;function B(){}var z={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function U(L,P,ot){var ht=ot.ref;return{$$typeof:l,type:L,key:P,ref:ht!==void 0?ht:null,props:ot}}function et(L,P){return U(L.type,P,L.props)}function ut(L){return typeof L=="object"&&L!==null&&L.$$typeof===l}function H(L){var P={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ot){return P[ot]})}var it=/\/+/g;function D(L,P){return typeof L=="object"&&L!==null&&L.key!=null?H(""+L.key):P.toString(36)}function rt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(B,B):(L.status="pending",L.then(function(P){L.status==="pending"&&(L.status="fulfilled",L.value=P)},function(P){L.status==="pending"&&(L.status="rejected",L.reason=P)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function V(L,P,ot,ht,gt){var It=typeof L;(It==="undefined"||It==="boolean")&&(L=null);var Lt=!1;if(L===null)Lt=!0;else switch(It){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(L.$$typeof){case l:case t:Lt=!0;break;case m:return Lt=L._init,V(Lt(L._payload),P,ot,ht,gt)}}if(Lt)return gt=gt(L),Lt=ht===""?"."+D(L,0):ht,R(gt)?(ot="",Lt!=null&&(ot=Lt.replace(it,"$&/")+"/"),V(gt,P,ot,"",function(xe){return xe})):gt!=null&&(ut(gt)&&(gt=et(gt,ot+(gt.key==null||L&&L.key===gt.key?"":(""+gt.key).replace(it,"$&/")+"/")+Lt)),P.push(gt)),1;Lt=0;var jt=ht===""?".":ht+":";if(R(L))for(var Gt=0;Gt<L.length;Gt++)ht=L[Gt],It=jt+D(ht,Gt),Lt+=V(ht,P,ot,It,gt);else if(Gt=v(L),typeof Gt=="function")for(L=Gt.call(L),Gt=0;!(ht=L.next()).done;)ht=ht.value,It=jt+D(ht,Gt++),Lt+=V(ht,P,ot,It,gt);else if(It==="object"){if(typeof L.then=="function")return V(rt(L),P,ot,ht,gt);throw P=String(L),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function K(L,P,ot){if(L==null)return L;var ht=[],gt=0;return V(L,ht,"","",function(It){return P.call(ot,It,gt++)}),ht}function yt(L){if(L._status===-1){var P=L._result;P=P(),P.then(function(ot){(L._status===0||L._status===-1)&&(L._status=1,L._result=ot)},function(ot){(L._status===0||L._status===-1)&&(L._status=2,L._result=ot)}),L._status===-1&&(L._status=0,L._result=P)}if(L._status===1)return L._result.default;throw L._result}var pt=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Tt={map:K,forEach:function(L,P,ot){K(L,function(){P.apply(this,arguments)},ot)},count:function(L){var P=0;return K(L,function(){P++}),P},toArray:function(L){return K(L,function(P){return P})||[]},only:function(L){if(!ut(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return se.Activity=p,se.Children=Tt,se.Component=A,se.Fragment=e,se.Profiler=r,se.PureComponent=M,se.StrictMode=i,se.Suspense=h,se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,se.__COMPILER_RUNTIME={__proto__:null,c:function(L){return z.H.useMemoCache(L)}},se.cache=function(L){return function(){return L.apply(null,arguments)}},se.cacheSignal=function(){return null},se.cloneElement=function(L,P,ot){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ht=x({},L.props),gt=L.key;if(P!=null)for(It in P.key!==void 0&&(gt=""+P.key),P)!G.call(P,It)||It==="key"||It==="__self"||It==="__source"||It==="ref"&&P.ref===void 0||(ht[It]=P[It]);var It=arguments.length-2;if(It===1)ht.children=ot;else if(1<It){for(var Lt=Array(It),jt=0;jt<It;jt++)Lt[jt]=arguments[jt+2];ht.children=Lt}return U(L.type,gt,ht)},se.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},se.createElement=function(L,P,ot){var ht,gt={},It=null;if(P!=null)for(ht in P.key!==void 0&&(It=""+P.key),P)G.call(P,ht)&&ht!=="key"&&ht!=="__self"&&ht!=="__source"&&(gt[ht]=P[ht]);var Lt=arguments.length-2;if(Lt===1)gt.children=ot;else if(1<Lt){for(var jt=Array(Lt),Gt=0;Gt<Lt;Gt++)jt[Gt]=arguments[Gt+2];gt.children=jt}if(L&&L.defaultProps)for(ht in Lt=L.defaultProps,Lt)gt[ht]===void 0&&(gt[ht]=Lt[ht]);return U(L,It,gt)},se.createRef=function(){return{current:null}},se.forwardRef=function(L){return{$$typeof:u,render:L}},se.isValidElement=ut,se.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:yt}},se.memo=function(L,P){return{$$typeof:f,type:L,compare:P===void 0?null:P}},se.startTransition=function(L){var P=z.T,ot={};z.T=ot;try{var ht=L(),gt=z.S;gt!==null&&gt(ot,ht),typeof ht=="object"&&ht!==null&&typeof ht.then=="function"&&ht.then(B,pt)}catch(It){pt(It)}finally{P!==null&&ot.types!==null&&(P.types=ot.types),z.T=P}},se.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},se.use=function(L){return z.H.use(L)},se.useActionState=function(L,P,ot){return z.H.useActionState(L,P,ot)},se.useCallback=function(L,P){return z.H.useCallback(L,P)},se.useContext=function(L){return z.H.useContext(L)},se.useDebugValue=function(){},se.useDeferredValue=function(L,P){return z.H.useDeferredValue(L,P)},se.useEffect=function(L,P){return z.H.useEffect(L,P)},se.useEffectEvent=function(L){return z.H.useEffectEvent(L)},se.useId=function(){return z.H.useId()},se.useImperativeHandle=function(L,P,ot){return z.H.useImperativeHandle(L,P,ot)},se.useInsertionEffect=function(L,P){return z.H.useInsertionEffect(L,P)},se.useLayoutEffect=function(L,P){return z.H.useLayoutEffect(L,P)},se.useMemo=function(L,P){return z.H.useMemo(L,P)},se.useOptimistic=function(L,P){return z.H.useOptimistic(L,P)},se.useReducer=function(L,P,ot){return z.H.useReducer(L,P,ot)},se.useRef=function(L){return z.H.useRef(L)},se.useState=function(L){return z.H.useState(L)},se.useSyncExternalStore=function(L,P,ot){return z.H.useSyncExternalStore(L,P,ot)},se.useTransition=function(){return z.H.useTransition()},se.version="19.2.0",se}var l2;function Tf(){return l2||(l2=1,kd.exports=Xy()),kd.exports}var de=Tf(),Ed={exports:{}},ul={},Td={exports:{}},Cd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2;function Ky(){return c2||(c2=1,(function(l){function t(V,K){var yt=V.length;V.push(K);t:for(;0<yt;){var pt=yt-1>>>1,Tt=V[pt];if(0<r(Tt,K))V[pt]=K,V[yt]=Tt,yt=pt;else break t}}function e(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var K=V[0],yt=V.pop();if(yt!==K){V[0]=yt;t:for(var pt=0,Tt=V.length,L=Tt>>>1;pt<L;){var P=2*(pt+1)-1,ot=V[P],ht=P+1,gt=V[ht];if(0>r(ot,yt))ht<Tt&&0>r(gt,ot)?(V[pt]=gt,V[ht]=yt,pt=ht):(V[pt]=ot,V[P]=yt,pt=P);else if(ht<Tt&&0>r(gt,yt))V[pt]=gt,V[ht]=yt,pt=ht;else break t}}return K}function r(V,K){var yt=V.sortIndex-K.sortIndex;return yt!==0?yt:V.id-K.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;l.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();l.unstable_now=function(){return o.now()-u}}var h=[],f=[],m=1,p=null,b=3,v=!1,w=!1,x=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function N(V){for(var K=e(f);K!==null;){if(K.callback===null)i(f);else if(K.startTime<=V)i(f),K.sortIndex=K.expirationTime,t(h,K);else break;K=e(f)}}function R(V){if(x=!1,N(V),!w)if(e(h)!==null)w=!0,B||(B=!0,H());else{var K=e(f);K!==null&&rt(R,K.startTime-V)}}var B=!1,z=-1,G=5,U=-1;function et(){return _?!0:!(l.unstable_now()-U<G)}function ut(){if(_=!1,B){var V=l.unstable_now();U=V;var K=!0;try{t:{w=!1,x&&(x=!1,T(z),z=-1),v=!0;var yt=b;try{e:{for(N(V),p=e(h);p!==null&&!(p.expirationTime>V&&et());){var pt=p.callback;if(typeof pt=="function"){p.callback=null,b=p.priorityLevel;var Tt=pt(p.expirationTime<=V);if(V=l.unstable_now(),typeof Tt=="function"){p.callback=Tt,N(V),K=!0;break e}p===e(h)&&i(h),N(V)}else i(h);p=e(h)}if(p!==null)K=!0;else{var L=e(f);L!==null&&rt(R,L.startTime-V),K=!1}}break t}finally{p=null,b=yt,v=!1}K=void 0}}finally{K?H():B=!1}}}var H;if(typeof M=="function")H=function(){M(ut)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,D=it.port2;it.port1.onmessage=ut,H=function(){D.postMessage(null)}}else H=function(){A(ut,0)};function rt(V,K){z=A(function(){V(l.unstable_now())},K)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(V){V.callback=null},l.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<V?Math.floor(1e3/V):5},l.unstable_getCurrentPriorityLevel=function(){return b},l.unstable_next=function(V){switch(b){case 1:case 2:case 3:var K=3;break;default:K=b}var yt=b;b=K;try{return V()}finally{b=yt}},l.unstable_requestPaint=function(){_=!0},l.unstable_runWithPriority=function(V,K){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var yt=b;b=V;try{return K()}finally{b=yt}},l.unstable_scheduleCallback=function(V,K,yt){var pt=l.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?pt+yt:pt):yt=pt,V){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=yt+Tt,V={id:m++,callback:K,priorityLevel:V,startTime:yt,expirationTime:Tt,sortIndex:-1},yt>pt?(V.sortIndex=yt,t(f,V),e(h)===null&&V===e(f)&&(x?(T(z),z=-1):x=!0,rt(R,yt-pt))):(V.sortIndex=Tt,t(h,V),w||v||(w=!0,B||(B=!0,H()))),V},l.unstable_shouldYield=et,l.unstable_wrapCallback=function(V){var K=b;return function(){var yt=b;b=K;try{return V.apply(this,arguments)}finally{b=yt}}}})(Cd)),Cd}var u2;function Zy(){return u2||(u2=1,Td.exports=Ky()),Td.exports}var Md={exports:{}},Pi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2;function Wy(){if(h2)return Pi;h2=1;var l=Tf();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:h,containerInfo:f,implementation:m}}var o=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Pi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Pi.createPortal=function(h,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(h,f,null,m)},Pi.flushSync=function(h){var f=o.T,m=i.p;try{if(o.T=null,i.p=2,h)return h()}finally{o.T=f,i.p=m,i.d.f()}},Pi.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Pi.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Pi.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var m=f.as,p=u(m,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:v}):m==="script"&&i.d.X(h,{crossOrigin:p,integrity:b,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Pi.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Pi.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=u(m,f.crossOrigin);i.d.L(h,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Pi.preloadModule=function(h,f){if(typeof h=="string")if(f){var m=u(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Pi.requestFormReset=function(h){i.d.r(h)},Pi.unstable_batchedUpdates=function(h,f){return h(f)},Pi.useFormState=function(h,f,m){return o.H.useFormState(h,f,m)},Pi.useFormStatus=function(){return o.H.useHostTransitionStatus()},Pi.version="19.2.0",Pi}var d2;function Qy(){if(d2)return Md.exports;d2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),Md.exports=Wy(),Md.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2;function Jy(){if(f2)return ul;f2=1;var l=Zy(),t=Tf(),e=Qy();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a(n){var s=n,c=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(c=s.return),n=s.return;while(n)}return s.tag===3?c:null}function o(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function u(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(a(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=a(n),s===null)throw Error(i(188));return s!==n?null:n}for(var c=n,d=s;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return h(g),n;if(y===d)return h(g),s;y=y.sibling}throw Error(i(188))}if(c.return!==d.return)c=g,d=y;else{for(var E=!1,I=g.child;I;){if(I===c){E=!0,c=g,d=y;break}if(I===d){E=!0,d=g,c=y;break}I=I.sibling}if(!E){for(I=y.child;I;){if(I===c){E=!0,c=y,d=g;break}if(I===d){E=!0,d=y,c=g;break}I=I.sibling}if(!E)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?n:s}function m(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=m(n),s!==null)return s;n=n.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),M=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),ut=Symbol.iterator;function H(n){return n===null||typeof n!="object"?null:(n=ut&&n[ut]||n["@@iterator"],typeof n=="function"?n:null)}var it=Symbol.for("react.client.reference");function D(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===it?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case A:return"Profiler";case _:return"StrictMode";case R:return"Suspense";case B:return"SuspenseList";case U:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case M:return n.displayName||"Context";case T:return(n._context.displayName||"Context")+".Consumer";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case z:return s=n.displayName||null,s!==null?s:D(n.type)||"Memo";case G:s=n._payload,n=n._init;try{return D(n(s))}catch{}}return null}var rt=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},pt=[],Tt=-1;function L(n){return{current:n}}function P(n){0>Tt||(n.current=pt[Tt],pt[Tt]=null,Tt--)}function ot(n,s){Tt++,pt[Tt]=n.current,n.current=s}var ht=L(null),gt=L(null),It=L(null),Lt=L(null);function jt(n,s){switch(ot(It,s),ot(gt,n),ot(ht,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Eg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Eg(s),n=Tg(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}P(ht),ot(ht,n)}function Gt(){P(ht),P(gt),P(It)}function xe(n){n.memoizedState!==null&&ot(Lt,n);var s=ht.current,c=Tg(s,n.type);s!==c&&(ot(gt,n),ot(ht,c))}function we(n){gt.current===n&&(P(ht),P(gt)),Lt.current===n&&(P(Lt),sl._currentValue=yt)}var ti,ui;function C(n){if(ti===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ti=s&&s[1]||"",ui=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ti+n+ui}var ft=!1;function mt(n,s){if(!n||ft)return"";ft=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(bt){var ct=bt}Reflect.construct(n,[],St)}else{try{St.call()}catch(bt){ct=bt}n.call(St.prototype)}}else{try{throw Error()}catch(bt){ct=bt}(St=n())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(bt){if(bt&&ct&&typeof bt.stack=="string")return[bt.stack,ct.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),E=y[0],I=y[1];if(E&&I){var Z=E.split(`
`),lt=I.split(`
`);for(g=d=0;d<Z.length&&!Z[d].includes("DetermineComponentFrameRoot");)d++;for(;g<lt.length&&!lt[g].includes("DetermineComponentFrameRoot");)g++;if(d===Z.length||g===lt.length)for(d=Z.length-1,g=lt.length-1;1<=d&&0<=g&&Z[d]!==lt[g];)g--;for(;1<=d&&0<=g;d--,g--)if(Z[d]!==lt[g]){if(d!==1||g!==1)do if(d--,g--,0>g||Z[d]!==lt[g]){var xt=`
`+Z[d].replace(" at new "," at ");return n.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",n.displayName)),xt}while(1<=d&&0<=g);break}}}finally{ft=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?C(c):""}function q(n,s){switch(n.tag){case 26:case 27:case 5:return C(n.type);case 16:return C("Lazy");case 13:return n.child!==s&&s!==null?C("Suspense Fallback"):C("Suspense");case 19:return C("SuspenseList");case 0:case 15:return mt(n.type,!1);case 11:return mt(n.type.render,!1);case 1:return mt(n.type,!0);case 31:return C("Activity");default:return""}}function j(n){try{var s="",c=null;do s+=q(n,c),c=n,n=n.return;while(n);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var J=Object.prototype.hasOwnProperty,At=l.unstable_scheduleCallback,_t=l.unstable_cancelCallback,nt=l.unstable_shouldYield,Dt=l.unstable_requestPaint,zt=l.unstable_now,Nt=l.unstable_getCurrentPriorityLevel,Wt=l.unstable_ImmediatePriority,De=l.unstable_UserBlockingPriority,ue=l.unstable_NormalPriority,Ii=l.unstable_LowPriority,Gn=l.unstable_IdlePriority,Wi=l.log,vr=l.unstable_setDisableYieldValue,ze=null,pi=null;function Qi(n){if(typeof Wi=="function"&&vr(n),pi&&typeof pi.setStrictMode=="function")try{pi.setStrictMode(ze,n)}catch{}}var Ye=Math.clz32?Math.clz32:go,da=Math.log,Ns=Math.LN2;function go(n){return n>>>=0,n===0?32:31-(da(n)/Ns|0)|0}var Kr=256,yr=262144,En=4194304;function Ji(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function fa(n,s,c){var d=n.pendingLanes;if(d===0)return 0;var g=0,y=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var I=d&134217727;return I!==0?(d=I&~y,d!==0?g=Ji(d):(E&=I,E!==0?g=Ji(E):c||(c=I&~n,c!==0&&(g=Ji(c))))):(I=d&~y,I!==0?g=Ji(I):E!==0?g=Ji(E):c||(c=d&~n,c!==0&&(g=Ji(c)))),g===0?0:s!==0&&s!==g&&(s&y)===0&&(y=g&-g,c=s&-s,y>=c||y===32&&(c&4194048)!==0)?s:g}function Os(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function bo(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xl(){var n=En;return En<<=1,(En&62914560)===0&&(En=4194304),n}function vo(n){for(var s=[],c=0;31>c;c++)s.push(n);return s}function zs(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ma(n,s,c,d,g,y){var E=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var I=n.entanglements,Z=n.expirationTimes,lt=n.hiddenUpdates;for(c=E&~c;0<c;){var xt=31-Ye(c),St=1<<xt;I[xt]=0,Z[xt]=-1;var ct=lt[xt];if(ct!==null)for(lt[xt]=null,xt=0;xt<ct.length;xt++){var bt=ct[xt];bt!==null&&(bt.lane&=-536870913)}c&=~St}d!==0&&Kl(n,d,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(E&~s))}function Kl(n,s,c){n.pendingLanes|=s,n.suspendedLanes&=~s;var d=31-Ye(s);n.entangledLanes|=s,n.entanglements[d]=n.entanglements[d]|1073741824|c&261930}function Zl(n,s){var c=n.entangledLanes|=s;for(n=n.entanglements;c;){var d=31-Ye(c),g=1<<d;g&s|n[d]&s&&(n[d]|=s),c&=~g}}function Wl(n,s){var c=s&-s;return c=(c&42)!==0?1:yo(c),(c&(n.suspendedLanes|s))!==0?0:c}function yo(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function xo(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ql(){var n=K.p;return n!==0?n:(n=window.event,n===void 0?32:Zg(n.type))}function Jl(n,s){var c=K.p;try{return K.p=n,s()}finally{K.p=c}}var Qn=Math.random().toString(36).slice(2),Ai="__reactFiber$"+Qn,Fi="__reactProps$"+Qn,xr="__reactContainer$"+Qn,pa="__reactEvents$"+Qn,pu="__reactListeners$"+Qn,gu="__reactHandles$"+Qn,dt="__reactResources$"+Qn,vt="__reactMarker$"+Qn;function kt(n){delete n[Ai],delete n[Fi],delete n[pa],delete n[pu],delete n[gu]}function Rt(n){var s=n[Ai];if(s)return s;for(var c=n.parentNode;c;){if(s=c[xr]||c[Ai]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(n=zg(n);n!==null;){if(c=n[Ai])return c;n=zg(n)}return s}n=c,c=n.parentNode}return null}function $t(n){if(n=n[Ai]||n[xr]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Pt(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Bt(n){var s=n[dt];return s||(s=n[dt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ut(n){n[vt]=!0}var Ne=new Set,Hi={};function ke(n,s){$e(n,s),$e(n+"Capture",s)}function $e(n,s){for(Hi[n]=s,n=0;n<s.length;n++)Ne.add(s[n])}var ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ls={},wo={};function tc(n){return J.call(wo,n)?!0:J.call(Ls,n)?!1:ga.test(n)?wo[n]=!0:(Ls[n]=!0,!1)}function oe(n,s,c){if(tc(s))if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+c)}}function Xt(n,s,c){if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+c)}}function Le(n,s,c,d){if(d===null)n.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(s,c,""+d)}}function si(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ei(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function tn(n,s,c){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(n,s,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function qn(n){if(!n._valueTracker){var s=Ei(n)?"checked":"value";n._valueTracker=tn(n,s,""+n[s])}}function ec(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return n&&(d=Ei(n)?n.checked?"true":"false":n.value),n=d,n!==c?(s.setValue(n),!0):!1}function ic(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Pv=/[\n"\\]/g;function Tn(n){return n.replace(Pv,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function bu(n,s,c,d,g,y,E,I){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+si(s)):n.value!==""+si(s)&&(n.value=""+si(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?vu(n,E,si(s)):c!=null?vu(n,E,si(c)):d!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+si(I):n.removeAttribute("name")}function xm(n,s,c,d,g,y,E,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){qn(n);return}c=c!=null?""+si(c):"",s=s!=null?""+si(s):c,I||s===n.value||(n.value=s),n.defaultValue=s}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=I?n.checked:!!d,n.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),qn(n)}function vu(n,s,c){s==="number"&&ic(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function ba(n,s,c,d){if(n=n.options,s){s={};for(var g=0;g<c.length;g++)s["$"+c[g]]=!0;for(c=0;c<n.length;c++)g=s.hasOwnProperty("$"+n[c].value),n[c].selected!==g&&(n[c].selected=g),g&&d&&(n[c].defaultSelected=!0)}else{for(c=""+si(c),s=null,g=0;g<n.length;g++){if(n[g].value===c){n[g].selected=!0,d&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function wm(n,s,c){if(s!=null&&(s=""+si(s),s!==n.value&&(n.value=s),c==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=c!=null?""+si(c):""}function Sm(n,s,c,d){if(s==null){if(d!=null){if(c!=null)throw Error(i(92));if(rt(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),s=c}c=si(s),n.defaultValue=c,d=n.textContent,d===c&&d!==""&&d!==null&&(n.value=d),qn(n)}function va(n,s){if(s){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=s;return}}n.textContent=s}var Uv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Am(n,s,c){var d=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":d?n.setProperty(s,c):typeof c!="number"||c===0||Uv.has(s)?s==="float"?n.cssFloat=c:n[s]=(""+c).trim():n[s]=c+"px"}function _m(n,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var g in s)d=s[g],s.hasOwnProperty(g)&&c[g]!==d&&Am(n,g,d)}else for(var y in s)s.hasOwnProperty(y)&&Am(n,y,s[y])}function yu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nc(n){return jv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function wr(){}var xu=null;function wu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ya=null,xa=null;function km(n){var s=$t(n);if(s&&(n=s.stateNode)){var c=n[Fi]||null;t:switch(n=s.stateNode,s.type){case"input":if(bu(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Tn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==n&&d.form===n.form){var g=d[Fi]||null;if(!g)throw Error(i(90));bu(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<c.length;s++)d=c[s],d.form===n.form&&ec(d)}break t;case"textarea":wm(n,c.value,c.defaultValue);break t;case"select":s=c.value,s!=null&&ba(n,!!c.multiple,s,!1)}}}var Su=!1;function Em(n,s,c){if(Su)return n(s,c);Su=!0;try{var d=n(s);return d}finally{if(Su=!1,(ya!==null||xa!==null)&&(qc(),ya&&(s=ya,n=xa,xa=ya=null,km(s),n)))for(s=0;s<n.length;s++)km(n[s])}}function So(n,s){var c=n.stateNode;if(c===null)return null;var d=c[Fi]||null;if(d===null)return null;c=d[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break t;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var Sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=!1;if(Sr)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){Au=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{Au=!1}var Zr=null,_u=null,rc=null;function Tm(){if(rc)return rc;var n,s=_u,c=s.length,d,g="value"in Zr?Zr.value:Zr.textContent,y=g.length;for(n=0;n<c&&s[n]===g[n];n++);var E=c-n;for(d=1;d<=E&&s[c-d]===g[y-d];d++);return rc=g.slice(n,1<d?1-d:void 0)}function sc(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ac(){return!0}function Cm(){return!1}function en(n){function s(c,d,g,y,E){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(c=n[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ac:Cm,this.isPropagationStopped=Cm,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),s}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oc=en(Bs),_o=p({},Bs,{view:0,detail:0}),Gv=en(_o),ku,Eu,ko,lc=p({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ko&&(ko&&n.type==="mousemove"?(ku=n.screenX-ko.screenX,Eu=n.screenY-ko.screenY):Eu=ku=0,ko=n),ku)},movementY:function(n){return"movementY"in n?n.movementY:Eu}}),Mm=en(lc),qv=p({},lc,{dataTransfer:0}),$v=en(qv),Vv=p({},_o,{relatedTarget:0}),Tu=en(Vv),Yv=p({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Xv=en(Yv),Kv=p({},Bs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Zv=en(Kv),Wv=p({},Bs,{data:0}),Rm=en(Wv),Qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e3(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=t3[n])?!!s[n]:!1}function Cu(){return e3}var i3=p({},_o,{key:function(n){if(n.key){var s=Qv[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=sc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Jv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cu,charCode:function(n){return n.type==="keypress"?sc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?sc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),n3=en(i3),r3=p({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dm=en(r3),s3=p({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cu}),a3=en(s3),o3=p({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),l3=en(o3),c3=p({},lc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),u3=en(c3),h3=p({},Bs,{newState:0,oldState:0}),d3=en(h3),f3=[9,13,27,32],Mu=Sr&&"CompositionEvent"in window,Eo=null;Sr&&"documentMode"in document&&(Eo=document.documentMode);var m3=Sr&&"TextEvent"in window&&!Eo,Nm=Sr&&(!Mu||Eo&&8<Eo&&11>=Eo),Om=" ",zm=!1;function Lm(n,s){switch(n){case"keyup":return f3.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wa=!1;function p3(n,s){switch(n){case"compositionend":return Bm(s);case"keypress":return s.which!==32?null:(zm=!0,Om);case"textInput":return n=s.data,n===Om&&zm?null:n;default:return null}}function g3(n,s){if(wa)return n==="compositionend"||!Mu&&Lm(n,s)?(n=Tm(),rc=_u=Zr=null,wa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Nm&&s.locale!=="ko"?null:s.data;default:return null}}var b3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Im(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!b3[n.type]:s==="textarea"}function Fm(n,s,c,d){ya?xa?xa.push(d):xa=[d]:ya=d,s=Wc(s,"onChange"),0<s.length&&(c=new oc("onChange","change",null,c,d),n.push({event:c,listeners:s}))}var To=null,Co=null;function v3(n){xg(n,0)}function cc(n){var s=Pt(n);if(ec(s))return n}function Pm(n,s){if(n==="change")return s}var Um=!1;if(Sr){var Ru;if(Sr){var Du="oninput"in document;if(!Du){var Hm=document.createElement("div");Hm.setAttribute("oninput","return;"),Du=typeof Hm.oninput=="function"}Ru=Du}else Ru=!1;Um=Ru&&(!document.documentMode||9<document.documentMode)}function jm(){To&&(To.detachEvent("onpropertychange",Gm),Co=To=null)}function Gm(n){if(n.propertyName==="value"&&cc(Co)){var s=[];Fm(s,Co,n,wu(n)),Em(v3,s)}}function y3(n,s,c){n==="focusin"?(jm(),To=s,Co=c,To.attachEvent("onpropertychange",Gm)):n==="focusout"&&jm()}function x3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return cc(Co)}function w3(n,s){if(n==="click")return cc(s)}function S3(n,s){if(n==="input"||n==="change")return cc(s)}function A3(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var mn=typeof Object.is=="function"?Object.is:A3;function Mo(n,s){if(mn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var c=Object.keys(n),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!J.call(s,g)||!mn(n[g],s[g]))return!1}return!0}function qm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $m(n,s){var c=qm(n);n=0;for(var d;c;){if(c.nodeType===3){if(d=n+c.textContent.length,n<=s&&d>=s)return{node:c,offset:s-n};n=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=qm(c)}}function Vm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Vm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Ym(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=ic(n.document);s instanceof n.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)n=s.contentWindow;else break;s=ic(n.document)}return s}function Nu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var _3=Sr&&"documentMode"in document&&11>=document.documentMode,Sa=null,Ou=null,Ro=null,zu=!1;function Xm(n,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;zu||Sa==null||Sa!==ic(d)||(d=Sa,"selectionStart"in d&&Nu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ro&&Mo(Ro,d)||(Ro=d,d=Wc(Ou,"onSelect"),0<d.length&&(s=new oc("onSelect","select",null,s,c),n.push({event:s,listeners:d}),s.target=Sa)))}function Is(n,s){var c={};return c[n.toLowerCase()]=s.toLowerCase(),c["Webkit"+n]="webkit"+s,c["Moz"+n]="moz"+s,c}var Aa={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionrun:Is("Transition","TransitionRun"),transitionstart:Is("Transition","TransitionStart"),transitioncancel:Is("Transition","TransitionCancel"),transitionend:Is("Transition","TransitionEnd")},Lu={},Km={};Sr&&(Km=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function Fs(n){if(Lu[n])return Lu[n];if(!Aa[n])return n;var s=Aa[n],c;for(c in s)if(s.hasOwnProperty(c)&&c in Km)return Lu[n]=s[c];return n}var Zm=Fs("animationend"),Wm=Fs("animationiteration"),Qm=Fs("animationstart"),k3=Fs("transitionrun"),E3=Fs("transitionstart"),T3=Fs("transitioncancel"),Jm=Fs("transitionend"),tp=new Map,Bu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bu.push("scrollEnd");function $n(n,s){tp.set(n,s),ke(s,[n])}var uc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Cn=[],_a=0,Iu=0;function hc(){for(var n=_a,s=Iu=_a=0;s<n;){var c=Cn[s];Cn[s++]=null;var d=Cn[s];Cn[s++]=null;var g=Cn[s];Cn[s++]=null;var y=Cn[s];if(Cn[s++]=null,d!==null&&g!==null){var E=d.pending;E===null?g.next=g:(g.next=E.next,E.next=g),d.pending=g}y!==0&&ep(c,g,y)}}function dc(n,s,c,d){Cn[_a++]=n,Cn[_a++]=s,Cn[_a++]=c,Cn[_a++]=d,Iu|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function Fu(n,s,c,d){return dc(n,s,c,d),fc(n)}function Ps(n,s){return dc(n,null,null,s),fc(n)}function ep(n,s,c){n.lanes|=c;var d=n.alternate;d!==null&&(d.lanes|=c);for(var g=!1,y=n.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,g&&s!==null&&(g=31-Ye(c),n=y.hiddenUpdates,d=n[g],d===null?n[g]=[s]:d.push(s),s.lane=c|536870912),y):null}function fc(n){if(50<Qo)throw Qo=0,Yh=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ka={};function C3(n,s,c,d){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(n,s,c,d){return new C3(n,s,c,d)}function Pu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ar(n,s){var c=n.alternate;return c===null?(c=pn(n.tag,s,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=s,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,s=n.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function ip(n,s){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,s=c.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function mc(n,s,c,d,g,y){var E=0;if(d=n,typeof n=="function")Pu(n)&&(E=1);else if(typeof n=="string")E=Oy(n,c,ht.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case U:return n=pn(31,c,s,g),n.elementType=U,n.lanes=y,n;case x:return Us(c.children,g,y,s);case _:E=8,g|=24;break;case A:return n=pn(12,c,s,g|2),n.elementType=A,n.lanes=y,n;case R:return n=pn(13,c,s,g),n.elementType=R,n.lanes=y,n;case B:return n=pn(19,c,s,g),n.elementType=B,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M:E=10;break t;case T:E=9;break t;case N:E=11;break t;case z:E=14;break t;case G:E=16,d=null;break t}E=29,c=Error(i(130,n===null?"null":typeof n,"")),d=null}return s=pn(E,c,s,g),s.elementType=n,s.type=d,s.lanes=y,s}function Us(n,s,c,d){return n=pn(7,n,d,s),n.lanes=c,n}function Uu(n,s,c){return n=pn(6,n,null,s),n.lanes=c,n}function np(n){var s=pn(18,null,null,0);return s.stateNode=n,s}function Hu(n,s,c){return s=pn(4,n.children!==null?n.children:[],n.key,s),s.lanes=c,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var rp=new WeakMap;function Mn(n,s){if(typeof n=="object"&&n!==null){var c=rp.get(n);return c!==void 0?c:(s={value:n,source:s,stack:j(s)},rp.set(n,s),s)}return{value:n,source:s,stack:j(s)}}var Ea=[],Ta=0,pc=null,Do=0,Rn=[],Dn=0,Wr=null,Jn=1,tr="";function _r(n,s){Ea[Ta++]=Do,Ea[Ta++]=pc,pc=n,Do=s}function sp(n,s,c){Rn[Dn++]=Jn,Rn[Dn++]=tr,Rn[Dn++]=Wr,Wr=n;var d=Jn;n=tr;var g=32-Ye(d)-1;d&=~(1<<g),c+=1;var y=32-Ye(s)+g;if(30<y){var E=g-g%5;y=(d&(1<<E)-1).toString(32),d>>=E,g-=E,Jn=1<<32-Ye(s)+g|c<<g|d,tr=y+n}else Jn=1<<y|c<<g|d,tr=n}function ju(n){n.return!==null&&(_r(n,1),sp(n,1,0))}function Gu(n){for(;n===pc;)pc=Ea[--Ta],Ea[Ta]=null,Do=Ea[--Ta],Ea[Ta]=null;for(;n===Wr;)Wr=Rn[--Dn],Rn[Dn]=null,tr=Rn[--Dn],Rn[Dn]=null,Jn=Rn[--Dn],Rn[Dn]=null}function ap(n,s){Rn[Dn++]=Jn,Rn[Dn++]=tr,Rn[Dn++]=Wr,Jn=s.id,tr=s.overflow,Wr=n}var Mi=null,Xe=null,Se=!1,Qr=null,Nn=!1,qu=Error(i(519));function Jr(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw No(Mn(s,n)),qu}function op(n){var s=n.stateNode,c=n.type,d=n.memoizedProps;switch(s[Ai]=n,s[Fi]=d,c){case"dialog":be("cancel",s),be("close",s);break;case"iframe":case"object":case"embed":be("load",s);break;case"video":case"audio":for(c=0;c<tl.length;c++)be(tl[c],s);break;case"source":be("error",s);break;case"img":case"image":case"link":be("error",s),be("load",s);break;case"details":be("toggle",s);break;case"input":be("invalid",s),xm(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":be("invalid",s);break;case"textarea":be("invalid",s),Sm(s,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||d.suppressHydrationWarning===!0||_g(s.textContent,c)?(d.popover!=null&&(be("beforetoggle",s),be("toggle",s)),d.onScroll!=null&&be("scroll",s),d.onScrollEnd!=null&&be("scrollend",s),d.onClick!=null&&(s.onclick=wr),s=!0):s=!1,s||Jr(n,!0)}function lp(n){for(Mi=n.return;Mi;)switch(Mi.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Mi=Mi.return}}function Ca(n){if(n!==Mi)return!1;if(!Se)return lp(n),Se=!0,!1;var s=n.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||ld(n.type,n.memoizedProps)),c=!c),c&&Xe&&Jr(n),lp(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Xe=Og(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Xe=Og(n)}else s===27?(s=Xe,fs(n.type)?(n=fd,fd=null,Xe=n):Xe=s):Xe=Mi?zn(n.stateNode.nextSibling):null;return!0}function Hs(){Xe=Mi=null,Se=!1}function $u(){var n=Qr;return n!==null&&(an===null?an=n:an.push.apply(an,n),Qr=null),n}function No(n){Qr===null?Qr=[n]:Qr.push(n)}var Vu=L(null),js=null,kr=null;function ts(n,s,c){ot(Vu,s._currentValue),s._currentValue=c}function Er(n){n._currentValue=Vu.current,P(Vu)}function Yu(n,s,c){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===c)break;n=n.return}}function Xu(n,s,c,d){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;t:for(;y!==null;){var I=y;y=g;for(var Z=0;Z<s.length;Z++)if(I.context===s[Z]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),Yu(y.return,c,n),d||(E=null);break t}y=I.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(i(341));E.lanes|=c,y=E.alternate,y!==null&&(y.lanes|=c),Yu(E,c,n),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===n){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function Ma(n,s,c,d){n=null;for(var g=s,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var I=g.type;mn(g.pendingProps.value,E.value)||(n!==null?n.push(I):n=[I])}}else if(g===Lt.current){if(E=g.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(sl):n=[sl])}g=g.return}n!==null&&Xu(s,n,c,d),s.flags|=262144}function gc(n){for(n=n.firstContext;n!==null;){if(!mn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Gs(n){js=n,kr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ri(n){return cp(js,n)}function bc(n,s){return js===null&&Gs(n),cp(n,s)}function cp(n,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},kr===null){if(n===null)throw Error(i(308));kr=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else kr=kr.next=s;return c}var M3=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(c,d){n.push(d)}};this.abort=function(){s.aborted=!0,n.forEach(function(c){return c()})}},R3=l.unstable_scheduleCallback,D3=l.unstable_NormalPriority,gi={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ku(){return{controller:new M3,data:new Map,refCount:0}}function Oo(n){n.refCount--,n.refCount===0&&R3(D3,function(){n.controller.abort()})}var zo=null,Zu=0,Ra=0,Da=null;function N3(n,s){if(zo===null){var c=zo=[];Zu=0,Ra=Jh(),Da={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Zu++,s.then(up,up),s}function up(){if(--Zu===0&&zo!==null){Da!==null&&(Da.status="fulfilled");var n=zo;zo=null,Ra=0,Da=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function O3(n,s){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return n.then(function(){d.status="fulfilled",d.value=s;for(var g=0;g<c.length;g++)(0,c[g])(s)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var hp=V.S;V.S=function(n,s){X1=zt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&N3(n,s),hp!==null&&hp(n,s)};var qs=L(null);function Wu(){var n=qs.current;return n!==null?n:je.pooledCache}function vc(n,s){s===null?ot(qs,qs.current):ot(qs,s.pool)}function dp(){var n=Wu();return n===null?null:{parent:gi._currentValue,pool:n}}var Na=Error(i(460)),Qu=Error(i(474)),yc=Error(i(542)),xc={then:function(){}};function fp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function mp(n,s,c){switch(c=n[c],c===void 0?n.push(s):c!==s&&(s.then(wr,wr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gp(n),n;default:if(typeof s.status=="string")s.then(wr,wr);else{if(n=je,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(d){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=d}},function(d){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,gp(n),n}throw Vs=s,Na}}function $s(n){try{var s=n._init;return s(n._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Vs=c,Na):c}}var Vs=null;function pp(){if(Vs===null)throw Error(i(459));var n=Vs;return Vs=null,n}function gp(n){if(n===Na||n===yc)throw Error(i(483))}var Oa=null,Lo=0;function wc(n){var s=Lo;return Lo+=1,Oa===null&&(Oa=[]),mp(Oa,n,s)}function Bo(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Sc(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function bp(n){function s(tt,W){if(n){var st=tt.deletions;st===null?(tt.deletions=[W],tt.flags|=16):st.push(W)}}function c(tt,W){if(!n)return null;for(;W!==null;)s(tt,W),W=W.sibling;return null}function d(tt){for(var W=new Map;tt!==null;)tt.key!==null?W.set(tt.key,tt):W.set(tt.index,tt),tt=tt.sibling;return W}function g(tt,W){return tt=Ar(tt,W),tt.index=0,tt.sibling=null,tt}function y(tt,W,st){return tt.index=st,n?(st=tt.alternate,st!==null?(st=st.index,st<W?(tt.flags|=67108866,W):st):(tt.flags|=67108866,W)):(tt.flags|=1048576,W)}function E(tt){return n&&tt.alternate===null&&(tt.flags|=67108866),tt}function I(tt,W,st,wt){return W===null||W.tag!==6?(W=Uu(st,tt.mode,wt),W.return=tt,W):(W=g(W,st),W.return=tt,W)}function Z(tt,W,st,wt){var Qt=st.type;return Qt===x?xt(tt,W,st.props.children,wt,st.key):W!==null&&(W.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===G&&$s(Qt)===W.type)?(W=g(W,st.props),Bo(W,st),W.return=tt,W):(W=mc(st.type,st.key,st.props,null,tt.mode,wt),Bo(W,st),W.return=tt,W)}function lt(tt,W,st,wt){return W===null||W.tag!==4||W.stateNode.containerInfo!==st.containerInfo||W.stateNode.implementation!==st.implementation?(W=Hu(st,tt.mode,wt),W.return=tt,W):(W=g(W,st.children||[]),W.return=tt,W)}function xt(tt,W,st,wt,Qt){return W===null||W.tag!==7?(W=Us(st,tt.mode,wt,Qt),W.return=tt,W):(W=g(W,st),W.return=tt,W)}function St(tt,W,st){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Uu(""+W,tt.mode,st),W.return=tt,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return st=mc(W.type,W.key,W.props,null,tt.mode,st),Bo(st,W),st.return=tt,st;case w:return W=Hu(W,tt.mode,st),W.return=tt,W;case G:return W=$s(W),St(tt,W,st)}if(rt(W)||H(W))return W=Us(W,tt.mode,st,null),W.return=tt,W;if(typeof W.then=="function")return St(tt,wc(W),st);if(W.$$typeof===M)return St(tt,bc(tt,W),st);Sc(tt,W)}return null}function ct(tt,W,st,wt){var Qt=W!==null?W.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Qt!==null?null:I(tt,W,""+st,wt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case v:return st.key===Qt?Z(tt,W,st,wt):null;case w:return st.key===Qt?lt(tt,W,st,wt):null;case G:return st=$s(st),ct(tt,W,st,wt)}if(rt(st)||H(st))return Qt!==null?null:xt(tt,W,st,wt,null);if(typeof st.then=="function")return ct(tt,W,wc(st),wt);if(st.$$typeof===M)return ct(tt,W,bc(tt,st),wt);Sc(tt,st)}return null}function bt(tt,W,st,wt,Qt){if(typeof wt=="string"&&wt!==""||typeof wt=="number"||typeof wt=="bigint")return tt=tt.get(st)||null,I(W,tt,""+wt,Qt);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case v:return tt=tt.get(wt.key===null?st:wt.key)||null,Z(W,tt,wt,Qt);case w:return tt=tt.get(wt.key===null?st:wt.key)||null,lt(W,tt,wt,Qt);case G:return wt=$s(wt),bt(tt,W,st,wt,Qt)}if(rt(wt)||H(wt))return tt=tt.get(st)||null,xt(W,tt,wt,Qt,null);if(typeof wt.then=="function")return bt(tt,W,st,wc(wt),Qt);if(wt.$$typeof===M)return bt(tt,W,st,bc(W,wt),Qt);Sc(W,wt)}return null}function Vt(tt,W,st,wt){for(var Qt=null,Te=null,Kt=W,he=W=0,ye=null;Kt!==null&&he<st.length;he++){Kt.index>he?(ye=Kt,Kt=null):ye=Kt.sibling;var Ce=ct(tt,Kt,st[he],wt);if(Ce===null){Kt===null&&(Kt=ye);break}n&&Kt&&Ce.alternate===null&&s(tt,Kt),W=y(Ce,W,he),Te===null?Qt=Ce:Te.sibling=Ce,Te=Ce,Kt=ye}if(he===st.length)return c(tt,Kt),Se&&_r(tt,he),Qt;if(Kt===null){for(;he<st.length;he++)Kt=St(tt,st[he],wt),Kt!==null&&(W=y(Kt,W,he),Te===null?Qt=Kt:Te.sibling=Kt,Te=Kt);return Se&&_r(tt,he),Qt}for(Kt=d(Kt);he<st.length;he++)ye=bt(Kt,tt,he,st[he],wt),ye!==null&&(n&&ye.alternate!==null&&Kt.delete(ye.key===null?he:ye.key),W=y(ye,W,he),Te===null?Qt=ye:Te.sibling=ye,Te=ye);return n&&Kt.forEach(function(vs){return s(tt,vs)}),Se&&_r(tt,he),Qt}function ie(tt,W,st,wt){if(st==null)throw Error(i(151));for(var Qt=null,Te=null,Kt=W,he=W=0,ye=null,Ce=st.next();Kt!==null&&!Ce.done;he++,Ce=st.next()){Kt.index>he?(ye=Kt,Kt=null):ye=Kt.sibling;var vs=ct(tt,Kt,Ce.value,wt);if(vs===null){Kt===null&&(Kt=ye);break}n&&Kt&&vs.alternate===null&&s(tt,Kt),W=y(vs,W,he),Te===null?Qt=vs:Te.sibling=vs,Te=vs,Kt=ye}if(Ce.done)return c(tt,Kt),Se&&_r(tt,he),Qt;if(Kt===null){for(;!Ce.done;he++,Ce=st.next())Ce=St(tt,Ce.value,wt),Ce!==null&&(W=y(Ce,W,he),Te===null?Qt=Ce:Te.sibling=Ce,Te=Ce);return Se&&_r(tt,he),Qt}for(Kt=d(Kt);!Ce.done;he++,Ce=st.next())Ce=bt(Kt,tt,he,Ce.value,wt),Ce!==null&&(n&&Ce.alternate!==null&&Kt.delete(Ce.key===null?he:Ce.key),W=y(Ce,W,he),Te===null?Qt=Ce:Te.sibling=Ce,Te=Ce);return n&&Kt.forEach(function(qy){return s(tt,qy)}),Se&&_r(tt,he),Qt}function Ue(tt,W,st,wt){if(typeof st=="object"&&st!==null&&st.type===x&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case v:t:{for(var Qt=st.key;W!==null;){if(W.key===Qt){if(Qt=st.type,Qt===x){if(W.tag===7){c(tt,W.sibling),wt=g(W,st.props.children),wt.return=tt,tt=wt;break t}}else if(W.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===G&&$s(Qt)===W.type){c(tt,W.sibling),wt=g(W,st.props),Bo(wt,st),wt.return=tt,tt=wt;break t}c(tt,W);break}else s(tt,W);W=W.sibling}st.type===x?(wt=Us(st.props.children,tt.mode,wt,st.key),wt.return=tt,tt=wt):(wt=mc(st.type,st.key,st.props,null,tt.mode,wt),Bo(wt,st),wt.return=tt,tt=wt)}return E(tt);case w:t:{for(Qt=st.key;W!==null;){if(W.key===Qt)if(W.tag===4&&W.stateNode.containerInfo===st.containerInfo&&W.stateNode.implementation===st.implementation){c(tt,W.sibling),wt=g(W,st.children||[]),wt.return=tt,tt=wt;break t}else{c(tt,W);break}else s(tt,W);W=W.sibling}wt=Hu(st,tt.mode,wt),wt.return=tt,tt=wt}return E(tt);case G:return st=$s(st),Ue(tt,W,st,wt)}if(rt(st))return Vt(tt,W,st,wt);if(H(st)){if(Qt=H(st),typeof Qt!="function")throw Error(i(150));return st=Qt.call(st),ie(tt,W,st,wt)}if(typeof st.then=="function")return Ue(tt,W,wc(st),wt);if(st.$$typeof===M)return Ue(tt,W,bc(tt,st),wt);Sc(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,W!==null&&W.tag===6?(c(tt,W.sibling),wt=g(W,st),wt.return=tt,tt=wt):(c(tt,W),wt=Uu(st,tt.mode,wt),wt.return=tt,tt=wt),E(tt)):c(tt,W)}return function(tt,W,st,wt){try{Lo=0;var Qt=Ue(tt,W,st,wt);return Oa=null,Qt}catch(Kt){if(Kt===Na||Kt===yc)throw Kt;var Te=pn(29,Kt,null,tt.mode);return Te.lanes=wt,Te.return=tt,Te}finally{}}}var Ys=bp(!0),vp=bp(!1),es=!1;function Ju(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function th(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function is(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ns(n,s,c){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Oe&2)!==0){var g=d.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),d.pending=s,s=fc(n),ep(n,null,c),s}return dc(n,d,s,c),fc(n)}function Io(n,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var d=s.lanes;d&=n.pendingLanes,c|=d,s.lanes=c,Zl(n,c)}}function eh(n,s){var c=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,c=c.next}while(c!==null);y===null?g=y=s:y=y.next=s}else g=y=s;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=s:n.next=s,c.lastBaseUpdate=s}var ih=!1;function Fo(){if(ih){var n=Da;if(n!==null)throw n}}function Po(n,s,c,d){ih=!1;var g=n.updateQueue;es=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var Z=I,lt=Z.next;Z.next=null,E===null?y=lt:E.next=lt,E=Z;var xt=n.alternate;xt!==null&&(xt=xt.updateQueue,I=xt.lastBaseUpdate,I!==E&&(I===null?xt.firstBaseUpdate=lt:I.next=lt,xt.lastBaseUpdate=Z))}if(y!==null){var St=g.baseState;E=0,xt=lt=Z=null,I=y;do{var ct=I.lane&-536870913,bt=ct!==I.lane;if(bt?(ve&ct)===ct:(d&ct)===ct){ct!==0&&ct===Ra&&(ih=!0),xt!==null&&(xt=xt.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});t:{var Vt=n,ie=I;ct=s;var Ue=c;switch(ie.tag){case 1:if(Vt=ie.payload,typeof Vt=="function"){St=Vt.call(Ue,St,ct);break t}St=Vt;break t;case 3:Vt.flags=Vt.flags&-65537|128;case 0:if(Vt=ie.payload,ct=typeof Vt=="function"?Vt.call(Ue,St,ct):Vt,ct==null)break t;St=p({},St,ct);break t;case 2:es=!0}}ct=I.callback,ct!==null&&(n.flags|=64,bt&&(n.flags|=8192),bt=g.callbacks,bt===null?g.callbacks=[ct]:bt.push(ct))}else bt={lane:ct,tag:I.tag,payload:I.payload,callback:I.callback,next:null},xt===null?(lt=xt=bt,Z=St):xt=xt.next=bt,E|=ct;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;bt=I,I=bt.next,bt.next=null,g.lastBaseUpdate=bt,g.shared.pending=null}}while(!0);xt===null&&(Z=St),g.baseState=Z,g.firstBaseUpdate=lt,g.lastBaseUpdate=xt,y===null&&(g.shared.lanes=0),ls|=E,n.lanes=E,n.memoizedState=St}}function yp(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function xp(n,s){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)yp(c[n],s)}var za=L(null),Ac=L(0);function wp(n,s){n=Lr,ot(Ac,n),ot(za,s),Lr=n|s.baseLanes}function nh(){ot(Ac,Lr),ot(za,za.current)}function rh(){Lr=Ac.current,P(za),P(Ac)}var gn=L(null),On=null;function rs(n){var s=n.alternate;ot(hi,hi.current&1),ot(gn,n),On===null&&(s===null||za.current!==null||s.memoizedState!==null)&&(On=n)}function sh(n){ot(hi,hi.current),ot(gn,n),On===null&&(On=n)}function Sp(n){n.tag===22?(ot(hi,hi.current),ot(gn,n),On===null&&(On=n)):ss()}function ss(){ot(hi,hi.current),ot(gn,gn.current)}function bn(n){P(gn),On===n&&(On=null),P(hi)}var hi=L(0);function _c(n){for(var s=n;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||hd(c)||dd(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Tr=0,ce=null,Fe=null,bi=null,kc=!1,La=!1,Xs=!1,Ec=0,Uo=0,Ba=null,z3=0;function ai(){throw Error(i(321))}function ah(n,s){if(s===null)return!1;for(var c=0;c<s.length&&c<n.length;c++)if(!mn(n[c],s[c]))return!1;return!0}function oh(n,s,c,d,g,y){return Tr=y,ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,V.H=n===null||n.memoizedState===null?s1:Sh,Xs=!1,y=c(d,g),Xs=!1,La&&(y=_p(s,c,d,g)),Ap(n),y}function Ap(n){V.H=Go;var s=Fe!==null&&Fe.next!==null;if(Tr=0,bi=Fe=ce=null,kc=!1,Uo=0,Ba=null,s)throw Error(i(300));n===null||vi||(n=n.dependencies,n!==null&&gc(n)&&(vi=!0))}function _p(n,s,c,d){ce=n;var g=0;do{if(La&&(Ba=null),Uo=0,La=!1,25<=g)throw Error(i(301));if(g+=1,bi=Fe=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}V.H=a1,y=s(c,d)}while(La);return y}function L3(){var n=V.H,s=n.useState()[0];return s=typeof s.then=="function"?Ho(s):s,n=n.useState()[0],(Fe!==null?Fe.memoizedState:null)!==n&&(ce.flags|=1024),s}function lh(){var n=Ec!==0;return Ec=0,n}function ch(n,s,c){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~c}function uh(n){if(kc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}kc=!1}Tr=0,bi=Fe=ce=null,La=!1,Uo=Ec=0,Ba=null}function ji(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bi===null?ce.memoizedState=bi=n:bi=bi.next=n,bi}function di(){if(Fe===null){var n=ce.alternate;n=n!==null?n.memoizedState:null}else n=Fe.next;var s=bi===null?ce.memoizedState:bi.next;if(s!==null)bi=s,Fe=n;else{if(n===null)throw ce.alternate===null?Error(i(467)):Error(i(310));Fe=n,n={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},bi===null?ce.memoizedState=bi=n:bi=bi.next=n}return bi}function Tc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ho(n){var s=Uo;return Uo+=1,Ba===null&&(Ba=[]),n=mp(Ba,n,s),s=ce,(bi===null?s.memoizedState:bi.next)===null&&(s=s.alternate,V.H=s===null||s.memoizedState===null?s1:Sh),n}function Cc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ho(n);if(n.$$typeof===M)return Ri(n)}throw Error(i(438,String(n)))}function hh(n){var s=null,c=ce.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var d=ce.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Tc(),ce.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(n),d=0;d<n;d++)c[d]=et;return s.index++,c}function Cr(n,s){return typeof s=="function"?s(n):s}function Mc(n){var s=di();return dh(s,Fe,n)}function dh(n,s,c){var d=n.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var g=n.baseQueue,y=d.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}s.baseQueue=g=y,d.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{s=g.next;var I=E=null,Z=null,lt=s,xt=!1;do{var St=lt.lane&-536870913;if(St!==lt.lane?(ve&St)===St:(Tr&St)===St){var ct=lt.revertLane;if(ct===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,gesture:null,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),St===Ra&&(xt=!0);else if((Tr&ct)===ct){lt=lt.next,ct===Ra&&(xt=!0);continue}else St={lane:0,revertLane:lt.revertLane,gesture:null,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Z===null?(I=Z=St,E=y):Z=Z.next=St,ce.lanes|=ct,ls|=ct;St=lt.action,Xs&&c(y,St),y=lt.hasEagerState?lt.eagerState:c(y,St)}else ct={lane:St,revertLane:lt.revertLane,gesture:lt.gesture,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Z===null?(I=Z=ct,E=y):Z=Z.next=ct,ce.lanes|=St,ls|=St;lt=lt.next}while(lt!==null&&lt!==s);if(Z===null?E=y:Z.next=I,!mn(y,n.memoizedState)&&(vi=!0,xt&&(c=Da,c!==null)))throw c;n.memoizedState=y,n.baseState=E,n.baseQueue=Z,d.lastRenderedState=y}return g===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function fh(n){var s=di(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=n;var d=c.dispatch,g=c.pending,y=s.memoizedState;if(g!==null){c.pending=null;var E=g=g.next;do y=n(y,E.action),E=E.next;while(E!==g);mn(y,s.memoizedState)||(vi=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),c.lastRenderedState=y}return[y,d]}function kp(n,s,c){var d=ce,g=di(),y=Se;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=s();var E=!mn((Fe||g).memoizedState,c);if(E&&(g.memoizedState=c,vi=!0),g=g.queue,gh(Cp.bind(null,d,g,n),[n]),g.getSnapshot!==s||E||bi!==null&&bi.memoizedState.tag&1){if(d.flags|=2048,Ia(9,{destroy:void 0},Tp.bind(null,d,g,c,s),null),je===null)throw Error(i(349));y||(Tr&127)!==0||Ep(d,s,c)}return c}function Ep(n,s,c){n.flags|=16384,n={getSnapshot:s,value:c},s=ce.updateQueue,s===null?(s=Tc(),ce.updateQueue=s,s.stores=[n]):(c=s.stores,c===null?s.stores=[n]:c.push(n))}function Tp(n,s,c,d){s.value=c,s.getSnapshot=d,Mp(s)&&Rp(n)}function Cp(n,s,c){return c(function(){Mp(s)&&Rp(n)})}function Mp(n){var s=n.getSnapshot;n=n.value;try{var c=s();return!mn(n,c)}catch{return!0}}function Rp(n){var s=Ps(n,2);s!==null&&on(s,n,2)}function mh(n){var s=ji();if(typeof n=="function"){var c=n;if(n=c(),Xs){Qi(!0);try{c()}finally{Qi(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:n},s}function Dp(n,s,c,d){return n.baseState=c,dh(n,Fe,typeof d=="function"?d:Cr)}function B3(n,s,c,d,g){if(Nc(n))throw Error(i(485));if(n=s.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};V.T!==null?c(!0):y.isTransition=!1,d(y),c=s.pending,c===null?(y.next=s.pending=y,Np(s,y)):(y.next=c.next,s.pending=c.next=y)}}function Np(n,s){var c=s.action,d=s.payload,g=n.state;if(s.isTransition){var y=V.T,E={};V.T=E;try{var I=c(g,d),Z=V.S;Z!==null&&Z(E,I),Op(n,s,I)}catch(lt){ph(n,s,lt)}finally{y!==null&&E.types!==null&&(y.types=E.types),V.T=y}}else try{y=c(g,d),Op(n,s,y)}catch(lt){ph(n,s,lt)}}function Op(n,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){zp(n,s,d)},function(d){return ph(n,s,d)}):zp(n,s,c)}function zp(n,s,c){s.status="fulfilled",s.value=c,Lp(s),n.state=c,s=n.pending,s!==null&&(c=s.next,c===s?n.pending=null:(c=c.next,s.next=c,Np(n,c)))}function ph(n,s,c){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=c,Lp(s),s=s.next;while(s!==d)}n.action=null}function Lp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Bp(n,s){return s}function Ip(n,s){if(Se){var c=je.formState;if(c!==null){t:{var d=ce;if(Se){if(Xe){e:{for(var g=Xe,y=Nn;g.nodeType!==8;){if(!y){g=null;break e}if(g=zn(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Xe=zn(g.nextSibling),d=g.data==="F!";break t}}Jr(d)}d=!1}d&&(s=c[0])}}return c=ji(),c.memoizedState=c.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bp,lastRenderedState:s},c.queue=d,c=i1.bind(null,ce,d),d.dispatch=c,d=mh(!1),y=wh.bind(null,ce,!1,d.queue),d=ji(),g={state:s,dispatch:null,action:n,pending:null},d.queue=g,c=B3.bind(null,ce,g,y,c),g.dispatch=c,d.memoizedState=n,[s,c,!1]}function Fp(n){var s=di();return Pp(s,Fe,n)}function Pp(n,s,c){if(s=dh(n,s,Bp)[0],n=Mc(Cr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=Ho(s)}catch(E){throw E===Na?yc:E}else d=s;s=di();var g=s.queue,y=g.dispatch;return c!==s.memoizedState&&(ce.flags|=2048,Ia(9,{destroy:void 0},I3.bind(null,g,c),null)),[d,y,n]}function I3(n,s){n.action=s}function Up(n){var s=di(),c=Fe;if(c!==null)return Pp(s,c,n);di(),s=s.memoizedState,c=di();var d=c.queue.dispatch;return c.memoizedState=n,[s,d,!1]}function Ia(n,s,c,d){return n={tag:n,create:c,deps:d,inst:s,next:null},s=ce.updateQueue,s===null&&(s=Tc(),ce.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=n.next=n:(d=c.next,c.next=n,n.next=d,s.lastEffect=n),n}function Hp(){return di().memoizedState}function Rc(n,s,c,d){var g=ji();ce.flags|=n,g.memoizedState=Ia(1|s,{destroy:void 0},c,d===void 0?null:d)}function Dc(n,s,c,d){var g=di();d=d===void 0?null:d;var y=g.memoizedState.inst;Fe!==null&&d!==null&&ah(d,Fe.memoizedState.deps)?g.memoizedState=Ia(s,y,c,d):(ce.flags|=n,g.memoizedState=Ia(1|s,y,c,d))}function jp(n,s){Rc(8390656,8,n,s)}function gh(n,s){Dc(2048,8,n,s)}function F3(n){ce.flags|=4;var s=ce.updateQueue;if(s===null)s=Tc(),ce.updateQueue=s,s.events=[n];else{var c=s.events;c===null?s.events=[n]:c.push(n)}}function Gp(n){var s=di().memoizedState;return F3({ref:s,nextImpl:n}),function(){if((Oe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function qp(n,s){return Dc(4,2,n,s)}function $p(n,s){return Dc(4,4,n,s)}function Vp(n,s){if(typeof s=="function"){n=n();var c=s(n);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Yp(n,s,c){c=c!=null?c.concat([n]):null,Dc(4,4,Vp.bind(null,s,n),c)}function bh(){}function Xp(n,s){var c=di();s=s===void 0?null:s;var d=c.memoizedState;return s!==null&&ah(s,d[1])?d[0]:(c.memoizedState=[n,s],n)}function Kp(n,s){var c=di();s=s===void 0?null:s;var d=c.memoizedState;if(s!==null&&ah(s,d[1]))return d[0];if(d=n(),Xs){Qi(!0);try{n()}finally{Qi(!1)}}return c.memoizedState=[d,s],d}function vh(n,s,c){return c===void 0||(Tr&1073741824)!==0&&(ve&261930)===0?n.memoizedState=s:(n.memoizedState=c,n=Z1(),ce.lanes|=n,ls|=n,c)}function Zp(n,s,c,d){return mn(c,s)?c:za.current!==null?(n=vh(n,c,d),mn(n,s)||(vi=!0),n):(Tr&42)===0||(Tr&1073741824)!==0&&(ve&261930)===0?(vi=!0,n.memoizedState=c):(n=Z1(),ce.lanes|=n,ls|=n,s)}function Wp(n,s,c,d,g){var y=K.p;K.p=y!==0&&8>y?y:8;var E=V.T,I={};V.T=I,wh(n,!1,s,c);try{var Z=g(),lt=V.S;if(lt!==null&&lt(I,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var xt=O3(Z,d);jo(n,s,xt,xn(n))}else jo(n,s,d,xn(n))}catch(St){jo(n,s,{then:function(){},status:"rejected",reason:St},xn())}finally{K.p=y,E!==null&&I.types!==null&&(E.types=I.types),V.T=E}}function P3(){}function yh(n,s,c,d){if(n.tag!==5)throw Error(i(476));var g=Qp(n).queue;Wp(n,g,s,yt,c===null?P3:function(){return Jp(n),c(d)})}function Qp(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:yt},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:c},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Jp(n){var s=Qp(n);s.next===null&&(s=n.alternate.memoizedState),jo(n,s.next.queue,{},xn())}function xh(){return Ri(sl)}function t1(){return di().memoizedState}function e1(){return di().memoizedState}function U3(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var c=xn();n=is(c);var d=ns(s,n,c);d!==null&&(on(d,s,c),Io(d,s,c)),s={cache:Ku()},n.payload=s;return}s=s.return}}function H3(n,s,c){var d=xn();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Nc(n)?n1(s,c):(c=Fu(n,s,c,d),c!==null&&(on(c,n,d),r1(c,s,d)))}function i1(n,s,c){var d=xn();jo(n,s,c,d)}function jo(n,s,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Nc(n))n1(s,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var E=s.lastRenderedState,I=y(E,c);if(g.hasEagerState=!0,g.eagerState=I,mn(I,E))return dc(n,s,g,0),je===null&&hc(),!1}catch{}finally{}if(c=Fu(n,s,g,d),c!==null)return on(c,n,d),r1(c,s,d),!0}return!1}function wh(n,s,c,d){if(d={lane:2,revertLane:Jh(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Nc(n)){if(s)throw Error(i(479))}else s=Fu(n,c,d,2),s!==null&&on(s,n,2)}function Nc(n){var s=n.alternate;return n===ce||s!==null&&s===ce}function n1(n,s){La=kc=!0;var c=n.pending;c===null?s.next=s:(s.next=c.next,c.next=s),n.pending=s}function r1(n,s,c){if((c&4194048)!==0){var d=s.lanes;d&=n.pendingLanes,c|=d,s.lanes=c,Zl(n,c)}}var Go={readContext:Ri,use:Cc,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useLayoutEffect:ai,useInsertionEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useSyncExternalStore:ai,useId:ai,useHostTransitionStatus:ai,useFormState:ai,useActionState:ai,useOptimistic:ai,useMemoCache:ai,useCacheRefresh:ai};Go.useEffectEvent=ai;var s1={readContext:Ri,use:Cc,useCallback:function(n,s){return ji().memoizedState=[n,s===void 0?null:s],n},useContext:Ri,useEffect:jp,useImperativeHandle:function(n,s,c){c=c!=null?c.concat([n]):null,Rc(4194308,4,Vp.bind(null,s,n),c)},useLayoutEffect:function(n,s){return Rc(4194308,4,n,s)},useInsertionEffect:function(n,s){Rc(4,2,n,s)},useMemo:function(n,s){var c=ji();s=s===void 0?null:s;var d=n();if(Xs){Qi(!0);try{n()}finally{Qi(!1)}}return c.memoizedState=[d,s],d},useReducer:function(n,s,c){var d=ji();if(c!==void 0){var g=c(s);if(Xs){Qi(!0);try{c(s)}finally{Qi(!1)}}}else g=s;return d.memoizedState=d.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},d.queue=n,n=n.dispatch=H3.bind(null,ce,n),[d.memoizedState,n]},useRef:function(n){var s=ji();return n={current:n},s.memoizedState=n},useState:function(n){n=mh(n);var s=n.queue,c=i1.bind(null,ce,s);return s.dispatch=c,[n.memoizedState,c]},useDebugValue:bh,useDeferredValue:function(n,s){var c=ji();return vh(c,n,s)},useTransition:function(){var n=mh(!1);return n=Wp.bind(null,ce,n.queue,!0,!1),ji().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,c){var d=ce,g=ji();if(Se){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),je===null)throw Error(i(349));(ve&127)!==0||Ep(d,s,c)}g.memoizedState=c;var y={value:c,getSnapshot:s};return g.queue=y,jp(Cp.bind(null,d,y,n),[n]),d.flags|=2048,Ia(9,{destroy:void 0},Tp.bind(null,d,y,c,s),null),c},useId:function(){var n=ji(),s=je.identifierPrefix;if(Se){var c=tr,d=Jn;c=(d&~(1<<32-Ye(d)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Ec++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=z3++,s="_"+s+"r_"+c.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:xh,useFormState:Ip,useActionState:Ip,useOptimistic:function(n){var s=ji();s.memoizedState=s.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=wh.bind(null,ce,!0,c),c.dispatch=s,[n,s]},useMemoCache:hh,useCacheRefresh:function(){return ji().memoizedState=U3.bind(null,ce)},useEffectEvent:function(n){var s=ji(),c={impl:n};return s.memoizedState=c,function(){if((Oe&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},Sh={readContext:Ri,use:Cc,useCallback:Xp,useContext:Ri,useEffect:gh,useImperativeHandle:Yp,useInsertionEffect:qp,useLayoutEffect:$p,useMemo:Kp,useReducer:Mc,useRef:Hp,useState:function(){return Mc(Cr)},useDebugValue:bh,useDeferredValue:function(n,s){var c=di();return Zp(c,Fe.memoizedState,n,s)},useTransition:function(){var n=Mc(Cr)[0],s=di().memoizedState;return[typeof n=="boolean"?n:Ho(n),s]},useSyncExternalStore:kp,useId:t1,useHostTransitionStatus:xh,useFormState:Fp,useActionState:Fp,useOptimistic:function(n,s){var c=di();return Dp(c,Fe,n,s)},useMemoCache:hh,useCacheRefresh:e1};Sh.useEffectEvent=Gp;var a1={readContext:Ri,use:Cc,useCallback:Xp,useContext:Ri,useEffect:gh,useImperativeHandle:Yp,useInsertionEffect:qp,useLayoutEffect:$p,useMemo:Kp,useReducer:fh,useRef:Hp,useState:function(){return fh(Cr)},useDebugValue:bh,useDeferredValue:function(n,s){var c=di();return Fe===null?vh(c,n,s):Zp(c,Fe.memoizedState,n,s)},useTransition:function(){var n=fh(Cr)[0],s=di().memoizedState;return[typeof n=="boolean"?n:Ho(n),s]},useSyncExternalStore:kp,useId:t1,useHostTransitionStatus:xh,useFormState:Up,useActionState:Up,useOptimistic:function(n,s){var c=di();return Fe!==null?Dp(c,Fe,n,s):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:hh,useCacheRefresh:e1};a1.useEffectEvent=Gp;function Ah(n,s,c,d){s=n.memoizedState,c=c(d,s),c=c==null?s:p({},s,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var _h={enqueueSetState:function(n,s,c){n=n._reactInternals;var d=xn(),g=is(d);g.payload=s,c!=null&&(g.callback=c),s=ns(n,g,d),s!==null&&(on(s,n,d),Io(s,n,d))},enqueueReplaceState:function(n,s,c){n=n._reactInternals;var d=xn(),g=is(d);g.tag=1,g.payload=s,c!=null&&(g.callback=c),s=ns(n,g,d),s!==null&&(on(s,n,d),Io(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var c=xn(),d=is(c);d.tag=2,s!=null&&(d.callback=s),s=ns(n,d,c),s!==null&&(on(s,n,c),Io(s,n,c))}};function o1(n,s,c,d,g,y,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,E):s.prototype&&s.prototype.isPureReactComponent?!Mo(c,d)||!Mo(g,y):!0}function l1(n,s,c,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==n&&_h.enqueueReplaceState(s,s.state,null)}function Ks(n,s){var c=s;if("ref"in s){c={};for(var d in s)d!=="ref"&&(c[d]=s[d])}if(n=n.defaultProps){c===s&&(c=p({},c));for(var g in n)c[g]===void 0&&(c[g]=n[g])}return c}function c1(n){uc(n)}function u1(n){console.error(n)}function h1(n){uc(n)}function Oc(n,s){try{var c=n.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function d1(n,s,c){try{var d=n.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function kh(n,s,c){return c=is(c),c.tag=3,c.payload={element:null},c.callback=function(){Oc(n,s)},c}function f1(n){return n=is(n),n.tag=3,n}function m1(n,s,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;n.payload=function(){return g(y)},n.callback=function(){d1(s,c,d)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){d1(s,c,d),typeof g!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function j3(n,s,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=c.alternate,s!==null&&Ma(s,c,g,!0),c=gn.current,c!==null){switch(c.tag){case 31:case 13:return On===null?$c():c.alternate===null&&oi===0&&(oi=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===xc?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([d]):s.add(d),Zh(n,d,g)),!1;case 22:return c.flags|=65536,d===xc?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([d]):c.add(d)),Zh(n,d,g)),!1}throw Error(i(435,c.tag))}return Zh(n,d,g),$c(),!1}if(Se)return s=gn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,d!==qu&&(n=Error(i(422),{cause:d}),No(Mn(n,c)))):(d!==qu&&(s=Error(i(423),{cause:d}),No(Mn(s,c))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,d=Mn(d,c),g=kh(n.stateNode,d,g),eh(n,g),oi!==4&&(oi=2)),!1;var y=Error(i(520),{cause:d});if(y=Mn(y,c),Wo===null?Wo=[y]:Wo.push(y),oi!==4&&(oi=2),s===null)return!0;d=Mn(d,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,n=g&-g,c.lanes|=n,n=kh(c.stateNode,d,n),eh(c,n),!1;case 1:if(s=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(cs===null||!cs.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=f1(g),m1(g,n,c,d),eh(c,g),!1}c=c.return}while(c!==null);return!1}var Eh=Error(i(461)),vi=!1;function Di(n,s,c,d){s.child=n===null?vp(s,null,c,d):Ys(s,n.child,c,d)}function p1(n,s,c,d,g){c=c.render;var y=s.ref;if("ref"in d){var E={};for(var I in d)I!=="ref"&&(E[I]=d[I])}else E=d;return Gs(s),d=oh(n,s,c,E,y,g),I=lh(),n!==null&&!vi?(ch(n,s,g),Mr(n,s,g)):(Se&&I&&ju(s),s.flags|=1,Di(n,s,d,g),s.child)}function g1(n,s,c,d,g){if(n===null){var y=c.type;return typeof y=="function"&&!Pu(y)&&y.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=y,b1(n,s,y,d,g)):(n=mc(c.type,null,d,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!zh(n,g)){var E=y.memoizedProps;if(c=c.compare,c=c!==null?c:Mo,c(E,d)&&n.ref===s.ref)return Mr(n,s,g)}return s.flags|=1,n=Ar(y,d),n.ref=s.ref,n.return=s,s.child=n}function b1(n,s,c,d,g){if(n!==null){var y=n.memoizedProps;if(Mo(y,d)&&n.ref===s.ref)if(vi=!1,s.pendingProps=d=y,zh(n,g))(n.flags&131072)!==0&&(vi=!0);else return s.lanes=n.lanes,Mr(n,s,g)}return Th(n,s,c,d,g)}function v1(n,s,c,d){var g=d.children,y=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,n!==null){for(d=s.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~y}else d=0,s.child=null;return y1(n,s,y,c,d)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&vc(s,y!==null?y.cachePool:null),y!==null?wp(s,y):nh(),Sp(s);else return d=s.lanes=536870912,y1(n,s,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(vc(s,y.cachePool),wp(s,y),ss(),s.memoizedState=null):(n!==null&&vc(s,null),nh(),ss());return Di(n,s,g,c),s.child}function qo(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function y1(n,s,c,d,g){var y=Wu();return y=y===null?null:{parent:gi._currentValue,pool:y},s.memoizedState={baseLanes:c,cachePool:y},n!==null&&vc(s,null),nh(),Sp(s),n!==null&&Ma(n,s,d,!0),s.childLanes=g,null}function zc(n,s){return s=Bc({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function x1(n,s,c){return Ys(s,n.child,null,c),n=zc(s,s.pendingProps),n.flags|=2,bn(s),s.memoizedState=null,n}function G3(n,s,c){var d=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Se){if(d.mode==="hidden")return n=zc(s,d),s.lanes=536870912,qo(null,n);if(sh(s),(n=Xe)?(n=Ng(n,Nn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Wr!==null?{id:Jn,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},c=np(n),c.return=s,s.child=c,Mi=s,Xe=null)):n=null,n===null)throw Jr(s);return s.lanes=536870912,null}return zc(s,d)}var y=n.memoizedState;if(y!==null){var E=y.dehydrated;if(sh(s),g)if(s.flags&256)s.flags&=-257,s=x1(n,s,c);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(vi||Ma(n,s,c,!1),g=(c&n.childLanes)!==0,vi||g){if(d=je,d!==null&&(E=Wl(d,c),E!==0&&E!==y.retryLane))throw y.retryLane=E,Ps(n,E),on(d,n,E),Eh;$c(),s=x1(n,s,c)}else n=y.treeContext,Xe=zn(E.nextSibling),Mi=s,Se=!0,Qr=null,Nn=!1,n!==null&&ap(s,n),s=zc(s,d),s.flags|=4096;return s}return n=Ar(n.child,{mode:d.mode,children:d.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Lc(n,s){var c=s.ref;if(c===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(n===null||n.ref!==c)&&(s.flags|=4194816)}}function Th(n,s,c,d,g){return Gs(s),c=oh(n,s,c,d,void 0,g),d=lh(),n!==null&&!vi?(ch(n,s,g),Mr(n,s,g)):(Se&&d&&ju(s),s.flags|=1,Di(n,s,c,g),s.child)}function w1(n,s,c,d,g,y){return Gs(s),s.updateQueue=null,c=_p(s,d,c,g),Ap(n),d=lh(),n!==null&&!vi?(ch(n,s,y),Mr(n,s,y)):(Se&&d&&ju(s),s.flags|=1,Di(n,s,c,y),s.child)}function S1(n,s,c,d,g){if(Gs(s),s.stateNode===null){var y=ka,E=c.contextType;typeof E=="object"&&E!==null&&(y=Ri(E)),y=new c(d,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=_h,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=d,y.state=s.memoizedState,y.refs={},Ju(s),E=c.contextType,y.context=typeof E=="object"&&E!==null?Ri(E):ka,y.state=s.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(Ah(s,c,E,d),y.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&_h.enqueueReplaceState(y,y.state,null),Po(s,d,y,g),Fo(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(n===null){y=s.stateNode;var I=s.memoizedProps,Z=Ks(c,I);y.props=Z;var lt=y.context,xt=c.contextType;E=ka,typeof xt=="object"&&xt!==null&&(E=Ri(xt));var St=c.getDerivedStateFromProps;xt=typeof St=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,xt||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||lt!==E)&&l1(s,y,d,E),es=!1;var ct=s.memoizedState;y.state=ct,Po(s,d,y,g),Fo(),lt=s.memoizedState,I||ct!==lt||es?(typeof St=="function"&&(Ah(s,c,St,d),lt=s.memoizedState),(Z=es||o1(s,c,Z,d,ct,lt,E))?(xt||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=lt),y.props=d,y.state=lt,y.context=E,d=Z):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{y=s.stateNode,th(n,s),E=s.memoizedProps,xt=Ks(c,E),y.props=xt,St=s.pendingProps,ct=y.context,lt=c.contextType,Z=ka,typeof lt=="object"&&lt!==null&&(Z=Ri(lt)),I=c.getDerivedStateFromProps,(lt=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==St||ct!==Z)&&l1(s,y,d,Z),es=!1,ct=s.memoizedState,y.state=ct,Po(s,d,y,g),Fo();var bt=s.memoizedState;E!==St||ct!==bt||es||n!==null&&n.dependencies!==null&&gc(n.dependencies)?(typeof I=="function"&&(Ah(s,c,I,d),bt=s.memoizedState),(xt=es||o1(s,c,xt,d,ct,bt,Z)||n!==null&&n.dependencies!==null&&gc(n.dependencies))?(lt||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,bt,Z),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,bt,Z)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&ct===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ct===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=bt),y.props=d,y.state=bt,y.context=Z,d=xt):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&ct===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&ct===n.memoizedState||(s.flags|=1024),d=!1)}return y=d,Lc(n,s),d=(s.flags&128)!==0,y||d?(y=s.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&d?(s.child=Ys(s,n.child,null,g),s.child=Ys(s,null,c,g)):Di(n,s,c,g),s.memoizedState=y.state,n=s.child):n=Mr(n,s,g),n}function A1(n,s,c,d){return Hs(),s.flags|=256,Di(n,s,c,d),s.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mh(n){return{baseLanes:n,cachePool:dp()}}function Rh(n,s,c){return n=n!==null?n.childLanes&~c:0,s&&(n|=yn),n}function _1(n,s,c){var d=s.pendingProps,g=!1,y=(s.flags&128)!==0,E;if((E=y)||(E=n!==null&&n.memoizedState===null?!1:(hi.current&2)!==0),E&&(g=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Se){if(g?rs(s):ss(),(n=Xe)?(n=Ng(n,Nn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Wr!==null?{id:Jn,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},c=np(n),c.return=s,s.child=c,Mi=s,Xe=null)):n=null,n===null)throw Jr(s);return dd(n)?s.lanes=32:s.lanes=536870912,null}var I=d.children;return d=d.fallback,g?(ss(),g=s.mode,I=Bc({mode:"hidden",children:I},g),d=Us(d,g,c,null),I.return=s,d.return=s,I.sibling=d,s.child=I,d=s.child,d.memoizedState=Mh(c),d.childLanes=Rh(n,E,c),s.memoizedState=Ch,qo(null,d)):(rs(s),Dh(s,I))}var Z=n.memoizedState;if(Z!==null&&(I=Z.dehydrated,I!==null)){if(y)s.flags&256?(rs(s),s.flags&=-257,s=Nh(n,s,c)):s.memoizedState!==null?(ss(),s.child=n.child,s.flags|=128,s=null):(ss(),I=d.fallback,g=s.mode,d=Bc({mode:"visible",children:d.children},g),I=Us(I,g,c,null),I.flags|=2,d.return=s,I.return=s,d.sibling=I,s.child=d,Ys(s,n.child,null,c),d=s.child,d.memoizedState=Mh(c),d.childLanes=Rh(n,E,c),s.memoizedState=Ch,s=qo(null,d));else if(rs(s),dd(I)){if(E=I.nextSibling&&I.nextSibling.dataset,E)var lt=E.dgst;E=lt,d=Error(i(419)),d.stack="",d.digest=E,No({value:d,source:null,stack:null}),s=Nh(n,s,c)}else if(vi||Ma(n,s,c,!1),E=(c&n.childLanes)!==0,vi||E){if(E=je,E!==null&&(d=Wl(E,c),d!==0&&d!==Z.retryLane))throw Z.retryLane=d,Ps(n,d),on(E,n,d),Eh;hd(I)||$c(),s=Nh(n,s,c)}else hd(I)?(s.flags|=192,s.child=n.child,s=null):(n=Z.treeContext,Xe=zn(I.nextSibling),Mi=s,Se=!0,Qr=null,Nn=!1,n!==null&&ap(s,n),s=Dh(s,d.children),s.flags|=4096);return s}return g?(ss(),I=d.fallback,g=s.mode,Z=n.child,lt=Z.sibling,d=Ar(Z,{mode:"hidden",children:d.children}),d.subtreeFlags=Z.subtreeFlags&65011712,lt!==null?I=Ar(lt,I):(I=Us(I,g,c,null),I.flags|=2),I.return=s,d.return=s,d.sibling=I,s.child=d,qo(null,d),d=s.child,I=n.child.memoizedState,I===null?I=Mh(c):(g=I.cachePool,g!==null?(Z=gi._currentValue,g=g.parent!==Z?{parent:Z,pool:Z}:g):g=dp(),I={baseLanes:I.baseLanes|c,cachePool:g}),d.memoizedState=I,d.childLanes=Rh(n,E,c),s.memoizedState=Ch,qo(n.child,d)):(rs(s),c=n.child,n=c.sibling,c=Ar(c,{mode:"visible",children:d.children}),c.return=s,c.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=c,s.memoizedState=null,c)}function Dh(n,s){return s=Bc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Bc(n,s){return n=pn(22,n,null,s),n.lanes=0,n}function Nh(n,s,c){return Ys(s,n.child,null,c),n=Dh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function k1(n,s,c){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),Yu(n.return,s,c)}function Oh(n,s,c,d,g,y){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:y}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=d,E.tail=c,E.tailMode=g,E.treeForkCount=y)}function E1(n,s,c){var d=s.pendingProps,g=d.revealOrder,y=d.tail;d=d.children;var E=hi.current,I=(E&2)!==0;if(I?(E=E&1|2,s.flags|=128):E&=1,ot(hi,E),Di(n,s,d,c),d=Se?Do:0,!I&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&k1(n,c,s);else if(n.tag===19)k1(n,c,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(c=s.child,g=null;c!==null;)n=c.alternate,n!==null&&_c(n)===null&&(g=c),c=c.sibling;c=g,c===null?(g=s.child,s.child=null):(g=c.sibling,c.sibling=null),Oh(s,!1,g,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&_c(n)===null){s.child=g;break}n=g.sibling,g.sibling=c,c=g,g=n}Oh(s,!0,c,null,y,d);break;case"together":Oh(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function Mr(n,s,c){if(n!==null&&(s.dependencies=n.dependencies),ls|=s.lanes,(c&s.childLanes)===0)if(n!==null){if(Ma(n,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,c=Ar(n,n.pendingProps),s.child=c,c.return=s;n.sibling!==null;)n=n.sibling,c=c.sibling=Ar(n,n.pendingProps),c.return=s;c.sibling=null}return s.child}function zh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&gc(n)))}function q3(n,s,c){switch(s.tag){case 3:jt(s,s.stateNode.containerInfo),ts(s,gi,n.memoizedState.cache),Hs();break;case 27:case 5:xe(s);break;case 4:jt(s,s.stateNode.containerInfo);break;case 10:ts(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,sh(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(rs(s),s.flags|=128,null):(c&s.child.childLanes)!==0?_1(n,s,c):(rs(s),n=Mr(n,s,c),n!==null?n.sibling:null);rs(s);break;case 19:var g=(n.flags&128)!==0;if(d=(c&s.childLanes)!==0,d||(Ma(n,s,c,!1),d=(c&s.childLanes)!==0),g){if(d)return E1(n,s,c);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ot(hi,hi.current),d)break;return null;case 22:return s.lanes=0,v1(n,s,c,s.pendingProps);case 24:ts(s,gi,n.memoizedState.cache)}return Mr(n,s,c)}function T1(n,s,c){if(n!==null)if(n.memoizedProps!==s.pendingProps)vi=!0;else{if(!zh(n,c)&&(s.flags&128)===0)return vi=!1,q3(n,s,c);vi=(n.flags&131072)!==0}else vi=!1,Se&&(s.flags&1048576)!==0&&sp(s,Do,s.index);switch(s.lanes=0,s.tag){case 16:t:{var d=s.pendingProps;if(n=$s(s.elementType),s.type=n,typeof n=="function")Pu(n)?(d=Ks(n,d),s.tag=1,s=S1(null,s,n,d,c)):(s.tag=0,s=Th(null,s,n,d,c));else{if(n!=null){var g=n.$$typeof;if(g===N){s.tag=11,s=p1(null,s,n,d,c);break t}else if(g===z){s.tag=14,s=g1(null,s,n,d,c);break t}}throw s=D(n)||n,Error(i(306,s,""))}}return s;case 0:return Th(n,s,s.type,s.pendingProps,c);case 1:return d=s.type,g=Ks(d,s.pendingProps),S1(n,s,d,g,c);case 3:t:{if(jt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));d=s.pendingProps;var y=s.memoizedState;g=y.element,th(n,s),Po(s,d,null,c);var E=s.memoizedState;if(d=E.cache,ts(s,gi,d),d!==y.cache&&Xu(s,[gi],c,!0),Fo(),d=E.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=A1(n,s,d,c);break t}else if(d!==g){g=Mn(Error(i(424)),s),No(g),s=A1(n,s,d,c);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Xe=zn(n.firstChild),Mi=s,Se=!0,Qr=null,Nn=!0,c=vp(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Hs(),d===g){s=Mr(n,s,c);break t}Di(n,s,d,c)}s=s.child}return s;case 26:return Lc(n,s),n===null?(c=Fg(s.type,null,s.pendingProps,null))?s.memoizedState=c:Se||(c=s.type,n=s.pendingProps,d=Qc(It.current).createElement(c),d[Ai]=s,d[Fi]=n,Ni(d,c,n),Ut(d),s.stateNode=d):s.memoizedState=Fg(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return xe(s),n===null&&Se&&(d=s.stateNode=Lg(s.type,s.pendingProps,It.current),Mi=s,Nn=!0,g=Xe,fs(s.type)?(fd=g,Xe=zn(d.firstChild)):Xe=g),Di(n,s,s.pendingProps.children,c),Lc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Se&&((g=d=Xe)&&(d=xy(d,s.type,s.pendingProps,Nn),d!==null?(s.stateNode=d,Mi=s,Xe=zn(d.firstChild),Nn=!1,g=!0):g=!1),g||Jr(s)),xe(s),g=s.type,y=s.pendingProps,E=n!==null?n.memoizedProps:null,d=y.children,ld(g,y)?d=null:E!==null&&ld(g,E)&&(s.flags|=32),s.memoizedState!==null&&(g=oh(n,s,L3,null,null,c),sl._currentValue=g),Lc(n,s),Di(n,s,d,c),s.child;case 6:return n===null&&Se&&((n=c=Xe)&&(c=wy(c,s.pendingProps,Nn),c!==null?(s.stateNode=c,Mi=s,Xe=null,n=!0):n=!1),n||Jr(s)),null;case 13:return _1(n,s,c);case 4:return jt(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=Ys(s,null,d,c):Di(n,s,d,c),s.child;case 11:return p1(n,s,s.type,s.pendingProps,c);case 7:return Di(n,s,s.pendingProps,c),s.child;case 8:return Di(n,s,s.pendingProps.children,c),s.child;case 12:return Di(n,s,s.pendingProps.children,c),s.child;case 10:return d=s.pendingProps,ts(s,s.type,d.value),Di(n,s,d.children,c),s.child;case 9:return g=s.type._context,d=s.pendingProps.children,Gs(s),g=Ri(g),d=d(g),s.flags|=1,Di(n,s,d,c),s.child;case 14:return g1(n,s,s.type,s.pendingProps,c);case 15:return b1(n,s,s.type,s.pendingProps,c);case 19:return E1(n,s,c);case 31:return G3(n,s,c);case 22:return v1(n,s,c,s.pendingProps);case 24:return Gs(s),d=Ri(gi),n===null?(g=Wu(),g===null&&(g=je,y=Ku(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),s.memoizedState={parent:d,cache:g},Ju(s),ts(s,gi,g)):((n.lanes&c)!==0&&(th(n,s),Po(s,null,null,c),Fo()),g=n.memoizedState,y=s.memoizedState,g.parent!==d?(g={parent:d,cache:d},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),ts(s,gi,d)):(d=y.cache,ts(s,gi,d),d!==g.cache&&Xu(s,[gi],c,!0))),Di(n,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Rr(n){n.flags|=4}function Lh(n,s,c,d,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(tg())n.flags|=8192;else throw Vs=xc,Qu}else n.flags&=-16777217}function C1(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Gg(s))if(tg())n.flags|=8192;else throw Vs=xc,Qu}function Ic(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Xl():536870912,n.lanes|=s,Ha|=s)}function $o(n,s){if(!Se)switch(n.tailMode){case"hidden":s=n.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ke(n){var s=n.alternate!==null&&n.alternate.child===n.child,c=0,d=0;if(s)for(var g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=d,n.childLanes=c,s}function $3(n,s,c){var d=s.pendingProps;switch(Gu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(s),null;case 1:return Ke(s),null;case 3:return c=s.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Er(gi),Gt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ca(s)?Rr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,$u())),Ke(s),null;case 26:var g=s.type,y=s.memoizedState;return n===null?(Rr(s),y!==null?(Ke(s),C1(s,y)):(Ke(s),Lh(s,g,null,d,c))):y?y!==n.memoizedState?(Rr(s),Ke(s),C1(s,y)):(Ke(s),s.flags&=-16777217):(n=n.memoizedProps,n!==d&&Rr(s),Ke(s),Lh(s,g,n,d,c)),null;case 27:if(we(s),c=It.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Rr(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Ke(s),null}n=ht.current,Ca(s)?op(s):(n=Lg(g,d,c),s.stateNode=n,Rr(s))}return Ke(s),null;case 5:if(we(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Rr(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Ke(s),null}if(y=ht.current,Ca(s))op(s);else{var E=Qc(It.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?E.createElement("select",{is:d.is}):E.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?E.createElement(g,{is:d.is}):E.createElement(g)}}y[Ai]=s,y[Fi]=d;t:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break t;for(;E.sibling===null;){if(E.return===null||E.return===s)break t;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=y;t:switch(Ni(y,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Rr(s)}}return Ke(s),Lh(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,c),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==d&&Rr(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(n=It.current,Ca(s)){if(n=s.stateNode,c=s.memoizedProps,d=null,g=Mi,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}n[Ai]=s,n=!!(n.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||_g(n.nodeValue,c)),n||Jr(s,!0)}else n=Qc(n).createTextNode(d),n[Ai]=s,s.stateNode=n}return Ke(s),null;case 31:if(c=s.memoizedState,n===null||n.memoizedState!==null){if(d=Ca(s),c!==null){if(n===null){if(!d)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Ai]=s}else Hs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ke(s),n=!1}else c=$u(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=c),n=!0;if(!n)return s.flags&256?(bn(s),s):(bn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ke(s),null;case 13:if(d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ca(s),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Ai]=s}else Hs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ke(s),g=!1}else g=$u(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(bn(s),s):(bn(s),null)}return bn(s),(s.flags&128)!==0?(s.lanes=c,s):(c=d!==null,n=n!==null&&n.memoizedState!==null,c&&(d=s.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)),c!==n&&c&&(s.child.flags|=8192),Ic(s,s.updateQueue),Ke(s),null);case 4:return Gt(),n===null&&nd(s.stateNode.containerInfo),Ke(s),null;case 10:return Er(s.type),Ke(s),null;case 19:if(P(hi),d=s.memoizedState,d===null)return Ke(s),null;if(g=(s.flags&128)!==0,y=d.rendering,y===null)if(g)$o(d,!1);else{if(oi!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=_c(n),y!==null){for(s.flags|=128,$o(d,!1),n=y.updateQueue,s.updateQueue=n,Ic(s,n),s.subtreeFlags=0,n=c,c=s.child;c!==null;)ip(c,n),c=c.sibling;return ot(hi,hi.current&1|2),Se&&_r(s,d.treeForkCount),s.child}n=n.sibling}d.tail!==null&&zt()>jc&&(s.flags|=128,g=!0,$o(d,!1),s.lanes=4194304)}else{if(!g)if(n=_c(y),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,Ic(s,n),$o(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Se)return Ke(s),null}else 2*zt()-d.renderingStartTime>jc&&c!==536870912&&(s.flags|=128,g=!0,$o(d,!1),s.lanes=4194304);d.isBackwards?(y.sibling=s.child,s.child=y):(n=d.last,n!==null?n.sibling=y:s.child=y,d.last=y)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=zt(),n.sibling=null,c=hi.current,ot(hi,g?c&1|2:c&1),Se&&_r(s,d.treeForkCount),n):(Ke(s),null);case 22:case 23:return bn(s),rh(),d=s.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(c&536870912)!==0&&(s.flags&128)===0&&(Ke(s),s.subtreeFlags&6&&(s.flags|=8192)):Ke(s),c=s.updateQueue,c!==null&&Ic(s,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048),n!==null&&P(qs),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Er(gi),Ke(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function V3(n,s){switch(Gu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Er(gi),Gt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return we(s),null;case 31:if(s.memoizedState!==null){if(bn(s),s.alternate===null)throw Error(i(340));Hs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(bn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Hs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return P(hi),null;case 4:return Gt(),null;case 10:return Er(s.type),null;case 22:case 23:return bn(s),rh(),n!==null&&P(qs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Er(gi),null;case 25:return null;default:return null}}function M1(n,s){switch(Gu(s),s.tag){case 3:Er(gi),Gt();break;case 26:case 27:case 5:we(s);break;case 4:Gt();break;case 31:s.memoizedState!==null&&bn(s);break;case 13:bn(s);break;case 19:P(hi);break;case 10:Er(s.type);break;case 22:case 23:bn(s),rh(),n!==null&&P(qs);break;case 24:Er(gi)}}function Vo(n,s){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&n)===n){d=void 0;var y=c.create,E=c.inst;d=y(),E.destroy=d}c=c.next}while(c!==g)}}catch(I){Ie(s,s.return,I)}}function as(n,s,c){try{var d=s.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&n)===n){var E=d.inst,I=E.destroy;if(I!==void 0){E.destroy=void 0,g=s;var Z=c,lt=I;try{lt()}catch(xt){Ie(g,Z,xt)}}}d=d.next}while(d!==y)}}catch(xt){Ie(s,s.return,xt)}}function R1(n){var s=n.updateQueue;if(s!==null){var c=n.stateNode;try{xp(s,c)}catch(d){Ie(n,n.return,d)}}}function D1(n,s,c){c.props=Ks(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(d){Ie(n,s,d)}}function Yo(n,s){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof c=="function"?n.refCleanup=c(d):c.current=d}}catch(g){Ie(n,s,g)}}function er(n,s){var c=n.ref,d=n.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Ie(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Ie(n,s,g)}else c.current=null}function N1(n){var s=n.type,c=n.memoizedProps,d=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Ie(n,n.return,g)}}function Bh(n,s,c){try{var d=n.stateNode;my(d,n.type,c,s),d[Fi]=s}catch(g){Ie(n,n.return,g)}}function O1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&fs(n.type)||n.tag===4}function Ih(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||O1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&fs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Fh(n,s,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(n),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=wr));else if(d!==4&&(d===27&&fs(n.type)&&(c=n.stateNode,s=null),n=n.child,n!==null))for(Fh(n,s,c),n=n.sibling;n!==null;)Fh(n,s,c),n=n.sibling}function Fc(n,s,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?c.insertBefore(n,s):c.appendChild(n);else if(d!==4&&(d===27&&fs(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(Fc(n,s,c),n=n.sibling;n!==null;)Fc(n,s,c),n=n.sibling}function z1(n){var s=n.stateNode,c=n.memoizedProps;try{for(var d=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Ni(s,d,c),s[Ai]=n,s[Fi]=c}catch(y){Ie(n,n.return,y)}}var Dr=!1,yi=!1,Ph=!1,L1=typeof WeakSet=="function"?WeakSet:Set,Ti=null;function Y3(n,s){if(n=n.containerInfo,ad=s0,n=Ym(n),Nu(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else t:{c=(c=n.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break t}var E=0,I=-1,Z=-1,lt=0,xt=0,St=n,ct=null;e:for(;;){for(var bt;St!==c||g!==0&&St.nodeType!==3||(I=E+g),St!==y||d!==0&&St.nodeType!==3||(Z=E+d),St.nodeType===3&&(E+=St.nodeValue.length),(bt=St.firstChild)!==null;)ct=St,St=bt;for(;;){if(St===n)break e;if(ct===c&&++lt===g&&(I=E),ct===y&&++xt===d&&(Z=E),(bt=St.nextSibling)!==null)break;St=ct,ct=St.parentNode}St=bt}c=I===-1||Z===-1?null:{start:I,end:Z}}else c=null}c=c||{start:0,end:0}}else c=null;for(od={focusedElem:n,selectionRange:c},s0=!1,Ti=s;Ti!==null;)if(s=Ti,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ti=n;else for(;Ti!==null;){switch(s=Ti,y=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(c=0;c<n.length;c++)g=n[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,c=s,g=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var Vt=Ks(c.type,g);n=d.getSnapshotBeforeUpdate(Vt,y),d.__reactInternalSnapshotBeforeUpdate=n}catch(ie){Ie(c,c.return,ie)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,c=n.nodeType,c===9)ud(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ud(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Ti=n;break}Ti=s.return}}function B1(n,s,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Or(n,c),d&4&&Vo(5,c);break;case 1:if(Or(n,c),d&4)if(n=c.stateNode,s===null)try{n.componentDidMount()}catch(E){Ie(c,c.return,E)}else{var g=Ks(c.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){Ie(c,c.return,E)}}d&64&&R1(c),d&512&&Yo(c,c.return);break;case 3:if(Or(n,c),d&64&&(n=c.updateQueue,n!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{xp(n,s)}catch(E){Ie(c,c.return,E)}}break;case 27:s===null&&d&4&&z1(c);case 26:case 5:Or(n,c),s===null&&d&4&&N1(c),d&512&&Yo(c,c.return);break;case 12:Or(n,c);break;case 31:Or(n,c),d&4&&P1(n,c);break;case 13:Or(n,c),d&4&&U1(n,c),d&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=iy.bind(null,c),Sy(n,c))));break;case 22:if(d=c.memoizedState!==null||Dr,!d){s=s!==null&&s.memoizedState!==null||yi,g=Dr;var y=yi;Dr=d,(yi=s)&&!y?zr(n,c,(c.subtreeFlags&8772)!==0):Or(n,c),Dr=g,yi=y}break;case 30:break;default:Or(n,c)}}function I1(n){var s=n.alternate;s!==null&&(n.alternate=null,I1(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&kt(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ze=null,nn=!1;function Nr(n,s,c){for(c=c.child;c!==null;)F1(n,s,c),c=c.sibling}function F1(n,s,c){if(pi&&typeof pi.onCommitFiberUnmount=="function")try{pi.onCommitFiberUnmount(ze,c)}catch{}switch(c.tag){case 26:yi||er(c,s),Nr(n,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:yi||er(c,s);var d=Ze,g=nn;fs(c.type)&&(Ze=c.stateNode,nn=!1),Nr(n,s,c),il(c.stateNode),Ze=d,nn=g;break;case 5:yi||er(c,s);case 6:if(d=Ze,g=nn,Ze=null,Nr(n,s,c),Ze=d,nn=g,Ze!==null)if(nn)try{(Ze.nodeType===9?Ze.body:Ze.nodeName==="HTML"?Ze.ownerDocument.body:Ze).removeChild(c.stateNode)}catch(y){Ie(c,s,y)}else try{Ze.removeChild(c.stateNode)}catch(y){Ie(c,s,y)}break;case 18:Ze!==null&&(nn?(n=Ze,Rg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Ka(n)):Rg(Ze,c.stateNode));break;case 4:d=Ze,g=nn,Ze=c.stateNode.containerInfo,nn=!0,Nr(n,s,c),Ze=d,nn=g;break;case 0:case 11:case 14:case 15:as(2,c,s),yi||as(4,c,s),Nr(n,s,c);break;case 1:yi||(er(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"&&D1(c,s,d)),Nr(n,s,c);break;case 21:Nr(n,s,c);break;case 22:yi=(d=yi)||c.memoizedState!==null,Nr(n,s,c),yi=d;break;default:Nr(n,s,c)}}function P1(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ka(n)}catch(c){Ie(s,s.return,c)}}}function U1(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ka(n)}catch(c){Ie(s,s.return,c)}}function X3(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new L1),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new L1),s;default:throw Error(i(435,n.tag))}}function Pc(n,s){var c=X3(n);s.forEach(function(d){if(!c.has(d)){c.add(d);var g=ny.bind(null,n,d);d.then(g,g)}})}function rn(n,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],y=n,E=s,I=E;t:for(;I!==null;){switch(I.tag){case 27:if(fs(I.type)){Ze=I.stateNode,nn=!1;break t}break;case 5:Ze=I.stateNode,nn=!1;break t;case 3:case 4:Ze=I.stateNode.containerInfo,nn=!0;break t}I=I.return}if(Ze===null)throw Error(i(160));F1(y,E,g),Ze=null,nn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)H1(s,n),s=s.sibling}var Vn=null;function H1(n,s){var c=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:rn(s,n),sn(n),d&4&&(as(3,n,n.return),Vo(3,n),as(5,n,n.return));break;case 1:rn(s,n),sn(n),d&512&&(yi||c===null||er(c,c.return)),d&64&&Dr&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=Vn;if(rn(s,n),sn(n),d&512&&(yi||c===null||er(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=n.memoizedState,c===null)if(d===null)if(n.stateNode===null){t:{d=n.type,c=n.memoizedProps,g=g.ownerDocument||g;e:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[vt]||y[Ai]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),Ni(y,d,c),y[Ai]=n,Ut(y),d=y;break t;case"link":var E=Hg("link","href",g).get(d+(c.href||""));if(E){for(var I=0;I<E.length;I++)if(y=E[I],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(I,1);break e}}y=g.createElement(d),Ni(y,d,c),g.head.appendChild(y);break;case"meta":if(E=Hg("meta","content",g).get(d+(c.content||""))){for(I=0;I<E.length;I++)if(y=E[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(I,1);break e}}y=g.createElement(d),Ni(y,d,c),g.head.appendChild(y);break;default:throw Error(i(468,d))}y[Ai]=n,Ut(y),d=y}n.stateNode=d}else jg(g,n.type,n.stateNode);else n.stateNode=Ug(g,d,n.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?jg(g,n.type,n.stateNode):Ug(g,d,n.memoizedProps)):d===null&&n.stateNode!==null&&Bh(n,n.memoizedProps,c.memoizedProps)}break;case 27:rn(s,n),sn(n),d&512&&(yi||c===null||er(c,c.return)),c!==null&&d&4&&Bh(n,n.memoizedProps,c.memoizedProps);break;case 5:if(rn(s,n),sn(n),d&512&&(yi||c===null||er(c,c.return)),n.flags&32){g=n.stateNode;try{va(g,"")}catch(Vt){Ie(n,n.return,Vt)}}d&4&&n.stateNode!=null&&(g=n.memoizedProps,Bh(n,g,c!==null?c.memoizedProps:g)),d&1024&&(Ph=!0);break;case 6:if(rn(s,n),sn(n),d&4){if(n.stateNode===null)throw Error(i(162));d=n.memoizedProps,c=n.stateNode;try{c.nodeValue=d}catch(Vt){Ie(n,n.return,Vt)}}break;case 3:if(e0=null,g=Vn,Vn=Jc(s.containerInfo),rn(s,n),Vn=g,sn(n),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ka(s.containerInfo)}catch(Vt){Ie(n,n.return,Vt)}Ph&&(Ph=!1,j1(n));break;case 4:d=Vn,Vn=Jc(n.stateNode.containerInfo),rn(s,n),sn(n),Vn=d;break;case 12:rn(s,n),sn(n);break;case 31:rn(s,n),sn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Pc(n,d)));break;case 13:rn(s,n),sn(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Hc=zt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Pc(n,d)));break;case 22:g=n.memoizedState!==null;var Z=c!==null&&c.memoizedState!==null,lt=Dr,xt=yi;if(Dr=lt||g,yi=xt||Z,rn(s,n),yi=xt,Dr=lt,sn(n),d&8192)t:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(c===null||Z||Dr||yi||Zs(n)),c=null,s=n;;){if(s.tag===5||s.tag===26){if(c===null){Z=c=s;try{if(y=Z.stateNode,g)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{I=Z.stateNode;var St=Z.memoizedProps.style,ct=St!=null&&St.hasOwnProperty("display")?St.display:null;I.style.display=ct==null||typeof ct=="boolean"?"":(""+ct).trim()}}catch(Vt){Ie(Z,Z.return,Vt)}}}else if(s.tag===6){if(c===null){Z=s;try{Z.stateNode.nodeValue=g?"":Z.memoizedProps}catch(Vt){Ie(Z,Z.return,Vt)}}}else if(s.tag===18){if(c===null){Z=s;try{var bt=Z.stateNode;g?Dg(bt,!0):Dg(Z.stateNode,!1)}catch(Vt){Ie(Z,Z.return,Vt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=n.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Pc(n,c))));break;case 19:rn(s,n),sn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Pc(n,d)));break;case 30:break;case 21:break;default:rn(s,n),sn(n)}}function sn(n){var s=n.flags;if(s&2){try{for(var c,d=n.return;d!==null;){if(O1(d)){c=d;break}d=d.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,y=Ih(n);Fc(n,y,g);break;case 5:var E=c.stateNode;c.flags&32&&(va(E,""),c.flags&=-33);var I=Ih(n);Fc(n,I,E);break;case 3:case 4:var Z=c.stateNode.containerInfo,lt=Ih(n);Fh(n,lt,Z);break;default:throw Error(i(161))}}catch(xt){Ie(n,n.return,xt)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function j1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;j1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Or(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)B1(n,s.alternate,s),s=s.sibling}function Zs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:as(4,s,s.return),Zs(s);break;case 1:er(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&D1(s,s.return,c),Zs(s);break;case 27:il(s.stateNode);case 26:case 5:er(s,s.return),Zs(s);break;case 22:s.memoizedState===null&&Zs(s);break;case 30:Zs(s);break;default:Zs(s)}n=n.sibling}}function zr(n,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,g=n,y=s,E=y.flags;switch(y.tag){case 0:case 11:case 15:zr(g,y,c),Vo(4,y);break;case 1:if(zr(g,y,c),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(lt){Ie(d,d.return,lt)}if(d=y,g=d.updateQueue,g!==null){var I=d.stateNode;try{var Z=g.shared.hiddenCallbacks;if(Z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Z.length;g++)yp(Z[g],I)}catch(lt){Ie(d,d.return,lt)}}c&&E&64&&R1(y),Yo(y,y.return);break;case 27:z1(y);case 26:case 5:zr(g,y,c),c&&d===null&&E&4&&N1(y),Yo(y,y.return);break;case 12:zr(g,y,c);break;case 31:zr(g,y,c),c&&E&4&&P1(g,y);break;case 13:zr(g,y,c),c&&E&4&&U1(g,y);break;case 22:y.memoizedState===null&&zr(g,y,c),Yo(y,y.return);break;case 30:break;default:zr(g,y,c)}s=s.sibling}}function Uh(n,s){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&Oo(c))}function Hh(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Oo(n))}function Yn(n,s,c,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)G1(n,s,c,d),s=s.sibling}function G1(n,s,c,d){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Yn(n,s,c,d),g&2048&&Vo(9,s);break;case 1:Yn(n,s,c,d);break;case 3:Yn(n,s,c,d),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Oo(n)));break;case 12:if(g&2048){Yn(n,s,c,d),n=s.stateNode;try{var y=s.memoizedProps,E=y.id,I=y.onPostCommit;typeof I=="function"&&I(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(Z){Ie(s,s.return,Z)}}else Yn(n,s,c,d);break;case 31:Yn(n,s,c,d);break;case 13:Yn(n,s,c,d);break;case 23:break;case 22:y=s.stateNode,E=s.alternate,s.memoizedState!==null?y._visibility&2?Yn(n,s,c,d):Xo(n,s):y._visibility&2?Yn(n,s,c,d):(y._visibility|=2,Fa(n,s,c,d,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Uh(E,s);break;case 24:Yn(n,s,c,d),g&2048&&Hh(s.alternate,s);break;default:Yn(n,s,c,d)}}function Fa(n,s,c,d,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=n,E=s,I=c,Z=d,lt=E.flags;switch(E.tag){case 0:case 11:case 15:Fa(y,E,I,Z,g),Vo(8,E);break;case 23:break;case 22:var xt=E.stateNode;E.memoizedState!==null?xt._visibility&2?Fa(y,E,I,Z,g):Xo(y,E):(xt._visibility|=2,Fa(y,E,I,Z,g)),g&&lt&2048&&Uh(E.alternate,E);break;case 24:Fa(y,E,I,Z,g),g&&lt&2048&&Hh(E.alternate,E);break;default:Fa(y,E,I,Z,g)}s=s.sibling}}function Xo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=n,d=s,g=d.flags;switch(d.tag){case 22:Xo(c,d),g&2048&&Uh(d.alternate,d);break;case 24:Xo(c,d),g&2048&&Hh(d.alternate,d);break;default:Xo(c,d)}s=s.sibling}}var Ko=8192;function Pa(n,s,c){if(n.subtreeFlags&Ko)for(n=n.child;n!==null;)q1(n,s,c),n=n.sibling}function q1(n,s,c){switch(n.tag){case 26:Pa(n,s,c),n.flags&Ko&&n.memoizedState!==null&&zy(c,Vn,n.memoizedState,n.memoizedProps);break;case 5:Pa(n,s,c);break;case 3:case 4:var d=Vn;Vn=Jc(n.stateNode.containerInfo),Pa(n,s,c),Vn=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=Ko,Ko=16777216,Pa(n,s,c),Ko=d):Pa(n,s,c));break;default:Pa(n,s,c)}}function $1(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Zo(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];Ti=d,Y1(d,n)}$1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)V1(n),n=n.sibling}function V1(n){switch(n.tag){case 0:case 11:case 15:Zo(n),n.flags&2048&&as(9,n,n.return);break;case 3:Zo(n);break;case 12:Zo(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Uc(n)):Zo(n);break;default:Zo(n)}}function Uc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];Ti=d,Y1(d,n)}$1(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:as(8,s,s.return),Uc(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Uc(s));break;default:Uc(s)}n=n.sibling}}function Y1(n,s){for(;Ti!==null;){var c=Ti;switch(c.tag){case 0:case 11:case 15:as(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Oo(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Ti=d;else t:for(c=n;Ti!==null;){d=Ti;var g=d.sibling,y=d.return;if(I1(d),d===c){Ti=null;break t}if(g!==null){g.return=y,Ti=g;break t}Ti=y}}}var K3={getCacheForType:function(n){var s=Ri(gi),c=s.data.get(n);return c===void 0&&(c=n(),s.data.set(n,c)),c},cacheSignal:function(){return Ri(gi).controller.signal}},Z3=typeof WeakMap=="function"?WeakMap:Map,Oe=0,je=null,ge=null,ve=0,Be=0,vn=null,os=!1,Ua=!1,jh=!1,Lr=0,oi=0,ls=0,Ws=0,Gh=0,yn=0,Ha=0,Wo=null,an=null,qh=!1,Hc=0,X1=0,jc=1/0,Gc=null,cs=null,_i=0,us=null,ja=null,Br=0,$h=0,Vh=null,K1=null,Qo=0,Yh=null;function xn(){return(Oe&2)!==0&&ve!==0?ve&-ve:V.T!==null?Jh():Ql()}function Z1(){if(yn===0)if((ve&536870912)===0||Se){var n=yr;yr<<=1,(yr&3932160)===0&&(yr=262144),yn=n}else yn=536870912;return n=gn.current,n!==null&&(n.flags|=32),yn}function on(n,s,c){(n===je&&(Be===2||Be===9)||n.cancelPendingCommit!==null)&&(Ga(n,0),hs(n,ve,yn,!1)),zs(n,c),((Oe&2)===0||n!==je)&&(n===je&&((Oe&2)===0&&(Ws|=c),oi===4&&hs(n,ve,yn,!1)),ir(n))}function W1(n,s,c){if((Oe&6)!==0)throw Error(i(327));var d=!c&&(s&127)===0&&(s&n.expiredLanes)===0||Os(n,s),g=d?J3(n,s):Kh(n,s,!0),y=d;do{if(g===0){Ua&&!d&&hs(n,s,0,!1);break}else{if(c=n.current.alternate,y&&!W3(c)){g=Kh(n,s,!1),y=!1;continue}if(g===2){if(y=s,n.errorRecoveryDisabledLanes&y)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;t:{var I=n;g=Wo;var Z=I.current.memoizedState.isDehydrated;if(Z&&(Ga(I,E).flags|=256),E=Kh(I,E,!1),E!==2){if(jh&&!Z){I.errorRecoveryDisabledLanes|=y,Ws|=y,g=4;break t}y=an,an=g,y!==null&&(an===null?an=y:an.push.apply(an,y))}g=E}if(y=!1,g!==2)continue}}if(g===1){Ga(n,0),hs(n,s,0,!0);break}t:{switch(d=n,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:hs(d,s,yn,!os);break t;case 2:an=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Hc+300-zt(),10<g)){if(hs(d,s,yn,!os),fa(d,0,!0)!==0)break t;Br=s,d.timeoutHandle=Cg(Q1.bind(null,d,c,an,Gc,qh,s,yn,Ws,Ha,os,y,"Throttled",-0,0),g);break t}Q1(d,c,an,Gc,qh,s,yn,Ws,Ha,os,y,null,-0,0)}}break}while(!0);ir(n)}function Q1(n,s,c,d,g,y,E,I,Z,lt,xt,St,ct,bt){if(n.timeoutHandle=-1,St=s.subtreeFlags,St&8192||(St&16785408)===16785408){St={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wr},q1(s,y,St);var Vt=(y&62914560)===y?Hc-zt():(y&4194048)===y?X1-zt():0;if(Vt=Ly(St,Vt),Vt!==null){Br=y,n.cancelPendingCommit=Vt(ag.bind(null,n,s,y,c,d,g,E,I,Z,xt,St,null,ct,bt)),hs(n,y,E,!lt);return}}ag(n,s,y,c,d,g,E,I,Z)}function W3(n){for(var s=n;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],y=g.getSnapshot;g=g.value;try{if(!mn(y(),g))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hs(n,s,c,d){s&=~Gh,s&=~Ws,n.suspendedLanes|=s,n.pingedLanes&=~s,d&&(n.warmLanes|=s),d=n.expirationTimes;for(var g=s;0<g;){var y=31-Ye(g),E=1<<y;d[y]=-1,g&=~E}c!==0&&Kl(n,c,s)}function qc(){return(Oe&6)===0?(Jo(0),!1):!0}function Xh(){if(ge!==null){if(Be===0)var n=ge.return;else n=ge,kr=js=null,uh(n),Oa=null,Lo=0,n=ge;for(;n!==null;)M1(n.alternate,n),n=n.return;ge=null}}function Ga(n,s){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,by(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),Br=0,Xh(),je=n,ge=c=Ar(n.current,null),ve=s,Be=0,vn=null,os=!1,Ua=Os(n,s),jh=!1,Ha=yn=Gh=Ws=ls=oi=0,an=Wo=null,qh=!1,(s&8)!==0&&(s|=s&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=s;0<d;){var g=31-Ye(d),y=1<<g;s|=n[g],d&=~y}return Lr=s,hc(),c}function J1(n,s){ce=null,V.H=Go,s===Na||s===yc?(s=pp(),Be=3):s===Qu?(s=pp(),Be=4):Be=s===Eh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,vn=s,ge===null&&(oi=1,Oc(n,Mn(s,n.current)))}function tg(){var n=gn.current;return n===null?!0:(ve&4194048)===ve?On===null:(ve&62914560)===ve||(ve&536870912)!==0?n===On:!1}function eg(){var n=V.H;return V.H=Go,n===null?Go:n}function ig(){var n=V.A;return V.A=K3,n}function $c(){oi=4,os||(ve&4194048)!==ve&&gn.current!==null||(Ua=!0),(ls&134217727)===0&&(Ws&134217727)===0||je===null||hs(je,ve,yn,!1)}function Kh(n,s,c){var d=Oe;Oe|=2;var g=eg(),y=ig();(je!==n||ve!==s)&&(Gc=null,Ga(n,s)),s=!1;var E=oi;t:do try{if(Be!==0&&ge!==null){var I=ge,Z=vn;switch(Be){case 8:Xh(),E=6;break t;case 3:case 2:case 9:case 6:gn.current===null&&(s=!0);var lt=Be;if(Be=0,vn=null,qa(n,I,Z,lt),c&&Ua){E=0;break t}break;default:lt=Be,Be=0,vn=null,qa(n,I,Z,lt)}}Q3(),E=oi;break}catch(xt){J1(n,xt)}while(!0);return s&&n.shellSuspendCounter++,kr=js=null,Oe=d,V.H=g,V.A=y,ge===null&&(je=null,ve=0,hc()),E}function Q3(){for(;ge!==null;)ng(ge)}function J3(n,s){var c=Oe;Oe|=2;var d=eg(),g=ig();je!==n||ve!==s?(Gc=null,jc=zt()+500,Ga(n,s)):Ua=Os(n,s);t:do try{if(Be!==0&&ge!==null){s=ge;var y=vn;e:switch(Be){case 1:Be=0,vn=null,qa(n,s,y,1);break;case 2:case 9:if(fp(y)){Be=0,vn=null,rg(s);break}s=function(){Be!==2&&Be!==9||je!==n||(Be=7),ir(n)},y.then(s,s);break t;case 3:Be=7;break t;case 4:Be=5;break t;case 7:fp(y)?(Be=0,vn=null,rg(s)):(Be=0,vn=null,qa(n,s,y,7));break;case 5:var E=null;switch(ge.tag){case 26:E=ge.memoizedState;case 5:case 27:var I=ge;if(E?Gg(E):I.stateNode.complete){Be=0,vn=null;var Z=I.sibling;if(Z!==null)ge=Z;else{var lt=I.return;lt!==null?(ge=lt,Vc(lt)):ge=null}break e}}Be=0,vn=null,qa(n,s,y,5);break;case 6:Be=0,vn=null,qa(n,s,y,6);break;case 8:Xh(),oi=6;break t;default:throw Error(i(462))}}ty();break}catch(xt){J1(n,xt)}while(!0);return kr=js=null,V.H=d,V.A=g,Oe=c,ge!==null?0:(je=null,ve=0,hc(),oi)}function ty(){for(;ge!==null&&!nt();)ng(ge)}function ng(n){var s=T1(n.alternate,n,Lr);n.memoizedProps=n.pendingProps,s===null?Vc(n):ge=s}function rg(n){var s=n,c=s.alternate;switch(s.tag){case 15:case 0:s=w1(c,s,s.pendingProps,s.type,void 0,ve);break;case 11:s=w1(c,s,s.pendingProps,s.type.render,s.ref,ve);break;case 5:uh(s);default:M1(c,s),s=ge=ip(s,Lr),s=T1(c,s,Lr)}n.memoizedProps=n.pendingProps,s===null?Vc(n):ge=s}function qa(n,s,c,d){kr=js=null,uh(s),Oa=null,Lo=0;var g=s.return;try{if(j3(n,g,s,c,ve)){oi=1,Oc(n,Mn(c,n.current)),ge=null;return}}catch(y){if(g!==null)throw ge=g,y;oi=1,Oc(n,Mn(c,n.current)),ge=null;return}s.flags&32768?(Se||d===1?n=!0:Ua||(ve&536870912)!==0?n=!1:(os=n=!0,(d===2||d===9||d===3||d===6)&&(d=gn.current,d!==null&&d.tag===13&&(d.flags|=16384))),sg(s,n)):Vc(s)}function Vc(n){var s=n;do{if((s.flags&32768)!==0){sg(s,os);return}n=s.return;var c=$3(s.alternate,s,Lr);if(c!==null){ge=c;return}if(s=s.sibling,s!==null){ge=s;return}ge=s=n}while(s!==null);oi===0&&(oi=5)}function sg(n,s){do{var c=V3(n.alternate,n);if(c!==null){c.flags&=32767,ge=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(n=n.sibling,n!==null)){ge=n;return}ge=n=c}while(n!==null);oi=6,ge=null}function ag(n,s,c,d,g,y,E,I,Z){n.cancelPendingCommit=null;do Yc();while(_i!==0);if((Oe&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=Iu,ma(n,c,y,E,I,Z),n===je&&(ge=je=null,ve=0),ja=s,us=n,Br=c,$h=y,Vh=g,K1=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ry(ue,function(){return hg(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=V.T,V.T=null,g=K.p,K.p=2,E=Oe,Oe|=4;try{Y3(n,s,c)}finally{Oe=E,K.p=g,V.T=d}}_i=1,og(),lg(),cg()}}function og(){if(_i===1){_i=0;var n=us,s=ja,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=V.T,V.T=null;var d=K.p;K.p=2;var g=Oe;Oe|=4;try{H1(s,n);var y=od,E=Ym(n.containerInfo),I=y.focusedElem,Z=y.selectionRange;if(E!==I&&I&&I.ownerDocument&&Vm(I.ownerDocument.documentElement,I)){if(Z!==null&&Nu(I)){var lt=Z.start,xt=Z.end;if(xt===void 0&&(xt=lt),"selectionStart"in I)I.selectionStart=lt,I.selectionEnd=Math.min(xt,I.value.length);else{var St=I.ownerDocument||document,ct=St&&St.defaultView||window;if(ct.getSelection){var bt=ct.getSelection(),Vt=I.textContent.length,ie=Math.min(Z.start,Vt),Ue=Z.end===void 0?ie:Math.min(Z.end,Vt);!bt.extend&&ie>Ue&&(E=Ue,Ue=ie,ie=E);var tt=$m(I,ie),W=$m(I,Ue);if(tt&&W&&(bt.rangeCount!==1||bt.anchorNode!==tt.node||bt.anchorOffset!==tt.offset||bt.focusNode!==W.node||bt.focusOffset!==W.offset)){var st=St.createRange();st.setStart(tt.node,tt.offset),bt.removeAllRanges(),ie>Ue?(bt.addRange(st),bt.extend(W.node,W.offset)):(st.setEnd(W.node,W.offset),bt.addRange(st))}}}}for(St=[],bt=I;bt=bt.parentNode;)bt.nodeType===1&&St.push({element:bt,left:bt.scrollLeft,top:bt.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<St.length;I++){var wt=St[I];wt.element.scrollLeft=wt.left,wt.element.scrollTop=wt.top}}s0=!!ad,od=ad=null}finally{Oe=g,K.p=d,V.T=c}}n.current=s,_i=2}}function lg(){if(_i===2){_i=0;var n=us,s=ja,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=V.T,V.T=null;var d=K.p;K.p=2;var g=Oe;Oe|=4;try{B1(n,s.alternate,s)}finally{Oe=g,K.p=d,V.T=c}}_i=3}}function cg(){if(_i===4||_i===3){_i=0,Dt();var n=us,s=ja,c=Br,d=K1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?_i=5:(_i=0,ja=us=null,ug(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(cs=null),xo(c),s=s.stateNode,pi&&typeof pi.onCommitFiberRoot=="function")try{pi.onCommitFiberRoot(ze,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=V.T,g=K.p,K.p=2,V.T=null;try{for(var y=n.onRecoverableError,E=0;E<d.length;E++){var I=d[E];y(I.value,{componentStack:I.stack})}}finally{V.T=s,K.p=g}}(Br&3)!==0&&Yc(),ir(n),g=n.pendingLanes,(c&261930)!==0&&(g&42)!==0?n===Yh?Qo++:(Qo=0,Yh=n):Qo=0,Jo(0)}}function ug(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Oo(s)))}function Yc(){return og(),lg(),cg(),hg()}function hg(){if(_i!==5)return!1;var n=us,s=$h;$h=0;var c=xo(Br),d=V.T,g=K.p;try{K.p=32>c?32:c,V.T=null,c=Vh,Vh=null;var y=us,E=Br;if(_i=0,ja=us=null,Br=0,(Oe&6)!==0)throw Error(i(331));var I=Oe;if(Oe|=4,V1(y.current),G1(y,y.current,E,c),Oe=I,Jo(0,!1),pi&&typeof pi.onPostCommitFiberRoot=="function")try{pi.onPostCommitFiberRoot(ze,y)}catch{}return!0}finally{K.p=g,V.T=d,ug(n,s)}}function dg(n,s,c){s=Mn(c,s),s=kh(n.stateNode,s,2),n=ns(n,s,2),n!==null&&(zs(n,2),ir(n))}function Ie(n,s,c){if(n.tag===3)dg(n,n,c);else for(;s!==null;){if(s.tag===3){dg(s,n,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(cs===null||!cs.has(d))){n=Mn(c,n),c=f1(2),d=ns(s,c,2),d!==null&&(m1(c,d,s,n),zs(d,2),ir(d));break}}s=s.return}}function Zh(n,s,c){var d=n.pingCache;if(d===null){d=n.pingCache=new Z3;var g=new Set;d.set(s,g)}else g=d.get(s),g===void 0&&(g=new Set,d.set(s,g));g.has(c)||(jh=!0,g.add(c),n=ey.bind(null,n,s,c),s.then(n,n))}function ey(n,s,c){var d=n.pingCache;d!==null&&d.delete(s),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,je===n&&(ve&c)===c&&(oi===4||oi===3&&(ve&62914560)===ve&&300>zt()-Hc?(Oe&2)===0&&Ga(n,0):Gh|=c,Ha===ve&&(Ha=0)),ir(n)}function fg(n,s){s===0&&(s=Xl()),n=Ps(n,s),n!==null&&(zs(n,s),ir(n))}function iy(n){var s=n.memoizedState,c=0;s!==null&&(c=s.retryLane),fg(n,c)}function ny(n,s){var c=0;switch(n.tag){case 31:case 13:var d=n.stateNode,g=n.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),fg(n,c)}function ry(n,s){return At(n,s)}var Xc=null,$a=null,Wh=!1,Kc=!1,Qh=!1,ds=0;function ir(n){n!==$a&&n.next===null&&($a===null?Xc=$a=n:$a=$a.next=n),Kc=!0,Wh||(Wh=!0,ay())}function Jo(n,s){if(!Qh&&Kc){Qh=!0;do for(var c=!1,d=Xc;d!==null;){if(n!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var E=d.suspendedLanes,I=d.pingedLanes;y=(1<<31-Ye(42|n)+1)-1,y&=g&~(E&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,bg(d,y))}else y=ve,y=fa(d,d===je?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||Os(d,y)||(c=!0,bg(d,y));d=d.next}while(c);Qh=!1}}function sy(){mg()}function mg(){Kc=Wh=!1;var n=0;ds!==0&&gy()&&(n=ds);for(var s=zt(),c=null,d=Xc;d!==null;){var g=d.next,y=pg(d,s);y===0?(d.next=null,c===null?Xc=g:c.next=g,g===null&&($a=c)):(c=d,(n!==0||(y&3)!==0)&&(Kc=!0)),d=g}_i!==0&&_i!==5||Jo(n),ds!==0&&(ds=0)}function pg(n,s){for(var c=n.suspendedLanes,d=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var E=31-Ye(y),I=1<<E,Z=g[E];Z===-1?((I&c)===0||(I&d)!==0)&&(g[E]=bo(I,s)):Z<=s&&(n.expiredLanes|=I),y&=~I}if(s=je,c=ve,c=fa(n,n===s?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,c===0||n===s&&(Be===2||Be===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&_t(d),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||Os(n,c)){if(s=c&-c,s===n.callbackPriority)return s;switch(d!==null&&_t(d),xo(c)){case 2:case 8:c=De;break;case 32:c=ue;break;case 268435456:c=Gn;break;default:c=ue}return d=gg.bind(null,n),c=At(c,d),n.callbackPriority=s,n.callbackNode=c,s}return d!==null&&d!==null&&_t(d),n.callbackPriority=2,n.callbackNode=null,2}function gg(n,s){if(_i!==0&&_i!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(Yc()&&n.callbackNode!==c)return null;var d=ve;return d=fa(n,n===je?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(W1(n,d,s),pg(n,zt()),n.callbackNode!=null&&n.callbackNode===c?gg.bind(null,n):null)}function bg(n,s){if(Yc())return null;W1(n,s,!0)}function ay(){vy(function(){(Oe&6)!==0?At(Wt,sy):mg()})}function Jh(){if(ds===0){var n=Ra;n===0&&(n=Kr,Kr<<=1,(Kr&261888)===0&&(Kr=256)),ds=n}return ds}function vg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:nc(""+n)}function yg(n,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,n.id&&c.setAttribute("form",n.id),s.parentNode.insertBefore(c,s),n=new FormData(n),c.parentNode.removeChild(c),n}function oy(n,s,c,d,g){if(s==="submit"&&c&&c.stateNode===g){var y=vg((g[Fi]||null).action),E=d.submitter;E&&(s=(s=E[Fi]||null)?vg(s.formAction):E.getAttribute("formAction"),s!==null&&(y=s,E=null));var I=new oc("action","action",null,d,g);n.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ds!==0){var Z=E?yg(g,E):new FormData(g);yh(c,{pending:!0,data:Z,method:g.method,action:y},null,Z)}}else typeof y=="function"&&(I.preventDefault(),Z=E?yg(g,E):new FormData(g),yh(c,{pending:!0,data:Z,method:g.method,action:y},y,Z))},currentTarget:g}]})}}for(var td=0;td<Bu.length;td++){var ed=Bu[td],ly=ed.toLowerCase(),cy=ed[0].toUpperCase()+ed.slice(1);$n(ly,"on"+cy)}$n(Zm,"onAnimationEnd"),$n(Wm,"onAnimationIteration"),$n(Qm,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(k3,"onTransitionRun"),$n(E3,"onTransitionStart"),$n(T3,"onTransitionCancel"),$n(Jm,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tl));function xg(n,s){s=(s&4)!==0;for(var c=0;c<n.length;c++){var d=n[c],g=d.event;d=d.listeners;t:{var y=void 0;if(s)for(var E=d.length-1;0<=E;E--){var I=d[E],Z=I.instance,lt=I.currentTarget;if(I=I.listener,Z!==y&&g.isPropagationStopped())break t;y=I,g.currentTarget=lt;try{y(g)}catch(xt){uc(xt)}g.currentTarget=null,y=Z}else for(E=0;E<d.length;E++){if(I=d[E],Z=I.instance,lt=I.currentTarget,I=I.listener,Z!==y&&g.isPropagationStopped())break t;y=I,g.currentTarget=lt;try{y(g)}catch(xt){uc(xt)}g.currentTarget=null,y=Z}}}}function be(n,s){var c=s[pa];c===void 0&&(c=s[pa]=new Set);var d=n+"__bubble";c.has(d)||(wg(s,n,2,!1),c.add(d))}function id(n,s,c){var d=0;s&&(d|=4),wg(c,n,d,s)}var Zc="_reactListening"+Math.random().toString(36).slice(2);function nd(n){if(!n[Zc]){n[Zc]=!0,Ne.forEach(function(c){c!=="selectionchange"&&(uy.has(c)||id(c,!1,n),id(c,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Zc]||(s[Zc]=!0,id("selectionchange",!1,s))}}function wg(n,s,c,d){switch(Zg(s)){case 2:var g=Fy;break;case 8:g=Py;break;default:g=vd}c=g.bind(null,s,c,n),g=void 0,!Au||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),d?g!==void 0?n.addEventListener(s,c,{capture:!0,passive:g}):n.addEventListener(s,c,!0):g!==void 0?n.addEventListener(s,c,{passive:g}):n.addEventListener(s,c,!1)}function rd(n,s,c,d,g){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)t:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var I=d.stateNode.containerInfo;if(I===g)break;if(E===4)for(E=d.return;E!==null;){var Z=E.tag;if((Z===3||Z===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;I!==null;){if(E=Rt(I),E===null)return;if(Z=E.tag,Z===5||Z===6||Z===26||Z===27){d=y=E;continue t}I=I.parentNode}}d=d.return}Em(function(){var lt=y,xt=wu(c),St=[];t:{var ct=tp.get(n);if(ct!==void 0){var bt=oc,Vt=n;switch(n){case"keypress":if(sc(c)===0)break t;case"keydown":case"keyup":bt=n3;break;case"focusin":Vt="focus",bt=Tu;break;case"focusout":Vt="blur",bt=Tu;break;case"beforeblur":case"afterblur":bt=Tu;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=$v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=a3;break;case Zm:case Wm:case Qm:bt=Xv;break;case Jm:bt=l3;break;case"scroll":case"scrollend":bt=Gv;break;case"wheel":bt=u3;break;case"copy":case"cut":case"paste":bt=Zv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Dm;break;case"toggle":case"beforetoggle":bt=d3}var ie=(s&4)!==0,Ue=!ie&&(n==="scroll"||n==="scrollend"),tt=ie?ct!==null?ct+"Capture":null:ct;ie=[];for(var W=lt,st;W!==null;){var wt=W;if(st=wt.stateNode,wt=wt.tag,wt!==5&&wt!==26&&wt!==27||st===null||tt===null||(wt=So(W,tt),wt!=null&&ie.push(el(W,wt,st))),Ue)break;W=W.return}0<ie.length&&(ct=new bt(ct,Vt,null,c,xt),St.push({event:ct,listeners:ie}))}}if((s&7)===0){t:{if(ct=n==="mouseover"||n==="pointerover",bt=n==="mouseout"||n==="pointerout",ct&&c!==xu&&(Vt=c.relatedTarget||c.fromElement)&&(Rt(Vt)||Vt[xr]))break t;if((bt||ct)&&(ct=xt.window===xt?xt:(ct=xt.ownerDocument)?ct.defaultView||ct.parentWindow:window,bt?(Vt=c.relatedTarget||c.toElement,bt=lt,Vt=Vt?Rt(Vt):null,Vt!==null&&(Ue=a(Vt),ie=Vt.tag,Vt!==Ue||ie!==5&&ie!==27&&ie!==6)&&(Vt=null)):(bt=null,Vt=lt),bt!==Vt)){if(ie=Mm,wt="onMouseLeave",tt="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(ie=Dm,wt="onPointerLeave",tt="onPointerEnter",W="pointer"),Ue=bt==null?ct:Pt(bt),st=Vt==null?ct:Pt(Vt),ct=new ie(wt,W+"leave",bt,c,xt),ct.target=Ue,ct.relatedTarget=st,wt=null,Rt(xt)===lt&&(ie=new ie(tt,W+"enter",Vt,c,xt),ie.target=st,ie.relatedTarget=Ue,wt=ie),Ue=wt,bt&&Vt)e:{for(ie=hy,tt=bt,W=Vt,st=0,wt=tt;wt;wt=ie(wt))st++;wt=0;for(var Qt=W;Qt;Qt=ie(Qt))wt++;for(;0<st-wt;)tt=ie(tt),st--;for(;0<wt-st;)W=ie(W),wt--;for(;st--;){if(tt===W||W!==null&&tt===W.alternate){ie=tt;break e}tt=ie(tt),W=ie(W)}ie=null}else ie=null;bt!==null&&Sg(St,ct,bt,ie,!1),Vt!==null&&Ue!==null&&Sg(St,Ue,Vt,ie,!0)}}t:{if(ct=lt?Pt(lt):window,bt=ct.nodeName&&ct.nodeName.toLowerCase(),bt==="select"||bt==="input"&&ct.type==="file")var Te=Pm;else if(Im(ct))if(Um)Te=S3;else{Te=x3;var Kt=y3}else bt=ct.nodeName,!bt||bt.toLowerCase()!=="input"||ct.type!=="checkbox"&&ct.type!=="radio"?lt&&yu(lt.elementType)&&(Te=Pm):Te=w3;if(Te&&(Te=Te(n,lt))){Fm(St,Te,c,xt);break t}Kt&&Kt(n,ct,lt),n==="focusout"&&lt&&ct.type==="number"&&lt.memoizedProps.value!=null&&vu(ct,"number",ct.value)}switch(Kt=lt?Pt(lt):window,n){case"focusin":(Im(Kt)||Kt.contentEditable==="true")&&(Sa=Kt,Ou=lt,Ro=null);break;case"focusout":Ro=Ou=Sa=null;break;case"mousedown":zu=!0;break;case"contextmenu":case"mouseup":case"dragend":zu=!1,Xm(St,c,xt);break;case"selectionchange":if(_3)break;case"keydown":case"keyup":Xm(St,c,xt)}var he;if(Mu)t:{switch(n){case"compositionstart":var ye="onCompositionStart";break t;case"compositionend":ye="onCompositionEnd";break t;case"compositionupdate":ye="onCompositionUpdate";break t}ye=void 0}else wa?Lm(n,c)&&(ye="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(ye="onCompositionStart");ye&&(Nm&&c.locale!=="ko"&&(wa||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&wa&&(he=Tm()):(Zr=xt,_u="value"in Zr?Zr.value:Zr.textContent,wa=!0)),Kt=Wc(lt,ye),0<Kt.length&&(ye=new Rm(ye,n,null,c,xt),St.push({event:ye,listeners:Kt}),he?ye.data=he:(he=Bm(c),he!==null&&(ye.data=he)))),(he=m3?p3(n,c):g3(n,c))&&(ye=Wc(lt,"onBeforeInput"),0<ye.length&&(Kt=new Rm("onBeforeInput","beforeinput",null,c,xt),St.push({event:Kt,listeners:ye}),Kt.data=he)),oy(St,n,lt,c,xt)}xg(St,s)})}function el(n,s,c){return{instance:n,listener:s,currentTarget:c}}function Wc(n,s){for(var c=s+"Capture",d=[];n!==null;){var g=n,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=So(n,c),g!=null&&d.unshift(el(n,g,y)),g=So(n,s),g!=null&&d.push(el(n,g,y))),n.tag===3)return d;n=n.return}return[]}function hy(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Sg(n,s,c,d,g){for(var y=s._reactName,E=[];c!==null&&c!==d;){var I=c,Z=I.alternate,lt=I.stateNode;if(I=I.tag,Z!==null&&Z===d)break;I!==5&&I!==26&&I!==27||lt===null||(Z=lt,g?(lt=So(c,y),lt!=null&&E.unshift(el(c,lt,Z))):g||(lt=So(c,y),lt!=null&&E.push(el(c,lt,Z)))),c=c.return}E.length!==0&&n.push({event:s,listeners:E})}var dy=/\r\n?/g,fy=/\u0000|\uFFFD/g;function Ag(n){return(typeof n=="string"?n:""+n).replace(dy,`
`).replace(fy,"")}function _g(n,s){return s=Ag(s),Ag(n)===s}function Pe(n,s,c,d,g,y){switch(c){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||va(n,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&va(n,""+d);break;case"className":Xt(n,"class",d);break;case"tabIndex":Xt(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Xt(n,c,d);break;case"style":_m(n,d,y);break;case"data":if(s!=="object"){Xt(n,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||c!=="href")){n.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=nc(""+d),n.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(s!=="input"&&Pe(n,s,"name",g.name,g,null),Pe(n,s,"formEncType",g.formEncType,g,null),Pe(n,s,"formMethod",g.formMethod,g,null),Pe(n,s,"formTarget",g.formTarget,g,null)):(Pe(n,s,"encType",g.encType,g,null),Pe(n,s,"method",g.method,g,null),Pe(n,s,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=nc(""+d),n.setAttribute(c,d);break;case"onClick":d!=null&&(n.onclick=wr);break;case"onScroll":d!=null&&be("scroll",n);break;case"onScrollEnd":d!=null&&be("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}c=nc(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""+d):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":d===!0?n.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,d):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(c,d):n.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(c):n.setAttribute(c,d);break;case"popover":be("beforetoggle",n),be("toggle",n),oe(n,"popover",d);break;case"xlinkActuate":Le(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Le(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Le(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Le(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Le(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Le(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Le(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Le(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Le(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":oe(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Hv.get(c)||c,oe(n,c,d))}}function sd(n,s,c,d,g,y){switch(c){case"style":_m(n,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"children":typeof d=="string"?va(n,d):(typeof d=="number"||typeof d=="bigint")&&va(n,""+d);break;case"onScroll":d!=null&&be("scroll",n);break;case"onScrollEnd":d!=null&&be("scrollend",n);break;case"onClick":d!=null&&(n.onclick=wr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hi.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),s=c.slice(2,g?c.length-7:void 0),y=n[Fi]||null,y=y!=null?y[c]:null,typeof y=="function"&&n.removeEventListener(s,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(s,d,g);break t}c in n?n[c]=d:d===!0?n.setAttribute(c,""):oe(n,c,d)}}}function Ni(n,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",n),be("load",n);var d=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var E=c[y];if(E!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Pe(n,s,y,E,c,null)}}g&&Pe(n,s,"srcSet",c.srcSet,c,null),d&&Pe(n,s,"src",c.src,c,null);return;case"input":be("invalid",n);var I=y=E=g=null,Z=null,lt=null;for(d in c)if(c.hasOwnProperty(d)){var xt=c[d];if(xt!=null)switch(d){case"name":g=xt;break;case"type":E=xt;break;case"checked":Z=xt;break;case"defaultChecked":lt=xt;break;case"value":y=xt;break;case"defaultValue":I=xt;break;case"children":case"dangerouslySetInnerHTML":if(xt!=null)throw Error(i(137,s));break;default:Pe(n,s,d,xt,c,null)}}xm(n,y,I,Z,lt,E,g,!1);return;case"select":be("invalid",n),d=E=y=null;for(g in c)if(c.hasOwnProperty(g)&&(I=c[g],I!=null))switch(g){case"value":y=I;break;case"defaultValue":E=I;break;case"multiple":d=I;default:Pe(n,s,g,I,c,null)}s=y,c=E,n.multiple=!!d,s!=null?ba(n,!!d,s,!1):c!=null&&ba(n,!!d,c,!0);return;case"textarea":be("invalid",n),y=g=d=null;for(E in c)if(c.hasOwnProperty(E)&&(I=c[E],I!=null))switch(E){case"value":d=I;break;case"defaultValue":g=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:Pe(n,s,E,I,c,null)}Sm(n,d,g,y);return;case"option":for(Z in c)if(c.hasOwnProperty(Z)&&(d=c[Z],d!=null))switch(Z){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Pe(n,s,Z,d,c,null)}return;case"dialog":be("beforetoggle",n),be("toggle",n),be("cancel",n),be("close",n);break;case"iframe":case"object":be("load",n);break;case"video":case"audio":for(d=0;d<tl.length;d++)be(tl[d],n);break;case"image":be("error",n),be("load",n);break;case"details":be("toggle",n);break;case"embed":case"source":case"link":be("error",n),be("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in c)if(c.hasOwnProperty(lt)&&(d=c[lt],d!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Pe(n,s,lt,d,c,null)}return;default:if(yu(s)){for(xt in c)c.hasOwnProperty(xt)&&(d=c[xt],d!==void 0&&sd(n,s,xt,d,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(d=c[I],d!=null&&Pe(n,s,I,d,c,null))}function my(n,s,c,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,I=null,Z=null,lt=null,xt=null;for(bt in c){var St=c[bt];if(c.hasOwnProperty(bt)&&St!=null)switch(bt){case"checked":break;case"value":break;case"defaultValue":Z=St;default:d.hasOwnProperty(bt)||Pe(n,s,bt,null,d,St)}}for(var ct in d){var bt=d[ct];if(St=c[ct],d.hasOwnProperty(ct)&&(bt!=null||St!=null))switch(ct){case"type":y=bt;break;case"name":g=bt;break;case"checked":lt=bt;break;case"defaultChecked":xt=bt;break;case"value":E=bt;break;case"defaultValue":I=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(i(137,s));break;default:bt!==St&&Pe(n,s,ct,bt,d,St)}}bu(n,E,I,Z,lt,xt,y,g);return;case"select":bt=E=I=ct=null;for(y in c)if(Z=c[y],c.hasOwnProperty(y)&&Z!=null)switch(y){case"value":break;case"multiple":bt=Z;default:d.hasOwnProperty(y)||Pe(n,s,y,null,d,Z)}for(g in d)if(y=d[g],Z=c[g],d.hasOwnProperty(g)&&(y!=null||Z!=null))switch(g){case"value":ct=y;break;case"defaultValue":I=y;break;case"multiple":E=y;default:y!==Z&&Pe(n,s,g,y,d,Z)}s=I,c=E,d=bt,ct!=null?ba(n,!!c,ct,!1):!!d!=!!c&&(s!=null?ba(n,!!c,s,!0):ba(n,!!c,c?[]:"",!1));return;case"textarea":bt=ct=null;for(I in c)if(g=c[I],c.hasOwnProperty(I)&&g!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Pe(n,s,I,null,d,g)}for(E in d)if(g=d[E],y=c[E],d.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":ct=g;break;case"defaultValue":bt=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&Pe(n,s,E,g,d,y)}wm(n,ct,bt);return;case"option":for(var Vt in c)if(ct=c[Vt],c.hasOwnProperty(Vt)&&ct!=null&&!d.hasOwnProperty(Vt))switch(Vt){case"selected":n.selected=!1;break;default:Pe(n,s,Vt,null,d,ct)}for(Z in d)if(ct=d[Z],bt=c[Z],d.hasOwnProperty(Z)&&ct!==bt&&(ct!=null||bt!=null))switch(Z){case"selected":n.selected=ct&&typeof ct!="function"&&typeof ct!="symbol";break;default:Pe(n,s,Z,ct,d,bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in c)ct=c[ie],c.hasOwnProperty(ie)&&ct!=null&&!d.hasOwnProperty(ie)&&Pe(n,s,ie,null,d,ct);for(lt in d)if(ct=d[lt],bt=c[lt],d.hasOwnProperty(lt)&&ct!==bt&&(ct!=null||bt!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,s));break;default:Pe(n,s,lt,ct,d,bt)}return;default:if(yu(s)){for(var Ue in c)ct=c[Ue],c.hasOwnProperty(Ue)&&ct!==void 0&&!d.hasOwnProperty(Ue)&&sd(n,s,Ue,void 0,d,ct);for(xt in d)ct=d[xt],bt=c[xt],!d.hasOwnProperty(xt)||ct===bt||ct===void 0&&bt===void 0||sd(n,s,xt,ct,d,bt);return}}for(var tt in c)ct=c[tt],c.hasOwnProperty(tt)&&ct!=null&&!d.hasOwnProperty(tt)&&Pe(n,s,tt,null,d,ct);for(St in d)ct=d[St],bt=c[St],!d.hasOwnProperty(St)||ct===bt||ct==null&&bt==null||Pe(n,s,St,ct,d,bt)}function kg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function py(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],y=g.transferSize,E=g.initiatorType,I=g.duration;if(y&&I&&kg(E)){for(E=0,I=g.responseEnd,d+=1;d<c.length;d++){var Z=c[d],lt=Z.startTime;if(lt>I)break;var xt=Z.transferSize,St=Z.initiatorType;xt&&kg(St)&&(Z=Z.responseEnd,E+=xt*(Z<I?1:(I-lt)/(Z-lt)))}if(--d,s+=8*(y+E)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var ad=null,od=null;function Qc(n){return n.nodeType===9?n:n.ownerDocument}function Eg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tg(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function ld(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var cd=null;function gy(){var n=window.event;return n&&n.type==="popstate"?n===cd?!1:(cd=n,!0):(cd=null,!1)}var Cg=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,Mg=typeof Promise=="function"?Promise:void 0,vy=typeof queueMicrotask=="function"?queueMicrotask:typeof Mg<"u"?function(n){return Mg.resolve(null).then(n).catch(yy)}:Cg;function yy(n){setTimeout(function(){throw n})}function fs(n){return n==="head"}function Rg(n,s){var c=s,d=0;do{var g=c.nextSibling;if(n.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){n.removeChild(g),Ka(s);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")il(n.ownerDocument.documentElement);else if(c==="head"){c=n.ownerDocument.head,il(c);for(var y=c.firstChild;y;){var E=y.nextSibling,I=y.nodeName;y[vt]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=E}}else c==="body"&&il(n.ownerDocument.body);c=g}while(c);Ka(s)}function Dg(n,s){var c=n;n=0;do{var d=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(n===0)break;n--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||n++;c=d}while(c)}function ud(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":ud(c),kt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function xy(n,s,c,d){for(;n.nodeType===1;){var g=c;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[vt])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=zn(n.nextSibling),n===null)break}return null}function wy(n,s,c){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=zn(n.nextSibling),n===null))return null;return n}function Ng(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=zn(n.nextSibling),n===null))return null;return n}function hd(n){return n.data==="$?"||n.data==="$~"}function dd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Sy(n,s){var c=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||c.readyState!=="loading")s();else{var d=function(){s(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function zn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var fd=null;function Og(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"||c==="/&"){if(s===0)return zn(n.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}n=n.nextSibling}return null}function zg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return n;s--}else c!=="/$"&&c!=="/&"||s++}n=n.previousSibling}return null}function Lg(n,s,c){switch(s=Qc(c),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function il(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);kt(n)}var Ln=new Map,Bg=new Set;function Jc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ir=K.d;K.d={f:Ay,r:_y,D:ky,C:Ey,L:Ty,m:Cy,X:Ry,S:My,M:Dy};function Ay(){var n=Ir.f(),s=qc();return n||s}function _y(n){var s=$t(n);s!==null&&s.tag===5&&s.type==="form"?Jp(s):Ir.r(n)}var Va=typeof document>"u"?null:document;function Ig(n,s,c){var d=Va;if(d&&typeof s=="string"&&s){var g=Tn(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Bg.has(g)||(Bg.add(g),n={rel:n,crossOrigin:c,href:s},d.querySelector(g)===null&&(s=d.createElement("link"),Ni(s,"link",n),Ut(s),d.head.appendChild(s)))}}function ky(n){Ir.D(n),Ig("dns-prefetch",n,null)}function Ey(n,s){Ir.C(n,s),Ig("preconnect",n,s)}function Ty(n,s,c){Ir.L(n,s,c);var d=Va;if(d&&n&&s){var g='link[rel="preload"][as="'+Tn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Tn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Tn(c.imageSizes)+'"]')):g+='[href="'+Tn(n)+'"]';var y=g;switch(s){case"style":y=Ya(n);break;case"script":y=Xa(n)}Ln.has(y)||(n=p({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:n,as:s},c),Ln.set(y,n),d.querySelector(g)!==null||s==="style"&&d.querySelector(nl(y))||s==="script"&&d.querySelector(rl(y))||(s=d.createElement("link"),Ni(s,"link",n),Ut(s),d.head.appendChild(s)))}}function Cy(n,s){Ir.m(n,s);var c=Va;if(c&&n){var d=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Tn(d)+'"][href="'+Tn(n)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Xa(n)}if(!Ln.has(y)&&(n=p({rel:"modulepreload",href:n},s),Ln.set(y,n),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(rl(y)))return}d=c.createElement("link"),Ni(d,"link",n),Ut(d),c.head.appendChild(d)}}}function My(n,s,c){Ir.S(n,s,c);var d=Va;if(d&&n){var g=Bt(d).hoistableStyles,y=Ya(n);s=s||"default";var E=g.get(y);if(!E){var I={loading:0,preload:null};if(E=d.querySelector(nl(y)))I.loading=5;else{n=p({rel:"stylesheet",href:n,"data-precedence":s},c),(c=Ln.get(y))&&md(n,c);var Z=E=d.createElement("link");Ut(Z),Ni(Z,"link",n),Z._p=new Promise(function(lt,xt){Z.onload=lt,Z.onerror=xt}),Z.addEventListener("load",function(){I.loading|=1}),Z.addEventListener("error",function(){I.loading|=2}),I.loading|=4,t0(E,s,d)}E={type:"stylesheet",instance:E,count:1,state:I},g.set(y,E)}}}function Ry(n,s){Ir.X(n,s);var c=Va;if(c&&n){var d=Bt(c).hoistableScripts,g=Xa(n),y=d.get(g);y||(y=c.querySelector(rl(g)),y||(n=p({src:n,async:!0},s),(s=Ln.get(g))&&pd(n,s),y=c.createElement("script"),Ut(y),Ni(y,"link",n),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function Dy(n,s){Ir.M(n,s);var c=Va;if(c&&n){var d=Bt(c).hoistableScripts,g=Xa(n),y=d.get(g);y||(y=c.querySelector(rl(g)),y||(n=p({src:n,async:!0,type:"module"},s),(s=Ln.get(g))&&pd(n,s),y=c.createElement("script"),Ut(y),Ni(y,"link",n),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function Fg(n,s,c,d){var g=(g=It.current)?Jc(g):null;if(!g)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Ya(c.href),c=Bt(g).hoistableStyles,d=c.get(s),d||(d={type:"style",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=Ya(c.href);var y=Bt(g).hoistableStyles,E=y.get(n);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,E),(y=g.querySelector(nl(n)))&&!y._p&&(E.instance=y,E.state.loading=5),Ln.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ln.set(n,c),y||Ny(g,n,c,E.state))),s&&d===null)throw Error(i(528,""));return E}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xa(c),c=Bt(g).hoistableScripts,d=c.get(s),d||(d={type:"script",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ya(n){return'href="'+Tn(n)+'"'}function nl(n){return'link[rel="stylesheet"]['+n+"]"}function Pg(n){return p({},n,{"data-precedence":n.precedence,precedence:null})}function Ny(n,s,c,d){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=n.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Ni(s,"link",c),Ut(s),n.head.appendChild(s))}function Xa(n){return'[src="'+Tn(n)+'"]'}function rl(n){return"script[async]"+n}function Ug(n,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var d=n.querySelector('style[data-href~="'+Tn(c.href)+'"]');if(d)return s.instance=d,Ut(d),d;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),Ut(d),Ni(d,"style",g),t0(d,c.precedence,n),s.instance=d;case"stylesheet":g=Ya(c.href);var y=n.querySelector(nl(g));if(y)return s.state.loading|=4,s.instance=y,Ut(y),y;d=Pg(c),(g=Ln.get(g))&&md(d,g),y=(n.ownerDocument||n).createElement("link"),Ut(y);var E=y;return E._p=new Promise(function(I,Z){E.onload=I,E.onerror=Z}),Ni(y,"link",d),s.state.loading|=4,t0(y,c.precedence,n),s.instance=y;case"script":return y=Xa(c.src),(g=n.querySelector(rl(y)))?(s.instance=g,Ut(g),g):(d=c,(g=Ln.get(y))&&(d=p({},c),pd(d,g)),n=n.ownerDocument||n,g=n.createElement("script"),Ut(g),Ni(g,"link",d),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,t0(d,c.precedence,n));return s.instance}function t0(n,s,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,E=0;E<d.length;E++){var I=d[E];if(I.dataset.precedence===s)y=I;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(n,s.firstChild))}function md(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function pd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var e0=null;function Hg(n,s,c){if(e0===null){var d=new Map,g=e0=new Map;g.set(c,d)}else g=e0,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(n))return d;for(d.set(n,null),c=c.getElementsByTagName(n),g=0;g<c.length;g++){var y=c[g];if(!(y[vt]||y[Ai]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(s)||"";E=n+E;var I=d.get(E);I?I.push(y):d.set(E,[y])}}return d}function jg(n,s,c){n=n.ownerDocument||n,n.head.insertBefore(c,s==="title"?n.querySelector("head > title"):null)}function Oy(n,s,c){if(c===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Gg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function zy(n,s,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=Ya(d.href),y=s.querySelector(nl(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=i0.bind(n),s.then(n,n)),c.state.loading|=4,c.instance=y,Ut(y);return}y=s.ownerDocument||s,d=Pg(d),(g=Ln.get(g))&&md(d,g),y=y.createElement("link"),Ut(y);var E=y;E._p=new Promise(function(I,Z){E.onload=I,E.onerror=Z}),Ni(y,"link",d),c.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(n.count++,c=i0.bind(n),s.addEventListener("load",c),s.addEventListener("error",c))}}var gd=0;function Ly(n,s){return n.stylesheets&&n.count===0&&r0(n,n.stylesheets),0<n.count||0<n.imgCount?function(c){var d=setTimeout(function(){if(n.stylesheets&&r0(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+s);0<n.imgBytes&&gd===0&&(gd=62500*py());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&r0(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>gd?50:800)+s);return n.unsuspend=c,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function i0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)r0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var n0=null;function r0(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,n0=new Map,s.forEach(By,n),n0=null,i0.call(n))}function By(n,s){if(!(s.state.loading&4)){var c=n0.get(n);if(c)var d=c.get(null);else{c=new Map,n0.set(n,c);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),d=E)}d&&c.set(null,d)}g=s.instance,E=g.getAttribute("data-precedence"),y=c.get(E)||d,y===d&&c.set(null,g),c.set(E,g),this.count++,d=i0.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var sl={$$typeof:M,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function Iy(n,s,c,d,g,y,E,I,Z){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vo(0),this.hiddenUpdates=vo(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function qg(n,s,c,d,g,y,E,I,Z,lt,xt,St){return n=new Iy(n,s,c,E,Z,lt,xt,St,I),s=1,y===!0&&(s|=24),y=pn(3,null,null,s),n.current=y,y.stateNode=n,s=Ku(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:s},Ju(y),n}function $g(n){return n?(n=ka,n):ka}function Vg(n,s,c,d,g,y){g=$g(g),d.context===null?d.context=g:d.pendingContext=g,d=is(s),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=ns(n,d,s),c!==null&&(on(c,n,s),Io(c,n,s))}function Yg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<s?c:s}}function bd(n,s){Yg(n,s),(n=n.alternate)&&Yg(n,s)}function Xg(n){if(n.tag===13||n.tag===31){var s=Ps(n,67108864);s!==null&&on(s,n,67108864),bd(n,67108864)}}function Kg(n){if(n.tag===13||n.tag===31){var s=xn();s=yo(s);var c=Ps(n,s);c!==null&&on(c,n,s),bd(n,s)}}var s0=!0;function Fy(n,s,c,d){var g=V.T;V.T=null;var y=K.p;try{K.p=2,vd(n,s,c,d)}finally{K.p=y,V.T=g}}function Py(n,s,c,d){var g=V.T;V.T=null;var y=K.p;try{K.p=8,vd(n,s,c,d)}finally{K.p=y,V.T=g}}function vd(n,s,c,d){if(s0){var g=yd(d);if(g===null)rd(n,s,d,a0,c),Wg(n,d);else if(Hy(g,n,s,c,d))d.stopPropagation();else if(Wg(n,d),s&4&&-1<Uy.indexOf(n)){for(;g!==null;){var y=$t(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Ji(y.pendingLanes);if(E!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;E;){var Z=1<<31-Ye(E);I.entanglements[1]|=Z,E&=~Z}ir(y),(Oe&6)===0&&(jc=zt()+500,Jo(0))}}break;case 31:case 13:I=Ps(y,2),I!==null&&on(I,y,2),qc(),bd(y,2)}if(y=yd(d),y===null&&rd(n,s,d,a0,c),y===g)break;g=y}g!==null&&d.stopPropagation()}else rd(n,s,d,null,c)}}function yd(n){return n=wu(n),xd(n)}var a0=null;function xd(n){if(a0=null,n=Rt(n),n!==null){var s=a(n);if(s===null)n=null;else{var c=s.tag;if(c===13){if(n=o(s),n!==null)return n;n=null}else if(c===31){if(n=u(s),n!==null)return n;n=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return a0=n,null}function Zg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case Wt:return 2;case De:return 8;case ue:case Ii:return 32;case Gn:return 268435456;default:return 32}default:return 32}}var wd=!1,ms=null,ps=null,gs=null,al=new Map,ol=new Map,bs=[],Uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wg(n,s){switch(n){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":al.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(s.pointerId)}}function ll(n,s,c,d,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},s!==null&&(s=$t(s),s!==null&&Xg(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function Hy(n,s,c,d,g){switch(s){case"focusin":return ms=ll(ms,n,s,c,d,g),!0;case"dragenter":return ps=ll(ps,n,s,c,d,g),!0;case"mouseover":return gs=ll(gs,n,s,c,d,g),!0;case"pointerover":var y=g.pointerId;return al.set(y,ll(al.get(y)||null,n,s,c,d,g)),!0;case"gotpointercapture":return y=g.pointerId,ol.set(y,ll(ol.get(y)||null,n,s,c,d,g)),!0}return!1}function Qg(n){var s=Rt(n.target);if(s!==null){var c=a(s);if(c!==null){if(s=c.tag,s===13){if(s=o(c),s!==null){n.blockedOn=s,Jl(n.priority,function(){Kg(c)});return}}else if(s===31){if(s=u(c),s!==null){n.blockedOn=s,Jl(n.priority,function(){Kg(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function o0(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var c=yd(n.nativeEvent);if(c===null){c=n.nativeEvent;var d=new c.constructor(c.type,c);xu=d,c.target.dispatchEvent(d),xu=null}else return s=$t(c),s!==null&&Xg(s),n.blockedOn=c,!1;s.shift()}return!0}function Jg(n,s,c){o0(n)&&c.delete(s)}function jy(){wd=!1,ms!==null&&o0(ms)&&(ms=null),ps!==null&&o0(ps)&&(ps=null),gs!==null&&o0(gs)&&(gs=null),al.forEach(Jg),ol.forEach(Jg)}function l0(n,s){n.blockedOn===s&&(n.blockedOn=null,wd||(wd=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,jy)))}var c0=null;function t2(n){c0!==n&&(c0=n,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){c0===n&&(c0=null);for(var s=0;s<n.length;s+=3){var c=n[s],d=n[s+1],g=n[s+2];if(typeof d!="function"){if(xd(d||c)===null)continue;break}var y=$t(c);y!==null&&(n.splice(s,3),s-=3,yh(y,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function Ka(n){function s(Z){return l0(Z,n)}ms!==null&&l0(ms,n),ps!==null&&l0(ps,n),gs!==null&&l0(gs,n),al.forEach(s),ol.forEach(s);for(var c=0;c<bs.length;c++){var d=bs[c];d.blockedOn===n&&(d.blockedOn=null)}for(;0<bs.length&&(c=bs[0],c.blockedOn===null);)Qg(c),c.blockedOn===null&&bs.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],y=c[d+1],E=g[Fi]||null;if(typeof y=="function")E||t2(c);else if(E){var I=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[Fi]||null)I=E.formAction;else if(xd(g)!==null)continue}else I=E.action;typeof I=="function"?c[d+1]=I:(c.splice(d,3),d-=3),t2(c)}}}function e2(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Sd(n){this._internalRoot=n}u0.prototype.render=Sd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,d=xn();Vg(c,d,n,s,null,null)},u0.prototype.unmount=Sd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Vg(n.current,2,null,n,null,null),qc(),s[xr]=null}};function u0(n){this._internalRoot=n}u0.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ql();n={blockedOn:null,target:n,priority:s};for(var c=0;c<bs.length&&s!==0&&s<bs[c].priority;c++);bs.splice(c,0,n),c===0&&Qg(n)}};var i2=t.version;if(i2!=="19.2.0")throw Error(i(527,i2,"19.2.0"));K.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var Gy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var h0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!h0.isDisabled&&h0.supportsFiber)try{ze=h0.inject(Gy),pi=h0}catch{}}return ul.createRoot=function(n,s){if(!r(n))throw Error(i(299));var c=!1,d="",g=c1,y=u1,E=h1;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=qg(n,1,!1,null,null,c,d,null,g,y,E,e2),n[xr]=s.current,nd(n),new Sd(s)},ul.hydrateRoot=function(n,s,c){if(!r(n))throw Error(i(299));var d=!1,g="",y=c1,E=u1,I=h1,Z=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.formState!==void 0&&(Z=c.formState)),s=qg(n,1,!0,s,c??null,d,g,Z,y,E,I,e2),s.context=$g(null),c=s.current,d=xn(),d=yo(d),g=is(d),g.callback=null,ns(c,g,d),c=d,s.current.lanes=c,zs(s,c),ir(s),n[xr]=s.current,nd(n),new u0(s)},ul.version="19.2.0",ul}var m2;function t5(){if(m2)return Ed.exports;m2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),Ed.exports=Jy(),Ed.exports}var e5=t5();const $i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),tf=[.001,0,0,.001,0,0],Rd=1.35,wn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ss={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},El="pdfjs_internal_editor_",le={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ae={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},i5={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Oi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},z0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},wi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ja={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},J0={ERRORS:0,WARNINGS:1,INFOS:5},Tl={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},f0={moveTo:0,lineTo:1,curveTo:2,closePath:3},n5={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let tu=J0.WARNINGS;function r5(l){Number.isInteger(l)&&(tu=l)}function s5(){return tu}function eu(l){tu>=J0.INFOS&&console.info(`Info: ${l}`)}function ae(l){tu>=J0.WARNINGS&&console.warn(`Warning: ${l}`)}function Ge(l){throw new Error(l)}function _e(l,t){l||Ge(t)}function a5(l){switch(l?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function K4(l,t=null,e=null){if(!l)return null;if(e&&typeof l=="string"&&(e.addDefaultProtocol&&l.startsWith("www.")&&l.match(/\./g)?.length>=2&&(l=`http://${l}`),e.tryConvertEncoding))try{l=h5(l)}catch{}const i=t?URL.parse(l,t):URL.parse(l);return a5(i)?i:null}function Z4(l,t,e=!1){const i=URL.parse(l);return i?(i.hash=t,i.href):e&&K4(l,"http://example.com")?l.split("#",1)[0]+`${t?`#${t}`:""}`:""}function me(l,t,e,i=!1){return Object.defineProperty(l,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const la=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class p2 extends la{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Dd extends la{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ef extends la{constructor(t){super(t,"InvalidPDFException")}}class H0 extends la{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class o5 extends la{constructor(t){super(t,"FormatError")}}class Es extends la{constructor(t){super(t,"AbortException")}}function W4(l){(typeof l!="object"||l?.length===void 0)&&Ge("Invalid argument for bytesToString");const t=l.length,e=8192;if(t<e)return String.fromCharCode.apply(null,l);const i=[];for(let r=0;r<t;r+=e){const a=Math.min(r+e,t),o=l.subarray(r,a);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Bl(l){typeof l!="string"&&Ge("Invalid argument for stringToBytes");const t=l.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=l.charCodeAt(i)&255;return e}function l5(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255)}function c5(){const l=new Uint8Array(4);return l[0]=1,new Uint32Array(l.buffer,0,1)[0]===1}function u5(){try{return new Function(""),!0}catch{return!1}}class Bi{static get isLittleEndian(){return me(this,"isLittleEndian",c5())}static get isEvalSupported(){return me(this,"isEvalSupported",u5())}static get isOffscreenCanvasSupported(){return me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return me(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return me(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return me(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Nd=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));class Yt{static makeHexColor(t,e,i){return`#${Nd[t]}${Nd[e]}${Nd[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const r=t[i],a=t[i+1];t[i]=r*e[0]+a*e[2]+e[4],t[i+1]=r*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const r=e[0],a=e[1],o=e[2],u=e[3],h=e[4],f=e[5];for(let m=0;m<6;m+=2){const p=t[i+m],b=t[i+m+1];t[i+m]=p*r+b*o+h,t[i+m+1]=p*a+b*u+f}}static applyInverseTransform(t,e){const i=t[0],r=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-i*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,i){const r=e[0],a=e[1],o=e[2],u=e[3],h=e[4],f=e[5],m=t[0],p=t[1],b=t[2],v=t[3];let w=r*m+h,x=w,_=r*b+h,A=_,T=u*p+f,M=T,N=u*v+f,R=N;if(a!==0||o!==0){const B=a*m,z=a*b,G=o*p,U=o*v;w+=G,A+=G,_+=U,x+=U,T+=B,R+=B,N+=z,M+=z}i[0]=Math.min(i[0],w,_,x,A),i[1]=Math.min(i[1],T,N,M,R),i[2]=Math.max(i[2],w,_,x,A),i[3]=Math.max(i[3],T,N,M,R)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],r=t[1],a=t[2],o=t[3],u=i**2+r**2,h=i*a+r*o,f=a**2+o**2,m=(u+f)/2,p=Math.sqrt(m**2-(u*f-h**2));e[0]=Math.sqrt(m+p||1),e[1]=Math.sqrt(m-p||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>o?null:[i,a,r,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,r,a){a[0]=Math.min(a[0],t,i),a[1]=Math.min(a[1],e,r),a[2]=Math.max(a[2],t,i),a[3]=Math.max(a[3],e,r)}static#t(t,e,i,r,a,o,u,h,f,m){if(f<=0||f>=1)return;const p=1-f,b=f*f,v=b*f,w=p*(p*(p*t+3*f*e)+3*b*i)+v*r,x=p*(p*(p*a+3*f*o)+3*b*u)+v*h;m[0]=Math.min(m[0],w),m[1]=Math.min(m[1],x),m[2]=Math.max(m[2],w),m[3]=Math.max(m[3],x)}static#e(t,e,i,r,a,o,u,h,f,m,p,b){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,e,i,r,a,o,u,h,-p/m,b);return}const v=m**2-4*p*f;if(v<0)return;const w=Math.sqrt(v),x=2*f;this.#t(t,e,i,r,a,o,u,h,(-m+w)/x,b),this.#t(t,e,i,r,a,o,u,h,(-m-w)/x,b)}static bezierBoundingBox(t,e,i,r,a,o,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),this.#e(t,i,a,u,e,r,o,h,3*(-t+3*(i-a)+u),6*(t-2*i+a),3*(i-t),f),this.#e(t,i,a,u,e,r,o,h,3*(-e+3*(r-o)+h),6*(e-2*r+o),3*(r-e),f)}}function h5(l){return decodeURIComponent(escape(l))}let Od=null,g2=null;function d5(l){return Od||(Od=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,g2=new Map([["ﬅ","ſt"]])),l.replaceAll(Od,(t,e,i)=>e?e.normalize("NFKC"):g2.get(i))}function Q4(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const l=new Uint8Array(32);return crypto.getRandomValues(l),W4(l)}const Cf="pdfjs_internal_id_";function f5(l,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,r,...a]=e;if(!l(i)&&!Number.isInteger(i)||!t(r))return!1;const o=a.length;let u=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;u=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Vi(l,t,e){return Math.min(Math.max(l,t),e)}function J4(l){return Uint8Array.prototype.toBase64?l.toBase64():btoa(W4(l))}function m5(l){return Uint8Array.fromBase64?Uint8Array.fromBase64(l):Bl(atob(l))}typeof Promise.try!="function"&&(Promise.try=function(l,...t){return new Promise(e=>{e(l(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(l){return l.reduce((t,e)=>t+e,0)});class Cl{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(a){if(!a)return;let o=null;const u=a.name;if(u==="#text")o=a.value;else if(Cl.shouldBuildText(u))a?.attributes?.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&e.push({str:o}),!!a.children)for(const h of a.children)r(h)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class tb{static setupStorage(t,e,i,r,a){const o=r.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),a==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),a==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const u of i.children)u.attributes.value===o.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:a}){const{attributes:o}=e,u=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[h,f]of Object.entries(o))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&a.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,a=t.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:a,linkService:i});const u=a!=="richText",h=t.div;if(h.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=p}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);o.append(p),u&&Cl.shouldBuildText(r.name)&&f.push(p)}return{textDivs:f}}const m=[[r,-1,o]];for(;m.length>0;){const[p,b,v]=m.at(-1);if(b+1===p.children.length){m.pop();continue}const w=p.children[++m.at(-1)[1]];if(w===null)continue;const{name:x}=w;if(x==="#text"){const A=document.createTextNode(w.value);f.push(A),v.append(A);continue}const _=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,x):document.createElement(x);if(v.append(_),w.attributes&&this.setAttributes({html:_,element:w,storage:e,intent:a,linkService:i}),w.children?.length>0)m.push([w,-1,_]);else if(w.value){const A=document.createTextNode(w.value);u&&Cl.shouldBuildText(x)&&f.push(A),_.append(A)}}for(const p of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Pr="http://www.w3.org/2000/svg";class ho{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Il(l,t="text"){if(bl(l,document.baseURI)){const e=await fetch(l);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",l,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Fl{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:a=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=a,this.offsetY=o,i*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,p,b,v;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,p=0,b=0,v=1;break;case 90:m=0,p=1,b=1,v=0;break;case 270:m=0,p=-1,b=-1,v=0;break;case 0:m=1,p=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,v=-v);let w,x,_,A;m===0?(w=Math.abs(f-t[1])*i+a,x=Math.abs(h-t[0])*i+o,_=(t[3]-t[1])*i,A=(t[2]-t[0])*i):(w=Math.abs(h-t[0])*i+a,x=Math.abs(f-t[1])*i+o,_=(t[2]-t[0])*i,A=(t[3]-t[1])*i),this.transform=[m*i,p*i,b*i,v*i,w-m*i*h-b*i*f,x-p*i*h-v*i*f],this.width=_,this.height=A}get rawDims(){const t=this.viewBox;return me(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new Fl({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(t,e){const i=[t,e];return Yt.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];Yt.applyTransform(e,this.transform);const i=[t[2],t[3]];return Yt.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return Yt.applyInverseTransform(i,this.transform),i}}class Mf extends la{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function iu(l){const t=l.length;let e=0;for(;e<t&&l[e].trim()==="";)e++;return l.substring(e,e+5).toLowerCase()==="data:"}function Rf(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function p5(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function g5(l,t="document.pdf"){if(typeof l!="string")return t;if(iu(l))return ae('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(l);if(!i)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},a=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(a.test(o))return r(o);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const f of u)if(a.test(f))return r(f);const h=Array.from(i.searchParams.keys()).reverse();for(const f of h)if(a.test(f))return r(f)}if(i.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(h)return r(h[0])}return t}class b2{started=Object.create(null);times=[];time(t){t in this.started&&ae(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ae(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:a}of this.times)t.push(`${i.padEnd(e)} ${a-r}ms
`);return t.join("")}}function bl(l,t){const e=t?URL.parse(l,t):URL.parse(l);return e?.protocol==="http:"||e?.protocol==="https:"}function Un(l){l.preventDefault()}function ci(l){l.preventDefault(),l.stopPropagation()}function b5(l){console.log("Deprecated API usage: "+l)}class nf{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,f==="-"?(o+=m,u+=p):f==="+"&&(o-=m,u-=p),new Date(Date.UTC(i,r,a,o,u,h))}}function v5(l,{scale:t=1,rotation:e=0}){const{width:i,height:r}=l.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new Fl({viewBox:a,userUnit:1,scale:t,rotation:e})}function Pl(l){if(l.startsWith("#")){const t=parseInt(l.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(t=>parseInt(t)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ae(`Not a valid color format: "${l}"`),[0,0,0])}function y5(l){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of l.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;l.set(e,Pl(i))}t.remove()}function ei(l){const{a:t,b:e,c:i,d:r,e:a,f:o}=l.getTransform();return[t,e,i,r,a,o]}function sr(l){const{a:t,b:e,c:i,d:r,e:a,f:o}=l.getTransform().invertSelf();return[t,e,i,r,a,o]}function ra(l,t,e=!1,i=!0){if(t instanceof Fl){const{pageWidth:r,pageHeight:a}=t.rawDims,{style:o}=l,u=Bi.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${a}px`,m=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,p=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(o.width=m,o.height=p):(o.width=p,o.height=m)}i&&l.setAttribute("data-main-rotation",t.rotation)}class mr{constructor(){const{pixelRatio:t}=mr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,r,a=-1){let o=1/0,u=1/0,h=1/0;i=mr.capPixels(i,a),i>0&&(o=Math.sqrt(i/(t*e))),r!==-1&&(u=r/t,h=r/e);const f=Math.min(o,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const rf=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class x5{static get isDarkMode(){return me(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class w5{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),me(this,"commentForegroundColor",Pl(i))}}function S5(l,t,e,i){i=Math.min(Math.max(i??1,0),1);const r=255*(1-i);return l=Math.round(l*i+r),t=Math.round(t*i+r),e=Math.round(e*i+r),[l,t,e]}function v2(l,t){const e=l[0]/255,i=l[1]/255,r=l[2]/255,a=Math.max(e,i,r),o=Math.min(e,i,r),u=(a+o)/2;if(a===o)t[0]=t[1]=0;else{const h=a-o;switch(t[1]=u<.5?h/(a+o):h/(2-a-o),a){case e:t[0]=((i-r)/h+(i<r?6:0))*60;break;case i:t[0]=((r-e)/h+2)*60;break;case r:t[0]=((e-i)/h+4)*60;break}}t[2]=u}function sf(l,t){const e=l[0],i=l[1],r=l[2],a=(1-Math.abs(2*r-1))*i,o=a*(1-Math.abs(e/60%2-1)),u=r-a/2;switch(Math.floor(e/60)){case 0:t[0]=a+u,t[1]=o+u,t[2]=u;break;case 1:t[0]=o+u,t[1]=a+u,t[2]=u;break;case 2:t[0]=u,t[1]=a+u,t[2]=o+u;break;case 3:t[0]=u,t[1]=o+u,t[2]=a+u;break;case 4:t[0]=o+u,t[1]=u,t[2]=a+u;break;case 5:case 6:t[0]=a+u,t[1]=u,t[2]=o+u;break}}function y2(l){return l<=.03928?l/12.92:((l+.055)/1.055)**2.4}function x2(l,t,e){sf(l,e),e.map(y2);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];sf(t,e),e.map(y2);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const w2=new Map;function A5(l,t){const e=l[0]+l[1]*256+l[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=w2.get(e);if(i)return i;const r=new Float32Array(9),a=r.subarray(0,3),o=r.subarray(3,6);v2(l,o);const u=r.subarray(6,9);v2(t,u);const h=u[2]<.5,f=h?12:4.5;if(o[2]=h?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),x2(o,u,a)<f){let m,p;h?(m=o[2],p=1):(m=0,p=o[2]);const b=.005;for(;p-m>b;){const v=o[2]=(m+p)/2;h===x2(o,u,a)<f?m=v:p=v}o[2]=h?p:m}return sf(o,a),i=Yt.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),w2.set(e,i),i}function eb({html:l,dir:t,className:e},i){const r=document.createDocumentFragment();if(typeof l=="string"){const a=document.createElement("p");a.dir=t||"auto";const o=l.split(/(?:\r\n?|\n)/);for(let u=0,h=o.length;u<h;++u){const f=o[u];a.append(document.createTextNode(f)),u<h-1&&a.append(document.createElement("br"))}r.append(a)}else tb.render({xfaHtml:l,div:r,intent:"richText"});r.firstChild.classList.add("richText",e),i.append(r)}class Sl{#t=null;#e=null;#n;#i=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,Sl.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Un,{signal:e}),t.addEventListener("pointerdown",Sl.#l,{signal:e}));const i=this.#i=document.createElement("div");i.className="buttons",t.append(i);const r=this.#n.toolbarPosition;if(r){const{style:a}=t,o=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ci(t)}#h(t){this.#n._focusEventsAllowed=!0,ci(t)}#f(t){const e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Un,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Sl.#c[t]),this.#f(i)&&i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#i.append(e,this.#g),this.#a=t}addComment(t,e=null){if(this.#r)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const r=this.#s=this.#g;e?(this.#i.insertBefore(i,e),this.#i.insertBefore(r,e)):this.#i.append(i,r),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#i.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#n);this.#f(e),this.#i.append(e,this.#g)}removeButton(t){switch(t){case"comment":this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const r=this.#i.querySelector(i);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class _5{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Un,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#n.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,e){let i=0,r=0;for(const a of t){const o=a.y+a.height;if(o<i)continue;const u=a.x+(e?a.width:0);if(o>i){r=u,i=o;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,i]}show(t,e,i){const[r,a]=this.#a(e,i),{style:o}=this.#e||=this.#i();t.append(this.#e),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,i,r){const a=document.createElement("button");a.classList.add("basic",t),a.tabIndex=0,a.setAttribute("data-l10n-id",e);const o=document.createElement("span");a.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",i);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(a.addEventListener("contextmenu",Un,{signal:u}),a.addEventListener("click",r,{signal:u})),this.#t.append(a)}}function ib(l,t,e){for(const i of e)t.addEventListener(i,l[i].bind(l))}class k5{#t=0;get id(){return`${El}${this.#t++}`}}class Df{#t=Q4();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return me(this,"_isSVGFittingCanvas",a)}async#i(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(i.url=e,r=await Il(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const a=Df._isSVGFittingCanvas,o=new FileReader,u=new Image,h=new Promise((f,m)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,f()},o.onload=async()=>{const p=i.svgUrl=o.result;u.src=await a?`${p}#svgView(preserveAspectRatio(none))`:p},u.onerror=o.onerror=m});o.readAsDataURL(r),await h}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){ae(r),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:r,type:a}=t;return this.#i(`${e}_${i}_${r}_${a}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const i=await e;return this.#i(t,i)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class E5{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:e,post:i,type:a};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(o&&this.#t[this.#i].type===a){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Ul{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Bi.platform;for(const[i,r,a={}]of t)for(const o of i){const u=o.startsWith("mac+");e&&u?(this.callbacks.set(o.slice(4),{callback:r,options:a}),this.allKeys.add(o.split("+").at(-1))):!e&&!u&&(this.callbacks.set(o,{callback:r,options:a}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:r,options:{bubbles:a=!1,args:o=[],checker:u=null}}=i;u&&!u(t,e)||(r.bind(t,...o,e)(),a||ci(e))}}class Nf{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return y5(t),me(this,"_colors",t)}convert(t){const e=Pl(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((a,o)=>a===e[o]))return Nf._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?Yt.makeHexColor(...e):t}}class Ts{#t=new AbortController;#e=null;#n=null;#i=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new E5;#l=null;#d=null;#h=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#b=!1;#y=!1;#v=!1;#k=null;#A=null;#x=null;#T=null;#S=!1;#_=null;#R=new k5;#C=!1;#M=!1;#I=!1;#N=null;#z=null;#F=null;#L=null;#q=null;#E=le.NONE;#w=new Set;#O=null;#P=null;#H=null;#Y=null;#V=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#B=null;#$=null;#Q=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ts.prototype,e=o=>o.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return me(this,"_keyboardManager",new Ul([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#$.contains(u)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,i,r,a,o,u,h,f,m,p,b,v,w,x,_){const A=this._signal=this.#t.signal;this.#$=t,this.#Q=e,this.#J=i,this.#r=r,this.#l=a,this.#P=o,this.#V=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:A}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),u._on("setpreference",this.onSetPreference.bind(this),{signal:A}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:A}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:A}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:A}),this.#lt(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#k=h.filterFactory,this.#H=f,this.#T=m||null,this.#b=p,this.#y=b,this.#v=v,this.#q=w||null,this.viewParameters={realScale:ho.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=_!==!1,a?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#p.clear(),this.#L?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#P?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#V=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return me(this,"hcmFilter",this.#H?this.#k.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return me(this,"direction",getComputedStyle(this.#$).direction)}get _highlightColors(){return me(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return me(this,"highlightColors",null);const e=new Map,i=!!this.#H;for(const[r,a]of t){const o=r.endsWith("_HCM");if(i&&o){e.set(r.replace("_HCM",""),a);continue}!i&&!o&&e.set(r,a)}return me(this,"highlightColors",e)}get highlightColorNames(){return me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,r){this.#l?.showDialog(this,t,e,i,r)}selectComment(t,e){this.#a.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),r=a=>{a.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await i}getSignature(t){this.#P?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#P}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#$.focus()}findParent(t,e){for(const i of this.#a.values()){const{x:r,y:a,width:o,height:u}=i.div.getBoundingClientRect();if(t>=r&&t<=r+o&&e>=a&&e<=a+u)return i}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ho.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#a.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:a,focusNode:o,focusOffset:u}=i,h=i.toString(),m=this.#W(i).closest(".textLayer"),p=this.getSelectionBoxes(m);if(!p)return;i.empty();const b=this.#tt(m),v=this.#E===le.NONE,w=()=>{const x=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:r,anchorOffset:a,focusNode:o,focusOffset:u,text:h});v&&this.showAllEditors("highlight",!0,!0),e&&x?.editComment()};if(v){this.switchToMode(le.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#at(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#W(t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(this.#_||=new _5(this),this.#_.show(i,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${El}${t}`,i=this.#s.getRawValue(e);return i&&this.#s.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#_?.hide(),this.#O=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const r=this.#W(t).closest(".textLayer");if(!r){this.#O&&(this.#_?.hide(),this.#O=null,this.#D({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#O=e,this.#D({hasSelectedText:!0}),!(this.#E!==le.HIGHLIGHT&&this.#E!==le.NONE)&&(this.#E===le.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#E===le.HIGHLIGHT?this.#tt(r):null;if(a?.toggleDrawing(),this.#M){const o=new AbortController,u=this.combinedSignal(o),h=f=>{f.type==="pointerup"&&f.button!==0||(o.abort(),a?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else a?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#E===le.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#z=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#z)return;const[t,e]=this.#z;this.#z=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#N)return;this.#N=new AbortController;const t=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#N?.abort(),this.#N=null}#it(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#nt(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#it()}removeEditListeners(){this.#ht(),this.#nt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#w){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const o of this.#u)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){ae(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const h of i){const f=await r.deserialize(h);if(!f)return;a.push(f)}const o=()=>{for(const h of a)this.#rt(h);this.#st(a)},u=()=>{for(const h of a)h.remove()};this.addCommands({cmd:o,undo:u,mustExec:!0})}catch(a){ae(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==le.NONE&&!this.isEditorHandlingKeyboard&&Ts._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(t){Object.entries(t).some(([i,r])=>this.#X[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#E===le.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Ae.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#it(),this.#D({isEditing:this.#E!==le.NONE,isEmpty:this.#Z(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#nt(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#C?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,r=!1,a=!1){if(this.#E!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#E===le.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#E=t,t===le.NONE){this.setEditingState(!1),this.#mt();for(const o of this.#i.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const o of this.#i.values())o.addStandaloneCommentButton();t===le.SIGNATURE&&await this.#P?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const o of this.#a.values())o.updateMode(t);if(t===le.POPUP){this.#n||=await this.#V.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const o=new Set,u=[];for(const h of this.#i.values()){const{annotationElementId:f,hasComment:m,deleted:p}=h;f&&o.add(f),m&&!p&&u.push(h.getData())}for(const h of this.#n){const{id:f,popupRef:m,contentsObj:p}=h;m&&p?.str&&!o.has(f)&&!this.#g.has(f)&&u.push(h)}this.#l?.showSidebar(u)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const o of this.#i.values())o.uid===e?(this.setSelected(o),a?o.editComment():r?o.enterInEditMode():o.focus()):o.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Ae.CREATE:this.currentLayer.addNewEditor(e);return;case Ae.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#w)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const a of this.#i.values())a.editorType===t&&a.show(e);(this.#Y?.get(Ae.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Ae.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#C){this.#C=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#i.values())e.enable()}}#mt(){if(this.unselectAll(),this.#C){this.#C=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const e of this.#i.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#rt(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#pt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Z()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Z()})}addCommands(t){this.#c.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Z()})}cleanUndoStack(t){this.#c.cleanType(t)}#Z(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],i=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},r=()=>{for(const a of e)this.#rt(a)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#st(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#st(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#E!==le.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=e;const[r,a]=this.#j,o=[...this.#w],u=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const h of o)this.#i.has(h.id)&&(h.translateInPage(r,a),h.translationDone())},undo:()=>{for(const h of o)this.#i.has(h.id)&&(h.translateInPage(-r,-a),h.translationDone())},mustExec:!1})},u);for(const h of o)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#w)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:r,y:a,pageIndex:o},u]of t)u.newX=r,u.newY=a,u.newPageIndex=o,e||=r!==u.savedX||a!==u.savedY||o!==u.savedPageIndex;if(!e)return!1;const i=(r,a,o,u)=>{if(this.#i.has(r.id)){const h=this.#a.get(u);h?r._setParentAndPosition(h,a,o):(r.pageIndex=u,r.x=a,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:o,newPageIndex:u}]of t)i(r,a,o,u)},undo:()=>{for(const[r,{savedX:a,savedY:o,savedPageIndex:u}]of t)i(r,a,o,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const i of this.#m.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#E}isEditingMode(){return this.#E!==le.NONE}get imageManager(){return me(this,"imageManager",new Df)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:r,width:a,height:o}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,m,p,b)=>({x:(m-r)/o,y:1-(f+p-i)/a,width:b/o,height:p/a});break;case"180":u=(f,m,p,b)=>({x:1-(f+p-i)/a,y:1-(m+b-r)/o,width:p/a,height:b/o});break;case"270":u=(f,m,p,b)=>({x:1-(m+b-r)/o,y:(f-i)/a,width:b/o,height:p/a});break;default:u=(f,m,p,b)=>({x:(f-i)/a,y:(m-r)/o,width:p/a,height:b/o});break}const h=[];for(let f=0,m=e.rangeCount;f<m;f++){const p=e.getRangeAt(f);if(!p.collapsed)for(const{x:b,y:v,width:w,height:x}of p.getClientRects())w===0||x===0||h.push(u(b,v,w,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#s.getRawValue(e);i&&(this.#E===le.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const r=this.#L?.get(t);r&&(r.setCanvas(e,i),this.#L.delete(t))}addMissingCanvas(t,e){(this.#L||=new Map).set(t,e)}}class ur{#t=null;#e=!1;#n=null;#i=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,ur.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){ur._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",ur.#f.missing),e.setAttribute("data-l10n-id",ur.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",Un,{signal:i}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#s=!0,r(a))},{signal:i}),await this.#m(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await ur._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:a=!1}){i&&(this.#l=i,this.#d=r),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#m(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",ur.#f[this.#g]),this.#i?.setAttribute("data-l10n-id",ur.#f[`${this.#g}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const r=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class m0{#t=null;#e=null;#n=!1;#i=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#i.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(i.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:r,y:a,width:o,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/o,(e+i-a)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=this.#i._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",Un,{signal:i}),e&&(t.addEventListener("focusin",a=>{this.#i._focusEventsAllowed=!1,ci(a)},{capture:!0,signal:i}),t.addEventListener("focusout",a=>{this.#i._focusEventsAllowed=!0,ci(a)},{capture:!0,signal:i})),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#n=!0,r(a))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,r;if(e)[i,r]=e;else{[i,r]=this.#i.commentButtonPosition;const{width:m,height:p,x:b,y:v}=this.#i;i=b+i*m,r=v+r*p}const a=this.#i.parent.boundingClientRect,{x:o,y:u,width:h,height:f}=a;this.#i._uiManager.editComment(this.#i,o+i*h,u+r*f,{...t,parentDimensions:a})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#r=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#a=t,this.data=t,this.#o=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#r=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class nu{#t;#e=!1;#n=null;#i;#a;#r;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:a=null,onPinchEnd:o=null,signal:u}){this.#t=t,this.#n=i,this.#i=e,this.#a=r,this.#r=a,this.#s=o,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/mr.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,a=AbortSignal.any([this.#c,r.signal]),o=this.#t,u={capture:!0,signal:a,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ci(f),h(f))},u),o.addEventListener("pointerup",h,u),o.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),a=this.#t,o={signal:r,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),o);const u=this.#m.bind(this);a.addEventListener("touchend",u,o),a.addEventListener("touchcancel",u,o),o.capture=!0,a.addEventListener("pointerdown",ci,o),a.addEventListener("pointermove",ci,o),a.addEventListener("pointercancel",ci,o),a.addEventListener("pointerup",ci,o),this.#a?.()}if(ci(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;ci(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:a}=e,{screenX:o,screenY:u}=i,h=this.#l,{touch0X:f,touch0Y:m,touch1X:p,touch1Y:b}=h,v=p-f,w=b-m,x=o-r,_=u-a,A=Math.hypot(x,_)||1,T=Math.hypot(v,w)||1;if(!this.#e&&Math.abs(T-A)<=nu.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=a,h.touch1X=o,h.touch1Y=u,!this.#e){this.#e=!0;return}const M=[(r+o)/2,(a+u)/2];this.#r?.(M,T,A)}#m(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ci(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class Jt{#t=null;#e=null;#n=null;#i=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#b=!1;#y=!1;#v=null;#k=0;#A=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#_=Jt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Nf;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Jt.prototype._resizeWithKeyboard,e=Ts.TRANSLATE_SMALL,i=Ts.TRANSLATE_BIG;return me(this,"_resizerKeyboardManager",new Ul([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Jt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,o];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new T5({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Jt._l10n??=t,Jt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Jt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Jt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ge("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[a,o]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/a,this.y=(e+r)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,r]=this.parentDimensions;this.setAt(t*i,e*r,this.width*i,this.height*r),this._onTranslated()}#R([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[r,a]}=this;if(this.x+=t/r,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[h,f]=this.getBaseTranslation();o+=h,u+=f;const{style:m}=i;m.left=`${(100*o).toFixed(2)}%`,m.top=`${(100*u).toFixed(2)}%`,this._onTranslating(o,u),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Jt,r=i/t,a=i/e;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:a,y:o,width:u,height:h}=this;if(u*=i,h*=r,a*=i,o*=r,this._mustFixPosition)switch(t){case 0:a=Vi(a,0,i-u),o=Vi(o,0,r-h);break;case 90:a=Vi(a,0,i-h),o=Vi(o,u,r);break;case 180:a=Vi(a,u,i),o=Vi(o,h,r);break;case 270:a=Vi(a,h,i),o=Vi(o,0,r-u);break}this.x=a/=i,this.y=o/=r;const[f,m]=this.getBaseTranslation();a+=f,o+=m,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#C(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Jt.#C(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Jt.#C(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#N.bind(this,i),{signal:e}),r.addEventListener("contextmenu",Un,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#c)}#N(t,e){e.preventDefault();const{isMac:i}=Bi.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ci,{passive:!1,signal:o}),window.addEventListener("contextmenu",Un,{signal:o}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}#z(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=this.#d;this.#d=null;const a=this.x,o=this.y,u=this.width,h=this.height;a===t&&o===e&&u===i&&h===r||this.addCommands({cmd:this.#z.bind(this,a,o,u,h),undo:this.#z.bind(this,t,e,i,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#L(t,e){const[i,r]=this.parentDimensions,a=this.x,o=this.y,u=this.width,h=this.height,f=Jt.MIN_SIZE/i,m=Jt.MIN_SIZE/r,p=this.#M(this.rotation),b=(V,K)=>[p[0]*V+p[2]*K,p[1]*V+p[3]*K],v=this.#M(360-this.rotation),w=(V,K)=>[v[0]*V+v[2]*K,v[1]*V+v[3]*K];let x,_,A=!1,T=!1;switch(t){case"topLeft":A=!0,x=(V,K)=>[0,0],_=(V,K)=>[V,K];break;case"topMiddle":x=(V,K)=>[V/2,0],_=(V,K)=>[V/2,K];break;case"topRight":A=!0,x=(V,K)=>[V,0],_=(V,K)=>[0,K];break;case"middleRight":T=!0,x=(V,K)=>[V,K/2],_=(V,K)=>[0,K/2];break;case"bottomRight":A=!0,x=(V,K)=>[V,K],_=(V,K)=>[0,0];break;case"bottomMiddle":x=(V,K)=>[V/2,K],_=(V,K)=>[V/2,0];break;case"bottomLeft":A=!0,x=(V,K)=>[0,K],_=(V,K)=>[V,0];break;case"middleLeft":T=!0,x=(V,K)=>[0,K/2],_=(V,K)=>[V,K/2];break}const M=x(u,h),N=_(u,h);let R=b(...N);const B=Jt._round(a+R[0]),z=Jt._round(o+R[1]);let G=1,U=1,et,ut;if(e.fromKeyboard)({deltaX:et,deltaY:ut}=e);else{const{screenX:V,screenY:K}=e,[yt,pt]=this.#l;[et,ut]=this.screenToPageTranslation(V-yt,K-pt),this.#l[0]=V,this.#l[1]=K}if([et,ut]=w(et/i,ut/r),A){const V=Math.hypot(u,h);G=U=Math.max(Math.min(Math.hypot(N[0]-M[0]-et,N[1]-M[1]-ut)/V,1/u,1/h),f/u,m/h)}else T?G=Vi(Math.abs(N[0]-M[0]-et),f,1)/u:U=Vi(Math.abs(N[1]-M[1]-ut),m,1)/h;const H=Jt._round(u*G),it=Jt._round(h*U);R=b(..._(H,it));const D=B-R[0],rt=z-R[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=H,this.height=it,this.x=D,this.y=rt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new Sl(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(ur.initialize(Jt._l10n),this.#n=new ur(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.#i||=new m0(this)}addStandaloneCommentButton(){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:r}}=this.#i;return{text:e,richText:t,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new m0(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#i||=new m0(this),this.#i.setInitialText(t,i),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new m0(this),this.#i.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[a]=this.pageDimensions,[o]=this.pageTranslation,u=o+a+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#i.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[r,a]=this.getInitialTranslation();return this.translate(r,a),ib(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new nu({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#E.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#E(t,e,i){let a=.7*(i/e)+1-.7;if(a===1)return;const o=this.#M(this.rotation),u=(B,z)=>[o[0]*B+o[2]*z,o[1]*B+o[3]*z],[h,f]=this.parentDimensions,m=this.x,p=this.y,b=this.width,v=this.height,w=Jt.MIN_SIZE/h,x=Jt.MIN_SIZE/f;a=Math.max(Math.min(a,1/b,1/v),w/b,x/v);const _=Jt._round(b*a),A=Jt._round(v*a);if(_===b&&A===v)return;this.#u||=[m,p,b,v];const T=u(b/2,v/2),M=Jt._round(m+T[0]),N=Jt._round(p+T[1]),R=u(_/2,A/2);this.x=M-R[0],this.y=N-R[1],this.width=_,this.height=A,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=Bi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#P(t);return}this.#O(t)}#O(t){const{isMac:e}=Bi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:a},u=f=>{r.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#O(f),i&&this._onStopDragging()};e&&(this.#k=t.clientX,this.#A=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:p,pointerId:b}=f;if(b!==this.#s){ci(f);return}const[v,w]=this.screenToPageTranslation(m-this.#k,p-this.#A);this.#k=m,this.#A=p,this._uiManager.dragSelectedEditors(v,w)},o),window.addEventListener("touchmove",ci,o),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&u(f),ci(f)},o));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ci(f)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[a,o]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,m=e/r,p=this.x*a,b=this.y*o,v=this.width*a,w=this.height*o;switch(i){case 0:return[p+f+u,o-b-m-w+h,p+f+v+u,o-b-m+h];case 90:return[p+m+u,o-b+f+h,p+m+w+u,o-b+f+v+h];case 180:return[p-f-v+u,o-b+m+h,p-f+u,o-b+m+w+h];case 270:return[p-m-w+u,o-b-f-v+h,p-m+u,o-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,a,o]=t,u=a-i,h=o-r;switch(this.rotation){case 0:return[i,e-o,u,h];case 90:return[i,e-r,h,u];case 180:return[a,e-r,u,h];case 270:return[a,e-o,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Jt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:r,deleted:a,richText:o},uid:u,pageIndex:h,creationDate:f,modificationDate:m}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:f,modificationDate:i||m,popupRef:!a,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return e<o&&r>0&&t<a&&i>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[a,o]=r.pageDimensions,[u,h,f,m]=r.getRectInCurrentCoords(t.rect,o);return r.x=u/a,r.y=h/o,r.width=f/a,r.height=m/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#B(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,r,a,o]=this.getPDFRect();return[Jt._round(i+(a-i)*t),Jt._round(r+(o-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const o=this.#Y.bind(this),u=this.#V.bind(this),h=this._uiManager._signal;for(const f of this.#e){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",o,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#X.bind(this,m),{signal:h}),f.setAttribute("data-l10n-id",Jt._l10nResizer[m])}}const i=this.#e[0];let r=0;for(const o of e){if(o===i)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==r){if(a<r)for(let u=0;u<r-a;u++)this.#c.append(this.#c.firstChild);else if(a>r)for(let u=0;u<a-r;u++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const u of e){const f=this.#e[o++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Jt._l10nResizer[f])}}this.#j(0),this.#y=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){Jt._resizerKeyboardManager.exec(this,t)}#V(t){this.#y&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#X(t){this.#g=this.#y?t:""}#j(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#y&&this.#L(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#B(){this.#y=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:i}=t;let r=this.#x.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(i),this.#x.size===0&&(this.#x=null)},Jt._telemetryTimeout),this.#x.set(i,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class T5 extends Jt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const S2=3285377520,Bn=4294901760,ar=65535;class nb{constructor(t){this.h1=t?t&4294967295:S2,this.h2=t?t&4294967295:S2}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let x=0,_=t.length;x<_;x++){const A=t.charCodeAt(x);A<=255?e[i++]=A:(e[i++]=A>>>8,e[i++]=A&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,a=i-r*4,o=new Uint32Array(e.buffer,0,r);let u=0,h=0,f=this.h1,m=this.h2;const p=3432918353,b=461845907,v=p&ar,w=b&ar;for(let x=0;x<r;x++)x&1?(u=o[x],u=u*p&Bn|u*v&ar,u=u<<15|u>>>17,u=u*b&Bn|u*w&ar,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=o[x],h=h*p&Bn|h*v&ar,h=h<<15|h>>>17,h=h*b&Bn|h*w&ar,m^=h,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,a){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*p&Bn|u*v&ar,u=u<<15|u>>>17,u=u*b&Bn|u*w&ar,r&1?f^=u:m^=u}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Bn|t*36045&ar,e=e*4283543511&Bn|((e<<16|t>>>16)*2950163797&Bn)>>>16,t^=e>>>1,t=t*444984403&Bn|t*60499&ar,e=e*3301882366&Bn|((e<<16|t>>>16)*3120437893&Bn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const af=Object.freeze({map:null,hash:"",transfer:void 0});class Of{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#i.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#i.get(t)}remove(t){const e=this.#i.get(t);if(e!==void 0&&(e instanceof Jt&&this.#n.delete(e.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#i.values())if(i instanceof Jt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#i.get(t);let r=!1;if(i!==void 0)for(const[a,o]of Object.entries(e))i[a]!==o&&(r=!0,i[a]=o);else r=!0,this.#i.set(t,e);r&&this.#a(),e instanceof Jt&&((this.#n||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new rb(this)}get serializable(){if(this.#i.size===0)return af;const t=new Map,e=new nb,i=[],r=Object.create(null);let a=!1;for(const[o,u]of this.#i){const h=u instanceof Jt?u.serialize(!1,r):u;h&&(t.set(o,h),e.update(`${o}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:af}get editorStats(){let t=null;const e=new Map;let i=0,r=0;for(const a of this.#i.values()){if(!(a instanceof Jt)){a.popup&&(a.popup.deleted?r+=1:i+=1);continue}a.isCommentDeleted?r+=1:a.hasEditedComment&&(i+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:u}=o;e.has(u)||e.set(u,Object.getPrototypeOf(a).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,m]of Object.entries(o)){if(f==="type")continue;let p=h.get(f);p||(p=new Map,h.set(f,p));const b=p.get(m)??0;p.set(m,b+1)}}if((r>0||i>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:i}),!t)return null;for(const[a,o]of e)t[a]=o.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#n?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const e of this.#n.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class rb extends Of{#t;constructor(t){super();const{map:e,hash:i,transfer:r}=t.serializable,a=structuredClone(e,r?{transfer:r}:null);this.#t={map:a,hash:i,transfer:r}}get print(){Ge("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return me(this,"modifiedIds",{ids:new Set,hash:""})}}class C5{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(_e(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:a,style:o}=t,u=new FontFace(r,a,o);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),i?.(t)}catch{ae(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Ge("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw ae(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return me(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return me(this,"isSyncFontLoadingSupported",$i||Bi.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(_e(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return me(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(N,R){return N.charCodeAt(R)<<24|N.charCodeAt(R+1)<<16|N.charCodeAt(R+2)<<8|N.charCodeAt(R+3)&255}function r(N,R,B,z){const G=N.substring(0,R),U=N.substring(R+B);return G+z+U}let a,o;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function m(N,R){if(++f>30){ae("Load test font never loaded."),R();return}if(h.font="30px "+N,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(m.bind(null,N,R))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,p.length,p);const w=16,x=1482184792;let _=i(b,w);for(a=0,o=p.length-3;a<o;a+=4)_=_-x+i(p,a)|0;a<p.length&&(_=_-x+i(p+"XXX",a)|0),b=r(b,w,4,l5(_));const A=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${p}";src:${A}}`;this.insertRule(T);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const N of[t.loadedName,p]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=N,M.append(R)}this._document.body.append(M),m(p,()=>{M.remove(),e.complete()})}}class M5{#t;constructor(t,e=null,i,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${J4(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(o){ae(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=a}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function R5(l){if(l instanceof URL)return l.href;if(typeof l=="string"){if($i)return l;const t=URL.parse(l,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function D5(l){if($i&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return Bl(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="object"&&!isNaN(l?.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function p0(l){if(typeof l!="string")return null;if(l.endsWith("/"))return l;throw new Error(`Invalid factory url: "${l}" must include trailing slash.`)}const of=l=>typeof l=="object"&&Number.isInteger(l?.num)&&l.num>=0&&Number.isInteger(l?.gen)&&l.gen>=0,N5=l=>typeof l=="object"&&typeof l?.name=="string",O5=f5.bind(null,of,N5);class z5{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:a}=i;if(a.aborted){ae("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);r=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const g0={DATA:1,ERROR:2},xi={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function A2(){}function cn(l){if(l instanceof Es||l instanceof ef||l instanceof p2||l instanceof H0||l instanceof Dd)return l;switch(l instanceof Error||typeof l=="object"&&l!==null||Ge('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new Es(l.message);case"InvalidPDFException":return new ef(l.message);case"PasswordException":return new p2(l.message,l.code);case"ResponseException":return new H0(l.message,l.status,l.missing);case"UnknownErrorException":return new Dd(l.message,l.details)}return new Dd(l.message,l.toString())}class vl{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===g0.DATA)r.resolve(t.data);else if(t.callback===g0.ERROR)r.reject(cn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(o){a.postMessage({sourceName:i,targetName:r,callback:g0.DATA,callbackId:t.callbackId,data:o})},function(o){a.postMessage({sourceName:i,targetName:r,callback:g0.ERROR,callbackId:t.callbackId,reason:cn(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(o){a.reject(o)}return a.promise}sendWithStream(t,e,i,r){const a=this.streamId++,o=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:u,action:t,streamId:a,data:e,desiredSize:f.desiredSize},r),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,h.postMessage({sourceName:o,targetName:u,stream:xi.PULL,streamId:a,desiredSize:f.desiredSize}),m.promise},cancel:f=>{_e(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:o,targetName:u,stream:xi.CANCEL,streamId:a,reason:cn(f)}),m.promise}},i)}#n(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,o=this,u=this.actionHandler[t.action],h={enqueue(f,m=1,p){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:xi.ENQUEUE,streamId:e,chunk:f},p)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:xi.CLOSE,streamId:e}),delete o.streamSinks[e])},error(f){_e(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:xi.ERROR,streamId:e,reason:cn(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){a.postMessage({sourceName:i,targetName:r,stream:xi.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:xi.START_COMPLETE,streamId:e,reason:cn(f)})})}#i(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,o=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case xi.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(cn(t.reason));break;case xi.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(cn(t.reason));break;case xi.PULL:if(!u){a.postMessage({sourceName:i,targetName:r,stream:xi.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||A2).then(function(){a.postMessage({sourceName:i,targetName:r,stream:xi.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:xi.PULL_COMPLETE,streamId:e,reason:cn(f)})});break;case xi.ENQUEUE:if(_e(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case xi.CLOSE:if(_e(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#a(o,e);break;case xi.ERROR:_e(o,"error should have stream controller"),o.controller.error(cn(t.reason)),this.#a(o,e);break;case xi.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(cn(t.reason)),this.#a(o,e);break;case xi.CANCEL:if(!u)break;const h=cn(t.reason);Promise.try(u.onCancel||A2,h).then(function(){a.postMessage({sourceName:i,targetName:r,stream:xi.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:xi.CANCEL_COMPLETE,streamId:e,reason:cn(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class sb{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ge("Abstract method `_createCanvas` called.")}}class L5 extends sb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class ab{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ge("Abstract method `_fetch` called.")}}class _2 extends ab{async _fetch(t){const e=await Il(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Bl(e)}}class ob{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,a){return"none"}destroy(t=!1){}}class B5 extends ob{#t;#e;#n;#i;#a;#r;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#a=e}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#n){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#a.createElementNS(Pr,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#a.createElementNS(Pr,"defs"),t.append(i),i.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let p=0;p<256;p++)f[p]=h[p]/255;const m=f.join(",");return[m,m,m]}const[e,i,r]=t,a=new Array(256),o=new Array(256),u=new Array(256);for(let h=0;h<256;h++)a[h]=e[h]/255,o[h]=i[h]/255,u[h]=r[h]/255;return[a.join(","),o.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(iu(e)?ae('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Z4(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,r,a]=this.#d(t),o=t.length===1?i:`${i}${r}${a}`;if(e=this.#o.get(o),e)return this.#o.set(t,e),e;const u=`g_${this.#i}_transfer_map_${this.#s++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(o,h);const f=this.#m(u);return this.#p(i,r,a,f),h}addHCMFilter(t,e){const i=`${t}-${e}`,r="base";let a=this.#c.get(r);if(a?.key===i||(a?(a.filter?.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},this.#c.set(r,a)),!t||!e))return a.url;const o=this.#y(t);t=Yt.makeHexColor(...o);const u=this.#y(e);if(e=Yt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const h=new Array(256);for(let v=0;v<=255;v++){const w=v/255;h[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=h.join(","),m=`g_${this.#i}_hcm_filter`,p=a.filter=this.#m(m);this.#p(f,f,f,p),this.#g(p);const b=(v,w)=>{const x=o[v]/255,_=u[v]/255,A=new Array(w+1);for(let T=0;T<=w;T++)A[T]=x+T/w*(_-x);return A.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),p),a.url=this.#h(m),a.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),r=`alpha_${i}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;const a=`g_${this.#i}_alpha_map_${this.#s++}`,o=this.#h(a);this.#o.set(t,o),this.#o.set(r,o);const u=this.#m(a);return this.#b(i,u),o}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,r;if(t?([i]=this.#d([t]),r=`luminosity_${i}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;const a=`g_${this.#i}_luminosity_map_${this.#s++}`,o=this.#h(a);this.#o.set(t,o),this.#o.set(r,o);const u=this.#m(a);return this.#f(u),t&&this.#b(i,u),o}addHighlightHCMFilter(t,e,i,r,a){const o=`${e}-${i}-${r}-${a}`;let u=this.#c.get(t);if(u?.key===o||(u?(u.filter?.remove(),u.key=o,u.url="none",u.filter=null):(u={key:o,url:"none",filter:null},this.#c.set(t,u)),!e||!i))return u.url;const[h,f]=[e,i].map(this.#y.bind(this));let m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,v]=[r,a].map(this.#y.bind(this));p<m&&([m,p,b,v]=[p,m,v,b]),this.#l.style.color="";const w=(A,T,M)=>{const N=new Array(256),R=(p-m)/M,B=A/255,z=(T-A)/(255*M);let G=0;for(let U=0;U<=M;U++){const et=Math.round(m+U*R),ut=B+U*z;for(let H=G;H<=et;H++)N[H]=ut;G=et+1}for(let U=G;U<256;U++)N[U]=N[G-1];return N.join(",")},x=`g_${this.#i}_hcm_${t}_filter`,_=u.filter=this.#m(x);return this.#g(_),this.#p(w(b[0],v[0],5),w(b[1],v[1],5),w(b[2],v[2],5),_),u.url=this.#h(x),u.url}destroy(t=!1){t&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(t){const e=this.#a.createElementNS(Pr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(Pr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#a.createElementNS(Pr,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const r=this.#a.createElementNS(Pr,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)}#p(t,e,i,r){const a=this.#a.createElementNS(Pr,"feComponentTransfer");r.append(a),this.#u(a,"feFuncR",t),this.#u(a,"feFuncG",e),this.#u(a,"feFuncB",i)}#b(t,e){const i=this.#a.createElementNS(Pr,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#y(t){return this.#l.style.color=t,Pl(getComputedStyle(this.#l).getPropertyValue("color"))}}class lb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ge("Abstract method `_fetch` called.")}}class k2 extends lb{async _fetch(t){const e=await Il(t,"arraybuffer");return new Uint8Array(e)}}class cb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ge("Abstract method `_fetch` called.")}}class E2 extends cb{async _fetch(t){const e=await Il(t,"arraybuffer");return new Uint8Array(e)}}$i&&ae("Please use the `legacy` build in Node.js environments.");async function zf(l){const e=await process.getBuiltinModule("fs").promises.readFile(l);return new Uint8Array(e)}class I5 extends ob{}class F5 extends sb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class P5 extends ab{async _fetch(t){return zf(t)}}class U5 extends lb{async _fetch(t){return zf(t)}}class H5 extends cb{async _fetch(t){return zf(t)}}const Za="__forcedDependency",{floor:T2,ceil:C2}=Math;function b0(l,t,e,i,r,a){l[t*4+0]=Math.min(l[t*4+0],e),l[t*4+1]=Math.min(l[t*4+1],i),l[t*4+2]=Math.max(l[t*4+2],r),l[t*4+3]=Math.max(l[t*4+3],a)}const lf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class j5{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===lf}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const v0=(l,t)=>{if(!l)return;let e=l.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},l.set(t,e)),e};class G5{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Za]:[]};#n=new Map;#i=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#m;#u;#p;constructor(t,e,i=!1){this.#f=t.width,this.#g=t.height,this.#b(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,e){const i=new ArrayBuffer(t*4);this.#m=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(lf,e.length)):this.#u.fill(lf)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Za]:{__proto__:this.#e[Za]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const i=this.#i.pop();return i!==void 0&&(v0(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const e=this.#i.pop();return e!==void 0&&(v0(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(v0(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push(Yt.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#n.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Za,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Za,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,r,a,o){const u=Yt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];Yt.axialAlignedBoundingBox([i,a,r,o],u,h);const f=Yt.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,i,r,a,o){const u=this.#s;if(u[0]===1/0)return this;const h=Yt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(u[0]===-1/0)return Yt.axialAlignedBoundingBox([i,a,r,o],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return Yt.axialAlignedBoundingBox([i,a,r,o],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,i,r=1,a=0,o=0,u){const h=i.bbox;let f,m;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(i),f!==!1&&(m=[0,0,0,0],Yt.axialAlignedBoundingBox(h,i.fontMatrix,m),(r!==1||a!==0||o!==0)&&Yt.scaleMinMax([r,0,0,-r,a,o],m),f)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!u)return this.recordFullPageBBox(t);const p=u();return h&&m&&f===void 0&&(f=m[0]<=a-p.actualBoundingBoxLeft&&m[2]>=a+p.actualBoundingBoxRight&&m[1]<=o-p.actualBoundingBoxAscent&&m[3]>=o+p.actualBoundingBoxDescent,this.#h.set(i,f),f)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,a-p.actualBoundingBoxLeft,a+p.actualBoundingBoxRight,o-p.actualBoundingBoxAscent,o+p.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,r=this.#t,a=this.#e;for(const o of e)o in this.#t?i.add(r[o]):o in a&&a[o].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#l.add(this.#n.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Za]),this.#p){const i=v0(this.#p,t),{dependencies:r}=i;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#a.forEach(r.add,r),r.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=T2(this.#o[0]*256/this.#f),r=T2(this.#o[1]*256/this.#g),a=C2(this.#o[2]*256/this.#f),o=C2(this.#o[3]*256/this.#g);b0(this.#m,t,i,r,a,o);for(const u of this.#l)u!==t&&b0(this.#m,u,i,r,a,o);for(const u of this.#i)u!==t&&b0(this.#m,u,i,r,a,o);for(const u of this.#a)u!==t&&b0(this.#m,u,i,r,a,o);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new j5(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class j0{#t;#e;#n;#i=0;#a=0;constructor(t,e,i){if(t instanceof j0&&t.#n===!!i)return t;this.#t=t,this.#e=e,this.#n=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,r,a,o){return this.#n||this.#t.recordClipBox(this.#e,e,i,r,a,o),this}recordBBox(t,e,i,r,a,o){return this.#n||this.#t.recordBBox(this.#e,e,i,r,a,o),this}recordCharacterBBox(t,e,i,r,a,o,u){return this.#n||this.#t.recordCharacterBBox(this.#e,e,i,r,a,o,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const In={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Li={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function cf(l,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),l.clip(r)}class Lf{isModifyingCurrentTransform(){return!1}getPattern(){Ge("Abstract method `getPattern` called.")}}class q5 extends Lf{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let a;if(r===Li.STROKE||r===Li.FILL){const o=e.current.getClippedPathBoundingBox(r,ei(t))||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-o[0],-o[1]),i=Yt.transform(i,[1,0,0,1,o[0],o[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),cf(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=t.createPattern(f.canvas,"no-repeat");const p=new DOMMatrix(i);a.setTransform(p)}else cf(t,this._bbox),a=this._createGradient(t);return a}}function zd(l,t,e,i,r,a,o,u){const h=t.coords,f=t.colors,m=l.data,p=l.width*4;let b;h[e+1]>h[i+1]&&(b=e,e=i,i=b,b=a,a=o,o=b),h[i+1]>h[r+1]&&(b=i,i=r,r=b,b=o,o=u,u=b),h[e+1]>h[i+1]&&(b=e,e=i,i=b,b=a,a=o,o=b);const v=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,x=(h[i]+t.offsetX)*t.scaleX,_=(h[i+1]+t.offsetY)*t.scaleY,A=(h[r]+t.offsetX)*t.scaleX,T=(h[r+1]+t.offsetY)*t.scaleY;if(w>=T)return;const M=f[a],N=f[a+1],R=f[a+2],B=f[o],z=f[o+1],G=f[o+2],U=f[u],et=f[u+1],ut=f[u+2],H=Math.round(w),it=Math.round(T);let D,rt,V,K,yt,pt,Tt,L;for(let P=H;P<=it;P++){if(P<_){const Lt=P<w?0:(w-P)/(w-_);D=v-(v-x)*Lt,rt=M-(M-B)*Lt,V=N-(N-z)*Lt,K=R-(R-G)*Lt}else{let Lt;P>T?Lt=1:_===T?Lt=0:Lt=(_-P)/(_-T),D=x-(x-A)*Lt,rt=B-(B-U)*Lt,V=z-(z-et)*Lt,K=G-(G-ut)*Lt}let ot;P<w?ot=0:P>T?ot=1:ot=(w-P)/(w-T),yt=v-(v-A)*ot,pt=M-(M-U)*ot,Tt=N-(N-et)*ot,L=R-(R-ut)*ot;const ht=Math.round(Math.min(D,yt)),gt=Math.round(Math.max(D,yt));let It=p*P+ht*4;for(let Lt=ht;Lt<=gt;Lt++)ot=(D-Lt)/(D-yt),ot<0?ot=0:ot>1&&(ot=1),m[It++]=rt-(rt-pt)*ot|0,m[It++]=V-(V-Tt)*ot|0,m[It++]=K-(K-L)*ot|0,m[It++]=255}}function $5(l,t,e){const i=t.coords,r=t.colors;let a,o;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(i.length/u)-1,f=u-1;for(a=0;a<h;a++){let m=a*u;for(let p=0;p<f;p++,m++)zd(l,e,i[m],i[m+1],i[m+u],r[m],r[m+1],r[m+u]),zd(l,e,i[m+u+1],i[m+1],i[m+u],r[m+u+1],r[m+1],r[m+u])}break;case"triangles":for(a=0,o=i.length;a<o;a+=3)zd(l,e,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class V5 extends Lf{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-h,p=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),v=f/p,w=m/b,x={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/v,scaleY:1/w},_=p+4,A=b+4,T=i.getCanvas("mesh",_,A),M=T.context,N=M.createImageData(p,b);if(e){const B=N.data;for(let z=0,G=B.length;z<G;z+=4)B[z]=e[0],B[z+1]=e[1],B[z+2]=e[2],B[z+3]=255}for(const B of this._figures)$5(N,B,x);return M.putImageData(N,2,2),{canvas:T.canvas,offsetX:u-2*v,offsetY:h-2*w,scaleX:v,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,r){cf(t,this._bbox);const a=new Float32Array(2);if(r===Li.SHADING)Yt.singularValueDecompose2dScale(ei(t),a);else if(this.matrix){Yt.singularValueDecompose2dScale(this.matrix,a);const[u,h]=a;Yt.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=u,a[1]*=h}else Yt.singularValueDecompose2dScale(e.baseTransform,a);const o=this._createMeshCanvas(a,r===Li.SHADING?null:this._background,e.cachedCanvases);return r!==Li.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class Y5 extends Lf{getPattern(){return"hotpink"}}function X5(l){switch(l[0]){case"RadialAxial":return new q5(l);case"Mesh":return new V5(l);case"Dummy":return new Y5}throw new Error(`Unknown IR type: ${l[0]}`)}const M2={COLORED:1,UNCOLORED:2};class Bf{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t,e){const{bbox:i,operatorList:r,paintType:a,tilingType:o,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),eu("TilingType: "+o);const p=i[0],b=i[1],v=i[2],w=i[3],x=v-p,_=w-b,A=new Float32Array(2);Yt.singularValueDecompose2dScale(this.matrix,A);const[T,M]=A;Yt.singularValueDecompose2dScale(this.baseTransform,A);const N=T*A[0],R=M*A[1];let B=x,z=_,G=!1,U=!1;const et=Math.ceil(f*N),ut=Math.ceil(m*R),H=Math.ceil(x*N),it=Math.ceil(_*R);et>=H?B=f:G=!0,ut>=it?z=m:U=!0;const D=this.getSizeAndScale(B,this.ctx.canvas.width,N),rt=this.getSizeAndScale(z,this.ctx.canvas.height,R),V=t.cachedCanvases.getCanvas("pattern",D.size,rt.size),K=V.context,yt=h.createCanvasGraphics(K,e);if(yt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(yt,a,u),K.translate(-D.scale*p,-rt.scale*b),yt.transform(0,D.scale,0,0,rt.scale,0,0),K.save(),yt.dependencyTracker?.save(),this.clipBbox(yt,p,b,v,w),yt.baseTransform=ei(yt.ctx),yt.executeOperatorList(r),yt.endDrawing(),yt.dependencyTracker?.restore(),K.restore(),G||U){const pt=V.canvas;G&&(B=f),U&&(z=m);const Tt=this.getSizeAndScale(B,this.ctx.canvas.width,N),L=this.getSizeAndScale(z,this.ctx.canvas.height,R),P=Tt.size,ot=L.size,ht=t.cachedCanvases.getCanvas("pattern-workaround",P,ot),gt=ht.context,It=G?Math.floor(x/f):0,Lt=U?Math.floor(_/m):0;for(let jt=0;jt<=It;jt++)for(let Gt=0;Gt<=Lt;Gt++)gt.drawImage(pt,P*jt,ot*Gt,P,ot,0,0,P,ot);return{canvas:ht.canvas,scaleX:Tt.scale,scaleY:L.scale,offsetX:p,offsetY:b}}return{canvas:V.canvas,scaleX:D.scale,scaleY:rt.scale,offsetX:p,offsetY:b}}getSizeAndScale(t,e,i){const r=Math.max(Bf.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*i);return a>=r?a=r:i=a/t,{scale:i,size:a}}clipBbox(t,e,i,r,a){const o=r-e,u=a-i;t.ctx.rect(e,i,o,u),Yt.axialAlignedBoundingBox([e,i,r,a],ei(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,a=t.current;switch(e){case M2.COLORED:const{fillStyle:o,strokeStyle:u}=this.ctx;r.fillStyle=a.fillColor=o,r.strokeStyle=a.strokeColor=u;break;case M2.UNCOLORED:r.fillStyle=r.strokeStyle=i,a.fillColor=a.strokeColor=i;break;default:throw new o5(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,r,a){let o=i;r!==Li.SHADING&&(o=Yt.transform(o,e.baseTransform),this.matrix&&(o=Yt.transform(o,this.matrix)));const u=this.createPatternCanvas(e,a);let h=new DOMMatrix(o);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function K5({src:l,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const u=Bi.isLittleEndian?4278190080:255,[h,f]=o?[a,u]:[u,a],m=i>>3,p=i&7,b=l.length;e=new Uint32Array(e.buffer);let v=0;for(let w=0;w<r;w++){for(const _=t+m;t<_;t++){const A=t<b?l[t]:255;e[v++]=A&128?f:h,e[v++]=A&64?f:h,e[v++]=A&32?f:h,e[v++]=A&16?f:h,e[v++]=A&8?f:h,e[v++]=A&4?f:h,e[v++]=A&2?f:h,e[v++]=A&1?f:h}if(p===0)continue;const x=t<b?l[t++]:255;for(let _=0;_<p;_++)e[v++]=x&1<<7-_?f:h}return{srcPos:t,destPos:v}}const R2=16,D2=100,Z5=15,N2=10,hn=16,Ld=new DOMMatrix,Sn=new Float32Array(2),no=new Float32Array([1/0,1/0,-1/0,-1/0]);function W5(l,t){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){t.save(),this.__originalSave()},l.restore=function(){t.restore(),this.__originalRestore()},l.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},l.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},l.transform=function(e,i,r,a,o,u){t.transform(e,i,r,a,o,u),this.__originalTransform(e,i,r,a,o,u)},l.setTransform=function(e,i,r,a,o,u){t.setTransform(e,i,r,a,o,u),this.__originalSetTransform(e,i,r,a,o,u)},l.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},l.rotate=function(e){t.rotate(e),this.__originalRotate(e)},l.clip=function(e){t.clip(e),this.__originalClip(e)},l.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},l.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},l.bezierCurveTo=function(e,i,r,a,o,u){t.bezierCurveTo(e,i,r,a,o,u),this.__originalBezierCurveTo(e,i,r,a,o,u)},l.rect=function(e,i,r,a){t.rect(e,i,r,a),this.__originalRect(e,i,r,a)},l.closePath=function(){t.closePath(),this.__originalClosePath()},l.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Q5{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function y0(l,t,e,i,r,a,o,u,h,f){const[m,p,b,v,w,x]=ei(l);if(p===0&&b===0){const T=o*m+w,M=Math.round(T),N=u*v+x,R=Math.round(N),B=(o+h)*m+w,z=Math.abs(Math.round(B)-M)||1,G=(u+f)*v+x,U=Math.abs(Math.round(G)-R)||1;return l.setTransform(Math.sign(m),0,0,Math.sign(v),M,R),l.drawImage(t,e,i,r,a,0,0,z,U),l.setTransform(m,p,b,v,w,x),[z,U]}if(m===0&&v===0){const T=u*b+w,M=Math.round(T),N=o*p+x,R=Math.round(N),B=(u+f)*b+w,z=Math.abs(Math.round(B)-M)||1,G=(o+h)*p+x,U=Math.abs(Math.round(G)-R)||1;return l.setTransform(0,Math.sign(p),Math.sign(b),0,M,R),l.drawImage(t,e,i,r,a,0,0,U,z),l.setTransform(m,p,b,v,w,x),[U,z]}l.drawImage(t,e,i,r,a,o,u,h,f);const _=Math.hypot(m,p),A=Math.hypot(b,v);return[_*h,A*f]}class O2{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=tf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Oi.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=no.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Li.FILL,e=null){const i=this.minMax.slice();if(t===Li.STROKE){e||Ge("Stroke bounding box must include transform."),Yt.singularValueDecompose2dScale(e,Sn);const r=Sn[0]*this.lineWidth/2,a=Sn[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const t=Yt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(no,0)}getClippedPathBoundingBox(t=Li.FILL,e=null){return Yt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function z2(l,t){if(t instanceof ImageData){l.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%hn,a=(e-r)/hn,o=r===0?a:a+1,u=l.createImageData(i,hn);let h=0,f;const m=t.data,p=u.data;let b,v,w,x;if(t.kind===z0.GRAYSCALE_1BPP){const _=m.byteLength,A=new Uint32Array(p.buffer,0,p.byteLength>>2),T=A.length,M=i+7>>3,N=4294967295,R=Bi.isLittleEndian?4278190080:255;for(b=0;b<o;b++){for(w=b<a?hn:r,f=0,v=0;v<w;v++){const B=_-h;let z=0;const G=B>M?i:B*8-7,U=G&-8;let et=0,ut=0;for(;z<U;z+=8)ut=m[h++],A[f++]=ut&128?N:R,A[f++]=ut&64?N:R,A[f++]=ut&32?N:R,A[f++]=ut&16?N:R,A[f++]=ut&8?N:R,A[f++]=ut&4?N:R,A[f++]=ut&2?N:R,A[f++]=ut&1?N:R;for(;z<G;z++)et===0&&(ut=m[h++],et=128),A[f++]=ut&et?N:R,et>>=1}for(;f<T;)A[f++]=0;l.putImageData(u,0,b*hn)}}else if(t.kind===z0.RGBA_32BPP){for(v=0,x=i*hn*4,b=0;b<a;b++)p.set(m.subarray(h,h+x)),h+=x,l.putImageData(u,0,v),v+=hn;b<o&&(x=i*r*4,p.set(m.subarray(h,h+x)),l.putImageData(u,0,v))}else if(t.kind===z0.RGB_24BPP)for(w=hn,x=i*w,b=0;b<o;b++){for(b>=a&&(w=r,x=i*w),f=0,v=x;v--;)p[f++]=m[h++],p[f++]=m[h++],p[f++]=m[h++],p[f++]=255;l.putImageData(u,0,b*hn)}else throw new Error(`bad image kind: ${t.kind}`)}function L2(l,t){if(t.bitmap){l.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%hn,a=(e-r)/hn,o=r===0?a:a+1,u=l.createImageData(i,hn);let h=0;const f=t.data,m=u.data;for(let p=0;p<o;p++){const b=p<a?hn:r;({srcPos:h}=K5({src:f,srcPos:h,dest:m,width:i,height:b,nonBlackColor:0})),l.putImageData(u,0,p*hn)}}function hl(l,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)l[i]!==void 0&&(t[i]=l[i]);l.setLineDash!==void 0&&(t.setLineDash(l.getLineDash()),t.lineDashOffset=l.lineDashOffset)}function x0(l){l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",l.setLineDash!==void 0&&(l.setLineDash([]),l.lineDashOffset=0);const{filter:t}=l;t!=="none"&&t!==""&&(l.filter="none")}function B2(l,t){if(t)return!0;Yt.singularValueDecompose2dScale(l,Sn);const e=Math.fround(mr.pixelRatio*ho.PDF_TO_CSS_UNITS);return Sn[0]<=e&&Sn[1]<=e}const J5=["butt","round","square"],t6=["miter","round","bevel"],e6={},I2={};class so{constructor(t,e,i,r,a,{optionalContentConfig:o,markedContentStack:u=null},h,f,m){this.ctx=t,this.current=new O2(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=o,this.cachedCanvases=new Q5(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=u,i){const h=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...ei(this.compositeCtx))}this.ctx.save(),x0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ei(this.ctx)}executeOperatorList(t,e,i,r,a){const o=t.argsArray,u=t.fnArray;let h=e||0;const f=o.length;if(f===h)return h;const m=f-h>N2&&typeof i=="function",p=m?Date.now()+Z5:0;let b=0;const v=this.commonObjs,w=this.objs;let x,_;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,i),h;if(!a||a(h))if(x=u[h],_=o[h]??null,x!==Tl.dependency)_===null?this[x](h):this[x](h,..._);else for(const A of _){this.dependencyTracker?.recordNamedData(A,h);const T=A.startsWith("g_")?v:w;if(!T.has(A))return T.get(A,i),h}if(h++,h===f)return h;if(m&&++b>N2){if(Date.now()>p)return i(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),u=i,h=r,f="prescale1",m,p;for(;a>2&&u>1||o>2&&h>1;){let b=u,v=h;a>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/b),o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/v),m=this.cachedCanvases.getCanvas(f,b,v),p=m.context,p.clearRect(0,0,b,v),p.drawImage(t,0,0,u,h,0,0,b,v),t=m.canvas,u=b,h=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){const i=this.ctx,{width:r,height:a}=e,o=this.current.fillColor,u=this.current.patternFill,h=ei(i);let f,m,p,b;if((e.bitmap||e.data)&&e.count>1){const et=e.bitmap||e.data.buffer;m=JSON.stringify(u?h:[h.slice(0,4),o]),f=this._cachedBitmapsMap.get(et),f||(f=new Map,this._cachedBitmapsMap.set(et,f));const ut=f.get(m);if(ut&&!u){const H=Math.round(Math.min(h[0],h[2])+h[4]),it=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,In.transformAndFill),{canvas:ut,offsetX:H,offsetY:it}}p=ut}p||(b=this.cachedCanvases.getCanvas("maskCanvas",r,a),L2(b.context,e));let v=Yt.transform(h,[1/r,0,0,-1/a,0,0]);v=Yt.transform(v,[1,0,0,1,0,-a]);const w=no.slice();Yt.axialAlignedBoundingBox([0,0,r,a],v,w);const[x,_,A,T]=w,M=Math.round(A-x)||1,N=Math.round(T-_)||1,R=this.cachedCanvases.getCanvas("fillCanvas",M,N),B=R.context,z=x,G=_;B.translate(-z,-G),B.transform(...v),p||(p=this._scaleImage(b.canvas,sr(B)),p=p.img,f&&u&&f.set(m,p)),B.imageSmoothingEnabled=B2(ei(B),e.interpolate),y0(B,p,0,0,p.width,p.height,0,0,r,a),B.globalCompositeOperation="source-in";const U=Yt.transform(sr(B),[1,0,0,1,-z,-G]);return B.fillStyle=u?o.getPattern(i,this,U,Li.FILL,t):o,B.fillRect(0,0,r,a),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,R.canvas)),this.dependencyTracker?.recordDependencies(t,In.transformAndFill),{canvas:R.canvas,offsetX:Math.round(z),offsetY:Math.round(G)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=J5[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=t6[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,r]of e)switch(i){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(r,e,i);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),hl(this.suspendedCtx,o),W5(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const a=r[0],o=r[1],u=r[2]-a,h=r[3]-o;u===0||h===0||(this.genericComposeSMask(e.context,i,u,h,e.subtype,e.backdrop,e.transferMap,a,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,a,o,u,h,f,m,p){let b=t.canvas,v=h-m,w=f-p;if(o)if(v<0||w<0||v+i>b.width||w+r>b.height){const _=this.cachedCanvases.getCanvas("maskExtension",i,r),A=_.context;A.drawImage(b,-v,-w),A.globalCompositeOperation="destination-atop",A.fillStyle=o,A.fillRect(0,0,i,r),A.globalCompositeOperation="source-over",b=_.canvas,v=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(v,w,i,r),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(v,w,i,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const x=new Path2D;x.rect(h,f,i,r),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(b,v,w,i,r,h,f,i,r),e.restore()}save(t){this.inSMaskMode&&hl(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&hl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,r,a,o,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,r,a,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,r){let[a]=i;if(!r){a||=i[0]=new Path2D,this[e](t,a);return}if(this.dependencyTracker!==null){const o=e===Tl.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(t,["transform"])}if(!(a instanceof Path2D)){const o=i[0]=new Path2D;for(let u=0,h=a.length;u<h;)switch(a[u++]){case f0.moveTo:o.moveTo(a[u++],a[u++]);break;case f0.lineTo:o.lineTo(a[u++],a[u++]);break;case f0.curveTo:o.bezierCurveTo(a[u++],a[u++],a[u++],a[u++],a[u++],a[u++]);break;case f0.closePath:o.closePath();break;default:ae(`Unrecognized drawing path operator: ${a[u-1]}`);break}a=o}Yt.axialAlignedBoundingBox(r,ei(this.ctx),this.current.minMax),this[e](t,a),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const r=this.ctx,a=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const o=a.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=a.getPattern(r,this,sr(r),Li.STROKE,t),o){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(o)),e=u}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,In.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Li.STROKE,ei(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const r=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let u=!1;if(o){const f=a.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=a.getPattern(r,this,sr(r),Li.FILL,t),f){const m=new Path2D;m.addPath(e,r.getTransform().invertSelf().multiplySelf(f)),e=m}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),this.dependencyTracker?.recordDependencies(t,In.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,In.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=e6}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=I2}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,a=i.getTransform().invertSelf();for(const{transform:o,x:u,y:h,fontSize:f,path:m}of e)m&&r.addPath(m,new DOMMatrix(o).preMultiplySelf(a).translate(u,h).scale(f,-f));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),a=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=r.fontMatrix||tf,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&ae("Invalid font matrix for font "+e),i<0?(i=-i,a.fontDirection=-1):a.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;const o=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${o}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let m=i;i<R2?m=R2:i>D2&&(m=D2),this.current.fontSizeScale=i/m,this.ctx.font=`${f} ${h} ${m}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r}paintChar(t,e,i,r,a,o){const u=this.ctx,h=this.current,f=h.font,m=h.textRenderingMode,p=h.fontSize/h.fontSizeScale,b=m&Oi.FILL_STROKE_MASK,v=!!(m&Oi.ADD_TO_PATH_FLAG),w=h.patternFill&&!f.missingFile,x=h.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||v||w||x)&&!f.missingFile&&(_=f.getPathGenerator(this.commonObjs,e)),_&&(f.disableFontFace||w||x)){u.save(),u.translate(i,r),u.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(t,u,f);let A;if(b===Oi.FILL||b===Oi.FILL_STROKE)if(a){A=u.getTransform(),u.setTransform(...a);const T=this.#n(_,A,a);u.fill(T)}else u.fill(_);if(b===Oi.STROKE||b===Oi.FILL_STROKE)if(o){A||=u.getTransform(),u.setTransform(...o);const{a:T,b:M,c:N,d:R}=A,B=Yt.inverseTransform(o),z=Yt.transform([T,M,N,R,0,0],B);Yt.singularValueDecompose2dScale(z,Sn),u.lineWidth*=Math.max(Sn[0],Sn[1])/p,u.stroke(this.#n(_,A,o))}else u.lineWidth/=p,u.stroke(_);u.restore()}else(b===Oi.FILL||b===Oi.FILL_STROKE)&&(u.fillText(e,i,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,p,i,r,()=>u.measureText(e))),(b===Oi.STROKE||b===Oi.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,p,i,r,()=>u.measureText(e)).recordDependencies(t,In.stroke),u.strokeText(e,i,r));v&&((this.pendingTextPaths||=[]).push({transform:ei(u),x:i,y:r,fontSize:p,path:_}),this.dependencyTracker?.recordCharacterBBox(t,u,f,p,i,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return me(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,In.showText).resetBBox(t),this.current.textRenderingMode&Oi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const a=i.fontSize;if(a===0){this.dependencyTracker?.recordOperation(t);return}const o=this.ctx,u=i.fontSizeScale,h=i.charSpacing,f=i.wordSpacing,m=i.fontDirection,p=i.textHScale*m,b=e.length,v=r.vertical,w=v?1:-1,x=r.defaultVMetrics,_=a*i.fontMatrix[0],A=i.textRenderingMode===Oi.FILL&&!r.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),m>0?o.scale(p,-1):o.scale(p,1);let T,M;if(i.patternFill){o.save();const G=i.fillColor.getPattern(o,this,sr(o),Li.FILL,t);T=ei(o),o.restore(),o.fillStyle=G}if(i.patternStroke){o.save();const G=i.strokeColor.getPattern(o,this,sr(o),Li.STROKE,t);M=ei(o),o.restore(),o.strokeStyle=G}let N=i.lineWidth;const R=i.textMatrixScale;if(R===0||N===0){const G=i.textRenderingMode&Oi.FILL_STROKE_MASK;(G===Oi.STROKE||G===Oi.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=R;if(u!==1&&(o.scale(u,u),N/=u),o.lineWidth=N,r.isInvalidPDFjsFont){const G=[];let U=0;for(const ut of e)G.push(ut.unicode),U+=ut.width;const et=G.join("");if(o.fillText(et,0,0),this.dependencyTracker!==null){const ut=o.measureText(et);this.dependencyTracker.recordBBox(t,this.ctx,-ut.actualBoundingBoxLeft,ut.actualBoundingBoxRight,-ut.actualBoundingBoxAscent,ut.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=U*_*p,o.restore(),this.compose();return}let B=0,z;for(z=0;z<b;++z){const G=e[z];if(typeof G=="number"){B+=w*G*a/1e3;continue}let U=!1;const et=(G.isSpace?f:0)+h,ut=G.fontChar,H=G.accent;let it,D,rt=G.width;if(v){const yt=G.vmetric||x,pt=-(G.vmetric?yt[1]:rt*.5)*_,Tt=yt[2]*_;rt=yt?-yt[0]:rt,it=pt/u,D=(B+Tt)/u}else it=B/u,D=0;let V;if(r.remeasure&&rt>0){V=o.measureText(ut);const yt=V.width*1e3/a*u;if(rt<yt&&this.isFontSubpixelAAEnabled){const pt=rt/yt;U=!0,o.save(),o.scale(pt,1),it/=pt}else rt!==yt&&(it+=(rt-yt)/2e3*a/u)}if(this.contentVisible&&(G.isInFont||r.missingFile)){if(A&&!H)o.fillText(ut,it,D),this.dependencyTracker?.recordCharacterBBox(t,o,V?{bbox:null}:r,a/u,it,D,()=>V??o.measureText(ut));else if(this.paintChar(t,ut,it,D,T,M),H){const yt=it+a*H.offset.x/u,pt=D-a*H.offset.y/u;this.paintChar(t,H.fontChar,yt,pt,T,M)}}const K=v?rt*_-et*m:rt*_+et*m;B+=K,U&&o.restore()}v?i.y-=B:i.x+=B*p,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,r=this.current,a=r.font,o=r.fontSize,u=r.fontDirection,h=a.vertical?1:-1,f=r.charSpacing,m=r.wordSpacing,p=r.textHScale*u,b=r.fontMatrix||tf,v=e.length,w=r.textRenderingMode===Oi.INVISIBLE;let x,_,A,T;if(w||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(p,u);const M=this.dependencyTracker;for(this.dependencyTracker=M?new j0(M,t):null,x=0;x<v;++x){if(_=e[x],typeof _=="number"){T=h*_*o/1e3,this.ctx.translate(T,0),r.x+=T*p;continue}const N=(_.isSpace?m:0)+f,R=a.charProcOperatorList[_.operatorListId];R?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...b),this.executeOperatorList(R),this.restore()):ae(`Type3 character "${_.operatorListId}" is not available.`);const B=[_.width,0];Yt.applyTransform(B,b),A=B[0]*o+N,i.translate(A,0),r.x+=A*p}i.restore(),M&&(this.dependencyTracker=M)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,r,a,o,u){const h=new Path2D;h.rect(r,a,o-r,u-a),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,o,a,u).recordClipBox(t,this.ctx,r,o,a,u),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const r=this.baseTransform||ei(this.ctx),a={createCanvasGraphics:(o,u)=>new so(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new j0(this.dependencyTracker,u,!0):null)};i=new Bf(e,this.ctx,a,r)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=X5(this.getObject(t,e)),this.cachedPatterns.set(e,r)),i&&(r.matrix=i),r}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const r=this._getPattern(t,e);i.fillStyle=r.getPattern(i,this,sr(i),Li.SHADING,t);const a=sr(i);if(a){const{width:o,height:u}=i.canvas,h=no.slice();Yt.axialAlignedBoundingBox([0,0,o,u],a,h);const[f,m,p,b]=h;this.ctx.fillRect(f,m,p-f,b-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,In.transform).recordDependencies(t,In.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Ge("Should not call beginInlineImage")}beginImageData(){Ge("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ei(this.ctx),i)){Yt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,a,o,u]=i,h=new Path2D;h.rect(r,a,o-r,u-a),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,o,a,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||eu("TODO: Support non-isolated groups."),e.knockout&&ae("Knockout groups not supported.");const r=ei(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=no.slice();Yt.axialAlignedBoundingBox(e.bbox,ei(i),a);const o=[0,0,i.canvas.width,i.canvas.height];a=Yt.intersect(a,o)||[0,0,0,0];const u=Math.floor(a[0]),h=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-u,1),m=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,m]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(p,f,m),v=b.context;v.translate(-u,-h),v.transform(...r);let w=new Path2D;const[x,_,A,T]=e.bbox;if(w.rect(x,_,A-x,T-_),e.matrix){const M=new Path2D;M.addPath(w,new DOMMatrix(e.matrix)),w=M}v.clip(w),e.smask&&this.smaskStack.push({canvas:b.canvas,context:v,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(u,h),i.save()),hl(i,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=ei(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...a);const o=no.slice();Yt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],a,o),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,i,r,a,o){if(this.#t(),x0(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],h=i[3]-i[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=h,Yt.singularValueDecompose2dScale(ei(this.ctx),Sn);const{viewportScale:f}=this,m=Math.ceil(u*this.outputScaleX*f),p=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,p);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(Sn[0],0,0,-Sn[1],0,h*Sn[1]),x0(this.ctx)}else{x0(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],u,h),this.ctx.clip(f)}}this.current=new O2(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...a)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const r=this.ctx,a=this._createMaskCanvas(t,e),o=a.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,a.offsetX,a.offsetX+o.width,a.offsetY,a.offsetY+o.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,r=0,a=0,o,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=ei(h);h.transform(i,r,a,o,0,0);const m=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let p=0,b=u.length;p<b;p+=2){const v=Yt.transform(f,[i,r,a,o,u[p],u[p+1]]);h.drawImage(m.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+m.canvas.width,v[5],v[5]+m.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,r=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,In.transformAndFill);for(const o of e){const{data:u,width:h,height:f,transform:m}=o,p=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=p.context;b.save();const v=this.getObject(t,u,o);L2(b,v),b.globalCompositeOperation="source-in",b.fillStyle=a?r.getPattern(b,this,sr(i),Li.FILL,t):r,b.fillRect(0,0,h,f),b.restore(),i.save(),i.transform(...m),i.scale(1,-1),y0(i,p.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,h,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){ae("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,r,a){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){ae("Dependent image isn't ready yet");return}const u=o.width,h=o.height,f=[];for(let m=0,p=a.length;m<p;m+=2)f.push({transform:[i,0,0,r,a[m],a[m+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,o,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,a=this.cachedCanvases.getCanvas("inlineImage",i,r),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",a.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,r=e.height,a=this.ctx;this.save(t);const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/i,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",i,r).context;z2(m,e),u=this.applyTransferMapsToCanvas(m)}const h=this._scaleImage(u,sr(a));a.imageSmoothingEnabled=B2(ei(a),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,a,0,i,-r,0).recordDependencies(t,In.imageXObject).recordOperation(t),y0(a,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,i,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const r=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const o=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",o,u).context;z2(f,e),a=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const o of i)r.save(),r.transform(...o.transform),r.scale(1,-1),y0(r,a,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,In.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const a=this.ctx;this.pendingClip?(r||(this.pendingClip===I2?a.clip(e,"evenodd"):a.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ei(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:a}=this.ctx.getTransform();let o,u;if(i===0&&r===0){const h=Math.abs(e),f=Math.abs(a);if(h===f)if(t===0)o=u=1/h;else{const m=h*t;o=u=m<1?1/m:1}else if(t===0)o=1/h,u=1/f;else{const m=h*t,p=f*t;o=m<1?1/m:1,u=p<1?1/p:1}}else{const h=Math.abs(e*a-i*r),f=Math.hypot(e,i),m=Math.hypot(r,a);if(t===0)o=m/h,u=f/h;else{const p=t*h;o=m>p?m/p:1,u=f>p?f/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:r}}=this,[a,o]=this.getScaleForStroking();if(a===o){i.lineWidth=(r||1)*a,i.stroke(t);return}const u=i.getLineDash();e&&i.save(),i.scale(a,o),Ld.a=1/a,Ld.d=1/o;const h=new Path2D;if(h.addPath(t,Ld),u.length>0){const f=Math.max(a,o);i.setLineDash(u.map(m=>m/f)),i.lineDashOffset/=f}i.lineWidth=r||1,i.stroke(h),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const l in Tl)so.prototype[l]!==void 0&&(so.prototype[Tl[l]]=so.prototype[l]);class ao{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let r=0;for(const f of ao.strings){const m=e.encode(t[f]);i[f]=m,r+=4+m.length}const a=new ArrayBuffer(r),o=new Uint8Array(a),u=new DataView(a);let h=0;for(const f of ao.strings){const m=i[f],p=m.length;u.setUint32(h,p),o.set(m,h+4),h+=4+p}return _e(h===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){_e(t<ao.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class oo{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let r=0;for(const b of oo.strings){const v=e.encode(t[b]);i[b]=v,r+=4+v.length}r+=4;let a,o,u=1+r;t.style&&(a=e.encode(t.style.style),o=e.encode(t.style.weight),u+=4+a.length+4+o.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),m=new DataView(h);let p=0;m.setUint8(p++,t.guessFallback?1:0),m.setUint32(p,0),p+=4,r=0;for(const b of oo.strings){const v=i[b],w=v.length;r+=4+w,m.setUint32(p,w),f.set(v,p+4),p+=4+w}return m.setUint32(p-r-4,r),t.style&&(m.setUint32(p,a.length),f.set(a,p+4),p+=4+a.length,m.setUint32(p,o.length),f.set(o,p+4),p+=4+o.length),_e(p<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(p)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){_e(t<oo.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#n.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const r=this.#e.getUint32(t),a=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:i,weight:a}}}class He{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#a=this.#i+1+6;#r;#s;#o;constructor({data:t,extra:e}){this.#r=t,this.#s=new TextDecoder,this.#o=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){_e(t<He.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,r=this.#o.getUint8(e)>>i&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return _e(t<He.numbers.length,"Invalid number index"),this.#o.getFloat64(He.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=He.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<4;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=He.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<6;r++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=He.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<3;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){_e(t<He.strings.length,"Invalid string index");let e=He.#a+4;for(let a=0;a<t;a++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),r=new Uint8Array(i);return r.set(new Uint8Array(this.#r,e+4,i)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=He.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);t+=4+r;const a=this.#o.getUint32(t);if(a!==0)return new Uint8Array(this.#r,t+4,a)}clearData(){let t=He.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);t+=4+r;const a=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,a).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=He.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);if(r===0)return null;const a=new Uint8Array(r);return a.set(new Uint8Array(this.#r,t+4,r)),new ao(a.buffer)}get systemFontInfo(){let t=He.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#r,t+4,i)),new oo(r.buffer)}static write(t){const e=t.systemFontInfo?oo.write(t.systemFontInfo):null,i=t.cssFontInfo?ao.write(t.cssFontInfo):null,r=new TextEncoder,a={};let o=0;for(const x of He.strings)a[x]=r.encode(t[x]),o+=4+a[x].length;const u=He.#a+4+o+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),m=new DataView(h);let p=0;const b=He.bools.length;let v=0,w=0;for(let x=0;x<b;x++){const _=t[He.bools[x]];v|=(_===void 0?0:_?2:1)<<w,w+=2,(w===8||x===b-1)&&(m.setUint8(p++,v),v=0,w=0)}_e(p===He.#t,"FontInfo.write: Boolean properties offset mismatch");for(const x of He.numbers)m.setFloat64(p,t[x]),p+=8;if(_e(p===He.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(p++,4);for(const x of t.bbox)m.setInt16(p,x,!0),p+=2}else m.setUint8(p++,0),p+=8;if(_e(p===He.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(p++,6);for(const x of t.fontMatrix)m.setFloat64(p,x,!0),p+=8}else m.setUint8(p++,0),p+=48;if(_e(p===He.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(p++,1);for(const x of t.defaultVMetrics)m.setInt16(p,x,!0),p+=2}else m.setUint8(p++,0),p+=6;_e(p===He.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(He.#a,0),p+=4;for(const x of He.strings){const _=a[x],A=_.length;m.setUint32(p,A),f.set(_,p+4),p+=4+A}if(m.setUint32(He.#a,p-He.#a-4),!e)m.setUint32(p,0),p+=4;else{const x=e.byteLength;m.setUint32(p,x),_e(p+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),p+4),p+=4+x}if(!i)m.setUint32(p,0),p+=4;else{const x=i.byteLength;m.setUint32(p,x),_e(p+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),p+4),p+=4+x}return t.data===void 0?(m.setUint32(p,0),p+=4):(m.setUint32(p,t.data.length),f.set(t.data,p+4),p+=4+t.data.length),_e(p<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(p)}}class lo{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class i6{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const to=Symbol("INTERNAL");class n6{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:i,usage:r,rbGroups:a}){this.#t=!!(t&wn.DISPLAY),this.#e=!!(t&wn.PRINT),this.name=e,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==to&&Ge("Internal method `_setVisible` called."),this.#n=i,this.#i=e}}class r6{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=wn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const i of t.groups)this.#e.set(i.id,new n6(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(to,!1);for(const i of t.on)this.#e.get(i)._setVisible(to,!0);for(const i of t.off)this.#e.get(i)._setVisible(to,!1);this.#n=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const a=t[r];let o;if(Array.isArray(a))o=this.#a(a);else if(this.#e.has(a))o=this.#e.get(a).visible;else return ae(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return eu("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(ae(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return ae(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return ae(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return ae(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return ae(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return ae(`Unknown optional content policy ${t.policy}.`),!0}return ae(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const r=this.#e.get(t);if(!r){ae(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const a of r.rbGroups)for(const o of a)o!==t&&this.#e.get(o)?._setVisible(to,!1,!0);r._setVisible(to,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const a=this.#e.get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new nb;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class s6{constructor(t,{disableRange:e=!1,disableStream:i=!1}){_e(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:o,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=u,a?.length>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(i),!0)});_e(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){_e(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new a6(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new o6(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class a6{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=Rf(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o6{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function l6(l){let t=!0,e=i("filename\\*","i").exec(l);if(e){e=e[1];let m=u(e);return m=unescape(m),m=h(m),m=f(m),a(m)}if(e=o(l),e){const m=f(e);return a(m)}if(e=i("filename","i").exec(l),e){e=e[1];let m=u(e);return m=f(m),a(m)}function i(m,p){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function r(m,p){if(m){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const b=new TextDecoder(m,{fatal:!0}),v=Bl(p);p=b.decode(v),t=!1}catch{}}return p}function a(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function o(m){const p=[];let b;const v=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(m))!==null;){let[,x,_,A]=b;if(x=parseInt(x,10),x in p){if(x===0)break;continue}p[x]=[_,A]}const w=[];for(let x=0;x<p.length&&x in p;++x){let[_,A]=p[x];A=u(A),_&&(A=unescape(A),x===0&&(A=h(A))),w.push(A)}return w.join("")}function u(m){if(m.startsWith('"')){const p=m.slice(1).split('\\"');for(let b=0;b<p.length;++b){const v=p[b].indexOf('"');v!==-1&&(p[b]=p[b].slice(0,v),p.length=b+1),p[b]=p[b].replaceAll(/\\(.)/g,"$1")}m=p.join('"')}return m}function h(m){const p=m.indexOf("'");if(p===-1)return m;const b=m.slice(0,p),w=m.slice(p+1).replace(/^[^']*'/,"");return r(b,w)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,b,v,w){if(v==="q"||v==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,_){return String.fromCharCode(parseInt(_,16))}),r(b,w);try{w=atob(w)}catch{}return r(b,w)})}return""}function ub(l,t){const e=new Headers;if(!l||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function ru(l){return URL.parse(l)?.origin??null}function hb({responseHeaders:l,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(l.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*e)||i||!t||l.get("Accept-Ranges")!=="bytes"||(l.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function db(l){const t=l.get("Content-Disposition");if(t){let e=l6(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Rf(e))return e}return null}function Hl(l,t){return new H0(`Unexpected server response (${l}) while retrieving PDF "${t}".`,l,l===404||l===0&&t.startsWith("file:"))}function fb(l){return l===200||l===206}function mb(l,t,e){return{method:"GET",headers:l,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function pb(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:(ae(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class c6{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=ub(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return _e(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u6(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new h6(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class u6{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,mb(i,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=ru(a.url),!fb(a.status))throw Hl(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:u,suggestedLength:h}=hb({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=db(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Es("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:pb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class h6{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${i-1}`);const o=r.url;fetch(o,mb(a,this._withCredentials,this._abortController)).then(u=>{const h=ru(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!fb(u.status))throw Hl(u.status,o);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:pb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Bd=200,Id=206;function d6(l){const t=l.response;return typeof t!="string"?t:Bl(t).buffer}class f6{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=ub(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,o]of this.headers)e.setRequestHeader(a,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Id):r.expectedStatus=Bd,e.responseType="arraybuffer",_e(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const a=r.status||Bd;if(!(a===Bd&&i.expectedStatus===Id)&&a!==i.expectedStatus){i.onError(r.status);return}const u=d6(r);if(a===Id){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?i.onDone({begin:parseInt(f[1],10),chunk:u}):(ae('Missing or invalid "Content-Range" header.'),i.onError(0))}else u?i.onDone({begin:0,chunk:u}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class m6{constructor(t){this._source=t,this._manager=new f6(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return _e(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p6(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new g6(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class p6{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=ru(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=hb({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=db(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Hl(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class g6{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=ru(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Hl(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const b6=/^[a-z][a-z0-9\-+.]+:/i;function v6(l){if(b6.test(l))return new URL(l);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(l))}class y6{constructor(t){this.source=t,this.url=v6(t.url),_e(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return _e(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new x6(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new w6(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class x6{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Hl(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Es("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w6{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const dl=Symbol("INITIAL_DATA");class gb{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:dl}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const i=this.#t[t];if(!i||i.data===dl)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==dl}delete(t){const e=this.#t[t];return!e||e.data===dl?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==dl&&(yield[t,e])}}}const S6=1e5,F2=30;class qi{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#b=null;static#y=new Map;static#v=new Map;static#k=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*mr.pixelRatio,this.#d=i.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:a,pageX:o,pageY:u}=i.rawDims;this.#b=[1,0,0,-1,-o,u+a],this.#o=r,this.#s=a,qi.#M(),ra(e,i),this.#t.promise.finally(()=>{qi.#x.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Bi.platform;return me(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#m.getReader(),qi.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*mr.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,ra(this.#l,{rotation:r})),i!==this.#h){e?.(),this.#h=i;const a={div:null,properties:null,ctx:qi.#R(this.#a)};for(const o of this.#u)a.properties=this.#p.get(o),a.div=o,this.#_(a)}}cancel(){const t=new Es("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(t){if(this.#n)return;this.#r.ctx??=qi.#R(this.#a);const e=this.#u,i=this.#g;for(const r of t){if(e.length>S6){ae("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),a.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(r.str),this.#S(r)}}#S(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const r=Yt.transform(this.#b,t.transform);let a=Math.atan2(r[1],r[0]);const o=this.#f[t.fontName];o.vertical&&(a+=Math.PI/2);let u=this.#i&&o.fontSubstitution||o.fontFamily;u=qi.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*qi.#I(u,o,this.#a);let m,p;a===0?(m=r[4],p=r[5]-f):(m=r[4]+f*Math.sin(a),p=r[5]-f*Math.cos(a));const b="calc(var(--total-scale-factor) *",v=e.style;this.#e===this.#l?(v.left=`${(100*m/this.#o).toFixed(2)}%`,v.top=`${(100*p/this.#s).toFixed(2)}%`):(v.left=`${b}${m.toFixed(2)}px)`,v.top=`${b}${p.toFixed(2)}px)`),v.fontSize=`${b}${(qi.#A*h).toFixed(2)}px)`,v.fontFamily=u,i.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),a!==0&&(i.angle=a*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);x!==_&&Math.max(x,_)/Math.min(x,_)>1.5&&(w=!0)}if(w&&(i.canvasWidth=o.vertical?t.height:t.width),this.#p.set(e,i),this.#r.div=e,this.#r.properties=i,this.#_(this.#r),i.hasText&&this.#e.append(e),i.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#_(t){const{div:e,properties:i,ctx:r}=t,{style:a}=e;let o="";if(qi.#A>1&&(o=`scale(${1/qi.#A})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=a,{canvasWidth:h,fontSize:f}=i;qi.#C(r,f*this.#h,u);const{width:m}=r.measureText(e.textContent);m>0&&(o=`scaleX(${h*this.#h/m}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#x.size>0)){this.#y.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#R(t=null){let e=this.#v.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#k.set(e,{size:0,family:""})}return e}static#C(t,e,i){const r=this.#k.get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)}static#M(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#I(t,e,i){const r=this.#y.get(t);if(r)return r;const a=this.#R(i);a.canvas.width=a.canvas.height=F2,this.#C(a,F2,t);const o=a.measureText(""),u=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let f=.8;return u?f=u/(u+h):(Bi.platform.isFirefox&&ae("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#y.set(t,f),f}}const A6=100;function bb(l={}){typeof l=="string"||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const t=new If,{docId:e}=t,i=l.url?R5(l.url):null,r=l.data?D5(l.data):null,a=l.httpHeaders||null,o=l.withCredentials===!0,u=l.password??null,h=l.range instanceof vb?l.range:null,f=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:2**16;let m=l.worker instanceof Ml?l.worker:null;const p=l.verbosity,b=typeof l.docBaseUrl=="string"&&!iu(l.docBaseUrl)?l.docBaseUrl:null,v=p0(l.cMapUrl),w=l.cMapPacked!==!1,x=l.CMapReaderFactory||($i?P5:_2),_=p0(l.iccUrl),A=p0(l.standardFontDataUrl),T=l.StandardFontDataFactory||($i?U5:k2),M=p0(l.wasmUrl),N=l.WasmFactory||($i?H5:E2),R=l.stopAtErrors!==!0,B=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,z=l.isEvalSupported!==!1,G=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!$i,U=typeof l.isImageDecoderSupported=="boolean"?l.isImageDecoderSupported:!$i&&(Bi.platform.isFirefox||!globalThis.chrome),et=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,ut=typeof l.disableFontFace=="boolean"?l.disableFontFace:$i,H=l.fontExtraProperties===!0,it=l.enableXfa===!0,D=l.ownerDocument||globalThis.document,rt=l.disableRange===!0,V=l.disableStream===!0,K=l.disableAutoFetch===!0,yt=l.pdfBug===!0,pt=l.CanvasFactory||($i?F5:L5),Tt=l.FilterFactory||($i?I5:B5),L=l.enableHWA===!0,P=l.useWasm!==!1,ot=h?h.length:l.length??NaN,ht=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!$i&&!ut,gt=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:!!(x===_2&&T===k2&&N===E2&&v&&A&&M&&bl(v,document.baseURI)&&bl(A,document.baseURI)&&bl(M,document.baseURI)),It=null;r5(p);const Lt={canvasFactory:new pt({ownerDocument:D,enableHWA:L}),filterFactory:new Tt({docId:e,ownerDocument:D}),cMapReaderFactory:gt?null:new x({baseUrl:v,isCompressed:w}),standardFontDataFactory:gt?null:new T({baseUrl:A}),wasmFactory:gt?null:new N({baseUrl:M})};m||(m=Ml.create({verbosity:p,port:lo.workerPort}),t._worker=m);const jt={docId:e,apiVersion:"5.4.296",data:r,password:u,disableAutoFetch:K,rangeChunkSize:f,length:ot,docBaseUrl:b,enableXfa:it,evaluatorOptions:{maxImageSize:B,disableFontFace:ut,ignoreErrors:R,isEvalSupported:z,isOffscreenCanvasSupported:G,isImageDecoderSupported:U,canvasMaxAreaInBytes:et,fontExtraProperties:H,useSystemFonts:ht,useWasm:P,useWorkerFetch:gt,cMapUrl:v,iccUrl:_,standardFontDataUrl:A,wasmUrl:M}},Gt={ownerDocument:D,pdfBug:yt,styleElement:It,loadingParams:{disableAutoFetch:K,enableXfa:it}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const xe=m.messageHandler.sendWithPromise("GetDocRequest",jt,r?[r.buffer]:null);let we;if(h)we=new s6(h,{disableRange:rt,disableStream:V});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ti=bl(i)?c6:$i?y6:m6;we=new ti({url:i,length:ot,httpHeaders:a,withCredentials:o,rangeChunkSize:f,disableRange:rt,disableStream:V})}return xe.then(ti=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ui=new vl(e,ti,m.port),C=new E6(ui,t,we,Gt,Lt,L);t._transport=C,ui.send("Ready",null)})}).catch(t._capability.reject),t}class If{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${If.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class vb{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#a)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#i)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Ge("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class _6{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class k6{#t=!1;constructor(t,e,i,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new b2:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new gb,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new Fl({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:r="display",annotationMode:a=Ss.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:p=null,isEditing:b=!1,recordOperations:v=!1,operationsFilter:w=null}){this._stats?.time("Overall");const x=this._transport.getRenderingIntent(r,a,p,b),{renderingIntent:_,cacheKey:A}=x;this.#t=!1,h||=this._transport.getOptionalContentConfig(_);let T=this._intentStates.get(A);T||(T=Object.create(null),this._intentStates.set(A,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const M=!!(_&wn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(x));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),R=!this.recordedBBoxes&&(v||N),B=U=>{if(T.renderTasks.delete(z),R){const et=z.gfx?.dependencyTracker.take();et&&(z.stepper&&z.stepper.setOperatorBBoxes(et,z.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=et))}M&&(this.#t=!0),this.#e(),U?(z.capability.reject(U),this._abortOperatorList({intentState:T,reason:U instanceof Error?U:new Error(U)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},z=new ro({callback:B,params:{canvas:e,canvasContext:t,dependencyTracker:R?new G5(e,T.operatorList.length,N):null,viewport:i,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:w});(T.renderTasks||=new Set).add(z);const G=z.task;return Promise.all([T.displayReadyCapability.promise,h]).then(([U,et])=>{if(this.destroyed){B();return}if(this._stats?.time("Rendering"),!(et.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");z.initializeGraphics({transparency:U,optionalContentConfig:et}),z.operatorListChanged()}).catch(B),G}getOperatorList({intent:t="display",annotationMode:e=Ss.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,e,i,r,!0);let u=this._intentStates.get(o.cacheKey);u||(u=Object.create(null),this._intentStates.set(o.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Cl.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function a(){o.read().then(function({value:h,done:f}){if(f){i(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),a()},r)}const o=e.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new b2),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:a,transfer:o}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:r},o).getReader(),f=this._intentStates.get(e);f.streamReader=h;const m=()=>{h.read().then(({value:p,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,f),m())},p=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(p);else if(f.opListReadCapability)f.opListReadCapability.reject(p);else throw p}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Mf){let r=A6;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Es(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var As,Xn,jr,ea,Q0,ia,na,Ki,L0,yb,xb,yl,uo,B0;const Qe=class Qe{constructor({name:t=null,port:e=null,verbosity:i=s5()}={}){nr(this,Ki);nr(this,As,Promise.withResolvers());nr(this,Xn,null);nr(this,jr,null);nr(this,ea,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(We(Qe,na).has(e))throw new Error("Cannot use more than one PDFWorker per port.");We(Qe,na).set(e,this),rr(this,Ki,yb).call(this,e)}else rr(this,Ki,xb).call(this)}get promise(){return We(this,As).promise}get port(){return We(this,jr)}get messageHandler(){return We(this,Xn)}destroy(){this.destroyed=!0,We(this,ea)?.terminate(),ln(this,ea,null),We(Qe,na).delete(We(this,jr)),ln(this,jr,null),We(this,Xn)?.destroy(),ln(this,Xn,null)}static create(t){const e=We(this,na).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Qe(t)}static get workerSrc(){if(lo.workerSrc)return lo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return me(this,"_setupFakeWorkerGlobal",(async()=>We(this,uo,B0)?We(this,uo,B0):(await import(this.workerSrc)).WorkerMessageHandler)())}};As=new WeakMap,Xn=new WeakMap,jr=new WeakMap,ea=new WeakMap,Q0=new WeakMap,ia=new WeakMap,na=new WeakMap,Ki=new WeakSet,L0=function(){We(this,As).resolve(),We(this,Xn).send("configure",{verbosity:this.verbosity})},yb=function(t){ln(this,jr,t),ln(this,Xn,new vl("main","worker",t)),We(this,Xn).on("ready",()=>{}),rr(this,Ki,L0).call(this)},xb=function(){if(We(Qe,ia)||We(Qe,uo,B0)){rr(this,Ki,yl).call(this);return}let{workerSrc:t}=Qe;try{Qe._isSameOrigin(window.location,t)||(t=Qe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new vl("main","worker",e),r=()=>{a.abort(),i.destroy(),e.terminate(),this.destroyed?We(this,As).reject(new Error("Worker was destroyed")):rr(this,Ki,yl).call(this)},a=new AbortController;e.addEventListener("error",()=>{We(this,ea)||r()},{signal:a.signal}),i.on("test",u=>{if(a.abort(),this.destroyed||!u){r();return}ln(this,Xn,i),ln(this,jr,e),ln(this,ea,e),rr(this,Ki,L0).call(this)}),i.on("ready",u=>{if(a.abort(),this.destroyed){r();return}try{o()}catch{rr(this,Ki,yl).call(this)}});const o=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};o();return}catch{eu("The worker has been disabled.")}rr(this,Ki,yl).call(this)},yl=function(){We(Qe,ia)||(ae("Setting up fake worker."),ln(Qe,ia,!0)),Qe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){We(this,As).reject(new Error("Worker was destroyed"));return}const e=new z5;ln(this,jr,e);const i=`fake${r2(Qe,Q0)._++}`,r=new vl(i+"_worker",i,e);t.setup(r,e),ln(this,Xn,new vl(i,i+"_worker",e)),rr(this,Ki,L0).call(this)}).catch(t=>{We(this,As).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},uo=new WeakSet,B0=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},nr(Qe,uo),nr(Qe,Q0,0),nr(Qe,ia,!1),nr(Qe,na,new WeakMap),$i&&(ln(Qe,ia,!0),lo.workerSrc||="./pdf.worker.mjs"),Qe._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const r=new URL(e,i);return i.origin===r.origin},Qe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Qe.fromPort=t=>{if(b5("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Qe.create(t)};let Ml=Qe;class E6{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#a=null;constructor(t,e,i,r,a,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new gb,this.fontLoader=new C5({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#r(t,e=null){const i=this.#t.get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return me(this,"annotationStorage",new Of)}getRenderingIntent(t,e=Ss.ENABLE,i=null,r=!1,a=!1){let o=wn.DISPLAY,u=af;switch(t){case"any":o=wn.ANY;break;case"display":break;case"print":o=wn.PRINT;break;default:ae(`getRenderingIntent - invalid intent: ${t}`)}const h=o&wn.PRINT&&i instanceof rb?i:this.annotationStorage;switch(e){case Ss.DISABLE:o+=wn.ANNOTATIONS_DISABLE;break;case Ss.ENABLE:break;case Ss.ENABLE_FORMS:o+=wn.ANNOTATIONS_FORMS;break;case Ss.ENABLE_STORAGE:o+=wn.ANNOTATIONS_STORAGE,u=h.serializable;break;default:ae(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(o+=wn.IS_EDITING),a&&(o+=wn.OPLIST);const{ids:f,hash:m}=h.modifiedIds,p=[o,u.hash,m];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),qi.cleanup(),this._networkStream?.cancelAllRequests(new Es("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{_e(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){r.close();return}_e(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:o}=this._fullReader;return(!r||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:o}}),t.on("GetRangeReader",(i,r)=>{_e(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:o,done:u}){if(u){r.close();return}_e(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{a.cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new _6(i,this))}),t.on("DocException",i=>{e._capability.reject(cn(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw cn(i);const r=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};e.onPassword(r,i.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,a])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in a){const m=a.error;ae(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const o=new He(a),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,p)=>globalThis.FontInspector.fontAdded(m,p):null,h=new M5(o,u,a.extra,a.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:f}=a;_e(f,"The imageRef must be defined.");for(const m of this.#e.values())for(const[,p]of m.objs)if(p?.ref===f)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,a,o])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(i)){if(u._intentStates.size===0){o?.bitmap?.close();return}switch(a){case"Image":case"Pattern":u.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ae("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#n.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#i.set(a.refStr,t);const o=new k6(e,a,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#n.set(e,r),r}getPageIndex(t){return of(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new r6(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new i6(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),qi.cleanup()}}cachedPageNumber(t){if(!of(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class T6{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ro{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:o,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:p=!1,pageColors:b=null,enableHWA:v=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=p,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new T6(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ro.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ro.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:r,background:a,dependencyTracker:o}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new so(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ro.#e.delete(this._canvas),t||=new Mf(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ro.#e.delete(this._canvas),this.callback())))}}const C6="5.4.296",M6="f56dc8601";class Fn{#t=null;#e=null;#n;#i=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return me(this,"_keyboardManager",new Ul([[["Escape","mac+Escape"],Fn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fn.prototype._moveToPrevious],[["Home","mac+Home"],Fn.prototype._moveToBeginning],[["End","mac+End"],Fn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#s=t):this.#r=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Fn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Un,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[i,r]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",Fn.#d[i]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=r,a.ariaSelected=r===this.#n,a.addEventListener("click",this.#f.bind(this,r),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ae.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#m(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#m(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#m(t);return}this.#i.lastChild?.focus()}#g(t){Fn._keyboardManager.exec(this,t)}#m(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#h();this.#t.append(e)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const i of this.#i.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Rl{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Rl.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Rl.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(e,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function P2(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function fl(l){return Math.max(0,Math.min(255,255*l))}class U2{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=fl(t),[t,t,t]}static G_HTML([t]){const e=P2(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(fl)}static RGB_HTML(t){return`#${t.map(P2).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[fl(1-Math.min(1,t+r)),fl(1-Math.min(1,i+r)),fl(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,a=1-e,o=1-i,u=Math.min(r,a,o);return["CMYK",r,a,o,u]}}class R6{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ge("Abstract method `_createSVG` called.")}}class G0 extends R6{_createSVG(t){return document.createElementNS(Pr,t)}}const D6=9,sa=new WeakSet,N6=new Date().getTimezoneOffset()*60*1e3;class H2{static create(t){switch(t.data.annotationType){case wi.LINK:return new Ff(t);case wi.TEXT:return new z6(t);case wi.WIDGET:switch(t.data.fieldType){case"Tx":return new L6(t);case"Btn":return t.data.radioButton?new wb(t):t.data.checkBox?new I6(t):new F6(t);case"Ch":return new P6(t);case"Sig":return new B6(t)}return new ca(t);case wi.POPUP:return new uf(t);case wi.FREETEXT:return new Sb(t);case wi.LINE:return new H6(t);case wi.SQUARE:return new j6(t);case wi.CIRCLE:return new G6(t);case wi.POLYLINE:return new Ab(t);case wi.CARET:return new $6(t);case wi.INK:return new Pf(t);case wi.POLYGON:return new q6(t);case wi.HIGHLIGHT:return new _b(t);case wi.UNDERLINE:return new V6(t);case wi.SQUIGGLY:return new Y6(t);case wi.STRIKEOUT:return new X6(t);case wi.STAMP:return new kb(t);case wi.FILEATTACHMENT:return new K6(t);default:return new ri(t)}}}class ri{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ri._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:r}=this.data;let a=-1/0,o=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>o?(o=e[u+1],a=e[u+2]):e[u+1]===o&&(a=Math.max(a,e[u+2]));return[a,o]}if(i?.length>=1){for(const u of i)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>o?(o=u[h+1],a=u[h]):u[h+1]===o&&(a=Math.max(a,u[h]));if(a!==1/0)return[a,o]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-a)/i,t[1]=100*(t[1]-o)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${El}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${El}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#i(e);let r=this.#n?.popup||this.popup;!r&&i?.text&&(this._createPopup(i),r=this.#n.popup),r&&(r.updateEdited(t),i?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:u,pageY:h}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-u)/a}%`,e.top=`${100*(o-t[3]+h)/o}%`,r===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof ca)&&!(this instanceof Ff)&&(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof uf){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,a),a}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(x>0||_>0){const T=`calc(${x}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;o.borderRadius=T}else if(this instanceof wb){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;o.borderRadius=T}switch(e.borderStyle.style){case Ja.SOLID:o.borderStyle="solid";break;case Ja.DASHED:o.borderStyle="dashed";break;case Ja.BEVELED:ae("Unimplemented border style: beveled");break;case Ja.INSET:ae("Unimplemented border style: inset");break;case Ja.UNDERLINE:o.borderBottomStyle="solid";break}const A=e.borderColor||null;A?(this.#e=!0,o.borderColor=Yt.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):o.borderWidth=0}const f=Yt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:p,pageX:b,pageY:v}=r.rawDims;o.left=`${100*(f[0]-b)/m}%`,o.top=`${100*(f[1]-v)/p}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(o.width=`${100*u/m}%`,o.height=`${100*h/p}%`):this.setRotation(w,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims;let{width:a,height:o}=this;t%180!==0&&([a,o]=[o,a]),e.style.width=`${100*a/i}%`,e.style.height=`${100*o/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const a=r.detail[e],o=a[0],u=a.slice(1);r.target.style[i]=U2[`${o}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:U2[`${o}_rgb`](u)})};return me(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||i[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,a]of Object.entries(e)){const o=i[r];if(o){const u={detail:{[r]:a},target:t};o(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,a]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,_,A,T]=t.subarray(2,6);if(r===x&&a===_&&e===A&&i===T)return}const{style:o}=this.container;let u;if(this.#e){const{borderColor:x,borderWidth:_}=o;o.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const h=r-e,f=a-i,{svgFactory:m}=this,p=m.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const b=m.createElement("defs");p.append(b);const v=m.createElement("clipPath"),w=`clippath_${this.data.id}`;v.setAttribute("id",w),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let x=2,_=t.length;x<_;x+=8){const A=t[x],T=t[x+1],M=t[x+2],N=t[x+3],R=m.createElement("rect"),B=(M-e)/h,z=(a-T)/f,G=(A-M)/h,U=(T-N)/f;R.setAttribute("x",B),R.setAttribute("y",z),R.setAttribute("width",G),R.setAttribute("height",U),v.append(R),u?.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${z}" width="${G}" height="${U}"/>`)}this.#e&&(u.push("</g></svg>')"),o.backgroundImage=u.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let i,r;t?(i={str:t.text},r=t.date):(i=e.contentsObj,r=e.modificationDate);const a=this.#n=new uf({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Ge("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:a,id:o,exportValues:u}of r){if(a===-1||o===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${o}"]`);if(f&&!sa.has(f)){ae(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:h,domElement:f})}return i}for(const r of document.getElementsByName(t)){const{exportValue:a}=r,o=r.getAttribute("data-element-id");o!==e&&sa.has(r)&&i.push({id:o,exportValue:a,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class O6 extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Ff extends ri{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(i,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#n(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const a=i.get(r);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){ae('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:r,refs:a,include:o}=e,u=[];if(r.length!==0||a.length!==0){const m=new Set(a);for(const p of r){const b=this._fieldObjects[p]||[];for(const{id:v}of b)m.add(v)}for(const p of Object.values(this._fieldObjects))for(const b of p)m.has(b.id)===o&&u.push(b)}else for(const m of Object.values(this._fieldObjects))u.push(...m);const h=this.annotationStorage,f=[];for(const m of u){const{id:p}=m;switch(f.push(p),m.type){case"text":{const v=m.defaultValue||"";h.setValue(p,{value:v});break}case"checkbox":case"radiobutton":{const v=m.defaultValue===m.exportValues;h.setValue(p,{value:v});break}case"combobox":case"listbox":{const v=m.defaultValue||"";h.setValue(p,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${p}"]`);if(b){if(!sa.has(b)){ae(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class z6 extends ri{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ca extends ri{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Bi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,a){i.includes("mouse")?t.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(o)}})})}_setEventListeners(t,e,i,r){for(const[a,o]of i)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,o,r),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Yt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||D6,a=t.style;let o;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(f/(Rd*r))||1,p=f/m;o=Math.min(r,h(p/Rd))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);o=Math.min(r,h(f/Rd))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=Yt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class L6 extends ca{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const a=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),a.setValue(o.id,{[r]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let a=r.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),sa.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:p}=this.data,b=!!m&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",w=>{const x=this.data.defaultFieldValue??"";i.value=h.userValue=x,h.formattedValue=null});let v=w=>{const{formattedValue:x}=h;x!=null&&(w.target.value=x),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",x=>{if(h.focused)return;const{target:_}=x;if(b&&(_.type=m,p&&(_.step=p)),h.userValue){const A=h.userValue;if(b)if(m==="time"){const T=new Date(A),M=[T.getHours(),T.getMinutes(),T.getSeconds()];_.value=M.map(N=>N.toString().padStart(2,"0")).join(":")}else _.value=new Date(A-N6).toISOString().split(m==="date"?"T":".",1)[0];else _.value=A}h.lastCommittedValue=_.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const _={value(A){h.userValue=A.detail.value??"",b||t.setValue(e,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:T}=A.detail;h.formattedValue=T,T!=null&&A.target!==document.activeElement&&(A.target.value=T);const M={formattedValue:T};b&&(M.value=T),t.setValue(e,M)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:T}=A.detail,{target:M}=A;if(T===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",T);let N=h.userValue;!N||N.length<=T||(N=N.slice(0,T),M.value=h.userValue=N,t.setValue(e,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(_,x)}),i.addEventListener("keydown",x=>{h.commitKey=1;let _=-1;if(x.key==="Escape"?_=0:x.key==="Enter"&&!this.data.multiLine?_=2:x.key==="Tab"&&(h.commitKey=3),_===-1)return;const{value:A}=x.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:_,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const w=v;v=null,i.addEventListener("blur",x=>{if(!h.focused||!x.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:_}=x;let{value:A}=_;if(b){if(A&&m==="time"){const T=A.split(":").map(M=>parseInt(M,10));A=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),_.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();_.type="text"}h.userValue=A,h.lastCommittedValue!==A&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:h.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),w(x)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",x=>{h.lastCommittedValue=null;const{data:_,target:A}=x,{value:T,selectionStart:M,selectionEnd:N}=A;let R=M,B=N;switch(x.inputType){case"deleteWordBackward":{const z=T.substring(0,M).match(/\w*[^\w]*$/);z&&(R-=z[0].length);break}case"deleteWordForward":{const z=T.substring(M).match(/^[^\w]*\w*/);z&&(B+=z[0].length);break}case"deleteContentBackward":M===N&&(R-=1);break;case"deleteContentForward":M===N&&(B+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:_||"",willCommit:!1,selStart:R,selEnd:B}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class B6 extends ca{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class I6 extends ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return sa.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const f of this._getElementsByName(u,i)){const m=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(i,{value:h})}),a.addEventListener("resetform",o=>{const u=e.defaultFieldValue||"Off";o.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class wb extends ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const a=document.createElement("input");if(sa.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const f of this._getElementsByName(u,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:h})}),a.addEventListener("resetform",o=>{const u=e.defaultFieldValue;o.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;a.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const m=o===f.detail.value;for(const p of this._getElementsByName(f.target.name)){const b=m&&p.id===i;p.domElement&&(p.domElement.checked=b),t.setValue(p.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class F6 extends Ff{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class P6 extends ca{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");sa.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const p=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===p});for(const m of this.data.options){const p=document.createElement("option");p.textContent=m.displayValue,p.value=m.exportValue,i.value.includes(m.exportValue)&&(p.setAttribute("selected",!0),a=!1),r.append(p)}let o=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),o=()=>{m.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const u=m=>{const p=m?"value":"textContent",{options:b,multiple:v}=r;return v?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[p]):b.selectedIndex===-1?null:b[b.selectedIndex][p]};let h=u(!1);const f=m=>{const p=m.target.options;return Array.prototype.map.call(p,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const p={value(b){o?.();const v=b.detail.value,w=new Set(Array.isArray(v)?v:[v]);for(const x of r.options)x.selected=w.has(x.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const v=r.options,w=b.detail.remove;v[w].selected=!1,r.remove(w),v.length>0&&Array.prototype.findIndex.call(v,_=>_.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(b){const{index:v,displayValue:w,exportValue:x}=b.detail.insert,_=r.children[v],A=document.createElement("option");A.textContent=w,A.value=x,_?_.before(A):r.append(A),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:v}=b.detail;for(;r.length!==0;)r.remove(0);for(const w of v){const{displayValue:x,exportValue:_}=w,A=document.createElement("option");A.textContent=x,A.value=_,r.append(A)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const v=new Set(b.detail.indices);for(const w of b.target.options)w.selected=v.has(w.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(p,m)}),r.addEventListener("input",m=>{const p=u(!0),b=u(!1);t.setValue(e,{value:p}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:b,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class uf extends ri{constructor(t){const{data:e,elements:i,parent:r}=t,a=!!r._commentManager;if(super(t,{isRenderable:!a&&ri._hasPopupData(e)}),this.elements=i,a&&ri._hasPopupData(e)){const o=this.popup=this.#t();for(const u of i)u.popup=o}else this.popup=null}#t(){return new U6({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${Cf}${r}`).join(",")),this.container}}class U6{#t=null;#e=this.#q.bind(this);#n=this.#P.bind(this);#i=this.#O.bind(this);#a=this.#w.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#b=null;#y=null;#v=null;#k=null;#A=null;#x=null;#T=!1;#S=null;#_=null;constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:a,contentsObj:o,richText:u,parent:h,rect:f,parentRect:m,open:p,commentManager:b=null}){this.#s=t,this.#A=r,this.#o=o,this.#k=u,this.#d=h,this.#r=e,this.#v=f,this.#h=m,this.#l=i,this.#t=b,this.#S=i[0],this.#c=nf.toDateObject(a),this.trigger=i.flatMap(v=>v.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#R(),this.#s.hidden=!0,p&&this.#w())}#R(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#a,{signal:t}),e.addEventListener("pointerenter",this.#i,{signal:t}),e.addEventListener("pointerleave",this.#n,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#C(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#b||this.#C(),!this.#b))return;const{signal:t}=this.#m=new AbortController,e=!!this.#S.extraPopupElement,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#S.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",a,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=this.#p=document.createElement("button");o.className="annotationCommentButton";const u=this.#S.container;o.style.zIndex=u.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#M(),o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",a,{signal:t}),u.after(o)}}#M(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[t,e]=this.#b,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#I(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#S.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:r,modificationDate:a}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:r,modificationDate:a}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#S.commentText,this.#_}set comment(t){t!==this.comment&&(this.#S.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#y)return this.#y;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:r,y:a,width:o,height:u}=this.#S.layer.getBoundingClientRect();return[(t-r)/o,(e+i-a)/u]}set commentPopupPosition(t){this.#y=t}hasDefaultPopupPosition(){return this.#y===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#y||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:a,y:o,width:u,height:h}=r;this.#t.showDialog(null,this,a+e*u,o+i*h,{...t,parentDimensions:r})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#r){const i=t.style.outlineColor=Yt.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#A?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#A}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}eb({html:this.#N||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#N(){const t=this.#k,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#k.html||null}get#z(){return this.#N?.attributes?.style?.fontSize||0}get#F(){return this.#N?.attributes?.style?.color||null}#L(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#F,fontSize:this.#z?`calc(${this.#z}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:r});return i}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#I(),this.#_=e.text)),t&&(this.#b=null,this.#C(),this.#M());return}if(i||e?.deleted){this.remove();return}this.#R(),this.#x||={contentsObj:this.#o,richText:this.#k},t&&(this.#u=null),e&&e.text&&(this.#k=this.#L(e.text),this.#c=nf.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#k}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#E(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:a}}}=this.#d;let o=!!this.#h,u=o?this.#h:this.#v;for(const w of this.#l)if(!u||Yt.intersect(w.data.rect,u)!==null){u=w.data.rect,o=!0;break}const h=Yt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),m=o?u[2]-u[0]+5:0,p=h[0]+m,b=h[1];this.#u=[100*(p-r)/e,100*(b-a)/i];const{style:v}=this.#s;v.left=`${this.#u[0]}%`,v.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#e)):(this.#P(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#e))}#O(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#E(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#P(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#T&&(this.#g||this.#O(),this.#T=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class Sb extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=le.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class H6 extends ri{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class j6 extends ri{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",e-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class G6 extends ri{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",i/2),o.setAttribute("rx",e/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ab extends ri{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:r},width:a,height:o}=this;if(!e)return this.container;const u=this.svgFactory.create(a,o,!0);let h=[];for(let m=0,p=e.length;m<p;m+=2){const b=e[m]-t[0],v=t[3]-e[m+1];h.push(`${b},${v}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class q6 extends Ab{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $6 extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Pf extends ri{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?le.HIGHLIGHT:le.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:o,width:u,height:h}=this.#n(e,t),f=this.svgFactory.create(u,h,!0),m=this.#t=this.svgFactory.createElement("svg:g");f.append(m),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",o);for(let p=0,b=i.length;p<b;p++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",i[p].join(",")),m.append(v)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:r}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),i)for(let o=0,u=this.#e.length;o<u;o++)this.#e[o].setAttribute("points",i[o].join(","));if(r){const{transform:o,width:u,height:h}=this.#n(this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class _b extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=le.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class V6 extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class Y6 extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class X6 extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class kb extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=le.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class K6 extends ri{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:r}=Bi.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Uf{#t=null;#e=null;#n=null;#i=new Map;#a=null;#r=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:o,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:m}){this.div=t,this.#t=e,this.#e=i,this.#a=u||null,this.#r=f||null,this.#n=m||new Of,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async#s(t,e,i){const r=t.firstChild||t,a=r.id=`${Cf}${e}`,o=await this.#a?.getAriaAttributes(a);if(o)for(const[u,h]of o)r.setAttribute(u,h);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:e}=t,i=this.div;ra(i,this.viewport);const r=new Map,a={data:null,layer:i,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new G0,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const u=o.annotationType===wi.POPUP;if(u){const m=r.get(o.id);if(!m)continue;a.elements=m}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const h=H2.create(a);if(!h.isRenderable)continue;if(!u&&o.popupRef){const m=r.get(o.popupRef);m?m.push(h):r.set(o.popupRef,[h])}const f=h.render();o.hidden&&(f.style.visibility="hidden"),await this.#s(f,o.id,a.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#i.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#r,svgFactory:new G0,parent:this};for(const i of t){i.borderStyle||=Uf._defaultBorderStyle,e.data=i;const r=H2.create(e);if(!r.isRenderable)continue;const a=r.render();await this.#s(a,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,ra(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i);const o=this.#i.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,i),o._hasNoCanvas=!1):o.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:r}=t,a=new O6({data:{id:i,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#n}),o=a.render();return e.append(o),this.#t?.moveElementInDOM(e,o,o,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return me(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ja.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const w0=/\r\n?|\n/g;class Ci extends Jt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ci.prototype,e=a=>a.isEmpty(),i=Ts.TRANSLATE_SMALL,r=Ts.TRANSLATE_BIG;return me(this,"_keyboardManager",new Ul([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=le.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ci._defaultColor||Jt._defaultLineColor,this.#i=t.fontSize||Ci._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){Jt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ae.FREETEXT_SIZE:Ci._defaultFontSize=e;break;case Ae.FREETEXT_COLOR:Ci._defaultColor=e;break}}updateParams(t,e){switch(t){case Ae.FREETEXT_SIZE:this.#a(e);break;case Ae.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[Ae.FREETEXT_SIZE,Ci._defaultFontSize],[Ae.FREETEXT_COLOR,Ci._defaultColor||Jt._defaultLineColor]]}get propertiesToUpdate(){return[[Ae.FREETEXT_SIZE,this.#i],[Ae.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Rl(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ae.FREETEXT_COLOR}#a(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},i=this.#i;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const e=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ci._internalPadding*t,-(Ci._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(Ci.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const i=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ci._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,m]=this.pageDimensions,[p,b]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(o[0]-p)/f,w=e+this.height-(o[1]-b)/m;break;case 90:v=t+(o[0]-p)/f,w=e-(o[1]-b)/m,[u,h]=[h,-u];break;case 180:v=t-this.width+(o[0]-p)/f,w=e-(o[1]-b)/m,[u,h]=[-u,-h];break;case 270:v=t+(o[0]-p-this.height*m)/f,w=e+(o[1]-b-this.width*f)/m,[u,h]=[-h,u];break}this.setAt(v*r,w*a,u,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(w0,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=Ci.#h(e.getData("text")||"").replaceAll(w0,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:h}=o,f=[],m=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(m.push(u.nodeValue.slice(h).replaceAll(w0,"")),v!==this.editorDiv){let w=f;for(const x of this.editorDiv.childNodes){if(x===v){w=m;continue}w.push(Ci.#c(x))}}f.push(u.nodeValue.slice(0,h).replaceAll(w0,""))}else if(u===this.editorDiv){let v=f,w=0;for(const x of this.editorDiv.childNodes)w++===h&&(v=m),v.push(Ci.#c(x))}this.#t=`${f.join(`
`)}${r}${m.join(`
`)}`,this.#l();const p=new Range;let b=Math.sumPrecise(f.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(b<=w){p.setStart(v,b),p.setEnd(v,b);break}b-=w}a.removeAllRanges(),a.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(" "," ")}static#h(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ci._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let r=null;if(t instanceof Sb){const{data:{defaultAppearanceData:{fontSize:o,fontColor:u},rect:h,rotation:f,id:m,popupRef:p,richText:b,contentsObj:v,creationDate:w,modificationDate:x},textContent:_,textPosition:A,parent:{page:{pageNumber:T}}}=t;if(!_||_.length===0)return null;r=t={annotationType:le.FREETEXT,color:Array.from(u),fontSize:o,value:_.join(`
`),position:A,pageIndex:T-1,rect:h.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:p,comment:v?.str||null,richText:b,creationDate:w,modificationDate:x}}const a=await super.deserialize(t,e,i);return a.#i=t.fontSize,a.color=Yt.makeHexColor(...t.color),a.#t=Ci.#h(t.value),a._initialData=r,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Jt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#i,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((o,u)=>o!==r[u])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const r of this.#t.split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),e.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class qt{static PRECISION=1e-4;toSVGPath(){Ge("Abstract method `toSVGPath` must be implemented.")}get box(){Ge("Abstract getter `box` must be implemented.")}serialize(t,e){Ge("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,a,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=e+t[u]*r,o[u+1]=i+t[u+1]*a;return o}static _rescaleAndSwap(t,e,i,r,a,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=e+t[u+1]*r,o[u+1]=i+t[u]*a;return o}static _translate(t,e,i,r){r||=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a],r[a+1]=i+t[a+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,a){switch(a){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,a,o){return[(t+5*i)/6,(e+5*r)/6,(5*i+a)/6,(5*r+o)/6,(i+a)/2,(r+o)/2]}}class ta{#t;#e=[];#n;#i;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#g=8;static#m=2;static#u=ta.#g+ta.#m;constructor({x:t,y:e},i,r,a,o,u=0){this.#t=i,this.#h=a*r,this.#i=o,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=u,this.#l=ta.#g*r,this.#c=ta.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#p(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[i,r,a,o]=this.#t;return[(this.#s+(t[0]-e[0])/2-i)/a,(this.#o+(t[1]-e[1])/2-r)/o,(this.#s+(e[0]-t[0])/2-i)/a,(this.#o+(e[1]-t[1])/2-r)/o]}add({x:t,y:e}){this.#s=t,this.#o=e;const[i,r,a,o]=this.#t;let[u,h,f,m]=this.#r.subarray(8,12);const p=t-f,b=e-m,v=Math.hypot(p,b);if(v<this.#c)return!1;const w=v-this.#l,x=w/v,_=x*p,A=x*b;let T=u,M=h;u=f,h=m,f+=_,m+=A,this.#f?.push(t,e);const N=-A/w,R=_/w,B=N*this.#h,z=R*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+B,m+z],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-B,m-z],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+B,h+z],2),this.#a.push(NaN,NaN,NaN,NaN,(u+B-i)/a,(h+z-r)/o),this.#r.set([u-B,h-z],14),this.#e.push(NaN,NaN,NaN,NaN,(u-B-i)/a,(h-z-r)/o)),this.#r.set([T,M,u,h,f,m],6),!this.isEmpty()):(this.#r.set([T,M,u,h,f,m],6),Math.abs(Math.atan2(M-h,T-u)-Math.atan2(A,_))<Math.PI/2?([u,h,f,m]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-i)/a,((h+m)/2-r)/o),[u,h,T,M]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-i)/a,((M+h)/2-r)/o),!0):([T,M,u,h,f,m]=this.#r.subarray(0,6),this.#a.push(((T+5*u)/6-i)/a,((M+5*h)/6-r)/o,((5*u+f)/6-i)/a,((5*h+m)/6-r)/o,((u+f)/2-i)/a,((h+m)/2-r)/o),[f,m,u,h,T,M]=this.#r.subarray(12,18),this.#e.push(((T+5*u)/6-i)/a,((M+5*h)/6-r)/o,((5*u+f)/6-i)/a,((5*h+m)/6-r)/o,((u+f)/2-i)/a,((h+m)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#b();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#v(i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#y(i),i.join(" ")}#b(){const[t,e,i,r]=this.#t,[a,o,u,h]=this.#p();return`M${(this.#r[2]-t)/i} ${(this.#r[3]-e)/r} L${(this.#r[4]-t)/i} ${(this.#r[5]-e)/r} L${a} ${o} L${u} ${h} L${(this.#r[16]-t)/i} ${(this.#r[17]-e)/r} L${(this.#r[14]-t)/i} ${(this.#r[15]-e)/r} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,i,r,a]=this.#t,o=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[h,f,m,p]=this.#p();t.push(`L${(o[0]-e)/r} ${(o[1]-i)/a} L${h} ${f} L${m} ${p} L${(u[0]-e)/r} ${(u[1]-i)/a}`)}newFreeDrawOutline(t,e,i,r,a,o){return new Eb(t,e,i,r,a,o)}getOutlines(){const t=this.#a,e=this.#e,i=this.#r,[r,a,o,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let p=0,b=h.length-2;p<b;p+=2)h[p]=(this.#f[p]-r)/o,h[p+1]=(this.#f[p+1]-a)/u;if(h[h.length-2]=(this.#s-r)/o,h[h.length-1]=(this.#o-a)/u,isNaN(i[6])&&!this.isEmpty())return this.#k(h);const f=new Float32Array(this.#a.length+24+this.#e.length);let m=t.length;for(let p=0;p<m;p+=2){if(isNaN(t[p])){f[p]=f[p+1]=NaN;continue}f[p]=t[p],f[p+1]=t[p+1]}m=this.#x(f,m);for(let p=e.length-6;p>=6;p-=6)for(let b=0;b<6;b+=2){if(isNaN(e[p+b])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[p+b],f[m+1]=e[p+b+1],m+=2}return this.#A(f,m),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#n,this.#i)}#k(t){const e=this.#r,[i,r,a,o]=this.#t,[u,h,f,m]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-i)/a,(e[3]-r)/o,NaN,NaN,NaN,NaN,(e[4]-i)/a,(e[5]-r)/o,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-i)/a,(e[17]-r)/o,NaN,NaN,NaN,NaN,(e[14]-i)/a,(e[15]-r)/o],0),this.newFreeDrawOutline(p,t,this.#t,this.#d,this.#n,this.#i)}#A(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#x(t,e){const i=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[a,o,u,h]=this.#t,[f,m,p,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-a)/u,(i[1]-o)/h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,p,b,NaN,NaN,NaN,NaN,(r[0]-a)/u,(r[1]-o)/h],e),e+=24}}class Eb extends qt{#t;#e=new Float32Array(4);#n;#i;#a;#r;#s;constructor(t,e,i,r,a,o){super(),this.#s=t,this.#a=e,this.#t=i,this.#r=r,this.#n=a,this.#i=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(o);const[u,h,f,m]=this.#e;for(let p=0,b=t.length;p<b;p+=2)t[p]=(t[p]-u)/f,t[p+1]=(t[p+1]-h)/m;for(let p=0,b=e.length;p<b;p+=2)e[p]=(e[p]-u)/f,e[p+1]=(e[p+1]-h)/m}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,i=this.#s.length;e<i;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,r],a){const o=i-t,u=r-e;let h,f;switch(a){case 0:h=qt._rescale(this.#s,t,r,o,-u),f=qt._rescale(this.#a,t,r,o,-u);break;case 90:h=qt._rescaleAndSwap(this.#s,t,e,o,u),f=qt._rescaleAndSwap(this.#a,t,e,o,u);break;case 180:h=qt._rescale(this.#s,i,e,-o,u),f=qt._rescale(this.#a,i,e,-o,u);break;case 270:h=qt._rescaleAndSwap(this.#s,i,r,-o,-u),f=qt._rescaleAndSwap(this.#a,i,r,-o,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const e=this.#s;let i=e[4],r=e[5];const a=[i,r,i,r];let o=i,u=r,h=i,f=r;const m=t?Math.max:Math.min,p=new Float32Array(4);for(let v=6,w=e.length;v<w;v+=6){const x=e[v+4],_=e[v+5];isNaN(e[v])?(Yt.pointBoundingBox(x,_,a),u>_?(o=x,u=_):u===_&&(o=m(o,x)),f<_?(h=x,f=_):f===_&&(h=m(h,x))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,Yt.bezierBoundingBox(i,r,...e.slice(v,v+6),p),Yt.rectBoundingBox(p[0],p[1],p[2],p[3],a),u>p[1]?(o=p[0],u=p[1]):u===p[1]&&(o=m(o,p[0])),f<p[3]?(h=p[2],f=p[3]):f===p[3]&&(h=m(h,p[2]))),i=x,r=_}const b=this.#e;b[0]=a[0]-this.#n,b[1]=a[1]-this.#n,b[2]=a[2]-a[0]+2*this.#n,b[3]=a[3]-a[1]+2*this.#n,this.firstPoint=[o,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,e,i,r,a,o=0){return new ta(t,e,i,r,a,o)}getNewOutline(t,e){const[i,r,a,o]=this.#e,[u,h,f,m]=this.#t,p=a*f,b=o*m,v=i*f+u,w=r*m+h,x=this.newOutliner({x:this.#a[0]*p+v,y:this.#a[1]*b+w},this.#t,this.#r,t,this.#i,e??this.#n);for(let _=2;_<this.#a.length;_+=2)x.add({x:this.#a[_]*p+v,y:this.#a[_+1]*b+w});return x.getOutlines()}}class hf{#t;#e;#n;#i=[];#a=[];constructor(t,e=0,i=0,r=!0){const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x,y:_,width:A,height:T}of t){const M=Math.floor((x-e)/o)*o,N=Math.ceil((x+A+e)/o)*o,R=Math.floor((_-e)/o)*o,B=Math.ceil((_+T+e)/o)*o,z=[M,R,B,!0],G=[N,R,B,!1];this.#i.push(z,G),Yt.rectBoundingBox(M,R,N,B,a)}const u=a[2]-a[0]+2*i,h=a[3]-a[1]+2*i,f=a[0]-i,m=a[1]-i;let p=r?-1/0:1/0,b=1/0;const v=this.#i.at(r?-1:-2),w=[v[0],v[2]];for(const x of this.#i){const[_,A,T,M]=x;!M&&r?A<b?(b=A,p=_):A===b&&(p=Math.max(p,_)):M&&!r&&(A<b?(b=A,p=_):A===b&&(p=Math.min(p,_))),x[0]=(_-f)/u,x[1]=(A-m)/h,x[2]=(T-m)/h}this.#t=new Float32Array([f,m,u,h]),this.#e=[p,b],this.#n=w}getOutlines(){this.#i.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#i)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],i=new Set;for(const o of t){const[u,h,f]=o;e.push([u,h,o],[u,f,o])}e.sort((o,u)=>o[1]-u[1]||o[0]-u[0]);for(let o=0,u=e.length;o<u;o+=2){const h=e[o][2],f=e[o+1][2];h.push(f),f.push(h),i.add(h),i.add(f)}const r=[];let a;for(;i.size>0;){const o=i.values().next().value;let[u,h,f,m,p]=o;i.delete(o);let b=u,v=h;for(a=[u,f],r.push(a);;){let w;if(i.has(m))w=m;else if(i.has(p))w=p;else break;i.delete(w),[u,h,f,m,p]=w,b!==u&&(a.push(b,v,u,v===h?h:f),b=u),v=v===h?f:h}a.push(b,v)}return new Z6(r,this.#t,this.#e,this.#n)}#s(t){const e=this.#a;let i=0,r=e.length-1;for(;i<=r;){const a=i+r>>1,o=e[a][0];if(o===t)return a;o<t?i=a+1:r=a-1}return r+1}#o([,t,e]){const i=this.#s(t);this.#a.splice(i,0,[t,e])}#c([,t,e]){const i=this.#s(t);for(let r=i;r<this.#a.length;r++){const[a,o]=this.#a[r];if(a!==t)break;if(a===t&&o===e){this.#a.splice(r,1);return}}for(let r=i-1;r>=0;r--){const[a,o]=this.#a[r];if(a!==t)break;if(a===t&&o===e){this.#a.splice(r,1);return}}}#l(t){const[e,i,r]=t,a=[[e,i,r]],o=this.#s(r);for(let u=0;u<o;u++){const[h,f]=this.#a[u];for(let m=0,p=a.length;m<p;m++){const[,b,v]=a[m];if(!(f<=b||v<=h)){if(b>=h){if(v>f)a[m][1]=f;else{if(p===1)return[];a.splice(m,1),m--,p--}continue}a[m][2]=h,v>f&&a.push([e,f,v])}}}return a}}class Z6 extends qt{#t;#e;constructor(t,e,i,r){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=r}toSVGPath(){const t=[];for(const e of this.#e){let[i,r]=e;t.push(`M${i} ${r}`);for(let a=2;a<e.length;a+=2){const o=e[a],u=e[a+1];o===i?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,e,i,r],a){const o=[],u=i-t,h=r-e;for(const f of this.#e){const m=new Array(f.length);for(let p=0;p<f.length;p+=2)m[p]=t+f[p]*u,m[p+1]=r-f[p+1]*h;o.push(m)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class df extends ta{newFreeDrawOutline(t,e,i,r,a,o){return new W6(t,e,i,r,a,o)}}class W6 extends Eb{newOutliner(t,e,i,r,a,o=0){return new df(t,e,i,r,a,o)}}class fi extends Jt{#t=null;#e=0;#n;#i=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#m=null;#u="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=le.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=fi.prototype;return me(this,"_keyboardManager",new Ul([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||fi._defaultColor,this.#p=t.thickness||fi._defaultThickness,this.opacity=t.opacity||fi._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#S()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#y(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new hf(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new hf(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:r}=this.#r;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const r=1.5;if(this.#r=t.getNewOutline(this.#p/2+r,.0025),e>=0)this.#d=e,this.#i=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:fi.#_(this.#l.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:fi.#_(this.#r.box,p),path:{d:this.#r.toSVGPath()}})}const[a,o,u,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=u,this.height=h;break;case 90:{const[p,b]=this.parentDimensions;this.x=o,this.y=1-a,this.width=u*b/p,this.height=h*p/b;break}case 180:this.x=1-a,this.y=1-o,this.width=u,this.height=h;break;case 270:{const[p,b]=this.parentDimensions;this.x=1-o,this.y=a,this.width=u*b/p,this.height=h*p/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-a)/u,(f[1]-o)/h];const{lastPoint:m}=this.#r;this.#g=[(m[0]-a)/u,(m[1]-o)/h]}static initialize(t,e){Jt.initialize(t,e),fi._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ae.HIGHLIGHT_COLOR:fi._defaultColor=e;break;case Ae.HIGHLIGHT_THICKNESS:fi._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Ae.HIGHLIGHT_COLOR:this.#k(e);break;case Ae.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[Ae.HIGHLIGHT_COLOR,fi._defaultColor],[Ae.HIGHLIGHT_THICKNESS,fi._defaultThickness]]}get propertiesToUpdate(){return[[Ae.HIGHLIGHT_COLOR,this.color||fi._defaultColor],[Ae.HIGHLIGHT_THICKNESS,this.#p||fi._defaultThickness],[Ae.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#k(t){const e=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:e.bind(this,t,fi._defaultOpacity),undo:e.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#A(t){const e=this.#p,i=r=>{this.#p=r,this.#x(r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Fn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#S(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#_([t,e,i,r],a){switch(a){case 90:return[1-e-r,t,r,i];case 180:return[1-t-i,1-e-r,i,r];case 270:return[e,1-t-i,r,i]}return[t,e,i,r]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=fi.#_(this.#l.box,t)):i=fi.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:fi.#_(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i,this.setDims(this.width,this.height),ib(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#R(t){fi._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#h||this.#C(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#I(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,r]=this.pageTranslation,a=this.#n,o=new Float32Array(a.length*8);let u=0;for(const{x:h,y:f,width:m,height:p}of a){const b=h*t+i,v=(1-f)*e+r;o[u]=o[u+4]=b,o[u+1]=o[u+3]=v,o[u+2]=o[u+6]=b+m*t,o[u+5]=o[u+7]=v-p*e,u+=8}return o}#N(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:i,x:r,y:a}){const{x:o,y:u,width:h,height:f}=i.getBoundingClientRect(),m=new AbortController,p=t.combinedSignal(m),b=v=>{m.abort(),this.#F(t,v)};window.addEventListener("blur",b,{signal:p}),window.addEventListener("pointerup",b,{signal:p}),window.addEventListener("pointerdown",ci,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Un,{signal:p}),i.addEventListener("pointermove",this.#z.bind(this,t),{signal:p}),this._freeHighlight=new df({x:r,y:a},[o,u,h,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#z(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let r=null;if(t instanceof _b){const{data:{quadPoints:w,rect:x,rotation:_,id:A,color:T,opacity:M,popupRef:N,richText:R,contentsObj:B,creationDate:z,modificationDate:G},parent:{page:{pageNumber:U}}}=t;r=t={annotationType:le.HIGHLIGHT,color:Array.from(T),opacity:M,quadPoints:w,boxes:null,pageIndex:U-1,rect:x.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,popupRef:N,richText:R,comment:B?.str||null,creationDate:z,modificationDate:G}}else if(t instanceof Pf){const{data:{inkLists:w,rect:x,rotation:_,id:A,color:T,borderStyle:{rawWidth:M},popupRef:N,richText:R,contentsObj:B,creationDate:z,modificationDate:G},parent:{page:{pageNumber:U}}}=t;r=t={annotationType:le.HIGHLIGHT,color:Array.from(T),thickness:M,inkLists:w,boxes:null,pageIndex:U-1,rect:x.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,popupRef:N,richText:R,comment:B?.str||null,creationDate:z,modificationDate:G}}const{color:a,quadPoints:o,inkLists:u,opacity:h}=t,f=await super.deserialize(t,e,i);f.color=Yt.makeHexColor(...a),f.opacity=h||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[m,p]=f.pageDimensions,[b,v]=f.pageTranslation;if(o){const w=f.#n=[];for(let x=0;x<o.length;x+=8)w.push({x:(o[x]-b)/m,y:1-(o[x+1]-v)/p,width:(o[x+2]-o[x])/m,height:(o[x+1]-o[x+5])/p});f.#y(),f.#S(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],x={x:w[0]-b,y:p-(w[1]-v)},_=new df(x,[0,0,m,p],1,f.#p/2,!0,.001);for(let M=0,N=w.length;M<N;M+=2)x.x=w[M]-b,x.y=p-(w[M+1]-v),_.add(x);const{id:A,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);f.#v({highlightOutlines:_.getOutlines(),highlightId:A,clipPathId:T}),f.#S(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=Jt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#I(),outlines:this.#N(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#L(i)?null:(i.id=this.annotationElementId,i)}#L(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,r)=>i!==e[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Tb{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Ge("Not implemented")}}class ne extends Jt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static#r=NaN;static#s=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(ne._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[r,a]of Object.entries(e))i.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){Ge("Not implemented")}static get typesMap(){Ge("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(ne.#n.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,e[r]]);return t}_updateProperty(t,e,i){const r=this._drawingOptions,a=r[e],o=u=>{r.updateProperty(e,u);const h=this.#t.updateProperty(e,u);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#m()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#m()),{bbox:this.#p()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,i,r]){const{parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[e,1-t,i*(o/a),r*(a/o)];case 180:return[1-t,1-e,i,r];case 270:return[1-e,t,i*(o/a),r*(a/o)];default:return[t,e,i,r]}}#m(){const{x:t,y:e,width:i,height:r,parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[1-e,t,i*(a/o),r*(o/a)];case 180:return[1-t,1-e,i,r];case 270:return[e,1-t,i*(a/o),r*(o/a)];default:return[t,e,i,r]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:t,y:e,width:i,height:r,rotation:a,parentRotation:o,parentDimensions:[u,h]}=this;switch((a*4+o)/90){case 1:return[1-e-r,t,r,i];case 2:return[1-t-i,1-e-r,i,r];case 3:return[e,1-t-i,r,i];case 4:return[t,e-i*(u/h),r*(h/u),i*(u/h)];case 5:return[1-e,t,i*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-e,r*(h/u),i*(u/h)];case 7:return[e-i*(u/h),1-t-r*(h/u),i*(u/h),r*(h/u)];case 8:return[t-i,e-r,i,r];case 9:return[1-e,t-i,r,i];case 10:return[1-t,1-e,i,r];case 11:return[e-r,1-t,r,i];case 12:return[t-r*(h/u),e,r*(h/u),i*(u/h)];case 13:return[1-e-i*(u/h),t-r*(h/u),i*(u/h),r*(h/u)];case 14:return[1-t,1-e-i*(u/h),r*(h/u),i*(u/h)];case 15:return[e,1-t,i*(u/h),r*(h/u)];default:return[t,e,i,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties({bbox:this.#p()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,r,a){Ge("Not implemented")}static startDrawing(t,e,i,r){const{target:a,offsetX:o,offsetY:u,pointerId:h,pointerType:f}=r;if(ne.#s&&ne.#s!==f)return;const{viewport:{rotation:m}}=t,{width:p,height:b}=a.getBoundingClientRect(),v=ne.#i=new AbortController,w=t.combinedSignal(v);if(ne.#r||=h,ne.#s??=f,window.addEventListener("pointerup",x=>{ne.#r===x.pointerId?this._endDraw(x):ne.#o?.delete(x.pointerId)},{signal:w}),window.addEventListener("pointercancel",x=>{ne.#r===x.pointerId?this._currentParent.endDrawingSession():ne.#o?.delete(x.pointerId)},{signal:w}),window.addEventListener("pointerdown",x=>{ne.#s===x.pointerType&&((ne.#o||=new Set).add(x.pointerId),ne.#n.isCancellable()&&(ne.#n.removeLastElement(),ne.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Un,{signal:w}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),a.addEventListener("touchmove",x=>{x.timeStamp===ne.#c&&ci(x)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),ne.#n){t.drawLayer.updateProperties(this._currentDrawId,ne.#n.startNew(o,u,p,b,m));return}e.updateUIForDefaultProperties(this),ne.#n=this.createDrawerInstance(o,u,p,b,m),ne.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(ne.#a.toSVGProperties(),ne.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ne.#c=-1,!ne.#n)return;const{offsetX:e,offsetY:i,pointerId:r}=t;if(ne.#r===r){if(ne.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ne.#n.add(e,i)),ne.#c=t.timeStamp,ci(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,ne.#n=null,ne.#a=null,ne.#s=null,ne.#c=NaN),ne.#i&&(ne.#i.abort(),ne.#i=null,ne.#r=NaN,ne.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,ne.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=ne.#n,r=this._currentDrawId,a=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Ae.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ae.DRAW_STEP),!ne.#n.isEmpty()){const{pageDimensions:[i,r],scale:a}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ne.#n.getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:ne.#a,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,r,a,o){Ge("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:u}}=e.viewport,h=this.deserializeDraw(o,u,r,a,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#l({drawOutlines:h}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[r,a]=this.pageDimensions;return this.#t.serialize([e,i,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Q6{#t=new Float64Array(6);#e;#n;#i;#a;#r;#s="";#o=0;#c=new jl;#l;#d;constructor(t,e,i,r,a,o){this.#l=i,this.#d=r,this.#i=a,this.#a=o,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#n=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#h(t,e){return qt._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,r,a,o]=this.#t.subarray(2,6),u=t-a,h=e-o;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#r.push(t,e),isNaN(i)?(this.#t.set([a,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,r,a,o,t,e],0),this.#e.push(...qt.createBezierPoints(i,r,a,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,a){this.#l=i,this.#d=r,this.#i=a,[t,e]=this.#h(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:o,points:this.#r}),this.#t.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,e=this.#n.length;t<e;t++){const{line:i,points:r}=this.#n[t];this.#e=i,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=qt.svgRound(this.#e[4]),e=qt.svgRound(this.#e[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#r.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){const r=qt.svgRound(this.#e[10]),a=qt.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${a}`,this.#o=12,this.#s}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,a=this.#e.length;r<a;r+=6){const[o,u,h,f,m,p]=this.#e.slice(r,r+6).map(qt.svgRound);i.push(`C${o} ${u} ${h} ${f} ${m} ${p}`)}return this.#s+=i.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,i,r){const a=this.#n.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#n,t,e,i,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class jl extends qt{#t;#e=0;#n;#i;#a;#r;#s;#o;#c;build(t,e,i,r,a,o,u){this.#a=e,this.#r=i,this.#s=r,this.#o=a,this.#c=o,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${qt.svgRound(e[4])} ${qt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${qt.svgRound(e[10])} ${qt.svgRound(e[11])}`);continue}for(let i=6,r=e.length;i<r;i+=6){const[a,o,u,h,f,m]=e.subarray(i,i+6).map(qt.svgRound);t.push(`C${a} ${o} ${u} ${h} ${f} ${m}`)}}return t.join("")}serialize([t,e,i,r],a){const o=[],u=[],[h,f,m,p]=this.#d();let b,v,w,x,_,A,T,M,N;switch(this.#o){case 0:N=qt._rescale,b=t,v=e+r,w=i,x=-r,_=t+h*i,A=e+(1-f-p)*r,T=t+(h+m)*i,M=e+(1-f)*r;break;case 90:N=qt._rescaleAndSwap,b=t,v=e,w=i,x=r,_=t+f*i,A=e+h*r,T=t+(f+p)*i,M=e+(h+m)*r;break;case 180:N=qt._rescale,b=t+i,v=e,w=-i,x=r,_=t+(1-h-m)*i,A=e+f*r,T=t+(1-h)*i,M=e+(f+p)*r;break;case 270:N=qt._rescaleAndSwap,b=t+i,v=e+r,w=-i,x=-r,_=t+(1-f-p)*i,A=e+(1-h-m)*r,T=t+(1-f)*i,M=e+(1-h)*r;break}for(const{line:R,points:B}of this.#i)o.push(N(R,b,v,w,x,a?new Array(R.length):null)),u.push(N(B,b,v,w,x,a?new Array(B.length):null));return{lines:o,points:u,rect:[_,A,T,M]}}static deserialize(t,e,i,r,a,{paths:{lines:o,points:u},rotation:h,thickness:f}){const m=[];let p,b,v,w,x;switch(h){case 0:x=qt._rescale,p=-t/i,b=e/r+1,v=1/i,w=-1/r;break;case 90:x=qt._rescaleAndSwap,p=-e/r,b=-t/i,v=1/r,w=1/i;break;case 180:x=qt._rescale,p=t/i+1,b=-e/r,v=-1/i,w=1/r;break;case 270:x=qt._rescaleAndSwap,p=e/r+1,b=t/i+1,v=-1/r,w=-1/i;break}if(!o){o=[];for(const A of u){const T=A.length;if(T===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1]]));continue}if(T===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1],NaN,NaN,NaN,NaN,A[2],A[3]]));continue}const M=new Float32Array(3*(T-2));o.push(M);let[N,R,B,z]=A.subarray(0,4);M.set([NaN,NaN,NaN,NaN,N,R],0);for(let G=4;G<T;G+=2){const U=A[G],et=A[G+1];M.set(qt.createBezierPoints(N,R,B,z,U,et),(G-2)*3),[N,R,B,z]=[B,z,U,et]}}}for(let A=0,T=o.length;A<T;A++)m.push({line:x(o[A].map(M=>M??NaN),p,b,v,w),points:x(u[A].map(M=>M??NaN),p,b,v,w)});const _=new this.prototype.constructor;return _.build(m,i,r,1,h,f,a),_}#l(t=this.#c){const e=this.#n+t/2*this.#s;return this.#o%180===0?[e/this.#a,e/this.#r]:[e/this.#r,e/this.#a]}#d(){const[t,e,i,r]=this.#t,[a,o]=this.#l(0);return[t+a,e+o,i-2*a,r-2*o]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)Yt.pointBoundingBox(r[u],r[u+1],t);continue}let a=r[4],o=r[5];for(let u=6,h=r.length;u<h;u+=6){const[f,m,p,b,v,w]=r.subarray(u,u+6);Yt.bezierBoundingBox(a,o,f,m,p,b,v,w,t),a=v,o=w}}const[e,i]=this.#l();t[0]=Vi(t[0]-e,0,1),t[1]=Vi(t[1]-i,0,1),t[2]=Vi(t[2]+e,0,1),t[3]=Vi(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[r,a]=this.#l(),[o,u]=[r-e,a-i],h=this.#t;return h[0]-=o,h[1]-=u,h[2]+=2*o,h[3]+=2*u,h}updateParentDimensions([t,e],i){const[r,a]=this.#l();this.#a=t,this.#r=e,this.#s=i;const[o,u]=this.#l(),h=o-r,f=u-a,m=this.#t;return m[0]-=h,m[1]-=f,m[2]+=2*h,m[3]+=2*f,m}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(qt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${qt.svgRound(t)} ${qt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,r=0,a=0,o=0,u=0,h=0;switch(this.#e){case 90:r=e/t,a=-t/e,u=t;break;case 180:i=-1,o=-1,u=t,h=e;break;case 270:r=-e/t,a=t/e,h=e;break;default:return""}return`matrix(${i} ${r} ${a} ${o} ${qt.svgRound(u)} ${qt.svgRound(h)})`}getPathResizingSVGProperties([t,e,i,r]){const[a,o]=this.#l(),[u,h,f,m]=this.#t;if(Math.abs(f-a)<=qt.PRECISION||Math.abs(m-o)<=qt.PRECISION){const x=t+i/2-(u+f/2),_=e+r/2-(h+m/2);return{path:{"transform-origin":`${qt.svgRound(t)} ${qt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${x} ${_})`}}}const p=(i-2*a)/(f-2*a),b=(r-2*o)/(m-2*o),v=f/i,w=m/r;return{path:{"transform-origin":`${qt.svgRound(u)} ${qt.svgRound(h)}`,transform:`${this.rotationTransform} scale(${v} ${w}) translate(${qt.svgRound(a)} ${qt.svgRound(o)}) scale(${p} ${b}) translate(${qt.svgRound(-a)} ${qt.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,i,r]){const[a,o]=this.#l(),u=this.#t,[h,f,m,p]=u;if(u[0]=t,u[1]=e,u[2]=i,u[3]=r,Math.abs(m-a)<=qt.PRECISION||Math.abs(p-o)<=qt.PRECISION){const _=t+i/2-(h+m/2),A=e+r/2-(f+p/2);for(const{line:T,points:M}of this.#i)qt._translate(T,_,A,T),qt._translate(M,_,A,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${qt.svgRound(t)} ${qt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*a)/(m-2*a),v=(r-2*o)/(p-2*o),w=-b*(h+a)+t+a,x=-v*(f+o)+e+o;if(b!==1||v!==1||w!==0||x!==0)for(const{line:_,points:A}of this.#i)qt._rescale(_,w,x,b,v,_),qt._rescale(A,w,x,b,v,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${qt.svgRound(t)} ${qt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[r,a]=i,o=this.#t,u=t-o[0],h=e-o[1];if(this.#a===r&&this.#r===a)for(const{line:f,points:m}of this.#i)qt._translate(f,u,h,f),qt._translate(m,u,h,m);else{const f=this.#a/r,m=this.#r/a;this.#a=r,this.#r=a;for(const{line:p,points:b}of this.#i)qt._rescale(p,u,h,f,m,p),qt._rescale(b,u,h,f,m,b);o[2]*=f,o[3]*=m}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${qt.svgRound(t)} ${qt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${qt.svgRound(t[0])} ${qt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class su extends Tb{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Jt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new su(this._viewParameters);return t.updateAll(this),t}}class Hf extends ne{static _type="ink";static _editorType=le.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Jt.initialize(t,e),this._defaultDrawingOptions=new su(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return me(this,"typesMap",new Map([[Ae.INK_THICKNESS,"stroke-width"],[Ae.INK_COLOR,"stroke"],[Ae.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,r,a){return new Q6(t,e,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,r,a,o){return jl.deserialize(t,e,i,r,a,o)}static async deserialize(t,e,i){let r=null;if(t instanceof Pf){const{data:{inkLists:o,rect:u,rotation:h,id:f,color:m,opacity:p,borderStyle:{rawWidth:b},popupRef:v,richText:w,contentsObj:x,creationDate:_,modificationDate:A},parent:{page:{pageNumber:T}}}=t;r=t={annotationType:le.INK,color:Array.from(m),thickness:b,opacity:p,paths:{points:o},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:v,richText:w,comment:x?.str||null,creationDate:_,modificationDate:A}}const a=await super.deserialize(t,e,i);return a._initialData=r,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||=new Rl(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ae.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Hf.getDefaultDrawingOptions({stroke:Yt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":o}}=this,u=Object.assign(super.serialize(t),{color:Jt._colorManager.convert(r),opacity:a,thickness:o,paths:{lines:e,points:i}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,u)=>o!==e[u])||t.thickness!==i||t.opacity!==r||t.pageIndex!==a}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class ff extends jl{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const S0=8,ml=3;class eo{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,r){return i-=t,r-=e,i===0?r>0?0:4:i===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,i,r,a,o,u){const h=this.#e(i,r,a,o);for(let f=0;f<8;f++){const m=(-f+h-u+16)%8,p=this.#n[2*m],b=this.#n[2*m+1];if(t[(i+p)*e+(r+b)]!==0)return m}return-1}static#a(t,e,i,r,a,o,u){const h=this.#e(i,r,a,o);for(let f=0;f<8;f++){const m=(f+h+u+16)%8,p=this.#n[2*m],b=this.#n[2*m+1];if(t[(i+p)*e+(r+b)]!==0)return m}return-1}static#r(t,e,i,r){const a=t.length,o=new Int32Array(a);for(let m=0;m<a;m++)o[m]=t[m]<=r?1:0;for(let m=1;m<i-1;m++)o[m*e]=o[m*e+e-1]=0;for(let m=0;m<e;m++)o[m]=o[e*i-1-m]=0;let u=1,h;const f=[];for(let m=1;m<i-1;m++){h=1;for(let p=1;p<e-1;p++){const b=m*e+p,v=o[b];if(v===0)continue;let w=m,x=p;if(v===1&&o[b-1]===0)u+=1,x-=1;else if(v>=1&&o[b+1]===0)u+=1,x+=1,v>1&&(h=v);else{v!==1&&(h=Math.abs(v));continue}const _=[p,m],A=x===p+1,T={isHole:A,points:_,id:u,parent:0};f.push(T);let M;for(const ut of f)if(ut.id===h){M=ut;break}M?M.isHole?T.parent=A?M.parent:h:T.parent=A?h:M.parent:T.parent=A?h:0;const N=this.#i(o,e,m,p,w,x,0);if(N===-1){o[b]=-u,o[b]!==1&&(h=Math.abs(o[b]));continue}let R=this.#n[2*N],B=this.#n[2*N+1];const z=m+R,G=p+B;w=z,x=G;let U=m,et=p;for(;;){const ut=this.#a(o,e,U,et,w,x,1);R=this.#n[2*ut],B=this.#n[2*ut+1];const H=U+R,it=et+B;_.push(it,H);const D=U*e+et;if(o[D+1]===0?o[D]=-u:o[D]===1&&(o[D]=u),H===m&&it===p&&U===z&&et===G){o[b]!==1&&(h=Math.abs(o[b]));break}else w=U,x=et,U=H,et=it}}}return f}static#s(t,e,i,r){if(i-e<=4){for(let z=e;z<i-2;z+=2)r.push(t[z],t[z+1]);return}const a=t[e],o=t[e+1],u=t[i-4]-a,h=t[i-3]-o,f=Math.hypot(u,h),m=u/f,p=h/f,b=m*o-p*a,v=h/u,w=1/f,x=Math.atan(v),_=Math.cos(x),A=Math.sin(x),T=w*(Math.abs(_)+Math.abs(A)),M=w*(1-T+T**2),N=Math.max(Math.atan(Math.abs(A+_)*M),Math.atan(Math.abs(A-_)*M));let R=0,B=e;for(let z=e+2;z<i-2;z+=2){const G=Math.abs(b-m*t[z+1]+p*t[z]);G>R&&(B=z,R=G)}R>(f*N)**2?(this.#s(t,e,B+2,r),this.#s(t,B,i,r)):r.push(a,o)}static#o(t){const e=[],i=t.length;return this.#s(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,r,a,o){const u=new Float32Array(o**2),h=-2*r**2,f=o>>1;for(let x=0;x<o;x++){const _=(x-f)**2;for(let A=0;A<o;A++)u[x*o+A]=Math.exp((_+(A-f)**2)/h)}const m=new Float32Array(256),p=-2*a**2;for(let x=0;x<256;x++)m[x]=Math.exp(x**2/p);const b=t.length,v=new Uint8Array(b),w=new Uint32Array(256);for(let x=0;x<i;x++)for(let _=0;_<e;_++){const A=x*e+_,T=t[A];let M=0,N=0;for(let B=0;B<o;B++){const z=x+B-f;if(!(z<0||z>=i))for(let G=0;G<o;G++){const U=_+G-f;if(U<0||U>=e)continue;const et=t[z*e+U],ut=u[B*o+G]*m[Math.abs(et-T)];M+=et*ut,N+=ut}}const R=v[A]=Math.round(M/N);w[R]++}return[v,w]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let r=-1/0,a=1/0;for(let u=0,h=i.length;u<h;u++){const f=i[u]=t[u<<2];r=Math.max(r,f),a=Math.min(a,f)}const o=255/(r-a);for(let u=0,h=i.length;u<h;u++)i[u]=(i[u]-a)*o;return i}static#h(t){let e,i=-1/0,r=-1/0;const a=t.findIndex(h=>h!==0);let o=a,u=a;for(e=a;e<256;e++){const h=t[e];h>i&&(e-o>r&&(r=e-o,u=e-1),i=h,o=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:r}=t,{maxDim:a}=this.#t;let o=i,u=r;if(i>a||r>a){let b=i,v=r,w=Math.log2(Math.max(i,r)/a);const x=Math.floor(w);w=w===x?x-1:x;for(let A=0;A<w;A++){o=Math.ceil(b/2),u=Math.ceil(v/2);const T=new OffscreenCanvas(o,u);T.getContext("2d").drawImage(t,0,0,b,v,0,0,o,u),b=o,v=u,t!==e&&t.close(),t=T.transferToImageBitmap()}const _=Math.min(a/o,a/u);o=Math.round(o*_),u=Math.round(u*_)}const f=new OffscreenCanvas(o,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,o,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,o,u);const m=f.getImageData(0,0,o,u).data;return[this.#d(m),o,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:r},a,o,u,h){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const p=200,b=m.font=`${i} ${r} ${p}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:w,actualBoundingBoxAscent:x,actualBoundingBoxDescent:_,fontBoundingBoxAscent:A,fontBoundingBoxDescent:T,width:M}=m.measureText(t),N=1.5,R=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||0,M)*N),B=Math.ceil(Math.max(Math.abs(x)+Math.abs(_)||p,Math.abs(A)+Math.abs(T)||p)*N);f=new OffscreenCanvas(R,B),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,R,B),m.fillStyle="black",m.fillText(t,R*(N-1)/2,B*(3-N)/2);const z=this.#d(m.getImageData(0,0,R,B).data),G=this.#l(z),U=this.#h(G),et=this.#r(z,R,B,U);return this.processDrawnLines({lines:{curves:et,width:R,height:B},pageWidth:a,pageHeight:o,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,i,r,a){const[o,u,h]=this.#f(t),[f,m]=this.#c(o,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),p=this.#h(m),b=this.#r(f,u,h,p);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:e,pageHeight:i,rotation:r,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:a,mustSmooth:o,areContours:u}){r%180!==0&&([e,i]=[i,e]);const{curves:h,width:f,height:m}=t,p=t.thickness??0,b=[],v=Math.min(e/f,i/m),w=v/e,x=v/i,_=[];for(const{points:T}of h){const M=o?this.#o(T):T;if(!M)continue;_.push(M);const N=M.length,R=new Float32Array(N),B=new Float32Array(3*(N===2?2:N-2));if(b.push({line:B,points:R}),N===2){R[0]=M[0]*w,R[1]=M[1]*x,B.set([NaN,NaN,NaN,NaN,R[0],R[1]],0);continue}let[z,G,U,et]=M;z*=w,G*=x,U*=w,et*=x,R.set([z,G,U,et],0),B.set([NaN,NaN,NaN,NaN,z,G],0);for(let ut=4;ut<N;ut+=2){const H=R[ut]=M[ut]*w,it=R[ut+1]=M[ut+1]*x;B.set(qt.createBezierPoints(z,G,U,et,H,it),(ut-2)*3),[z,G,U,et]=[U,et,H,it]}}if(b.length===0)return null;const A=u?new ff:new jl;return A.build(b,e,i,1,r,u?0:p,a),{outline:A,newCurves:_,areContours:u,thickness:p,width:f,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:r,height:a}){let o=1/0,u=-1/0,h=0;for(const M of t){h+=M.length;for(let N=2,R=M.length;N<R;N++){const B=M[N]-M[N-2];o=Math.min(o,B),u=Math.max(u,B)}}let f;o>=-128&&u<=127?f=Int8Array:o>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const m=t.length,p=S0+ml*m,b=new Uint32Array(p);let v=0;b[v++]=p*Uint32Array.BYTES_PER_ELEMENT+(h-2*m)*f.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=r,b[v++]=a,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(i??0)),b[v++]=m,b[v++]=f.BYTES_PER_ELEMENT;for(const M of t)b[v++]=M.length-2,b[v++]=M[0],b[v++]=M[1];const w=new CompressionStream("deflate-raw"),x=w.writable.getWriter();await x.ready,x.write(b);const _=f.prototype.constructor;for(const M of t){const N=new _(M.length-2);for(let R=2,B=M.length;R<B;R++)N[R-2]=M[R]-M[R-2];x.write(N)}x.close();const A=await new Response(w.readable).arrayBuffer(),T=new Uint8Array(A);return J4(T)}static async decompressSignature(t){try{const e=m5(t),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),a=r.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,u=0;for await(const M of i)o||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),o.set(M,u),u+=M.length;const h=new Uint32Array(o.buffer,0,o.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=h[2],p=h[3],b=h[4]===0,v=h[5],w=h[6],x=h[7],_=[],A=(S0+ml*w)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(x){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(o.buffer,A);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(o.buffer,A);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(o.buffer,A);break}u=0;for(let M=0;M<w;M++){const N=h[ml*M+S0],R=new Float32Array(N+2);_.push(R);for(let B=0;B<ml-1;B++)R[B]=h[ml*M+S0+B+1];for(let B=0;B<N;B++)R[B+2]=R[B]+T[u++]}return{areContours:b,thickness:v,outlines:_,width:m,height:p}}catch(e){return ae(`decompressSignature: ${e}`),null}}}class jf extends Tb{constructor(){super(),super.updateProperties({fill:Jt._defaultLineColor,"stroke-width":0})}clone(){const t=new jf;return t.updateAll(this),t}}class Gf extends su{constructor(t){super(t),super.updateProperties({stroke:Jt._defaultLineColor,"stroke-width":1})}clone(){const t=new Gf(this._viewParameters);return t.updateAll(this),t}}class cr extends ne{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=le.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Jt.initialize(t,e),this._defaultDrawingOptions=new jf,this._defaultDrawnSignatureOptions=new Gf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return me(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:a,areContours:o,description:u,uuid:h,heightInPage:f}=this.#n,{rawDims:{pageWidth:m,pageHeight:p},rotation:b}=this.parent.viewport,v=eo.processDrawnLines({lines:r,pageWidth:m,pageHeight:p,rotation:b,innerMargin:cr._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(v,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:r,height:a}=this.#n,o=Math.max(r,a),u=eo.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:i,width:r,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,r){const{x:a,y:o}=this,{outline:u}=this.#n=t;this.#t=u instanceof ff,this.description=i;let h;this.#t?h=cr.getDefaultDrawingOptions():(h=cr._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let m=e/f;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return eo.process(t,e,i,r,cr._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:r},rotation:a}=this.parent.viewport;return eo.extractContoursFromText(t,e,i,r,a,cr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return eo.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:cr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=cr.getDefaultDrawingOptions():(this._drawingOptions=cr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(a),t?(a.paths={lines:e,points:i},a.uuid=this.#i,a.isCopy=!0):a.lines=e,this.#e&&(a.accessibilityData={type:"Figure",alt:this.#e}),a}static deserializeDraw(t,e,i,r,a,o){return o.areContours?ff.deserialize(t,e,i,r,a,o):jl.deserialize(t,e,i,r,a,o)}static async deserialize(t,e,i){const r=await super.deserialize(t,e,i);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class J6 extends Jt{#t=null;#e=null;#n=null;#i=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=le.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Jt.initialize(t,e)}static isHandlingMimeForPasting(t){return rf.includes(t)}static paste(t,e){e.pasteEditor({mode:le.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#m()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=rf.join(",");const e=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,r&&(this.#t=r),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#m(){const{div:t}=this;let{width:e,height:i}=this.#t;const[r,a]=this.pageDimensions,o=.75;if(this.width)e=this.width*r,i=this.height*a;else if(e>o*r||i>o*a){const h=Math.min(o*r/e,o*a/i);e*=h,i*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/r,this.height=i/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:r,height:a}=this.#t,o=new mr;let u=this.#t,h=r,f=a,m=null;if(e){if(r>e||a>e){const B=Math.min(e/r,e/a);h=Math.floor(r*B),f=Math.floor(a*B)}m=document.createElement("canvas");const b=m.width=Math.ceil(h*o.sx),v=m.height=Math.ceil(f*o.sy);this.#l||(u=this.#u(b,v));const w=m.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":x5.isDarkMode&&(x="#8f8f9d",_="#42414d");const A=15,T=A*o.sx,M=A*o.sy,N=new OffscreenCanvas(T*2,M*2),R=N.getContext("2d");R.fillStyle=x,R.fillRect(0,0,T*2,M*2),R.fillStyle=_,R.fillRect(0,0,T,M),R.fillRect(T,M,T,M),w.fillStyle=w.createPattern(N,"repeat"),w.fillRect(0,0,b,v),w.drawImage(u,0,0,u.width,u.height,0,0,b,v)}let p=null;if(i){let b,v;if(o.symmetric&&u.width<t&&u.height<t)b=u.width,v=u.height;else if(u=this.#t,r>t||a>t){const _=Math.min(t/r,t/a);b=Math.floor(r*_),v=Math.floor(a*_),this.#l||(u=this.#u(b,v))}const x=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});x.drawImage(u,0,0,u.width,u.height,0,0,b,v),p={width:b,height:v,data:x.getImageData(0,0,b,v).data}}return{canvas:m,width:h,height:f,imageData:p}}#u(t,e){const{width:i,height:r}=this.#t;let a=i,o=r,u=this.#t;for(;a>2*t||o>2*e;){const h=a,f=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const m=new OffscreenCanvas(a,o);m.getContext("2d").drawImage(u,0,0,h,f,0,0,a,o),u=m.transferToImageBitmap()}return u}#p(){const[t,e]=this.parentDimensions,{width:i,height:r}=this,a=new mr,o=Math.ceil(i*t*a.sx),u=Math.ceil(r*e*a.sy),h=this.#s;if(!h||h.width===o&&h.height===u)return;h.width=o,h.height=u;const f=this.#l?this.#t:this.#u(o,u),m=h.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(f,0,0,f.width,f.height,0,0,o,u)}#b(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,r=Math.round(this.width*e*ho.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*ho.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let r=null,a=!1;if(t instanceof kb){const{data:{rect:x,rotation:_,id:A,structParent:T,popupRef:M,richText:N,contentsObj:R,creationDate:B,modificationDate:z},container:G,parent:{page:{pageNumber:U}},canvas:et}=t;let ut,H;et?(delete t.canvas,{id:ut,bitmap:H}=i.imageManager.getFromCanvas(G.id,et),et.remove()):(a=!0,t._hasNoCanvas=!0);const it=(await e._structTree.getAriaAttributes(`${Cf}${A}`))?.get("aria-label")||"";r=t={annotationType:le.STAMP,bitmapId:ut,bitmap:H,pageIndex:U-1,rect:x.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:it},isSvg:!1,structParent:T,popupRef:M,richText:N,comment:R?.str||null,creationDate:B,modificationDate:z}}const o=await super.deserialize(t,e,i),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:m,isSvg:p,accessibilityData:b}=t;a?(i.addMissingCanvas(t.id,o),o.#o=!0):m&&i.imageManager.isValidId(m)?(o.#e=m,h&&(o.#t=h)):o.#i=f,o.#l=p;const[v,w]=o.pageDimensions;return o.width=(u[2]-u[0])/v,o.height=(u[3]-u[1])/w,b&&(o.altTextData=b),o._initialData=r,t.comment&&o.setCommentData(t),o.#d=!!r,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#b(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=this.#y(i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const o=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:i}),i.bitmap=this.#b(!1);else if(this.#l){const u=e.stamps.get(this.#e);o>u.area&&(u.area=o,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return i}#y(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Ur{#t;#e=!1;#n=null;#i=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([Ci,Hf,J6,fi,cr].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:a,annotationLayer:o,drawLayer:u,textLayer:h,viewport:f,l10n:m}){const p=[...Ur.#p.values()];if(!Ur._initialized){Ur._initialized=!0;for(const b of p)b.initialize(m,t)}t.registerEditorTypes(p),this.#u=t,this.pageIndex=e,this.div=i,this.#t=a,this.#n=o,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===le.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case le.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case le.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case le.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===le.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of Ur.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}get#b(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const i of this.#b)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#n;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const i=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:o,clientY:u,timeStamp:h}=r,f=this.#m;if(h-f>500){this.#m=h;return}this.#m=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const p=document.elementsFromPoint(o,u);if(m.toggle("getElements",!1),!this.div.contains(p[0]))return;let b;const v=new RegExp(`^${El}[0-9]+$`);for(const x of p)if(v.test(x.id)){b=x.id;break}if(!b)return;const w=this.#r.get(b);w?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick(r))},{signal:i,capture:!0})}const t=this.#n;if(t){const i=new Map,r=new Map;for(const o of this.#b){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(t);continue}if(o.serialize()!==null){i.set(o.annotationElementId,o);continue}else r.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const a=t.getEditableAnnotations();for(const o of a){const{id:u}=o.data;if(this.#u.isDeletedAnnotationElement(u)){o.updateEdited({deleted:!0});continue}let h=r.get(u);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=i.get(u),h&&(this.#u.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const i of Ur.#p.values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#y(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=Bi.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),fi.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),Jt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Ur.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#k(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:r}=this.#A(),a=this.getNextId(),o=this.#k({parent:this,id:a,x:i,y:r,uiManager:this.#u,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await Ur.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),a=this.#k({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:t,y:e,width:i,height:r}=this.boundingClientRect,a=Math.max(0,t),o=Math.max(0,e),u=Math.min(window.innerWidth,t+i),h=Math.min(window.innerHeight,e+r),f=(a+u)/2-t,m=(o+h)/2-e,[p,b]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:p,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Bi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===le.STAMP||i===le.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===le.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=Bi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,i){const r=this.#u.findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ra(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,ra(this.div,{rotation:i}),e!==i)for(const r of this.#r.values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class zi{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return me(this,"_svgFactory",new G0)}static#a(t,[e,i,r,a]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*r}%`,o.height=`${100*a}%`}#r(){const t=zi._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const i=zi._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const a=zi._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),r}#o(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)}draw(t,e=!1,i=!1){const r=zi.#i++,a=this.#r(),o=zi._svgFactory.createElement("defs");a.append(o);const u=zi._svgFactory.createElement("path");o.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(r,u);const f=i?this.#s(o,h):null,m=zi._svgFactory.createElement("use");return a.append(m),m.setAttribute("href",`#${h}`),this.updateProperties(a,t),this.#e.set(r,a),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=zi.#i++,r=this.#r(),a=zi._svgFactory.createElement("defs");r.append(a);const o=zi._svgFactory.createElement("path");a.append(o);const u=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const p=zi._svgFactory.createElement("mask");a.append(p),h=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",h),p.setAttribute("maskUnits","objectBoundingBox");const b=zi._svgFactory.createElement("rect");p.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=zi._svgFactory.createElement("use");p.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=zi._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const m=f.cloneNode();return r.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(i,r),i}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:r,rootClass:a,path:o}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(i&&this.#o(u,i),r&&zi.#a(u,r),a){const{classList:h}=u;for(const[f,m]of Object.entries(a))h.toggle(f,m)}if(o){const f=u.firstChild.firstChild;this.#o(f,o)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:hf};globalThis.pdfjsLib={AbortException:Es,AnnotationEditorLayer:Ur,AnnotationEditorParamsType:Ae,AnnotationEditorType:le,AnnotationEditorUIManager:Ts,AnnotationLayer:Uf,AnnotationMode:Ss,AnnotationType:wi,applyOpacity:S5,build:M6,ColorPicker:Fn,createValidAbsoluteUrl:K4,CSSConstants:w5,DOMSVGFactory:G0,DrawLayer:zi,FeatureTest:Bi,fetchData:Il,findContrastColor:A5,getDocument:bb,getFilenameFromUrl:p5,getPdfFilenameFromUrl:g5,getRGB:Pl,getUuid:Q4,getXfaPageViewport:v5,GlobalWorkerOptions:lo,ImageKind:z0,InvalidPDFException:ef,isDataScheme:iu,isPdfFile:Rf,isValidExplicitDest:O5,MathClamp:Vi,noContextMenu:Un,normalizeUnicode:d5,OPS:Tl,OutputScale:mr,PasswordResponses:n5,PDFDataRangeTransport:vb,PDFDateString:nf,PDFWorker:Ml,PermissionFlag:i5,PixelsPerInch:ho,RenderingCancelledException:Mf,renderRichText:eb,ResponseException:H0,setLayerDimensions:ra,shadow:me,SignatureExtractor:eo,stopEvent:ci,SupportedImageMimeTypes:rf,TextLayer:qi,TouchManager:nu,updateUrlHash:Z4,Util:Yt,VerbosityLevel:J0,version:C6,XfaLayer:tb};var j2;(function(l){l.STRING="string",l.NUMBER="number",l.INTEGER="integer",l.BOOLEAN="boolean",l.ARRAY="array",l.OBJECT="object"})(j2||(j2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G2;(function(l){l.LANGUAGE_UNSPECIFIED="language_unspecified",l.PYTHON="python"})(G2||(G2={}));var q2;(function(l){l.OUTCOME_UNSPECIFIED="outcome_unspecified",l.OUTCOME_OK="outcome_ok",l.OUTCOME_FAILED="outcome_failed",l.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(q2||(q2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=["user","model","function","system"];var V2;(function(l){l.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",l.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",l.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",l.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",l.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",l.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(V2||(V2={}));var Y2;(function(l){l.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",l.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",l.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",l.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",l.BLOCK_NONE="BLOCK_NONE"})(Y2||(Y2={}));var X2;(function(l){l.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",l.NEGLIGIBLE="NEGLIGIBLE",l.LOW="LOW",l.MEDIUM="MEDIUM",l.HIGH="HIGH"})(X2||(X2={}));var K2;(function(l){l.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",l.SAFETY="SAFETY",l.OTHER="OTHER"})(K2||(K2={}));var Al;(function(l){l.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",l.STOP="STOP",l.MAX_TOKENS="MAX_TOKENS",l.SAFETY="SAFETY",l.RECITATION="RECITATION",l.LANGUAGE="LANGUAGE",l.BLOCKLIST="BLOCKLIST",l.PROHIBITED_CONTENT="PROHIBITED_CONTENT",l.SPII="SPII",l.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",l.OTHER="OTHER"})(Al||(Al={}));var Z2;(function(l){l.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",l.RETRIEVAL_QUERY="RETRIEVAL_QUERY",l.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",l.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",l.CLASSIFICATION="CLASSIFICATION",l.CLUSTERING="CLUSTERING"})(Z2||(Z2={}));var W2;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.AUTO="AUTO",l.ANY="ANY",l.NONE="NONE"})(W2||(W2={}));var Q2;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.MODE_DYNAMIC="MODE_DYNAMIC"})(Q2||(Q2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Wa extends Ui{constructor(t,e){super(t),this.response=e}}class Cb extends Ui{constructor(t,e,i,r){super(t),this.status=e,this.statusText=i,this.errorDetails=r}}class ks extends Ui{}class Mb extends Ui{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7="https://generativelanguage.googleapis.com",e7="v1beta",i7="0.24.1",n7="genai-js";var aa;(function(l){l.GENERATE_CONTENT="generateContent",l.STREAM_GENERATE_CONTENT="streamGenerateContent",l.COUNT_TOKENS="countTokens",l.EMBED_CONTENT="embedContent",l.BATCH_EMBED_CONTENTS="batchEmbedContents"})(aa||(aa={}));class r7{constructor(t,e,i,r,a){this.model=t,this.task=e,this.apiKey=i,this.stream=r,this.requestOptions=a}toString(){var t,e;const i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||e7;let a=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||t7}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function s7(l){const t=[];return l?.apiClient&&t.push(l.apiClient),t.push(`${n7}/${i7}`),t.join(" ")}async function a7(l){var t;const e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",s7(l.requestOptions)),e.append("x-goog-api-key",l.apiKey);let i=(t=l.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new ks(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,a]of i.entries()){if(r==="x-goog-api-key")throw new ks(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new ks(`Header name ${r} can only be set using the apiClient field`);e.append(r,a)}}return e}async function o7(l,t,e,i,r,a){const o=new r7(l,t,e,i,a);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},h7(a)),{method:"POST",headers:await a7(o),body:r})}}async function Gl(l,t,e,i,r,a={},o=fetch){const{url:u,fetchOptions:h}=await o7(l,t,e,i,r,a);return l7(u,h,o)}async function l7(l,t,e=fetch){let i;try{i=await e(l,t)}catch(r){c7(r,l)}return i.ok||await u7(i,l),i}function c7(l,t){let e=l;throw e.name==="AbortError"?(e=new Mb(`Request aborted when fetching ${t.toString()}: ${l.message}`),e.stack=l.stack):l instanceof Cb||l instanceof ks||(e=new Ui(`Error fetching from ${t.toString()}: ${l.message}`),e.stack=l.stack),e}async function u7(l,t){let e="",i;try{const r=await l.json();e=r.error.message,r.error.details&&(e+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new Cb(`Error fetching from ${t.toString()}: [${l.status} ${l.statusText}] ${e}`,l.status,l.statusText,i)}function h7(l){const t={};if(l?.signal!==void 0||l?.timeout>=0){const e=new AbortController;l?.timeout>=0&&setTimeout(()=>e.abort(),l.timeout),l?.signal&&l.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(l){return l.text=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),I0(l.candidates[0]))throw new Wa(`${ws(l)}`,l);return d7(l)}else if(l.promptFeedback)throw new Wa(`Text not available. ${ws(l)}`,l);return""},l.functionCall=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),I0(l.candidates[0]))throw new Wa(`${ws(l)}`,l);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),J2(l)[0]}else if(l.promptFeedback)throw new Wa(`Function call not available. ${ws(l)}`,l)},l.functionCalls=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),I0(l.candidates[0]))throw new Wa(`${ws(l)}`,l);return J2(l)}else if(l.promptFeedback)throw new Wa(`Function call not available. ${ws(l)}`,l)},l}function d7(l){var t,e,i,r;const a=[];if(!((e=(t=l.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const o of(r=(i=l.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.text&&a.push(o.text),o.executableCode&&a.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&a.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function J2(l){var t,e,i,r;const a=[];if(!((e=(t=l.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const o of(r=(i=l.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.functionCall&&a.push(o.functionCall);if(a.length>0)return a}const f7=[Al.RECITATION,Al.SAFETY,Al.LANGUAGE];function I0(l){return!!l.finishReason&&f7.includes(l.finishReason)}function ws(l){var t,e,i;let r="";if((!l.candidates||l.candidates.length===0)&&l.promptFeedback)r+="Response was blocked",!((t=l.promptFeedback)===null||t===void 0)&&t.blockReason&&(r+=` due to ${l.promptFeedback.blockReason}`),!((e=l.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(r+=`: ${l.promptFeedback.blockReasonMessage}`);else if(!((i=l.candidates)===null||i===void 0)&&i[0]){const a=l.candidates[0];I0(a)&&(r+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(r+=`: ${a.finishMessage}`))}return r}function Dl(l){return this instanceof Dl?(this.v=l,this):new Dl(l)}function m7(l,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(l,t||[]),r,a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(b){i[b]&&(r[b]=function(v){return new Promise(function(w,x){a.push([b,v,w,x])>1||u(b,v)})})}function u(b,v){try{h(i[b](v))}catch(w){p(a[0][3],w)}}function h(b){b.value instanceof Dl?Promise.resolve(b.value.v).then(f,m):p(a[0][2],b)}function f(b){u("next",b)}function m(b){u("throw",b)}function p(b,v){b(v),a.shift(),a.length&&u(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function p7(l){const t=l.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=v7(t),[i,r]=e.tee();return{stream:b7(i),response:g7(r)}}async function g7(l){const t=[],e=l.getReader();for(;;){const{done:i,value:r}=await e.read();if(i)return qf(y7(t));t.push(r)}}function b7(l){return m7(this,arguments,function*(){const e=l.getReader();for(;;){const{value:i,done:r}=yield Dl(e.read());if(r)break;yield yield Dl(qf(i))}})}function v7(l){const t=l.getReader();return new ReadableStream({start(i){let r="";return a();function a(){return t.read().then(({value:o,done:u})=>{if(u){if(r.trim()){i.error(new Ui("Failed to parse stream"));return}i.close();return}r+=o;let h=r.match(t4),f;for(;h;){try{f=JSON.parse(h[1])}catch{i.error(new Ui(`Error parsing JSON response: "${h[1]}"`));return}i.enqueue(f),r=r.substring(h[0].length),h=r.match(t4)}return a()}).catch(o=>{let u=o;throw u.stack=o.stack,u.name==="AbortError"?u=new Mb("Request aborted when reading from the stream"):u=new Ui("Error reading from the stream"),u})}}})}function y7(l){const t=l[l.length-1],e={promptFeedback:t?.promptFeedback};for(const i of l){if(i.candidates){let r=0;for(const a of i.candidates)if(e.candidates||(e.candidates=[]),e.candidates[r]||(e.candidates[r]={index:r}),e.candidates[r].citationMetadata=a.citationMetadata,e.candidates[r].groundingMetadata=a.groundingMetadata,e.candidates[r].finishReason=a.finishReason,e.candidates[r].finishMessage=a.finishMessage,e.candidates[r].safetyRatings=a.safetyRatings,a.content&&a.content.parts){e.candidates[r].content||(e.candidates[r].content={role:a.content.role||"user",parts:[]});const o={};for(const u of a.content.parts)u.text&&(o.text=u.text),u.functionCall&&(o.functionCall=u.functionCall),u.executableCode&&(o.executableCode=u.executableCode),u.codeExecutionResult&&(o.codeExecutionResult=u.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),e.candidates[r].content.parts.push(o)}r++}i.usageMetadata&&(e.usageMetadata=i.usageMetadata)}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(l,t,e,i){const r=await Gl(t,aa.STREAM_GENERATE_CONTENT,l,!0,JSON.stringify(e),i);return p7(r)}async function Db(l,t,e,i){const a=await(await Gl(t,aa.GENERATE_CONTENT,l,!1,JSON.stringify(e),i)).json();return{response:qf(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(l){if(l!=null){if(typeof l=="string")return{role:"system",parts:[{text:l}]};if(l.text)return{role:"system",parts:[l]};if(l.parts)return l.role?l:{role:"system",parts:l.parts}}}function Nl(l){let t=[];if(typeof l=="string")t=[{text:l}];else for(const e of l)typeof e=="string"?t.push({text:e}):t.push(e);return x7(t)}function x7(l){const t={role:"user",parts:[]},e={role:"function",parts:[]};let i=!1,r=!1;for(const a of l)"functionResponse"in a?(e.parts.push(a),r=!0):(t.parts.push(a),i=!0);if(i&&r)throw new Ui("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new Ui("No content is provided for sending chat message.");return i?t:e}function w7(l,t){var e;let i={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(e=t?.cachedContent)===null||e===void 0?void 0:e.name,contents:[]};const r=l.generateContentRequest!=null;if(l.contents){if(r)throw new ks("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=l.contents}else if(r)i=Object.assign(Object.assign({},i),l.generateContentRequest);else{const a=Nl(l);i.contents=[a]}return{generateContentRequest:i}}function e4(l){let t;return l.contents?t=l:t={contents:[Nl(l)]},l.systemInstruction&&(t.systemInstruction=Nb(l.systemInstruction)),t}function S7(l){return typeof l=="string"||Array.isArray(l)?{content:Nl(l)}:l}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],A7={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function _7(l){let t=!1;for(const e of l){const{role:i,parts:r}=e;if(!t&&i!=="user")throw new Ui(`First content should be with role 'user', got ${i}`);if(!$2.includes(i))throw new Ui(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify($2)}`);if(!Array.isArray(r))throw new Ui("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new Ui("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of r)for(const h of i4)h in u&&(a[h]+=1);const o=A7[i];for(const u of i4)if(!o.includes(u)&&a[u]>0)throw new Ui(`Content with role '${i}' can't contain '${u}' part`);t=!0}}function n4(l){var t;if(l.candidates===void 0||l.candidates.length===0)return!1;const e=(t=l.candidates[0])===null||t===void 0?void 0:t.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(const i of e.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="SILENT_ERROR";class k7{constructor(t,e,i,r={}){this.model=e,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i?.history&&(_7(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var i,r,a,o,u,h;await this._sendPromise;const f=Nl(t),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},p=Object.assign(Object.assign({},this._requestOptions),e);let b;return this._sendPromise=this._sendPromise.then(()=>Db(this._apiKey,this.model,m,p)).then(v=>{var w;if(n4(v.response)){this._history.push(f);const x=Object.assign({parts:[],role:"model"},(w=v.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(x)}else{const x=ws(v.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}b=v}).catch(v=>{throw this._sendPromise=Promise.resolve(),v}),await this._sendPromise,b}async sendMessageStream(t,e={}){var i,r,a,o,u,h;await this._sendPromise;const f=Nl(t),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},p=Object.assign(Object.assign({},this._requestOptions),e),b=Rb(this._apiKey,this.model,m,p);return this._sendPromise=this._sendPromise.then(()=>b).catch(v=>{throw new Error(r4)}).then(v=>v.response).then(v=>{if(n4(v)){this._history.push(f);const w=Object.assign({},v.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=ws(v);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(v=>{v.message!==r4&&console.error(v)}),b}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E7(l,t,e,i){return(await Gl(t,aa.COUNT_TOKENS,l,!1,JSON.stringify(e),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T7(l,t,e,i){return(await Gl(t,aa.EMBED_CONTENT,l,!1,JSON.stringify(e),i)).json()}async function C7(l,t,e,i){const r=e.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await Gl(t,aa.BATCH_EMBED_CONTENTS,l,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(t,e,i={}){this.apiKey=t,this._requestOptions=i,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=Nb(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var i;const r=e4(t),a=Object.assign(Object.assign({},this._requestOptions),e);return Db(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}async generateContentStream(t,e={}){var i;const r=e4(t),a=Object.assign(Object.assign({},this._requestOptions),e);return Rb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}startChat(t){var e;return new k7(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){const i=w7(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),e);return E7(this.apiKey,this.model,i,r)}async embedContent(t,e={}){const i=S7(t),r=Object.assign(Object.assign({},this._requestOptions),e);return T7(this.apiKey,this.model,i,r)}async batchEmbedContents(t,e={}){const i=Object.assign(Object.assign({},this._requestOptions),e);return C7(this.apiKey,this.model,t,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new Ui("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new s4(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,i){if(!t.name)throw new ks("Cached content must contain a `name` field.");if(!t.model)throw new ks("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const o of r)if(e?.[o]&&t[o]&&e?.[o]!==t[o]){if(o==="model"){const u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(u===h)continue}throw new ks(`Different value for "${o}" specified in modelParams (${e[o]}) and cachedContent (${t[o]})`)}const a=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new s4(this.apiKey,a,i)}}function A0(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fd={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var a4;function R7(){return a4||(a4=1,(function(l,t){(function(e){l.exports=e()})(function(){return(function e(i,r,a){function o(f,m){if(!r[f]){if(!i[f]){var p=typeof A0=="function"&&A0;if(!m&&p)return p(f,!0);if(u)return u(f,!0);var b=new Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b}var v=r[f]={exports:{}};i[f][0].call(v.exports,function(w){var x=i[f][1][w];return o(x||w)},v,v.exports,e,i,r,a)}return r[f].exports}for(var u=typeof A0=="function"&&A0,h=0;h<a.length;h++)o(a[h]);return o})({1:[function(e,i,r){var a=e("./utils"),o=e("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(h){for(var f,m,p,b,v,w,x,_=[],A=0,T=h.length,M=T,N=a.getTypeOf(h)!=="string";A<h.length;)M=T-A,p=N?(f=h[A++],m=A<T?h[A++]:0,A<T?h[A++]:0):(f=h.charCodeAt(A++),m=A<T?h.charCodeAt(A++):0,A<T?h.charCodeAt(A++):0),b=f>>2,v=(3&f)<<4|m>>4,w=1<M?(15&m)<<2|p>>6:64,x=2<M?63&p:64,_.push(u.charAt(b)+u.charAt(v)+u.charAt(w)+u.charAt(x));return _.join("")},r.decode=function(h){var f,m,p,b,v,w,x=0,_=0,A="data:";if(h.substr(0,A.length)===A)throw new Error("Invalid base64 input, it looks like a data url.");var T,M=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===u.charAt(64)&&M--,h.charAt(h.length-2)===u.charAt(64)&&M--,M%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=o.uint8array?new Uint8Array(0|M):new Array(0|M);x<h.length;)f=u.indexOf(h.charAt(x++))<<2|(b=u.indexOf(h.charAt(x++)))>>4,m=(15&b)<<4|(v=u.indexOf(h.charAt(x++)))>>2,p=(3&v)<<6|(w=u.indexOf(h.charAt(x++))),T[_++]=f,v!==64&&(T[_++]=m),w!==64&&(T[_++]=p);return T}},{"./support":30,"./utils":32}],2:[function(e,i,r){var a=e("./external"),o=e("./stream/DataWorker"),u=e("./stream/Crc32Probe"),h=e("./stream/DataLengthProbe");function f(m,p,b,v,w){this.compressedSize=m,this.uncompressedSize=p,this.crc32=b,this.compression=v,this.compressedContent=w}f.prototype={getContentWorker:function(){var m=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,p,b){return m.pipe(new u).pipe(new h("uncompressedSize")).pipe(p.compressWorker(b)).pipe(new h("compressedSize")).withStreamInfo("compression",p)},i.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,i,r){var a=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,i,r){var a=e("./utils"),o=(function(){for(var u,h=[],f=0;f<256;f++){u=f;for(var m=0;m<8;m++)u=1&u?3988292384^u>>>1:u>>>1;h[f]=u}return h})();i.exports=function(u,h){return u!==void 0&&u.length?a.getTypeOf(u)!=="string"?(function(f,m,p,b){var v=o,w=b+p;f^=-1;for(var x=b;x<w;x++)f=f>>>8^v[255&(f^m[x])];return-1^f})(0|h,u,u.length,0):(function(f,m,p,b){var v=o,w=b+p;f^=-1;for(var x=b;x<w;x++)f=f>>>8^v[255&(f^m.charCodeAt(x))];return-1^f})(0|h,u,u.length,0):0}},{"./utils":32}],5:[function(e,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,i,r){var a=null;a=typeof Promise<"u"?Promise:e("lie"),i.exports={Promise:a}},{lie:37}],7:[function(e,i,r){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),u=e("./utils"),h=e("./stream/GenericWorker"),f=a?"uint8array":"array";function m(p,b){h.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=b,this.meta={}}r.magic="\b\0",u.inherits(m,h),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(f,p.data),!1)},m.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(b){p.push({data:b,meta:p.meta})}},r.compressWorker=function(p){return new m("Deflate",p)},r.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,i,r){function a(v,w){var x,_="";for(x=0;x<w;x++)_+=String.fromCharCode(255&v),v>>>=8;return _}function o(v,w,x,_,A,T){var M,N,R=v.file,B=v.compression,z=T!==f.utf8encode,G=u.transformTo("string",T(R.name)),U=u.transformTo("string",f.utf8encode(R.name)),et=R.comment,ut=u.transformTo("string",T(et)),H=u.transformTo("string",f.utf8encode(et)),it=U.length!==R.name.length,D=H.length!==et.length,rt="",V="",K="",yt=R.dir,pt=R.date,Tt={crc32:0,compressedSize:0,uncompressedSize:0};w&&!x||(Tt.crc32=v.crc32,Tt.compressedSize=v.compressedSize,Tt.uncompressedSize=v.uncompressedSize);var L=0;w&&(L|=8),z||!it&&!D||(L|=2048);var P=0,ot=0;yt&&(P|=16),A==="UNIX"?(ot=798,P|=(function(gt,It){var Lt=gt;return gt||(Lt=It?16893:33204),(65535&Lt)<<16})(R.unixPermissions,yt)):(ot=20,P|=(function(gt){return 63&(gt||0)})(R.dosPermissions)),M=pt.getUTCHours(),M<<=6,M|=pt.getUTCMinutes(),M<<=5,M|=pt.getUTCSeconds()/2,N=pt.getUTCFullYear()-1980,N<<=4,N|=pt.getUTCMonth()+1,N<<=5,N|=pt.getUTCDate(),it&&(V=a(1,1)+a(m(G),4)+U,rt+="up"+a(V.length,2)+V),D&&(K=a(1,1)+a(m(ut),4)+H,rt+="uc"+a(K.length,2)+K);var ht="";return ht+=`
\0`,ht+=a(L,2),ht+=B.magic,ht+=a(M,2),ht+=a(N,2),ht+=a(Tt.crc32,4),ht+=a(Tt.compressedSize,4),ht+=a(Tt.uncompressedSize,4),ht+=a(G.length,2),ht+=a(rt.length,2),{fileRecord:p.LOCAL_FILE_HEADER+ht+G+rt,dirRecord:p.CENTRAL_FILE_HEADER+a(ot,2)+ht+a(ut.length,2)+"\0\0\0\0"+a(P,4)+a(_,4)+G+rt+ut}}var u=e("../utils"),h=e("../stream/GenericWorker"),f=e("../utf8"),m=e("../crc32"),p=e("../signature");function b(v,w,x,_){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=x,this.encodeFileName=_,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(b,h),b.prototype.push=function(v){var w=v.meta.percent||0,x=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,h.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:x?(w+100*(x-_-1))/x:100}}))},b.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var w=this.streamFiles&&!v.file.dir;if(w){var x=o(v,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(v){this.accumulate=!1;var w=this.streamFiles&&!v.file.dir,x=o(v,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),w)this.push({data:(function(_){return p.DATA_DESCRIPTOR+a(_.crc32,4)+a(_.compressedSize,4)+a(_.uncompressedSize,4)})(v),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var v=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var x=this.bytesWritten-v,_=(function(A,T,M,N,R){var B=u.transformTo("string",R(N));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(A,2)+a(A,2)+a(T,4)+a(M,4)+a(B.length,2)+B})(this.dirRecords.length,x,v,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(v){this._sources.push(v);var w=this;return v.on("data",function(x){w.processChunk(x)}),v.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),v.on("error",function(x){w.error(x)}),this},b.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(v){var w=this._sources;if(!h.prototype.error.call(this,v))return!1;for(var x=0;x<w.length;x++)try{w[x].error(v)}catch{}return!0},b.prototype.lock=function(){h.prototype.lock.call(this);for(var v=this._sources,w=0;w<v.length;w++)v[w].lock()},i.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,i,r){var a=e("../compressions"),o=e("./ZipFileWorker");r.generateWorker=function(u,h,f){var m=new o(h.streamFiles,f,h.platform,h.encodeFileName),p=0;try{u.forEach(function(b,v){p++;var w=(function(T,M){var N=T||M,R=a[N];if(!R)throw new Error(N+" is not a valid compression method !");return R})(v.options.compression,h.compression),x=v.options.compressionOptions||h.compressionOptions||{},_=v.dir,A=v.date;v._compressWorker(w,x).withStreamInfo("file",{name:b,dir:_,date:A,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(b){m.error(b)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,i,r){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var u in this)typeof this[u]!="function"&&(o[u]=this[u]);return o}}(a.prototype=e("./object")).loadAsync=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.version="3.10.1",a.loadAsync=function(o,u){return new a().loadAsync(o,u)},a.external=e("./external"),i.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,i,r){var a=e("./utils"),o=e("./external"),u=e("./utf8"),h=e("./zipEntries"),f=e("./stream/Crc32Probe"),m=e("./nodejsUtils");function p(b){return new o.Promise(function(v,w){var x=b.decompressed.getContentWorker().pipe(new f);x.on("error",function(_){w(_)}).on("end",function(){x.streamInfo.crc32!==b.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}i.exports=function(b,v){var w=this;return v=a.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),m.isNode&&m.isStream(b)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",b,!0,v.optimizedBinaryString,v.base64).then(function(x){var _=new h(v);return _.load(x),_}).then(function(x){var _=[o.Promise.resolve(x)],A=x.files;if(v.checkCRC32)for(var T=0;T<A.length;T++)_.push(p(A[T]));return o.Promise.all(_)}).then(function(x){for(var _=x.shift(),A=_.files,T=0;T<A.length;T++){var M=A[T],N=M.fileNameStr,R=a.resolve(M.fileNameStr);w.file(R,M.decompressed,{binary:!0,optimizedBinaryString:!0,date:M.date,dir:M.dir,comment:M.fileCommentStr.length?M.fileCommentStr:null,unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions,createFolders:v.createFolders}),M.dir||(w.file(R).unsafeOriginalName=N)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,i,r){var a=e("../utils"),o=e("../stream/GenericWorker");function u(h,f){o.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(f)}a.inherits(u,o),u.prototype._bindStream=function(h){var f=this;(this._stream=h).pause(),h.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},u.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,i,r){var a=e("readable-stream").Readable;function o(u,h,f){a.call(this,h),this._helper=u;var m=this;u.on("data",function(p,b){m.push(p)||m._helper.pause(),f&&f(b)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}e("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(e,i,r){function a(R,B,z){var G,U=u.getTypeOf(B),et=u.extend(z||{},m);et.date=et.date||new Date,et.compression!==null&&(et.compression=et.compression.toUpperCase()),typeof et.unixPermissions=="string"&&(et.unixPermissions=parseInt(et.unixPermissions,8)),et.unixPermissions&&16384&et.unixPermissions&&(et.dir=!0),et.dosPermissions&&16&et.dosPermissions&&(et.dir=!0),et.dir&&(R=A(R)),et.createFolders&&(G=_(R))&&T.call(this,G,!0);var ut=U==="string"&&et.binary===!1&&et.base64===!1;z&&z.binary!==void 0||(et.binary=!ut),(B instanceof p&&B.uncompressedSize===0||et.dir||!B||B.length===0)&&(et.base64=!1,et.binary=!0,B="",et.compression="STORE",U="string");var H=null;H=B instanceof p||B instanceof h?B:w.isNode&&w.isStream(B)?new x(R,B):u.prepareContent(R,B,et.binary,et.optimizedBinaryString,et.base64);var it=new b(R,H,et);this.files[R]=it}var o=e("./utf8"),u=e("./utils"),h=e("./stream/GenericWorker"),f=e("./stream/StreamHelper"),m=e("./defaults"),p=e("./compressedObject"),b=e("./zipObject"),v=e("./generate"),w=e("./nodejsUtils"),x=e("./nodejs/NodejsStreamInputAdapter"),_=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var B=R.lastIndexOf("/");return 0<B?R.substring(0,B):""},A=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},T=function(R,B){return B=B!==void 0?B:m.createFolders,R=A(R),this.files[R]||a.call(this,R,null,{dir:!0,createFolders:B}),this.files[R]};function M(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var B,z,G;for(B in this.files)G=this.files[B],(z=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&R(z,G)},filter:function(R){var B=[];return this.forEach(function(z,G){R(z,G)&&B.push(G)}),B},file:function(R,B,z){if(arguments.length!==1)return R=this.root+R,a.call(this,R,B,z),this;if(M(R)){var G=R;return this.filter(function(et,ut){return!ut.dir&&G.test(et)})}var U=this.files[this.root+R];return U&&!U.dir?U:null},folder:function(R){if(!R)return this;if(M(R))return this.filter(function(U,et){return et.dir&&R.test(U)});var B=this.root+R,z=T.call(this,B),G=this.clone();return G.root=z.name,G},remove:function(R){R=this.root+R;var B=this.files[R];if(B||(R.slice(-1)!=="/"&&(R+="/"),B=this.files[R]),B&&!B.dir)delete this.files[R];else for(var z=this.filter(function(U,et){return et.name.slice(0,R.length)===R}),G=0;G<z.length;G++)delete this.files[z[G].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var B,z={};try{if((z=u.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");u.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var G=z.comment||this.comment||"";B=v.generateWorker(this,z,G)}catch(U){(B=new h("error")).error(U)}return new f(B,z.type||"string",z.mimeType)},generateAsync:function(R,B){return this.generateInternalStream(R).accumulate(B)},generateNodeStream:function(R,B){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(B)}};i.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,i,r){i.exports=e("stream")},{stream:void 0}],17:[function(e,i,r){var a=e("./DataReader");function o(u){a.call(this,u);for(var h=0;h<this.data.length;h++)u[h]=255&u[h]}e("../utils").inherits(o,a),o.prototype.byteAt=function(u){return this.data[this.zero+u]},o.prototype.lastIndexOfSignature=function(u){for(var h=u.charCodeAt(0),f=u.charCodeAt(1),m=u.charCodeAt(2),p=u.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===h&&this.data[b+1]===f&&this.data[b+2]===m&&this.data[b+3]===p)return b-this.zero;return-1},o.prototype.readAndCheckSignature=function(u){var h=u.charCodeAt(0),f=u.charCodeAt(1),m=u.charCodeAt(2),p=u.charCodeAt(3),b=this.readData(4);return h===b[0]&&f===b[1]&&m===b[2]&&p===b[3]},o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,i,r){var a=e("../utils");function o(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var h,f=0;for(this.checkOffset(u),h=this.index+u-1;h>=this.index;h--)f=(f<<8)+this.byteAt(h);return this.index+=u,f},readString:function(u){return a.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},i.exports=o},{"../utils":32}],19:[function(e,i,r){var a=e("./Uint8ArrayReader");function o(u){a.call(this,u)}e("../utils").inherits(o,a),o.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,i,r){var a=e("./DataReader");function o(u){a.call(this,u)}e("../utils").inherits(o,a),o.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},o.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},o.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},o.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,i,r){var a=e("./ArrayReader");function o(u){a.call(this,u)}e("../utils").inherits(o,a),o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,i,r){var a=e("../utils"),o=e("../support"),u=e("./ArrayReader"),h=e("./StringReader"),f=e("./NodeBufferReader"),m=e("./Uint8ArrayReader");i.exports=function(p){var b=a.getTypeOf(p);return a.checkSupport(b),b!=="string"||o.uint8array?b==="nodebuffer"?new f(p):o.uint8array?new m(a.transformTo("uint8array",p)):new u(a.transformTo("array",p)):new h(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,i,r){var a=e("./GenericWorker"),o=e("../utils");function u(h){a.call(this,"ConvertWorker to "+h),this.destType=h}o.inherits(u,a),u.prototype.processChunk=function(h){this.push({data:o.transformTo(this.destType,h.data),meta:h.meta})},i.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(e,i,r){var a=e("./GenericWorker"),o=e("../crc32");function u(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(u,a),u.prototype.processChunk=function(h){this.streamInfo.crc32=o(h.data,this.streamInfo.crc32||0),this.push(h)},i.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,i,r){var a=e("../utils"),o=e("./GenericWorker");function u(h){o.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}a.inherits(u,o),u.prototype.processChunk=function(h){if(h){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+h.data.length}o.prototype.processChunk.call(this,h)},i.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(e,i,r){var a=e("../utils"),o=e("./GenericWorker");function u(h){o.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(m){f.dataIsReady=!0,f.data=m,f.max=m&&m.length||0,f.type=a.getTypeOf(m),f.isPaused||f._tickAndRepeat()},function(m){f.error(m)})}a.inherits(u,o),u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,f);break;case"uint8array":h=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":h=this.data.slice(this.index,f)}return this.index=f,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(e,i,r){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,u){return this._listeners[o].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,u){if(this._listeners[o])for(var h=0;h<this._listeners[o].length;h++)this._listeners[o][h].call(this,u)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var u=this;return o.on("data",function(h){u.processChunk(h)}),o.on("end",function(){u.end()}),o.on("error",function(h){u.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,u){return this.extraStreamInfo[o]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=a},{}],29:[function(e,i,r){var a=e("../utils"),o=e("./ConvertWorker"),u=e("./GenericWorker"),h=e("../base64"),f=e("../support"),m=e("../external"),p=null;if(f.nodestream)try{p=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(w,x){return new m.Promise(function(_,A){var T=[],M=w._internalType,N=w._outputType,R=w._mimeType;w.on("data",function(B,z){T.push(B),x&&x(z)}).on("error",function(B){T=[],A(B)}).on("end",function(){try{var B=(function(z,G,U){switch(z){case"blob":return a.newBlob(a.transformTo("arraybuffer",G),U);case"base64":return h.encode(G);default:return a.transformTo(z,G)}})(N,(function(z,G){var U,et=0,ut=null,H=0;for(U=0;U<G.length;U++)H+=G[U].length;switch(z){case"string":return G.join("");case"array":return Array.prototype.concat.apply([],G);case"uint8array":for(ut=new Uint8Array(H),U=0;U<G.length;U++)ut.set(G[U],et),et+=G[U].length;return ut;case"nodebuffer":return Buffer.concat(G);default:throw new Error("concat : unsupported type '"+z+"'")}})(M,T),R);_(B)}catch(z){A(z)}T=[]}).resume()})}function v(w,x,_){var A=x;switch(x){case"blob":case"arraybuffer":A="uint8array";break;case"base64":A="string"}try{this._internalType=A,this._outputType=x,this._mimeType=_,a.checkSupport(A),this._worker=w.pipe(new o(A)),w.lock()}catch(T){this._worker=new u("error"),this._worker.error(T)}}v.prototype={accumulate:function(w){return b(this,w)},on:function(w,x){var _=this;return w==="data"?this._worker.on(w,function(A){x.call(_,A.data,A.meta)}):this._worker.on(w,function(){a.delay(x,arguments,_)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var a=new ArrayBuffer(0);try{r.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),r.blob=o.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,i,r){for(var a=e("./utils"),o=e("./support"),u=e("./nodejsUtils"),h=e("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;f[254]=f[254]=1;function p(){h.call(this,"utf-8 decode"),this.leftOver=null}function b(){h.call(this,"utf-8 encode")}r.utf8encode=function(v){return o.nodebuffer?u.newBufferFrom(v,"utf-8"):(function(w){var x,_,A,T,M,N=w.length,R=0;for(T=0;T<N;T++)(64512&(_=w.charCodeAt(T)))==55296&&T+1<N&&(64512&(A=w.charCodeAt(T+1)))==56320&&(_=65536+(_-55296<<10)+(A-56320),T++),R+=_<128?1:_<2048?2:_<65536?3:4;for(x=o.uint8array?new Uint8Array(R):new Array(R),T=M=0;M<R;T++)(64512&(_=w.charCodeAt(T)))==55296&&T+1<N&&(64512&(A=w.charCodeAt(T+1)))==56320&&(_=65536+(_-55296<<10)+(A-56320),T++),_<128?x[M++]=_:(_<2048?x[M++]=192|_>>>6:(_<65536?x[M++]=224|_>>>12:(x[M++]=240|_>>>18,x[M++]=128|_>>>12&63),x[M++]=128|_>>>6&63),x[M++]=128|63&_);return x})(v)},r.utf8decode=function(v){return o.nodebuffer?a.transformTo("nodebuffer",v).toString("utf-8"):(function(w){var x,_,A,T,M=w.length,N=new Array(2*M);for(x=_=0;x<M;)if((A=w[x++])<128)N[_++]=A;else if(4<(T=f[A]))N[_++]=65533,x+=T-1;else{for(A&=T===2?31:T===3?15:7;1<T&&x<M;)A=A<<6|63&w[x++],T--;1<T?N[_++]=65533:A<65536?N[_++]=A:(A-=65536,N[_++]=55296|A>>10&1023,N[_++]=56320|1023&A)}return N.length!==_&&(N.subarray?N=N.subarray(0,_):N.length=_),a.applyFromCharCode(N)})(v=a.transformTo(o.uint8array?"uint8array":"array",v))},a.inherits(p,h),p.prototype.processChunk=function(v){var w=a.transformTo(o.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=w;(w=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),w.set(x,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=(function(T,M){var N;for((M=M||T.length)>T.length&&(M=T.length),N=M-1;0<=N&&(192&T[N])==128;)N--;return N<0||N===0?M:N+f[T[N]]>M?N:M})(w),A=w;_!==w.length&&(o.uint8array?(A=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(A=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:r.utf8decode(A),meta:v.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=p,a.inherits(b,h),b.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,i,r){var a=e("./support"),o=e("./base64"),u=e("./nodejsUtils"),h=e("./external");function f(x){return x}function m(x,_){for(var A=0;A<x.length;++A)_[A]=255&x.charCodeAt(A);return _}e("setimmediate"),r.newBlob=function(x,_){r.checkSupport("blob");try{return new Blob([x],{type:_})}catch{try{var A=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return A.append(x),A.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(x,_,A){var T=[],M=0,N=x.length;if(N<=A)return String.fromCharCode.apply(null,x);for(;M<N;)_==="array"||_==="nodebuffer"?T.push(String.fromCharCode.apply(null,x.slice(M,Math.min(M+A,N)))):T.push(String.fromCharCode.apply(null,x.subarray(M,Math.min(M+A,N)))),M+=A;return T.join("")},stringifyByChar:function(x){for(var _="",A=0;A<x.length;A++)_+=String.fromCharCode(x[A]);return _},applyCanBeUsed:{uint8array:(function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function b(x){var _=65536,A=r.getTypeOf(x),T=!0;if(A==="uint8array"?T=p.applyCanBeUsed.uint8array:A==="nodebuffer"&&(T=p.applyCanBeUsed.nodebuffer),T)for(;1<_;)try{return p.stringifyByChunk(x,A,_)}catch{_=Math.floor(_/2)}return p.stringifyByChar(x)}function v(x,_){for(var A=0;A<x.length;A++)_[A]=x[A];return _}r.applyFromCharCode=b;var w={};w.string={string:f,array:function(x){return m(x,new Array(x.length))},arraybuffer:function(x){return w.string.uint8array(x).buffer},uint8array:function(x){return m(x,new Uint8Array(x.length))},nodebuffer:function(x){return m(x,u.allocBuffer(x.length))}},w.array={string:b,array:f,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return u.newBufferFrom(x)}},w.arraybuffer={string:function(x){return b(new Uint8Array(x))},array:function(x){return v(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:f,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return u.newBufferFrom(new Uint8Array(x))}},w.uint8array={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:f,nodebuffer:function(x){return u.newBufferFrom(x)}},w.nodebuffer={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return w.nodebuffer.uint8array(x).buffer},uint8array:function(x){return v(x,new Uint8Array(x.length))},nodebuffer:f},r.transformTo=function(x,_){if(_=_||"",!x)return _;r.checkSupport(x);var A=r.getTypeOf(_);return w[A][x](_)},r.resolve=function(x){for(var _=x.split("/"),A=[],T=0;T<_.length;T++){var M=_[T];M==="."||M===""&&T!==0&&T!==_.length-1||(M===".."?A.pop():A.push(M))}return A.join("/")},r.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":a.nodebuffer&&u.isBuffer(x)?"nodebuffer":a.uint8array&&x instanceof Uint8Array?"uint8array":a.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(x){if(!a[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(x){var _,A,T="";for(A=0;A<(x||"").length;A++)T+="\\x"+((_=x.charCodeAt(A))<16?"0":"")+_.toString(16).toUpperCase();return T},r.delay=function(x,_,A){setImmediate(function(){x.apply(A||null,_||[])})},r.inherits=function(x,_){function A(){}A.prototype=_.prototype,x.prototype=new A},r.extend=function(){var x,_,A={};for(x=0;x<arguments.length;x++)for(_ in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],_)&&A[_]===void 0&&(A[_]=arguments[x][_]);return A},r.prepareContent=function(x,_,A,T,M){return h.Promise.resolve(_).then(function(N){return a.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new h.Promise(function(R,B){var z=new FileReader;z.onload=function(G){R(G.target.result)},z.onerror=function(G){B(G.target.error)},z.readAsArrayBuffer(N)}):N}).then(function(N){var R=r.getTypeOf(N);return R?(R==="arraybuffer"?N=r.transformTo("uint8array",N):R==="string"&&(M?N=o.decode(N):A&&T!==!0&&(N=(function(B){return m(B,a.uint8array?new Uint8Array(B.length):new Array(B.length))})(N))),N):h.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,i,r){var a=e("./reader/readerFor"),o=e("./utils"),u=e("./signature"),h=e("./zipEntry"),f=e("./support");function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(b)+", expected "+o.pretty(p)+")")}},isSignature:function(p,b){var v=this.reader.index;this.reader.setIndex(p);var w=this.reader.readString(4)===b;return this.reader.setIndex(v),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),b=f.uint8array?"uint8array":"array",v=o.transformTo(b,p);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,b,v,w=this.zip64EndOfCentralSize-44;0<w;)p=this.reader.readInt(2),b=this.reader.readInt(4),v=this.reader.readData(b),this.zip64ExtensibleData[p]={id:p,length:b,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,b;for(p=0;p<this.files.length;p++)b=this.files[p],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(p=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var b=p;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var w=b-v;if(0<w)this.isSignature(b,u.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(p){this.reader=a(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,i,r){var a=e("./reader/readerFor"),o=e("./utils"),u=e("./compressedObject"),h=e("./crc32"),f=e("./utf8"),m=e("./compressions"),p=e("./support");function b(v,w){this.options=v,this.loadOptions=w}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var w,x;if(v.skip(22),this.fileNameLength=v.readInt(2),x=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(_){for(var A in m)if(Object.prototype.hasOwnProperty.call(m,A)&&m[A].magic===_)return m[A];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,w,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var w=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(w),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var w,x,_,A=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<A;)w=v.readInt(2),x=v.readInt(2),_=v.readData(x),this.extraFields[w]={id:w,length:x,value:_};v.setIndex(A)},handleUTF8:function(){var v=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var x=o.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var A=o.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(A)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var w=a(v.value);return w.readInt(1)!==1||h(this.fileName)!==w.readInt(4)?null:f.utf8decode(w.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var w=a(v.value);return w.readInt(1)!==1||h(this.fileComment)!==w.readInt(4)?null:f.utf8decode(w.readData(v.length-5))}return null}},i.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,i,r){function a(w,x,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=x,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=e("./stream/StreamHelper"),u=e("./stream/DataWorker"),h=e("./utf8"),f=e("./compressedObject"),m=e("./stream/GenericWorker");a.prototype={internalStream:function(w){var x=null,_="string";try{if(!w)throw new Error("No output type specified.");var A=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),x=this._decompressWorker();var T=!this._dataBinary;T&&!A&&(x=x.pipe(new h.Utf8EncodeWorker)),!T&&A&&(x=x.pipe(new h.Utf8DecodeWorker))}catch(M){(x=new m("error")).error(M)}return new o(x,_,"")},async:function(w,x){return this.internalStream(w).accumulate(x)},nodeStream:function(w,x){return this.internalStream(w||"nodebuffer").toNodejsStream(x)},_compressWorker:function(w,x){if(this._data instanceof f&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new h.Utf8EncodeWorker)),f.createWorkerFrom(_,w,x)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof m?this._data:new u(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<p.length;v++)a.prototype[p[v]]=b;i.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,i,r){(function(a){var o,u,h=a.MutationObserver||a.WebKitMutationObserver;if(h){var f=0,m=new h(w),p=a.document.createTextNode("");m.observe(p,{characterData:!0}),o=function(){p.data=f=++f%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var x=a.document.createElement("script");x.onreadystatechange=function(){w(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},a.document.documentElement.appendChild(x)}:function(){setTimeout(w,0)};else{var b=new a.MessageChannel;b.port1.onmessage=w,o=function(){b.port2.postMessage(0)}}var v=[];function w(){var x,_;u=!0;for(var A=v.length;A;){for(_=v,v=[],x=-1;++x<A;)_[x]();A=v.length}u=!1}i.exports=function(x){v.push(x)!==1||u||o()}}).call(this,typeof d0<"u"?d0:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,i,r){var a=e("immediate");function o(){}var u={},h=["REJECTED"],f=["FULFILLED"],m=["PENDING"];function p(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,A!==o&&x(this,A)}function b(A,T,M){this.promise=A,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function v(A,T,M){a(function(){var N;try{N=T(M)}catch(R){return u.reject(A,R)}N===A?u.reject(A,new TypeError("Cannot resolve promise with itself")):u.resolve(A,N)})}function w(A){var T=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof T=="function")return function(){T.apply(A,arguments)}}function x(A,T){var M=!1;function N(z){M||(M=!0,u.reject(A,z))}function R(z){M||(M=!0,u.resolve(A,z))}var B=_(function(){T(R,N)});B.status==="error"&&N(B.value)}function _(A,T){var M={};try{M.value=A(T),M.status="success"}catch(N){M.status="error",M.value=N}return M}(i.exports=p).prototype.finally=function(A){if(typeof A!="function")return this;var T=this.constructor;return this.then(function(M){return T.resolve(A()).then(function(){return M})},function(M){return T.resolve(A()).then(function(){throw M})})},p.prototype.catch=function(A){return this.then(null,A)},p.prototype.then=function(A,T){if(typeof A!="function"&&this.state===f||typeof T!="function"&&this.state===h)return this;var M=new this.constructor(o);return this.state!==m?v(M,this.state===f?A:T,this.outcome):this.queue.push(new b(M,A,T)),M},b.prototype.callFulfilled=function(A){u.resolve(this.promise,A)},b.prototype.otherCallFulfilled=function(A){v(this.promise,this.onFulfilled,A)},b.prototype.callRejected=function(A){u.reject(this.promise,A)},b.prototype.otherCallRejected=function(A){v(this.promise,this.onRejected,A)},u.resolve=function(A,T){var M=_(w,T);if(M.status==="error")return u.reject(A,M.value);var N=M.value;if(N)x(A,N);else{A.state=f,A.outcome=T;for(var R=-1,B=A.queue.length;++R<B;)A.queue[R].callFulfilled(T)}return A},u.reject=function(A,T){A.state=h,A.outcome=T;for(var M=-1,N=A.queue.length;++M<N;)A.queue[M].callRejected(T);return A},p.resolve=function(A){return A instanceof this?A:u.resolve(new this(o),A)},p.reject=function(A){var T=new this(o);return u.reject(T,A)},p.all=function(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=A.length,N=!1;if(!M)return this.resolve([]);for(var R=new Array(M),B=0,z=-1,G=new this(o);++z<M;)U(A[z],z);return G;function U(et,ut){T.resolve(et).then(function(H){R[ut]=H,++B!==M||N||(N=!0,u.resolve(G,R))},function(H){N||(N=!0,u.reject(G,H))})}},p.race=function(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=A.length,N=!1;if(!M)return this.resolve([]);for(var R=-1,B=new this(o);++R<M;)z=A[R],T.resolve(z).then(function(G){N||(N=!0,u.resolve(B,G))},function(G){N||(N=!0,u.reject(B,G))});var z;return B}},{immediate:36}],38:[function(e,i,r){var a={};(0,e("./lib/utils/common").assign)(a,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),i.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,i,r){var a=e("./zlib/deflate"),o=e("./utils/common"),u=e("./utils/strings"),h=e("./zlib/messages"),f=e("./zlib/zstream"),m=Object.prototype.toString,p=0,b=-1,v=0,w=8;function x(A){if(!(this instanceof x))return new x(A);this.options=o.assign({level:b,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},A||{});var T=this.options;T.raw&&0<T.windowBits?T.windowBits=-T.windowBits:T.gzip&&0<T.windowBits&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var M=a.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(M!==p)throw new Error(h[M]);if(T.header&&a.deflateSetHeader(this.strm,T.header),T.dictionary){var N;if(N=typeof T.dictionary=="string"?u.string2buf(T.dictionary):m.call(T.dictionary)==="[object ArrayBuffer]"?new Uint8Array(T.dictionary):T.dictionary,(M=a.deflateSetDictionary(this.strm,N))!==p)throw new Error(h[M]);this._dict_set=!0}}function _(A,T){var M=new x(T);if(M.push(A,!0),M.err)throw M.msg||h[M.err];return M.result}x.prototype.push=function(A,T){var M,N,R=this.strm,B=this.options.chunkSize;if(this.ended)return!1;N=T===~~T?T:T===!0?4:0,typeof A=="string"?R.input=u.string2buf(A):m.call(A)==="[object ArrayBuffer]"?R.input=new Uint8Array(A):R.input=A,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(B),R.next_out=0,R.avail_out=B),(M=a.deflate(R,N))!==1&&M!==p)return this.onEnd(M),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(o.shrinkBuf(R.output,R.next_out))):this.onData(o.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&M!==1);return N===4?(M=a.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===p):N!==2||(this.onEnd(p),!(R.avail_out=0))},x.prototype.onData=function(A){this.chunks.push(A)},x.prototype.onEnd=function(A){A===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},r.Deflate=x,r.deflate=_,r.deflateRaw=function(A,T){return(T=T||{}).raw=!0,_(A,T)},r.gzip=function(A,T){return(T=T||{}).gzip=!0,_(A,T)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,i,r){var a=e("./zlib/inflate"),o=e("./utils/common"),u=e("./utils/strings"),h=e("./zlib/constants"),f=e("./zlib/messages"),m=e("./zlib/zstream"),p=e("./zlib/gzheader"),b=Object.prototype.toString;function v(x){if(!(this instanceof v))return new v(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||x&&x.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var A=a.inflateInit2(this.strm,_.windowBits);if(A!==h.Z_OK)throw new Error(f[A]);this.header=new p,a.inflateGetHeader(this.strm,this.header)}function w(x,_){var A=new v(_);if(A.push(x,!0),A.err)throw A.msg||f[A.err];return A.result}v.prototype.push=function(x,_){var A,T,M,N,R,B,z=this.strm,G=this.options.chunkSize,U=this.options.dictionary,et=!1;if(this.ended)return!1;T=_===~~_?_:_===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof x=="string"?z.input=u.binstring2buf(x):b.call(x)==="[object ArrayBuffer]"?z.input=new Uint8Array(x):z.input=x,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(G),z.next_out=0,z.avail_out=G),(A=a.inflate(z,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&U&&(B=typeof U=="string"?u.string2buf(U):b.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,A=a.inflateSetDictionary(this.strm,B)),A===h.Z_BUF_ERROR&&et===!0&&(A=h.Z_OK,et=!1),A!==h.Z_STREAM_END&&A!==h.Z_OK)return this.onEnd(A),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&A!==h.Z_STREAM_END&&(z.avail_in!==0||T!==h.Z_FINISH&&T!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(M=u.utf8border(z.output,z.next_out),N=z.next_out-M,R=u.buf2string(z.output,M),z.next_out=N,z.avail_out=G-N,N&&o.arraySet(z.output,z.output,M,N,0),this.onData(R)):this.onData(o.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(et=!0)}while((0<z.avail_in||z.avail_out===0)&&A!==h.Z_STREAM_END);return A===h.Z_STREAM_END&&(T=h.Z_FINISH),T===h.Z_FINISH?(A=a.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===h.Z_OK):T!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(z.avail_out=0))},v.prototype.onData=function(x){this.chunks.push(x)},v.prototype.onEnd=function(x){x===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},r.Inflate=v,r.inflate=w,r.inflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},r.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,i,r){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(h){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(h[p]=m[p])}}return h},r.shrinkBuf=function(h,f){return h.length===f?h:h.subarray?h.subarray(0,f):(h.length=f,h)};var o={arraySet:function(h,f,m,p,b){if(f.subarray&&h.subarray)h.set(f.subarray(m,m+p),b);else for(var v=0;v<p;v++)h[b+v]=f[m+v]},flattenChunks:function(h){var f,m,p,b,v,w;for(f=p=0,m=h.length;f<m;f++)p+=h[f].length;for(w=new Uint8Array(p),f=b=0,m=h.length;f<m;f++)v=h[f],w.set(v,b),b+=v.length;return w}},u={arraySet:function(h,f,m,p,b){for(var v=0;v<p;v++)h[b+v]=f[m+v]},flattenChunks:function(h){return[].concat.apply([],h)}};r.setTyped=function(h){h?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,u))},r.setTyped(a)},{}],42:[function(e,i,r){var a=e("./common"),o=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var h=new a.Buf8(256),f=0;f<256;f++)h[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function m(p,b){if(b<65537&&(p.subarray&&u||!p.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(p,b));for(var v="",w=0;w<b;w++)v+=String.fromCharCode(p[w]);return v}h[254]=h[254]=1,r.string2buf=function(p){var b,v,w,x,_,A=p.length,T=0;for(x=0;x<A;x++)(64512&(v=p.charCodeAt(x)))==55296&&x+1<A&&(64512&(w=p.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(w-56320),x++),T+=v<128?1:v<2048?2:v<65536?3:4;for(b=new a.Buf8(T),x=_=0;_<T;x++)(64512&(v=p.charCodeAt(x)))==55296&&x+1<A&&(64512&(w=p.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(w-56320),x++),v<128?b[_++]=v:(v<2048?b[_++]=192|v>>>6:(v<65536?b[_++]=224|v>>>12:(b[_++]=240|v>>>18,b[_++]=128|v>>>12&63),b[_++]=128|v>>>6&63),b[_++]=128|63&v);return b},r.buf2binstring=function(p){return m(p,p.length)},r.binstring2buf=function(p){for(var b=new a.Buf8(p.length),v=0,w=b.length;v<w;v++)b[v]=p.charCodeAt(v);return b},r.buf2string=function(p,b){var v,w,x,_,A=b||p.length,T=new Array(2*A);for(v=w=0;v<A;)if((x=p[v++])<128)T[w++]=x;else if(4<(_=h[x]))T[w++]=65533,v+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&v<A;)x=x<<6|63&p[v++],_--;1<_?T[w++]=65533:x<65536?T[w++]=x:(x-=65536,T[w++]=55296|x>>10&1023,T[w++]=56320|1023&x)}return m(T,w)},r.utf8border=function(p,b){var v;for((b=b||p.length)>p.length&&(b=p.length),v=b-1;0<=v&&(192&p[v])==128;)v--;return v<0||v===0?b:v+h[p[v]]>b?v:b}},{"./common":41}],43:[function(e,i,r){i.exports=function(a,o,u,h){for(var f=65535&a|0,m=a>>>16&65535|0,p=0;u!==0;){for(u-=p=2e3<u?2e3:u;m=m+(f=f+o[h++]|0)|0,--p;);f%=65521,m%=65521}return f|m<<16|0}},{}],44:[function(e,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,i,r){var a=(function(){for(var o,u=[],h=0;h<256;h++){o=h;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;u[h]=o}return u})();i.exports=function(o,u,h,f){var m=a,p=f+h;o^=-1;for(var b=f;b<p;b++)o=o>>>8^m[255&(o^u[b])];return-1^o}},{}],46:[function(e,i,r){var a,o=e("../utils/common"),u=e("./trees"),h=e("./adler32"),f=e("./crc32"),m=e("./messages"),p=0,b=4,v=0,w=-2,x=-1,_=4,A=2,T=8,M=9,N=286,R=30,B=19,z=2*N+1,G=15,U=3,et=258,ut=et+U+1,H=42,it=113,D=1,rt=2,V=3,K=4;function yt(C,ft){return C.msg=m[ft],ft}function pt(C){return(C<<1)-(4<C?9:0)}function Tt(C){for(var ft=C.length;0<=--ft;)C[ft]=0}function L(C){var ft=C.state,mt=ft.pending;mt>C.avail_out&&(mt=C.avail_out),mt!==0&&(o.arraySet(C.output,ft.pending_buf,ft.pending_out,mt,C.next_out),C.next_out+=mt,ft.pending_out+=mt,C.total_out+=mt,C.avail_out-=mt,ft.pending-=mt,ft.pending===0&&(ft.pending_out=0))}function P(C,ft){u._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,ft),C.block_start=C.strstart,L(C.strm)}function ot(C,ft){C.pending_buf[C.pending++]=ft}function ht(C,ft){C.pending_buf[C.pending++]=ft>>>8&255,C.pending_buf[C.pending++]=255&ft}function gt(C,ft){var mt,q,j=C.max_chain_length,J=C.strstart,At=C.prev_length,_t=C.nice_match,nt=C.strstart>C.w_size-ut?C.strstart-(C.w_size-ut):0,Dt=C.window,zt=C.w_mask,Nt=C.prev,Wt=C.strstart+et,De=Dt[J+At-1],ue=Dt[J+At];C.prev_length>=C.good_match&&(j>>=2),_t>C.lookahead&&(_t=C.lookahead);do if(Dt[(mt=ft)+At]===ue&&Dt[mt+At-1]===De&&Dt[mt]===Dt[J]&&Dt[++mt]===Dt[J+1]){J+=2,mt++;do;while(Dt[++J]===Dt[++mt]&&Dt[++J]===Dt[++mt]&&Dt[++J]===Dt[++mt]&&Dt[++J]===Dt[++mt]&&Dt[++J]===Dt[++mt]&&Dt[++J]===Dt[++mt]&&Dt[++J]===Dt[++mt]&&Dt[++J]===Dt[++mt]&&J<Wt);if(q=et-(Wt-J),J=Wt-et,At<q){if(C.match_start=ft,_t<=(At=q))break;De=Dt[J+At-1],ue=Dt[J+At]}}while((ft=Nt[ft&zt])>nt&&--j!=0);return At<=C.lookahead?At:C.lookahead}function It(C){var ft,mt,q,j,J,At,_t,nt,Dt,zt,Nt=C.w_size;do{if(j=C.window_size-C.lookahead-C.strstart,C.strstart>=Nt+(Nt-ut)){for(o.arraySet(C.window,C.window,Nt,Nt,0),C.match_start-=Nt,C.strstart-=Nt,C.block_start-=Nt,ft=mt=C.hash_size;q=C.head[--ft],C.head[ft]=Nt<=q?q-Nt:0,--mt;);for(ft=mt=Nt;q=C.prev[--ft],C.prev[ft]=Nt<=q?q-Nt:0,--mt;);j+=Nt}if(C.strm.avail_in===0)break;if(At=C.strm,_t=C.window,nt=C.strstart+C.lookahead,Dt=j,zt=void 0,zt=At.avail_in,Dt<zt&&(zt=Dt),mt=zt===0?0:(At.avail_in-=zt,o.arraySet(_t,At.input,At.next_in,zt,nt),At.state.wrap===1?At.adler=h(At.adler,_t,zt,nt):At.state.wrap===2&&(At.adler=f(At.adler,_t,zt,nt)),At.next_in+=zt,At.total_in+=zt,zt),C.lookahead+=mt,C.lookahead+C.insert>=U)for(J=C.strstart-C.insert,C.ins_h=C.window[J],C.ins_h=(C.ins_h<<C.hash_shift^C.window[J+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[J+U-1])&C.hash_mask,C.prev[J&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=J,J++,C.insert--,!(C.lookahead+C.insert<U)););}while(C.lookahead<ut&&C.strm.avail_in!==0)}function Lt(C,ft){for(var mt,q;;){if(C.lookahead<ut){if(It(C),C.lookahead<ut&&ft===p)return D;if(C.lookahead===0)break}if(mt=0,C.lookahead>=U&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+U-1])&C.hash_mask,mt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),mt!==0&&C.strstart-mt<=C.w_size-ut&&(C.match_length=gt(C,mt)),C.match_length>=U)if(q=u._tr_tally(C,C.strstart-C.match_start,C.match_length-U),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=U){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+U-1])&C.hash_mask,mt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else q=u._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(q&&(P(C,!1),C.strm.avail_out===0))return D}return C.insert=C.strstart<U-1?C.strstart:U-1,ft===b?(P(C,!0),C.strm.avail_out===0?V:K):C.last_lit&&(P(C,!1),C.strm.avail_out===0)?D:rt}function jt(C,ft){for(var mt,q,j;;){if(C.lookahead<ut){if(It(C),C.lookahead<ut&&ft===p)return D;if(C.lookahead===0)break}if(mt=0,C.lookahead>=U&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+U-1])&C.hash_mask,mt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=U-1,mt!==0&&C.prev_length<C.max_lazy_match&&C.strstart-mt<=C.w_size-ut&&(C.match_length=gt(C,mt),C.match_length<=5&&(C.strategy===1||C.match_length===U&&4096<C.strstart-C.match_start)&&(C.match_length=U-1)),C.prev_length>=U&&C.match_length<=C.prev_length){for(j=C.strstart+C.lookahead-U,q=u._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-U),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=j&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+U-1])&C.hash_mask,mt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=U-1,C.strstart++,q&&(P(C,!1),C.strm.avail_out===0))return D}else if(C.match_available){if((q=u._tr_tally(C,0,C.window[C.strstart-1]))&&P(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return D}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(q=u._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<U-1?C.strstart:U-1,ft===b?(P(C,!0),C.strm.avail_out===0?V:K):C.last_lit&&(P(C,!1),C.strm.avail_out===0)?D:rt}function Gt(C,ft,mt,q,j){this.good_length=C,this.max_lazy=ft,this.nice_length=mt,this.max_chain=q,this.func=j}function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*z),this.dyn_dtree=new o.Buf16(2*(2*R+1)),this.bl_tree=new o.Buf16(2*(2*B+1)),Tt(this.dyn_ltree),Tt(this.dyn_dtree),Tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(G+1),this.heap=new o.Buf16(2*N+1),Tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*N+1),Tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function we(C){var ft;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=A,(ft=C.state).pending=0,ft.pending_out=0,ft.wrap<0&&(ft.wrap=-ft.wrap),ft.status=ft.wrap?H:it,C.adler=ft.wrap===2?0:1,ft.last_flush=p,u._tr_init(ft),v):yt(C,w)}function ti(C){var ft=we(C);return ft===v&&(function(mt){mt.window_size=2*mt.w_size,Tt(mt.head),mt.max_lazy_match=a[mt.level].max_lazy,mt.good_match=a[mt.level].good_length,mt.nice_match=a[mt.level].nice_length,mt.max_chain_length=a[mt.level].max_chain,mt.strstart=0,mt.block_start=0,mt.lookahead=0,mt.insert=0,mt.match_length=mt.prev_length=U-1,mt.match_available=0,mt.ins_h=0})(C.state),ft}function ui(C,ft,mt,q,j,J){if(!C)return w;var At=1;if(ft===x&&(ft=6),q<0?(At=0,q=-q):15<q&&(At=2,q-=16),j<1||M<j||mt!==T||q<8||15<q||ft<0||9<ft||J<0||_<J)return yt(C,w);q===8&&(q=9);var _t=new xe;return(C.state=_t).strm=C,_t.wrap=At,_t.gzhead=null,_t.w_bits=q,_t.w_size=1<<_t.w_bits,_t.w_mask=_t.w_size-1,_t.hash_bits=j+7,_t.hash_size=1<<_t.hash_bits,_t.hash_mask=_t.hash_size-1,_t.hash_shift=~~((_t.hash_bits+U-1)/U),_t.window=new o.Buf8(2*_t.w_size),_t.head=new o.Buf16(_t.hash_size),_t.prev=new o.Buf16(_t.w_size),_t.lit_bufsize=1<<j+6,_t.pending_buf_size=4*_t.lit_bufsize,_t.pending_buf=new o.Buf8(_t.pending_buf_size),_t.d_buf=1*_t.lit_bufsize,_t.l_buf=3*_t.lit_bufsize,_t.level=ft,_t.strategy=J,_t.method=mt,ti(C)}a=[new Gt(0,0,0,0,function(C,ft){var mt=65535;for(mt>C.pending_buf_size-5&&(mt=C.pending_buf_size-5);;){if(C.lookahead<=1){if(It(C),C.lookahead===0&&ft===p)return D;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var q=C.block_start+mt;if((C.strstart===0||C.strstart>=q)&&(C.lookahead=C.strstart-q,C.strstart=q,P(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-ut&&(P(C,!1),C.strm.avail_out===0))return D}return C.insert=0,ft===b?(P(C,!0),C.strm.avail_out===0?V:K):(C.strstart>C.block_start&&(P(C,!1),C.strm.avail_out),D)}),new Gt(4,4,8,4,Lt),new Gt(4,5,16,8,Lt),new Gt(4,6,32,32,Lt),new Gt(4,4,16,16,jt),new Gt(8,16,32,32,jt),new Gt(8,16,128,128,jt),new Gt(8,32,128,256,jt),new Gt(32,128,258,1024,jt),new Gt(32,258,258,4096,jt)],r.deflateInit=function(C,ft){return ui(C,ft,T,15,8,0)},r.deflateInit2=ui,r.deflateReset=ti,r.deflateResetKeep=we,r.deflateSetHeader=function(C,ft){return C&&C.state?C.state.wrap!==2?w:(C.state.gzhead=ft,v):w},r.deflate=function(C,ft){var mt,q,j,J;if(!C||!C.state||5<ft||ft<0)return C?yt(C,w):w;if(q=C.state,!C.output||!C.input&&C.avail_in!==0||q.status===666&&ft!==b)return yt(C,C.avail_out===0?-5:w);if(q.strm=C,mt=q.last_flush,q.last_flush=ft,q.status===H)if(q.wrap===2)C.adler=0,ot(q,31),ot(q,139),ot(q,8),q.gzhead?(ot(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),ot(q,255&q.gzhead.time),ot(q,q.gzhead.time>>8&255),ot(q,q.gzhead.time>>16&255),ot(q,q.gzhead.time>>24&255),ot(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),ot(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(ot(q,255&q.gzhead.extra.length),ot(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(C.adler=f(C.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(ot(q,0),ot(q,0),ot(q,0),ot(q,0),ot(q,0),ot(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),ot(q,3),q.status=it);else{var At=T+(q.w_bits-8<<4)<<8;At|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(At|=32),At+=31-At%31,q.status=it,ht(q,At),q.strstart!==0&&(ht(q,C.adler>>>16),ht(q,65535&C.adler)),C.adler=1}if(q.status===69)if(q.gzhead.extra){for(j=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>j&&(C.adler=f(C.adler,q.pending_buf,q.pending-j,j)),L(C),j=q.pending,q.pending!==q.pending_buf_size));)ot(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>j&&(C.adler=f(C.adler,q.pending_buf,q.pending-j,j)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){j=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>j&&(C.adler=f(C.adler,q.pending_buf,q.pending-j,j)),L(C),j=q.pending,q.pending===q.pending_buf_size)){J=1;break}J=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,ot(q,J)}while(J!==0);q.gzhead.hcrc&&q.pending>j&&(C.adler=f(C.adler,q.pending_buf,q.pending-j,j)),J===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){j=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>j&&(C.adler=f(C.adler,q.pending_buf,q.pending-j,j)),L(C),j=q.pending,q.pending===q.pending_buf_size)){J=1;break}J=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,ot(q,J)}while(J!==0);q.gzhead.hcrc&&q.pending>j&&(C.adler=f(C.adler,q.pending_buf,q.pending-j,j)),J===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&L(C),q.pending+2<=q.pending_buf_size&&(ot(q,255&C.adler),ot(q,C.adler>>8&255),C.adler=0,q.status=it)):q.status=it),q.pending!==0){if(L(C),C.avail_out===0)return q.last_flush=-1,v}else if(C.avail_in===0&&pt(ft)<=pt(mt)&&ft!==b)return yt(C,-5);if(q.status===666&&C.avail_in!==0)return yt(C,-5);if(C.avail_in!==0||q.lookahead!==0||ft!==p&&q.status!==666){var _t=q.strategy===2?(function(nt,Dt){for(var zt;;){if(nt.lookahead===0&&(It(nt),nt.lookahead===0)){if(Dt===p)return D;break}if(nt.match_length=0,zt=u._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++,zt&&(P(nt,!1),nt.strm.avail_out===0))return D}return nt.insert=0,Dt===b?(P(nt,!0),nt.strm.avail_out===0?V:K):nt.last_lit&&(P(nt,!1),nt.strm.avail_out===0)?D:rt})(q,ft):q.strategy===3?(function(nt,Dt){for(var zt,Nt,Wt,De,ue=nt.window;;){if(nt.lookahead<=et){if(It(nt),nt.lookahead<=et&&Dt===p)return D;if(nt.lookahead===0)break}if(nt.match_length=0,nt.lookahead>=U&&0<nt.strstart&&(Nt=ue[Wt=nt.strstart-1])===ue[++Wt]&&Nt===ue[++Wt]&&Nt===ue[++Wt]){De=nt.strstart+et;do;while(Nt===ue[++Wt]&&Nt===ue[++Wt]&&Nt===ue[++Wt]&&Nt===ue[++Wt]&&Nt===ue[++Wt]&&Nt===ue[++Wt]&&Nt===ue[++Wt]&&Nt===ue[++Wt]&&Wt<De);nt.match_length=et-(De-Wt),nt.match_length>nt.lookahead&&(nt.match_length=nt.lookahead)}if(nt.match_length>=U?(zt=u._tr_tally(nt,1,nt.match_length-U),nt.lookahead-=nt.match_length,nt.strstart+=nt.match_length,nt.match_length=0):(zt=u._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++),zt&&(P(nt,!1),nt.strm.avail_out===0))return D}return nt.insert=0,Dt===b?(P(nt,!0),nt.strm.avail_out===0?V:K):nt.last_lit&&(P(nt,!1),nt.strm.avail_out===0)?D:rt})(q,ft):a[q.level].func(q,ft);if(_t!==V&&_t!==K||(q.status=666),_t===D||_t===V)return C.avail_out===0&&(q.last_flush=-1),v;if(_t===rt&&(ft===1?u._tr_align(q):ft!==5&&(u._tr_stored_block(q,0,0,!1),ft===3&&(Tt(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),L(C),C.avail_out===0))return q.last_flush=-1,v}return ft!==b?v:q.wrap<=0?1:(q.wrap===2?(ot(q,255&C.adler),ot(q,C.adler>>8&255),ot(q,C.adler>>16&255),ot(q,C.adler>>24&255),ot(q,255&C.total_in),ot(q,C.total_in>>8&255),ot(q,C.total_in>>16&255),ot(q,C.total_in>>24&255)):(ht(q,C.adler>>>16),ht(q,65535&C.adler)),L(C),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?v:1)},r.deflateEnd=function(C){var ft;return C&&C.state?(ft=C.state.status)!==H&&ft!==69&&ft!==73&&ft!==91&&ft!==103&&ft!==it&&ft!==666?yt(C,w):(C.state=null,ft===it?yt(C,-3):v):w},r.deflateSetDictionary=function(C,ft){var mt,q,j,J,At,_t,nt,Dt,zt=ft.length;if(!C||!C.state||(J=(mt=C.state).wrap)===2||J===1&&mt.status!==H||mt.lookahead)return w;for(J===1&&(C.adler=h(C.adler,ft,zt,0)),mt.wrap=0,zt>=mt.w_size&&(J===0&&(Tt(mt.head),mt.strstart=0,mt.block_start=0,mt.insert=0),Dt=new o.Buf8(mt.w_size),o.arraySet(Dt,ft,zt-mt.w_size,mt.w_size,0),ft=Dt,zt=mt.w_size),At=C.avail_in,_t=C.next_in,nt=C.input,C.avail_in=zt,C.next_in=0,C.input=ft,It(mt);mt.lookahead>=U;){for(q=mt.strstart,j=mt.lookahead-(U-1);mt.ins_h=(mt.ins_h<<mt.hash_shift^mt.window[q+U-1])&mt.hash_mask,mt.prev[q&mt.w_mask]=mt.head[mt.ins_h],mt.head[mt.ins_h]=q,q++,--j;);mt.strstart=q,mt.lookahead=U-1,It(mt)}return mt.strstart+=mt.lookahead,mt.block_start=mt.strstart,mt.insert=mt.lookahead,mt.lookahead=0,mt.match_length=mt.prev_length=U-1,mt.match_available=0,C.next_in=_t,C.input=nt,C.avail_in=At,mt.wrap=J,v},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,i,r){i.exports=function(a,o){var u,h,f,m,p,b,v,w,x,_,A,T,M,N,R,B,z,G,U,et,ut,H,it,D,rt;u=a.state,h=a.next_in,D=a.input,f=h+(a.avail_in-5),m=a.next_out,rt=a.output,p=m-(o-a.avail_out),b=m+(a.avail_out-257),v=u.dmax,w=u.wsize,x=u.whave,_=u.wnext,A=u.window,T=u.hold,M=u.bits,N=u.lencode,R=u.distcode,B=(1<<u.lenbits)-1,z=(1<<u.distbits)-1;t:do{M<15&&(T+=D[h++]<<M,M+=8,T+=D[h++]<<M,M+=8),G=N[T&B];e:for(;;){if(T>>>=U=G>>>24,M-=U,(U=G>>>16&255)===0)rt[m++]=65535&G;else{if(!(16&U)){if((64&U)==0){G=N[(65535&G)+(T&(1<<U)-1)];continue e}if(32&U){u.mode=12;break t}a.msg="invalid literal/length code",u.mode=30;break t}et=65535&G,(U&=15)&&(M<U&&(T+=D[h++]<<M,M+=8),et+=T&(1<<U)-1,T>>>=U,M-=U),M<15&&(T+=D[h++]<<M,M+=8,T+=D[h++]<<M,M+=8),G=R[T&z];i:for(;;){if(T>>>=U=G>>>24,M-=U,!(16&(U=G>>>16&255))){if((64&U)==0){G=R[(65535&G)+(T&(1<<U)-1)];continue i}a.msg="invalid distance code",u.mode=30;break t}if(ut=65535&G,M<(U&=15)&&(T+=D[h++]<<M,(M+=8)<U&&(T+=D[h++]<<M,M+=8)),v<(ut+=T&(1<<U)-1)){a.msg="invalid distance too far back",u.mode=30;break t}if(T>>>=U,M-=U,(U=m-p)<ut){if(x<(U=ut-U)&&u.sane){a.msg="invalid distance too far back",u.mode=30;break t}if(it=A,(H=0)===_){if(H+=w-U,U<et){for(et-=U;rt[m++]=A[H++],--U;);H=m-ut,it=rt}}else if(_<U){if(H+=w+_-U,(U-=_)<et){for(et-=U;rt[m++]=A[H++],--U;);if(H=0,_<et){for(et-=U=_;rt[m++]=A[H++],--U;);H=m-ut,it=rt}}}else if(H+=_-U,U<et){for(et-=U;rt[m++]=A[H++],--U;);H=m-ut,it=rt}for(;2<et;)rt[m++]=it[H++],rt[m++]=it[H++],rt[m++]=it[H++],et-=3;et&&(rt[m++]=it[H++],1<et&&(rt[m++]=it[H++]))}else{for(H=m-ut;rt[m++]=rt[H++],rt[m++]=rt[H++],rt[m++]=rt[H++],2<(et-=3););et&&(rt[m++]=rt[H++],1<et&&(rt[m++]=rt[H++]))}break}}break}}while(h<f&&m<b);h-=et=M>>3,T&=(1<<(M-=et<<3))-1,a.next_in=h,a.next_out=m,a.avail_in=h<f?f-h+5:5-(h-f),a.avail_out=m<b?b-m+257:257-(m-b),u.hold=T,u.bits=M}},{}],49:[function(e,i,r){var a=e("../utils/common"),o=e("./adler32"),u=e("./crc32"),h=e("./inffast"),f=e("./inftrees"),m=1,p=2,b=0,v=-2,w=1,x=852,_=592;function A(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(H){var it;return H&&H.state?(it=H.state,H.total_in=H.total_out=it.total=0,H.msg="",it.wrap&&(H.adler=1&it.wrap),it.mode=w,it.last=0,it.havedict=0,it.dmax=32768,it.head=null,it.hold=0,it.bits=0,it.lencode=it.lendyn=new a.Buf32(x),it.distcode=it.distdyn=new a.Buf32(_),it.sane=1,it.back=-1,b):v}function N(H){var it;return H&&H.state?((it=H.state).wsize=0,it.whave=0,it.wnext=0,M(H)):v}function R(H,it){var D,rt;return H&&H.state?(rt=H.state,it<0?(D=0,it=-it):(D=1+(it>>4),it<48&&(it&=15)),it&&(it<8||15<it)?v:(rt.window!==null&&rt.wbits!==it&&(rt.window=null),rt.wrap=D,rt.wbits=it,N(H))):v}function B(H,it){var D,rt;return H?(rt=new T,(H.state=rt).window=null,(D=R(H,it))!==b&&(H.state=null),D):v}var z,G,U=!0;function et(H){if(U){var it;for(z=new a.Buf32(512),G=new a.Buf32(32),it=0;it<144;)H.lens[it++]=8;for(;it<256;)H.lens[it++]=9;for(;it<280;)H.lens[it++]=7;for(;it<288;)H.lens[it++]=8;for(f(m,H.lens,0,288,z,0,H.work,{bits:9}),it=0;it<32;)H.lens[it++]=5;f(p,H.lens,0,32,G,0,H.work,{bits:5}),U=!1}H.lencode=z,H.lenbits=9,H.distcode=G,H.distbits=5}function ut(H,it,D,rt){var V,K=H.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new a.Buf8(K.wsize)),rt>=K.wsize?(a.arraySet(K.window,it,D-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(rt<(V=K.wsize-K.wnext)&&(V=rt),a.arraySet(K.window,it,D-rt,V,K.wnext),(rt-=V)?(a.arraySet(K.window,it,D-rt,rt,0),K.wnext=rt,K.whave=K.wsize):(K.wnext+=V,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=V))),0}r.inflateReset=N,r.inflateReset2=R,r.inflateResetKeep=M,r.inflateInit=function(H){return B(H,15)},r.inflateInit2=B,r.inflate=function(H,it){var D,rt,V,K,yt,pt,Tt,L,P,ot,ht,gt,It,Lt,jt,Gt,xe,we,ti,ui,C,ft,mt,q,j=0,J=new a.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return v;(D=H.state).mode===12&&(D.mode=13),yt=H.next_out,V=H.output,Tt=H.avail_out,K=H.next_in,rt=H.input,pt=H.avail_in,L=D.hold,P=D.bits,ot=pt,ht=Tt,ft=b;t:for(;;)switch(D.mode){case w:if(D.wrap===0){D.mode=13;break}for(;P<16;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if(2&D.wrap&&L===35615){J[D.check=0]=255&L,J[1]=L>>>8&255,D.check=u(D.check,J,2,0),P=L=0,D.mode=2;break}if(D.flags=0,D.head&&(D.head.done=!1),!(1&D.wrap)||(((255&L)<<8)+(L>>8))%31){H.msg="incorrect header check",D.mode=30;break}if((15&L)!=8){H.msg="unknown compression method",D.mode=30;break}if(P-=4,C=8+(15&(L>>>=4)),D.wbits===0)D.wbits=C;else if(C>D.wbits){H.msg="invalid window size",D.mode=30;break}D.dmax=1<<C,H.adler=D.check=1,D.mode=512&L?10:12,P=L=0;break;case 2:for(;P<16;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if(D.flags=L,(255&D.flags)!=8){H.msg="unknown compression method",D.mode=30;break}if(57344&D.flags){H.msg="unknown header flags set",D.mode=30;break}D.head&&(D.head.text=L>>8&1),512&D.flags&&(J[0]=255&L,J[1]=L>>>8&255,D.check=u(D.check,J,2,0)),P=L=0,D.mode=3;case 3:for(;P<32;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}D.head&&(D.head.time=L),512&D.flags&&(J[0]=255&L,J[1]=L>>>8&255,J[2]=L>>>16&255,J[3]=L>>>24&255,D.check=u(D.check,J,4,0)),P=L=0,D.mode=4;case 4:for(;P<16;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}D.head&&(D.head.xflags=255&L,D.head.os=L>>8),512&D.flags&&(J[0]=255&L,J[1]=L>>>8&255,D.check=u(D.check,J,2,0)),P=L=0,D.mode=5;case 5:if(1024&D.flags){for(;P<16;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}D.length=L,D.head&&(D.head.extra_len=L),512&D.flags&&(J[0]=255&L,J[1]=L>>>8&255,D.check=u(D.check,J,2,0)),P=L=0}else D.head&&(D.head.extra=null);D.mode=6;case 6:if(1024&D.flags&&(pt<(gt=D.length)&&(gt=pt),gt&&(D.head&&(C=D.head.extra_len-D.length,D.head.extra||(D.head.extra=new Array(D.head.extra_len)),a.arraySet(D.head.extra,rt,K,gt,C)),512&D.flags&&(D.check=u(D.check,rt,gt,K)),pt-=gt,K+=gt,D.length-=gt),D.length))break t;D.length=0,D.mode=7;case 7:if(2048&D.flags){if(pt===0)break t;for(gt=0;C=rt[K+gt++],D.head&&C&&D.length<65536&&(D.head.name+=String.fromCharCode(C)),C&&gt<pt;);if(512&D.flags&&(D.check=u(D.check,rt,gt,K)),pt-=gt,K+=gt,C)break t}else D.head&&(D.head.name=null);D.length=0,D.mode=8;case 8:if(4096&D.flags){if(pt===0)break t;for(gt=0;C=rt[K+gt++],D.head&&C&&D.length<65536&&(D.head.comment+=String.fromCharCode(C)),C&&gt<pt;);if(512&D.flags&&(D.check=u(D.check,rt,gt,K)),pt-=gt,K+=gt,C)break t}else D.head&&(D.head.comment=null);D.mode=9;case 9:if(512&D.flags){for(;P<16;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if(L!==(65535&D.check)){H.msg="header crc mismatch",D.mode=30;break}P=L=0}D.head&&(D.head.hcrc=D.flags>>9&1,D.head.done=!0),H.adler=D.check=0,D.mode=12;break;case 10:for(;P<32;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}H.adler=D.check=A(L),P=L=0,D.mode=11;case 11:if(D.havedict===0)return H.next_out=yt,H.avail_out=Tt,H.next_in=K,H.avail_in=pt,D.hold=L,D.bits=P,2;H.adler=D.check=1,D.mode=12;case 12:if(it===5||it===6)break t;case 13:if(D.last){L>>>=7&P,P-=7&P,D.mode=27;break}for(;P<3;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}switch(D.last=1&L,P-=1,3&(L>>>=1)){case 0:D.mode=14;break;case 1:if(et(D),D.mode=20,it!==6)break;L>>>=2,P-=2;break t;case 2:D.mode=17;break;case 3:H.msg="invalid block type",D.mode=30}L>>>=2,P-=2;break;case 14:for(L>>>=7&P,P-=7&P;P<32;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if((65535&L)!=(L>>>16^65535)){H.msg="invalid stored block lengths",D.mode=30;break}if(D.length=65535&L,P=L=0,D.mode=15,it===6)break t;case 15:D.mode=16;case 16:if(gt=D.length){if(pt<gt&&(gt=pt),Tt<gt&&(gt=Tt),gt===0)break t;a.arraySet(V,rt,K,gt,yt),pt-=gt,K+=gt,Tt-=gt,yt+=gt,D.length-=gt;break}D.mode=12;break;case 17:for(;P<14;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if(D.nlen=257+(31&L),L>>>=5,P-=5,D.ndist=1+(31&L),L>>>=5,P-=5,D.ncode=4+(15&L),L>>>=4,P-=4,286<D.nlen||30<D.ndist){H.msg="too many length or distance symbols",D.mode=30;break}D.have=0,D.mode=18;case 18:for(;D.have<D.ncode;){for(;P<3;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}D.lens[At[D.have++]]=7&L,L>>>=3,P-=3}for(;D.have<19;)D.lens[At[D.have++]]=0;if(D.lencode=D.lendyn,D.lenbits=7,mt={bits:D.lenbits},ft=f(0,D.lens,0,19,D.lencode,0,D.work,mt),D.lenbits=mt.bits,ft){H.msg="invalid code lengths set",D.mode=30;break}D.have=0,D.mode=19;case 19:for(;D.have<D.nlen+D.ndist;){for(;Gt=(j=D.lencode[L&(1<<D.lenbits)-1])>>>16&255,xe=65535&j,!((jt=j>>>24)<=P);){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if(xe<16)L>>>=jt,P-=jt,D.lens[D.have++]=xe;else{if(xe===16){for(q=jt+2;P<q;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if(L>>>=jt,P-=jt,D.have===0){H.msg="invalid bit length repeat",D.mode=30;break}C=D.lens[D.have-1],gt=3+(3&L),L>>>=2,P-=2}else if(xe===17){for(q=jt+3;P<q;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}P-=jt,C=0,gt=3+(7&(L>>>=jt)),L>>>=3,P-=3}else{for(q=jt+7;P<q;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}P-=jt,C=0,gt=11+(127&(L>>>=jt)),L>>>=7,P-=7}if(D.have+gt>D.nlen+D.ndist){H.msg="invalid bit length repeat",D.mode=30;break}for(;gt--;)D.lens[D.have++]=C}}if(D.mode===30)break;if(D.lens[256]===0){H.msg="invalid code -- missing end-of-block",D.mode=30;break}if(D.lenbits=9,mt={bits:D.lenbits},ft=f(m,D.lens,0,D.nlen,D.lencode,0,D.work,mt),D.lenbits=mt.bits,ft){H.msg="invalid literal/lengths set",D.mode=30;break}if(D.distbits=6,D.distcode=D.distdyn,mt={bits:D.distbits},ft=f(p,D.lens,D.nlen,D.ndist,D.distcode,0,D.work,mt),D.distbits=mt.bits,ft){H.msg="invalid distances set",D.mode=30;break}if(D.mode=20,it===6)break t;case 20:D.mode=21;case 21:if(6<=pt&&258<=Tt){H.next_out=yt,H.avail_out=Tt,H.next_in=K,H.avail_in=pt,D.hold=L,D.bits=P,h(H,ht),yt=H.next_out,V=H.output,Tt=H.avail_out,K=H.next_in,rt=H.input,pt=H.avail_in,L=D.hold,P=D.bits,D.mode===12&&(D.back=-1);break}for(D.back=0;Gt=(j=D.lencode[L&(1<<D.lenbits)-1])>>>16&255,xe=65535&j,!((jt=j>>>24)<=P);){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if(Gt&&(240&Gt)==0){for(we=jt,ti=Gt,ui=xe;Gt=(j=D.lencode[ui+((L&(1<<we+ti)-1)>>we)])>>>16&255,xe=65535&j,!(we+(jt=j>>>24)<=P);){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}L>>>=we,P-=we,D.back+=we}if(L>>>=jt,P-=jt,D.back+=jt,D.length=xe,Gt===0){D.mode=26;break}if(32&Gt){D.back=-1,D.mode=12;break}if(64&Gt){H.msg="invalid literal/length code",D.mode=30;break}D.extra=15&Gt,D.mode=22;case 22:if(D.extra){for(q=D.extra;P<q;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}D.length+=L&(1<<D.extra)-1,L>>>=D.extra,P-=D.extra,D.back+=D.extra}D.was=D.length,D.mode=23;case 23:for(;Gt=(j=D.distcode[L&(1<<D.distbits)-1])>>>16&255,xe=65535&j,!((jt=j>>>24)<=P);){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if((240&Gt)==0){for(we=jt,ti=Gt,ui=xe;Gt=(j=D.distcode[ui+((L&(1<<we+ti)-1)>>we)])>>>16&255,xe=65535&j,!(we+(jt=j>>>24)<=P);){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}L>>>=we,P-=we,D.back+=we}if(L>>>=jt,P-=jt,D.back+=jt,64&Gt){H.msg="invalid distance code",D.mode=30;break}D.offset=xe,D.extra=15&Gt,D.mode=24;case 24:if(D.extra){for(q=D.extra;P<q;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}D.offset+=L&(1<<D.extra)-1,L>>>=D.extra,P-=D.extra,D.back+=D.extra}if(D.offset>D.dmax){H.msg="invalid distance too far back",D.mode=30;break}D.mode=25;case 25:if(Tt===0)break t;if(gt=ht-Tt,D.offset>gt){if((gt=D.offset-gt)>D.whave&&D.sane){H.msg="invalid distance too far back",D.mode=30;break}It=gt>D.wnext?(gt-=D.wnext,D.wsize-gt):D.wnext-gt,gt>D.length&&(gt=D.length),Lt=D.window}else Lt=V,It=yt-D.offset,gt=D.length;for(Tt<gt&&(gt=Tt),Tt-=gt,D.length-=gt;V[yt++]=Lt[It++],--gt;);D.length===0&&(D.mode=21);break;case 26:if(Tt===0)break t;V[yt++]=D.length,Tt--,D.mode=21;break;case 27:if(D.wrap){for(;P<32;){if(pt===0)break t;pt--,L|=rt[K++]<<P,P+=8}if(ht-=Tt,H.total_out+=ht,D.total+=ht,ht&&(H.adler=D.check=D.flags?u(D.check,V,ht,yt-ht):o(D.check,V,ht,yt-ht)),ht=Tt,(D.flags?L:A(L))!==D.check){H.msg="incorrect data check",D.mode=30;break}P=L=0}D.mode=28;case 28:if(D.wrap&&D.flags){for(;P<32;){if(pt===0)break t;pt--,L+=rt[K++]<<P,P+=8}if(L!==(4294967295&D.total)){H.msg="incorrect length check",D.mode=30;break}P=L=0}D.mode=29;case 29:ft=1;break t;case 30:ft=-3;break t;case 31:return-4;case 32:default:return v}return H.next_out=yt,H.avail_out=Tt,H.next_in=K,H.avail_in=pt,D.hold=L,D.bits=P,(D.wsize||ht!==H.avail_out&&D.mode<30&&(D.mode<27||it!==4))&&ut(H,H.output,H.next_out,ht-H.avail_out)?(D.mode=31,-4):(ot-=H.avail_in,ht-=H.avail_out,H.total_in+=ot,H.total_out+=ht,D.total+=ht,D.wrap&&ht&&(H.adler=D.check=D.flags?u(D.check,V,ht,H.next_out-ht):o(D.check,V,ht,H.next_out-ht)),H.data_type=D.bits+(D.last?64:0)+(D.mode===12?128:0)+(D.mode===20||D.mode===15?256:0),(ot==0&&ht===0||it===4)&&ft===b&&(ft=-5),ft)},r.inflateEnd=function(H){if(!H||!H.state)return v;var it=H.state;return it.window&&(it.window=null),H.state=null,b},r.inflateGetHeader=function(H,it){var D;return H&&H.state?(2&(D=H.state).wrap)==0?v:((D.head=it).done=!1,b):v},r.inflateSetDictionary=function(H,it){var D,rt=it.length;return H&&H.state?(D=H.state).wrap!==0&&D.mode!==11?v:D.mode===11&&o(1,it,rt,0)!==D.check?-3:ut(H,it,rt,rt)?(D.mode=31,-4):(D.havedict=1,b):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,i,r){var a=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(m,p,b,v,w,x,_,A){var T,M,N,R,B,z,G,U,et,ut=A.bits,H=0,it=0,D=0,rt=0,V=0,K=0,yt=0,pt=0,Tt=0,L=0,P=null,ot=0,ht=new a.Buf16(16),gt=new a.Buf16(16),It=null,Lt=0;for(H=0;H<=15;H++)ht[H]=0;for(it=0;it<v;it++)ht[p[b+it]]++;for(V=ut,rt=15;1<=rt&&ht[rt]===0;rt--);if(rt<V&&(V=rt),rt===0)return w[x++]=20971520,w[x++]=20971520,A.bits=1,0;for(D=1;D<rt&&ht[D]===0;D++);for(V<D&&(V=D),H=pt=1;H<=15;H++)if(pt<<=1,(pt-=ht[H])<0)return-1;if(0<pt&&(m===0||rt!==1))return-1;for(gt[1]=0,H=1;H<15;H++)gt[H+1]=gt[H]+ht[H];for(it=0;it<v;it++)p[b+it]!==0&&(_[gt[p[b+it]]++]=it);if(z=m===0?(P=It=_,19):m===1?(P=o,ot-=257,It=u,Lt-=257,256):(P=h,It=f,-1),H=D,B=x,yt=it=L=0,N=-1,R=(Tt=1<<(K=V))-1,m===1&&852<Tt||m===2&&592<Tt)return 1;for(;;){for(G=H-yt,et=_[it]<z?(U=0,_[it]):_[it]>z?(U=It[Lt+_[it]],P[ot+_[it]]):(U=96,0),T=1<<H-yt,D=M=1<<K;w[B+(L>>yt)+(M-=T)]=G<<24|U<<16|et|0,M!==0;);for(T=1<<H-1;L&T;)T>>=1;if(T!==0?(L&=T-1,L+=T):L=0,it++,--ht[H]==0){if(H===rt)break;H=p[b+_[it]]}if(V<H&&(L&R)!==N){for(yt===0&&(yt=V),B+=D,pt=1<<(K=H-yt);K+yt<rt&&!((pt-=ht[K+yt])<=0);)K++,pt<<=1;if(Tt+=1<<K,m===1&&852<Tt||m===2&&592<Tt)return 1;w[N=L&R]=V<<24|K<<16|B-x|0}}return L!==0&&(w[B+L]=H-yt<<24|64<<16|0),A.bits=V,0}},{"../utils/common":41}],51:[function(e,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,i,r){var a=e("../utils/common"),o=0,u=1;function h(j){for(var J=j.length;0<=--J;)j[J]=0}var f=0,m=29,p=256,b=p+1+m,v=30,w=19,x=2*b+1,_=15,A=16,T=7,M=256,N=16,R=17,B=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],et=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ut=new Array(2*(b+2));h(ut);var H=new Array(2*v);h(H);var it=new Array(512);h(it);var D=new Array(256);h(D);var rt=new Array(m);h(rt);var V,K,yt,pt=new Array(v);function Tt(j,J,At,_t,nt){this.static_tree=j,this.extra_bits=J,this.extra_base=At,this.elems=_t,this.max_length=nt,this.has_stree=j&&j.length}function L(j,J){this.dyn_tree=j,this.max_code=0,this.stat_desc=J}function P(j){return j<256?it[j]:it[256+(j>>>7)]}function ot(j,J){j.pending_buf[j.pending++]=255&J,j.pending_buf[j.pending++]=J>>>8&255}function ht(j,J,At){j.bi_valid>A-At?(j.bi_buf|=J<<j.bi_valid&65535,ot(j,j.bi_buf),j.bi_buf=J>>A-j.bi_valid,j.bi_valid+=At-A):(j.bi_buf|=J<<j.bi_valid&65535,j.bi_valid+=At)}function gt(j,J,At){ht(j,At[2*J],At[2*J+1])}function It(j,J){for(var At=0;At|=1&j,j>>>=1,At<<=1,0<--J;);return At>>>1}function Lt(j,J,At){var _t,nt,Dt=new Array(_+1),zt=0;for(_t=1;_t<=_;_t++)Dt[_t]=zt=zt+At[_t-1]<<1;for(nt=0;nt<=J;nt++){var Nt=j[2*nt+1];Nt!==0&&(j[2*nt]=It(Dt[Nt]++,Nt))}}function jt(j){var J;for(J=0;J<b;J++)j.dyn_ltree[2*J]=0;for(J=0;J<v;J++)j.dyn_dtree[2*J]=0;for(J=0;J<w;J++)j.bl_tree[2*J]=0;j.dyn_ltree[2*M]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function Gt(j){8<j.bi_valid?ot(j,j.bi_buf):0<j.bi_valid&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function xe(j,J,At,_t){var nt=2*J,Dt=2*At;return j[nt]<j[Dt]||j[nt]===j[Dt]&&_t[J]<=_t[At]}function we(j,J,At){for(var _t=j.heap[At],nt=At<<1;nt<=j.heap_len&&(nt<j.heap_len&&xe(J,j.heap[nt+1],j.heap[nt],j.depth)&&nt++,!xe(J,_t,j.heap[nt],j.depth));)j.heap[At]=j.heap[nt],At=nt,nt<<=1;j.heap[At]=_t}function ti(j,J,At){var _t,nt,Dt,zt,Nt=0;if(j.last_lit!==0)for(;_t=j.pending_buf[j.d_buf+2*Nt]<<8|j.pending_buf[j.d_buf+2*Nt+1],nt=j.pending_buf[j.l_buf+Nt],Nt++,_t===0?gt(j,nt,J):(gt(j,(Dt=D[nt])+p+1,J),(zt=z[Dt])!==0&&ht(j,nt-=rt[Dt],zt),gt(j,Dt=P(--_t),At),(zt=G[Dt])!==0&&ht(j,_t-=pt[Dt],zt)),Nt<j.last_lit;);gt(j,M,J)}function ui(j,J){var At,_t,nt,Dt=J.dyn_tree,zt=J.stat_desc.static_tree,Nt=J.stat_desc.has_stree,Wt=J.stat_desc.elems,De=-1;for(j.heap_len=0,j.heap_max=x,At=0;At<Wt;At++)Dt[2*At]!==0?(j.heap[++j.heap_len]=De=At,j.depth[At]=0):Dt[2*At+1]=0;for(;j.heap_len<2;)Dt[2*(nt=j.heap[++j.heap_len]=De<2?++De:0)]=1,j.depth[nt]=0,j.opt_len--,Nt&&(j.static_len-=zt[2*nt+1]);for(J.max_code=De,At=j.heap_len>>1;1<=At;At--)we(j,Dt,At);for(nt=Wt;At=j.heap[1],j.heap[1]=j.heap[j.heap_len--],we(j,Dt,1),_t=j.heap[1],j.heap[--j.heap_max]=At,j.heap[--j.heap_max]=_t,Dt[2*nt]=Dt[2*At]+Dt[2*_t],j.depth[nt]=(j.depth[At]>=j.depth[_t]?j.depth[At]:j.depth[_t])+1,Dt[2*At+1]=Dt[2*_t+1]=nt,j.heap[1]=nt++,we(j,Dt,1),2<=j.heap_len;);j.heap[--j.heap_max]=j.heap[1],(function(ue,Ii){var Gn,Wi,vr,ze,pi,Qi,Ye=Ii.dyn_tree,da=Ii.max_code,Ns=Ii.stat_desc.static_tree,go=Ii.stat_desc.has_stree,Kr=Ii.stat_desc.extra_bits,yr=Ii.stat_desc.extra_base,En=Ii.stat_desc.max_length,Ji=0;for(ze=0;ze<=_;ze++)ue.bl_count[ze]=0;for(Ye[2*ue.heap[ue.heap_max]+1]=0,Gn=ue.heap_max+1;Gn<x;Gn++)En<(ze=Ye[2*Ye[2*(Wi=ue.heap[Gn])+1]+1]+1)&&(ze=En,Ji++),Ye[2*Wi+1]=ze,da<Wi||(ue.bl_count[ze]++,pi=0,yr<=Wi&&(pi=Kr[Wi-yr]),Qi=Ye[2*Wi],ue.opt_len+=Qi*(ze+pi),go&&(ue.static_len+=Qi*(Ns[2*Wi+1]+pi)));if(Ji!==0){do{for(ze=En-1;ue.bl_count[ze]===0;)ze--;ue.bl_count[ze]--,ue.bl_count[ze+1]+=2,ue.bl_count[En]--,Ji-=2}while(0<Ji);for(ze=En;ze!==0;ze--)for(Wi=ue.bl_count[ze];Wi!==0;)da<(vr=ue.heap[--Gn])||(Ye[2*vr+1]!==ze&&(ue.opt_len+=(ze-Ye[2*vr+1])*Ye[2*vr],Ye[2*vr+1]=ze),Wi--)}})(j,J),Lt(Dt,De,j.bl_count)}function C(j,J,At){var _t,nt,Dt=-1,zt=J[1],Nt=0,Wt=7,De=4;for(zt===0&&(Wt=138,De=3),J[2*(At+1)+1]=65535,_t=0;_t<=At;_t++)nt=zt,zt=J[2*(_t+1)+1],++Nt<Wt&&nt===zt||(Nt<De?j.bl_tree[2*nt]+=Nt:nt!==0?(nt!==Dt&&j.bl_tree[2*nt]++,j.bl_tree[2*N]++):Nt<=10?j.bl_tree[2*R]++:j.bl_tree[2*B]++,Dt=nt,De=(Nt=0)===zt?(Wt=138,3):nt===zt?(Wt=6,3):(Wt=7,4))}function ft(j,J,At){var _t,nt,Dt=-1,zt=J[1],Nt=0,Wt=7,De=4;for(zt===0&&(Wt=138,De=3),_t=0;_t<=At;_t++)if(nt=zt,zt=J[2*(_t+1)+1],!(++Nt<Wt&&nt===zt)){if(Nt<De)for(;gt(j,nt,j.bl_tree),--Nt!=0;);else nt!==0?(nt!==Dt&&(gt(j,nt,j.bl_tree),Nt--),gt(j,N,j.bl_tree),ht(j,Nt-3,2)):Nt<=10?(gt(j,R,j.bl_tree),ht(j,Nt-3,3)):(gt(j,B,j.bl_tree),ht(j,Nt-11,7));Dt=nt,De=(Nt=0)===zt?(Wt=138,3):nt===zt?(Wt=6,3):(Wt=7,4)}}h(pt);var mt=!1;function q(j,J,At,_t){ht(j,(f<<1)+(_t?1:0),3),(function(nt,Dt,zt,Nt){Gt(nt),ot(nt,zt),ot(nt,~zt),a.arraySet(nt.pending_buf,nt.window,Dt,zt,nt.pending),nt.pending+=zt})(j,J,At)}r._tr_init=function(j){mt||((function(){var J,At,_t,nt,Dt,zt=new Array(_+1);for(nt=_t=0;nt<m-1;nt++)for(rt[nt]=_t,J=0;J<1<<z[nt];J++)D[_t++]=nt;for(D[_t-1]=nt,nt=Dt=0;nt<16;nt++)for(pt[nt]=Dt,J=0;J<1<<G[nt];J++)it[Dt++]=nt;for(Dt>>=7;nt<v;nt++)for(pt[nt]=Dt<<7,J=0;J<1<<G[nt]-7;J++)it[256+Dt++]=nt;for(At=0;At<=_;At++)zt[At]=0;for(J=0;J<=143;)ut[2*J+1]=8,J++,zt[8]++;for(;J<=255;)ut[2*J+1]=9,J++,zt[9]++;for(;J<=279;)ut[2*J+1]=7,J++,zt[7]++;for(;J<=287;)ut[2*J+1]=8,J++,zt[8]++;for(Lt(ut,b+1,zt),J=0;J<v;J++)H[2*J+1]=5,H[2*J]=It(J,5);V=new Tt(ut,z,p+1,b,_),K=new Tt(H,G,0,v,_),yt=new Tt(new Array(0),U,0,w,T)})(),mt=!0),j.l_desc=new L(j.dyn_ltree,V),j.d_desc=new L(j.dyn_dtree,K),j.bl_desc=new L(j.bl_tree,yt),j.bi_buf=0,j.bi_valid=0,jt(j)},r._tr_stored_block=q,r._tr_flush_block=function(j,J,At,_t){var nt,Dt,zt=0;0<j.level?(j.strm.data_type===2&&(j.strm.data_type=(function(Nt){var Wt,De=4093624447;for(Wt=0;Wt<=31;Wt++,De>>>=1)if(1&De&&Nt.dyn_ltree[2*Wt]!==0)return o;if(Nt.dyn_ltree[18]!==0||Nt.dyn_ltree[20]!==0||Nt.dyn_ltree[26]!==0)return u;for(Wt=32;Wt<p;Wt++)if(Nt.dyn_ltree[2*Wt]!==0)return u;return o})(j)),ui(j,j.l_desc),ui(j,j.d_desc),zt=(function(Nt){var Wt;for(C(Nt,Nt.dyn_ltree,Nt.l_desc.max_code),C(Nt,Nt.dyn_dtree,Nt.d_desc.max_code),ui(Nt,Nt.bl_desc),Wt=w-1;3<=Wt&&Nt.bl_tree[2*et[Wt]+1]===0;Wt--);return Nt.opt_len+=3*(Wt+1)+5+5+4,Wt})(j),nt=j.opt_len+3+7>>>3,(Dt=j.static_len+3+7>>>3)<=nt&&(nt=Dt)):nt=Dt=At+5,At+4<=nt&&J!==-1?q(j,J,At,_t):j.strategy===4||Dt===nt?(ht(j,2+(_t?1:0),3),ti(j,ut,H)):(ht(j,4+(_t?1:0),3),(function(Nt,Wt,De,ue){var Ii;for(ht(Nt,Wt-257,5),ht(Nt,De-1,5),ht(Nt,ue-4,4),Ii=0;Ii<ue;Ii++)ht(Nt,Nt.bl_tree[2*et[Ii]+1],3);ft(Nt,Nt.dyn_ltree,Wt-1),ft(Nt,Nt.dyn_dtree,De-1)})(j,j.l_desc.max_code+1,j.d_desc.max_code+1,zt+1),ti(j,j.dyn_ltree,j.dyn_dtree)),jt(j),_t&&Gt(j)},r._tr_tally=function(j,J,At){return j.pending_buf[j.d_buf+2*j.last_lit]=J>>>8&255,j.pending_buf[j.d_buf+2*j.last_lit+1]=255&J,j.pending_buf[j.l_buf+j.last_lit]=255&At,j.last_lit++,J===0?j.dyn_ltree[2*At]++:(j.matches++,J--,j.dyn_ltree[2*(D[At]+p+1)]++,j.dyn_dtree[2*P(J)]++),j.last_lit===j.lit_bufsize-1},r._tr_align=function(j){ht(j,2,3),gt(j,M,ut),(function(J){J.bi_valid===16?(ot(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)})(j)}},{"../utils/common":41}],53:[function(e,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,i,r){(function(a){(function(o,u){if(!o.setImmediate){var h,f,m,p,b=1,v={},w=!1,x=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,h={}.toString.call(o.process)==="[object process]"?function(N){process.nextTick(function(){T(N)})}:(function(){if(o.postMessage&&!o.importScripts){var N=!0,R=o.onmessage;return o.onmessage=function(){N=!1},o.postMessage("","*"),o.onmessage=R,N}})()?(p="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",M,!1):o.attachEvent("onmessage",M),function(N){o.postMessage(p+N,"*")}):o.MessageChannel?((m=new MessageChannel).port1.onmessage=function(N){T(N.data)},function(N){m.port2.postMessage(N)}):x&&"onreadystatechange"in x.createElement("script")?(f=x.documentElement,function(N){var R=x.createElement("script");R.onreadystatechange=function(){T(N),R.onreadystatechange=null,f.removeChild(R),R=null},f.appendChild(R)}):function(N){setTimeout(T,0,N)},_.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var R=new Array(arguments.length-1),B=0;B<R.length;B++)R[B]=arguments[B+1];var z={callback:N,args:R};return v[b]=z,h(b),b++},_.clearImmediate=A}function A(N){delete v[N]}function T(N){if(w)setTimeout(T,0,N);else{var R=v[N];if(R){w=!0;try{(function(B){var z=B.callback,G=B.args;switch(G.length){case 0:z();break;case 1:z(G[0]);break;case 2:z(G[0],G[1]);break;case 3:z(G[0],G[1],G[2]);break;default:z.apply(u,G)}})(R)}finally{A(N),w=!1}}}}function M(N){N.source===o&&typeof N.data=="string"&&N.data.indexOf(p)===0&&T(+N.data.slice(p.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof d0<"u"?d0:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Fd)),Fd.exports}var D7=R7();const N7=$y(D7),O7={title_slide:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');
        :root {
            --bg-color-dark: #0f172a; --text-color-dark: #f1f5f9; --accent-color-dark: #38bdf8; --sub-text-color-dark: #94a3b8;
            --bg-color-light: #F8FAFC; --text-color-light: #1E293B; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 80px; 
            background: var(--bg-color); color: var(--text-color); 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: flex-start; /* 左揃え */
            text-align: left; 
        }
        h1 { font-size: 80px; font-weight: 900; margin: 0; line-height: 1.3; }
        p { font-size: 28px; margin: 24px 0 0; color: var(--sub-text-color); font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
        <p>{summary}</p>
    </div>
</body>
</html>`,agenda:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        ol { padding-left: 50px; margin: 0; }
        li { font-size: 32px; color: var(--sub-text-color); line-height: 2.0; /* 行間を広めに */ margin-bottom: 15px; font-weight: 400; }
        li::marker { color: var(--accent-color); font-weight: 700; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <ol>{agenda_items_html}</ol>
    </div>
</body>
</html>`,section_header:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@900&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #f1f5f9; --accent-color-dark: #38bdf8;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 80px; 
            background: var(--bg-color); 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: flex-start; /* 左揃え */
        }
        h1 { 
            font-size: 96px; font-weight: 900; color: var(--text-color); 
            margin: 0; line-height: 1.2; 
            border-left: 10px solid var(--accent-color); /* アクセントの縦線 */
            padding-left: 40px; 
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
    </div>
</body>
</html>`,content_basic:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { padding-left: 20px; overflow: hidden; /* ★追加: 万が一はみ出た場合にレイアウト崩れを防ぐ */}
        ul { 
            padding-left: 0; /* ★修正: 標準インデントをリセット */
            margin: 0; 
            list-style-type: none; /* ★修正: 標準マーカーを削除 */
        }
        li { 
            font-size: 22px; /* ★修正: 24px -> 22px に変更 */
            color: var(--sub-text-color); 
            line-height: 1.7; /* ★修正: 1.8 -> 1.7 に変更 */
            margin-bottom: 12px; /* ★修正: 15px -> 12px に変更 */
            font-weight: 400; 
            white-space: pre-wrap;
            position: relative;
            padding-left: 1.5em;
        }
        li[data-level="0"]::before { /* ★修正: li::before から変更 (レベル0を明示) */
            content: '●';
            color: var(--accent-color);
            font-size: 0.8em;
            position: absolute;
            left: 0.2em;
            top: 0.15em;
        }
        li[data-level="1"]::before {
            content: '○';
            color: var(--accent-color); /* ★追加: 念のため色を指定 */
            font-size: 0.7em;
            position: absolute; /* ★追加: 念のため指定 */
            left: 0.25em;
            top: 0.2em;
        }
        li[data-level="2"]::before,
        li[data-level="3"]::before,
        li[data-level="4"]::before {
            content: '■';
            color: var(--accent-color); /* ★追加: 念のため色を指定 */
            font-size: 0.6em;
            position: absolute; /* ★追加: 念のため指定 */
            left: 0.3em;
            top: 0.3em;
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <ul>{items_html}</ul>
        </div>
    </div>
</body>
</html>`,content_with_diagram:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { display: grid; grid-template-columns: 40% 60%; gap: 40px; flex-grow: 1; align-items: center; }
        
        .content { 
            font-size: 22px; 
            line-height: 1.7; /* ★修正: 基準となる行間を 1.7 に設定 */
            color: var(--sub-text-color); 
            /* white-space: pre-wrap; */ /* ★削除: markedがpタグを生成するため不要 */
            font-weight: 400; 
            display: flex; 
            flex-direction: column; 
            justify-content: flex-start;
            /* ★追加: はみ出し防止 */
            height: 100%;
            overflow: hidden;
        }

        /* ▼▼▼ 修正（ここから追加） ▼▼▼ */
        /* marked.parse() が生成するタグのスタイルリセット */
        .content p {
            margin: 0 0 16px 0; /* 段落下のマージンを16pxに固定 */
            line-height: 1.7;
        }
        .content p:last-child {
            margin-bottom: 0; /* 最後の要素の余白を削除 */
        }
        .content ul {
            margin: 0 0 16px 0; /* 箇条書きブロックのマージン */
            padding-left: 1.5em; /* 箇条書きのインデント */
            list-style-type: none; /* デフォルトの黒丸を削除 */
        }
        .content li {
            margin: 0 0 12px 0; /* 項目間のマージン */
            line-height: 1.7;
            position: relative;
            padding-left: 0.5em;
        }
        .content li::before {
            content: '●'; /* content_basic と同じカスタムビュレット */
            color: var(--accent-color);
            font-size: 0.8em;
            position: absolute;
            left: -1.2em;
            top: 0.15em;
        }
        .content strong {
            font-weight: 700;
            color: var(--text-color); /* AIが強調した部分を目立たせる */
        }
        /* ▲▲▲ 修正（ここまで） ▲▲▲ */
        
        #infographic-slot { display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; }
        #infographic-slot svg {
            width: 100%; /* max-width から変更 */
            height: 100%; /* max-height から変更 */
            object-fit: contain; /* アスペクト比を維持 */
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <div class="content">{content}</div>
            <div id="infographic-slot">{infographic_svg}</div>
        </div>
    </div>
</body>
</html>`,three_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1; --card-bg-color-dark: #334155;
            --bg-color-light: #F8FAFC; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569; --card-bg-color-light: #FFFFFF;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); --card-bg-color: var(--card-bg-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: flex; justify-content: space-around; gap: 30px; align-items: stretch; }
        .point { 
            background: var(--card-bg-color); 
            border-radius: 8px; 
            padding: 25px; flex: 1; 
            border-top: 4px solid var(--accent-color); 
            display: flex; flex-direction: column; align-items: center; text-align: center; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.05); /* 薄い影 */
        }
        .point-icon { height: 120px; width: 100%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; color: var(--accent-color); }
        .point-icon svg {
            width: 80px;  /* SVGの幅を80pxに指定 */
            height: 80px; /* SVGの高さを80pxに指定 */
        }
        h2 { font-size: 26px; color: var(--text-color); margin: 0 0 15px; font-weight: 700; }
        p { font-size: 18px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_3_svg}</div>
                <h2>{point_3_title}</h2>
                <p>{point_3_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,vertical_steps:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #94a3b8;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .steps-container { position: relative; padding-left: 80px; }
        .timeline { position: absolute; left: 30px; top: 15px; bottom: 15px; width: 4px; background-color: var(--accent-color); opacity: 0.3; }
        .step { position: relative; margin-bottom: 25px; }
        .step-marker { position: absolute; left: -52px; top: 5px; width: 24px; height: 24px; background-color: var(--accent-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--bg-color-light); font-weight: 700; font-size: 14px; }
        body.theme-dark .step-marker { color: var(--bg-color-dark); }
        h2 { font-size: 28px; color: var(--text-color); margin: 0 0 8px; font-weight: 700; }
        p { font-size: 20px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="steps-container">
            <div class="timeline"></div>
            {items_html}
        </div>
    </div>
</body>
</html>`,comparison:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            /* ▼▼▼ 修正 ▼▼▼ (カード背景色を追加) */
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1; --card-bg-color-dark: #334155;
            --bg-color-light: #F8FAFC; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569; --card-bg-color-light: #FFFFFF;
            /* ▲▲▲ 修正 ▲▲▲ */
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); --card-bg-color: var(--card-bg-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        /* ▼▼▼ 修正 ▼▼▼ (Grid から Flex に変更) */
        .slide-body { 
            display: flex; /* grid から変更 */
            gap: 30px; /* 50px から変更 (4カラム時に備える) */
            flex-grow: 1; 
            align-items: stretch; /* 追加 */
        }
        .column { 
            padding: 20px; /* 0 から変更 */
            flex: 1; /* カラムが均等に広がるように */
            display: flex; 
            flex-direction: column; /* カラム内を縦に並べる */
            
            /* カードデザインを追加 */
            background: var(--card-bg-color);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-top: 4px solid var(--accent-color);
        }
        .column h2 { 
            font-size: 24px; /* 28px から変更 (4カラム時に備える) */
            color: var(--text-color); 
            margin: 0 0 20px; 
            font-weight: 700; 
            text-align: center; 
        }
        .column ul { 
            padding-left: 20px; /* 30px から変更 */
            margin: 0; 
            flex-grow: 1; /* リストが残りの高さを埋めるように */
        }
        .column li { 
            font-size: 18px; /* 20px から変更 */
            color: var(--sub-text-color); 
            line-height: 1.7; /* 1.8 から変更 */
            margin-bottom: 10px; /* 12px から変更 */
            font-weight: 400; 
            white-space: pre-wrap; 
        }
        /* ▲▲▲ 修正 ▲▲▲ */
        .column li::marker { color: var(--accent-color); font-size: 1.2em; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            {comparison_columns_html}
            </div>
    </div>
</body>
</html>`,summary_or_thankyou:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;900&display=swap');
        :root {
            --bg-color-dark: #0f172a; --text-color-dark: #f1f5f9; --accent-color-dark: #38bdf8; --sub-text-color-dark: #94a3b8;
            --bg-color-light: #F8FAFC; --text-color-light: #1E293B; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 80px; 
            background: var(--bg-color); color: var(--text-color); 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center; /* 中央揃え */
            text-align: center; 
        }
        h1 { font-size: 72px; font-weight: 900; margin: 0; line-height: 1.3; color: var(--accent-color); }
        p { font-size: 24px; margin: 24px 0 0; color: var(--sub-text-color); font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
        <p>{summary}</p>
    </div>
</body>
</html>`,table_basic:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        .table-container { 
            width: 100%; 
            height: calc(100% - 100px); /* ヘッダーの高さを引いた分 */
            overflow: hidden; /* スクロールバーはなし */
        }
        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed; /* 列幅を固定し、はみ出しを防ぐ */
        }
        th, td {
            border: 1px solid var(--sub-text-color);
            padding: 8px;
            font-size: 16px; 
            color: var(--sub-text-color);
            word-wrap: break-word; /* セル内でテキストを改行 */
            text-align: left;
        }
        th {
            background-color: var(--accent-color);
            color: var(--bg-color-light);
            font-weight: 700;
        }
        body.theme-dark th { color: var(--bg-color-dark); }
        tr:nth-child(even) { 
            background-color: rgba(128, 128, 128, 0.1);
        }
        body.theme-light tr:nth-child(even) {
             background-color: #f8f9fa;
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="table-container">
            <table>
                {table_html}
            </table>
        </div>
    </div>
</body>
</html>`,math_basic:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        /* KaTeX CSS (数式表示に必須) */
        @import url('https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css');

        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 60px 80px; 
            background: var(--bg-color); 
            display: flex; flex-direction: column; 
        }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        /* 解説文エリア */
        .content { 
            font-size: 22px; 
            line-height: 1.7;
            color: var(--sub-text-color); 
            font-weight: 400; 
            height: 40%; /* 高さを制限 */
            overflow: auto; /* 内容が多い場合はスクロール */
            padding-bottom: 20px;
        }
        /* marked.parse() が生成するタグのスタイル */
        .content p { margin: 0 0 16px 0; line-height: 1.7; }
        .content ul { margin: 0 0 16px 0; padding-left: 1.5em; }
        .content li { margin: 0 0 12px 0; line-height: 1.7; }

        .content strong {
            font-weight: 700;
            color: var(--text-color); /* AIが強調した部分を目立たせる */
        }
        .content a { /* リンク（もしあれば） */
            color: var(--accent-color);
            text-decoration: none;
        }

        /* 数式エリア */
        .formula-container {
            flex-grow: 1; /* 残りの高さをすべて使用 */
            display: flex;
            align-items: top; /* 垂直方向中央揃え */
            justify-content: center; /* 水平方向中央揃え */
            overflow: hidden;
            
            /* KaTeX のデフォルトフォントサイズを上書き */
            font-size: 28px; /* 数式の基本サイズを大きく */
            color: var(--text-color); /* 数式の色をテキストカラーに合わせる */
        }
        
        /* KaTeXが生成するkatex-displayクラス（ブロック数式）のスタイル */
        .formula-container .katex-display {
            margin: 0; /* 中央揃えのためマージンをリセット */
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        
        <div class="content">{content}</div> <div class="formula-container">
            {formula}
        </div>
    </div>
</body>
</html>`},z7={title_slide:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@700;900&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; overflow: hidden; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        h1 { font-size: 100px; font-weight: 900; margin: 0; line-height: 1.3; color: var(--accent-color-2); text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
        p { font-size: 32px; margin: 20px 0 0; color: var(--sub-text-color); font-weight: 700; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
        <p>{summary}</p>
    </div>
</body>
</html>`,agenda:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        ol { padding-left: 50px; }
        li { font-size: 34px; color: var(--sub-text-color); line-height: 1.8; margin-bottom: 15px; font-weight: 700; }
        li::marker { color: var(--accent-color); font-weight: 900; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <ol>{agenda_items_html}</ol>
    </div>
</body>
</html>`,section_header:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@900&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--accent-color-3); color: var(--text-color); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        h1 { font-size: 110px; font-weight: 900; color: var(--text-color); margin: 0; line-height: 1.2; padding: 20px 40px; background: var(--bg-color); border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
    </div>
</body>
</html>`,quote:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 80px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; justify-content: center; align-items: center; }
        blockquote { margin: 0; padding: 0; border-left: 10px solid var(--accent-color); padding-left: 40px; }
        p { font-size: 52px; font-weight: 700; color: var(--text-color); margin: 0; }
        footer { font-size: 28px; color: var(--text-color); margin-top: 30px; align-self: flex-end; font-weight: 700; padding: 10px 20px; background: var(--accent-color-3); border-radius: 10px; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <blockquote>
            <p>“{title}”</p>
        </blockquote>
        <footer>{summary}</footer>
    </div>
</body>
</html>`,content_left_infographic_right:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 30px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; flex-grow: 1; }
        .content { font-size: 24px; line-height: 1.8; color: var(--sub-text-color); white-space: pre-wrap; font-weight: 400; }
        #infographic-slot { display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <div class="content">{content}</div>
            <div id="infographic-slot">{infographic_svg}</div>
        </div>
    </div>
</body>
</html>`,two_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: flex; justify-content: space-around; gap: 40px; align-items: stretch; }
        .point { background: var(--card-bg-color); border-radius: 16px; padding: 30px; flex: 1; border-top: 8px solid var(--accent-color-2); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .point-icon { height: 150px; width: 100%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; }
        h2 { font-size: 30px; color: var(--text-color); margin: 0 0 15px; font-weight: 700; }
        p { font-size: 22px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,three_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: flex; justify-content: space-around; gap: 30px; align-items: stretch; }
        .point { background: var(--card-bg-color); border-radius: 16px; padding: 25px; flex: 1; border-top: 8px solid var(--accent-color-2); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .point-icon { height: 140px; width: 100%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; }
        h2 { font-size: 28px; color: var(--text-color); margin: 0 0 15px; font-weight: 700; }
        p { font-size: 20px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_3_svg}</div>
                <h2>{point_3_title}</h2>
                <p>{point_3_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,four_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 30px; }
        h1 { font-size: 44px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; gap: 25px; flex-grow: 1; }
        .point { background: var(--card-bg-color); border-radius: 16px; padding: 20px; border-top: 8px solid var(--accent-color-2); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .point-icon { height: 80px; width: 100%; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; }
        h2 { font-size: 24px; color: var(--text-color); margin: 0 0 10px; font-weight: 700; }
        p { font-size: 18px; line-height: 1.6; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_3_svg}</div>
                <h2>{point_3_title}</h2>
                <p>{point_3_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_4_svg}</div>
                <h2>{point_4_title}</h2>
                <p>{point_4_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,vertical_steps:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .steps-container { position: relative; padding-left: 60px; }
        .timeline { position: absolute; left: 20px; top: 15px; bottom: 15px; width: 8px; background-color: var(--accent-color); opacity: 0.3; border-radius: 4px; }
        .step { position: relative; margin-bottom: 25px; }
        .step-marker { position: absolute; left: -48px; top: 0px; width: 36px; height: 36px; background-color: var(--accent-color-2); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--bg-color); font-weight: 700; font-size: 18px; border: 4px solid var(--bg-color); box-shadow: 0 0 0 4px var(--accent-color-2); }
        h2 { font-size: 30px; color: var(--text-color); margin: 0 0 8px; font-weight: 700; }
        p { font-size: 22px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="steps-container">
            <div class="timeline"></div>
            {items_html}
        </div>
    </div>
</body>
</html>`,icon_list:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .list-container { display: flex; flex-direction: column; gap: 30px; }
        .list-item { display: flex; align-items: center; gap: 25px; }
        .item-icon { flex-shrink: 0; width: 72px; height: 72px; color: var(--accent-color); background: var(--card-bg-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; padding: 10px; box-sizing: border-box; }
        .item-icon svg { width: 48px; height: 48px; }
        .item-content h2 { font-size: 28px; color: var(--text-color); margin: 0 0 8px; font-weight: 700; }
        .item-content p { font-size: 22px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="list-container">
            {items_html}
        </div>
    </div>
</body>
</html>`},Ol={standard:{name:"スタンダード (ビジネス)",templates:O7},pop:{name:"ポップ",templates:z7}};function $f(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ua=$f();function Ob(l){ua=l}var _l={exec:()=>null};function Re(l,t=""){let e=typeof l=="string"?l:l.source,i={replace:(r,a)=>{let o=typeof a=="string"?a:a.source;return o=o.replace(Yi.caret,"$1"),e=e.replace(r,o),i},getRegex:()=>new RegExp(e,t)};return i}var Yi={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:l=>new RegExp(`^( {0,3}${l})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}#`),htmlBeginRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}<(?:[a-z].*>|!--)`,"i")},L7=/^(?:[ \t]*(?:\n|$))+/,B7=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,I7=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ql=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,F7=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Vf=/(?:[*+-]|\d{1,9}[.)])/,zb=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Lb=Re(zb).replace(/bull/g,Vf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),P7=Re(zb).replace(/bull/g,Vf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Yf=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,U7=/^[^\n]+/,Xf=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,H7=Re(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Xf).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),j7=Re(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Vf).getRegex(),au="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Kf=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,G7=Re("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Kf).replace("tag",au).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Bb=Re(Yf).replace("hr",ql).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",au).getRegex(),q7=Re(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Bb).getRegex(),Zf={blockquote:q7,code:B7,def:H7,fences:I7,heading:F7,hr:ql,html:G7,lheading:Lb,list:j7,newline:L7,paragraph:Bb,table:_l,text:U7},o4=Re("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ql).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",au).getRegex(),$7={...Zf,lheading:P7,table:o4,paragraph:Re(Yf).replace("hr",ql).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",o4).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",au).getRegex()},V7={...Zf,html:Re(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Kf).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_l,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Re(Yf).replace("hr",ql).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Lb).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Y7=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,X7=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ib=/^( {2,}|\\)\n(?!\s*$)/,K7=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ou=/[\p{P}\p{S}]/u,Wf=/[\s\p{P}\p{S}]/u,Fb=/[^\s\p{P}\p{S}]/u,Z7=Re(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Wf).getRegex(),Pb=/(?!~)[\p{P}\p{S}]/u,W7=/(?!~)[\s\p{P}\p{S}]/u,Q7=/(?:[^\s\p{P}\p{S}]|~)/u,J7=Re(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),Ub=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,t8=Re(Ub,"u").replace(/punct/g,ou).getRegex(),e8=Re(Ub,"u").replace(/punct/g,Pb).getRegex(),Hb="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",i8=Re(Hb,"gu").replace(/notPunctSpace/g,Fb).replace(/punctSpace/g,Wf).replace(/punct/g,ou).getRegex(),n8=Re(Hb,"gu").replace(/notPunctSpace/g,Q7).replace(/punctSpace/g,W7).replace(/punct/g,Pb).getRegex(),r8=Re("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Fb).replace(/punctSpace/g,Wf).replace(/punct/g,ou).getRegex(),s8=Re(/\\(punct)/,"gu").replace(/punct/g,ou).getRegex(),a8=Re(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),o8=Re(Kf).replace("(?:-->|$)","-->").getRegex(),l8=Re("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",o8).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),q0=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,c8=Re(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",q0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),jb=Re(/^!?\[(label)\]\[(ref)\]/).replace("label",q0).replace("ref",Xf).getRegex(),Gb=Re(/^!?\[(ref)\](?:\[\])?/).replace("ref",Xf).getRegex(),u8=Re("reflink|nolink(?!\\()","g").replace("reflink",jb).replace("nolink",Gb).getRegex(),l4=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Qf={_backpedal:_l,anyPunctuation:s8,autolink:a8,blockSkip:J7,br:Ib,code:X7,del:_l,emStrongLDelim:t8,emStrongRDelimAst:i8,emStrongRDelimUnd:r8,escape:Y7,link:c8,nolink:Gb,punctuation:Z7,reflink:jb,reflinkSearch:u8,tag:l8,text:K7,url:_l},h8={...Qf,link:Re(/^!?\[(label)\]\((.*?)\)/).replace("label",q0).getRegex(),reflink:Re(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",q0).getRegex()},mf={...Qf,emStrongRDelimAst:n8,emStrongLDelim:e8,url:Re(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",l4).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Re(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",l4).getRegex()},d8={...mf,br:Re(Ib).replace("{2,}","*").getRegex(),text:Re(mf.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},_0={normal:Zf,gfm:$7,pedantic:V7},pl={normal:Qf,gfm:mf,breaks:d8,pedantic:h8},f8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c4=l=>f8[l];function lr(l,t){if(t){if(Yi.escapeTest.test(l))return l.replace(Yi.escapeReplace,c4)}else if(Yi.escapeTestNoEncode.test(l))return l.replace(Yi.escapeReplaceNoEncode,c4);return l}function u4(l){try{l=encodeURI(l).replace(Yi.percentDecode,"%")}catch{return null}return l}function h4(l,t){let e=l.replace(Yi.findPipe,(a,o,u)=>{let h=!1,f=o;for(;--f>=0&&u[f]==="\\";)h=!h;return h?"|":" |"}),i=e.split(Yi.splitPipe),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(Yi.slashPipe,"|");return i}function gl(l,t,e){let i=l.length;if(i===0)return"";let r=0;for(;r<i&&l.charAt(i-r-1)===t;)r++;return l.slice(0,i-r)}function m8(l,t){if(l.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<l.length;i++)if(l[i]==="\\")i++;else if(l[i]===t[0])e++;else if(l[i]===t[1]&&(e--,e<0))return i;return e>0?-2:-1}function d4(l,t,e,i,r){let a=t.href,o=t.title||null,u=l[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;let h={type:l[0].charAt(0)==="!"?"image":"link",raw:e,href:a,title:o,text:u,tokens:i.inlineTokens(u)};return i.state.inLink=!1,h}function p8(l,t,e){let i=l.match(e.other.indentCodeCompensation);if(i===null)return t;let r=i[1];return t.split(`
`).map(a=>{let o=a.match(e.other.beginningSpace);if(o===null)return a;let[u]=o;return u.length>=r.length?a.slice(r.length):a}).join(`
`)}var $0=class{options;rules;lexer;constructor(l){this.options=l||ua}space(l){let t=this.rules.block.newline.exec(l);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(l){let t=this.rules.block.code.exec(l);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:gl(e,`
`)}}}fences(l){let t=this.rules.block.fences.exec(l);if(t){let e=t[0],i=p8(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(l){let t=this.rules.block.heading.exec(l);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let i=gl(e,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(e=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(l){let t=this.rules.block.hr.exec(l);if(t)return{type:"hr",raw:gl(t[0],`
`)}}blockquote(l){let t=this.rules.block.blockquote.exec(l);if(t){let e=gl(t[0],`
`).split(`
`),i="",r="",a=[];for(;e.length>0;){let o=!1,u=[],h;for(h=0;h<e.length;h++)if(this.rules.other.blockquoteStart.test(e[h]))u.push(e[h]),o=!0;else if(!o)u.push(e[h]);else break;e=e.slice(h);let f=u.join(`
`),m=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,r=r?`${r}
${m}`:m;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(m,a,!0),this.lexer.state.top=p,e.length===0)break;let b=a.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let v=b,w=v.raw+`
`+e.join(`
`),x=this.blockquote(w);a[a.length-1]=x,i=i.substring(0,i.length-v.raw.length)+x.raw,r=r.substring(0,r.length-v.text.length)+x.text;break}else if(b?.type==="list"){let v=b,w=v.raw+`
`+e.join(`
`),x=this.list(w);a[a.length-1]=x,i=i.substring(0,i.length-b.raw.length)+x.raw,r=r.substring(0,r.length-v.raw.length)+x.raw,e=w.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:r}}}list(l){let t=this.rules.block.list.exec(l);if(t){let e=t[1].trim(),i=e.length>1,r={type:"list",raw:"",ordered:i,start:i?+e.slice(0,-1):"",loose:!1,items:[]};e=i?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=i?e:"[*+-]");let a=this.rules.other.listItemRegex(e),o=!1;for(;l;){let h=!1,f="",m="";if(!(t=a.exec(l))||this.rules.block.hr.test(l))break;f=t[0],l=l.substring(f.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,A=>" ".repeat(3*A.length)),b=l.split(`
`,1)[0],v=!p.trim(),w=0;if(this.options.pedantic?(w=2,m=p.trimStart()):v?w=t[1].length+1:(w=t[2].search(this.rules.other.nonSpaceChar),w=w>4?1:w,m=p.slice(w),w+=t[1].length),v&&this.rules.other.blankLine.test(b)&&(f+=b+`
`,l=l.substring(b.length+1),h=!0),!h){let A=this.rules.other.nextBulletRegex(w),T=this.rules.other.hrRegex(w),M=this.rules.other.fencesBeginRegex(w),N=this.rules.other.headingBeginRegex(w),R=this.rules.other.htmlBeginRegex(w);for(;l;){let B=l.split(`
`,1)[0],z;if(b=B,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),z=b):z=b.replace(this.rules.other.tabCharGlobal,"    "),M.test(b)||N.test(b)||R.test(b)||A.test(b)||T.test(b))break;if(z.search(this.rules.other.nonSpaceChar)>=w||!b.trim())m+=`
`+z.slice(w);else{if(v||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||M.test(p)||N.test(p)||T.test(p))break;m+=`
`+b}!v&&!b.trim()&&(v=!0),f+=B+`
`,l=l.substring(B.length+1),p=z.slice(w)}}r.loose||(o?r.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(o=!0));let x=null,_;this.options.gfm&&(x=this.rules.other.listIsTask.exec(m),x&&(_=x[0]!=="[ ] ",m=m.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:f,task:!!x,checked:_,loose:!1,text:m,tokens:[]}),r.raw+=f}let u=r.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let h=0;h<r.items.length;h++)if(this.lexer.state.top=!1,r.items[h].tokens=this.lexer.blockTokens(r.items[h].text,[]),!r.loose){let f=r.items[h].tokens.filter(p=>p.type==="space"),m=f.length>0&&f.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=m}if(r.loose)for(let h=0;h<r.items.length;h++)r.items[h].loose=!0;return r}}html(l){let t=this.rules.block.html.exec(l);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(l){let t=this.rules.block.def.exec(l);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:r}}}table(l){let t=this.rules.block.table.exec(l);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=h4(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===i.length){for(let o of i)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<e.length;o++)a.header.push({text:e[o],tokens:this.lexer.inline(e[o]),header:!0,align:a.align[o]});for(let o of r)a.rows.push(h4(o,a.header.length).map((u,h)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:a.align[h]})));return a}}lheading(l){let t=this.rules.block.lheading.exec(l);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(l){let t=this.rules.block.paragraph.exec(l);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(l){let t=this.rules.block.text.exec(l);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(l){let t=this.rules.inline.escape.exec(l);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(l){let t=this.rules.inline.tag.exec(l);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(l){let t=this.rules.inline.link.exec(l);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let a=gl(e.slice(0,-1),"\\");if((e.length-a.length)%2===0)return}else{let a=m8(t[2],"()");if(a===-2)return;if(a>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],r=a[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i=i.slice(1):i=i.slice(1,-1)),d4(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(l,t){let e;if((e=this.rules.inline.reflink.exec(l))||(e=this.rules.inline.nolink.exec(l))){let i=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[i.toLowerCase()];if(!r){let a=e[0].charAt(0);return{type:"text",raw:a,text:a}}return d4(e,r,e[0],this.lexer,this.rules)}}emStrong(l,t,e=""){let i=this.rules.inline.emStrongLDelim.exec(l);if(!(!i||i[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!e||this.rules.inline.punctuation.exec(e))){let r=[...i[0]].length-1,a,o,u=r,h=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,t=t.slice(-1*l.length+r);(i=f.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(o=[...a].length,i[3]||i[4]){u+=o;continue}else if((i[5]||i[6])&&r%3&&!((r+o)%3)){h+=o;continue}if(u-=o,u>0)continue;o=Math.min(o,o+u+h);let m=[...i[0]][0].length,p=l.slice(0,r+i.index+m+o);if(Math.min(r,o)%2){let v=p.slice(1,-1);return{type:"em",raw:p,text:v,tokens:this.lexer.inlineTokens(v)}}let b=p.slice(2,-2);return{type:"strong",raw:p,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(l){let t=this.rules.inline.code.exec(l);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(l){let t=this.rules.inline.br.exec(l);if(t)return{type:"br",raw:t[0]}}del(l){let t=this.rules.inline.del.exec(l);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(l){let t=this.rules.inline.autolink.exec(l);if(t){let e,i;return t[2]==="@"?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(l){let t;if(t=this.rules.inline.url.exec(l)){let e,i;if(t[2]==="@")e=t[0],i="mailto:"+e;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(r!==t[0]);e=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(l){let t=this.rules.inline.text.exec(l);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},Zn=class pf{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ua,this.options.tokenizer=this.options.tokenizer||new $0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:Yi,block:_0.normal,inline:pl.normal};this.options.pedantic?(e.block=_0.pedantic,e.inline=pl.pedantic):this.options.gfm&&(e.block=_0.gfm,this.options.breaks?e.inline=pl.breaks:e.inline=pl.gfm),this.tokenizer.rules=e}static get rules(){return{block:_0,inline:pl}}static lex(t,e){return new pf(e).lex(t)}static lexInline(t,e){return new pf(e).inlineTokens(t)}lex(t){t=t.replace(Yi.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){for(this.options.pedantic&&(t=t.replace(Yi.tabCharGlobal,"    ").replace(Yi.spaceLine,""));t;){let r;if(this.options.extensions?.block?.some(o=>(r=o.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))continue;if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length);let o=e.at(-1);r.raw.length===1&&o!==void 0?o.raw+=`
`:e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.at(-1).src=o.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},e.push(r));continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}let a=t;if(this.options.extensions?.startBlock){let o=1/0,u=t.slice(1),h;this.options.extensions.startBlock.forEach(f=>{h=f.call({lexer:this},u),typeof h=="number"&&h>=0&&(o=Math.min(o,h))}),o<1/0&&o>=0&&(a=t.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){let o=e.at(-1);i&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(r),i=a.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(r);continue}if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i=t,r=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)u.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let a=!1,o="";for(;t;){a||(o=""),a=!1;let u;if(this.options.extensions?.inline?.some(f=>(u=f.call({lexer:this},t,e))?(t=t.substring(u.raw.length),e.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);let f=e.at(-1);u.type==="text"&&f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):e.push(u);continue}if(u=this.tokenizer.emStrong(t,i,o)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),e.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),e.push(u);continue}let h=t;if(this.options.extensions?.startInline){let f=1/0,m=t.slice(1),p;this.options.extensions.startInline.forEach(b=>{p=b.call({lexer:this},m),typeof p=="number"&&p>=0&&(f=Math.min(f,p))}),f<1/0&&f>=0&&(h=t.substring(0,f+1))}if(u=this.tokenizer.inlineText(h)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),a=!0;let f=e.at(-1);f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):e.push(u);continue}if(t){let f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return e}},V0=class{options;parser;constructor(l){this.options=l||ua}space(l){return""}code({text:l,lang:t,escaped:e}){let i=(t||"").match(Yi.notSpaceStart)?.[0],r=l.replace(Yi.endingNewline,"")+`
`;return i?'<pre><code class="language-'+lr(i)+'">'+(e?r:lr(r,!0))+`</code></pre>
`:"<pre><code>"+(e?r:lr(r,!0))+`</code></pre>
`}blockquote({tokens:l}){return`<blockquote>
${this.parser.parse(l)}</blockquote>
`}html({text:l}){return l}def(l){return""}heading({tokens:l,depth:t}){return`<h${t}>${this.parser.parseInline(l)}</h${t}>
`}hr(l){return`<hr>
`}list(l){let t=l.ordered,e=l.start,i="";for(let o=0;o<l.items.length;o++){let u=l.items[o];i+=this.listitem(u)}let r=t?"ol":"ul",a=t&&e!==1?' start="'+e+'"':"";return"<"+r+a+`>
`+i+"</"+r+`>
`}listitem(l){let t="";if(l.task){let e=this.checkbox({checked:!!l.checked});l.loose?l.tokens[0]?.type==="paragraph"?(l.tokens[0].text=e+" "+l.tokens[0].text,l.tokens[0].tokens&&l.tokens[0].tokens.length>0&&l.tokens[0].tokens[0].type==="text"&&(l.tokens[0].tokens[0].text=e+" "+lr(l.tokens[0].tokens[0].text),l.tokens[0].tokens[0].escaped=!0)):l.tokens.unshift({type:"text",raw:e+" ",text:e+" ",escaped:!0}):t+=e+" "}return t+=this.parser.parse(l.tokens,!!l.loose),`<li>${t}</li>
`}checkbox({checked:l}){return"<input "+(l?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:l}){return`<p>${this.parser.parseInline(l)}</p>
`}table(l){let t="",e="";for(let r=0;r<l.header.length;r++)e+=this.tablecell(l.header[r]);t+=this.tablerow({text:e});let i="";for(let r=0;r<l.rows.length;r++){let a=l.rows[r];e="";for(let o=0;o<a.length;o++)e+=this.tablecell(a[o]);i+=this.tablerow({text:e})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:l}){return`<tr>
${l}</tr>
`}tablecell(l){let t=this.parser.parseInline(l.tokens),e=l.header?"th":"td";return(l.align?`<${e} align="${l.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:l}){return`<strong>${this.parser.parseInline(l)}</strong>`}em({tokens:l}){return`<em>${this.parser.parseInline(l)}</em>`}codespan({text:l}){return`<code>${lr(l,!0)}</code>`}br(l){return"<br>"}del({tokens:l}){return`<del>${this.parser.parseInline(l)}</del>`}link({href:l,title:t,tokens:e}){let i=this.parser.parseInline(e),r=u4(l);if(r===null)return i;l=r;let a='<a href="'+l+'"';return t&&(a+=' title="'+lr(t)+'"'),a+=">"+i+"</a>",a}image({href:l,title:t,text:e,tokens:i}){i&&(e=this.parser.parseInline(i,this.parser.textRenderer));let r=u4(l);if(r===null)return lr(e);l=r;let a=`<img src="${l}" alt="${e}"`;return t&&(a+=` title="${lr(t)}"`),a+=">",a}text(l){return"tokens"in l&&l.tokens?this.parser.parseInline(l.tokens):"escaped"in l&&l.escaped?l.text:lr(l.text)}},Jf=class{strong({text:l}){return l}em({text:l}){return l}codespan({text:l}){return l}del({text:l}){return l}html({text:l}){return l}text({text:l}){return l}link({text:l}){return""+l}image({text:l}){return""+l}br(){return""}},Wn=class gf{options;renderer;textRenderer;constructor(t){this.options=t||ua,this.options.renderer=this.options.renderer||new V0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Jf}static parse(t,e){return new gf(e).parse(t)}static parseInline(t,e){return new gf(e).parseInline(t)}parse(t,e=!0){let i="";for(let r=0;r<t.length;r++){let a=t[r];if(this.options.extensions?.renderers?.[a.type]){let u=a,h=this.options.extensions.renderers[u.type].call({parser:this},u);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(u.type)){i+=h||"";continue}}let o=a;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"def":{i+=this.renderer.def(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let u=o,h=this.renderer.text(u);for(;r+1<t.length&&t[r+1].type==="text";)u=t[++r],h+=`
`+this.renderer.text(u);e?i+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):i+=h;continue}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return i}parseInline(t,e=this.renderer){let i="";for(let r=0;r<t.length;r++){let a=t[r];if(this.options.extensions?.renderers?.[a.type]){let u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=u||"";continue}}let o=a;switch(o.type){case"escape":{i+=e.text(o);break}case"html":{i+=e.html(o);break}case"link":{i+=e.link(o);break}case"image":{i+=e.image(o);break}case"strong":{i+=e.strong(o);break}case"em":{i+=e.em(o);break}case"codespan":{i+=e.codespan(o);break}case"br":{i+=e.br(o);break}case"del":{i+=e.del(o);break}case"text":{i+=e.text(o);break}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return i}},xl=class{options;block;constructor(t){this.options=t||ua}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Zn.lex:Zn.lexInline}provideParser(){return this.block?Wn.parse:Wn.parseInline}},g8=class{defaults=$f();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Wn;Renderer=V0;TextRenderer=Jf;Lexer=Zn;Tokenizer=$0;Hooks=xl;constructor(...l){this.use(...l)}walkTokens(l,t){let e=[];for(let i of l)switch(e=e.concat(t.call(this,i)),i.type){case"table":{let r=i;for(let a of r.header)e=e.concat(this.walkTokens(a.tokens,t));for(let a of r.rows)for(let o of a)e=e.concat(this.walkTokens(o.tokens,t));break}case"list":{let r=i;e=e.concat(this.walkTokens(r.items,t));break}default:{let r=i;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(a=>{let o=r[a].flat(1/0);e=e.concat(this.walkTokens(o,t))}):r.tokens&&(e=e.concat(this.walkTokens(r.tokens,t)))}}return e}use(...l){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return l.forEach(e=>{let i={...e};if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let a=t.renderers[r.name];a?t.renderers[r.name]=function(...o){let u=r.renderer.apply(this,o);return u===!1&&(u=a.apply(this,o)),u}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=t[r.level];a?a.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),i.extensions=t),e.renderer){let r=this.defaults.renderer||new V0(this.defaults);for(let a in e.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let o=a,u=e.renderer[o],h=r[o];r[o]=(...f)=>{let m=u.apply(r,f);return m===!1&&(m=h.apply(r,f)),m||""}}i.renderer=r}if(e.tokenizer){let r=this.defaults.tokenizer||new $0(this.defaults);for(let a in e.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let o=a,u=e.tokenizer[o],h=r[o];r[o]=(...f)=>{let m=u.apply(r,f);return m===!1&&(m=h.apply(r,f)),m}}i.tokenizer=r}if(e.hooks){let r=this.defaults.hooks||new xl;for(let a in e.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let o=a,u=e.hooks[o],h=r[o];xl.passThroughHooks.has(a)?r[o]=f=>{if(this.defaults.async&&xl.passThroughHooksRespectAsync.has(a))return(async()=>{let p=await u.call(r,f);return h.call(r,p)})();let m=u.call(r,f);return h.call(r,m)}:r[o]=(...f)=>{if(this.defaults.async)return(async()=>{let p=await u.apply(r,f);return p===!1&&(p=await h.apply(r,f)),p})();let m=u.apply(r,f);return m===!1&&(m=h.apply(r,f)),m}}i.hooks=r}if(e.walkTokens){let r=this.defaults.walkTokens,a=e.walkTokens;i.walkTokens=function(o){let u=[];return u.push(a.call(this,o)),r&&(u=u.concat(r.call(this,o))),u}}this.defaults={...this.defaults,...i}}),this}setOptions(l){return this.defaults={...this.defaults,...l},this}lexer(l,t){return Zn.lex(l,t??this.defaults)}parser(l,t){return Wn.parse(l,t??this.defaults)}parseMarkdown(l){return(t,e)=>{let i={...e},r={...this.defaults,...i},a=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=l),r.async)return(async()=>{let o=r.hooks?await r.hooks.preprocess(t):t,u=await(r.hooks?await r.hooks.provideLexer():l?Zn.lex:Zn.lexInline)(o,r),h=r.hooks?await r.hooks.processAllTokens(u):u;r.walkTokens&&await Promise.all(this.walkTokens(h,r.walkTokens));let f=await(r.hooks?await r.hooks.provideParser():l?Wn.parse:Wn.parseInline)(h,r);return r.hooks?await r.hooks.postprocess(f):f})().catch(a);try{r.hooks&&(t=r.hooks.preprocess(t));let o=(r.hooks?r.hooks.provideLexer():l?Zn.lex:Zn.lexInline)(t,r);r.hooks&&(o=r.hooks.processAllTokens(o)),r.walkTokens&&this.walkTokens(o,r.walkTokens);let u=(r.hooks?r.hooks.provideParser():l?Wn.parse:Wn.parseInline)(o,r);return r.hooks&&(u=r.hooks.postprocess(u)),u}catch(o){return a(o)}}}onError(l,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,l){let i="<p>An error occurred:</p><pre>"+lr(e.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(e);throw e}}},oa=new g8;function pe(l,t){return oa.parse(l,t)}pe.options=pe.setOptions=function(l){return oa.setOptions(l),pe.defaults=oa.defaults,Ob(pe.defaults),pe};pe.getDefaults=$f;pe.defaults=ua;pe.use=function(...l){return oa.use(...l),pe.defaults=oa.defaults,Ob(pe.defaults),pe};pe.walkTokens=function(l,t){return oa.walkTokens(l,t)};pe.parseInline=oa.parseInline;pe.Parser=Wn;pe.parser=Wn.parse;pe.Renderer=V0;pe.TextRenderer=Jf;pe.Lexer=Zn;pe.lexer=Zn.lex;pe.Tokenizer=$0;pe.Hooks=xl;pe.parse=pe;pe.options;pe.setOptions;pe.use;pe.walkTokens;pe.parseInline;Wn.parse;Zn.lex;class dn{constructor(t,e,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=i}static range(t,e){return e?!t||!t.loc||!e.loc||t.loc.lexer!==e.loc.lexer?null:new dn(t.loc.lexer,t.loc.start,e.loc.end):t&&t.loc}}class _n{constructor(t,e){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=e}range(t,e){return new _n(e,dn.range(this,t))}}class Mt{constructor(t,e){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var i="KaTeX parse error: "+t,r,a,o=e&&e.loc;if(o&&o.start<=o.end){var u=o.lexer.input;r=o.start,a=o.end,r===u.length?i+=" at end of input: ":i+=" at position "+(r+1)+": ";var h=u.slice(r,a).replace(/[^]/g,"$&̲"),f;r>15?f="…"+u.slice(r-15,r):f=u.slice(0,r);var m;a+15<u.length?m=u.slice(a,a+15)+"…":m=u.slice(a),i+=f+h+m}var p=new Error(i);return p.name="ParseError",p.__proto__=Mt.prototype,p.position=r,r!=null&&a!=null&&(p.length=a-r),p.rawMessage=t,p}}Mt.prototype.__proto__=Error.prototype;var b8=function(t,e){return t===void 0?e:t},v8=/([A-Z])/g,y8=function(t){return t.replace(v8,"-$1").toLowerCase()},x8={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},w8=/[&><"']/g;function S8(l){return String(l).replace(w8,t=>x8[t])}var qb=function l(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?l(t.body[0]):t:t.type==="font"?l(t.body):t},A8=function(t){var e=qb(t);return e.type==="mathord"||e.type==="textord"||e.type==="atom"},_8=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},k8=function(t){var e=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return e?e[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(e[1])?null:e[1].toLowerCase():"_relative"},Me={deflt:b8,escape:S8,hyphenate:y8,getBaseElem:qb,isCharacterBox:A8,protocolFromUrl:k8},F0={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:l=>"#"+l},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(l,t)=>(t.push(l),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:l=>Math.max(0,l),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:l=>Math.max(0,l),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:l=>Math.max(0,l),cli:"-e, --max-expand <n>",cliProcessor:l=>l==="Infinity"?1/0:parseInt(l)},globalGroup:{type:"boolean",cli:!1}};function E8(l){if(l.default)return l.default;var t=l.type,e=Array.isArray(t)?t[0]:t;if(typeof e!="string")return e.enum[0];switch(e){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class tm{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var e in F0)if(F0.hasOwnProperty(e)){var i=F0[e];this[e]=t[e]!==void 0?i.processor?i.processor(t[e]):t[e]:E8(i)}}reportNonstrict(t,e,i){var r=this.strict;if(typeof r=="function"&&(r=r(t,e,i)),!(!r||r==="ignore")){if(r===!0||r==="error")throw new Mt("LaTeX-incompatible input and strict mode is set to 'error': "+(e+" ["+t+"]"),i);r==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(e+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+e+" ["+t+"]"))}}useStrictBehavior(t,e,i){var r=this.strict;if(typeof r=="function")try{r=r(t,e,i)}catch{r="error"}return!r||r==="ignore"?!1:r===!0||r==="error"?!0:r==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(e+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+e+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var e=Me.protocolFromUrl(t.url);if(e==null)return!1;t.protocol=e}var i=typeof this.trust=="function"?this.trust(t):this.trust;return!!i}}class ys{constructor(t,e,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=i}sup(){return hr[T8[this.id]]}sub(){return hr[C8[this.id]]}fracNum(){return hr[M8[this.id]]}fracDen(){return hr[R8[this.id]]}cramp(){return hr[D8[this.id]]}text(){return hr[N8[this.id]]}isTight(){return this.size>=2}}var em=0,Y0=1,co=2,Gr=3,zl=4,Pn=5,fo=6,Xi=7,hr=[new ys(em,0,!1),new ys(Y0,0,!0),new ys(co,1,!1),new ys(Gr,1,!0),new ys(zl,2,!1),new ys(Pn,2,!0),new ys(fo,3,!1),new ys(Xi,3,!0)],T8=[zl,Pn,zl,Pn,fo,Xi,fo,Xi],C8=[Pn,Pn,Pn,Pn,Xi,Xi,Xi,Xi],M8=[co,Gr,zl,Pn,fo,Xi,fo,Xi],R8=[Gr,Gr,Pn,Pn,Xi,Xi,Xi,Xi],D8=[Y0,Y0,Gr,Gr,Pn,Pn,Xi,Xi],N8=[em,Y0,co,Gr,co,Gr,co,Gr],ee={DISPLAY:hr[em],TEXT:hr[co],SCRIPT:hr[zl],SCRIPTSCRIPT:hr[fo]},bf=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function O8(l){for(var t=0;t<bf.length;t++)for(var e=bf[t],i=0;i<e.blocks.length;i++){var r=e.blocks[i];if(l>=r[0]&&l<=r[1])return e.name}return null}var P0=[];bf.forEach(l=>l.blocks.forEach(t=>P0.push(...t)));function $b(l){for(var t=0;t<P0.length;t+=2)if(l>=P0[t]&&l<=P0[t+1])return!0;return!1}var Qa=80,z8=function(t,e){return"M95,"+(622+t+e)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},L8=function(t,e){return"M263,"+(601+t+e)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},B8=function(t,e){return"M983 "+(10+t+e)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},I8=function(t,e){return"M424,"+(2398+t+e)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+e+`
h400000v`+(40+t)+"h-400000z"},F8=function(t,e){return"M473,"+(2713+t+e)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"},P8=function(t){var e=t/2;return"M400000 "+t+" H0 L"+e+" 0 l65 45 L145 "+(t-80)+" H400000z"},U8=function(t,e,i){var r=i-54-e-t;return"M702 "+(t+e)+"H400000"+(40+t)+`
H742v`+r+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+e+"H400000v"+(40+t)+"H742z"},H8=function(t,e,i){e=1e3*e;var r="";switch(t){case"sqrtMain":r=z8(e,Qa);break;case"sqrtSize1":r=L8(e,Qa);break;case"sqrtSize2":r=B8(e,Qa);break;case"sqrtSize3":r=I8(e,Qa);break;case"sqrtSize4":r=F8(e,Qa);break;case"sqrtTall":r=U8(e,Qa,i)}return r},j8=function(t,e){switch(t){case"⎜":return"M291 0 H417 V"+e+" H291z M291 0 H417 V"+e+" H291z";case"∣":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z";case"∥":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z"+("M367 0 H410 V"+e+" H367z M367 0 H410 V"+e+" H367z");case"⎟":return"M457 0 H583 V"+e+" H457z M457 0 H583 V"+e+" H457z";case"⎢":return"M319 0 H403 V"+e+" H319z M319 0 H403 V"+e+" H319z";case"⎥":return"M263 0 H347 V"+e+" H263z M263 0 H347 V"+e+" H263z";case"⎪":return"M384 0 H504 V"+e+" H384z M384 0 H504 V"+e+" H384z";case"⏐":return"M312 0 H355 V"+e+" H312z M312 0 H355 V"+e+" H312z";case"‖":return"M257 0 H300 V"+e+" H257z M257 0 H300 V"+e+" H257z"+("M478 0 H521 V"+e+" H478z M478 0 H521 V"+e+" H478z");default:return""}},f4={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},G8=function(t,e){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+e+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+e+" v1759 h84z";case"vert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+" v585 h43z";case"doublevert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+` v585 h43z
M367 15 v585 v`+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+e+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+e+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+e+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v602 h84z
M403 1759 V0 H319 V1759 v`+e+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v602 h84z
M347 1759 V0 h-84 V1759 v`+e+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(e+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(e+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(e+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(e+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class $l{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t}toMarkup(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t}toText(){var t=e=>e.toText();return this.children.map(t).join("")}}var dr={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},k0={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},m4={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function q8(l,t){dr[l]=t}function im(l,t,e){if(!dr[t])throw new Error("Font metrics not found for font: "+t+".");var i=l.charCodeAt(0),r=dr[t][i];if(!r&&l[0]in m4&&(i=m4[l[0]].charCodeAt(0),r=dr[t][i]),!r&&e==="text"&&$b(i)&&(r=dr[t][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}var Pd={};function $8(l){var t;if(l>=5?t=0:l>=3?t=1:t=2,!Pd[t]){var e=Pd[t]={cssEmPerMu:k0.quad[t]/18};for(var i in k0)k0.hasOwnProperty(i)&&(e[i]=k0[i][t])}return Pd[t]}var V8=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],p4=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],g4=function(t,e){return e.size<2?t:V8[t-1][e.size-1]};class Hr{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||Hr.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=p4[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var e={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return new Hr(e)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:g4(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:p4[t-1]})}havingBaseStyle(t){t=t||this.style.text();var e=g4(Hr.BASESIZE,t);return this.size===e&&this.textSize===Hr.BASESIZE&&this.style===t?this:this.extend({style:t,size:e})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Hr.BASESIZE?["sizing","reset-size"+this.size,"size"+Hr.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=$8(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Hr.BASESIZE=6;var vf={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Y8={ex:!0,em:!0,mu:!0},Vb=function(t){return typeof t!="string"&&(t=t.unit),t in vf||t in Y8||t==="ex"},ni=function(t,e){var i;if(t.unit in vf)i=vf[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if(t.unit==="mu")i=e.fontMetrics().cssEmPerMu;else{var r;if(e.style.isTight()?r=e.havingStyle(e.style.text()):r=e,t.unit==="ex")i=r.fontMetrics().xHeight;else if(t.unit==="em")i=r.fontMetrics().quad;else throw new Mt("Invalid unit: '"+t.unit+"'");r!==e&&(i*=r.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*i,e.maxSize)},Ot=function(t){return+t.toFixed(4)+"em"},Cs=function(t){return t.filter(e=>e).join(" ")},Yb=function(t,e,i){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},e){e.style.isTight()&&this.classes.push("mtight");var r=e.getColor();r&&(this.style.color=r)}},Xb=function(t){var e=document.createElement(t);e.className=Cs(this.classes);for(var i in this.style)this.style.hasOwnProperty(i)&&(e.style[i]=this.style[i]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&e.setAttribute(r,this.attributes[r]);for(var a=0;a<this.children.length;a++)e.appendChild(this.children[a].toNode());return e},X8=/[\s"'>/=\x00-\x1f]/,Kb=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+Me.escape(Cs(this.classes))+'"');var i="";for(var r in this.style)this.style.hasOwnProperty(r)&&(i+=Me.hyphenate(r)+":"+this.style[r]+";");i&&(e+=' style="'+Me.escape(i)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(X8.test(a))throw new Mt("Invalid attribute name '"+a+"'");e+=" "+a+'="'+Me.escape(this.attributes[a])+'"'}e+=">";for(var o=0;o<this.children.length;o++)e+=this.children[o].toMarkup();return e+="</"+t+">",e};class Vl{constructor(t,e,i,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Yb.call(this,t,i,r),this.children=e||[]}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return this.classes.includes(t)}toNode(){return Xb.call(this,"span")}toMarkup(){return Kb.call(this,"span")}}class nm{constructor(t,e,i,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Yb.call(this,e,r),this.children=i||[],this.setAttribute("href",t)}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return this.classes.includes(t)}toNode(){return Xb.call(this,"a")}toMarkup(){return Kb.call(this,"a")}}class K8{constructor(t,e,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=i}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var e in this.style)this.style.hasOwnProperty(e)&&(t.style[e]=this.style[e]);return t}toMarkup(){var t='<img src="'+Me.escape(this.src)+'"'+(' alt="'+Me.escape(this.alt)+'"'),e="";for(var i in this.style)this.style.hasOwnProperty(i)&&(e+=Me.hyphenate(i)+":"+this.style[i]+";");return e&&(t+=' style="'+Me.escape(e)+'"'),t+="'/>",t}}var Z8={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class Hn{constructor(t,e,i,r,a,o,u,h){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=i||0,this.italic=r||0,this.skew=a||0,this.width=o||0,this.classes=u||[],this.style=h||{},this.maxFontSize=0;var f=O8(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=Z8[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),e=null;this.italic>0&&(e=document.createElement("span"),e.style.marginRight=Ot(this.italic)),this.classes.length>0&&(e=e||document.createElement("span"),e.className=Cs(this.classes));for(var i in this.style)this.style.hasOwnProperty(i)&&(e=e||document.createElement("span"),e.style[i]=this.style[i]);return e?(e.appendChild(t),e):t}toMarkup(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=Me.escape(Cs(this.classes)),e+='"');var i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(var r in this.style)this.style.hasOwnProperty(r)&&(i+=Me.hyphenate(r)+":"+this.style[r]+";");i&&(t=!0,e+=' style="'+Me.escape(i)+'"');var a=Me.escape(this.text);return t?(e+=">",e+=a,e+="</span>",e):a}}class $r{constructor(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&e.setAttribute(i,this.attributes[i]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+Me.escape(this.attributes[e])+'"');t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</svg>",t}}class Ms{constructor(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",f4[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+Me.escape(this.alternate)+'"/>':'<path d="'+Me.escape(f4[this.pathName])+'"/>'}}class yf{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"line");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&e.setAttribute(i,this.attributes[i]);return e}toMarkup(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+Me.escape(this.attributes[e])+'"');return t+="/>",t}}function b4(l){if(l instanceof Hn)return l;throw new Error("Expected symbolNode but got "+String(l)+".")}function W8(l){if(l instanceof Vl)return l;throw new Error("Expected span<HtmlDomNode> but got "+String(l)+".")}var Q8={bin:1,close:1,inner:1,open:1,punct:1,rel:1},J8={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Ve={math:{},text:{}};function S(l,t,e,i,r,a){Ve[l][r]={font:t,group:e,replace:i},a&&i&&(Ve[l][i]=Ve[l][r])}var k="math",Et="text",O="main",$="ams",Je="accent-token",Ht="bin",Zi="close",mo="inner",te="mathord",Si="op-token",kn="open",lu="punct",Y="rel",Xr="spacing",Q="textord";S(k,O,Y,"≡","\\equiv",!0);S(k,O,Y,"≺","\\prec",!0);S(k,O,Y,"≻","\\succ",!0);S(k,O,Y,"∼","\\sim",!0);S(k,O,Y,"⊥","\\perp");S(k,O,Y,"⪯","\\preceq",!0);S(k,O,Y,"⪰","\\succeq",!0);S(k,O,Y,"≃","\\simeq",!0);S(k,O,Y,"∣","\\mid",!0);S(k,O,Y,"≪","\\ll",!0);S(k,O,Y,"≫","\\gg",!0);S(k,O,Y,"≍","\\asymp",!0);S(k,O,Y,"∥","\\parallel");S(k,O,Y,"⋈","\\bowtie",!0);S(k,O,Y,"⌣","\\smile",!0);S(k,O,Y,"⊑","\\sqsubseteq",!0);S(k,O,Y,"⊒","\\sqsupseteq",!0);S(k,O,Y,"≐","\\doteq",!0);S(k,O,Y,"⌢","\\frown",!0);S(k,O,Y,"∋","\\ni",!0);S(k,O,Y,"∝","\\propto",!0);S(k,O,Y,"⊢","\\vdash",!0);S(k,O,Y,"⊣","\\dashv",!0);S(k,O,Y,"∋","\\owns");S(k,O,lu,".","\\ldotp");S(k,O,lu,"⋅","\\cdotp");S(k,O,Q,"#","\\#");S(Et,O,Q,"#","\\#");S(k,O,Q,"&","\\&");S(Et,O,Q,"&","\\&");S(k,O,Q,"ℵ","\\aleph",!0);S(k,O,Q,"∀","\\forall",!0);S(k,O,Q,"ℏ","\\hbar",!0);S(k,O,Q,"∃","\\exists",!0);S(k,O,Q,"∇","\\nabla",!0);S(k,O,Q,"♭","\\flat",!0);S(k,O,Q,"ℓ","\\ell",!0);S(k,O,Q,"♮","\\natural",!0);S(k,O,Q,"♣","\\clubsuit",!0);S(k,O,Q,"℘","\\wp",!0);S(k,O,Q,"♯","\\sharp",!0);S(k,O,Q,"♢","\\diamondsuit",!0);S(k,O,Q,"ℜ","\\Re",!0);S(k,O,Q,"♡","\\heartsuit",!0);S(k,O,Q,"ℑ","\\Im",!0);S(k,O,Q,"♠","\\spadesuit",!0);S(k,O,Q,"§","\\S",!0);S(Et,O,Q,"§","\\S");S(k,O,Q,"¶","\\P",!0);S(Et,O,Q,"¶","\\P");S(k,O,Q,"†","\\dag");S(Et,O,Q,"†","\\dag");S(Et,O,Q,"†","\\textdagger");S(k,O,Q,"‡","\\ddag");S(Et,O,Q,"‡","\\ddag");S(Et,O,Q,"‡","\\textdaggerdbl");S(k,O,Zi,"⎱","\\rmoustache",!0);S(k,O,kn,"⎰","\\lmoustache",!0);S(k,O,Zi,"⟯","\\rgroup",!0);S(k,O,kn,"⟮","\\lgroup",!0);S(k,O,Ht,"∓","\\mp",!0);S(k,O,Ht,"⊖","\\ominus",!0);S(k,O,Ht,"⊎","\\uplus",!0);S(k,O,Ht,"⊓","\\sqcap",!0);S(k,O,Ht,"∗","\\ast");S(k,O,Ht,"⊔","\\sqcup",!0);S(k,O,Ht,"◯","\\bigcirc",!0);S(k,O,Ht,"∙","\\bullet",!0);S(k,O,Ht,"‡","\\ddagger");S(k,O,Ht,"≀","\\wr",!0);S(k,O,Ht,"⨿","\\amalg");S(k,O,Ht,"&","\\And");S(k,O,Y,"⟵","\\longleftarrow",!0);S(k,O,Y,"⇐","\\Leftarrow",!0);S(k,O,Y,"⟸","\\Longleftarrow",!0);S(k,O,Y,"⟶","\\longrightarrow",!0);S(k,O,Y,"⇒","\\Rightarrow",!0);S(k,O,Y,"⟹","\\Longrightarrow",!0);S(k,O,Y,"↔","\\leftrightarrow",!0);S(k,O,Y,"⟷","\\longleftrightarrow",!0);S(k,O,Y,"⇔","\\Leftrightarrow",!0);S(k,O,Y,"⟺","\\Longleftrightarrow",!0);S(k,O,Y,"↦","\\mapsto",!0);S(k,O,Y,"⟼","\\longmapsto",!0);S(k,O,Y,"↗","\\nearrow",!0);S(k,O,Y,"↩","\\hookleftarrow",!0);S(k,O,Y,"↪","\\hookrightarrow",!0);S(k,O,Y,"↘","\\searrow",!0);S(k,O,Y,"↼","\\leftharpoonup",!0);S(k,O,Y,"⇀","\\rightharpoonup",!0);S(k,O,Y,"↙","\\swarrow",!0);S(k,O,Y,"↽","\\leftharpoondown",!0);S(k,O,Y,"⇁","\\rightharpoondown",!0);S(k,O,Y,"↖","\\nwarrow",!0);S(k,O,Y,"⇌","\\rightleftharpoons",!0);S(k,$,Y,"≮","\\nless",!0);S(k,$,Y,"","\\@nleqslant");S(k,$,Y,"","\\@nleqq");S(k,$,Y,"⪇","\\lneq",!0);S(k,$,Y,"≨","\\lneqq",!0);S(k,$,Y,"","\\@lvertneqq");S(k,$,Y,"⋦","\\lnsim",!0);S(k,$,Y,"⪉","\\lnapprox",!0);S(k,$,Y,"⊀","\\nprec",!0);S(k,$,Y,"⋠","\\npreceq",!0);S(k,$,Y,"⋨","\\precnsim",!0);S(k,$,Y,"⪹","\\precnapprox",!0);S(k,$,Y,"≁","\\nsim",!0);S(k,$,Y,"","\\@nshortmid");S(k,$,Y,"∤","\\nmid",!0);S(k,$,Y,"⊬","\\nvdash",!0);S(k,$,Y,"⊭","\\nvDash",!0);S(k,$,Y,"⋪","\\ntriangleleft");S(k,$,Y,"⋬","\\ntrianglelefteq",!0);S(k,$,Y,"⊊","\\subsetneq",!0);S(k,$,Y,"","\\@varsubsetneq");S(k,$,Y,"⫋","\\subsetneqq",!0);S(k,$,Y,"","\\@varsubsetneqq");S(k,$,Y,"≯","\\ngtr",!0);S(k,$,Y,"","\\@ngeqslant");S(k,$,Y,"","\\@ngeqq");S(k,$,Y,"⪈","\\gneq",!0);S(k,$,Y,"≩","\\gneqq",!0);S(k,$,Y,"","\\@gvertneqq");S(k,$,Y,"⋧","\\gnsim",!0);S(k,$,Y,"⪊","\\gnapprox",!0);S(k,$,Y,"⊁","\\nsucc",!0);S(k,$,Y,"⋡","\\nsucceq",!0);S(k,$,Y,"⋩","\\succnsim",!0);S(k,$,Y,"⪺","\\succnapprox",!0);S(k,$,Y,"≆","\\ncong",!0);S(k,$,Y,"","\\@nshortparallel");S(k,$,Y,"∦","\\nparallel",!0);S(k,$,Y,"⊯","\\nVDash",!0);S(k,$,Y,"⋫","\\ntriangleright");S(k,$,Y,"⋭","\\ntrianglerighteq",!0);S(k,$,Y,"","\\@nsupseteqq");S(k,$,Y,"⊋","\\supsetneq",!0);S(k,$,Y,"","\\@varsupsetneq");S(k,$,Y,"⫌","\\supsetneqq",!0);S(k,$,Y,"","\\@varsupsetneqq");S(k,$,Y,"⊮","\\nVdash",!0);S(k,$,Y,"⪵","\\precneqq",!0);S(k,$,Y,"⪶","\\succneqq",!0);S(k,$,Y,"","\\@nsubseteqq");S(k,$,Ht,"⊴","\\unlhd");S(k,$,Ht,"⊵","\\unrhd");S(k,$,Y,"↚","\\nleftarrow",!0);S(k,$,Y,"↛","\\nrightarrow",!0);S(k,$,Y,"⇍","\\nLeftarrow",!0);S(k,$,Y,"⇏","\\nRightarrow",!0);S(k,$,Y,"↮","\\nleftrightarrow",!0);S(k,$,Y,"⇎","\\nLeftrightarrow",!0);S(k,$,Y,"△","\\vartriangle");S(k,$,Q,"ℏ","\\hslash");S(k,$,Q,"▽","\\triangledown");S(k,$,Q,"◊","\\lozenge");S(k,$,Q,"Ⓢ","\\circledS");S(k,$,Q,"®","\\circledR");S(Et,$,Q,"®","\\circledR");S(k,$,Q,"∡","\\measuredangle",!0);S(k,$,Q,"∄","\\nexists");S(k,$,Q,"℧","\\mho");S(k,$,Q,"Ⅎ","\\Finv",!0);S(k,$,Q,"⅁","\\Game",!0);S(k,$,Q,"‵","\\backprime");S(k,$,Q,"▲","\\blacktriangle");S(k,$,Q,"▼","\\blacktriangledown");S(k,$,Q,"■","\\blacksquare");S(k,$,Q,"⧫","\\blacklozenge");S(k,$,Q,"★","\\bigstar");S(k,$,Q,"∢","\\sphericalangle",!0);S(k,$,Q,"∁","\\complement",!0);S(k,$,Q,"ð","\\eth",!0);S(Et,O,Q,"ð","ð");S(k,$,Q,"╱","\\diagup");S(k,$,Q,"╲","\\diagdown");S(k,$,Q,"□","\\square");S(k,$,Q,"□","\\Box");S(k,$,Q,"◊","\\Diamond");S(k,$,Q,"¥","\\yen",!0);S(Et,$,Q,"¥","\\yen",!0);S(k,$,Q,"✓","\\checkmark",!0);S(Et,$,Q,"✓","\\checkmark");S(k,$,Q,"ℶ","\\beth",!0);S(k,$,Q,"ℸ","\\daleth",!0);S(k,$,Q,"ℷ","\\gimel",!0);S(k,$,Q,"ϝ","\\digamma",!0);S(k,$,Q,"ϰ","\\varkappa");S(k,$,kn,"┌","\\@ulcorner",!0);S(k,$,Zi,"┐","\\@urcorner",!0);S(k,$,kn,"└","\\@llcorner",!0);S(k,$,Zi,"┘","\\@lrcorner",!0);S(k,$,Y,"≦","\\leqq",!0);S(k,$,Y,"⩽","\\leqslant",!0);S(k,$,Y,"⪕","\\eqslantless",!0);S(k,$,Y,"≲","\\lesssim",!0);S(k,$,Y,"⪅","\\lessapprox",!0);S(k,$,Y,"≊","\\approxeq",!0);S(k,$,Ht,"⋖","\\lessdot");S(k,$,Y,"⋘","\\lll",!0);S(k,$,Y,"≶","\\lessgtr",!0);S(k,$,Y,"⋚","\\lesseqgtr",!0);S(k,$,Y,"⪋","\\lesseqqgtr",!0);S(k,$,Y,"≑","\\doteqdot");S(k,$,Y,"≓","\\risingdotseq",!0);S(k,$,Y,"≒","\\fallingdotseq",!0);S(k,$,Y,"∽","\\backsim",!0);S(k,$,Y,"⋍","\\backsimeq",!0);S(k,$,Y,"⫅","\\subseteqq",!0);S(k,$,Y,"⋐","\\Subset",!0);S(k,$,Y,"⊏","\\sqsubset",!0);S(k,$,Y,"≼","\\preccurlyeq",!0);S(k,$,Y,"⋞","\\curlyeqprec",!0);S(k,$,Y,"≾","\\precsim",!0);S(k,$,Y,"⪷","\\precapprox",!0);S(k,$,Y,"⊲","\\vartriangleleft");S(k,$,Y,"⊴","\\trianglelefteq");S(k,$,Y,"⊨","\\vDash",!0);S(k,$,Y,"⊪","\\Vvdash",!0);S(k,$,Y,"⌣","\\smallsmile");S(k,$,Y,"⌢","\\smallfrown");S(k,$,Y,"≏","\\bumpeq",!0);S(k,$,Y,"≎","\\Bumpeq",!0);S(k,$,Y,"≧","\\geqq",!0);S(k,$,Y,"⩾","\\geqslant",!0);S(k,$,Y,"⪖","\\eqslantgtr",!0);S(k,$,Y,"≳","\\gtrsim",!0);S(k,$,Y,"⪆","\\gtrapprox",!0);S(k,$,Ht,"⋗","\\gtrdot");S(k,$,Y,"⋙","\\ggg",!0);S(k,$,Y,"≷","\\gtrless",!0);S(k,$,Y,"⋛","\\gtreqless",!0);S(k,$,Y,"⪌","\\gtreqqless",!0);S(k,$,Y,"≖","\\eqcirc",!0);S(k,$,Y,"≗","\\circeq",!0);S(k,$,Y,"≜","\\triangleq",!0);S(k,$,Y,"∼","\\thicksim");S(k,$,Y,"≈","\\thickapprox");S(k,$,Y,"⫆","\\supseteqq",!0);S(k,$,Y,"⋑","\\Supset",!0);S(k,$,Y,"⊐","\\sqsupset",!0);S(k,$,Y,"≽","\\succcurlyeq",!0);S(k,$,Y,"⋟","\\curlyeqsucc",!0);S(k,$,Y,"≿","\\succsim",!0);S(k,$,Y,"⪸","\\succapprox",!0);S(k,$,Y,"⊳","\\vartriangleright");S(k,$,Y,"⊵","\\trianglerighteq");S(k,$,Y,"⊩","\\Vdash",!0);S(k,$,Y,"∣","\\shortmid");S(k,$,Y,"∥","\\shortparallel");S(k,$,Y,"≬","\\between",!0);S(k,$,Y,"⋔","\\pitchfork",!0);S(k,$,Y,"∝","\\varpropto");S(k,$,Y,"◀","\\blacktriangleleft");S(k,$,Y,"∴","\\therefore",!0);S(k,$,Y,"∍","\\backepsilon");S(k,$,Y,"▶","\\blacktriangleright");S(k,$,Y,"∵","\\because",!0);S(k,$,Y,"⋘","\\llless");S(k,$,Y,"⋙","\\gggtr");S(k,$,Ht,"⊲","\\lhd");S(k,$,Ht,"⊳","\\rhd");S(k,$,Y,"≂","\\eqsim",!0);S(k,O,Y,"⋈","\\Join");S(k,$,Y,"≑","\\Doteq",!0);S(k,$,Ht,"∔","\\dotplus",!0);S(k,$,Ht,"∖","\\smallsetminus");S(k,$,Ht,"⋒","\\Cap",!0);S(k,$,Ht,"⋓","\\Cup",!0);S(k,$,Ht,"⩞","\\doublebarwedge",!0);S(k,$,Ht,"⊟","\\boxminus",!0);S(k,$,Ht,"⊞","\\boxplus",!0);S(k,$,Ht,"⋇","\\divideontimes",!0);S(k,$,Ht,"⋉","\\ltimes",!0);S(k,$,Ht,"⋊","\\rtimes",!0);S(k,$,Ht,"⋋","\\leftthreetimes",!0);S(k,$,Ht,"⋌","\\rightthreetimes",!0);S(k,$,Ht,"⋏","\\curlywedge",!0);S(k,$,Ht,"⋎","\\curlyvee",!0);S(k,$,Ht,"⊝","\\circleddash",!0);S(k,$,Ht,"⊛","\\circledast",!0);S(k,$,Ht,"⋅","\\centerdot");S(k,$,Ht,"⊺","\\intercal",!0);S(k,$,Ht,"⋒","\\doublecap");S(k,$,Ht,"⋓","\\doublecup");S(k,$,Ht,"⊠","\\boxtimes",!0);S(k,$,Y,"⇢","\\dashrightarrow",!0);S(k,$,Y,"⇠","\\dashleftarrow",!0);S(k,$,Y,"⇇","\\leftleftarrows",!0);S(k,$,Y,"⇆","\\leftrightarrows",!0);S(k,$,Y,"⇚","\\Lleftarrow",!0);S(k,$,Y,"↞","\\twoheadleftarrow",!0);S(k,$,Y,"↢","\\leftarrowtail",!0);S(k,$,Y,"↫","\\looparrowleft",!0);S(k,$,Y,"⇋","\\leftrightharpoons",!0);S(k,$,Y,"↶","\\curvearrowleft",!0);S(k,$,Y,"↺","\\circlearrowleft",!0);S(k,$,Y,"↰","\\Lsh",!0);S(k,$,Y,"⇈","\\upuparrows",!0);S(k,$,Y,"↿","\\upharpoonleft",!0);S(k,$,Y,"⇃","\\downharpoonleft",!0);S(k,O,Y,"⊶","\\origof",!0);S(k,O,Y,"⊷","\\imageof",!0);S(k,$,Y,"⊸","\\multimap",!0);S(k,$,Y,"↭","\\leftrightsquigarrow",!0);S(k,$,Y,"⇉","\\rightrightarrows",!0);S(k,$,Y,"⇄","\\rightleftarrows",!0);S(k,$,Y,"↠","\\twoheadrightarrow",!0);S(k,$,Y,"↣","\\rightarrowtail",!0);S(k,$,Y,"↬","\\looparrowright",!0);S(k,$,Y,"↷","\\curvearrowright",!0);S(k,$,Y,"↻","\\circlearrowright",!0);S(k,$,Y,"↱","\\Rsh",!0);S(k,$,Y,"⇊","\\downdownarrows",!0);S(k,$,Y,"↾","\\upharpoonright",!0);S(k,$,Y,"⇂","\\downharpoonright",!0);S(k,$,Y,"⇝","\\rightsquigarrow",!0);S(k,$,Y,"⇝","\\leadsto");S(k,$,Y,"⇛","\\Rrightarrow",!0);S(k,$,Y,"↾","\\restriction");S(k,O,Q,"‘","`");S(k,O,Q,"$","\\$");S(Et,O,Q,"$","\\$");S(Et,O,Q,"$","\\textdollar");S(k,O,Q,"%","\\%");S(Et,O,Q,"%","\\%");S(k,O,Q,"_","\\_");S(Et,O,Q,"_","\\_");S(Et,O,Q,"_","\\textunderscore");S(k,O,Q,"∠","\\angle",!0);S(k,O,Q,"∞","\\infty",!0);S(k,O,Q,"′","\\prime");S(k,O,Q,"△","\\triangle");S(k,O,Q,"Γ","\\Gamma",!0);S(k,O,Q,"Δ","\\Delta",!0);S(k,O,Q,"Θ","\\Theta",!0);S(k,O,Q,"Λ","\\Lambda",!0);S(k,O,Q,"Ξ","\\Xi",!0);S(k,O,Q,"Π","\\Pi",!0);S(k,O,Q,"Σ","\\Sigma",!0);S(k,O,Q,"Υ","\\Upsilon",!0);S(k,O,Q,"Φ","\\Phi",!0);S(k,O,Q,"Ψ","\\Psi",!0);S(k,O,Q,"Ω","\\Omega",!0);S(k,O,Q,"A","Α");S(k,O,Q,"B","Β");S(k,O,Q,"E","Ε");S(k,O,Q,"Z","Ζ");S(k,O,Q,"H","Η");S(k,O,Q,"I","Ι");S(k,O,Q,"K","Κ");S(k,O,Q,"M","Μ");S(k,O,Q,"N","Ν");S(k,O,Q,"O","Ο");S(k,O,Q,"P","Ρ");S(k,O,Q,"T","Τ");S(k,O,Q,"X","Χ");S(k,O,Q,"¬","\\neg",!0);S(k,O,Q,"¬","\\lnot");S(k,O,Q,"⊤","\\top");S(k,O,Q,"⊥","\\bot");S(k,O,Q,"∅","\\emptyset");S(k,$,Q,"∅","\\varnothing");S(k,O,te,"α","\\alpha",!0);S(k,O,te,"β","\\beta",!0);S(k,O,te,"γ","\\gamma",!0);S(k,O,te,"δ","\\delta",!0);S(k,O,te,"ϵ","\\epsilon",!0);S(k,O,te,"ζ","\\zeta",!0);S(k,O,te,"η","\\eta",!0);S(k,O,te,"θ","\\theta",!0);S(k,O,te,"ι","\\iota",!0);S(k,O,te,"κ","\\kappa",!0);S(k,O,te,"λ","\\lambda",!0);S(k,O,te,"μ","\\mu",!0);S(k,O,te,"ν","\\nu",!0);S(k,O,te,"ξ","\\xi",!0);S(k,O,te,"ο","\\omicron",!0);S(k,O,te,"π","\\pi",!0);S(k,O,te,"ρ","\\rho",!0);S(k,O,te,"σ","\\sigma",!0);S(k,O,te,"τ","\\tau",!0);S(k,O,te,"υ","\\upsilon",!0);S(k,O,te,"ϕ","\\phi",!0);S(k,O,te,"χ","\\chi",!0);S(k,O,te,"ψ","\\psi",!0);S(k,O,te,"ω","\\omega",!0);S(k,O,te,"ε","\\varepsilon",!0);S(k,O,te,"ϑ","\\vartheta",!0);S(k,O,te,"ϖ","\\varpi",!0);S(k,O,te,"ϱ","\\varrho",!0);S(k,O,te,"ς","\\varsigma",!0);S(k,O,te,"φ","\\varphi",!0);S(k,O,Ht,"∗","*",!0);S(k,O,Ht,"+","+");S(k,O,Ht,"−","-",!0);S(k,O,Ht,"⋅","\\cdot",!0);S(k,O,Ht,"∘","\\circ",!0);S(k,O,Ht,"÷","\\div",!0);S(k,O,Ht,"±","\\pm",!0);S(k,O,Ht,"×","\\times",!0);S(k,O,Ht,"∩","\\cap",!0);S(k,O,Ht,"∪","\\cup",!0);S(k,O,Ht,"∖","\\setminus",!0);S(k,O,Ht,"∧","\\land");S(k,O,Ht,"∨","\\lor");S(k,O,Ht,"∧","\\wedge",!0);S(k,O,Ht,"∨","\\vee",!0);S(k,O,Q,"√","\\surd");S(k,O,kn,"⟨","\\langle",!0);S(k,O,kn,"∣","\\lvert");S(k,O,kn,"∥","\\lVert");S(k,O,Zi,"?","?");S(k,O,Zi,"!","!");S(k,O,Zi,"⟩","\\rangle",!0);S(k,O,Zi,"∣","\\rvert");S(k,O,Zi,"∥","\\rVert");S(k,O,Y,"=","=");S(k,O,Y,":",":");S(k,O,Y,"≈","\\approx",!0);S(k,O,Y,"≅","\\cong",!0);S(k,O,Y,"≥","\\ge");S(k,O,Y,"≥","\\geq",!0);S(k,O,Y,"←","\\gets");S(k,O,Y,">","\\gt",!0);S(k,O,Y,"∈","\\in",!0);S(k,O,Y,"","\\@not");S(k,O,Y,"⊂","\\subset",!0);S(k,O,Y,"⊃","\\supset",!0);S(k,O,Y,"⊆","\\subseteq",!0);S(k,O,Y,"⊇","\\supseteq",!0);S(k,$,Y,"⊈","\\nsubseteq",!0);S(k,$,Y,"⊉","\\nsupseteq",!0);S(k,O,Y,"⊨","\\models");S(k,O,Y,"←","\\leftarrow",!0);S(k,O,Y,"≤","\\le");S(k,O,Y,"≤","\\leq",!0);S(k,O,Y,"<","\\lt",!0);S(k,O,Y,"→","\\rightarrow",!0);S(k,O,Y,"→","\\to");S(k,$,Y,"≱","\\ngeq",!0);S(k,$,Y,"≰","\\nleq",!0);S(k,O,Xr," ","\\ ");S(k,O,Xr," ","\\space");S(k,O,Xr," ","\\nobreakspace");S(Et,O,Xr," ","\\ ");S(Et,O,Xr," "," ");S(Et,O,Xr," ","\\space");S(Et,O,Xr," ","\\nobreakspace");S(k,O,Xr,null,"\\nobreak");S(k,O,Xr,null,"\\allowbreak");S(k,O,lu,",",",");S(k,O,lu,";",";");S(k,$,Ht,"⊼","\\barwedge",!0);S(k,$,Ht,"⊻","\\veebar",!0);S(k,O,Ht,"⊙","\\odot",!0);S(k,O,Ht,"⊕","\\oplus",!0);S(k,O,Ht,"⊗","\\otimes",!0);S(k,O,Q,"∂","\\partial",!0);S(k,O,Ht,"⊘","\\oslash",!0);S(k,$,Ht,"⊚","\\circledcirc",!0);S(k,$,Ht,"⊡","\\boxdot",!0);S(k,O,Ht,"△","\\bigtriangleup");S(k,O,Ht,"▽","\\bigtriangledown");S(k,O,Ht,"†","\\dagger");S(k,O,Ht,"⋄","\\diamond");S(k,O,Ht,"⋆","\\star");S(k,O,Ht,"◃","\\triangleleft");S(k,O,Ht,"▹","\\triangleright");S(k,O,kn,"{","\\{");S(Et,O,Q,"{","\\{");S(Et,O,Q,"{","\\textbraceleft");S(k,O,Zi,"}","\\}");S(Et,O,Q,"}","\\}");S(Et,O,Q,"}","\\textbraceright");S(k,O,kn,"{","\\lbrace");S(k,O,Zi,"}","\\rbrace");S(k,O,kn,"[","\\lbrack",!0);S(Et,O,Q,"[","\\lbrack",!0);S(k,O,Zi,"]","\\rbrack",!0);S(Et,O,Q,"]","\\rbrack",!0);S(k,O,kn,"(","\\lparen",!0);S(k,O,Zi,")","\\rparen",!0);S(Et,O,Q,"<","\\textless",!0);S(Et,O,Q,">","\\textgreater",!0);S(k,O,kn,"⌊","\\lfloor",!0);S(k,O,Zi,"⌋","\\rfloor",!0);S(k,O,kn,"⌈","\\lceil",!0);S(k,O,Zi,"⌉","\\rceil",!0);S(k,O,Q,"\\","\\backslash");S(k,O,Q,"∣","|");S(k,O,Q,"∣","\\vert");S(Et,O,Q,"|","\\textbar",!0);S(k,O,Q,"∥","\\|");S(k,O,Q,"∥","\\Vert");S(Et,O,Q,"∥","\\textbardbl");S(Et,O,Q,"~","\\textasciitilde");S(Et,O,Q,"\\","\\textbackslash");S(Et,O,Q,"^","\\textasciicircum");S(k,O,Y,"↑","\\uparrow",!0);S(k,O,Y,"⇑","\\Uparrow",!0);S(k,O,Y,"↓","\\downarrow",!0);S(k,O,Y,"⇓","\\Downarrow",!0);S(k,O,Y,"↕","\\updownarrow",!0);S(k,O,Y,"⇕","\\Updownarrow",!0);S(k,O,Si,"∐","\\coprod");S(k,O,Si,"⋁","\\bigvee");S(k,O,Si,"⋀","\\bigwedge");S(k,O,Si,"⨄","\\biguplus");S(k,O,Si,"⋂","\\bigcap");S(k,O,Si,"⋃","\\bigcup");S(k,O,Si,"∫","\\int");S(k,O,Si,"∫","\\intop");S(k,O,Si,"∬","\\iint");S(k,O,Si,"∭","\\iiint");S(k,O,Si,"∏","\\prod");S(k,O,Si,"∑","\\sum");S(k,O,Si,"⨂","\\bigotimes");S(k,O,Si,"⨁","\\bigoplus");S(k,O,Si,"⨀","\\bigodot");S(k,O,Si,"∮","\\oint");S(k,O,Si,"∯","\\oiint");S(k,O,Si,"∰","\\oiiint");S(k,O,Si,"⨆","\\bigsqcup");S(k,O,Si,"∫","\\smallint");S(Et,O,mo,"…","\\textellipsis");S(k,O,mo,"…","\\mathellipsis");S(Et,O,mo,"…","\\ldots",!0);S(k,O,mo,"…","\\ldots",!0);S(k,O,mo,"⋯","\\@cdots",!0);S(k,O,mo,"⋱","\\ddots",!0);S(k,O,Q,"⋮","\\varvdots");S(Et,O,Q,"⋮","\\varvdots");S(k,O,Je,"ˊ","\\acute");S(k,O,Je,"ˋ","\\grave");S(k,O,Je,"¨","\\ddot");S(k,O,Je,"~","\\tilde");S(k,O,Je,"ˉ","\\bar");S(k,O,Je,"˘","\\breve");S(k,O,Je,"ˇ","\\check");S(k,O,Je,"^","\\hat");S(k,O,Je,"⃗","\\vec");S(k,O,Je,"˙","\\dot");S(k,O,Je,"˚","\\mathring");S(k,O,te,"","\\@imath");S(k,O,te,"","\\@jmath");S(k,O,Q,"ı","ı");S(k,O,Q,"ȷ","ȷ");S(Et,O,Q,"ı","\\i",!0);S(Et,O,Q,"ȷ","\\j",!0);S(Et,O,Q,"ß","\\ss",!0);S(Et,O,Q,"æ","\\ae",!0);S(Et,O,Q,"œ","\\oe",!0);S(Et,O,Q,"ø","\\o",!0);S(Et,O,Q,"Æ","\\AE",!0);S(Et,O,Q,"Œ","\\OE",!0);S(Et,O,Q,"Ø","\\O",!0);S(Et,O,Je,"ˊ","\\'");S(Et,O,Je,"ˋ","\\`");S(Et,O,Je,"ˆ","\\^");S(Et,O,Je,"˜","\\~");S(Et,O,Je,"ˉ","\\=");S(Et,O,Je,"˘","\\u");S(Et,O,Je,"˙","\\.");S(Et,O,Je,"¸","\\c");S(Et,O,Je,"˚","\\r");S(Et,O,Je,"ˇ","\\v");S(Et,O,Je,"¨",'\\"');S(Et,O,Je,"˝","\\H");S(Et,O,Je,"◯","\\textcircled");var Zb={"--":!0,"---":!0,"``":!0,"''":!0};S(Et,O,Q,"–","--",!0);S(Et,O,Q,"–","\\textendash");S(Et,O,Q,"—","---",!0);S(Et,O,Q,"—","\\textemdash");S(Et,O,Q,"‘","`",!0);S(Et,O,Q,"‘","\\textquoteleft");S(Et,O,Q,"’","'",!0);S(Et,O,Q,"’","\\textquoteright");S(Et,O,Q,"“","``",!0);S(Et,O,Q,"“","\\textquotedblleft");S(Et,O,Q,"”","''",!0);S(Et,O,Q,"”","\\textquotedblright");S(k,O,Q,"°","\\degree",!0);S(Et,O,Q,"°","\\degree");S(Et,O,Q,"°","\\textdegree",!0);S(k,O,Q,"£","\\pounds");S(k,O,Q,"£","\\mathsterling",!0);S(Et,O,Q,"£","\\pounds");S(Et,O,Q,"£","\\textsterling",!0);S(k,$,Q,"✠","\\maltese");S(Et,$,Q,"✠","\\maltese");var v4='0123456789/@."';for(var Ud=0;Ud<v4.length;Ud++){var y4=v4.charAt(Ud);S(k,O,Q,y4,y4)}var x4='0123456789!@*()-=+";:?/.,';for(var Hd=0;Hd<x4.length;Hd++){var w4=x4.charAt(Hd);S(Et,O,Q,w4,w4)}var X0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var jd=0;jd<X0.length;jd++){var E0=X0.charAt(jd);S(k,O,te,E0,E0),S(Et,O,Q,E0,E0)}S(k,$,Q,"C","ℂ");S(Et,$,Q,"C","ℂ");S(k,$,Q,"H","ℍ");S(Et,$,Q,"H","ℍ");S(k,$,Q,"N","ℕ");S(Et,$,Q,"N","ℕ");S(k,$,Q,"P","ℙ");S(Et,$,Q,"P","ℙ");S(k,$,Q,"Q","ℚ");S(Et,$,Q,"Q","ℚ");S(k,$,Q,"R","ℝ");S(Et,$,Q,"R","ℝ");S(k,$,Q,"Z","ℤ");S(Et,$,Q,"Z","ℤ");S(k,O,te,"h","ℎ");S(Et,O,te,"h","ℎ");var re="";for(var Gi=0;Gi<X0.length;Gi++){var li=X0.charAt(Gi);re=String.fromCharCode(55349,56320+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),re=String.fromCharCode(55349,56372+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),re=String.fromCharCode(55349,56424+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),re=String.fromCharCode(55349,56580+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),re=String.fromCharCode(55349,56684+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),re=String.fromCharCode(55349,56736+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),re=String.fromCharCode(55349,56788+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),re=String.fromCharCode(55349,56840+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),re=String.fromCharCode(55349,56944+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),Gi<26&&(re=String.fromCharCode(55349,56632+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re),re=String.fromCharCode(55349,56476+Gi),S(k,O,te,li,re),S(Et,O,Q,li,re))}re="𝕜";S(k,O,te,"k",re);S(Et,O,Q,"k",re);for(var Qs=0;Qs<10;Qs++){var xs=Qs.toString();re=String.fromCharCode(55349,57294+Qs),S(k,O,te,xs,re),S(Et,O,Q,xs,re),re=String.fromCharCode(55349,57314+Qs),S(k,O,te,xs,re),S(Et,O,Q,xs,re),re=String.fromCharCode(55349,57324+Qs),S(k,O,te,xs,re),S(Et,O,Q,xs,re),re=String.fromCharCode(55349,57334+Qs),S(k,O,te,xs,re),S(Et,O,Q,xs,re)}var xf="ÐÞþ";for(var Gd=0;Gd<xf.length;Gd++){var T0=xf.charAt(Gd);S(k,O,te,T0,T0),S(Et,O,Q,T0,T0)}var C0=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],S4=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],tx=function(t,e){var i=t.charCodeAt(0),r=t.charCodeAt(1),a=(i-55296)*1024+(r-56320)+65536,o=e==="math"?0:1;if(119808<=a&&a<120484){var u=Math.floor((a-119808)/26);return[C0[u][2],C0[u][o]]}else if(120782<=a&&a<=120831){var h=Math.floor((a-120782)/10);return[S4[h][2],S4[h][o]]}else{if(a===120485||a===120486)return[C0[0][2],C0[0][o]];if(120486<a&&a<120782)return["",""];throw new Mt("Unsupported character: "+t)}},cu=function(t,e,i){return Ve[i][t]&&Ve[i][t].replace&&(t=Ve[i][t].replace),{value:t,metrics:im(t,e,i)}},Kn=function(t,e,i,r,a){var o=cu(t,e,i),u=o.metrics;t=o.value;var h;if(u){var f=u.italic;(i==="text"||r&&r.font==="mathit")&&(f=0),h=new Hn(t,u.height,u.depth,f,u.skew,u.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+e+"' and mode '"+i+"'")),h=new Hn(t,0,0,0,0,0,a);if(r){h.maxFontSize=r.sizeMultiplier,r.style.isTight()&&h.classes.push("mtight");var m=r.getColor();m&&(h.style.color=m)}return h},ex=function(t,e,i,r){return r===void 0&&(r=[]),i.font==="boldsymbol"&&cu(t,"Main-Bold",e).metrics?Kn(t,"Main-Bold",e,i,r.concat(["mathbf"])):t==="\\"||Ve[e][t].font==="main"?Kn(t,"Main-Regular",e,i,r):Kn(t,"AMS-Regular",e,i,r.concat(["amsrm"]))},ix=function(t,e,i,r,a){return a!=="textord"&&cu(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},nx=function(t,e,i){var r=t.mode,a=t.text,o=["mord"],u=r==="math"||r==="text"&&e.font,h=u?e.font:e.fontFamily,f="",m="";if(a.charCodeAt(0)===55349&&([f,m]=tx(a,r)),f.length>0)return Kn(a,f,r,e,o.concat(m));if(h){var p,b;if(h==="boldsymbol"){var v=ix(a,r,e,o,i);p=v.fontName,b=[v.fontClass]}else u?(p=Jb[h].fontName,b=[h]):(p=M0(h,e.fontWeight,e.fontShape),b=[h,e.fontWeight,e.fontShape]);if(cu(a,p,r).metrics)return Kn(a,p,r,e,o.concat(b));if(Zb.hasOwnProperty(a)&&p.slice(0,10)==="Typewriter"){for(var w=[],x=0;x<a.length;x++)w.push(Kn(a[x],p,r,e,o.concat(b)));return Qb(w)}}if(i==="mathord")return Kn(a,"Math-Italic",r,e,o.concat(["mathnormal"]));if(i==="textord"){var _=Ve[r][a]&&Ve[r][a].font;if(_==="ams"){var A=M0("amsrm",e.fontWeight,e.fontShape);return Kn(a,A,r,e,o.concat("amsrm",e.fontWeight,e.fontShape))}else if(_==="main"||!_){var T=M0("textrm",e.fontWeight,e.fontShape);return Kn(a,T,r,e,o.concat(e.fontWeight,e.fontShape))}else{var M=M0(_,e.fontWeight,e.fontShape);return Kn(a,M,r,e,o.concat(M,e.fontWeight,e.fontShape))}}else throw new Error("unexpected type: "+i+" in makeOrd")},rx=(l,t)=>{if(Cs(l.classes)!==Cs(t.classes)||l.skew!==t.skew||l.maxFontSize!==t.maxFontSize)return!1;if(l.classes.length===1){var e=l.classes[0];if(e==="mbin"||e==="mord")return!1}for(var i in l.style)if(l.style.hasOwnProperty(i)&&l.style[i]!==t.style[i])return!1;for(var r in t.style)if(t.style.hasOwnProperty(r)&&l.style[r]!==t.style[r])return!1;return!0},sx=l=>{for(var t=0;t<l.length-1;t++){var e=l[t],i=l[t+1];e instanceof Hn&&i instanceof Hn&&rx(e,i)&&(e.text+=i.text,e.height=Math.max(e.height,i.height),e.depth=Math.max(e.depth,i.depth),e.italic=i.italic,l.splice(t+1,1),t--)}return l},rm=function(t){for(var e=0,i=0,r=0,a=0;a<t.children.length;a++){var o=t.children[a];o.height>e&&(e=o.height),o.depth>i&&(i=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}t.height=e,t.depth=i,t.maxFontSize=r},un=function(t,e,i,r){var a=new Vl(t,e,i,r);return rm(a),a},Wb=(l,t,e,i)=>new Vl(l,t,e,i),ax=function(t,e,i){var r=un([t],[],e);return r.height=Math.max(i||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),r.style.borderBottomWidth=Ot(r.height),r.maxFontSize=1,r},ox=function(t,e,i,r){var a=new nm(t,e,i,r);return rm(a),a},Qb=function(t){var e=new $l(t);return rm(e),e},lx=function(t,e){return t instanceof $l?un([],[t],e):t},cx=function(t){if(t.positionType==="individualShift"){for(var e=t.children,i=[e[0]],r=-e[0].shift-e[0].elem.depth,a=r,o=1;o<e.length;o++){var u=-e[o].shift-a-e[o].elem.depth,h=u-(e[o-1].elem.height+e[o-1].elem.depth);a=a+u,i.push({type:"kern",size:h}),i.push(e[o])}return{children:i,depth:r}}var f;if(t.positionType==="top"){for(var m=t.positionData,p=0;p<t.children.length;p++){var b=t.children[p];m-=b.type==="kern"?b.size:b.elem.height+b.elem.depth}f=m}else if(t.positionType==="bottom")f=-t.positionData;else{var v=t.children[0];if(v.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")f=-v.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")f=-v.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:f}},ux=function(t,e){for(var{children:i,depth:r}=cx(t),a=0,o=0;o<i.length;o++){var u=i[o];if(u.type==="elem"){var h=u.elem;a=Math.max(a,h.maxFontSize,h.height)}}a+=2;var f=un(["pstrut"],[]);f.style.height=Ot(a);for(var m=[],p=r,b=r,v=r,w=0;w<i.length;w++){var x=i[w];if(x.type==="kern")v+=x.size;else{var _=x.elem,A=x.wrapperClasses||[],T=x.wrapperStyle||{},M=un(A,[f,_],void 0,T);M.style.top=Ot(-a-v-_.depth),x.marginLeft&&(M.style.marginLeft=x.marginLeft),x.marginRight&&(M.style.marginRight=x.marginRight),m.push(M),v+=_.height+_.depth}p=Math.min(p,v),b=Math.max(b,v)}var N=un(["vlist"],m);N.style.height=Ot(b);var R;if(p<0){var B=un([],[]),z=un(["vlist"],[B]);z.style.height=Ot(-p);var G=un(["vlist-s"],[new Hn("​")]);R=[un(["vlist-r"],[N,G]),un(["vlist-r"],[z])]}else R=[un(["vlist-r"],[N])];var U=un(["vlist-t"],R);return R.length===2&&U.classes.push("vlist-t2"),U.height=b,U.depth=-p,U},hx=(l,t)=>{var e=un(["mspace"],[],t),i=ni(l,t);return e.style.marginRight=Ot(i),e},M0=function(t,e,i){var r="";switch(t){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=t}var a;return e==="textbf"&&i==="textit"?a="BoldItalic":e==="textbf"?a="Bold":e==="textit"?a="Italic":a="Regular",r+"-"+a},Jb={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},tv={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},dx=function(t,e){var[i,r,a]=tv[t],o=new Ms(i),u=new $r([o],{width:Ot(r),height:Ot(a),style:"width:"+Ot(r),viewBox:"0 0 "+1e3*r+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),h=Wb(["overlay"],[u],e);return h.height=a,h.style.height=Ot(a),h.style.width=Ot(r),h},at={fontMap:Jb,makeSymbol:Kn,mathsym:ex,makeSpan:un,makeSvgSpan:Wb,makeLineSpan:ax,makeAnchor:ox,makeFragment:Qb,wrapFragment:lx,makeVList:ux,makeOrd:nx,makeGlue:hx,staticSvg:dx,svgData:tv,tryCombineChars:sx},ii={number:3,unit:"mu"},Js={number:4,unit:"mu"},Fr={number:5,unit:"mu"},fx={mord:{mop:ii,mbin:Js,mrel:Fr,minner:ii},mop:{mord:ii,mop:ii,mrel:Fr,minner:ii},mbin:{mord:Js,mop:Js,mopen:Js,minner:Js},mrel:{mord:Fr,mop:Fr,mopen:Fr,minner:Fr},mopen:{},mclose:{mop:ii,mbin:Js,mrel:Fr,minner:ii},mpunct:{mord:ii,mop:ii,mrel:Fr,mopen:ii,mclose:ii,mpunct:ii,minner:ii},minner:{mord:ii,mop:ii,mbin:Js,mrel:Fr,mopen:ii,mpunct:ii,minner:ii}},mx={mord:{mop:ii},mop:{mord:ii,mop:ii},mbin:{},mrel:{},mopen:{},mclose:{mop:ii},mpunct:{},minner:{mop:ii}},ev={},K0={},Z0={};function Ft(l){for(var{type:t,names:e,props:i,handler:r,htmlBuilder:a,mathmlBuilder:o}=l,u={type:t,numArgs:i.numArgs,argTypes:i.argTypes,allowedInArgument:!!i.allowedInArgument,allowedInText:!!i.allowedInText,allowedInMath:i.allowedInMath===void 0?!0:i.allowedInMath,numOptionalArgs:i.numOptionalArgs||0,infix:!!i.infix,primitive:!!i.primitive,handler:r},h=0;h<e.length;++h)ev[e[h]]=u;t&&(a&&(K0[t]=a),o&&(Z0[t]=o))}function ha(l){var{type:t,htmlBuilder:e,mathmlBuilder:i}=l;Ft({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:e,mathmlBuilder:i})}var W0=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},mi=function(t){return t.type==="ordgroup"?t.body:[t]},Vr=at.makeSpan,px=["leftmost","mbin","mopen","mrel","mop","mpunct"],gx=["rightmost","mrel","mclose","mpunct"],bx={display:ee.DISPLAY,text:ee.TEXT,script:ee.SCRIPT,scriptscript:ee.SCRIPTSCRIPT},vx={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ki=function(t,e,i,r){r===void 0&&(r=[null,null]);for(var a=[],o=0;o<t.length;o++){var u=Ee(t[o],e);if(u instanceof $l){var h=u.children;a.push(...h)}else a.push(u)}if(at.tryCombineChars(a),!i)return a;var f=e;if(t.length===1){var m=t[0];m.type==="sizing"?f=e.havingSize(m.size):m.type==="styling"&&(f=e.havingStyle(bx[m.style]))}var p=Vr([r[0]||"leftmost"],[],e),b=Vr([r[1]||"rightmost"],[],e),v=i==="root";return A4(a,(w,x)=>{var _=x.classes[0],A=w.classes[0];_==="mbin"&&gx.includes(A)?x.classes[0]="mord":A==="mbin"&&px.includes(_)&&(w.classes[0]="mord")},{node:p},b,v),A4(a,(w,x)=>{var _=wf(x),A=wf(w),T=_&&A?w.hasClass("mtight")?mx[_][A]:fx[_][A]:null;if(T)return at.makeGlue(T,f)},{node:p},b,v),a},A4=function l(t,e,i,r,a){r&&t.push(r);for(var o=0;o<t.length;o++){var u=t[o],h=iv(u);if(h){l(h.children,e,i,null,a);continue}var f=!u.hasClass("mspace");if(f){var m=e(u,i.node);m&&(i.insertAfter?i.insertAfter(m):(t.unshift(m),o++))}f?i.node=u:a&&u.hasClass("newline")&&(i.node=Vr(["leftmost"])),i.insertAfter=(p=>b=>{t.splice(p+1,0,b),o++})(o)}r&&t.pop()},iv=function(t){return t instanceof $l||t instanceof nm||t instanceof Vl&&t.hasClass("enclosing")?t:null},yx=function l(t,e){var i=iv(t);if(i){var r=i.children;if(r.length){if(e==="right")return l(r[r.length-1],"right");if(e==="left")return l(r[0],"left")}}return t},wf=function(t,e){return t?(e&&(t=yx(t,e)),vx[t.classes[0]]||null):null},Ll=function(t,e){var i=["nulldelimiter"].concat(t.baseSizingClasses());return Vr(e.concat(i))},Ee=function(t,e,i){if(!t)return Vr();if(K0[t.type]){var r=K0[t.type](t,e);if(i&&e.size!==i.size){r=Vr(e.sizingClasses(i),[r],e);var a=e.sizeMultiplier/i.sizeMultiplier;r.height*=a,r.depth*=a}return r}else throw new Mt("Got group of unknown type: '"+t.type+"'")};function R0(l,t){var e=Vr(["base"],l,t),i=Vr(["strut"]);return i.style.height=Ot(e.height+e.depth),e.depth&&(i.style.verticalAlign=Ot(-e.depth)),e.children.unshift(i),e}function Sf(l,t){var e=null;l.length===1&&l[0].type==="tag"&&(e=l[0].tag,l=l[0].body);var i=ki(l,t,"root"),r;i.length===2&&i[1].hasClass("tag")&&(r=i.pop());for(var a=[],o=[],u=0;u<i.length;u++)if(o.push(i[u]),i[u].hasClass("mbin")||i[u].hasClass("mrel")||i[u].hasClass("allowbreak")){for(var h=!1;u<i.length-1&&i[u+1].hasClass("mspace")&&!i[u+1].hasClass("newline");)u++,o.push(i[u]),i[u].hasClass("nobreak")&&(h=!0);h||(a.push(R0(o,t)),o=[])}else i[u].hasClass("newline")&&(o.pop(),o.length>0&&(a.push(R0(o,t)),o=[]),a.push(i[u]));o.length>0&&a.push(R0(o,t));var f;e?(f=R0(ki(e,t,!0)),f.classes=["tag"],a.push(f)):r&&a.push(r);var m=Vr(["katex-html"],a);if(m.setAttribute("aria-hidden","true"),f){var p=f.children[0];p.style.height=Ot(m.height+m.depth),m.depth&&(p.style.verticalAlign=Ot(-m.depth))}return m}function nv(l){return new $l(l)}class An{constructor(t,e,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=e||[],this.classes=i||[]}setAttribute(t,e){this.attributes[t]=e}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);this.classes.length>0&&(t.className=Cs(this.classes));for(var i=0;i<this.children.length;i++)if(this.children[i]instanceof fr&&this.children[i+1]instanceof fr){for(var r=this.children[i].toText()+this.children[++i].toText();this.children[i+1]instanceof fr;)r+=this.children[++i].toText();t.appendChild(new fr(r).toNode())}else t.appendChild(this.children[i].toNode());return t}toMarkup(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=Me.escape(this.attributes[e]),t+='"');this.classes.length>0&&(t+=' class ="'+Me.escape(Cs(this.classes))+'"'),t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class fr{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Me.escape(this.toText())}toText(){return this.text}}class xx{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character=" ":t>=.1666&&t<=.1667?this.character=" ":t>=.2222&&t<=.2223?this.character=" ":t>=.2777&&t<=.2778?this.character="  ":t>=-.05556&&t<=-.05555?this.character=" ⁣":t>=-.1667&&t<=-.1666?this.character=" ⁣":t>=-.2223&&t<=-.2222?this.character=" ⁣":t>=-.2778&&t<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",Ot(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Ot(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ct={MathNode:An,TextNode:fr,SpaceNode:xx,newDocumentFragment:nv},jn=function(t,e,i){return Ve[e][t]&&Ve[e][t].replace&&t.charCodeAt(0)!==55349&&!(Zb.hasOwnProperty(t)&&i&&(i.fontFamily&&i.fontFamily.slice(4,6)==="tt"||i.font&&i.font.slice(4,6)==="tt"))&&(t=Ve[e][t].replace),new Ct.TextNode(t)},sm=function(t){return t.length===1?t[0]:new Ct.MathNode("mrow",t)},am=function(t,e){if(e.fontFamily==="texttt")return"monospace";if(e.fontFamily==="textsf")return e.fontShape==="textit"&&e.fontWeight==="textbf"?"sans-serif-bold-italic":e.fontShape==="textit"?"sans-serif-italic":e.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(e.fontShape==="textit"&&e.fontWeight==="textbf")return"bold-italic";if(e.fontShape==="textit")return"italic";if(e.fontWeight==="textbf")return"bold";var i=e.font;if(!i||i==="mathnormal")return null;var r=t.mode;if(i==="mathit")return"italic";if(i==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(i==="mathbf")return"bold";if(i==="mathbb")return"double-struck";if(i==="mathsfit")return"sans-serif-italic";if(i==="mathfrak")return"fraktur";if(i==="mathscr"||i==="mathcal")return"script";if(i==="mathsf")return"sans-serif";if(i==="mathtt")return"monospace";var a=t.text;if(["\\imath","\\jmath"].includes(a))return null;Ve[r][a]&&Ve[r][a].replace&&(a=Ve[r][a].replace);var o=at.fontMap[i].fontName;return im(a,o,r)?at.fontMap[i].variant:null};function qd(l){if(!l)return!1;if(l.type==="mi"&&l.children.length===1){var t=l.children[0];return t instanceof fr&&t.text==="."}else if(l.type==="mo"&&l.children.length===1&&l.getAttribute("separator")==="true"&&l.getAttribute("lspace")==="0em"&&l.getAttribute("rspace")==="0em"){var e=l.children[0];return e instanceof fr&&e.text===","}else return!1}var fn=function(t,e,i){if(t.length===1){var r=qe(t[0],e);return i&&r instanceof An&&r.type==="mo"&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var a=[],o,u=0;u<t.length;u++){var h=qe(t[u],e);if(h instanceof An&&o instanceof An){if(h.type==="mtext"&&o.type==="mtext"&&h.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...h.children);continue}else if(h.type==="mn"&&o.type==="mn"){o.children.push(...h.children);continue}else if(qd(h)&&o.type==="mn"){o.children.push(...h.children);continue}else if(h.type==="mn"&&qd(o))h.children=[...o.children,...h.children],a.pop();else if((h.type==="msup"||h.type==="msub")&&h.children.length>=1&&(o.type==="mn"||qd(o))){var f=h.children[0];f instanceof An&&f.type==="mn"&&(f.children=[...o.children,...f.children],a.pop())}else if(o.type==="mi"&&o.children.length===1){var m=o.children[0];if(m instanceof fr&&m.text==="̸"&&(h.type==="mo"||h.type==="mi"||h.type==="mn")){var p=h.children[0];p instanceof fr&&p.text.length>0&&(p.text=p.text.slice(0,1)+"̸"+p.text.slice(1),a.pop())}}}a.push(h),o=h}return a},Rs=function(t,e,i){return sm(fn(t,e,i))},qe=function(t,e){if(!t)return new Ct.MathNode("mrow");if(Z0[t.type]){var i=Z0[t.type](t,e);return i}else throw new Mt("Got group of unknown type: '"+t.type+"'")};function _4(l,t,e,i,r){var a=fn(l,e),o;a.length===1&&a[0]instanceof An&&["mrow","mtable"].includes(a[0].type)?o=a[0]:o=new Ct.MathNode("mrow",a);var u=new Ct.MathNode("annotation",[new Ct.TextNode(t)]);u.setAttribute("encoding","application/x-tex");var h=new Ct.MathNode("semantics",[o,u]),f=new Ct.MathNode("math",[h]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),i&&f.setAttribute("display","block");var m=r?"katex":"katex-mathml";return at.makeSpan([m],[f])}var rv=function(t){return new Hr({style:t.displayMode?ee.DISPLAY:ee.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},sv=function(t,e){if(e.displayMode){var i=["katex-display"];e.leqno&&i.push("leqno"),e.fleqn&&i.push("fleqn"),t=at.makeSpan(i,[t])}return t},wx=function(t,e,i){var r=rv(i),a;if(i.output==="mathml")return _4(t,e,r,i.displayMode,!0);if(i.output==="html"){var o=Sf(t,r);a=at.makeSpan(["katex"],[o])}else{var u=_4(t,e,r,i.displayMode,!1),h=Sf(t,r);a=at.makeSpan(["katex"],[u,h])}return sv(a,i)},Sx=function(t,e,i){var r=rv(i),a=Sf(t,r),o=at.makeSpan(["katex"],[a]);return sv(o,i)},Ax={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},_x=function(t){var e=new Ct.MathNode("mo",[new Ct.TextNode(Ax[t.replace(/^\\/,"")])]);return e.setAttribute("stretchy","true"),e},kx={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Ex=function(t){return t.type==="ordgroup"?t.body.length:1},Tx=function(t,e){function i(){var u=4e5,h=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(h)){var f=t,m=Ex(f.base),p,b,v;if(m>5)h==="widehat"||h==="widecheck"?(p=420,u=2364,v=.42,b=h+"4"):(p=312,u=2340,v=.34,b="tilde4");else{var w=[1,1,2,2,3,3][m];h==="widehat"||h==="widecheck"?(u=[0,1062,2364,2364,2364][w],p=[0,239,300,360,420][w],v=[0,.24,.3,.3,.36,.42][w],b=h+w):(u=[0,600,1033,2339,2340][w],p=[0,260,286,306,312][w],v=[0,.26,.286,.3,.306,.34][w],b="tilde"+w)}var x=new Ms(b),_=new $r([x],{width:"100%",height:Ot(v),viewBox:"0 0 "+u+" "+p,preserveAspectRatio:"none"});return{span:at.makeSvgSpan([],[_],e),minWidth:0,height:v}}else{var A=[],T=kx[h],[M,N,R]=T,B=R/1e3,z=M.length,G,U;if(z===1){var et=T[3];G=["hide-tail"],U=[et]}else if(z===2)G=["halfarrow-left","halfarrow-right"],U=["xMinYMin","xMaxYMin"];else if(z===3)G=["brace-left","brace-center","brace-right"],U=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+z+" children.");for(var ut=0;ut<z;ut++){var H=new Ms(M[ut]),it=new $r([H],{width:"400em",height:Ot(B),viewBox:"0 0 "+u+" "+R,preserveAspectRatio:U[ut]+" slice"}),D=at.makeSvgSpan([G[ut]],[it],e);if(z===1)return{span:D,minWidth:N,height:B};D.style.height=Ot(B),A.push(D)}return{span:at.makeSpan(["stretchy"],A,e),minWidth:N,height:B}}}var{span:r,minWidth:a,height:o}=i();return r.height=o,r.style.height=Ot(o),a>0&&(r.style.minWidth=Ot(a)),r},Cx=function(t,e,i,r,a){var o,u=t.height+t.depth+i+r;if(/fbox|color|angl/.test(e)){if(o=at.makeSpan(["stretchy",e],[],a),e==="fbox"){var h=a.color&&a.getColor();h&&(o.style.borderColor=h)}}else{var f=[];/^[bx]cancel$/.test(e)&&f.push(new yf({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&f.push(new yf({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var m=new $r(f,{width:"100%",height:Ot(u)});o=at.makeSvgSpan([],[m],a)}return o.height=u,o.style.height=Ot(u),o},Yr={encloseSpan:Cx,mathMLnode:_x,svgSpan:Tx};function fe(l,t){if(!l||l.type!==t)throw new Error("Expected node of type "+t+", but got "+(l?"node of type "+l.type:String(l)));return l}function om(l){var t=uu(l);if(!t)throw new Error("Expected node of symbol group type, but got "+(l?"node of type "+l.type:String(l)));return t}function uu(l){return l&&(l.type==="atom"||J8.hasOwnProperty(l.type))?l:null}var lm=(l,t)=>{var e,i,r;l&&l.type==="supsub"?(i=fe(l.base,"accent"),e=i.base,l.base=e,r=W8(Ee(l,t)),l.base=i):(i=fe(l,"accent"),e=i.base);var a=Ee(e,t.havingCrampedStyle()),o=i.isShifty&&Me.isCharacterBox(e),u=0;if(o){var h=Me.getBaseElem(e),f=Ee(h,t.havingCrampedStyle());u=b4(f).skew}var m=i.label==="\\c",p=m?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),b;if(i.isStretchy)b=Yr.svgSpan(i,t),b=at.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:b,wrapperClasses:["svg-align"],wrapperStyle:u>0?{width:"calc(100% - "+Ot(2*u)+")",marginLeft:Ot(2*u)}:void 0}]},t);else{var v,w;i.label==="\\vec"?(v=at.staticSvg("vec",t),w=at.svgData.vec[1]):(v=at.makeOrd({mode:i.mode,text:i.label},t,"textord"),v=b4(v),v.italic=0,w=v.width,m&&(p+=v.depth)),b=at.makeSpan(["accent-body"],[v]);var x=i.label==="\\textcircled";x&&(b.classes.push("accent-full"),p=a.height);var _=u;x||(_-=w/2),b.style.left=Ot(_),i.label==="\\textcircled"&&(b.style.top=".2em"),b=at.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-p},{type:"elem",elem:b}]},t)}var A=at.makeSpan(["mord","accent"],[b],t);return r?(r.children[0]=A,r.height=Math.max(A.height,r.height),r.classes[0]="mord",r):A},av=(l,t)=>{var e=l.isStretchy?Yr.mathMLnode(l.label):new Ct.MathNode("mo",[jn(l.label,l.mode)]),i=new Ct.MathNode("mover",[qe(l.base,t),e]);return i.setAttribute("accent","true"),i},Mx=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(l=>"\\"+l).join("|"));Ft({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(l,t)=>{var e=W0(t[0]),i=!Mx.test(l.funcName),r=!i||l.funcName==="\\widehat"||l.funcName==="\\widetilde"||l.funcName==="\\widecheck";return{type:"accent",mode:l.parser.mode,label:l.funcName,isStretchy:i,isShifty:r,base:e}},htmlBuilder:lm,mathmlBuilder:av});Ft({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(l,t)=>{var e=t[0],i=l.parser.mode;return i==="math"&&(l.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+l.funcName+" works only in text mode"),i="text"),{type:"accent",mode:i,label:l.funcName,isStretchy:!1,isShifty:!0,base:e}},htmlBuilder:lm,mathmlBuilder:av});Ft({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0];return{type:"accentUnder",mode:e.mode,label:i,base:r}},htmlBuilder:(l,t)=>{var e=Ee(l.base,t),i=Yr.svgSpan(l,t),r=l.label==="\\utilde"?.12:0,a=at.makeVList({positionType:"top",positionData:e.height,children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:e}]},t);return at.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(l,t)=>{var e=Yr.mathMLnode(l.label),i=new Ct.MathNode("munder",[qe(l.base,t),e]);return i.setAttribute("accentunder","true"),i}});var D0=l=>{var t=new Ct.MathNode("mpadded",l?[l]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Ft({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(l,t,e){var{parser:i,funcName:r}=l;return{type:"xArrow",mode:i.mode,label:r,body:t[0],below:e[0]}},htmlBuilder(l,t){var e=t.style,i=t.havingStyle(e.sup()),r=at.wrapFragment(Ee(l.body,i,t),t),a=l.label.slice(0,2)==="\\x"?"x":"cd";r.classes.push(a+"-arrow-pad");var o;l.below&&(i=t.havingStyle(e.sub()),o=at.wrapFragment(Ee(l.below,i,t),t),o.classes.push(a+"-arrow-pad"));var u=Yr.svgSpan(l,t),h=-t.fontMetrics().axisHeight+.5*u.height,f=-t.fontMetrics().axisHeight-.5*u.height-.111;(r.depth>.25||l.label==="\\xleftequilibrium")&&(f-=r.depth);var m;if(o){var p=-t.fontMetrics().axisHeight+o.height+.5*u.height+.111;m=at.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:f},{type:"elem",elem:u,shift:h},{type:"elem",elem:o,shift:p}]},t)}else m=at.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:f},{type:"elem",elem:u,shift:h}]},t);return m.children[0].children[0].children[1].classes.push("svg-align"),at.makeSpan(["mrel","x-arrow"],[m],t)},mathmlBuilder(l,t){var e=Yr.mathMLnode(l.label);e.setAttribute("minsize",l.label.charAt(0)==="x"?"1.75em":"3.0em");var i;if(l.body){var r=D0(qe(l.body,t));if(l.below){var a=D0(qe(l.below,t));i=new Ct.MathNode("munderover",[e,a,r])}else i=new Ct.MathNode("mover",[e,r])}else if(l.below){var o=D0(qe(l.below,t));i=new Ct.MathNode("munder",[e,o])}else i=D0(),i=new Ct.MathNode("mover",[e,i]);return i}});var Rx=at.makeSpan;function ov(l,t){var e=ki(l.body,t,!0);return Rx([l.mclass],e,t)}function lv(l,t){var e,i=fn(l.body,t);return l.mclass==="minner"?e=new Ct.MathNode("mpadded",i):l.mclass==="mord"?l.isCharacterBox?(e=i[0],e.type="mi"):e=new Ct.MathNode("mi",i):(l.isCharacterBox?(e=i[0],e.type="mo"):e=new Ct.MathNode("mo",i),l.mclass==="mbin"?(e.attributes.lspace="0.22em",e.attributes.rspace="0.22em"):l.mclass==="mpunct"?(e.attributes.lspace="0em",e.attributes.rspace="0.17em"):l.mclass==="mopen"||l.mclass==="mclose"?(e.attributes.lspace="0em",e.attributes.rspace="0em"):l.mclass==="minner"&&(e.attributes.lspace="0.0556em",e.attributes.width="+0.1111em")),e}Ft({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];return{type:"mclass",mode:e.mode,mclass:"m"+i.slice(5),body:mi(r),isCharacterBox:Me.isCharacterBox(r)}},htmlBuilder:ov,mathmlBuilder:lv});var hu=l=>{var t=l.type==="ordgroup"&&l.body.length?l.body[0]:l;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Ft({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(l,t){var{parser:e}=l;return{type:"mclass",mode:e.mode,mclass:hu(t[0]),body:mi(t[1]),isCharacterBox:Me.isCharacterBox(t[1])}}});Ft({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(l,t){var{parser:e,funcName:i}=l,r=t[1],a=t[0],o;i!=="\\stackrel"?o=hu(r):o="mrel";var u={type:"op",mode:r.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:i!=="\\stackrel",body:mi(r)},h={type:"supsub",mode:a.mode,base:u,sup:i==="\\underset"?null:a,sub:i==="\\underset"?a:null};return{type:"mclass",mode:e.mode,mclass:o,body:[h],isCharacterBox:Me.isCharacterBox(h)}},htmlBuilder:ov,mathmlBuilder:lv});Ft({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(l,t){var{parser:e}=l;return{type:"pmb",mode:e.mode,mclass:hu(t[0]),body:mi(t[0])}},htmlBuilder(l,t){var e=ki(l.body,t,!0),i=at.makeSpan([l.mclass],e,t);return i.style.textShadow="0.02em 0.01em 0.04px",i},mathmlBuilder(l,t){var e=fn(l.body,t),i=new Ct.MathNode("mstyle",e);return i.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),i}});var Dx={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},k4=()=>({type:"styling",body:[],mode:"math",style:"display"}),E4=l=>l.type==="textord"&&l.text==="@",Nx=(l,t)=>(l.type==="mathord"||l.type==="atom")&&l.text===t;function Ox(l,t,e){var i=Dx[l];switch(i){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return e.callFunction(i,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var r=e.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:i,mode:"math",family:"rel"},o=e.callFunction("\\Big",[a],[]),u=e.callFunction("\\\\cdright",[t[1]],[]),h={type:"ordgroup",mode:"math",body:[r,o,u]};return e.callFunction("\\\\cdparent",[h],[])}case"\\\\cdlongequal":return e.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return e.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function zx(l){var t=[];for(l.gullet.beginGroup(),l.gullet.macros.set("\\cr","\\\\\\relax"),l.gullet.beginGroup();;){t.push(l.parseExpression(!1,"\\\\")),l.gullet.endGroup(),l.gullet.beginGroup();var e=l.fetch().text;if(e==="&"||e==="\\\\")l.consume();else if(e==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new Mt("Expected \\\\ or \\cr or \\end",l.nextToken)}for(var i=[],r=[i],a=0;a<t.length;a++){for(var o=t[a],u=k4(),h=0;h<o.length;h++)if(!E4(o[h]))u.body.push(o[h]);else{i.push(u),h+=1;var f=om(o[h]).text,m=new Array(2);if(m[0]={type:"ordgroup",mode:"math",body:[]},m[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var p=0;p<2;p++){for(var b=!0,v=h+1;v<o.length;v++){if(Nx(o[v],f)){b=!1,h=v;break}if(E4(o[v]))throw new Mt("Missing a "+f+" character to complete a CD arrow.",o[v]);m[p].body.push(o[v])}if(b)throw new Mt("Missing a "+f+" character to complete a CD arrow.",o[h])}else throw new Mt('Expected one of "<>AV=|." after @',o[h]);var w=Ox(f,m,l),x={type:"styling",body:[w],mode:"math",style:"display"};i.push(x),u=k4()}a%2===0?i.push(u):i.shift(),i=[],r.push(i)}l.gullet.endGroup(),l.gullet.endGroup();var _=new Array(r[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:r,arraystretch:1,addJot:!0,rowGaps:[null],cols:_,colSeparationType:"CD",hLinesBeforeRow:new Array(r.length+1).fill([])}}Ft({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(l,t){var{parser:e,funcName:i}=l;return{type:"cdlabel",mode:e.mode,side:i.slice(4),label:t[0]}},htmlBuilder(l,t){var e=t.havingStyle(t.style.sup()),i=at.wrapFragment(Ee(l.label,e,t),t);return i.classes.push("cd-label-"+l.side),i.style.bottom=Ot(.8-i.depth),i.height=0,i.depth=0,i},mathmlBuilder(l,t){var e=new Ct.MathNode("mrow",[qe(l.label,t)]);return e=new Ct.MathNode("mpadded",[e]),e.setAttribute("width","0"),l.side==="left"&&e.setAttribute("lspace","-1width"),e.setAttribute("voffset","0.7em"),e=new Ct.MathNode("mstyle",[e]),e.setAttribute("displaystyle","false"),e.setAttribute("scriptlevel","1"),e}});Ft({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(l,t){var{parser:e}=l;return{type:"cdlabelparent",mode:e.mode,fragment:t[0]}},htmlBuilder(l,t){var e=at.wrapFragment(Ee(l.fragment,t),t);return e.classes.push("cd-vert-arrow"),e},mathmlBuilder(l,t){return new Ct.MathNode("mrow",[qe(l.fragment,t)])}});Ft({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(l,t){for(var{parser:e}=l,i=fe(t[0],"ordgroup"),r=i.body,a="",o=0;o<r.length;o++){var u=fe(r[o],"textord");a+=u.text}var h=parseInt(a),f;if(isNaN(h))throw new Mt("\\@char has non-numeric argument "+a);if(h<0||h>=1114111)throw new Mt("\\@char with invalid code point "+a);return h<=65535?f=String.fromCharCode(h):(h-=65536,f=String.fromCharCode((h>>10)+55296,(h&1023)+56320)),{type:"textord",mode:e.mode,text:f}}});var cv=(l,t)=>{var e=ki(l.body,t.withColor(l.color),!1);return at.makeFragment(e)},uv=(l,t)=>{var e=fn(l.body,t.withColor(l.color)),i=new Ct.MathNode("mstyle",e);return i.setAttribute("mathcolor",l.color),i};Ft({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(l,t){var{parser:e}=l,i=fe(t[0],"color-token").color,r=t[1];return{type:"color",mode:e.mode,color:i,body:mi(r)}},htmlBuilder:cv,mathmlBuilder:uv});Ft({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(l,t){var{parser:e,breakOnTokenText:i}=l,r=fe(t[0],"color-token").color;e.gullet.macros.set("\\current@color",r);var a=e.parseExpression(!0,i);return{type:"color",mode:e.mode,color:r,body:a}},htmlBuilder:cv,mathmlBuilder:uv});Ft({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(l,t,e){var{parser:i}=l,r=i.gullet.future().text==="["?i.parseSizeGroup(!0):null,a=!i.settings.displayMode||!i.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:i.mode,newLine:a,size:r&&fe(r,"size").value}},htmlBuilder(l,t){var e=at.makeSpan(["mspace"],[],t);return l.newLine&&(e.classes.push("newline"),l.size&&(e.style.marginTop=Ot(ni(l.size,t)))),e},mathmlBuilder(l,t){var e=new Ct.MathNode("mspace");return l.newLine&&(e.setAttribute("linebreak","newline"),l.size&&e.setAttribute("height",Ot(ni(l.size,t)))),e}});var Af={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},hv=l=>{var t=l.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new Mt("Expected a control sequence",l);return t},Lx=l=>{var t=l.gullet.popToken();return t.text==="="&&(t=l.gullet.popToken(),t.text===" "&&(t=l.gullet.popToken())),t},dv=(l,t,e,i)=>{var r=l.gullet.macros.get(e.text);r==null&&(e.noexpand=!0,r={tokens:[e],numArgs:0,unexpandable:!l.gullet.isExpandable(e.text)}),l.gullet.macros.set(t,r,i)};Ft({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(l){var{parser:t,funcName:e}=l;t.consumeSpaces();var i=t.fetch();if(Af[i.text])return(e==="\\global"||e==="\\\\globallong")&&(i.text=Af[i.text]),fe(t.parseFunction(),"internal");throw new Mt("Invalid token after macro prefix",i)}});Ft({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l){var{parser:t,funcName:e}=l,i=t.gullet.popToken(),r=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new Mt("Expected a control sequence",i);for(var a=0,o,u=[[]];t.gullet.future().text!=="{";)if(i=t.gullet.popToken(),i.text==="#"){if(t.gullet.future().text==="{"){o=t.gullet.future(),u[a].push("{");break}if(i=t.gullet.popToken(),!/^[1-9]$/.test(i.text))throw new Mt('Invalid argument number "'+i.text+'"');if(parseInt(i.text)!==a+1)throw new Mt('Argument number "'+i.text+'" out of order');a++,u.push([])}else{if(i.text==="EOF")throw new Mt("Expected a macro definition");u[a].push(i.text)}var{tokens:h}=t.gullet.consumeArg();return o&&h.unshift(o),(e==="\\edef"||e==="\\xdef")&&(h=t.gullet.expandTokens(h),h.reverse()),t.gullet.macros.set(r,{tokens:h,numArgs:a,delimiters:u},e===Af[e]),{type:"internal",mode:t.mode}}});Ft({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l){var{parser:t,funcName:e}=l,i=hv(t.gullet.popToken());t.gullet.consumeSpaces();var r=Lx(t);return dv(t,i,r,e==="\\\\globallet"),{type:"internal",mode:t.mode}}});Ft({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l){var{parser:t,funcName:e}=l,i=hv(t.gullet.popToken()),r=t.gullet.popToken(),a=t.gullet.popToken();return dv(t,i,a,e==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(r),{type:"internal",mode:t.mode}}});var wl=function(t,e,i){var r=Ve.math[t]&&Ve.math[t].replace,a=im(r||t,e,i);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return a},cm=function(t,e,i,r){var a=i.havingBaseStyle(e),o=at.makeSpan(r.concat(a.sizingClasses(i)),[t],i),u=a.sizeMultiplier/i.sizeMultiplier;return o.height*=u,o.depth*=u,o.maxFontSize=a.sizeMultiplier,o},fv=function(t,e,i){var r=e.havingBaseStyle(i),a=(1-e.sizeMultiplier/r.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=Ot(a),t.height-=a,t.depth+=a},Bx=function(t,e,i,r,a,o){var u=at.makeSymbol(t,"Main-Regular",a,r),h=cm(u,e,r,o);return i&&fv(h,r,e),h},Ix=function(t,e,i,r){return at.makeSymbol(t,"Size"+e+"-Regular",i,r)},mv=function(t,e,i,r,a,o){var u=Ix(t,e,a,r),h=cm(at.makeSpan(["delimsizing","size"+e],[u],r),ee.TEXT,r,o);return i&&fv(h,r,ee.TEXT),h},$d=function(t,e,i){var r;e==="Size1-Regular"?r="delim-size1":r="delim-size4";var a=at.makeSpan(["delimsizinginner",r],[at.makeSpan([],[at.makeSymbol(t,e,i)])]);return{type:"elem",elem:a}},Vd=function(t,e,i){var r=dr["Size4-Regular"][t.charCodeAt(0)]?dr["Size4-Regular"][t.charCodeAt(0)][4]:dr["Size1-Regular"][t.charCodeAt(0)][4],a=new Ms("inner",j8(t,Math.round(1e3*e))),o=new $r([a],{width:Ot(r),height:Ot(e),style:"width:"+Ot(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*e),preserveAspectRatio:"xMinYMin"}),u=at.makeSvgSpan([],[o],i);return u.height=e,u.style.height=Ot(e),u.style.width=Ot(r),{type:"elem",elem:u}},_f=.008,N0={type:"kern",size:-1*_f},Fx=["|","\\lvert","\\rvert","\\vert"],Px=["\\|","\\lVert","\\rVert","\\Vert"],pv=function(t,e,i,r,a,o){var u,h,f,m,p="",b=0;u=f=m=t,h=null;var v="Size1-Regular";t==="\\uparrow"?f=m="⏐":t==="\\Uparrow"?f=m="‖":t==="\\downarrow"?u=f="⏐":t==="\\Downarrow"?u=f="‖":t==="\\updownarrow"?(u="\\uparrow",f="⏐",m="\\downarrow"):t==="\\Updownarrow"?(u="\\Uparrow",f="‖",m="\\Downarrow"):Fx.includes(t)?(f="∣",p="vert",b=333):Px.includes(t)?(f="∥",p="doublevert",b=556):t==="["||t==="\\lbrack"?(u="⎡",f="⎢",m="⎣",v="Size4-Regular",p="lbrack",b=667):t==="]"||t==="\\rbrack"?(u="⎤",f="⎥",m="⎦",v="Size4-Regular",p="rbrack",b=667):t==="\\lfloor"||t==="⌊"?(f=u="⎢",m="⎣",v="Size4-Regular",p="lfloor",b=667):t==="\\lceil"||t==="⌈"?(u="⎡",f=m="⎢",v="Size4-Regular",p="lceil",b=667):t==="\\rfloor"||t==="⌋"?(f=u="⎥",m="⎦",v="Size4-Regular",p="rfloor",b=667):t==="\\rceil"||t==="⌉"?(u="⎤",f=m="⎥",v="Size4-Regular",p="rceil",b=667):t==="("||t==="\\lparen"?(u="⎛",f="⎜",m="⎝",v="Size4-Regular",p="lparen",b=875):t===")"||t==="\\rparen"?(u="⎞",f="⎟",m="⎠",v="Size4-Regular",p="rparen",b=875):t==="\\{"||t==="\\lbrace"?(u="⎧",h="⎨",m="⎩",f="⎪",v="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(u="⎫",h="⎬",m="⎭",f="⎪",v="Size4-Regular"):t==="\\lgroup"||t==="⟮"?(u="⎧",m="⎩",f="⎪",v="Size4-Regular"):t==="\\rgroup"||t==="⟯"?(u="⎫",m="⎭",f="⎪",v="Size4-Regular"):t==="\\lmoustache"||t==="⎰"?(u="⎧",m="⎭",f="⎪",v="Size4-Regular"):(t==="\\rmoustache"||t==="⎱")&&(u="⎫",m="⎩",f="⎪",v="Size4-Regular");var w=wl(u,v,a),x=w.height+w.depth,_=wl(f,v,a),A=_.height+_.depth,T=wl(m,v,a),M=T.height+T.depth,N=0,R=1;if(h!==null){var B=wl(h,v,a);N=B.height+B.depth,R=2}var z=x+M+N,G=Math.max(0,Math.ceil((e-z)/(R*A))),U=z+G*R*A,et=r.fontMetrics().axisHeight;i&&(et*=r.sizeMultiplier);var ut=U/2-et,H=[];if(p.length>0){var it=U-x-M,D=Math.round(U*1e3),rt=G8(p,Math.round(it*1e3)),V=new Ms(p,rt),K=(b/1e3).toFixed(3)+"em",yt=(D/1e3).toFixed(3)+"em",pt=new $r([V],{width:K,height:yt,viewBox:"0 0 "+b+" "+D}),Tt=at.makeSvgSpan([],[pt],r);Tt.height=D/1e3,Tt.style.width=K,Tt.style.height=yt,H.push({type:"elem",elem:Tt})}else{if(H.push($d(m,v,a)),H.push(N0),h===null){var L=U-x-M+2*_f;H.push(Vd(f,L,r))}else{var P=(U-x-M-N)/2+2*_f;H.push(Vd(f,P,r)),H.push(N0),H.push($d(h,v,a)),H.push(N0),H.push(Vd(f,P,r))}H.push(N0),H.push($d(u,v,a))}var ot=r.havingBaseStyle(ee.TEXT),ht=at.makeVList({positionType:"bottom",positionData:ut,children:H},ot);return cm(at.makeSpan(["delimsizing","mult"],[ht],ot),ee.TEXT,r,o)},Yd=80,Xd=.08,Kd=function(t,e,i,r,a){var o=H8(t,r,i),u=new Ms(t,o),h=new $r([u],{width:"400em",height:Ot(e),viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return at.makeSvgSpan(["hide-tail"],[h],a)},Ux=function(t,e){var i=e.havingBaseSizing(),r=yv("\\surd",t*i.sizeMultiplier,vv,i),a=i.sizeMultiplier,o=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),u,h=0,f=0,m=0,p;return r.type==="small"?(m=1e3+1e3*o+Yd,t<1?a=1:t<1.4&&(a=.7),h=(1+o+Xd)/a,f=(1+o)/a,u=Kd("sqrtMain",h,m,o,e),u.style.minWidth="0.853em",p=.833/a):r.type==="large"?(m=(1e3+Yd)*kl[r.size],f=(kl[r.size]+o)/a,h=(kl[r.size]+o+Xd)/a,u=Kd("sqrtSize"+r.size,h,m,o,e),u.style.minWidth="1.02em",p=1/a):(h=t+o+Xd,f=t+o,m=Math.floor(1e3*t+o)+Yd,u=Kd("sqrtTall",h,m,o,e),u.style.minWidth="0.742em",p=1.056),u.height=f,u.style.height=Ot(h),{span:u,advanceWidth:p,ruleWidth:(e.fontMetrics().sqrtRuleThickness+o)*a}},gv=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],Hx=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],bv=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],kl=[0,1.2,1.8,2.4,3],jx=function(t,e,i,r,a){if(t==="<"||t==="\\lt"||t==="⟨"?t="\\langle":(t===">"||t==="\\gt"||t==="⟩")&&(t="\\rangle"),gv.includes(t)||bv.includes(t))return mv(t,e,!1,i,r,a);if(Hx.includes(t))return pv(t,kl[e],!1,i,r,a);throw new Mt("Illegal delimiter: '"+t+"'")},Gx=[{type:"small",style:ee.SCRIPTSCRIPT},{type:"small",style:ee.SCRIPT},{type:"small",style:ee.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],qx=[{type:"small",style:ee.SCRIPTSCRIPT},{type:"small",style:ee.SCRIPT},{type:"small",style:ee.TEXT},{type:"stack"}],vv=[{type:"small",style:ee.SCRIPTSCRIPT},{type:"small",style:ee.SCRIPT},{type:"small",style:ee.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],$x=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},yv=function(t,e,i,r){for(var a=Math.min(2,3-r.style.size),o=a;o<i.length&&i[o].type!=="stack";o++){var u=wl(t,$x(i[o]),"math"),h=u.height+u.depth;if(i[o].type==="small"){var f=r.havingBaseStyle(i[o].style);h*=f.sizeMultiplier}if(h>e)return i[o]}return i[i.length-1]},xv=function(t,e,i,r,a,o){t==="<"||t==="\\lt"||t==="⟨"?t="\\langle":(t===">"||t==="\\gt"||t==="⟩")&&(t="\\rangle");var u;bv.includes(t)?u=Gx:gv.includes(t)?u=vv:u=qx;var h=yv(t,e,u,r);return h.type==="small"?Bx(t,h.style,i,r,a,o):h.type==="large"?mv(t,h.size,i,r,a,o):pv(t,e,i,r,a,o)},Vx=function(t,e,i,r,a,o){var u=r.fontMetrics().axisHeight*r.sizeMultiplier,h=901,f=5/r.fontMetrics().ptPerEm,m=Math.max(e-u,i+u),p=Math.max(m/500*h,2*m-f);return xv(t,p,!0,r,a,o)},qr={sqrtImage:Ux,sizedDelim:jx,sizeToMaxHeight:kl,customSizedDelim:xv,leftRightDelim:Vx},T4={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Yx=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function du(l,t){var e=uu(l);if(e&&Yx.includes(e.text))return e;throw e?new Mt("Invalid delimiter '"+e.text+"' after '"+t.funcName+"'",l):new Mt("Invalid delimiter type '"+l.type+"'",l)}Ft({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(l,t)=>{var e=du(t[0],l);return{type:"delimsizing",mode:l.parser.mode,size:T4[l.funcName].size,mclass:T4[l.funcName].mclass,delim:e.text}},htmlBuilder:(l,t)=>l.delim==="."?at.makeSpan([l.mclass]):qr.sizedDelim(l.delim,l.size,t,l.mode,[l.mclass]),mathmlBuilder:l=>{var t=[];l.delim!=="."&&t.push(jn(l.delim,l.mode));var e=new Ct.MathNode("mo",t);l.mclass==="mopen"||l.mclass==="mclose"?e.setAttribute("fence","true"):e.setAttribute("fence","false"),e.setAttribute("stretchy","true");var i=Ot(qr.sizeToMaxHeight[l.size]);return e.setAttribute("minsize",i),e.setAttribute("maxsize",i),e}});function C4(l){if(!l.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Ft({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var e=l.parser.gullet.macros.get("\\current@color");if(e&&typeof e!="string")throw new Mt("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:l.parser.mode,delim:du(t[0],l).text,color:e}}});Ft({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var e=du(t[0],l),i=l.parser;++i.leftrightDepth;var r=i.parseExpression(!1);--i.leftrightDepth,i.expect("\\right",!1);var a=fe(i.parseFunction(),"leftright-right");return{type:"leftright",mode:i.mode,body:r,left:e.text,right:a.delim,rightColor:a.color}},htmlBuilder:(l,t)=>{C4(l);for(var e=ki(l.body,t,!0,["mopen","mclose"]),i=0,r=0,a=!1,o=0;o<e.length;o++)e[o].isMiddle?a=!0:(i=Math.max(e[o].height,i),r=Math.max(e[o].depth,r));i*=t.sizeMultiplier,r*=t.sizeMultiplier;var u;if(l.left==="."?u=Ll(t,["mopen"]):u=qr.leftRightDelim(l.left,i,r,t,l.mode,["mopen"]),e.unshift(u),a)for(var h=1;h<e.length;h++){var f=e[h],m=f.isMiddle;m&&(e[h]=qr.leftRightDelim(m.delim,i,r,m.options,l.mode,[]))}var p;if(l.right===".")p=Ll(t,["mclose"]);else{var b=l.rightColor?t.withColor(l.rightColor):t;p=qr.leftRightDelim(l.right,i,r,b,l.mode,["mclose"])}return e.push(p),at.makeSpan(["minner"],e,t)},mathmlBuilder:(l,t)=>{C4(l);var e=fn(l.body,t);if(l.left!=="."){var i=new Ct.MathNode("mo",[jn(l.left,l.mode)]);i.setAttribute("fence","true"),e.unshift(i)}if(l.right!=="."){var r=new Ct.MathNode("mo",[jn(l.right,l.mode)]);r.setAttribute("fence","true"),l.rightColor&&r.setAttribute("mathcolor",l.rightColor),e.push(r)}return sm(e)}});Ft({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var e=du(t[0],l);if(!l.parser.leftrightDepth)throw new Mt("\\middle without preceding \\left",e);return{type:"middle",mode:l.parser.mode,delim:e.text}},htmlBuilder:(l,t)=>{var e;if(l.delim===".")e=Ll(t,[]);else{e=qr.sizedDelim(l.delim,1,t,l.mode,[]);var i={delim:l.delim,options:t};e.isMiddle=i}return e},mathmlBuilder:(l,t)=>{var e=l.delim==="\\vert"||l.delim==="|"?jn("|","text"):jn(l.delim,l.mode),i=new Ct.MathNode("mo",[e]);return i.setAttribute("fence","true"),i.setAttribute("lspace","0.05em"),i.setAttribute("rspace","0.05em"),i}});var um=(l,t)=>{var e=at.wrapFragment(Ee(l.body,t),t),i=l.label.slice(1),r=t.sizeMultiplier,a,o=0,u=Me.isCharacterBox(l.body);if(i==="sout")a=at.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/r,o=-.5*t.fontMetrics().xHeight;else if(i==="phase"){var h=ni({number:.6,unit:"pt"},t),f=ni({number:.35,unit:"ex"},t),m=t.havingBaseSizing();r=r/m.sizeMultiplier;var p=e.height+e.depth+h+f;e.style.paddingLeft=Ot(p/2+h);var b=Math.floor(1e3*p*r),v=P8(b),w=new $r([new Ms("phase",v)],{width:"400em",height:Ot(b/1e3),viewBox:"0 0 400000 "+b,preserveAspectRatio:"xMinYMin slice"});a=at.makeSvgSpan(["hide-tail"],[w],t),a.style.height=Ot(p),o=e.depth+h+f}else{/cancel/.test(i)?u||e.classes.push("cancel-pad"):i==="angl"?e.classes.push("anglpad"):e.classes.push("boxpad");var x=0,_=0,A=0;/box/.test(i)?(A=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),x=t.fontMetrics().fboxsep+(i==="colorbox"?0:A),_=x):i==="angl"?(A=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),x=4*A,_=Math.max(0,.25-e.depth)):(x=u?.2:0,_=x),a=Yr.encloseSpan(e,i,x,_,t),/fbox|boxed|fcolorbox/.test(i)?(a.style.borderStyle="solid",a.style.borderWidth=Ot(A)):i==="angl"&&A!==.049&&(a.style.borderTopWidth=Ot(A),a.style.borderRightWidth=Ot(A)),o=e.depth+_,l.backgroundColor&&(a.style.backgroundColor=l.backgroundColor,l.borderColor&&(a.style.borderColor=l.borderColor))}var T;if(l.backgroundColor)T=at.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:o},{type:"elem",elem:e,shift:0}]},t);else{var M=/cancel|phase/.test(i)?["svg-align"]:[];T=at.makeVList({positionType:"individualShift",children:[{type:"elem",elem:e,shift:0},{type:"elem",elem:a,shift:o,wrapperClasses:M}]},t)}return/cancel/.test(i)&&(T.height=e.height,T.depth=e.depth),/cancel/.test(i)&&!u?at.makeSpan(["mord","cancel-lap"],[T],t):at.makeSpan(["mord"],[T],t)},hm=(l,t)=>{var e=0,i=new Ct.MathNode(l.label.indexOf("colorbox")>-1?"mpadded":"menclose",[qe(l.body,t)]);switch(l.label){case"\\cancel":i.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":i.setAttribute("notation","downdiagonalstrike");break;case"\\phase":i.setAttribute("notation","phasorangle");break;case"\\sout":i.setAttribute("notation","horizontalstrike");break;case"\\fbox":i.setAttribute("notation","box");break;case"\\angl":i.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(e=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,i.setAttribute("width","+"+2*e+"pt"),i.setAttribute("height","+"+2*e+"pt"),i.setAttribute("lspace",e+"pt"),i.setAttribute("voffset",e+"pt"),l.label==="\\fcolorbox"){var r=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);i.setAttribute("style","border: "+r+"em solid "+String(l.borderColor))}break;case"\\xcancel":i.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return l.backgroundColor&&i.setAttribute("mathbackground",l.backgroundColor),i};Ft({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(l,t,e){var{parser:i,funcName:r}=l,a=fe(t[0],"color-token").color,o=t[1];return{type:"enclose",mode:i.mode,label:r,backgroundColor:a,body:o}},htmlBuilder:um,mathmlBuilder:hm});Ft({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(l,t,e){var{parser:i,funcName:r}=l,a=fe(t[0],"color-token").color,o=fe(t[1],"color-token").color,u=t[2];return{type:"enclose",mode:i.mode,label:r,backgroundColor:o,borderColor:a,body:u}},htmlBuilder:um,mathmlBuilder:hm});Ft({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(l,t){var{parser:e}=l;return{type:"enclose",mode:e.mode,label:"\\fbox",body:t[0]}}});Ft({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];return{type:"enclose",mode:e.mode,label:i,body:r}},htmlBuilder:um,mathmlBuilder:hm});Ft({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(l,t){var{parser:e}=l;return{type:"enclose",mode:e.mode,label:"\\angl",body:t[0]}}});var wv={};function pr(l){for(var{type:t,names:e,props:i,handler:r,htmlBuilder:a,mathmlBuilder:o}=l,u={type:t,numArgs:i.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r},h=0;h<e.length;++h)wv[e[h]]=u;a&&(K0[t]=a),o&&(Z0[t]=o)}var Sv={};function F(l,t){Sv[l]=t}function M4(l){var t=[];l.consumeSpaces();var e=l.fetch().text;for(e==="\\relax"&&(l.consume(),l.consumeSpaces(),e=l.fetch().text);e==="\\hline"||e==="\\hdashline";)l.consume(),t.push(e==="\\hdashline"),l.consumeSpaces(),e=l.fetch().text;return t}var fu=l=>{var t=l.parser.settings;if(!t.displayMode)throw new Mt("{"+l.envName+"} can be used only in display mode.")};function dm(l){if(l.indexOf("ed")===-1)return l.indexOf("*")===-1}function Ds(l,t,e){var{hskipBeforeAndAfter:i,addJot:r,cols:a,arraystretch:o,colSeparationType:u,autoTag:h,singleRow:f,emptySingleRow:m,maxNumCols:p,leqno:b}=t;if(l.gullet.beginGroup(),f||l.gullet.macros.set("\\cr","\\\\\\relax"),!o){var v=l.gullet.expandMacroAsText("\\arraystretch");if(v==null)o=1;else if(o=parseFloat(v),!o||o<0)throw new Mt("Invalid \\arraystretch: "+v)}l.gullet.beginGroup();var w=[],x=[w],_=[],A=[],T=h!=null?[]:void 0;function M(){h&&l.gullet.macros.set("\\@eqnsw","1",!0)}function N(){T&&(l.gullet.macros.get("\\df@tag")?(T.push(l.subparse([new _n("\\df@tag")])),l.gullet.macros.set("\\df@tag",void 0,!0)):T.push(!!h&&l.gullet.macros.get("\\@eqnsw")==="1"))}for(M(),A.push(M4(l));;){var R=l.parseExpression(!1,f?"\\end":"\\\\");l.gullet.endGroup(),l.gullet.beginGroup(),R={type:"ordgroup",mode:l.mode,body:R},e&&(R={type:"styling",mode:l.mode,style:e,body:[R]}),w.push(R);var B=l.fetch().text;if(B==="&"){if(p&&w.length===p){if(f||u)throw new Mt("Too many tab characters: &",l.nextToken);l.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}l.consume()}else if(B==="\\end"){N(),w.length===1&&R.type==="styling"&&R.body[0].body.length===0&&(x.length>1||!m)&&x.pop(),A.length<x.length+1&&A.push([]);break}else if(B==="\\\\"){l.consume();var z=void 0;l.gullet.future().text!==" "&&(z=l.parseSizeGroup(!0)),_.push(z?z.value:null),N(),A.push(M4(l)),w=[],x.push(w),M()}else throw new Mt("Expected & or \\\\ or \\cr or \\end",l.nextToken)}return l.gullet.endGroup(),l.gullet.endGroup(),{type:"array",mode:l.mode,addJot:r,arraystretch:o,body:x,cols:a,rowGaps:_,hskipBeforeAndAfter:i,hLinesBeforeRow:A,colSeparationType:u,tags:T,leqno:b}}function fm(l){return l.slice(0,1)==="d"?"display":"text"}var gr=function(t,e){var i,r,a=t.body.length,o=t.hLinesBeforeRow,u=0,h=new Array(a),f=[],m=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),p=1/e.fontMetrics().ptPerEm,b=5*p;if(t.colSeparationType&&t.colSeparationType==="small"){var v=e.havingStyle(ee.SCRIPT).sizeMultiplier;b=.2778*(v/e.sizeMultiplier)}var w=t.colSeparationType==="CD"?ni({number:3,unit:"ex"},e):12*p,x=3*p,_=t.arraystretch*w,A=.7*_,T=.3*_,M=0;function N(j){for(var J=0;J<j.length;++J)J>0&&(M+=.25),f.push({pos:M,isDashed:j[J]})}for(N(o[0]),i=0;i<t.body.length;++i){var R=t.body[i],B=A,z=T;u<R.length&&(u=R.length);var G=new Array(R.length);for(r=0;r<R.length;++r){var U=Ee(R[r],e);z<U.depth&&(z=U.depth),B<U.height&&(B=U.height),G[r]=U}var et=t.rowGaps[i],ut=0;et&&(ut=ni(et,e),ut>0&&(ut+=T,z<ut&&(z=ut),ut=0)),t.addJot&&(z+=x),G.height=B,G.depth=z,M+=B,G.pos=M,M+=z+ut,h[i]=G,N(o[i+1])}var H=M/2+e.fontMetrics().axisHeight,it=t.cols||[],D=[],rt,V,K=[];if(t.tags&&t.tags.some(j=>j))for(i=0;i<a;++i){var yt=h[i],pt=yt.pos-H,Tt=t.tags[i],L=void 0;Tt===!0?L=at.makeSpan(["eqn-num"],[],e):Tt===!1?L=at.makeSpan([],[],e):L=at.makeSpan([],ki(Tt,e,!0),e),L.depth=yt.depth,L.height=yt.height,K.push({type:"elem",elem:L,shift:pt})}for(r=0,V=0;r<u||V<it.length;++r,++V){for(var P=it[V]||{},ot=!0;P.type==="separator";){if(ot||(rt=at.makeSpan(["arraycolsep"],[]),rt.style.width=Ot(e.fontMetrics().doubleRuleSep),D.push(rt)),P.separator==="|"||P.separator===":"){var ht=P.separator==="|"?"solid":"dashed",gt=at.makeSpan(["vertical-separator"],[],e);gt.style.height=Ot(M),gt.style.borderRightWidth=Ot(m),gt.style.borderRightStyle=ht,gt.style.margin="0 "+Ot(-m/2);var It=M-H;It&&(gt.style.verticalAlign=Ot(-It)),D.push(gt)}else throw new Mt("Invalid separator type: "+P.separator);V++,P=it[V]||{},ot=!1}if(!(r>=u)){var Lt=void 0;(r>0||t.hskipBeforeAndAfter)&&(Lt=Me.deflt(P.pregap,b),Lt!==0&&(rt=at.makeSpan(["arraycolsep"],[]),rt.style.width=Ot(Lt),D.push(rt)));var jt=[];for(i=0;i<a;++i){var Gt=h[i],xe=Gt[r];if(xe){var we=Gt.pos-H;xe.depth=Gt.depth,xe.height=Gt.height,jt.push({type:"elem",elem:xe,shift:we})}}jt=at.makeVList({positionType:"individualShift",children:jt},e),jt=at.makeSpan(["col-align-"+(P.align||"c")],[jt]),D.push(jt),(r<u-1||t.hskipBeforeAndAfter)&&(Lt=Me.deflt(P.postgap,b),Lt!==0&&(rt=at.makeSpan(["arraycolsep"],[]),rt.style.width=Ot(Lt),D.push(rt)))}}if(h=at.makeSpan(["mtable"],D),f.length>0){for(var ti=at.makeLineSpan("hline",e,m),ui=at.makeLineSpan("hdashline",e,m),C=[{type:"elem",elem:h,shift:0}];f.length>0;){var ft=f.pop(),mt=ft.pos-H;ft.isDashed?C.push({type:"elem",elem:ui,shift:mt}):C.push({type:"elem",elem:ti,shift:mt})}h=at.makeVList({positionType:"individualShift",children:C},e)}if(K.length===0)return at.makeSpan(["mord"],[h],e);var q=at.makeVList({positionType:"individualShift",children:K},e);return q=at.makeSpan(["tag"],[q],e),at.makeFragment([h,q])},Xx={c:"center ",l:"left ",r:"right "},br=function(t,e){for(var i=[],r=new Ct.MathNode("mtd",[],["mtr-glue"]),a=new Ct.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<t.body.length;o++){for(var u=t.body[o],h=[],f=0;f<u.length;f++)h.push(new Ct.MathNode("mtd",[qe(u[f],e)]));t.tags&&t.tags[o]&&(h.unshift(r),h.push(r),t.leqno?h.unshift(a):h.push(a)),i.push(new Ct.MathNode("mtr",h))}var m=new Ct.MathNode("mtable",i),p=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);m.setAttribute("rowspacing",Ot(p));var b="",v="";if(t.cols&&t.cols.length>0){var w=t.cols,x="",_=!1,A=0,T=w.length;w[0].type==="separator"&&(b+="top ",A=1),w[w.length-1].type==="separator"&&(b+="bottom ",T-=1);for(var M=A;M<T;M++)w[M].type==="align"?(v+=Xx[w[M].align],_&&(x+="none "),_=!0):w[M].type==="separator"&&_&&(x+=w[M].separator==="|"?"solid ":"dashed ",_=!1);m.setAttribute("columnalign",v.trim()),/[sd]/.test(x)&&m.setAttribute("columnlines",x.trim())}if(t.colSeparationType==="align"){for(var N=t.cols||[],R="",B=1;B<N.length;B++)R+=B%2?"0em ":"1em ";m.setAttribute("columnspacing",R.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?m.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?m.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?m.setAttribute("columnspacing","0.5em"):m.setAttribute("columnspacing","1em");var z="",G=t.hLinesBeforeRow;b+=G[0].length>0?"left ":"",b+=G[G.length-1].length>0?"right ":"";for(var U=1;U<G.length-1;U++)z+=G[U].length===0?"none ":G[U][0]?"dashed ":"solid ";return/[sd]/.test(z)&&m.setAttribute("rowlines",z.trim()),b!==""&&(m=new Ct.MathNode("menclose",[m]),m.setAttribute("notation",b.trim())),t.arraystretch&&t.arraystretch<1&&(m=new Ct.MathNode("mstyle",[m]),m.setAttribute("scriptlevel","1")),m},Av=function(t,e){t.envName.indexOf("ed")===-1&&fu(t);var i=[],r=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",o=Ds(t.parser,{cols:i,addJot:!0,autoTag:a?void 0:dm(t.envName),emptySingleRow:!0,colSeparationType:r,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),u,h=0,f={type:"ordgroup",mode:t.mode,body:[]};if(e[0]&&e[0].type==="ordgroup"){for(var m="",p=0;p<e[0].body.length;p++){var b=fe(e[0].body[p],"textord");m+=b.text}u=Number(m),h=u*2}var v=!h;o.body.forEach(function(A){for(var T=1;T<A.length;T+=2){var M=fe(A[T],"styling"),N=fe(M.body[0],"ordgroup");N.body.unshift(f)}if(v)h<A.length&&(h=A.length);else{var R=A.length/2;if(u<R)throw new Mt("Too many math in a row: "+("expected "+u+", but got "+R),A[0])}});for(var w=0;w<h;++w){var x="r",_=0;w%2===1?x="l":w>0&&v&&(_=1),i[w]={type:"align",align:x,pregap:_,postgap:0}}return o.colSeparationType=v?"align":"alignat",o};pr({type:"array",names:["array","darray"],props:{numArgs:1},handler(l,t){var e=uu(t[0]),i=e?[t[0]]:fe(t[0],"ordgroup").body,r=i.map(function(o){var u=om(o),h=u.text;if("lcr".indexOf(h)!==-1)return{type:"align",align:h};if(h==="|")return{type:"separator",separator:"|"};if(h===":")return{type:"separator",separator:":"};throw new Mt("Unknown column alignment: "+h,o)}),a={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return Ds(l.parser,a,fm(l.envName))},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(l){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[l.envName.replace("*","")],e="c",i={hskipBeforeAndAfter:!1,cols:[{type:"align",align:e}]};if(l.envName.charAt(l.envName.length-1)==="*"){var r=l.parser;if(r.consumeSpaces(),r.fetch().text==="["){if(r.consume(),r.consumeSpaces(),e=r.fetch().text,"lcr".indexOf(e)===-1)throw new Mt("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),i.cols=[{type:"align",align:e}]}}var a=Ds(l.parser,i,fm(l.envName)),o=Math.max(0,...a.body.map(u=>u.length));return a.cols=new Array(o).fill({type:"align",align:e}),t?{type:"leftright",mode:l.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(l){var t={arraystretch:.5},e=Ds(l.parser,t,"script");return e.colSeparationType="small",e},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["subarray"],props:{numArgs:1},handler(l,t){var e=uu(t[0]),i=e?[t[0]]:fe(t[0],"ordgroup").body,r=i.map(function(o){var u=om(o),h=u.text;if("lc".indexOf(h)!==-1)return{type:"align",align:h};throw new Mt("Unknown column alignment: "+h,o)});if(r.length>1)throw new Mt("{subarray} can contain only one column");var a={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=Ds(l.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new Mt("{subarray} can contain only one column");return a},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(l){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},e=Ds(l.parser,t,fm(l.envName));return{type:"leftright",mode:l.mode,body:[e],left:l.envName.indexOf("r")>-1?".":"\\{",right:l.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Av,htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(l){["gather","gather*"].includes(l.envName)&&fu(l);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:dm(l.envName),emptySingleRow:!0,leqno:l.parser.settings.leqno};return Ds(l.parser,t,"display")},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Av,htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(l){fu(l);var t={autoTag:dm(l.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:l.parser.settings.leqno};return Ds(l.parser,t,"display")},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["CD"],props:{numArgs:0},handler(l){return fu(l),zx(l.parser)},htmlBuilder:gr,mathmlBuilder:br});F("\\nonumber","\\gdef\\@eqnsw{0}");F("\\notag","\\nonumber");Ft({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(l,t){throw new Mt(l.funcName+" valid only within array environment")}});var R4=wv;Ft({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];if(r.type!=="ordgroup")throw new Mt("Invalid environment name",r);for(var a="",o=0;o<r.body.length;++o)a+=fe(r.body[o],"textord").text;if(i==="\\begin"){if(!R4.hasOwnProperty(a))throw new Mt("No such environment: "+a,r);var u=R4[a],{args:h,optArgs:f}=e.parseArguments("\\begin{"+a+"}",u),m={mode:e.mode,envName:a,parser:e},p=u.handler(m,h,f);e.expect("\\end",!1);var b=e.nextToken,v=fe(e.parseFunction(),"environment");if(v.name!==a)throw new Mt("Mismatch: \\begin{"+a+"} matched by \\end{"+v.name+"}",b);return p}return{type:"environment",mode:e.mode,name:a,nameGroup:r}}});var _v=(l,t)=>{var e=l.font,i=t.withFont(e);return Ee(l.body,i)},kv=(l,t)=>{var e=l.font,i=t.withFont(e);return qe(l.body,i)},D4={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Ft({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=W0(t[0]),a=i;return a in D4&&(a=D4[a]),{type:"font",mode:e.mode,font:a.slice(1),body:r}},htmlBuilder:_v,mathmlBuilder:kv});Ft({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(l,t)=>{var{parser:e}=l,i=t[0],r=Me.isCharacterBox(i);return{type:"mclass",mode:e.mode,mclass:hu(i),body:[{type:"font",mode:e.mode,font:"boldsymbol",body:i}],isCharacterBox:r}}});Ft({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(l,t)=>{var{parser:e,funcName:i,breakOnTokenText:r}=l,{mode:a}=e,o=e.parseExpression(!0,r),u="math"+i.slice(1);return{type:"font",mode:a,font:u,body:{type:"ordgroup",mode:e.mode,body:o}}},htmlBuilder:_v,mathmlBuilder:kv});var Ev=(l,t)=>{var e=t;return l==="display"?e=e.id>=ee.SCRIPT.id?e.text():ee.DISPLAY:l==="text"&&e.size===ee.DISPLAY.size?e=ee.TEXT:l==="script"?e=ee.SCRIPT:l==="scriptscript"&&(e=ee.SCRIPTSCRIPT),e},mm=(l,t)=>{var e=Ev(l.size,t.style),i=e.fracNum(),r=e.fracDen(),a;a=t.havingStyle(i);var o=Ee(l.numer,a,t);if(l.continued){var u=8.5/t.fontMetrics().ptPerEm,h=3.5/t.fontMetrics().ptPerEm;o.height=o.height<u?u:o.height,o.depth=o.depth<h?h:o.depth}a=t.havingStyle(r);var f=Ee(l.denom,a,t),m,p,b;l.hasBarLine?(l.barSize?(p=ni(l.barSize,t),m=at.makeLineSpan("frac-line",t,p)):m=at.makeLineSpan("frac-line",t),p=m.height,b=m.height):(m=null,p=0,b=t.fontMetrics().defaultRuleThickness);var v,w,x;e.size===ee.DISPLAY.size||l.size==="display"?(v=t.fontMetrics().num1,p>0?w=3*b:w=7*b,x=t.fontMetrics().denom1):(p>0?(v=t.fontMetrics().num2,w=b):(v=t.fontMetrics().num3,w=3*b),x=t.fontMetrics().denom2);var _;if(m){var T=t.fontMetrics().axisHeight;v-o.depth-(T+.5*p)<w&&(v+=w-(v-o.depth-(T+.5*p))),T-.5*p-(f.height-x)<w&&(x+=w-(T-.5*p-(f.height-x)));var M=-(T-.5*p);_=at.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:x},{type:"elem",elem:m,shift:M},{type:"elem",elem:o,shift:-v}]},t)}else{var A=v-o.depth-(f.height-x);A<w&&(v+=.5*(w-A),x+=.5*(w-A)),_=at.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:x},{type:"elem",elem:o,shift:-v}]},t)}a=t.havingStyle(e),_.height*=a.sizeMultiplier/t.sizeMultiplier,_.depth*=a.sizeMultiplier/t.sizeMultiplier;var N;e.size===ee.DISPLAY.size?N=t.fontMetrics().delim1:e.size===ee.SCRIPTSCRIPT.size?N=t.havingStyle(ee.SCRIPT).fontMetrics().delim2:N=t.fontMetrics().delim2;var R,B;return l.leftDelim==null?R=Ll(t,["mopen"]):R=qr.customSizedDelim(l.leftDelim,N,!0,t.havingStyle(e),l.mode,["mopen"]),l.continued?B=at.makeSpan([]):l.rightDelim==null?B=Ll(t,["mclose"]):B=qr.customSizedDelim(l.rightDelim,N,!0,t.havingStyle(e),l.mode,["mclose"]),at.makeSpan(["mord"].concat(a.sizingClasses(t)),[R,at.makeSpan(["mfrac"],[_]),B],t)},pm=(l,t)=>{var e=new Ct.MathNode("mfrac",[qe(l.numer,t),qe(l.denom,t)]);if(!l.hasBarLine)e.setAttribute("linethickness","0px");else if(l.barSize){var i=ni(l.barSize,t);e.setAttribute("linethickness",Ot(i))}var r=Ev(l.size,t.style);if(r.size!==t.style.size){e=new Ct.MathNode("mstyle",[e]);var a=r.size===ee.DISPLAY.size?"true":"false";e.setAttribute("displaystyle",a),e.setAttribute("scriptlevel","0")}if(l.leftDelim!=null||l.rightDelim!=null){var o=[];if(l.leftDelim!=null){var u=new Ct.MathNode("mo",[new Ct.TextNode(l.leftDelim.replace("\\",""))]);u.setAttribute("fence","true"),o.push(u)}if(o.push(e),l.rightDelim!=null){var h=new Ct.MathNode("mo",[new Ct.TextNode(l.rightDelim.replace("\\",""))]);h.setAttribute("fence","true"),o.push(h)}return sm(o)}return e};Ft({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0],a=t[1],o,u=null,h=null,f="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,u="(",h=")";break;case"\\\\bracefrac":o=!1,u="\\{",h="\\}";break;case"\\\\brackfrac":o=!1,u="[",h="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:e.mode,continued:!1,numer:r,denom:a,hasBarLine:o,leftDelim:u,rightDelim:h,size:f,barSize:null}},htmlBuilder:mm,mathmlBuilder:pm});Ft({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0],a=t[1];return{type:"genfrac",mode:e.mode,continued:!0,numer:r,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Ft({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(l){var{parser:t,funcName:e,token:i}=l,r;switch(e){case"\\over":r="\\frac";break;case"\\choose":r="\\binom";break;case"\\atop":r="\\\\atopfrac";break;case"\\brace":r="\\\\bracefrac";break;case"\\brack":r="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:r,token:i}}});var N4=["display","text","script","scriptscript"],O4=function(t){var e=null;return t.length>0&&(e=t,e=e==="."?null:e),e};Ft({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(l,t){var{parser:e}=l,i=t[4],r=t[5],a=W0(t[0]),o=a.type==="atom"&&a.family==="open"?O4(a.text):null,u=W0(t[1]),h=u.type==="atom"&&u.family==="close"?O4(u.text):null,f=fe(t[2],"size"),m,p=null;f.isBlank?m=!0:(p=f.value,m=p.number>0);var b="auto",v=t[3];if(v.type==="ordgroup"){if(v.body.length>0){var w=fe(v.body[0],"textord");b=N4[Number(w.text)]}}else v=fe(v,"textord"),b=N4[Number(v.text)];return{type:"genfrac",mode:e.mode,numer:i,denom:r,continued:!1,hasBarLine:m,barSize:p,leftDelim:o,rightDelim:h,size:b}},htmlBuilder:mm,mathmlBuilder:pm});Ft({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(l,t){var{parser:e,funcName:i,token:r}=l;return{type:"infix",mode:e.mode,replaceWith:"\\\\abovefrac",size:fe(t[0],"size").value,token:r}}});Ft({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0],a=_8(fe(t[1],"infix").size),o=t[2],u=a.number>0;return{type:"genfrac",mode:e.mode,numer:r,denom:o,continued:!1,hasBarLine:u,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:mm,mathmlBuilder:pm});var Tv=(l,t)=>{var e=t.style,i,r;l.type==="supsub"?(i=l.sup?Ee(l.sup,t.havingStyle(e.sup()),t):Ee(l.sub,t.havingStyle(e.sub()),t),r=fe(l.base,"horizBrace")):r=fe(l,"horizBrace");var a=Ee(r.base,t.havingBaseStyle(ee.DISPLAY)),o=Yr.svgSpan(r,t),u;if(r.isOver?(u=at.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:o}]},t),u.children[0].children[0].children[1].classes.push("svg-align")):(u=at.makeVList({positionType:"bottom",positionData:a.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:a}]},t),u.children[0].children[0].children[0].classes.push("svg-align")),i){var h=at.makeSpan(["mord",r.isOver?"mover":"munder"],[u],t);r.isOver?u=at.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:i}]},t):u=at.makeVList({positionType:"bottom",positionData:h.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:h}]},t)}return at.makeSpan(["mord",r.isOver?"mover":"munder"],[u],t)},Kx=(l,t)=>{var e=Yr.mathMLnode(l.label);return new Ct.MathNode(l.isOver?"mover":"munder",[qe(l.base,t),e])};Ft({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(l,t){var{parser:e,funcName:i}=l;return{type:"horizBrace",mode:e.mode,label:i,isOver:/^\\over/.test(i),base:t[0]}},htmlBuilder:Tv,mathmlBuilder:Kx});Ft({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[1],r=fe(t[0],"url").url;return e.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:e.mode,href:r,body:mi(i)}:e.formatUnsupportedCmd("\\href")},htmlBuilder:(l,t)=>{var e=ki(l.body,t,!1);return at.makeAnchor(l.href,[],e,t)},mathmlBuilder:(l,t)=>{var e=Rs(l.body,t);return e instanceof An||(e=new An("mrow",[e])),e.setAttribute("href",l.href),e}});Ft({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=fe(t[0],"url").url;if(!e.settings.isTrusted({command:"\\url",url:i}))return e.formatUnsupportedCmd("\\url");for(var r=[],a=0;a<i.length;a++){var o=i[a];o==="~"&&(o="\\textasciitilde"),r.push({type:"textord",mode:"text",text:o})}var u={type:"text",mode:e.mode,font:"\\texttt",body:r};return{type:"href",mode:e.mode,href:i,body:mi(u)}}});Ft({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(l,t){var{parser:e}=l;return{type:"hbox",mode:e.mode,body:mi(t[0])}},htmlBuilder(l,t){var e=ki(l.body,t,!1);return at.makeFragment(e)},mathmlBuilder(l,t){return new Ct.MathNode("mrow",fn(l.body,t))}});Ft({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(l,t)=>{var{parser:e,funcName:i,token:r}=l,a=fe(t[0],"raw").string,o=t[1];e.settings.strict&&e.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var u,h={};switch(i){case"\\htmlClass":h.class=a,u={command:"\\htmlClass",class:a};break;case"\\htmlId":h.id=a,u={command:"\\htmlId",id:a};break;case"\\htmlStyle":h.style=a,u={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var f=a.split(","),m=0;m<f.length;m++){var p=f[m].split("=");if(p.length!==2)throw new Mt("Error parsing key-value for \\htmlData");h["data-"+p[0].trim()]=p[1].trim()}u={command:"\\htmlData",attributes:h};break}default:throw new Error("Unrecognized html command")}return e.settings.isTrusted(u)?{type:"html",mode:e.mode,attributes:h,body:mi(o)}:e.formatUnsupportedCmd(i)},htmlBuilder:(l,t)=>{var e=ki(l.body,t,!1),i=["enclosing"];l.attributes.class&&i.push(...l.attributes.class.trim().split(/\s+/));var r=at.makeSpan(i,e,t);for(var a in l.attributes)a!=="class"&&l.attributes.hasOwnProperty(a)&&r.setAttribute(a,l.attributes[a]);return r},mathmlBuilder:(l,t)=>Rs(l.body,t)});Ft({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l;return{type:"htmlmathml",mode:e.mode,html:mi(t[0]),mathml:mi(t[1])}},htmlBuilder:(l,t)=>{var e=ki(l.html,t,!1);return at.makeFragment(e)},mathmlBuilder:(l,t)=>Rs(l.mathml,t)});var Zd=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new Mt("Invalid size: '"+t+"' in \\includegraphics");var i={number:+(e[1]+e[2]),unit:e[3]};if(!Vb(i))throw new Mt("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i};Ft({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(l,t,e)=>{var{parser:i}=l,r={number:0,unit:"em"},a={number:.9,unit:"em"},o={number:0,unit:"em"},u="";if(e[0])for(var h=fe(e[0],"raw").string,f=h.split(","),m=0;m<f.length;m++){var p=f[m].split("=");if(p.length===2){var b=p[1].trim();switch(p[0].trim()){case"alt":u=b;break;case"width":r=Zd(b);break;case"height":a=Zd(b);break;case"totalheight":o=Zd(b);break;default:throw new Mt("Invalid key: '"+p[0]+"' in \\includegraphics.")}}}var v=fe(t[0],"url").url;return u===""&&(u=v,u=u.replace(/^.*[\\/]/,""),u=u.substring(0,u.lastIndexOf("."))),i.settings.isTrusted({command:"\\includegraphics",url:v})?{type:"includegraphics",mode:i.mode,alt:u,width:r,height:a,totalheight:o,src:v}:i.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(l,t)=>{var e=ni(l.height,t),i=0;l.totalheight.number>0&&(i=ni(l.totalheight,t)-e);var r=0;l.width.number>0&&(r=ni(l.width,t));var a={height:Ot(e+i)};r>0&&(a.width=Ot(r)),i>0&&(a.verticalAlign=Ot(-i));var o=new K8(l.src,l.alt,a);return o.height=e,o.depth=i,o},mathmlBuilder:(l,t)=>{var e=new Ct.MathNode("mglyph",[]);e.setAttribute("alt",l.alt);var i=ni(l.height,t),r=0;if(l.totalheight.number>0&&(r=ni(l.totalheight,t)-i,e.setAttribute("valign",Ot(-r))),e.setAttribute("height",Ot(i+r)),l.width.number>0){var a=ni(l.width,t);e.setAttribute("width",Ot(a))}return e.setAttribute("src",l.src),e}});Ft({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(l,t){var{parser:e,funcName:i}=l,r=fe(t[0],"size");if(e.settings.strict){var a=i[1]==="m",o=r.value.unit==="mu";a?(o||e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" supports only mu units, "+("not "+r.value.unit+" units")),e.mode!=="math"&&e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" works only in math mode")):o&&e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" doesn't support mu units")}return{type:"kern",mode:e.mode,dimension:r.value}},htmlBuilder(l,t){return at.makeGlue(l.dimension,t)},mathmlBuilder(l,t){var e=ni(l.dimension,t);return new Ct.SpaceNode(e)}});Ft({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0];return{type:"lap",mode:e.mode,alignment:i.slice(5),body:r}},htmlBuilder:(l,t)=>{var e;l.alignment==="clap"?(e=at.makeSpan([],[Ee(l.body,t)]),e=at.makeSpan(["inner"],[e],t)):e=at.makeSpan(["inner"],[Ee(l.body,t)]);var i=at.makeSpan(["fix"],[]),r=at.makeSpan([l.alignment],[e,i],t),a=at.makeSpan(["strut"]);return a.style.height=Ot(r.height+r.depth),r.depth&&(a.style.verticalAlign=Ot(-r.depth)),r.children.unshift(a),r=at.makeSpan(["thinbox"],[r],t),at.makeSpan(["mord","vbox"],[r],t)},mathmlBuilder:(l,t)=>{var e=new Ct.MathNode("mpadded",[qe(l.body,t)]);if(l.alignment!=="rlap"){var i=l.alignment==="llap"?"-1":"-0.5";e.setAttribute("lspace",i+"width")}return e.setAttribute("width","0px"),e}});Ft({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(l,t){var{funcName:e,parser:i}=l,r=i.mode;i.switchMode("math");var a=e==="\\("?"\\)":"$",o=i.parseExpression(!1,a);return i.expect(a),i.switchMode(r),{type:"styling",mode:i.mode,style:"text",body:o}}});Ft({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(l,t){throw new Mt("Mismatched "+l.funcName)}});var z4=(l,t)=>{switch(t.style.size){case ee.DISPLAY.size:return l.display;case ee.TEXT.size:return l.text;case ee.SCRIPT.size:return l.script;case ee.SCRIPTSCRIPT.size:return l.scriptscript;default:return l.text}};Ft({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(l,t)=>{var{parser:e}=l;return{type:"mathchoice",mode:e.mode,display:mi(t[0]),text:mi(t[1]),script:mi(t[2]),scriptscript:mi(t[3])}},htmlBuilder:(l,t)=>{var e=z4(l,t),i=ki(e,t,!1);return at.makeFragment(i)},mathmlBuilder:(l,t)=>{var e=z4(l,t);return Rs(e,t)}});var Cv=(l,t,e,i,r,a,o)=>{l=at.makeSpan([],[l]);var u=e&&Me.isCharacterBox(e),h,f;if(t){var m=Ee(t,i.havingStyle(r.sup()),i);f={elem:m,kern:Math.max(i.fontMetrics().bigOpSpacing1,i.fontMetrics().bigOpSpacing3-m.depth)}}if(e){var p=Ee(e,i.havingStyle(r.sub()),i);h={elem:p,kern:Math.max(i.fontMetrics().bigOpSpacing2,i.fontMetrics().bigOpSpacing4-p.height)}}var b;if(f&&h){var v=i.fontMetrics().bigOpSpacing5+h.elem.height+h.elem.depth+h.kern+l.depth+o;b=at.makeVList({positionType:"bottom",positionData:v,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:Ot(-a)},{type:"kern",size:h.kern},{type:"elem",elem:l},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Ot(a)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else if(h){var w=l.height-o;b=at.makeVList({positionType:"top",positionData:w,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:Ot(-a)},{type:"kern",size:h.kern},{type:"elem",elem:l}]},i)}else if(f){var x=l.depth+o;b=at.makeVList({positionType:"bottom",positionData:x,children:[{type:"elem",elem:l},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Ot(a)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else return l;var _=[b];if(h&&a!==0&&!u){var A=at.makeSpan(["mspace"],[],i);A.style.marginRight=Ot(a),_.unshift(A)}return at.makeSpan(["mop","op-limits"],_,i)},Mv=["\\smallint"],po=(l,t)=>{var e,i,r=!1,a;l.type==="supsub"?(e=l.sup,i=l.sub,a=fe(l.base,"op"),r=!0):a=fe(l,"op");var o=t.style,u=!1;o.size===ee.DISPLAY.size&&a.symbol&&!Mv.includes(a.name)&&(u=!0);var h;if(a.symbol){var f=u?"Size2-Regular":"Size1-Regular",m="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(m=a.name.slice(1),a.name=m==="oiint"?"\\iint":"\\iiint"),h=at.makeSymbol(a.name,f,"math",t,["mop","op-symbol",u?"large-op":"small-op"]),m.length>0){var p=h.italic,b=at.staticSvg(m+"Size"+(u?"2":"1"),t);h=at.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:0},{type:"elem",elem:b,shift:u?.08:0}]},t),a.name="\\"+m,h.classes.unshift("mop"),h.italic=p}}else if(a.body){var v=ki(a.body,t,!0);v.length===1&&v[0]instanceof Hn?(h=v[0],h.classes[0]="mop"):h=at.makeSpan(["mop"],v,t)}else{for(var w=[],x=1;x<a.name.length;x++)w.push(at.mathsym(a.name[x],a.mode,t));h=at.makeSpan(["mop"],w,t)}var _=0,A=0;return(h instanceof Hn||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(_=(h.height-h.depth)/2-t.fontMetrics().axisHeight,A=h.italic),r?Cv(h,e,i,t,o,A,_):(_&&(h.style.position="relative",h.style.top=Ot(_)),h)},Yl=(l,t)=>{var e;if(l.symbol)e=new An("mo",[jn(l.name,l.mode)]),Mv.includes(l.name)&&e.setAttribute("largeop","false");else if(l.body)e=new An("mo",fn(l.body,t));else{e=new An("mi",[new fr(l.name.slice(1))]);var i=new An("mo",[jn("⁡","text")]);l.parentIsSupSub?e=new An("mrow",[e,i]):e=nv([e,i])}return e},Zx={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};Ft({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=i;return r.length===1&&(r=Zx[r]),{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:po,mathmlBuilder:Yl});Ft({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:mi(i)}},htmlBuilder:po,mathmlBuilder:Yl});var Wx={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};Ft({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(l){var{parser:t,funcName:e}=l;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:e}},htmlBuilder:po,mathmlBuilder:Yl});Ft({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(l){var{parser:t,funcName:e}=l;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:e}},htmlBuilder:po,mathmlBuilder:Yl});Ft({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(l){var{parser:t,funcName:e}=l,i=e;return i.length===1&&(i=Wx[i]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:po,mathmlBuilder:Yl});var Rv=(l,t)=>{var e,i,r=!1,a;l.type==="supsub"?(e=l.sup,i=l.sub,a=fe(l.base,"operatorname"),r=!0):a=fe(l,"operatorname");var o;if(a.body.length>0){for(var u=a.body.map(p=>{var b=p.text;return typeof b=="string"?{type:"textord",mode:p.mode,text:b}:p}),h=ki(u,t.withFont("mathrm"),!0),f=0;f<h.length;f++){var m=h[f];m instanceof Hn&&(m.text=m.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=at.makeSpan(["mop"],h,t)}else o=at.makeSpan(["mop"],[],t);return r?Cv(o,e,i,t,t.style,0,0):o},Qx=(l,t)=>{for(var e=fn(l.body,t.withFont("mathrm")),i=!0,r=0;r<e.length;r++){var a=e[r];if(!(a instanceof Ct.SpaceNode))if(a instanceof Ct.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=a.children[0];a.children.length===1&&o instanceof Ct.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):i=!1;break}default:i=!1}else i=!1}if(i){var u=e.map(m=>m.toText()).join("");e=[new Ct.TextNode(u)]}var h=new Ct.MathNode("mi",e);h.setAttribute("mathvariant","normal");var f=new Ct.MathNode("mo",[jn("⁡","text")]);return l.parentIsSupSub?new Ct.MathNode("mrow",[h,f]):Ct.newDocumentFragment([h,f])};Ft({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0];return{type:"operatorname",mode:e.mode,body:mi(r),alwaysHandleSupSub:i==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Rv,mathmlBuilder:Qx});F("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");ha({type:"ordgroup",htmlBuilder(l,t){return l.semisimple?at.makeFragment(ki(l.body,t,!1)):at.makeSpan(["mord"],ki(l.body,t,!0),t)},mathmlBuilder(l,t){return Rs(l.body,t,!0)}});Ft({type:"overline",names:["\\overline"],props:{numArgs:1},handler(l,t){var{parser:e}=l,i=t[0];return{type:"overline",mode:e.mode,body:i}},htmlBuilder(l,t){var e=Ee(l.body,t.havingCrampedStyle()),i=at.makeLineSpan("overline-line",t),r=t.fontMetrics().defaultRuleThickness,a=at.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e},{type:"kern",size:3*r},{type:"elem",elem:i},{type:"kern",size:r}]},t);return at.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(l,t){var e=new Ct.MathNode("mo",[new Ct.TextNode("‾")]);e.setAttribute("stretchy","true");var i=new Ct.MathNode("mover",[qe(l.body,t),e]);return i.setAttribute("accent","true"),i}});Ft({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"phantom",mode:e.mode,body:mi(i)}},htmlBuilder:(l,t)=>{var e=ki(l.body,t.withPhantom(),!1);return at.makeFragment(e)},mathmlBuilder:(l,t)=>{var e=fn(l.body,t);return new Ct.MathNode("mphantom",e)}});Ft({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"hphantom",mode:e.mode,body:i}},htmlBuilder:(l,t)=>{var e=at.makeSpan([],[Ee(l.body,t.withPhantom())]);if(e.height=0,e.depth=0,e.children)for(var i=0;i<e.children.length;i++)e.children[i].height=0,e.children[i].depth=0;return e=at.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e}]},t),at.makeSpan(["mord"],[e],t)},mathmlBuilder:(l,t)=>{var e=fn(mi(l.body),t),i=new Ct.MathNode("mphantom",e),r=new Ct.MathNode("mpadded",[i]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}});Ft({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"vphantom",mode:e.mode,body:i}},htmlBuilder:(l,t)=>{var e=at.makeSpan(["inner"],[Ee(l.body,t.withPhantom())]),i=at.makeSpan(["fix"],[]);return at.makeSpan(["mord","rlap"],[e,i],t)},mathmlBuilder:(l,t)=>{var e=fn(mi(l.body),t),i=new Ct.MathNode("mphantom",e),r=new Ct.MathNode("mpadded",[i]);return r.setAttribute("width","0px"),r}});Ft({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(l,t){var{parser:e}=l,i=fe(t[0],"size").value,r=t[1];return{type:"raisebox",mode:e.mode,dy:i,body:r}},htmlBuilder(l,t){var e=Ee(l.body,t),i=ni(l.dy,t);return at.makeVList({positionType:"shift",positionData:-i,children:[{type:"elem",elem:e}]},t)},mathmlBuilder(l,t){var e=new Ct.MathNode("mpadded",[qe(l.body,t)]),i=l.dy.number+l.dy.unit;return e.setAttribute("voffset",i),e}});Ft({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(l){var{parser:t}=l;return{type:"internal",mode:t.mode}}});Ft({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(l,t,e){var{parser:i}=l,r=e[0],a=fe(t[0],"size"),o=fe(t[1],"size");return{type:"rule",mode:i.mode,shift:r&&fe(r,"size").value,width:a.value,height:o.value}},htmlBuilder(l,t){var e=at.makeSpan(["mord","rule"],[],t),i=ni(l.width,t),r=ni(l.height,t),a=l.shift?ni(l.shift,t):0;return e.style.borderRightWidth=Ot(i),e.style.borderTopWidth=Ot(r),e.style.bottom=Ot(a),e.width=i,e.height=r+a,e.depth=-a,e.maxFontSize=r*1.125*t.sizeMultiplier,e},mathmlBuilder(l,t){var e=ni(l.width,t),i=ni(l.height,t),r=l.shift?ni(l.shift,t):0,a=t.color&&t.getColor()||"black",o=new Ct.MathNode("mspace");o.setAttribute("mathbackground",a),o.setAttribute("width",Ot(e)),o.setAttribute("height",Ot(i));var u=new Ct.MathNode("mpadded",[o]);return r>=0?u.setAttribute("height",Ot(r)):(u.setAttribute("height",Ot(r)),u.setAttribute("depth",Ot(-r))),u.setAttribute("voffset",Ot(r)),u}});function Dv(l,t,e){for(var i=ki(l,t,!1),r=t.sizeMultiplier/e.sizeMultiplier,a=0;a<i.length;a++){var o=i[a].classes.indexOf("sizing");o<0?Array.prototype.push.apply(i[a].classes,t.sizingClasses(e)):i[a].classes[o+1]==="reset-size"+t.size&&(i[a].classes[o+1]="reset-size"+e.size),i[a].height*=r,i[a].depth*=r}return at.makeFragment(i)}var L4=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Jx=(l,t)=>{var e=t.havingSize(l.size);return Dv(l.body,e,t)};Ft({type:"sizing",names:L4,props:{numArgs:0,allowedInText:!0},handler:(l,t)=>{var{breakOnTokenText:e,funcName:i,parser:r}=l,a=r.parseExpression(!1,e);return{type:"sizing",mode:r.mode,size:L4.indexOf(i)+1,body:a}},htmlBuilder:Jx,mathmlBuilder:(l,t)=>{var e=t.havingSize(l.size),i=fn(l.body,e),r=new Ct.MathNode("mstyle",i);return r.setAttribute("mathsize",Ot(e.sizeMultiplier)),r}});Ft({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(l,t,e)=>{var{parser:i}=l,r=!1,a=!1,o=e[0]&&fe(e[0],"ordgroup");if(o)for(var u="",h=0;h<o.body.length;++h){var f=o.body[h];if(u=f.text,u==="t")r=!0;else if(u==="b")a=!0;else{r=!1,a=!1;break}}else r=!0,a=!0;var m=t[0];return{type:"smash",mode:i.mode,body:m,smashHeight:r,smashDepth:a}},htmlBuilder:(l,t)=>{var e=at.makeSpan([],[Ee(l.body,t)]);if(!l.smashHeight&&!l.smashDepth)return e;if(l.smashHeight&&(e.height=0,e.children))for(var i=0;i<e.children.length;i++)e.children[i].height=0;if(l.smashDepth&&(e.depth=0,e.children))for(var r=0;r<e.children.length;r++)e.children[r].depth=0;var a=at.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e}]},t);return at.makeSpan(["mord"],[a],t)},mathmlBuilder:(l,t)=>{var e=new Ct.MathNode("mpadded",[qe(l.body,t)]);return l.smashHeight&&e.setAttribute("height","0px"),l.smashDepth&&e.setAttribute("depth","0px"),e}});Ft({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(l,t,e){var{parser:i}=l,r=e[0],a=t[0];return{type:"sqrt",mode:i.mode,body:a,index:r}},htmlBuilder(l,t){var e=Ee(l.body,t.havingCrampedStyle());e.height===0&&(e.height=t.fontMetrics().xHeight),e=at.wrapFragment(e,t);var i=t.fontMetrics(),r=i.defaultRuleThickness,a=r;t.style.id<ee.TEXT.id&&(a=t.fontMetrics().xHeight);var o=r+a/4,u=e.height+e.depth+o+r,{span:h,ruleWidth:f,advanceWidth:m}=qr.sqrtImage(u,t),p=h.height-f;p>e.height+e.depth+o&&(o=(o+p-e.height-e.depth)/2);var b=h.height-e.height-o-f;e.style.paddingLeft=Ot(m);var v=at.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e,wrapperClasses:["svg-align"]},{type:"kern",size:-(e.height+b)},{type:"elem",elem:h},{type:"kern",size:f}]},t);if(l.index){var w=t.havingStyle(ee.SCRIPTSCRIPT),x=Ee(l.index,w,t),_=.6*(v.height-v.depth),A=at.makeVList({positionType:"shift",positionData:-_,children:[{type:"elem",elem:x}]},t),T=at.makeSpan(["root"],[A]);return at.makeSpan(["mord","sqrt"],[T,v],t)}else return at.makeSpan(["mord","sqrt"],[v],t)},mathmlBuilder(l,t){var{body:e,index:i}=l;return i?new Ct.MathNode("mroot",[qe(e,t),qe(i,t)]):new Ct.MathNode("msqrt",[qe(e,t)])}});var B4={display:ee.DISPLAY,text:ee.TEXT,script:ee.SCRIPT,scriptscript:ee.SCRIPTSCRIPT};Ft({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l,t){var{breakOnTokenText:e,funcName:i,parser:r}=l,a=r.parseExpression(!0,e),o=i.slice(1,i.length-5);return{type:"styling",mode:r.mode,style:o,body:a}},htmlBuilder(l,t){var e=B4[l.style],i=t.havingStyle(e).withFont("");return Dv(l.body,i,t)},mathmlBuilder(l,t){var e=B4[l.style],i=t.havingStyle(e),r=fn(l.body,i),a=new Ct.MathNode("mstyle",r),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},u=o[l.style];return a.setAttribute("scriptlevel",u[0]),a.setAttribute("displaystyle",u[1]),a}});var tw=function(t,e){var i=t.base;if(i)if(i.type==="op"){var r=i.limits&&(e.style.size===ee.DISPLAY.size||i.alwaysHandleSupSub);return r?po:null}else if(i.type==="operatorname"){var a=i.alwaysHandleSupSub&&(e.style.size===ee.DISPLAY.size||i.limits);return a?Rv:null}else{if(i.type==="accent")return Me.isCharacterBox(i.base)?lm:null;if(i.type==="horizBrace"){var o=!t.sub;return o===i.isOver?Tv:null}else return null}else return null};ha({type:"supsub",htmlBuilder(l,t){var e=tw(l,t);if(e)return e(l,t);var{base:i,sup:r,sub:a}=l,o=Ee(i,t),u,h,f=t.fontMetrics(),m=0,p=0,b=i&&Me.isCharacterBox(i);if(r){var v=t.havingStyle(t.style.sup());u=Ee(r,v,t),b||(m=o.height-v.fontMetrics().supDrop*v.sizeMultiplier/t.sizeMultiplier)}if(a){var w=t.havingStyle(t.style.sub());h=Ee(a,w,t),b||(p=o.depth+w.fontMetrics().subDrop*w.sizeMultiplier/t.sizeMultiplier)}var x;t.style===ee.DISPLAY?x=f.sup1:t.style.cramped?x=f.sup3:x=f.sup2;var _=t.sizeMultiplier,A=Ot(.5/f.ptPerEm/_),T=null;if(h){var M=l.base&&l.base.type==="op"&&l.base.name&&(l.base.name==="\\oiint"||l.base.name==="\\oiiint");(o instanceof Hn||M)&&(T=Ot(-o.italic))}var N;if(u&&h){m=Math.max(m,x,u.depth+.25*f.xHeight),p=Math.max(p,f.sub2);var R=f.defaultRuleThickness,B=4*R;if(m-u.depth-(h.height-p)<B){p=B-(m-u.depth)+h.height;var z=.8*f.xHeight-(m-u.depth);z>0&&(m+=z,p-=z)}var G=[{type:"elem",elem:h,shift:p,marginRight:A,marginLeft:T},{type:"elem",elem:u,shift:-m,marginRight:A}];N=at.makeVList({positionType:"individualShift",children:G},t)}else if(h){p=Math.max(p,f.sub1,h.height-.8*f.xHeight);var U=[{type:"elem",elem:h,marginLeft:T,marginRight:A}];N=at.makeVList({positionType:"shift",positionData:p,children:U},t)}else if(u)m=Math.max(m,x,u.depth+.25*f.xHeight),N=at.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:u,marginRight:A}]},t);else throw new Error("supsub must have either sup or sub.");var et=wf(o,"right")||"mord";return at.makeSpan([et],[o,at.makeSpan(["msupsub"],[N])],t)},mathmlBuilder(l,t){var e=!1,i,r;l.base&&l.base.type==="horizBrace"&&(r=!!l.sup,r===l.base.isOver&&(e=!0,i=l.base.isOver)),l.base&&(l.base.type==="op"||l.base.type==="operatorname")&&(l.base.parentIsSupSub=!0);var a=[qe(l.base,t)];l.sub&&a.push(qe(l.sub,t)),l.sup&&a.push(qe(l.sup,t));var o;if(e)o=i?"mover":"munder";else if(l.sub)if(l.sup){var f=l.base;f&&f.type==="op"&&f.limits&&t.style===ee.DISPLAY||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(t.style===ee.DISPLAY||f.limits)?o="munderover":o="msubsup"}else{var h=l.base;h&&h.type==="op"&&h.limits&&(t.style===ee.DISPLAY||h.alwaysHandleSupSub)||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(h.limits||t.style===ee.DISPLAY)?o="munder":o="msub"}else{var u=l.base;u&&u.type==="op"&&u.limits&&(t.style===ee.DISPLAY||u.alwaysHandleSupSub)||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(u.limits||t.style===ee.DISPLAY)?o="mover":o="msup"}return new Ct.MathNode(o,a)}});ha({type:"atom",htmlBuilder(l,t){return at.mathsym(l.text,l.mode,t,["m"+l.family])},mathmlBuilder(l,t){var e=new Ct.MathNode("mo",[jn(l.text,l.mode)]);if(l.family==="bin"){var i=am(l,t);i==="bold-italic"&&e.setAttribute("mathvariant",i)}else l.family==="punct"?e.setAttribute("separator","true"):(l.family==="open"||l.family==="close")&&e.setAttribute("stretchy","false");return e}});var Nv={mi:"italic",mn:"normal",mtext:"normal"};ha({type:"mathord",htmlBuilder(l,t){return at.makeOrd(l,t,"mathord")},mathmlBuilder(l,t){var e=new Ct.MathNode("mi",[jn(l.text,l.mode,t)]),i=am(l,t)||"italic";return i!==Nv[e.type]&&e.setAttribute("mathvariant",i),e}});ha({type:"textord",htmlBuilder(l,t){return at.makeOrd(l,t,"textord")},mathmlBuilder(l,t){var e=jn(l.text,l.mode,t),i=am(l,t)||"normal",r;return l.mode==="text"?r=new Ct.MathNode("mtext",[e]):/[0-9]/.test(l.text)?r=new Ct.MathNode("mn",[e]):l.text==="\\prime"?r=new Ct.MathNode("mo",[e]):r=new Ct.MathNode("mi",[e]),i!==Nv[r.type]&&r.setAttribute("mathvariant",i),r}});var Wd={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Qd={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ha({type:"spacing",htmlBuilder(l,t){if(Qd.hasOwnProperty(l.text)){var e=Qd[l.text].className||"";if(l.mode==="text"){var i=at.makeOrd(l,t,"textord");return i.classes.push(e),i}else return at.makeSpan(["mspace",e],[at.mathsym(l.text,l.mode,t)],t)}else{if(Wd.hasOwnProperty(l.text))return at.makeSpan(["mspace",Wd[l.text]],[],t);throw new Mt('Unknown type of space "'+l.text+'"')}},mathmlBuilder(l,t){var e;if(Qd.hasOwnProperty(l.text))e=new Ct.MathNode("mtext",[new Ct.TextNode(" ")]);else{if(Wd.hasOwnProperty(l.text))return new Ct.MathNode("mspace");throw new Mt('Unknown type of space "'+l.text+'"')}return e}});var I4=()=>{var l=new Ct.MathNode("mtd",[]);return l.setAttribute("width","50%"),l};ha({type:"tag",mathmlBuilder(l,t){var e=new Ct.MathNode("mtable",[new Ct.MathNode("mtr",[I4(),new Ct.MathNode("mtd",[Rs(l.body,t)]),I4(),new Ct.MathNode("mtd",[Rs(l.tag,t)])])]);return e.setAttribute("width","100%"),e}});var F4={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},P4={"\\textbf":"textbf","\\textmd":"textmd"},ew={"\\textit":"textit","\\textup":"textup"},U4=(l,t)=>{var e=l.font;if(e){if(F4[e])return t.withTextFontFamily(F4[e]);if(P4[e])return t.withTextFontWeight(P4[e]);if(e==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(ew[e])};Ft({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];return{type:"text",mode:e.mode,body:mi(r),font:i}},htmlBuilder(l,t){var e=U4(l,t),i=ki(l.body,e,!0);return at.makeSpan(["mord","text"],i,e)},mathmlBuilder(l,t){var e=U4(l,t);return Rs(l.body,e)}});Ft({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(l,t){var{parser:e}=l;return{type:"underline",mode:e.mode,body:t[0]}},htmlBuilder(l,t){var e=Ee(l.body,t),i=at.makeLineSpan("underline-line",t),r=t.fontMetrics().defaultRuleThickness,a=at.makeVList({positionType:"top",positionData:e.height,children:[{type:"kern",size:r},{type:"elem",elem:i},{type:"kern",size:3*r},{type:"elem",elem:e}]},t);return at.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(l,t){var e=new Ct.MathNode("mo",[new Ct.TextNode("‾")]);e.setAttribute("stretchy","true");var i=new Ct.MathNode("munder",[qe(l.body,t),e]);return i.setAttribute("accentunder","true"),i}});Ft({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(l,t){var{parser:e}=l;return{type:"vcenter",mode:e.mode,body:t[0]}},htmlBuilder(l,t){var e=Ee(l.body,t),i=t.fontMetrics().axisHeight,r=.5*(e.height-i-(e.depth+i));return at.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:e}]},t)},mathmlBuilder(l,t){return new Ct.MathNode("mpadded",[qe(l.body,t)],["vcenter"])}});Ft({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(l,t,e){throw new Mt("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(l,t){for(var e=H4(l),i=[],r=t.havingStyle(t.style.text()),a=0;a<e.length;a++){var o=e[a];o==="~"&&(o="\\textasciitilde"),i.push(at.makeSymbol(o,"Typewriter-Regular",l.mode,r,["mord","texttt"]))}return at.makeSpan(["mord","text"].concat(r.sizingClasses(t)),at.tryCombineChars(i),r)},mathmlBuilder(l,t){var e=new Ct.TextNode(H4(l)),i=new Ct.MathNode("mtext",[e]);return i.setAttribute("mathvariant","monospace"),i}});var H4=l=>l.body.replace(/ /g,l.star?"␣":" "),_s=ev,Ov=`[ \r
	]`,iw="\\\\[a-zA-Z@]+",nw="\\\\[^\uD800-\uDFFF]",rw="("+iw+")"+Ov+"*",sw=`\\\\(
|[ \r	]+
?)[ \r	]*`,kf="[̀-ͯ]",aw=new RegExp(kf+"+$"),ow="("+Ov+"+)|"+(sw+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(kf+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(kf+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+rw)+("|"+nw+")");class j4{constructor(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp(ow,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,e){this.catcodes[t]=e}lex(){var t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new _n("EOF",new dn(this,e,e));var i=this.tokenRegex.exec(t);if(i===null||i.index!==e)throw new Mt("Unexpected character: '"+t[e]+"'",new _n(t[e],new dn(this,e,e+1)));var r=i[6]||i[3]||(i[2]?"\\ ":" ");if(this.catcodes[r]===14){var a=t.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new _n(r,new dn(this,e,this.tokenRegex.lastIndex))}}class lw{constructor(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Mt("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(t[e]==null?delete this.current[e]:this.current[e]=t[e])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,e,i){if(i===void 0&&(i=!1),i){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}e==null?delete this.current[t]:this.current[t]=e}}var cw=Sv;F("\\noexpand",function(l){var t=l.popToken();return l.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});F("\\expandafter",function(l){var t=l.popToken();return l.expandOnce(!0),{tokens:[t],numArgs:0}});F("\\@firstoftwo",function(l){var t=l.consumeArgs(2);return{tokens:t[0],numArgs:0}});F("\\@secondoftwo",function(l){var t=l.consumeArgs(2);return{tokens:t[1],numArgs:0}});F("\\@ifnextchar",function(l){var t=l.consumeArgs(3);l.consumeSpaces();var e=l.future();return t[0].length===1&&t[0][0].text===e.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});F("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");F("\\TextOrMath",function(l){var t=l.consumeArgs(2);return l.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var G4={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};F("\\char",function(l){var t=l.popToken(),e,i="";if(t.text==="'")e=8,t=l.popToken();else if(t.text==='"')e=16,t=l.popToken();else if(t.text==="`")if(t=l.popToken(),t.text[0]==="\\")i=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new Mt("\\char` missing argument");i=t.text.charCodeAt(0)}else e=10;if(e){if(i=G4[t.text],i==null||i>=e)throw new Mt("Invalid base-"+e+" digit "+t.text);for(var r;(r=G4[l.future().text])!=null&&r<e;)i*=e,i+=r,l.popToken()}return"\\@char{"+i+"}"});var gm=(l,t,e,i)=>{var r=l.consumeArg().tokens;if(r.length!==1)throw new Mt("\\newcommand's first argument must be a macro name");var a=r[0].text,o=l.isDefined(a);if(o&&!t)throw new Mt("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!o&&!e)throw new Mt("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var u=0;if(r=l.consumeArg().tokens,r.length===1&&r[0].text==="["){for(var h="",f=l.expandNextToken();f.text!=="]"&&f.text!=="EOF";)h+=f.text,f=l.expandNextToken();if(!h.match(/^\s*[0-9]+\s*$/))throw new Mt("Invalid number of arguments: "+h);u=parseInt(h),r=l.consumeArg().tokens}return o&&i||l.macros.set(a,{tokens:r,numArgs:u}),""};F("\\newcommand",l=>gm(l,!1,!0,!1));F("\\renewcommand",l=>gm(l,!0,!1,!1));F("\\providecommand",l=>gm(l,!0,!0,!0));F("\\message",l=>{var t=l.consumeArgs(1)[0];return console.log(t.reverse().map(e=>e.text).join("")),""});F("\\errmessage",l=>{var t=l.consumeArgs(1)[0];return console.error(t.reverse().map(e=>e.text).join("")),""});F("\\show",l=>{var t=l.popToken(),e=t.text;return console.log(t,l.macros.get(e),_s[e],Ve.math[e],Ve.text[e]),""});F("\\bgroup","{");F("\\egroup","}");F("~","\\nobreakspace");F("\\lq","`");F("\\rq","'");F("\\aa","\\r a");F("\\AA","\\r A");F("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");F("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");F("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");F("ℬ","\\mathscr{B}");F("ℰ","\\mathscr{E}");F("ℱ","\\mathscr{F}");F("ℋ","\\mathscr{H}");F("ℐ","\\mathscr{I}");F("ℒ","\\mathscr{L}");F("ℳ","\\mathscr{M}");F("ℛ","\\mathscr{R}");F("ℭ","\\mathfrak{C}");F("ℌ","\\mathfrak{H}");F("ℨ","\\mathfrak{Z}");F("\\Bbbk","\\Bbb{k}");F("·","\\cdotp");F("\\llap","\\mathllap{\\textrm{#1}}");F("\\rlap","\\mathrlap{\\textrm{#1}}");F("\\clap","\\mathclap{\\textrm{#1}}");F("\\mathstrut","\\vphantom{(}");F("\\underbar","\\underline{\\text{#1}}");F("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');F("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");F("\\ne","\\neq");F("≠","\\neq");F("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");F("∉","\\notin");F("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");F("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");F("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");F("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");F("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");F("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");F("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");F("⟂","\\perp");F("‼","\\mathclose{!\\mkern-0.8mu!}");F("∌","\\notni");F("⌜","\\ulcorner");F("⌝","\\urcorner");F("⌞","\\llcorner");F("⌟","\\lrcorner");F("©","\\copyright");F("®","\\textregistered");F("️","\\textregistered");F("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');F("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');F("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');F("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');F("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");F("⋮","\\vdots");F("\\varGamma","\\mathit{\\Gamma}");F("\\varDelta","\\mathit{\\Delta}");F("\\varTheta","\\mathit{\\Theta}");F("\\varLambda","\\mathit{\\Lambda}");F("\\varXi","\\mathit{\\Xi}");F("\\varPi","\\mathit{\\Pi}");F("\\varSigma","\\mathit{\\Sigma}");F("\\varUpsilon","\\mathit{\\Upsilon}");F("\\varPhi","\\mathit{\\Phi}");F("\\varPsi","\\mathit{\\Psi}");F("\\varOmega","\\mathit{\\Omega}");F("\\substack","\\begin{subarray}{c}#1\\end{subarray}");F("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");F("\\boxed","\\fbox{$\\displaystyle{#1}$}");F("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");F("\\implies","\\DOTSB\\;\\Longrightarrow\\;");F("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");F("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");F("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var q4={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};F("\\dots",function(l){var t="\\dotso",e=l.expandAfterFuture().text;return e in q4?t=q4[e]:(e.slice(0,4)==="\\not"||e in Ve.math&&["bin","rel"].includes(Ve.math[e].group))&&(t="\\dotsb"),t});var bm={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};F("\\dotso",function(l){var t=l.future().text;return t in bm?"\\ldots\\,":"\\ldots"});F("\\dotsc",function(l){var t=l.future().text;return t in bm&&t!==","?"\\ldots\\,":"\\ldots"});F("\\cdots",function(l){var t=l.future().text;return t in bm?"\\@cdots\\,":"\\@cdots"});F("\\dotsb","\\cdots");F("\\dotsm","\\cdots");F("\\dotsi","\\!\\cdots");F("\\dotsx","\\ldots\\,");F("\\DOTSI","\\relax");F("\\DOTSB","\\relax");F("\\DOTSX","\\relax");F("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");F("\\,","\\tmspace+{3mu}{.1667em}");F("\\thinspace","\\,");F("\\>","\\mskip{4mu}");F("\\:","\\tmspace+{4mu}{.2222em}");F("\\medspace","\\:");F("\\;","\\tmspace+{5mu}{.2777em}");F("\\thickspace","\\;");F("\\!","\\tmspace-{3mu}{.1667em}");F("\\negthinspace","\\!");F("\\negmedspace","\\tmspace-{4mu}{.2222em}");F("\\negthickspace","\\tmspace-{5mu}{.277em}");F("\\enspace","\\kern.5em ");F("\\enskip","\\hskip.5em\\relax");F("\\quad","\\hskip1em\\relax");F("\\qquad","\\hskip2em\\relax");F("\\tag","\\@ifstar\\tag@literal\\tag@paren");F("\\tag@paren","\\tag@literal{({#1})}");F("\\tag@literal",l=>{if(l.macros.get("\\df@tag"))throw new Mt("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});F("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");F("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");F("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");F("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");F("\\newline","\\\\\\relax");F("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var zv=Ot(dr["Main-Regular"][84][1]-.7*dr["Main-Regular"][65][1]);F("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+zv+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");F("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+zv+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");F("\\hspace","\\@ifstar\\@hspacer\\@hspace");F("\\@hspace","\\hskip #1\\relax");F("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");F("\\ordinarycolon",":");F("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");F("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');F("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');F("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');F("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');F("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');F("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');F("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');F("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');F("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');F("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');F("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');F("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');F("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');F("∷","\\dblcolon");F("∹","\\eqcolon");F("≔","\\coloneqq");F("≕","\\eqqcolon");F("⩴","\\Coloneqq");F("\\ratio","\\vcentcolon");F("\\coloncolon","\\dblcolon");F("\\colonequals","\\coloneqq");F("\\coloncolonequals","\\Coloneqq");F("\\equalscolon","\\eqqcolon");F("\\equalscoloncolon","\\Eqqcolon");F("\\colonminus","\\coloneq");F("\\coloncolonminus","\\Coloneq");F("\\minuscolon","\\eqcolon");F("\\minuscoloncolon","\\Eqcolon");F("\\coloncolonapprox","\\Colonapprox");F("\\coloncolonsim","\\Colonsim");F("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");F("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");F("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");F("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");F("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");F("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");F("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");F("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");F("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");F("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");F("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");F("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");F("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");F("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");F("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");F("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");F("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");F("\\nleqq","\\html@mathml{\\@nleqq}{≰}");F("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");F("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");F("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");F("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");F("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");F("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");F("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");F("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");F("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");F("\\imath","\\html@mathml{\\@imath}{ı}");F("\\jmath","\\html@mathml{\\@jmath}{ȷ}");F("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");F("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");F("⟦","\\llbracket");F("⟧","\\rrbracket");F("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");F("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");F("⦃","\\lBrace");F("⦄","\\rBrace");F("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");F("⦵","\\minuso");F("\\darr","\\downarrow");F("\\dArr","\\Downarrow");F("\\Darr","\\Downarrow");F("\\lang","\\langle");F("\\rang","\\rangle");F("\\uarr","\\uparrow");F("\\uArr","\\Uparrow");F("\\Uarr","\\Uparrow");F("\\N","\\mathbb{N}");F("\\R","\\mathbb{R}");F("\\Z","\\mathbb{Z}");F("\\alef","\\aleph");F("\\alefsym","\\aleph");F("\\Alpha","\\mathrm{A}");F("\\Beta","\\mathrm{B}");F("\\bull","\\bullet");F("\\Chi","\\mathrm{X}");F("\\clubs","\\clubsuit");F("\\cnums","\\mathbb{C}");F("\\Complex","\\mathbb{C}");F("\\Dagger","\\ddagger");F("\\diamonds","\\diamondsuit");F("\\empty","\\emptyset");F("\\Epsilon","\\mathrm{E}");F("\\Eta","\\mathrm{H}");F("\\exist","\\exists");F("\\harr","\\leftrightarrow");F("\\hArr","\\Leftrightarrow");F("\\Harr","\\Leftrightarrow");F("\\hearts","\\heartsuit");F("\\image","\\Im");F("\\infin","\\infty");F("\\Iota","\\mathrm{I}");F("\\isin","\\in");F("\\Kappa","\\mathrm{K}");F("\\larr","\\leftarrow");F("\\lArr","\\Leftarrow");F("\\Larr","\\Leftarrow");F("\\lrarr","\\leftrightarrow");F("\\lrArr","\\Leftrightarrow");F("\\Lrarr","\\Leftrightarrow");F("\\Mu","\\mathrm{M}");F("\\natnums","\\mathbb{N}");F("\\Nu","\\mathrm{N}");F("\\Omicron","\\mathrm{O}");F("\\plusmn","\\pm");F("\\rarr","\\rightarrow");F("\\rArr","\\Rightarrow");F("\\Rarr","\\Rightarrow");F("\\real","\\Re");F("\\reals","\\mathbb{R}");F("\\Reals","\\mathbb{R}");F("\\Rho","\\mathrm{P}");F("\\sdot","\\cdot");F("\\sect","\\S");F("\\spades","\\spadesuit");F("\\sub","\\subset");F("\\sube","\\subseteq");F("\\supe","\\supseteq");F("\\Tau","\\mathrm{T}");F("\\thetasym","\\vartheta");F("\\weierp","\\wp");F("\\Zeta","\\mathrm{Z}");F("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");F("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");F("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");F("\\bra","\\mathinner{\\langle{#1}|}");F("\\ket","\\mathinner{|{#1}\\rangle}");F("\\braket","\\mathinner{\\langle{#1}\\rangle}");F("\\Bra","\\left\\langle#1\\right|");F("\\Ket","\\left|#1\\right\\rangle");var Lv=l=>t=>{var e=t.consumeArg().tokens,i=t.consumeArg().tokens,r=t.consumeArg().tokens,a=t.consumeArg().tokens,o=t.macros.get("|"),u=t.macros.get("\\|");t.macros.beginGroup();var h=p=>b=>{l&&(b.macros.set("|",o),r.length&&b.macros.set("\\|",u));var v=p;if(!p&&r.length){var w=b.future();w.text==="|"&&(b.popToken(),v=!0)}return{tokens:v?r:i,numArgs:0}};t.macros.set("|",h(!1)),r.length&&t.macros.set("\\|",h(!0));var f=t.consumeArg().tokens,m=t.expandTokens([...a,...f,...e]);return t.macros.endGroup(),{tokens:m.reverse(),numArgs:0}};F("\\bra@ket",Lv(!1));F("\\bra@set",Lv(!0));F("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");F("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");F("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");F("\\angln","{\\angl n}");F("\\blue","\\textcolor{##6495ed}{#1}");F("\\orange","\\textcolor{##ffa500}{#1}");F("\\pink","\\textcolor{##ff00af}{#1}");F("\\red","\\textcolor{##df0030}{#1}");F("\\green","\\textcolor{##28ae7b}{#1}");F("\\gray","\\textcolor{gray}{#1}");F("\\purple","\\textcolor{##9d38bd}{#1}");F("\\blueA","\\textcolor{##ccfaff}{#1}");F("\\blueB","\\textcolor{##80f6ff}{#1}");F("\\blueC","\\textcolor{##63d9ea}{#1}");F("\\blueD","\\textcolor{##11accd}{#1}");F("\\blueE","\\textcolor{##0c7f99}{#1}");F("\\tealA","\\textcolor{##94fff5}{#1}");F("\\tealB","\\textcolor{##26edd5}{#1}");F("\\tealC","\\textcolor{##01d1c1}{#1}");F("\\tealD","\\textcolor{##01a995}{#1}");F("\\tealE","\\textcolor{##208170}{#1}");F("\\greenA","\\textcolor{##b6ffb0}{#1}");F("\\greenB","\\textcolor{##8af281}{#1}");F("\\greenC","\\textcolor{##74cf70}{#1}");F("\\greenD","\\textcolor{##1fab54}{#1}");F("\\greenE","\\textcolor{##0d923f}{#1}");F("\\goldA","\\textcolor{##ffd0a9}{#1}");F("\\goldB","\\textcolor{##ffbb71}{#1}");F("\\goldC","\\textcolor{##ff9c39}{#1}");F("\\goldD","\\textcolor{##e07d10}{#1}");F("\\goldE","\\textcolor{##a75a05}{#1}");F("\\redA","\\textcolor{##fca9a9}{#1}");F("\\redB","\\textcolor{##ff8482}{#1}");F("\\redC","\\textcolor{##f9685d}{#1}");F("\\redD","\\textcolor{##e84d39}{#1}");F("\\redE","\\textcolor{##bc2612}{#1}");F("\\maroonA","\\textcolor{##ffbde0}{#1}");F("\\maroonB","\\textcolor{##ff92c6}{#1}");F("\\maroonC","\\textcolor{##ed5fa6}{#1}");F("\\maroonD","\\textcolor{##ca337c}{#1}");F("\\maroonE","\\textcolor{##9e034e}{#1}");F("\\purpleA","\\textcolor{##ddd7ff}{#1}");F("\\purpleB","\\textcolor{##c6b9fc}{#1}");F("\\purpleC","\\textcolor{##aa87ff}{#1}");F("\\purpleD","\\textcolor{##7854ab}{#1}");F("\\purpleE","\\textcolor{##543b78}{#1}");F("\\mintA","\\textcolor{##f5f9e8}{#1}");F("\\mintB","\\textcolor{##edf2df}{#1}");F("\\mintC","\\textcolor{##e0e5cc}{#1}");F("\\grayA","\\textcolor{##f6f7f7}{#1}");F("\\grayB","\\textcolor{##f0f1f2}{#1}");F("\\grayC","\\textcolor{##e3e5e6}{#1}");F("\\grayD","\\textcolor{##d6d8da}{#1}");F("\\grayE","\\textcolor{##babec2}{#1}");F("\\grayF","\\textcolor{##888d93}{#1}");F("\\grayG","\\textcolor{##626569}{#1}");F("\\grayH","\\textcolor{##3b3e40}{#1}");F("\\grayI","\\textcolor{##21242c}{#1}");F("\\kaBlue","\\textcolor{##314453}{#1}");F("\\kaGreen","\\textcolor{##71B307}{#1}");var Bv={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class uw{constructor(t,e,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new lw(cw,e.macros),this.mode=i,this.stack=[]}feed(t){this.lexer=new j4(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var e,i,r;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;e=this.popToken(),{tokens:r,end:i}=this.consumeArg(["]"])}else({tokens:r,start:e,end:i}=this.consumeArg());return this.pushToken(new _n("EOF",i.loc)),this.pushTokens(r),new _n("",dn.range(e,i))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var e=[],i=t&&t.length>0;i||this.consumeSpaces();var r=this.future(),a,o=0,u=0;do{if(a=this.popToken(),e.push(a),a.text==="{")++o;else if(a.text==="}"){if(--o,o===-1)throw new Mt("Extra }",a)}else if(a.text==="EOF")throw new Mt("Unexpected end of input in a macro argument, expected '"+(t&&i?t[u]:"}")+"'",a);if(t&&i)if((o===0||o===1&&t[u]==="{")&&a.text===t[u]){if(++u,u===t.length){e.splice(-u,u);break}}else u=0}while(o!==0||i);return r.text==="{"&&e[e.length-1].text==="}"&&(e.pop(),e.shift()),e.reverse(),{tokens:e,start:r,end:a}}consumeArgs(t,e){if(e){if(e.length!==t+1)throw new Mt("The length of delimiters doesn't match the number of args!");for(var i=e[0],r=0;r<i.length;r++){var a=this.popToken();if(i[r]!==a.text)throw new Mt("Use of the macro doesn't match its definition",a)}}for(var o=[],u=0;u<t;u++)o.push(this.consumeArg(e&&e[u+1]).tokens);return o}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new Mt("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var e=this.popToken(),i=e.text,r=e.noexpand?null:this._getExpansion(i);if(r==null||t&&r.unexpandable){if(t&&r==null&&i[0]==="\\"&&!this.isDefined(i))throw new Mt("Undefined control sequence: "+i);return this.pushToken(e),!1}this.countExpansion(1);var a=r.tokens,o=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs){a=a.slice();for(var u=a.length-1;u>=0;--u){var h=a[u];if(h.text==="#"){if(u===0)throw new Mt("Incomplete placeholder at end of macro body",h);if(h=a[--u],h.text==="#")a.splice(u+1,1);else if(/^[1-9]$/.test(h.text))a.splice(u,2,...o[+h.text-1]);else throw new Mt("Not a valid argument number",h)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new _n(t)]):void 0}expandTokens(t){var e=[],i=this.stack.length;for(this.pushTokens(t);this.stack.length>i;)if(this.expandOnce(!0)===!1){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),e.push(r)}return this.countExpansion(e.length),e}expandMacroAsText(t){var e=this.expandMacro(t);return e&&e.map(i=>i.text).join("")}_getExpansion(t){var e=this.macros.get(t);if(e==null)return e;if(t.length===1){var i=this.lexer.catcodes[t];if(i!=null&&i!==13)return}var r=typeof e=="function"?e(this):e;if(typeof r=="string"){var a=0;if(r.indexOf("#")!==-1)for(var o=r.replace(/##/g,"");o.indexOf("#"+(a+1))!==-1;)++a;for(var u=new j4(r,this.settings),h=[],f=u.lex();f.text!=="EOF";)h.push(f),f=u.lex();h.reverse();var m={tokens:h,numArgs:a};return m}return r}isDefined(t){return this.macros.has(t)||_s.hasOwnProperty(t)||Ve.math.hasOwnProperty(t)||Ve.text.hasOwnProperty(t)||Bv.hasOwnProperty(t)}isExpandable(t){var e=this.macros.get(t);return e!=null?typeof e=="string"||typeof e=="function"||!e.unexpandable:_s.hasOwnProperty(t)&&!_s[t].primitive}}var $4=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,O0=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),Jd={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},V4={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class mu{constructor(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new uw(t,e,this.mode),this.settings=e,this.leftrightDepth=0}expect(t,e){if(e===void 0&&(e=!0),this.fetch().text!==t)throw new Mt("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());e&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var e=this.nextToken;this.consume(),this.gullet.pushToken(new _n("}")),this.gullet.pushTokens(t);var i=this.parseExpression(!1);return this.expect("}"),this.nextToken=e,i}parseExpression(t,e){for(var i=[];;){this.mode==="math"&&this.consumeSpaces();var r=this.fetch();if(mu.endOfExpression.indexOf(r.text)!==-1||e&&r.text===e||t&&_s[r.text]&&_s[r.text].infix)break;var a=this.parseAtom(e);if(a){if(a.type==="internal")continue}else break;i.push(a)}return this.mode==="text"&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(t){for(var e=-1,i,r=0;r<t.length;r++)if(t[r].type==="infix"){if(e!==-1)throw new Mt("only one infix operator per group",t[r].token);e=r,i=t[r].replaceWith}if(e!==-1&&i){var a,o,u=t.slice(0,e),h=t.slice(e+1);u.length===1&&u[0].type==="ordgroup"?a=u[0]:a={type:"ordgroup",mode:this.mode,body:u},h.length===1&&h[0].type==="ordgroup"?o=h[0]:o={type:"ordgroup",mode:this.mode,body:h};var f;return i==="\\\\abovefrac"?f=this.callFunction(i,[a,t[e],o],[]):f=this.callFunction(i,[a,o],[]),[f]}else return t}handleSupSubscript(t){var e=this.fetch(),i=e.text;this.consume(),this.consumeSpaces();var r;do{var a;r=this.parseGroup(t)}while(((a=r)==null?void 0:a.type)==="internal");if(!r)throw new Mt("Expected group after '"+i+"'",e);return r}formatUnsupportedCmd(t){for(var e=[],i=0;i<t.length;i++)e.push({type:"textord",mode:"text",text:t[i]});var r={type:"text",mode:this.mode,body:e},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]};return a}parseAtom(t){var e=this.parseGroup("atom",t);if(e?.type==="internal"||this.mode==="text")return e;for(var i,r;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(e&&e.type==="op"){var o=a.text==="\\limits";e.limits=o,e.alwaysHandleSupSub=!0}else if(e&&e.type==="operatorname")e.alwaysHandleSupSub&&(e.limits=a.text==="\\limits");else throw new Mt("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(i)throw new Mt("Double superscript",a);i=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(r)throw new Mt("Double subscript",a);r=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(i)throw new Mt("Double superscript",a);var u={type:"textord",mode:this.mode,text:"\\prime"},h=[u];for(this.consume();this.fetch().text==="'";)h.push(u),this.consume();this.fetch().text==="^"&&h.push(this.handleSupSubscript("superscript")),i={type:"ordgroup",mode:this.mode,body:h}}else if(O0[a.text]){var f=$4.test(a.text),m=[];for(m.push(new _n(O0[a.text])),this.consume();;){var p=this.fetch().text;if(!O0[p]||$4.test(p)!==f)break;m.unshift(new _n(O0[p])),this.consume()}var b=this.subparse(m);f?r={type:"ordgroup",mode:"math",body:b}:i={type:"ordgroup",mode:"math",body:b}}else break}return i||r?{type:"supsub",mode:this.mode,base:e,sup:i,sub:r}:e}parseFunction(t,e){var i=this.fetch(),r=i.text,a=_s[r];if(!a)return null;if(this.consume(),e&&e!=="atom"&&!a.allowedInArgument)throw new Mt("Got function '"+r+"' with no arguments"+(e?" as "+e:""),i);if(this.mode==="text"&&!a.allowedInText)throw new Mt("Can't use function '"+r+"' in text mode",i);if(this.mode==="math"&&a.allowedInMath===!1)throw new Mt("Can't use function '"+r+"' in math mode",i);var{args:o,optArgs:u}=this.parseArguments(r,a);return this.callFunction(r,o,u,i,t)}callFunction(t,e,i,r,a){var o={funcName:t,parser:this,token:r,breakOnTokenText:a},u=_s[t];if(u&&u.handler)return u.handler(o,e,i);throw new Mt("No function handler for "+t)}parseArguments(t,e){var i=e.numArgs+e.numOptionalArgs;if(i===0)return{args:[],optArgs:[]};for(var r=[],a=[],o=0;o<i;o++){var u=e.argTypes&&e.argTypes[o],h=o<e.numOptionalArgs;(e.primitive&&u==null||e.type==="sqrt"&&o===1&&a[0]==null)&&(u="primitive");var f=this.parseGroupOfType("argument to '"+t+"'",u,h);if(h)a.push(f);else if(f!=null)r.push(f);else throw new Mt("Null argument, please report this as a bug")}return{args:r,optArgs:a}}parseGroupOfType(t,e,i){switch(e){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,e);case"hbox":{var r=this.parseArgumentGroup(i,"text");return r!=null?{type:"styling",mode:r.mode,body:[r],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",i);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(i)throw new Mt("A primitive argument cannot be optional");var o=this.parseGroup(t);if(o==null)throw new Mt("Expected group as "+t,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new Mt("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,e){var i=this.gullet.scanArgument(e);if(i==null)return null;for(var r="",a;(a=this.fetch()).text!=="EOF";)r+=a.text,this.consume();return this.consume(),i.text=r,i}parseRegexGroup(t,e){for(var i=this.fetch(),r=i,a="",o;(o=this.fetch()).text!=="EOF"&&t.test(a+o.text);)r=o,a+=r.text,this.consume();if(a==="")throw new Mt("Invalid "+e+": '"+i.text+"'",i);return i.range(r,a)}parseColorGroup(t){var e=this.parseStringGroup("color",t);if(e==null)return null;var i=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!i)throw new Mt("Invalid color: '"+e.text+"'",e);var r=i[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(t){var e,i=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?e=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):e=this.parseStringGroup("size",t),!e)return null;!t&&e.text.length===0&&(e.text="0pt",i=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!r)throw new Mt("Invalid size: '"+e.text+"'",e);var a={number:+(r[1]+r[2]),unit:r[3]};if(!Vb(a))throw new Mt("Invalid unit: '"+a.unit+"'",e);return{type:"size",mode:this.mode,value:a,isBlank:i}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var e=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),e==null)return null;var i=e.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(t,e){var i=this.gullet.scanArgument(t);if(i==null)return null;var r=this.mode;e&&this.switchMode(e),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:i.loc,body:a};return e&&this.switchMode(r),o}parseGroup(t,e){var i=this.fetch(),r=i.text,a;if(r==="{"||r==="\\begingroup"){this.consume();var o=r==="{"?"}":"\\endgroup";this.gullet.beginGroup();var u=this.parseExpression(!1,o),h=this.fetch();this.expect(o),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:dn.range(i,h),body:u,semisimple:r==="\\begingroup"||void 0}}else if(a=this.parseFunction(e,t)||this.parseSymbol(),a==null&&r[0]==="\\"&&!Bv.hasOwnProperty(r)){if(this.settings.throwOnError)throw new Mt("Undefined control sequence: "+r,i);a=this.formatUnsupportedCmd(r),this.consume()}return a}formLigatures(t){for(var e=t.length-1,i=0;i<e;++i){var r=t[i],a=r.text;a==="-"&&t[i+1].text==="-"&&(i+1<e&&t[i+2].text==="-"?(t.splice(i,3,{type:"textord",mode:"text",loc:dn.range(r,t[i+2]),text:"---"}),e-=2):(t.splice(i,2,{type:"textord",mode:"text",loc:dn.range(r,t[i+1]),text:"--"}),e-=1)),(a==="'"||a==="`")&&t[i+1].text===a&&(t.splice(i,2,{type:"textord",mode:"text",loc:dn.range(r,t[i+1]),text:a+a}),e-=1)}}parseSymbol(){var t=this.fetch(),e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();var i=e.slice(5),r=i.charAt(0)==="*";if(r&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new Mt(`\\verb assertion failed --
                    please report what input caused this bug`);return i=i.slice(1,-1),{type:"verb",mode:"text",body:i,star:r}}V4.hasOwnProperty(e[0])&&!Ve[this.mode][e[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=V4[e[0]]+e.slice(1));var a=aw.exec(e);a&&(e=e.substring(0,a.index),e==="i"?e="ı":e==="j"&&(e="ȷ"));var o;if(Ve[this.mode][e]){this.settings.strict&&this.mode==="math"&&xf.indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);var u=Ve[this.mode][e].group,h=dn.range(t),f;if(Q8.hasOwnProperty(u)){var m=u;f={type:"atom",mode:this.mode,family:m,loc:h,text:e}}else f={type:u,mode:this.mode,loc:h,text:e};o=f}else if(e.charCodeAt(0)>=128)this.settings.strict&&($b(e.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'"'+(" ("+e.charCodeAt(0)+")"),t)),o={type:"textord",mode:"text",loc:dn.range(t),text:e};else return null;if(this.consume(),a)for(var p=0;p<a[0].length;p++){var b=a[0][p];if(!Jd[b])throw new Mt("Unknown accent ' "+b+"'",t);var v=Jd[b][this.mode]||Jd[b].text;if(!v)throw new Mt("Accent "+b+" unsupported in "+this.mode+" mode",t);o={type:"accent",mode:this.mode,loc:dn.range(t),label:v,isStretchy:!1,isShifty:!0,base:o}}return o}}mu.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var vm=function(t,e){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var i=new mu(t,e);delete i.gullet.macros.current["\\df@tag"];var r=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new Mt("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:i.subparse([new _n("\\df@tag")])}]}return r},Iv=function(t,e,i){e.textContent="";var r=ym(t,i).toNode();e.appendChild(r)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Iv=function(){throw new Mt("KaTeX doesn't work in quirks mode.")});var hw=function(t,e){var i=ym(t,e).toMarkup();return i},dw=function(t,e){var i=new tm(e);return vm(t,i)},Fv=function(t,e,i){if(i.throwOnError||!(t instanceof Mt))throw t;var r=at.makeSpan(["katex-error"],[new Hn(e)]);return r.setAttribute("title",t.toString()),r.setAttribute("style","color:"+i.errorColor),r},ym=function(t,e){var i=new tm(e);try{var r=vm(t,i);return wx(r,t,i)}catch(a){return Fv(a,t,i)}},fw=function(t,e){var i=new tm(e);try{var r=vm(t,i);return Sx(r,t,i)}catch(a){return Fv(a,t,i)}},mw="0.16.25",pw={Span:Vl,Anchor:nm,SymbolNode:Hn,SvgNode:$r,PathNode:Ms,LineNode:yf},gw={version:mw,render:Iv,renderToString:hw,ParseError:Mt,SETTINGS_SCHEMA:F0,__parse:dw,__renderToDomTree:ym,__renderToHTMLTree:fw,__setFontMetrics:q8,__defineSymbol:S,__defineFunction:Ft,__defineMacro:F,__domTree:pw};const bw=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:？！。，：]|$)/,vw=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,yw=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function xw(l={}){return{extensions:[ww(l,Y4(l,!1)),Sw(l,Y4(l,!0))]}}function Y4(l,t){return e=>gw.renderToString(e.text,{...l,displayMode:e.displayMode})+(t?`
`:"")}function ww(l,t){const e=l&&l.nonStandard,i=e?vw:bw;return{name:"inlineKatex",level:"inline",start(r){let a,o=r;for(;o;){if(a=o.indexOf("$"),a===-1)return;if((e?a>-1:a===0||o.charAt(a-1)===" ")&&o.substring(a).match(i))return a;o=o.substring(a+1).replace(/^\$+/,"")}},tokenizer(r,a){const o=r.match(i);if(o)return{type:"inlineKatex",raw:o[0],text:o[2].trim(),displayMode:o[1].length===2}},renderer:t}}function Sw(l,t){return{name:"blockKatex",level:"block",tokenizer(e,i){const r=e.match(yw);if(r)return{type:"blockKatex",raw:r[0],text:r[2].trim(),displayMode:r[1].length===2}},renderer:t}}lo.workerSrc=new URL("/ai-slide-generater/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const Zt={INITIAL:"initial",STRUCTURING:"structuring",STRUCTURED:"structured",SELECTING_THEME:"selecting_theme",CREATING_OUTLINE:"creating_outline",SELECTING_SECTION_HEADERS:"selecting_section_headers",GENERATING_OUTLINE:"generating_outline",OUTLINE_CREATED:"outline_created",GENERATING_SLIDES:"generating_slides",SLIDE_GENERATED:"slide_generated",ALL_SLIDES_GENERATED:"all_slides_generated"},or={structureText:l=>`### 指示
あなたは、与えられたテキストをクリーンアップし、論理構造を解析する専門家です。以下のテキストに含まれる、PDF抽出時に発生しがちな単語間の不自然なスペース（例：「ドキュメント」が「ドキュ メント」となっている箇所）を修正し、自然な文章にしてください。
その上で、内容を論理的に整理し、見出し、リスト、段落が明確に分かるMarkdown形式に再構成してください。元のテキストに含まれる重要な情報は一切省略しないでください。

### テキスト
${l}`,createOutline:(l,t,e)=>`### 指示
あなたはプロのプレゼンテーション構成作家です。以下のMarkdownテキストを分析し、最も効果的なプレゼンテーションの構成案をJSON形式で作成してください。

### 利用可能なテンプレート
- \`title_slide\`: 表紙
- \`agenda\`: 目次
- \`section_header\`: 章の区切り
- \`content_basic\`: **単純な箇条書き**（番号なし・あり両方）のための最も標準的なテンプレート。
- \`content_with_diagram\`: 文章と図解（インフォグラフィック）。
- \`math_basic\`: **単一の主要な数式**とその解説（上下分割）。
- \`three_points\`: 3つの要点を横並びで表示。
- \`vertical_steps\`: 時系列やステップ。
- \`comparison\`: **2〜4つの項目（メリット/デメリット、A案/B案/C案など）を比較・対比**するための専用テンプレート。
- \`table_basic\`: **表形式（テーブル）**。機能一覧、比較表、数値データなど。
- \`summary_or_thankyou\`: 最後のまとめ、または「ご聴取ありがとうございました」用。

### テンプレート選択の思考プロセスと具体例
あなたはMarkdownの各セクションを分析する際、以下の優先順位と思考プロセスでテンプレートを厳格に選択してください。

1.  **[最優先] 表形式か？**: 内容が機能一覧、数値データ、仕様比較など、明らかに表（テーブル）で表現するのが最適な場合は、必ず \`table_basic\` を選択します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### 機能比較
        | 機能 | プランA | プランB |
        |---|---|---|
        | 基本機能 | 〇 | 〇 |
        | 高度な分析 | - | 〇 |
        \`\`\`
    * **出力テンプレート**: \`table_basic\`

2.  **[次点] 比較・対比か？**: 内容が **2〜4つの項目**（例：メリット/デメリット、A案/B案、従来/新規、プランA/B/C）を明確に比較・対比している場合は、必ず \`comparison\` を選択します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### 従来システムとの比較
        **従来システム**
        - 課題1: コストが高い
        - 課題2: 手動作業が多い
        **新システム**
        - 解決策1: 50%のコスト削減
        - 解決策2: 自動化を実現
        \`\`\`
    * **出力テンプレート**: \`comparison\`

3.  **[次点] 3つの要点か？**: 内容が3つの主要な特徴、ステップ、利点を並列で紹介している場合は、\`three_points\` の使用を優先します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### 3つのメリット
        1.  **コスト削減**: ...
        2.  **効率化**: ...
        3.  **セキュリティ向上**: ...
        \`\`\`
    * **出力テンプレート**: \`three_points\`

4.  **[次点] ステップか？**: 内容が時系列や手順を示している場合は、\`vertical_steps\` を選択します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### 導入プロセス
        - ステップ1: ヒアリング
        - ステップ2: 設計
        - ステップ3: 開発
        \`\`\`
    * **出力テンプレート**: \`vertical_steps\`

5.  **[次点] 主要な数式か？**: 内容が**単一の主要な数式ブロック（$$...$$）**とその解説文で構成されている場合（数式が主題の場合）、必ず \`math_basic\` を選択します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### 二次方程式の解
        二次方程式 $ax^2 + bx + c = 0$ の解は、以下の公式で与えられます。
        $$ x = \frac{-b pm sqrt{b^2 - 4ac}}{2a} $$
        この $b^2 - 4ac$ の部分を判別式と呼びます...
        \`\`\`
    * **出力テンプレート**: \`math_basic\`

6.  **[次点] 図解が必要か？**: 内容が抽象的な概念や関係性（例：システム構成図、相関関係）を含み、テキストだけでは伝わりにくい場合、**かつ上記の数式テンプレート（math_basic）に当てはまらない場合**は、\`content_with_diagram\` を選択します。    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### システム構成
        本システムは、ユーザー、アプリケーションサーバー、データベースの3層構造で構成されており...
        \`\`\`
    * **出力テンプレート**: \`content_with_diagram\`

7.  **[最終手段] 単純なリストか？**: 上記のいずれにも当てはまらない、単純な箇条書きや説明文の場合は、\`content_basic\` を選択します。

### 条件
- 1枚目は必ず\`template\`が\`title_slide\`のタイトルページとしてください。タイトルはMarkdownの内容から最も適切と思われるものを自動で設定してください。
- **【最重要・JSONエスケープルール】**: \`summary\`や\`description\`などのJSON文字列内にバックスラッシュ（\`\\\`）を含める場合は、必ず（\`\\\\\`）と二重にエスケープしてください。（例: \`"summary": "C:\\\\Windows"\`）
- **【文字数制限】**: スライドのタイトル（\`title\`キー）は、日本語で**27文字以内**の簡潔なものにしてください。長すぎて2行になるタイトルは避けてください。
- **最重要**: \`summary\`や各項目の説明は、**プレゼンテーションでそのまま使える簡潔な言葉**で記述し、必要に応じて箇条書き（- や 1.）を使用してください。

- **【強調ルール】**: \`summary\`, \`items\`, \`points\`, \`columns\`, \`table\` の各テキストを生成する際、**プレゼンテーションで特に重要となるキーワード、専門用語、またはキーとなる数値**は、必ずMarkdownの太字記法（\`**キーワード**\`）で囲んで積極的に強調してください。
- **【用語解説ルール】**: もし \`用語：その解説\` のような形式で記述する場合は、必ず \`**用語**：その解説\` のように、コロン（：）の前の用語部分を太字にしてください。

- **【数式表示ルール】**: もし内容に数式、変数、または計算式（例： \`y = ax + b\` や \`費用 - 収益\`）が含まれる場合は、**必ず KaTeX 形式**で記述してください。
  - **インライン数式**: 文中の数式は、シングルダラー（\`$\`）で囲んでください。（例: \`これは $y = ax + b$ の例です。\`）
  - **ブロック数式**: 独立した行の数式は、ダブルダラー（\`$$\`）で囲んでください。（例: \`$$ sum_{i=1}^{n} x_i $$ \`）
  - **【最重要】日本語の変数名**: 数式内で日本語の用語（例：\`課税譲渡所得金額\`）を使用する場合は、必ず \`	ext{...}\` コマンドで囲んでください。（例: \`$$ 	ext{課税譲渡所得金額} = 	ext{収入金額} - (	ext{取得費} + 	ext{譲渡費用}) - 	ext{特別控除額} $$ \`）

- **上記の専用テンプレート（table_basic, comparison, three_points など）のいずれにも当てはまらない**、単純な箇条書き（番号付き/なし）が中心のスライドを作成する場合に**のみ**、\`content_basic\` テンプレートを使用してください。
  - \`content_basic\` を選択した場合、**\`summary\`キーは絶対に空（""）**にし、代わりに **\`items\`キー** で「箇条書きの各項目（文字列）」の配列を生成してください。
  - **【最重要】\`items\` の各項目（文字列）の先頭には、ハイフン（-）やアスタリスク（*）、数字（1.）などのリストマーカーを**絶対に**含めないでください。（CSSで自動付与されます）
  - もし箇条書きを**ネスト（インデント）**させたい場合は、項目の先頭に**半角スペース2個**を挿入してください。（例： \`"  これが子項目です"\`）
  - 孫項目は半角スペース4個（\`"    これが孫項目です"\`）のように表現してください。
  - **【行数制限】**: スライドの視認性を保つため、\`content_basic\` の \`items\` 配列は **最大7行（7項目）程度** に収めてください。
  - **【自動分割】**: もし元のデータがこのサイズに **要約しきれないほど多い場合**、無理に1枚に押し込めたり、情報を省略したりしないでください。
  - **【分割ルール】**: その場合、\`template\` が \`content_basic\` のスライドを **複数枚に分割** してください。（例：1枚目のタイトルを「**主な特長 (1/2)**」、2枚目のタイトルを「**主な特長 (2/2)**」のようにし、8行目以降の項目を2枚目に配置してください。）

- **2〜4つの項目を比較・対比**し、\`comparison\` テンプレートを使用する場合は、\`summary\`は空にし、代わりに\`columns\`というキーで **2〜4要素** の配列（\`{title: "...", items: [...]}\`）を生成してください。
  - **【最重要・比較項目ルール】**: \`items\` 配列の各文字列は、**\`"**項目名**\`：\`** \`内容\`"\` の形式（例：\`"**価格**：10,000円"\`）を**可能な限り使用してください。**
  - これにより、何（価格、機能など）を比較しているかが明確になります。

- **表形式（テーブル）が最適なデータ**（例：機能比較一覧、数値データ一覧など）を表現し、\`table_basic\` テンプレートを使用する場合は、
  - **\`summary\`キーは絶対に空（""）**にし、代わりに **\`table\`キー** で \`{ "headers": ["(ヘッダー1)", ...], "rows": [ ["(行1データ1)", ...], ["(行2データ1)", ...] ] }\` の形式のオブジェクトを生成してください。
  - **【表の重要ルール】**: スライドの視認性を保つため、\`table_basic\` の表は **最大7行、5列程度** に収めてください。
  - **【最重要・高さ考慮】**: 上記の行数制限（7行）を守っていても、**各セルのテキスト量（文字数）が非常に多い**場合、テーブル全体の高さが1枚のスライドに収まらなくなる可能性があります。
  - **AIは常にこの「高さ」を意識してください。** もし1つのセルが長くなりすぎる場合（例：50文字を超える長文など）は、**内容を簡潔に要約**するか、**そのセル内で改行（\\n）**を適切に使用してください。
  - それでも情報が多すぎて1枚に収まらない（高さが超える）とAIが判断した場合は、行数が7行以下であっても、\`template\` が \`table_basic\` のスライドを **複数枚に分割** してください。
    - （例：1枚目のタイトルを「**機能比較 (1/2)**」、2枚目のタイトルを「**機能比較 (2/2)**」のようにし、表の続きを2枚目に配置してください。この際、**ヘッダー行は両方のスライドに含めてください**。）

- **【▼▼▼ 修正点 ▼▼▼】**
- \`three_points\` テンプレートを使用する場合、
  - **\`summary\`キーは絶対に空（""）**にしてください。
  - 代わりに **\`points\`キー** で、**必ず3要素のオブジェクト配列**を生成してください。
  - 各オブジェクトには **\`title\`** (文字列), **\`summary\`** (文字列), **\`icon_description\`** (文字列) の3つのキーを**必ず含めてください**。
  
  - **【icon_description の超厳格ルール】**: \`icon_description\` キーには、**Lucide (lucide.dev) のアイコン名**（例: "check-circle", "braces", "database", "shield-check", "brain-cog"）を**単一の文字列**で指定してください。
  - **【禁止事項】**: **絶対に、説明文（例: "APIのアイコン"、"RAGの図"）や、日本語、スペースを含む文字列を指定しないでください。**
  - **【あなたの思考プロセス】**:
    1.  ポイントのタイトル（例: "API"）を理解します。
    2.  Lucideライブラリから最も関連性の高いアイコン名（例: "braces" や "code"）を1つだけ選びます。
    3.  その名前（"braces"）だけを \`icon_description\` キーに設定します。
  - （例: \`{"title": "API", "summary": "...", "icon_description": "braces"}\`）
- **【▲▲▲ 修正点ここまで ▲▲▲】**

- **【▼▼▼ 修正点 ▼▼▼】**
- **【vertical_steps ルール】**
- \`vertical_steps\` テンプレートを使用する場合、
  - **\`summary\`キーは絶対に空（""）**にしてください。
  - 代わりに **\`items\`キー** で、**オブジェクトの配列**を生成してください。
  - 各オブジェクトには **\`title\`** (文字列) と **\`description\`** (文字列、そのステップの簡潔な説明) の2つのキーを**必ず含めてください**。
  - （例: \`{"title": "ステップ1：申請", "description": "必要な書類を準備します。"}\`）
- **【▲▲▲ 修正点ここまで ▲▲▲】**

- **【▼▼▼ 修正点 ▼▼▼】**
- \`content_with_diagram\` テンプレートを選択した場合、
  - **スライドの本文を必ず \`summary\` キーに記述**してください。
  - 同時に、**必ず \`infographic\` キー** で \`{ "needed": true, "description": "AIが図解を生成するための詳細な指示..." }\` の形式のオブジェクトを生成してください。
  - AIへの指示（description）は、\`summary\`の内容を図解するために具体的に記述してください。
- **【▲▲▲ 修正点ここまで ▲▲▲】**

- **【math_basic ルール】**
- \`math_basic\` テンプレートを使用する場合、
  - **\`summary\`キーに数式の解説文**（Markdown形式）を必ず記述してください。**【文字数制限】解説文は、日本語で**200文字程度**の簡潔な内容に要約してください。**
  - **\`formula\`キーにKaTeX形式の単一の数式ブロック**（例: \`$$ x = \frac{-b pm sqrt{b^2 - 4ac}}{2a} $$\`）を必ず記述してください。
  - **【最重要・重複排除】\`summary\` キーの解説文には、\`formula\`キーに記述する数式（またはそのインライン版 $...$）を**含めないでください**。
  - （例：\`...以下の式で表されます。 $x=y$\` という文章は、\`...以下の式で表されます。\` のように、数式を省略して記述してください。）
${t?'- 2枚目は必ず"アジェンダ"ページとし、`template`は`agenda`を選択してください。`summary`には3枚目以降のタイトルを改行区切りでリストアップしてください。\n- **【アジェンダの分割ルール】**: アジェンダの項目（`summary`にリストアップする3枚目以降のタイトル）が**6個を超えた**場合、`template`が`agenda`のスライドを**複数枚に分割**してください。\n- 1枚目のタイトルは『**アジェンダ (1/2)**』、2枚目は『**アジェンダ (2/2)**』のように、必ず連番を付与してください。\n- 各アジェンダスライドには、最大6項目までのリストを配置してください。':"- **アジェンダページは絶対に作成しないでください。**"}
${e?"- Markdownの主要な見出し（章やセクション）の前に、`template`が`section_header`のスライドを自動で挿入してください。":"- `section_header`テンプレートは使用しないでください。"}

- 最後のスライドは \`summary_or_thankyou\` とし、タイトルを「まとめ」または「ご清聴ありがとうございました」に設定してください。

### 出力形式(JSON)の例
- **最重要**: 出力はJSON配列の文字列のみとし、前後に\`\`\`jsonや説明文を含めないでください。
[
  { "title": "タイトルページ", "summary": "発表者名", "template": "title_slide" },
  { "title": "システムの概要", "summary": "...", "template": "content_with_diagram", "infographic": { "needed": true, "description": "システム概要の構成図" } },
  { "title": "二次方程式の解", "summary": "この公式は...", "template": "math_basic", "formula": "$$ x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$" },
  { 
    "title": "3つのプラン", 
    "summary": "", 
    "template": "three_points", 
    "points": [ 
      { "title": "プランA", "summary": "プランAの簡潔な説明...", "icon_description": "braces" }, 
      { "title": "プランB", "summary": "プランBの簡潔な説明...", "icon_description": "database" }, 
      { "title": "プランC", "summary": "プランCの簡潔な説明...", "icon_description": "shield-check" }
    ] 
  },
  
  { "title": "プロジェクトの3ステップ", "summary": "", "template": "vertical_steps", "items": [ {"title": "ステップ1", "description": "ステップ1の説明..."}, {"title": "ステップ2", "description": "ステップ2の説明..."} ] },
  { "title": "主な特長", "summary": "", "template": "content_basic", "items": [ "特長1", "特長2" ] },
  { 
    "title": "A案とB案とC案の比較", 
    "summary": "", 
    "template": "comparison", 
    "columns": [ 
      {"title": "A案", "items": ["**価格**：10万円", "**納期**：3週間"]}, 
      {"title": "B案", "items": ["**価格**：12万円", "**納期**：2週間"]},
      {"title": "C案", "items": ["**価格**：8万円", "**納期**：4週間"]}
    ] 
  },
  {
    "title": "機能比較表 (1/2)",
    "summary": "",
    "template": "table_basic",
    "table": {
      "headers": [ "機能名", "プランA", "プランB" ],
      "rows": [
        [ "基本機能", "〇", "〇" ],
        [ "高度な分析", "-", "〇" ],
        [ "専用サポート", "-", "-" ]
      ]
    }
  },
  { "title": "ご清聴ありがとうございました", "summary": "", "template": "summary_or_thankyou" }
]

### Markdownテキスト
${l}`,generateInfographic:(l,t)=>`### あなたの役割
あなたは、与えられた指示に基づき、情報を視覚的に表現するためのSVG（スケーラブル・ベクター・グラフィックス）コードを生成する専門家です。

### 指示
以下の「インフォグラフィックの詳細説明」を読み、その内容を表現するSVGコードを生成してください。

### 厳格なルール
- **最重要:** あなたの応答は\`<svg\`で始まり、\`</svg>\`で終わる必要があります。これ以外のXML宣言、コードブロック、解説、テキストは絶対に含めないでください。
- **【超重要】SVG内に\`<text>\`タグやその他のテキスト要素を一切含めないでください。アイコンや図形のみで内容を表現してください。**

- **【サイズ指定の厳格なルール】**:
- SVGタグには \`width="100%"\` と \`height="100%"\` を**必ず指定してください**。
- \`viewBox="0 0 100 100"\` のように、viewBox属性を必ず指定してください（値は内容に応じて調整可）。
- **絶対に \`width\` や \`height\` にピクセル値（例: \`width="500px"\`）を指定しないでください。**

- **【配色ルールの厳格なルール】**:
${t==="light"?"・背景は白（#FFFFFF）です。図形や線には濃い色（例: #1E293B, #0284c7）を使用してください。":"・背景は濃いグレー（#1e293b）です。図形や線には明るい色（例: #e2e8f0, #38bdf8）を使用してください。"}
- **絶対に、SVG自体に背景色（例: \`<rect width="100%" height="100%" fill="...">\`）は含めないでください。** スライドの背景を透過させる必要があります。

### インフォグラフィックの詳細説明
${l}`,modifySlide:(l,t)=>`### あなたの役割
あなたは、ユーザーの指示を100%忠実に、かつ正確にHTMLコードへ反映させる精密なコーディングアシスタントです。

### 指示
「修正対象のHTMLコード」を「ユーザーからの修正指示」に基づき修正し、その結果を厳格なJSON形式で出力してください。

### 思考プロセス
1. 「修正対象のHTMLコード」と「ユーザーからの修正指示」を完全に理解します。
2. 指示に従ってHTMLコードを修正します。
3. 実際に行った変更点を日本語の箇条書きで簡潔にまとめます。
4. 修正後の完全なHTMLコードと、まとめた変更点の両方を、指定されたJSON形式で出力します。

### 出力形式 (JSON)
- **最重要**: 出力は必ず以下の構造を持つJSONオブジェクトの文字列のみとしてください。前後に説明や\`\`\`jsonを含めないでください。
\`\`\`json
{
  "html": "(ここに修正後の完全なHTMLコードを文字列として挿入)",
  "changes": "(ここに実際に行った変更点の箇条書きを文字列として挿入。例: ・ヘッダーの文言を変更しました。\\n・背景色を#e0f7faに変更しました。)"
}
\`\`\`

### ユーザーからの修正指示
${l}

### 修正対象のHTMLコード
\`\`\`html
${t}
\`\`\`
`,regenerateSlideContent:(l,t,e,i)=>{const r=t!=="{}"&&t?`### 元のスライド情報（JSON）
${t}`:`### 元のスライド情報
元データはありません。タイトル「${l}」に基づいて内容を生成してください。`;return`### 指示
あなたはプロのプレゼンテーション構成作家です。
以下の「元のスライド情報」と「スライドタイトル」を分析し、「新しいテンプレート」の形式に最適なコンテンツを生成してください。

### スライドタイトル
${l}

${r}

### 新しいテンプレート
${e}

### 利用可能なテンプレートと必要なJSONキー
${i.map(a=>`- **${a.name}**: ${a.description}`).join(`
`)}

### 厳格な出力条件
- **最重要**: 出力は、新しいテンプレート（${e}）に必要なキー（例: \`items\`, \`points\`, \`columns\`, \`summary\`）のみを含むJSONオブジェクトの文字列としてください。
- 前後に\`\`\`jsonや説明文は絶対に含めないでください。
- 元の情報を活用し、新しいテンプレート形式で最も伝わりやすい内容を生成してください。

### 出力例
- ${e} が "content_basic" の場合: \`{ "items": ["項目1", "項目2", "項目3"] }\`
- ${e} が "three_points" の場合: \`{ "points": [ { "title": "...", "summary": "...", "icon_description": "..." }, ... ] }\`
- ${e} が "comparison" の場合: \`{ "columns": [ { "title": "A案", "items": [...] }, { "title": "B案", "items": [...] } ] }\`
- ${e} が "table_basic" の場合: \`{ "table": { "headers": ["H1", "H2"], "rows": [["R1C1", "R1C2"], ["R2C1", "R2C2"]] } }\`
- ${e} が "math_basic" の場合: \`{ "summary": "数式の解説...", "formula": "$$ y = ax + b $$" }\` 
- ${e} が "content_with_diagram" の場合: \`{ "summary": "ここにスライドの本文が入ります...", "infographic": { "needed": true, "description": "..." } }\`
`},modifyFullOutline:(l,t)=>`### 指示
あなたはプロのプレゼンテーション構成作家です。
添付された「現在の構成案(JSON)」を、以下の「ユーザーからの修正指示」に基づき、厳密に修正してください。

### 厳格なルール
- **最重要:** 出力は、修正後の**完全なJSON配列の文字列のみ**としてください。前後に\`\`\`jsonや説明文は絶対に含めないでください。
- 指示された箇所以外は、**絶対に、いかなる理由があっても変更しないでください。**
- スライドの順序変更、追加、削除、内容の書き換えなど、指示を忠実に実行してください。

### ユーザーからの修正指示
${t}

### 現在の構成案(JSON)
${l}
`,modifySingleSlideOutline:(l,t)=>`### 指示
あなたはプロのプレゼンテーション構成作家です。
添付された「現在のスライド(JSON)」を、以下の「ユーザーからの修正指示」に基づき、厳密に修正してください。

### 厳格なルール
- **最重要:** 出力は、修正後の**単一のJSONオブジェクトの文字列のみ**としてください。前後に\`\`\`jsonや説明文は絶対に含めないでください。
- 指示された箇所以外（例：指示がないのに \`template\` を変えるなど）は、**絶対に、いかなる理由があっても変更しないでください。**
- スライドのタイトル、要約（summary）、箇条書き（items）など、指示された部分のみを修正してください。

### ユーザーからの修正指示
${t}

### 現在のスライド(JSON)
${l}
`,findIconName:l=>`### 指示
あなたは、与えられた「概念」や「説明文」を、オープンソースの「Lucide (lucide.dev)」アイコンライブラリの**単一のアイコン名**にマッピングする専門家です。

### 厳格なルール
- **最重要**: あなたの応答は、Lucideのアイコン名（例: "braces", "shield-check", "database"）**そのもの**でなければなりません。
- 解説、前置き、引用符、JSON形式などは**一切不要**です。
- 関連するアイコンが複数ある場合でも、最も代表的だと思われるものを**1つだけ**選んでください。
- 存在しないアイコン名は返さないでください。

### 例
- 入力: "API、接続、歯車"
- 出力: braces
- 入力: "セキュリティ、盾、認証"
- 出力: shield-check
- 入力: "AI、チャットボット、根拠"
- 出力: brain-cog
- 入力: "存在しない概念"
- 出力: circle

### 変換対象の説明文
${l}`,findIconNameRetry:(l,t)=>`### 指示
あなたは、与えられた「概念」を「Lucide (lucide.dev)」の**正しいアイコン名**にマッピングする専門家です。

### 前回の失敗
前回のタスクで、あなたは「${l}」という概念に対して「${t}」という名前を返しましたが、そのアイコン名は**存在しません (404エラー)**でした。

### 厳格なルール
- **最重要**: 「${t}」とは**異なる、別の正しいLucideアイコン名**を1つだけ返してください。
- 解説、前置き、引用符、JSON形式などは**一切不要**です。
- どうしても適切な名前が見つからない場合は "circle" と返してください。

### 変換対象の概念
${l}`},U0=[{key:"cleaning",text:"テキストをクリーンアップ中... (例: 「ドキュ メント」→「ドキュメント」)"},{key:"analyzing",text:"ドキュメントの論理構造を解析中... (見出し、段落の識別)"},{key:"formatting",text:"Markdown形式に再構成中..."}],io=[{key:"analyzing_doc",text:"Markdownドキュメント全体を分析中..."},{key:"selecting_templates",text:"各セクションに最適なテンプレートを選定中... (例: 表、比較、図解)"},{key:"creating_title_agenda",text:"タイトルとアジェンダページを作成中..."},{key:"generating_content",text:"各スライドの内容（箇条書き、要約）を生成中..."},{key:"formatting_json",text:"最終的な構成案（JSON）を組み立て中..."}],Aw=[{key:"analyzing",text:"スライドの内容を分析中..."},{key:"designing",text:"インフォグラフィック/レイアウトをデザイン中..."},{key:"coding",text:"HTMLコードを組み立て中..."}],_w=()=>X.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400 hover:text-white transition-colors",children:[X.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),X.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),kw=()=>X.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400",children:[X.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),X.jsx("path",{d:"M12 12v9"}),X.jsx("path",{d:"m16 16-4-4-4 4"})]}),Ew=()=>X.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:[X.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),X.jsx("path",{d:"M22 2 11 13"})]}),Tw=({onSettingsClick:l})=>X.jsxs("header",{className:"flex-shrink-0 h-14 bg-black/25 flex items-center px-6 justify-between border-b border-white/10 z-10",children:[X.jsx("h1",{className:"text-lg font-semibold",children:"スライド作成ジェネレーター"}),X.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:X.jsx(_w,{})})]}),Cw=({isProcessing:l,processingStatus:t,fileName:e,handleDragOver:i,handleDrop:r,onFileSelect:a,appStatus:o,thinkingState:u,totalWaitTime:h})=>X.jsx("div",{className:`w-full h-full bg-white/5 rounded-xl flex flex-col items-center justify-center p-6 border-2 border-dashed ${l?"border-indigo-500":"border-white/20 hover:border-indigo-500"} transition-colors`,onDragOver:i,onDrop:r,children:l?X.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[o===Zt.STRUCTURING?X.jsx(Ef,{title:"テキストを構造化中...",steps:U0,currentStepKey:u,totalWaitTime:h}):o===Zt.GENERATING_OUTLINE?X.jsx(Ef,{title:"構成案を生成中...",steps:io,currentStepKey:u,totalWaitTime:h}):X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"}),X.jsx("p",{className:"mt-4 text-lg font-semibold",children:t})]}),X.jsx("p",{className:"mt-4 text-sm text-gray-400",children:e})]}):o!==Zt.INITIAL?X.jsxs("div",{className:"text-center",children:[X.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-400 mx-auto",children:[X.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),X.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),X.jsx("p",{className:"mt-4 text-lg font-semibold",children:"処理進行中"}),X.jsx("p",{className:"mt-1 text-sm text-gray-400",children:e}),X.jsx("p",{className:"mt-4 text-xs text-gray-500",children:"コントロールパネルで操作を続けてください。"})]}):X.jsxs("div",{className:"text-center",children:[X.jsx(kw,{}),X.jsx("p",{className:"mt-4 text-lg font-semibold",children:"ドキュメントをドラッグ＆ドロップ"}),X.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"または"}),X.jsx("button",{className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md text-sm font-medium transition-colors",onClick:()=>document.getElementById("file-upload").click(),children:"ファイルを選択"}),X.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.txt,.md",onChange:f=>a(f.target.files[0])}),X.jsx("p",{className:"mt-4 text-xs text-gray-500",children:"対応形式: PDF, TXT, MD"})]})}),Mw=({messages:l})=>X.jsx("div",{className:"flex-grow p-6 overflow-y-auto space-y-4",children:l.map((t,e)=>X.jsx("div",{className:`flex ${t.type==="user"?"justify-end":"justify-start"}`,children:X.jsx("div",{className:`px-4 py-2 rounded-lg max-w-2xl ${t.type==="user"?"bg-indigo-600":"bg-gray-700"}`,children:X.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.text})})},e))}),Rw=({markdown:l,setMarkdown:t,onApprove:e,onRegenerate:i})=>X.jsxs("div",{className:"bg-black/20 p-4 rounded-lg",children:[X.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"以下に構造化されたテキスト案を表示します。内容を確認し、必要であれば直接編集してください。"}),X.jsx("textarea",{value:l,onChange:r=>t(r.target.value),className:"w-full h-64 bg-gray-900/50 border border-white/20 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow font-mono"}),X.jsxs("div",{className:"flex justify-between items-center mt-4",children:[" ",X.jsx("button",{onClick:i,className:"px-6 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors",children:"AIで再生成"}),X.jsx("button",{onClick:e,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors",children:"内容を承認して次へ進む"})]})]}),Dw=({selectedTheme:l,selectedDesign:t,onThemeSelect:e,onDesignSelect:i,onApprove:r})=>X.jsxs("div",{className:"bg-black/20 p-4 rounded-lg space-y-4",children:[X.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[X.jsx("p",{className:"text-sm text-gray-300",children:"1. プレゼンテーションのテーマを選択:"}),Object.entries(Ol).map(([a,o])=>X.jsx("button",{onClick:()=>e(a),className:`px-6 py-2 text-sm font-medium rounded-md transition-colors ${l===a?"bg-indigo-600":"bg-gray-700 hover:bg-gray-600"}`,children:o.name},a))]}),X.jsxs("div",{className:"flex justify-center items-center space-x-4 border-t border-white/10 pt-4",children:[X.jsx("p",{className:"text-sm text-gray-300",children:"2. デザインを選択:"}),X.jsx("button",{onClick:()=>i("dark"),className:`px-6 py-2 text-sm font-medium rounded-md transition-colors ${t==="dark"?"bg-gray-800 ring-2 ring-indigo-400":"bg-gray-800 hover:bg-gray-700"}`,children:"ダーク"}),X.jsx("button",{onClick:()=>i("light"),className:`px-6 py-2 text-black text-sm font-medium rounded-md transition-colors ${t==="light"?"bg-gray-200 ring-2 ring-indigo-400":"bg-gray-200 hover:bg-gray-300"}`,children:"ライト"})]}),X.jsx("div",{className:"flex justify-end pt-2",children:X.jsx("button",{onClick:r,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors",children:"決定して次へ"})})]}),Nw=({onSelect:l})=>X.jsxs("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center items-center space-x-4",children:[X.jsx("p",{className:"text-sm text-gray-300",children:"アジェンダページを挿入しますか？"}),X.jsx("button",{onClick:()=>l(!0),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-sm font-medium rounded-md transition-colors",children:"はい"}),X.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-sm font-medium rounded-md transition-colors",children:"いいえ"})]}),Ow=({onSelect:l})=>X.jsxs("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center items-center space-x-4",children:[X.jsx("p",{className:"text-sm text-gray-300",children:"主要なセクションの前に区切りスライドを自動挿入しますか？"}),X.jsx("button",{onClick:()=>l(!0),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-sm font-medium rounded-md transition-colors",children:"はい"}),X.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-sm font-medium rounded-md transition-colors",children:"いいえ"})]}),zw=({outline:l,onChange:t,onInsert:e,onDelete:i,onStart:r,selectedTheme:a,onRegenerate:o,onRegenerateContent:u,onModifySlide:h,onModifyAll:f})=>{const m=(N,R,B)=>{const G={...[...l][N].table||{headers:[],rows:[]}};G.headers=B.split(",").map(U=>U.trim()),t(N,"table",G)},p=(N,R)=>{const z={...[...l][N].table||{headers:[],rows:[]}};z.rows=R.split(`
`).map(G=>G.split(",").map(U=>U.trim())),t(N,"table",z)},b=(N,R,B,z)=>{const U=[...[...l][N].points||[]];U[R]={...U[R],[B]:z},t(N,"points",U)},v=(N,R,B,z)=>{const U=[...[...l][N].items||[]];U[R]={...U[R],[B]:z},t(N,"items",U)},w=(N,R,B,z)=>{const U=[...[...l][N].columns||[{},{}]];U[R]={...U[R],[B]:z},t(N,"columns",U)},x=(N,R,B,z)=>{const U=[...[...l][N].columns||[{},{}]],et=[...U[R].items||[]];et[B]=z,U[R]={...U[R],items:et},t(N,"columns",U)},_=(N,R)=>{const G=[...[...l][N].columns||[{},{}]];G[R]||(G[R]={title:"",items:[]});const U=[...G[R].items||[],"新しい項目"];G[R]={...G[R],items:U},t(N,"columns",G)},A=N=>{const B=[...l][N].columns||[];if(B.length>=4){alert("比較項目は最大4つまでです。");return}const z=[...B,{title:"新しいカラム",items:["新しい項目"]}];t(N,"columns",z)},T=(N,R)=>{const z=[...l][N].columns||[];if(z.length<=2){alert("比較項目は最低2つ必要です。");return}const G=z.filter((U,et)=>et!==R);t(N,"columns",G)},M=Ol[a]?.templates?Object.keys(Ol[a].templates):[];return X.jsxs("div",{className:"bg-black/20 p-4 rounded-lg space-y-4",children:[X.jsx("p",{className:"text-sm text-gray-300 mb-2 font-semibold",children:"構成案が生成されました。内容を編集し、スライドの追加や削除ができます。"}),X.jsx("div",{className:"space-y-4 max-h-[40vh] overflow-y-auto pr-2",children:l.map((N,R)=>X.jsxs("div",{className:"bg-gray-900/50 border border-white/10 rounded-lg p-4",children:[X.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[X.jsxs("div",{children:[X.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:["スライド ",R+1," - タイトル"]}),X.jsx("input",{type:"text",value:N.title,onChange:B=>t(R,"title",B.target.value),className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),X.jsxs("div",{children:[X.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:"レイアウトテンプレート"}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx("select",{value:N.template||"",onChange:B=>t(R,"template",B.target.value),className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500",children:M.map(B=>X.jsx("option",{value:B,children:B},B))}),X.jsx("button",{onClick:()=>u(R),title:"現在のスライド情報（タイトルなど）を基に、選択中のテンプレートに合わせてAIで内容を再生成します。",className:"p-2 bg-indigo-600 hover:bg-indigo-500 rounded-md transition-colors flex-shrink-0",children:X.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[X.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),X.jsx("path",{d:"M3 3v5h5"}),X.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),X.jsx("path",{d:"M21 21v-5h-5"})]})})]})]})]}),["three_points"].includes(N.template)?X.jsx("div",{className:"space-y-3 mt-3",children:N.points?.map((B,z)=>X.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[X.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:["ポイント ",z+1," - タイトル"]}),X.jsx("input",{type:"text",value:B.title,onChange:G=>b(R,z,"title",G.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),X.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:["ポイント ",z+1," - 内容"]}),X.jsx("textarea",{value:B.summary,onChange:G=>b(R,z,"summary",G.target.value),rows:2,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"}),X.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:["ポイント ",z+1," - アイコン指示"]}),X.jsx("textarea",{value:B.icon_description,onChange:G=>b(R,z,"icon_description",G.target.value),rows:2,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]},z))}):["vertical_steps","content_basic"].includes(N.template)?X.jsx("div",{className:"space-y-3 mt-3",children:N.template==="content_basic"?X.jsxs("div",{children:[X.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:"箇条書き項目 (1行に1項目)"}),X.jsx("textarea",{value:Array.isArray(N.items)?N.items.join(`
`):"",onChange:B=>t(R,"items",B.target.value.split(`
`)),rows:5,className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]}):N.items?.map((B,z)=>X.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[X.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:["項目 ",z+1," - タイトル"]}),X.jsx("input",{type:"text",value:B.title||"",onChange:G=>v(R,z,"title",G.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),X.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:["項目 ",z+1," - 説明"]}),X.jsx("textarea",{value:B.description||B.summary||"",onChange:G=>v(R,z,"description",G.target.value),rows:2,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]},z))}):N.template==="comparison"?X.jsxs("div",{className:"space-y-3 mt-3",children:[X.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.columns?.map((B,z)=>X.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10 relative",children:[N.columns.length>2&&X.jsx("button",{onClick:()=>T(R,z),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-700 hover:bg-red-600 rounded-full text-white text-xs font-bold flex items-center justify-center",title:"このカラムを削除",children:"×"}),X.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:["カラム ",z+1," - タイトル"]}),X.jsx("input",{type:"text",value:B.title||"",onChange:G=>w(R,z,"title",G.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),X.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:["カラム ",z+1," - 箇条書き項目"]}),B.items?.map((G,U)=>X.jsx("input",{type:"text",value:G,onChange:et=>x(R,z,U,et.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-1",placeholder:"例: **価格**：10,000円"},U)),X.jsx("button",{onClick:()=>_(R,z),className:"mt-2 text-xs px-2 py-1 bg-sky-700 hover:bg-sky-600 rounded",children:"項目を追加"})]},z))}),(N.columns?.length||0)<4&&X.jsx("div",{className:"text-center",children:X.jsx("button",{onClick:()=>A(R),className:"mt-2 text-sm px-4 py-2 bg-green-700 hover:bg-green-600 rounded",children:"比較カラムを追加 (最大4)"})})]}):N.template==="table_basic"?X.jsx("div",{className:"space-y-3 mt-3",children:X.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[X.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:"テーブルヘッダー (カンマ区切り)"}),X.jsx("input",{type:"text",value:Array.isArray(N.table?.headers)?N.table.headers.join(", "):"",onChange:B=>m(R,"headers",B.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),X.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:"テーブル行 (1行に1レコード、セルはカンマ区切り)"}),X.jsx("textarea",{value:Array.isArray(N.table?.rows)?N.table.rows.map(B=>B.join(", ")).join(`
`):"",onChange:B=>p(R,B.target.value),rows:5,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]})}):N.template==="math_basic"?X.jsx("div",{className:"space-y-3 mt-3",children:X.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[X.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:"解説文 (Summary)"}),X.jsx("textarea",{value:N.summary||"",onChange:B=>t(R,"summary",B.target.value),rows:4,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:"数式の解説文をMarkdown形式で入力..."}),X.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:"数式 (Formula) - KaTeX形式"}),X.jsx("textarea",{value:N.formula||"",onChange:B=>t(R,"formula",B.target.value),rows:3,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:"例: $$ x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$"})]})}):X.jsxs("div",{children:[X.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-3 mb-2 block",children:["スライド ",R+1," - 要約（またはコンテンツ）"]}),X.jsx("textarea",{value:N.summary,onChange:B=>t(R,"summary",B.target.value),rows:3,className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"}),N.infographic?.needed&&X.jsxs("div",{children:[X.jsx("label",{className:"text-xs font-bold text-gray-400 mt-3 mb-2 block",children:"インフォグラフィック詳細指示"}),X.jsx("textarea",{value:N.infographic.description,onChange:B=>t(R,"infographic",{...N.infographic,description:B.target.value}),rows:3,className:"w-full bg-indigo-900/30 border border-indigo-500/50 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]})]}),X.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-2 border-t border-white/10",children:[X.jsx("button",{onClick:()=>h(R),title:"このスライドについてAIに修正指示を出す",className:"px-3 py-1 bg-indigo-600 hover:bg-indigo-500 text-xs font-medium rounded-md transition-colors",children:"AIで修正"}),X.jsx("button",{onClick:()=>e(R),className:"px-3 py-1 bg-sky-600 hover:bg-sky-500 text-xs font-medium rounded-md transition-colors",children:"この下にスライドを挿入"}),X.jsx("button",{onClick:()=>i(R),className:"px-3 py-1 bg-red-700 hover:bg-red-600 text-xs font-medium rounded-md transition-colors disabled:opacity-50",disabled:l.length<=1,children:"このスライドを削除"})]})]},R))}),X.jsxs("div",{className:"flex flex-col items-center pt-2 space-y-3",children:[X.jsx("button",{onClick:f,className:"w-full max-w-md px-6 py-2 bg-indigo-700 hover:bg-indigo-600 text-sm font-medium rounded-md transition-colors",children:"構成案全体をAIで修正..."}),X.jsxs("div",{className:"flex justify-center space-x-4",children:[X.jsx("button",{onClick:o,className:"px-6 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors",children:"構成案を再生成"}),X.jsx("button",{onClick:r,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors",disabled:l.length===0,children:"構成案を承認し、スライド生成を開始する"})]})]})]})},Lw=({onDownload:l,onDownloadPdf:t,isGeneratingPdf:e})=>X.jsxs("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center space-x-4",children:[X.jsx("button",{onClick:l,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-sm font-medium rounded-md transition-colors",children:"ZIPファイルをダウンロード"}),X.jsx("button",{onClick:t,className:`px-6 py-2 bg-green-700 hover:bg-green-600 text-sm font-medium rounded-md transition-colors ${e?"opacity-50 cursor-not-allowed":""}`,disabled:e,children:e?"PDFを生成中...":"PDFをダウンロード"})]}),Bw=({value:l,onChange:t,onSend:e,disabled:i})=>X.jsxs("div",{className:"relative",children:[X.jsx("input",{type:"text",value:l,onChange:t,onKeyPress:r=>r.key==="Enter"&&e(),placeholder:"修正指示などを入力...",className:"w-full bg-gray-900/50 border border-white/20 rounded-lg py-3 pl-4 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow",disabled:i}),X.jsxs("button",{onClick:e,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 bg-indigo-600 hover:bg-indigo-500 rounded-full transition-colors disabled:opacity-50",disabled:i||!l.trim(),children:[" ",X.jsx(Ew,{})," "]})]}),Iw=({onPreview:l,onApprove:t,onEditCode:e,onRegenerate:i,onReturnToOutline:r,disabled:a})=>X.jsxs("div",{className:"flex justify-end mt-4 space-x-2",children:[X.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50 hidden",disabled:a,onClick:l,children:"プレビュー"}),X.jsx("button",{className:"px-4 py-2 bg-sky-800 hover:bg-sky-700 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:r,title:"現在のプレビューを破棄し、構成案の編集画面に戻ります。",children:"構成案を修正"}),X.jsx("button",{className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:i,children:"再生成"}),X.jsx("button",{className:"px-4 py-2 bg-sky-600 hover:bg-sky-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:e,children:"ソースコードを編集"}),X.jsx("button",{className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:t,children:"承認して次へ"})]}),Ef=({title:l,steps:t,currentStepKey:e,totalWaitTime:i})=>{const r=t.findIndex(u=>u.key===e),[a,o]=de.useState(Math.ceil(i/1e3));return de.useEffect(()=>{if(i>0){const u=Math.ceil(i/1e3);o(u);const h=setInterval(()=>{o(f=>f<=1?(clearInterval(h),0):f-1)},1e3);return()=>clearInterval(h)}else o(0)},[i]),X.jsxs("div",{className:"bg-gray-900/50 border border-white/10 rounded-lg p-4",children:[X.jsxs("p",{className:"font-semibold text-sm flex items-center mb-3",children:[X.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),l,a>0&&X.jsxs("span",{className:"ml-auto text-xs text-gray-400",children:["(残り約 ",a," 秒)"]})]}),X.jsx("div",{className:"ml-6 pl-4 border-l-2 border-indigo-500 space-y-2",children:t.map((u,h)=>X.jsxs("p",{className:`text-xs flex items-center transition-colors ${h<=r?"text-gray-200":"text-gray-500"}`,children:[h<r?X.jsx("span",{className:"text-green-400 mr-2",children:"✓"}):h===r?X.jsx("span",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):X.jsx("span",{className:"mr-2",children:"○"}),u.text]},u.key))})]})},Fw=({outline:l,currentIndex:t,thinkingState:e})=>{const i=de.useRef(null);return de.useEffect(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[t]),X.jsxs("div",{className:"bg-black/20 p-4 rounded-lg space-y-3",children:[X.jsx("p",{className:"text-sm text-gray-300 mb-2 font-semibold",children:"スライド生成中..."}),X.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto pr-2",children:l.map((r,a)=>{const o=a<t,u=a===t;return X.jsxs("div",{ref:u?i:null,className:`border border-white/10 rounded-lg p-3 transition-all duration-300 ${u?"bg-indigo-900/50":"bg-gray-900/50"}`,children:[X.jsxs("p",{className:"font-semibold text-sm flex items-center",children:[o?X.jsx("span",{className:"text-green-400 mr-2",children:"✅"}):u?X.jsx("span",{className:"animate-pulse mr-2",children:"⏳"}):X.jsx("span",{className:"text-gray-500 mr-2",children:"📄"}),a+1,". ",r.title,o&&X.jsx("span",{className:"ml-auto text-xs text-green-400 font-medium",children:"完了"}),u&&X.jsx("span",{className:"ml-auto text-xs text-indigo-300 font-medium",children:"生成中"})]}),u&&X.jsx("div",{className:"mt-3",children:X.jsx(Ef,{title:"スライドを生成中...",steps:Aw,currentStepKey:e})})]},a)})})]})},Pw=({chatState:l})=>X.jsxs("div",{className:"w-full h-full bg-white/5 rounded-xl flex flex-col border border-white/10 overflow-hidden",children:[X.jsxs("div",{className:"flex-grow p-6 overflow-y-auto space-y-4",children:[X.jsx(Mw,{messages:l.messages}),l.apiErrorStep&&X.jsx("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center",children:X.jsx("button",{onClick:l.handleRetry,className:"px-6 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors",children:"再試行"})}),l.appStatus===Zt.STRUCTURED&&X.jsx(Rw,{markdown:l.structuredMarkdown,setMarkdown:l.setStructuredMarkdown,onApprove:l.handleMarkdownApproval,onRegenerate:l.handleRegenerateStructure}),l.appStatus===Zt.SELECTING_THEME&&X.jsx(Dw,{selectedTheme:l.selectedTheme,selectedDesign:l.design,onThemeSelect:l.handleThemeSelection,onDesignSelect:l.handleDesignSelection,onApprove:l.handleThemeApproval}),l.appStatus===Zt.CREATING_OUTLINE&&X.jsx(Nw,{onSelect:l.handleAgendaChoice}),l.appStatus===Zt.SELECTING_SECTION_HEADERS&&X.jsx(Ow,{onSelect:l.handleSectionHeaderChoice}),l.appStatus===Zt.OUTLINE_CREATED&&X.jsx(zw,{outline:l.slideOutline,onChange:l.handleOutlineChange,onInsert:l.handleInsertSlide,onDelete:l.handleDeleteSlide,onStart:l.handleStartGeneration,selectedTheme:l.selectedTheme,onRegenerate:l.handleRegenerateOutline,onRegenerateContent:l.handleRegenerateSlideContent,onModifySlide:l.handleOpenModifyModal,onModifyAll:l.handleOpenModifyAllModal}),(l.appStatus===Zt.GENERATING_SLIDES||l.appStatus===Zt.SLIDE_GENERATED)&&X.jsx(Fw,{outline:l.slideOutline,currentIndex:l.currentSlideIndex,thinkingState:l.thinkingState}),l.appStatus===Zt.ALL_SLIDES_GENERATED&&X.jsx(Lw,{onDownload:l.handleDownloadZip,onDownloadPdf:l.handleDownloadPdf,isGeneratingPdf:l.isGeneratingPdf}),X.jsx("div",{ref:l.chatEndRef})]}),X.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-white/10 bg-black/20",children:[X.jsx(Bw,{value:l.userInput,onChange:t=>l.setUserInput(t.target.value),onSend:l.handleSendMessage,disabled:l.appStatus!==Zt.SLIDE_GENERATED}),X.jsx(Iw,{onPreview:l.handlePreview,onApprove:l.handleApproveAndNext,onEditCode:l.handleOpenCodeEditor,onRegenerate:l.handleRegenerateCurrentSlide,onReturnToOutline:l.handleReturnToOutline,disabled:l.appStatus!==Zt.SLIDE_GENERATED})]})]}),X4=({htmlContent:l,containerWidth:t})=>{const r=t>0?(t-16)/1280:1,a=720*r;return X.jsx("div",{className:"relative w-full rounded-lg overflow-hidden shadow-lg border border-white/10",style:{height:`${a}px`},children:X.jsx("iframe",{srcDoc:l,width:1280,height:720,className:"border-none",style:{transform:`scale(${r})`,transformOrigin:"top left"},sandbox:"allow-same-origin",title:"Slide Preview Item"},l)})},Uw=({generatedSlides:l,htmlContent:t,isLoading:e,loadingSlideTitle:i})=>{const r=de.useRef(null),a=de.useRef(null),[o,u]=de.useState(0);return de.useEffect(()=>{const h=new ResizeObserver(f=>{if(f[0]){const{width:m}=f[0].contentRect;u(m)}});return r.current&&h.observe(r.current),()=>h.disconnect()},[]),de.useEffect(()=>{a.current?.scrollIntoView({behavior:"smooth"})},[l,t,e]),X.jsxs("div",{ref:r,className:"w-full h-full bg-black/10 rounded-xl flex flex-col p-4 border border-white/10 overflow-y-auto",children:[X.jsxs("div",{className:"space-y-4",children:[l.map((h,f)=>X.jsx(X4,{htmlContent:h,containerWidth:o},f)),t&&!e&&X.jsx(X4,{htmlContent:t,containerWidth:o}),e&&X.jsx("div",{className:"w-full flex flex-col items-center justify-center bg-white/5 rounded-lg border border-dashed border-indigo-500",style:{height:`${720*((o-16)/1280)}px`},children:X.jsxs("div",{className:"text-center",children:[X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"}),X.jsx("p",{className:"mt-4 text-lg font-semibold",children:i||"スライドを生成中..."}),X.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"HTMLコードを組み立て中..."})]})})]}),X.jsx("div",{ref:a})]})},Hw=({isOpen:l,tempApiKey:t,setTempApiKey:e,handleSave:i})=>l?X.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:X.jsxs("div",{className:"bg-[#2a2a2e] border border-white/10 rounded-lg shadow-xl p-8 w-full max-w-md",children:[X.jsx("h2",{className:"text-xl font-bold mb-4",children:"Gemini APIキーを入力"}),X.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Google AI StudioでAPIキーを取得し、以下に貼り付けてください。キーはあなたのブラウザのローカルストレージにのみ保存されます。"}),X.jsx("input",{type:"password",value:t,onChange:r=>e(r.target.value),placeholder:"APIキーを入力...",className:"w-full bg-gray-900/50 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),X.jsx("div",{className:"flex justify-end mt-6",children:X.jsx("button",{onClick:i,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md font-medium transition-colors",children:"保存"})})]})}):null,jw=({isOpen:l,html:t,setHtml:e,onSave:i,onCancel:r})=>l?X.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:X.jsxs("div",{className:"bg-[#2a2a2e] border border-white/10 rounded-lg shadow-xl p-6 w-full max-w-4xl h-[80vh] flex flex-col",children:[X.jsx("h2",{className:"text-xl font-bold mb-4 flex-shrink-0",children:"HTMLソースコードを編集"}),X.jsx("textarea",{value:t,onChange:a=>e(a.target.value),className:"w-full flex-grow bg-gray-900/50 border border-white/20 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow font-mono",placeholder:"HTMLコード..."}),X.jsxs("div",{className:"flex justify-end mt-4 flex-shrink-0 space-x-2",children:[X.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-md font-medium transition-colors",children:"キャンセル"}),X.jsx("button",{onClick:i,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md font-medium transition-colors",children:"変更を適用"})]})]})}):null,Gw=({isOpen:l,mode:t,index:e,value:i,onChange:r,onSave:a,onCancel:o})=>{if(!l)return null;const u=t==="all"?"構成案全体をAIで修正":`スライド ${e+1} をAIで修正`,h=t==="all"?"構成案全体（全スライドの順序、タイトル、内容）に対する修正指示を具体的に入力してください。":`このスライド（${e+1}）に対する修正指示（例：「タイトルを～にして」「箇条書きを3つに要約して」）を入力してください。`;return X.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:X.jsxs("div",{className:"bg-[#2a2a2e] border border-white/10 rounded-lg shadow-xl p-6 w-full max-w-2xl flex flex-col",children:[X.jsx("h2",{className:"text-xl font-bold mb-4 flex-shrink-0",children:u}),X.jsx("p",{className:"text-sm text-gray-400 mb-4",children:h}),X.jsx("textarea",{value:i,onChange:f=>r(f.target.value),className:"w-full h-40 bg-gray-900/50 border border-white/20 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow font-mono",placeholder:"修正指示を入力..."}),X.jsxs("div",{className:"flex justify-end mt-4 flex-shrink-0 space-x-2",children:[X.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-md font-medium transition-colors",children:"キャンセル"}),X.jsx("button",{onClick:a,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md font-medium transition-colors",children:"修正を実行"})]})]})})};function qw(){const[l,t]=de.useState(""),[e,i]=de.useState(!1),[r,a]=de.useState(""),[o,u]=de.useState(Zt.INITIAL),[h,f]=de.useState([]),[m,p]=de.useState(""),[b,v]=de.useState(""),[w,x]=de.useState(""),[_,A]=de.useState(""),[T,M]=de.useState([]),[N,R]=de.useState(!1),[B,z]=de.useState(""),[G,U]=de.useState(null),[et,ut]=de.useState("standard"),[H,it]=de.useState("dark"),[D,rt]=de.useState(!1),[V,K]=de.useState(0),[yt,pt]=de.useState([]),[Tt,L]=de.useState(""),[P,ot]=de.useState(!1),[ht,gt]=de.useState(""),[It,Lt]=de.useState(!1),[jt,Gt]=de.useState(""),[xe,we]=de.useState({index:null,mode:"single"}),[ti,ui]=de.useState([]),[C,ft]=de.useState(null),[mt,q]=de.useState(0),[j,J]=de.useState(!1),At=de.useRef(null);de.useEffect(()=>{const dt=localStorage.getItem("gemini_api_key");dt?(t(dt),f([{type:"system",text:"ようこそ！スライドの元になるドキュメントをアップロードしてください。"}])):(i(!0),f([{type:"system",text:"まず、Gemini APIキーを設定してください。"}]));try{pe.use(xw({throwOnError:!1}))}catch(vt){console.error("Failed to load marked-katex-extension",vt)}},[]),de.useEffect(()=>{At.current?.scrollIntoView({behavior:"smooth"})},[h,C]);const _t=dt=>{if(typeof dt=="string")return dt.replace(/\\n/g,`
`);if(Array.isArray(dt))return dt.map(_t);if(typeof dt=="object"&&dt!==null){const vt={};for(const kt in dt)Object.prototype.hasOwnProperty.call(dt,kt)&&(vt[kt]=_t(dt[kt]));return vt}return dt},nt=async(dt,vt,kt)=>{if(!l)return f(Rt=>[...Rt,{type:"system",text:"APIキーが設定されていません。"}]),null;try{const $t=new M7(l).getGenerativeModel({model:vt});console.log(`[INFO] Calling Gemini API for: ${kt} using ${vt}`),console.debug(`[DEBUG] Prompt for ${kt}:`,dt);let Ut=await(await(await $t.generateContent(dt)).response).text();return Ut=Ut.replace(/^```(json|html|svg)?\s*|```\s*$/g,"").trim(),Ut=Ut.replace(/^xml\s*/,""),console.log(`[INFO] Received response for: ${kt}`),Ut}catch(Rt){return console.error(`[FATAL] API Error during ${kt}:`,Rt),{error:`APIエラーが発生しました: ${Rt.message}`}}},Dt=dt=>{if(!dt||typeof dt!="string"||!dt.startsWith("<svg"))return console.warn("[WARN] Invalid SVG string received:",dt),dt;let vt=dt;return vt=vt.replace(/<svg([^>]*?)width=".*?"/g,"<svg$1"),vt=vt.replace(/<svg([^>]*?)height=".*?"/g,"<svg$1"),/<svg([^>]*?)viewBox=".*?"/g.test(vt)?vt=vt.replace("<svg",'<svg width="100%" height="100%"'):(console.warn('[WARN] SVG missing viewBox. Adding default "0 0 100 100".'),vt=vt.replace("<svg",'<svg width="100%" height="100%" viewBox="0 0 100 100"')),vt=vt.replace(/<svg([^>]*?)fill="(#fff|#ffffff|#000|#000000)"/gi,'<svg$1fill="transparent"'),vt=vt.replace(/<rect([^>]*?)fill="(#fff|#ffffff|#000|#000000)"([^>]*?)width="100%"([^>]*?)height="100%"/gi,'<rect$1fill="transparent"$3width="100%"$4height="100%"'),vt},zt=async dt=>{const vt=/^[a-z0-9-]+$/;let kt=(dt.icon_description||"").trim(),Rt=kt,$t=null;if(vt.test(kt))Rt=`${dt.title}: ${dt.summary}`,console.log(`[INFO] Icon name is valid: "${kt}". Attempting fetch...`);else{console.warn(`[WARN] Invalid icon name: "${kt}". Translating via AI...`);const Pt=or.findIconName(kt),Bt=await nt(Pt,"gemini-2.5-flash-lite","Icon Translation");Bt&&!Bt.error?(kt=Bt.trim().toLowerCase(),console.log(`[INFO] AI translation: "${dt.icon_description}" -> "${kt}"`)):(console.error(`[ERROR] Icon translation failed for: "${dt.icon_description}"`),kt="circle")}if($t=await Nt(kt),$t===null){console.warn(`[WARN] Retrying translation. (Failed attempt: "${kt}")`);const Pt=or.findIconNameRetry(Rt,kt),Bt=await nt(Pt,"gemini-2.5-flash-lite","Icon Translation Retry");let Ut="circle";Bt&&!Bt.error?(Ut=Bt.trim().toLowerCase(),console.log(`[INFO] AI retry translation: "${Rt}" -> "${Ut}"`)):console.error("[ERROR] Icon retry translation failed."),$t=await Nt(Ut)}return $t===null&&(console.log("[INFO] Final fallback: fetching 'circle'."),$t=await Nt("circle")),$t||""},Nt=async dt=>{(!dt||!/^[a-z0-9-]+$/.test(dt))&&(console.warn(`[WARN] Invalid icon name received: "${dt}". Using default 'circle'.`),dt="circle");try{const kt=await fetch(`https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/${dt}.svg`);return kt.ok?await kt.text():(console.warn(`[WARN] Failed to fetch icon: ${dt}. Server responded with ${kt.status}.`),null)}catch(kt){return console.error(`[ERROR] Fetching icon ${dt}:`,kt),null}},Wt=()=>{r&&(localStorage.setItem("gemini_api_key",r),t(r),i(!1),f([{type:"system",text:"APIキーが保存されました。スライドの元になるドキュメントをアップロードしてください。"}]))},De=()=>{if(G==="structure")f(dt=>[...dt,{type:"system",text:"再試行します。内容を再度承認してください。"}]),U(null),u(Zt.STRUCTURED);else if(G==="outline"){const dt=h.slice().reverse().find(vt=>vt.text.includes("セクションヘッダー"))?.text.includes("はい");Ns(dt)}},ue=dt=>dt.preventDefault(),Ii=dt=>{dt.preventDefault();const vt=dt.dataTransfer.files;vt.length>0&&Gn(vt[0])},Gn=async dt=>{if(!dt)return;if(!["application/pdf","text/plain","text/markdown"].includes(dt.type)){f(kt=>[...kt,{type:"system",text:`サポートされていないファイル形式です: ${dt.type}`}]);return}v(dt.name),R(!0),z("テキストを抽出中..."),f(kt=>[...kt,{type:"system",text:`${dt.name} をアップロードしました。`}]);try{let kt="";if(dt.type==="application/pdf"){const Rt=new Uint8Array(await dt.arrayBuffer()),$t=await bb({data:Rt}).promise;for(let Pt=1;Pt<=$t.numPages;Pt++){const Ut=await(await $t.getPage(Pt)).getTextContent();kt+=Ut.items.map(Ne=>Ne.str).join(" ")}}else kt=await dt.text();Wi(kt)}catch{f(Rt=>[...Rt,{type:"system",text:"テキスト抽出中にエラーが発生しました。"}]),R(!1),v("")}},Wi=async dt=>{f(Pt=>[...Pt,{type:"system",text:`テキスト抽出完了(${dt.length}文字)。内容を構造化します。`}]),u(Zt.STRUCTURING),z("テキストを構造化中..."),U(null),x(dt);const vt=Math.max(4e3,Math.min(18e4,dt.length*1.8));q(vt);const kt=vt/3,Rt=nt(or.structureText(dt),"gemini-2.5-flash-lite","テキスト構造化"),$t=(async()=>{try{ft(U0[0].key),await new Promise(Pt=>setTimeout(Pt,kt)),ft(U0[1].key),await new Promise(Pt=>setTimeout(Pt,kt)),ft(U0[2].key),await new Promise(Pt=>setTimeout(Pt,kt))}catch(Pt){console.error("Dummy progress failed",Pt)}})();try{const[Pt]=await Promise.all([Rt,$t]);ft(null),R(!1),q(0),Pt&&!Pt.error?(A(Pt),u(Zt.STRUCTURED),f(Bt=>[...Bt,{type:"system",text:"テキストの構造化が完了しました。"}])):(U("structure"),f(Bt=>[...Bt,{type:"system",text:Pt?Pt.error:"予期せぬエラーが発生しました。"}]))}catch(Pt){console.error("[FATAL] Error during structuring:",Pt),ft(null),R(!1),q(0),U("structure"),f(Bt=>[...Bt,{type:"system",text:`予期せぬエラーが発生しました: ${Pt.message}`}])}},vr=async()=>{if(!w){f(vt=>[...vt,{type:"system",text:"エラー: 元のテキストが見つかりません。"}]);return}if(!window.confirm("現在の編集内容は破棄されますが、テキストの構造化をAIに再実行させますか？"))return;f(vt=>[...vt,{type:"system",text:"テキストの再構造化を実行します..."}]),u(Zt.STRUCTURING),R(!0),z("テキストを再構造化中..."),U(null);const dt=await nt(or.structureText(w),"gemini-2.5-flash-lite","テキスト再構造化");R(!1),dt&&!dt.error?(A(dt),u(Zt.STRUCTURED),f(vt=>[...vt,{type:"system",text:"テキストの再構造化が完了しました。"}])):(U("structure"),u(Zt.STRUCTURED),f(vt=>[...vt,{type:"system",text:dt?dt.error:"予期せぬエラーが発生しました。"}]))},ze=()=>{u(Zt.SELECTING_THEME),f(dt=>[...dt,{type:"system",text:"内容が承認されました。次に、プレゼンテーションのテーマを選択してください。"}])},pi=dt=>{ut(dt)},Qi=dt=>{it(dt)},Ye=()=>{u(Zt.CREATING_OUTLINE);const dt=Ol[et]?.name||"選択されたテーマ",vt=H==="dark"?"ダーク":"ライト";f(kt=>[...kt,{type:"user",text:`${dt}テーマ (${vt}) を選択`},{type:"system",text:"テーマを承知しました。次に、アジェンダページを挿入しますか？"}])},da=dt=>{rt(dt),u(Zt.SELECTING_SECTION_HEADERS),f(vt=>[...vt,{type:"user",text:`アジェンダ: ${dt?"はい":"いいえ"}`},{type:"system",text:"主要なセクションの前に区切りスライドを自動挿入しますか？"}])},Ns=async dt=>{f(Bt=>[...Bt,{type:"user",text:`セクションヘダー: ${dt?"はい":"いえ"}`}]),u(Zt.GENERATING_OUTLINE),R(!0),z("構成案を生成中..."),U(null);const vt=Math.max(5e3,Math.min(18e4,_.length*1.4));q(vt);const kt=vt/5,Rt=or.createOutline(_,D,dt),$t=nt(Rt,"gemini-2.5-flash-lite","構成案生成"),Pt=(async()=>{try{ft(io[0].key),await new Promise(Bt=>setTimeout(Bt,kt)),ft(io[1].key),await new Promise(Bt=>setTimeout(Bt,kt)),ft(io[2].key),await new Promise(Bt=>setTimeout(Bt,kt)),ft(io[3].key),await new Promise(Bt=>setTimeout(Bt,kt)),ft(io[4].key),await new Promise(Bt=>setTimeout(Bt,kt))}catch(Bt){console.error("Dummy progress failed",Bt)}})();try{const[Bt]=await Promise.all([$t,Pt]);if(ft(null),R(!1),q(0),Bt&&!Bt.error){let Ut;try{Ut=JSON.parse(Bt)}catch(oe){if(oe.message.includes("escaped character")){console.warn("[WARN] JSON parse failed. Retrying with backslash fix...");try{const Xt=Bt.replace(/\\/g,"\\\\");Ut=JSON.parse(Xt),f(Le=>[...Le,{type:"system",text:"【自動修正】AIの応答形式(エスケープ文字)を修正しました。"}])}catch(Xt){console.error("[FATAL] Backslash fix failed.",Xt),U("outline"),f(Le=>[...Le,{type:"system",text:`構成案の解析に失敗しました。AIの応答形式が不正です: ${oe.message}`}]);return}}else{U("outline"),f(Xt=>[...Xt,{type:"system",text:`構成案の解析に失敗しました。AIの応答形式が不正です: ${oe.message}`}]);return}}const Ne=Ut.map(oe=>{const Xt={...oe};return Xt.template==="content_basic"?((!Xt.items||Array.isArray(Xt.items)&&Xt.items.length===0)&&Xt.summary&&typeof Xt.summary=="string"&&Xt.summary.trim().length>0&&(Xt.items=Xt.summary.split(`
`).map(Le=>Le.trim()).filter(Le=>Le.length>0)),Xt.summary=""):["three_points","comparison","vertical_steps","table_basic"].includes(Xt.template)?Xt.summary="":["content_with_diagram","title_slide","agenda","summary_or_thankyou"].includes(Xt.template)?((!Xt.summary||typeof Xt.summary=="string"&&Xt.summary.trim().length===0)&&Xt.items&&Array.isArray(Xt.items)&&Xt.items.length>0&&(Xt.summary=Xt.items.join(`
`)),Xt.items=null,Xt.points=null,Xt.columns=null,Xt.table=null,typeof Xt.summary!="string"&&(Xt.summary="")):Xt.template==="section_header"&&(Xt.summary="",Xt.items=null,Xt.points=null,Xt.columns=null,Xt.table=null),Xt});let ke=[..._t(Ne)];const $e=6;let ga=ke.length>1&&ke[1].template==="agenda";if(D){if(ga){const oe=ke[1],Xt=(oe.summary||"").split(`
`).filter(Le=>Le.trim().length>0);if(Xt.length>$e){const Le=Math.ceil(Xt.length/$e),si=[],Ei=(oe.title||"アジェンダ").replace(/\s*\(\d+\/\d+\)\s*$/,"");for(let tn=0;tn<Le;tn++){const qn=Xt.slice(tn*$e,(tn+1)*$e);si.push({...oe,title:`${Ei} (${tn+1}/${Le})`,summary:qn.join(`
`),items:null,points:null,columns:null,table:null})}ke.splice(1,1,...si),f(tn=>[...tn,{type:"system",text:"【自動修正】アジェンダの項目数が多いため、スライドを自動的に分割しました。"}])}}if(ga=ke.length>1&&ke[1].template==="agenda",!ga){const oe=ke.slice(1).map(Ei=>Ei.title||"").filter(Ei=>Ei.length>0),Xt=oe.length>0?oe:["（目次がありません）"],Le=Math.ceil(Xt.length/$e),si=[];if(Xt.length===0||Xt.length===1&&Xt[0]==="（目次がありません）")si.push({title:"アジェンダ",summary:"（目次がありません）",template:"agenda",items:null,points:null,columns:null,table:null});else for(let Ei=0;Ei<Le;Ei++){const tn=Xt.slice(Ei*$e,(Ei+1)*$e);si.push({title:`アジェンダ${Le>1?` (${Ei+1}/${Le})`:""}`,summary:tn.join(`
`),template:"agenda",items:null,points:null,columns:null,table:null})}ke.splice(1,0,...si),f(Ei=>[...Ei,{type:"system",text:"【自動修正】AIがアジェンダを生成しなかったため、2枚目に自動挿入しました。"}])}}else ga&&(ke.splice(1,1),f(oe=>[...oe,{type:"system",text:"【自動修正】AIが不要なアジェンダを生成したため、2枚目から削除しました。"}])),ke=ke.filter((oe,Xt)=>Xt===0||oe.template!=="agenda");const Ls=7;let wo=!1;ke=ke.flatMap(oe=>{if(oe.template==="table_basic"&&oe.table&&Array.isArray(oe.table.rows)&&oe.table.rows.length>Ls){wo=!0;const Xt=oe.table.headers||[],Le=oe.table.rows,si=Math.ceil(Le.length/Ls),Ei=(oe.title||"表").replace(/\s*\(\d+\/\d+\)\s*$/,""),tn=[];for(let qn=0;qn<si;qn++){const ec=Le.slice(qn*Ls,(qn+1)*Ls);tn.push({...oe,title:`${Ei} (${qn+1}/${si})`,table:{headers:Xt,rows:ec},summary:"",items:null,points:null,columns:null})}return tn}else return[oe]}),wo&&f(oe=>[...oe,{type:"system",text:"【自動修正】表の行数が多いため、スライドを自動的に分割しました。"}]);const tc=ke.some(oe=>oe.template==="section_header");dt?tc||f(oe=>[...oe,{type:"system",text:"【警告】セクションヘッダーの自動挿入（はい）を選択しましたが、AIが構成案に含めなかった可能性があります。構成案を確認してください。"}]):tc&&(ke=ke.filter((oe,Xt)=>Xt===0||oe.template!=="section_header"),f(oe=>[...oe,{type:"system",text:"【自動修正】AIが不要なセクションヘッダーを生成したため、構成案から削除しました。"}])),M(ke),u(Zt.OUTLINE_CREATED),f(oe=>[...oe,{type:"system",text:"構成案を生成しました。内容を確認・編集してください。"}])}else U("outline"),f(Ut=>[...Ut,{type:"system",text:Bt?Bt.error:"予期せずエラーが発生しました。"}])}catch(Bt){console.error("[FATAL] Error during outline progress simulation:",Bt),ft(null),R(!1),q(0),U("outline"),f(Ut=>[...Ut,{type:"system",text:`予期せぬエラーが発生しました: ${Bt.message}`}])}},go=(dt,vt,kt)=>{const Rt=[...T];vt==="infographic"?Rt[dt].infographic=kt:vt==="points"?Rt[dt].points=kt:Rt[dt][vt]=kt,M(Rt)},Kr=dt=>{M(vt=>vt.filter((kt,Rt)=>Rt!==dt))},yr=dt=>{const vt={title:"新しいスライド",summary:"ここに内容の要約を入力",template:"content_left_infographic_right",infographic:{needed:!1,description:""}},kt=[...T.slice(0,dt+1),vt,...T.slice(dt+1)];M(kt)},En=()=>{if(window.confirm("現在の構成案を破棄し、最初から再生成します。よろしいですか？")){f(kt=>[...kt,{type:"system",text:"構成案の再生成をリクエストしました。"}]);const dt=h.slice().reverse().find(kt=>kt.type==="user"&&kt.text.includes("セクションヘッダー:"))?.text,vt=dt?dt.includes("はい"):!1;Ns(vt)}},Ji=async dt=>{R(!0),z("スライド内容を再生成中...");const vt=T[dt],{title:kt,template:Rt}=vt,$t={...vt};delete $t.title,delete $t.template,Rt!=="content_with_diagram"&&delete $t.infographic;const Pt=[{name:"content_basic",description:"`items` (文字列配列) が必要。`summary`は空にする。"},{name:"three_points",description:"`points` (3要素のオブジェクト配列) が必要。`summary`は空にする。"},{name:"vertical_steps",description:"`items` (オブジェクト配列) が必要。`summary`は空にする。"},{name:"comparison",description:"`columns` (2要素のオブジェクト配列) が必要。`summary`は空にする。"},{name:"table_basic",description:"`table` ({headers: [...], rows: [...]}) が必要。`summary`は空にする。"},{name:"math_basic",description:"`summary` (解説文) と `formula` (KaTeX数式) が必要。"},{name:"content_with_diagram",description:"`summary` (本文) が必要。必要なら `infographic` も生成。"},{name:"agenda",description:"`summary` (改行区切りのリスト) が必要。"},{name:"title_slide",description:"`summary` (サブタイトル) が必要。"},{name:"section_header",description:"コンテンツ不要。`summary`は空にする。"},{name:"summary_or_thankyou",description:"`summary` (補足) が必要。"}],Bt=or.regenerateSlideContent(kt,Object.keys($t).length>0?JSON.stringify($t):"{}",Rt,Pt),Ut=await nt(Bt,"gemini-2.5-flash-lite",`スライド${dt+1}内容再生成`);if(Ut&&!Ut.error)try{const Ne=JSON.parse(Ut);M(Hi=>{const ke=[...Hi],$e={...ke[dt]};return Rt!=="content_basic"&&($e.items=null),Rt!=="three_points"&&($e.points=null),Rt!=="comparison"&&($e.columns=null),Rt!=="table_basic"&&($e.table=null),Object.assign($e,Ne),["content_basic","three_points","comparison","vertical_steps","section_header","table_basic"].includes(Rt)&&($e.summary=""),Rt!=="math_basic"&&($e.formula=null),Rt!=="content_with_diagram"&&(Ne.infographic||($e.infographic=null)),ke[dt]=$e,ke}),f(Hi=>[...Hi,{type:"system",text:`スライド ${dt+1} の内容を ${Rt} 形式で再生成しました。`}])}catch(Ne){f(Hi=>[...Hi,{type:"system",text:`内容の解析に失敗しました: ${Ne.message}`}])}else f(Ne=>[...Ne,{type:"system",text:Ut?Ut.error:"内容の再生成中にエラーが発生しました。"}]);R(!1)},fa=dt=>{we({index:dt,mode:"single"}),Gt(""),Lt(!0)},Os=()=>{we({index:null,mode:"all"}),Gt(""),Lt(!0)},bo=()=>{Lt(!1),Gt("")},Xl=async()=>{const{index:dt,mode:vt}=xe;if(!jt.trim()){bo();return}R(!0),U(null);let kt=null;if(vt==="all"){z("構成案全体を修正中...");const Rt=or.modifyFullOutline(JSON.stringify(T,null,2),jt);kt=await nt(Rt,"gemini-2.5-flash-lite","構成案全体修正")}else if(vt==="single"&&dt!==null){z(`スライド ${dt+1} を修正中...`);const Rt=or.modifySingleSlideOutline(JSON.stringify(T[dt],null,2),jt);kt=await nt(Rt,"gemini-2.5-flash-lite",`スライド${dt+1}修正`)}if(kt&&!kt.error)try{const Rt=JSON.parse(kt);vt==="all"?(M(Rt),f($t=>[...$t,{type:"system",text:"構成案全体を修正しました。"}])):vt==="single"&&dt!==null&&(M($t=>{const Pt=[...$t];return Pt[dt]=Rt,Pt}),f($t=>[...$t,{type:"system",text:`スライド ${dt+1} を修正しました。`}]))}catch(Rt){f($t=>[...$t,{type:"system",text:`修正結果の解析に失敗しました: ${Rt.message}`}])}else f(Rt=>[...Rt,{type:"system",text:kt?kt.error:"修正中にエラーが発生しました。"}]);R(!1),bo()},vo=()=>{window.confirm(`現在のスライドプレビューを破棄し、構成案の編集画面に戻ります。
これまでに承認したスライドは保持されます。

よろしいですか？`)&&(L(""),u(Zt.OUTLINE_CREATED),f(dt=>[...dt,{type:"system",text:"構成案の編集に戻りました。編集完了後、「構成案を承認し、スライド生成を開始する」ボタンを押してください。"}]))},zs=()=>{const dt=T,vt=yt.length;let kt=vt;for(let Rt=0;Rt<vt;Rt++){const $t=ti[Rt]?JSON.stringify(ti[Rt]):null,Pt=dt[Rt]?JSON.stringify(dt[Rt]):null;if($t!==Pt){kt=Rt;break}}kt<vt&&(f(Rt=>[...Rt,{type:"system",text:`[INFO] スライド ${kt+1} の構成案に変更が検出されたため、${kt+1} 枚目以降のスライドを再生成します。`}]),pt(Rt=>Rt.slice(0,kt))),ui([...dt]),K(kt),kt<dt.length?(f(Rt=>[...Rt.filter($t=>$t.type!=="system"),{type:"system",text:`構成案承認済。
**ステップ2: スライド生成**
（スライド ${kt+1} から）生成を再開します。`}]),ma(kt)):(u(Zt.ALL_SLIDES_GENERATED),f(Rt=>[...Rt,{type:"system",text:`構成案の編集が完了し、全てのスライドが承認済みです。
ZIPファイルをダウンロードできます。`}]))},ma=async dt=>{u(Zt.GENERATING_SLIDES);const vt=T[dt];R(!0),z(`${dt+1}/${T.length}枚目を生成中...`);let kt="";try{ft("analyzing"),await new Promise(Pt=>setTimeout(Pt,800));const Rt=Ol[et].templates[vt.template];if(!Rt)throw new Error(`テンプレート「${vt.template}」がテーマ「${et}」に見つかりません。`);const $t={"{theme_class}":`theme-${H}`,"{title}":vt.title||"","{summary}":pe.parseInline(vt.summary||"",{breaks:!0}),"{content}":pe.parse(vt.summary||"",{breaks:!0}),"{formula}":"","{infographic_svg}":"","{agenda_items_html}":"","{items_html}":""};if(vt.infographic?.needed){ft("designing"),await new Promise(Ne=>setTimeout(Ne,800));const Pt=or.generateInfographic(vt.infographic.description,H),Bt=await nt(Pt,"gemini-2.5-flash-lite",`SVG for Slide ${dt+1}`);if(!Bt||Bt.error){const Ne=Bt?.error||"インフォグラフィックSVGの生成に失敗しました。";throw console.error(Ne),new Error(Ne)}const Ut=Dt(Bt);$t["{infographic_svg}"]=Ut}if(["three_points"].includes(vt.template)&&Array.isArray(vt.points)){ft("designing"),await new Promise(Ut=>setTimeout(Ut,800));const Pt=vt.points.map(Ut=>zt(Ut)),Bt=await Promise.all(Pt);vt.points.forEach((Ut,Ne)=>{$t[`{point_${Ne+1}_title}`]=Ut.title||"",$t[`{point_${Ne+1}_summary}`]=pe.parseInline(Ut.summary||"",{breaks:!0}),$t[`{icon_${Ne+1}_svg}`]=Bt[Ne]||""})}if(vt.template==="agenda"){const Pt=vt.summary.split(`
`).map(Bt=>{const Ut=Bt.replace(/^\s*\d+\.\s*/,"");return`<li>${pe.parseInline(Ut||"",{breaks:!0})}</li>`}).join("");$t["{agenda_items_html}"]=Pt}if(vt.template==="math_basic"&&vt.formula){ft("designing"),await new Promise(Ut=>setTimeout(Ut,800));const Bt=(vt.formula||"").replace(/\n/g," ");$t["{formula}"]=pe.parse(Bt,{breaks:!1})}if(["vertical_steps","content_basic"].includes(vt.template)&&Array.isArray(vt.items)){ft("designing"),await new Promise(Bt=>setTimeout(Bt,800));let Pt="";vt.template==="vertical_steps"?Pt=vt.items.map((Bt,Ut)=>`
            <div class="step">
              <div class="step-marker">${Ut+1}</div>
              <h2>${Bt.title||""}</h2>
              <p>${pe.parseInline(Bt.description||"",{breaks:!0})}</p> 
            </div>
          `).join(""):vt.template==="content_basic"&&(Pt=vt.items.map(Bt=>{const Ut=Bt||"",Ne=Ut.match(/^(\s*)/)[0].length;let Hi=Ut.trim();Hi=Hi.replace(/^([\*\-\・\●\■]|(\d+\.)|[a-z]\.)\s*/,"");const ke=Math.floor(Ne/2),$e=ke>0?`style="margin-left: ${ke*2}em;"`:"";return`<li data-level="${ke}" ${$e}>${pe.parseInline(Hi||"",{breaks:!0})}</li>`}).join("")),$t["{items_html}"]=Pt}if(vt.template==="comparison"&&Array.isArray(vt.columns)){const Pt=vt.columns.map(Bt=>{const Ut=Bt.title||"",Ne=Array.isArray(Bt.items)?Bt.items.map(Hi=>`<li>${pe.parseInline(Hi||"",{breaks:!0})}</li>`).join(""):"";return`
                <div class="column">
                    <h2>${Ut}</h2>
                    <ul>${Ne}</ul>
                </div>
            `}).join("");$t["{comparison_columns_html}"]=Pt}if(vt.template==="table_basic"&&vt.table){ft("designing"),await new Promise(Bt=>setTimeout(Bt,800));let Pt="<thead><tr>";Array.isArray(vt.table.headers)&&(Pt+=vt.table.headers.map(Bt=>`<th>${pe.parseInline(Bt||"",{breaks:!0})}</th>`).join("")),Pt+="</tr></thead>",Pt+="<tbody>",Array.isArray(vt.table.rows)&&(Pt+=vt.table.rows.map(Bt=>{let Ut="<tr>";return Ut+=Bt.map(Ne=>`<td>${pe.parseInline(Ne||"",{breaks:!0})}</td>`).join(""),Ut+="</tr>",Ut}).join("")),Pt+="</tbody>",$t["{table_html}"]=Pt}ft("coding"),await new Promise(Pt=>setTimeout(Pt,800)),kt=Object.entries($t).reduce((Pt,[Bt,Ut])=>{const Ne=new RegExp(Bt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return Pt.replace(Ne,Ut)},Rt),f(Pt=>[...Pt,{type:"system",text:`スライド「${vt.title}」が生成されました。
プレビューで確認し、承認してください。`}])}catch(Rt){console.error("Slide generation failed:",Rt),kt="",f($t=>[...$t,{type:"system",text:`スライド生成に失敗しました: ${Rt.message}。「承認して次へ」ボタンで再試行できます。`}])}finally{ft(null),R(!1),L(kt),u(Zt.SLIDE_GENERATED)}},Kl=async dt=>{R(!0),z(`スライド ${V+1} を修正中...`);const vt=or.modifySlide(dt,Tt),kt=await nt(vt,"gemini-2.5-flash-lite",`スライド${V+1}修正`);if(R(!1),kt)try{const Rt=JSON.parse(kt);if(Rt.html&&Rt.changes){L(Rt.html);const $t=`スライドを修正しました。

**変更点:**
${Rt.changes}`;f(Pt=>[...Pt,{type:"system",text:$t}])}else throw new Error("Invalid JSON structure from API.")}catch(Rt){console.error("Failed to parse JSON response for slide modification:",Rt),f($t=>[...$t,{type:"system",text:"スライドの修正結果を解析できませんでした。内容が予期せぬ形式です。"}])}},Zl=()=>{if(!Tt)return;const dt=new Blob([Tt],{type:"text/html"}),vt=URL.createObjectURL(dt);window.open(vt,"_blank")},Wl=()=>{if(!Tt){f(kt=>[...kt,{type:"system",text:"スライド生成を再試行します。"}]),ma(V);return}const dt=[...yt,Tt];pt(dt),L("");const vt=V+1;if(vt<T.length){K(vt);const kt=T[vt];f(Rt=>[...Rt.filter($t=>$t.type!=="system"),{type:"system",text:`スライド ${V+1} を承認しました。
次のスライド「${kt.title}」の生成を開始します。`}]),ma(vt)}else u(Zt.ALL_SLIDES_GENERATED),f(kt=>[...kt,{type:"system",text:`全てのステップが完了しました！
下のボタンからZIPファイルをダウンロードできます。`}])},yo=async()=>{R(!0),z("ZIPファイルを生成中...");try{const dt=new N7;yt.forEach((Rt,$t)=>{dt.file(`s${$t+1}.html`,Rt)});const vt=await dt.generateAsync({type:"blob"}),kt=document.createElement("a");kt.href=URL.createObjectURL(vt),kt.download="slides.zip",document.body.appendChild(kt),kt.click(),document.body.removeChild(kt)}catch(dt){f(vt=>[...vt,{type:"system",text:`ZIPファイル生成中にエラーが発生しました: ${dt.message}`}])}finally{R(!1)}},xo=async()=>{if(yt.length===0){f(vt=>[...vt,{type:"system",text:"PDF化するスライドがありません。"}]);return}const dt="https://slide-pdf-backend-306538767892.asia-northeast1.run.app/generate-pdf";if(dt.includes("your-cloud-run-service-url")){f(vt=>[...vt,{type:"system",text:"エラー: App.jsx の BACKEND_URL を設定してください。"}]);return}J(!0),z("PDFを生成中... (最大1〜2分かかります)"),f(vt=>[...vt,{type:"system",text:"バックエンドにPDF生成をリクエストしました..."}]);try{const vt=await fetch(dt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({htmls:yt})});if(!vt.ok){const $t=await vt.text();throw new Error(`PDF生成に失敗しました: ${$t}`)}const kt=await vt.blob(),Rt=document.createElement("a");Rt.href=URL.createObjectURL(kt),Rt.download="merged_slides.pdf",document.body.appendChild(Rt),Rt.click(),document.body.removeChild(Rt),f($t=>[...$t,{type:"system",text:"PDFのダウンロードが完了しました。"}])}catch(vt){console.error("PDF Download failed:",vt),f(kt=>[...kt,{type:"system",text:`PDF生成エラー: ${vt.message}`}])}finally{J(!1),z("")}},Ql=()=>{if(o!==Zt.SLIDE_GENERATED)return;const dt=T[V]?.title||"";f(vt=>[...vt,{type:"system",text:`スライド「${dt}」を再生成します。`}]),L(""),ma(V)},Jl=()=>{!m.trim()||o!==Zt.SLIDE_GENERATED||(f(dt=>[...dt,{type:"user",text:m}]),Kl(m),p(""))},Qn=()=>{gt(Tt),ot(!0)},Ai=()=>{L(ht),ot(!1),f(dt=>[...dt,{type:"system",text:"手動での変更が適用されました。プレビューで確認してください。"}])},Fi=()=>{ot(!1),gt("")},xr=o===Zt.GENERATING_SLIDES,pa=o===Zt.SLIDE_GENERATED&&N,pu=xr||pa,gu=xr?T[V]?.title:pa?`${T[V]?.title} を修正中...`:"";return X.jsxs("div",{className:"bg-[#1e1e1e] h-screen w-screen flex flex-col font-sans text-white",children:[X.jsx(Tw,{onSettingsClick:()=>i(!0)}),X.jsxs("main",{className:"flex-grow flex p-6 gap-6 overflow-hidden",children:[X.jsx("div",{className:`transition-all duration-300 ease-in-out ${o===Zt.INITIAL||o===Zt.STRUCTURING||o===Zt.STRUCTURED||o===Zt.SELECTING_THEME||o===Zt.CREATING_OUTLINE||o===Zt.SELECTING_SECTION_HEADERS||o===Zt.GENERATING_OUTLINE||o===Zt.OUTLINE_CREATED?"w-1/3":"w-1/2"}`,children:o===Zt.INITIAL||o===Zt.STRUCTURING||o===Zt.STRUCTURED||o===Zt.SELECTING_THEME||o===Zt.CREATING_OUTLINE||o===Zt.SELECTING_SECTION_HEADERS||o===Zt.GENERATING_OUTLINE||o===Zt.OUTLINE_CREATED?X.jsx(Cw,{isProcessing:N,processingStatus:B,fileName:b,handleDragOver:ue,handleDrop:Ii,onFileSelect:Gn,appStatus:o,thinkingState:C,totalWaitTime:mt}):X.jsx(Uw,{generatedSlides:yt,htmlContent:Tt,isLoading:pu,loadingSlideTitle:gu})}),X.jsx("div",{className:`transition-all duration-300 ease-in-out ${o===Zt.INITIAL||o===Zt.STRUCTURING||o===Zt.STRUCTURED||o===Zt.SELECTING_THEME||o===Zt.CREATING_OUTLINE||o===Zt.SELECTING_SECTION_HEADERS||o===Zt.GENERATING_OUTLINE||o===Zt.OUTLINE_CREATED?"w-2/3":"w-1/2"}`,children:X.jsx(Pw,{chatState:{messages:h,userInput:m,setUserInput:p,handleSendMessage:Jl,chatEndRef:At,appStatus:o,apiErrorStep:G,handleRetry:De,structuredMarkdown:_,setStructuredMarkdown:A,handleMarkdownApproval:ze,handleRegenerateStructure:vr,selectedTheme:et,design:H,handleThemeSelection:pi,handleDesignSelection:Qi,handleThemeApproval:Ye,handleAgendaChoice:da,handleSectionHeaderChoice:Ns,slideOutline:T,handleOutlineChange:go,handleInsertSlide:yr,handleDeleteSlide:Kr,handleStartGeneration:zs,handleRegenerateOutline:En,handleRegenerateSlideContent:Ji,handleOpenModifyModal:fa,handleOpenModifyAllModal:Os,currentSlideIndex:V,thinkingState:C,handlePreview:Zl,handleRegenerateCurrentSlide:Ql,handleReturnToOutline:vo,handleApproveAndNext:Wl,handleDownloadZip:yo,handleOpenCodeEditor:Qn,handleDownloadPdf:xo,isGeneratingPdf:j}})})]}),X.jsx(Hw,{isOpen:e,tempApiKey:r,setTempApiKey:a,handleSave:Wt}),X.jsx(jw,{isOpen:P,html:ht,setHtml:gt,onSave:Ai,onCancel:Fi}),X.jsx(Gw,{isOpen:It,mode:xe.mode,index:xe.index,value:jt,onChange:Gt,onSave:Xl,onCancel:bo})]})}e5.createRoot(document.getElementById("root")).render(X.jsx(de.StrictMode,{children:X.jsx(qw,{})}));
