var i2=l=>{throw TypeError(l)};var xd=(l,t,e)=>t.has(l)||i2("Cannot "+e);var Ke=(l,t,e)=>(xd(l,t,"read from private field"),e?e.call(l):t.get(l)),nr=(l,t,e)=>t.has(l)?i2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(l):t.set(l,e),on=(l,t,e,i)=>(xd(l,t,"write to private field"),i?i.call(l,e):t.set(l,e),e),rr=(l,t,e)=>(xd(l,t,"access private method"),e);var n2=(l,t,e,i)=>({set _(r){on(l,t,r,e)},get _(){return Ke(l,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $y(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var wd={exports:{}},ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r2;function Vy(){if(r2)return ol;r2=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var u in r)u!=="key"&&(a[u]=r[u])}else a=r;return r=a.ref,{$$typeof:l,type:i,key:o,ref:r!==void 0?r:null,props:a}}return ol.Fragment=t,ol.jsx=e,ol.jsxs=e,ol}var s2;function Yy(){return s2||(s2=1,wd.exports=Vy()),wd.exports}var Z=Yy(),Sd={exports:{}},se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2;function Xy(){if(a2)return se;a2=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),b=Symbol.iterator;function v(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function A(z,P,at){this.props=z,this.context=P,this.refs=_,this.updater=at||w}A.prototype.isReactComponent={},A.prototype.setState=function(z,P){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,P,"setState")},A.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function E(){}E.prototype=A.prototype;function C(z,P,at){this.props=z,this.context=P,this.refs=_,this.updater=at||w}var N=C.prototype=new E;N.constructor=C,x(N,A.prototype),N.isPureReactComponent=!0;var D=Array.isArray;function F(){}var B={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function j(z,P,at){var ht=at.ref;return{$$typeof:l,type:z,key:P,ref:ht!==void 0?ht:null,props:at}}function et(z,P){return j(z.type,P,z.props)}function ut(z){return typeof z=="object"&&z!==null&&z.$$typeof===l}function H(z){var P={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(at){return P[at]})}var it=/\/+/g;function R(z,P){return typeof z=="object"&&z!==null&&z.key!=null?H(""+z.key):P.toString(36)}function nt(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(F,F):(z.status="pending",z.then(function(P){z.status==="pending"&&(z.status="fulfilled",z.value=P)},function(P){z.status==="pending"&&(z.status="rejected",z.reason=P)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function $(z,P,at,ht,pt){var Bt=typeof z;(Bt==="undefined"||Bt==="boolean")&&(z=null);var Lt=!1;if(z===null)Lt=!0;else switch(Bt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(z.$$typeof){case l:case t:Lt=!0;break;case m:return Lt=z._init,$(Lt(z._payload),P,at,ht,pt)}}if(Lt)return pt=pt(z),Lt=ht===""?"."+R(z,0):ht,D(pt)?(at="",Lt!=null&&(at=Lt.replace(it,"$&/")+"/"),$(pt,P,at,"",function(xe){return xe})):pt!=null&&(ut(pt)&&(pt=et(pt,at+(pt.key==null||z&&z.key===pt.key?"":(""+pt.key).replace(it,"$&/")+"/")+Lt)),P.push(pt)),1;Lt=0;var Ht=ht===""?".":ht+":";if(D(z))for(var jt=0;jt<z.length;jt++)ht=z[jt],Bt=Ht+R(ht,jt),Lt+=$(ht,P,at,Bt,pt);else if(jt=v(z),typeof jt=="function")for(z=jt.call(z),jt=0;!(ht=z.next()).done;)ht=ht.value,Bt=Ht+R(ht,jt++),Lt+=$(ht,P,at,Bt,pt);else if(Bt==="object"){if(typeof z.then=="function")return $(nt(z),P,at,ht,pt);throw P=String(z),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function X(z,P,at){if(z==null)return z;var ht=[],pt=0;return $(z,ht,"","",function(Bt){return P.call(at,Bt,pt++)}),ht}function vt(z){if(z._status===-1){var P=z._result;P=P(),P.then(function(at){(z._status===0||z._status===-1)&&(z._status=1,z._result=at)},function(at){(z._status===0||z._status===-1)&&(z._status=2,z._result=at)}),z._status===-1&&(z._status=0,z._result=P)}if(z._status===1)return z._result.default;throw z._result}var mt=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Et={map:X,forEach:function(z,P,at){X(z,function(){P.apply(this,arguments)},at)},count:function(z){var P=0;return X(z,function(){P++}),P},toArray:function(z){return X(z,function(P){return P})||[]},only:function(z){if(!ut(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return se.Activity=p,se.Children=Et,se.Component=A,se.Fragment=e,se.Profiler=r,se.PureComponent=C,se.StrictMode=i,se.Suspense=h,se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,se.__COMPILER_RUNTIME={__proto__:null,c:function(z){return B.H.useMemoCache(z)}},se.cache=function(z){return function(){return z.apply(null,arguments)}},se.cacheSignal=function(){return null},se.cloneElement=function(z,P,at){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ht=x({},z.props),pt=z.key;if(P!=null)for(Bt in P.key!==void 0&&(pt=""+P.key),P)!Y.call(P,Bt)||Bt==="key"||Bt==="__self"||Bt==="__source"||Bt==="ref"&&P.ref===void 0||(ht[Bt]=P[Bt]);var Bt=arguments.length-2;if(Bt===1)ht.children=at;else if(1<Bt){for(var Lt=Array(Bt),Ht=0;Ht<Bt;Ht++)Lt[Ht]=arguments[Ht+2];ht.children=Lt}return j(z.type,pt,ht)},se.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},se.createElement=function(z,P,at){var ht,pt={},Bt=null;if(P!=null)for(ht in P.key!==void 0&&(Bt=""+P.key),P)Y.call(P,ht)&&ht!=="key"&&ht!=="__self"&&ht!=="__source"&&(pt[ht]=P[ht]);var Lt=arguments.length-2;if(Lt===1)pt.children=at;else if(1<Lt){for(var Ht=Array(Lt),jt=0;jt<Lt;jt++)Ht[jt]=arguments[jt+2];pt.children=Ht}if(z&&z.defaultProps)for(ht in Lt=z.defaultProps,Lt)pt[ht]===void 0&&(pt[ht]=Lt[ht]);return j(z,Bt,pt)},se.createRef=function(){return{current:null}},se.forwardRef=function(z){return{$$typeof:u,render:z}},se.isValidElement=ut,se.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:vt}},se.memo=function(z,P){return{$$typeof:f,type:z,compare:P===void 0?null:P}},se.startTransition=function(z){var P=B.T,at={};B.T=at;try{var ht=z(),pt=B.S;pt!==null&&pt(at,ht),typeof ht=="object"&&ht!==null&&typeof ht.then=="function"&&ht.then(F,mt)}catch(Bt){mt(Bt)}finally{P!==null&&at.types!==null&&(P.types=at.types),B.T=P}},se.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},se.use=function(z){return B.H.use(z)},se.useActionState=function(z,P,at){return B.H.useActionState(z,P,at)},se.useCallback=function(z,P){return B.H.useCallback(z,P)},se.useContext=function(z){return B.H.useContext(z)},se.useDebugValue=function(){},se.useDeferredValue=function(z,P){return B.H.useDeferredValue(z,P)},se.useEffect=function(z,P){return B.H.useEffect(z,P)},se.useEffectEvent=function(z){return B.H.useEffectEvent(z)},se.useId=function(){return B.H.useId()},se.useImperativeHandle=function(z,P,at){return B.H.useImperativeHandle(z,P,at)},se.useInsertionEffect=function(z,P){return B.H.useInsertionEffect(z,P)},se.useLayoutEffect=function(z,P){return B.H.useLayoutEffect(z,P)},se.useMemo=function(z,P){return B.H.useMemo(z,P)},se.useOptimistic=function(z,P){return B.H.useOptimistic(z,P)},se.useReducer=function(z,P,at){return B.H.useReducer(z,P,at)},se.useRef=function(z){return B.H.useRef(z)},se.useState=function(z){return B.H.useState(z)},se.useSyncExternalStore=function(z,P,at){return B.H.useSyncExternalStore(z,P,at)},se.useTransition=function(){return B.H.useTransition()},se.version="19.2.0",se}var o2;function _f(){return o2||(o2=1,Sd.exports=Xy()),Sd.exports}var fe=_f(),Ad={exports:{}},ll={},_d={exports:{}},kd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l2;function Ky(){return l2||(l2=1,(function(l){function t($,X){var vt=$.length;$.push(X);t:for(;0<vt;){var mt=vt-1>>>1,Et=$[mt];if(0<r(Et,X))$[mt]=X,$[vt]=Et,vt=mt;else break t}}function e($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var X=$[0],vt=$.pop();if(vt!==X){$[0]=vt;t:for(var mt=0,Et=$.length,z=Et>>>1;mt<z;){var P=2*(mt+1)-1,at=$[P],ht=P+1,pt=$[ht];if(0>r(at,vt))ht<Et&&0>r(pt,at)?($[mt]=pt,$[ht]=vt,mt=ht):($[mt]=at,$[P]=vt,mt=P);else if(ht<Et&&0>r(pt,vt))$[mt]=pt,$[ht]=vt,mt=ht;else break t}}return X}function r($,X){var vt=$.sortIndex-X.sortIndex;return vt!==0?vt:$.id-X.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;l.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();l.unstable_now=function(){return o.now()-u}}var h=[],f=[],m=1,p=null,b=3,v=!1,w=!1,x=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function N($){for(var X=e(f);X!==null;){if(X.callback===null)i(f);else if(X.startTime<=$)i(f),X.sortIndex=X.expirationTime,t(h,X);else break;X=e(f)}}function D($){if(x=!1,N($),!w)if(e(h)!==null)w=!0,F||(F=!0,H());else{var X=e(f);X!==null&&nt(D,X.startTime-$)}}var F=!1,B=-1,Y=5,j=-1;function et(){return _?!0:!(l.unstable_now()-j<Y)}function ut(){if(_=!1,F){var $=l.unstable_now();j=$;var X=!0;try{t:{w=!1,x&&(x=!1,E(B),B=-1),v=!0;var vt=b;try{e:{for(N($),p=e(h);p!==null&&!(p.expirationTime>$&&et());){var mt=p.callback;if(typeof mt=="function"){p.callback=null,b=p.priorityLevel;var Et=mt(p.expirationTime<=$);if($=l.unstable_now(),typeof Et=="function"){p.callback=Et,N($),X=!0;break e}p===e(h)&&i(h),N($)}else i(h);p=e(h)}if(p!==null)X=!0;else{var z=e(f);z!==null&&nt(D,z.startTime-$),X=!1}}break t}finally{p=null,b=vt,v=!1}X=void 0}}finally{X?H():F=!1}}}var H;if(typeof C=="function")H=function(){C(ut)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,R=it.port2;it.port1.onmessage=ut,H=function(){R.postMessage(null)}}else H=function(){A(ut,0)};function nt($,X){B=A(function(){$(l.unstable_now())},X)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function($){$.callback=null},l.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<$?Math.floor(1e3/$):5},l.unstable_getCurrentPriorityLevel=function(){return b},l.unstable_next=function($){switch(b){case 1:case 2:case 3:var X=3;break;default:X=b}var vt=b;b=X;try{return $()}finally{b=vt}},l.unstable_requestPaint=function(){_=!0},l.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var vt=b;b=$;try{return X()}finally{b=vt}},l.unstable_scheduleCallback=function($,X,vt){var mt=l.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?mt+vt:mt):vt=mt,$){case 1:var Et=-1;break;case 2:Et=250;break;case 5:Et=1073741823;break;case 4:Et=1e4;break;default:Et=5e3}return Et=vt+Et,$={id:m++,callback:X,priorityLevel:$,startTime:vt,expirationTime:Et,sortIndex:-1},vt>mt?($.sortIndex=vt,t(f,$),e(h)===null&&$===e(f)&&(x?(E(B),B=-1):x=!0,nt(D,vt-mt))):($.sortIndex=Et,t(h,$),w||v||(w=!0,F||(F=!0,H()))),$},l.unstable_shouldYield=et,l.unstable_wrapCallback=function($){var X=b;return function(){var vt=b;b=X;try{return $.apply(this,arguments)}finally{b=vt}}}})(kd)),kd}var c2;function Zy(){return c2||(c2=1,_d.exports=Ky()),_d.exports}var Ed={exports:{}},Fi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2;function Wy(){if(u2)return Fi;u2=1;var l=_f();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:h,containerInfo:f,implementation:m}}var o=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Fi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Fi.createPortal=function(h,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(h,f,null,m)},Fi.flushSync=function(h){var f=o.T,m=i.p;try{if(o.T=null,i.p=2,h)return h()}finally{o.T=f,i.p=m,i.d.f()}},Fi.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Fi.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Fi.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var m=f.as,p=u(m,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:v}):m==="script"&&i.d.X(h,{crossOrigin:p,integrity:b,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Fi.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Fi.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=u(m,f.crossOrigin);i.d.L(h,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Fi.preloadModule=function(h,f){if(typeof h=="string")if(f){var m=u(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Fi.requestFormReset=function(h){i.d.r(h)},Fi.unstable_batchedUpdates=function(h,f){return h(f)},Fi.useFormState=function(h,f,m){return o.H.useFormState(h,f,m)},Fi.useFormStatus=function(){return o.H.useHostTransitionStatus()},Fi.version="19.2.0",Fi}var h2;function Qy(){if(h2)return Ed.exports;h2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),Ed.exports=Wy(),Ed.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2;function Jy(){if(d2)return ll;d2=1;var l=Zy(),t=_f(),e=Qy();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a(n){var s=n,c=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(c=s.return),n=s.return;while(n)}return s.tag===3?c:null}function o(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function u(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(a(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=a(n),s===null)throw Error(i(188));return s!==n?null:n}for(var c=n,d=s;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return h(g),n;if(y===d)return h(g),s;y=y.sibling}throw Error(i(188))}if(c.return!==d.return)c=g,d=y;else{for(var T=!1,L=g.child;L;){if(L===c){T=!0,c=g,d=y;break}if(L===d){T=!0,d=g,c=y;break}L=L.sibling}if(!T){for(L=y.child;L;){if(L===c){T=!0,c=y,d=g;break}if(L===d){T=!0,d=y,c=g;break}L=L.sibling}if(!T)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?n:s}function m(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=m(n),s!==null)return s;n=n.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),ut=Symbol.iterator;function H(n){return n===null||typeof n!="object"?null:(n=ut&&n[ut]||n["@@iterator"],typeof n=="function"?n:null)}var it=Symbol.for("react.client.reference");function R(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===it?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case A:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case F:return"SuspenseList";case j:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case C:return n.displayName||"Context";case E:return(n._context.displayName||"Context")+".Consumer";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return s=n.displayName||null,s!==null?s:R(n.type)||"Memo";case Y:s=n._payload,n=n._init;try{return R(n(s))}catch{}}return null}var nt=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vt={pending:!1,data:null,method:null,action:null},mt=[],Et=-1;function z(n){return{current:n}}function P(n){0>Et||(n.current=mt[Et],mt[Et]=null,Et--)}function at(n,s){Et++,mt[Et]=n.current,n.current=s}var ht=z(null),pt=z(null),Bt=z(null),Lt=z(null);function Ht(n,s){switch(at(Bt,s),at(pt,n),at(ht,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?kg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=kg(s),n=Eg(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}P(ht),at(ht,n)}function jt(){P(ht),P(pt),P(Bt)}function xe(n){n.memoizedState!==null&&at(Lt,n);var s=ht.current,c=Eg(s,n.type);s!==c&&(at(pt,n),at(ht,c))}function we(n){pt.current===n&&(P(ht),P(pt)),Lt.current===n&&(P(Lt),nl._currentValue=vt)}var Qe,oi;function M(n){if(Qe===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);Qe=s&&s[1]||"",oi=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qe+n+oi}var gt=!1;function dt(n,s){if(!n||gt)return"";gt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var At=function(){throw Error()};if(Object.defineProperty(At.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(At,[])}catch(bt){var ct=bt}Reflect.construct(n,[],At)}else{try{At.call()}catch(bt){ct=bt}n.call(At.prototype)}}else{try{throw Error()}catch(bt){ct=bt}(At=n())&&typeof At.catch=="function"&&At.catch(function(){})}}catch(bt){if(bt&&ct&&typeof bt.stack=="string")return[bt.stack,ct.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),T=y[0],L=y[1];if(T&&L){var K=T.split(`
`),ot=L.split(`
`);for(g=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ot.length&&!ot[g].includes("DetermineComponentFrameRoot");)g++;if(d===K.length||g===ot.length)for(d=K.length-1,g=ot.length-1;1<=d&&0<=g&&K[d]!==ot[g];)g--;for(;1<=d&&0<=g;d--,g--)if(K[d]!==ot[g]){if(d!==1||g!==1)do if(d--,g--,0>g||K[d]!==ot[g]){var yt=`
`+K[d].replace(" at new "," at ");return n.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",n.displayName)),yt}while(1<=d&&0<=g);break}}}finally{gt=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?M(c):""}function G(n,s){switch(n.tag){case 26:case 27:case 5:return M(n.type);case 16:return M("Lazy");case 13:return n.child!==s&&s!==null?M("Suspense Fallback"):M("Suspense");case 19:return M("SuspenseList");case 0:case 15:return dt(n.type,!1);case 11:return dt(n.type.render,!1);case 1:return dt(n.type,!0);case 31:return M("Activity");default:return""}}function U(n){try{var s="",c=null;do s+=G(n,c),c=n,n=n.return;while(n);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var J=Object.prototype.hasOwnProperty,wt=l.unstable_scheduleCallback,_t=l.unstable_cancelCallback,lt=l.unstable_shouldYield,Rt=l.unstable_requestPaint,Ot=l.unstable_now,Dt=l.unstable_getCurrentPriorityLevel,Kt=l.unstable_ImmediatePriority,Ne=l.unstable_UserBlockingPriority,le=l.unstable_NormalPriority,Bi=l.unstable_LowPriority,Wn=l.unstable_IdlePriority,Zi=l.log,vr=l.unstable_setDisableYieldValue,ze=null,fi=null;function Wi(n){if(typeof Zi=="function"&&vr(n),fi&&typeof fi.setStrictMode=="function")try{fi.setStrictMode(ze,n)}catch{}}var He=Math.clz32?Math.clz32:bo,pa=Math.log,go=Math.LN2;function bo(n){return n>>>=0,n===0?32:31-(pa(n)/go|0)|0}var Zr=256,yr=262144,kn=4194304;function Qi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Wr(n,s,c){var d=n.pendingLanes;if(d===0)return 0;var g=0,y=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var L=d&134217727;return L!==0?(d=L&~y,d!==0?g=Qi(d):(T&=L,T!==0?g=Qi(T):c||(c=L&~n,c!==0&&(g=Qi(c))))):(L=d&~y,L!==0?g=Qi(L):T!==0?g=Qi(T):c||(c=d&~n,c!==0&&(g=Qi(c)))),g===0?0:s!==0&&s!==g&&(s&y)===0&&(y=g&-g,c=s&-s,y>=c||y===32&&(c&4194048)!==0)?s:g}function Bs(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function hu(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vl(){var n=kn;return kn<<=1,(kn&62914560)===0&&(kn=4194304),n}function Qr(n){for(var s=[],c=0;31>c;c++)s.push(n);return s}function Is(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function du(n,s,c,d,g,y){var T=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var L=n.entanglements,K=n.expirationTimes,ot=n.hiddenUpdates;for(c=T&~c;0<c;){var yt=31-He(c),At=1<<yt;L[yt]=0,K[yt]=-1;var ct=ot[yt];if(ct!==null)for(ot[yt]=null,yt=0;yt<ct.length;yt++){var bt=ct[yt];bt!==null&&(bt.lane&=-536870913)}c&=~At}d!==0&&Yl(n,d,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(T&~s))}function Yl(n,s,c){n.pendingLanes|=s,n.suspendedLanes&=~s;var d=31-He(s);n.entangledLanes|=s,n.entanglements[d]=n.entanglements[d]|1073741824|c&261930}function Xl(n,s){var c=n.entangledLanes|=s;for(n=n.entanglements;c;){var d=31-He(c),g=1<<d;g&s|n[d]&s&&(n[d]|=s),c&=~g}}function Kl(n,s){var c=s&-s;return c=(c&42)!==0?1:vo(c),(c&(n.suspendedLanes|s))!==0?0:c}function vo(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function yo(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Zl(){var n=X.p;return n!==0?n:(n=window.event,n===void 0?32:Kg(n.type))}function Wl(n,s){var c=X.p;try{return X.p=n,s()}finally{X.p=c}}var Gn=Math.random().toString(36).slice(2),mi="__reactFiber$"+Gn,Ii="__reactProps$"+Gn,Jr="__reactContainer$"+Gn,ft="__reactEvents$"+Gn,xt="__reactListeners$"+Gn,Tt="__reactHandles$"+Gn,zt="__reactResources$"+Gn,Vt="__reactMarker$"+Gn;function Pt(n){delete n[mi],delete n[Ii],delete n[ft],delete n[xt],delete n[Tt]}function Ft(n){var s=n[mi];if(s)return s;for(var c=n.parentNode;c;){if(s=c[Jr]||c[mi]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(n=Og(n);n!==null;){if(c=n[mi])return c;n=Og(n)}return s}n=c,c=n.parentNode}return null}function Jt(n){if(n=n[mi]||n[Jr]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Te(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Ti(n){var s=n[zt];return s||(s=n[zt]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ce(n){n[Vt]=!0}var li=new Set,Fs={};function Qn(n,s){ke(n,s),ke(n+"Capture",s)}function ke(n,s){for(Fs[n]=s,n=0;n<s.length;n++)li.add(s[n])}var Zt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Si={},xr={};function Ui(n){return J.call(xr,n)?!0:J.call(Si,n)?!1:Zt.test(n)?xr[n]=!0:(Si[n]=!0,!1)}function Ji(n,s,c){if(Ui(s))if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+c)}}function ga(n,s,c){if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+c)}}function wr(n,s,c,d){if(d===null)n.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(s,c,""+d)}}function En(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bm(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Fv(n,s,c){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(T){c=""+T,y.call(this,T)}}),Object.defineProperty(n,s,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function fu(n){if(!n._valueTracker){var s=bm(n)?"checked":"value";n._valueTracker=Fv(n,s,""+n[s])}}function vm(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return n&&(d=bm(n)?n.checked?"true":"false":n.value),n=d,n!==c?(s.setValue(n),!0):!1}function Ql(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Pv=/[\n"\\]/g;function Tn(n){return n.replace(Pv,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function mu(n,s,c,d,g,y,T,L){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),s!=null?T==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+En(s)):n.value!==""+En(s)&&(n.value=""+En(s)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),s!=null?pu(n,T,En(s)):c!=null?pu(n,T,En(c)):d!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?n.name=""+En(L):n.removeAttribute("name")}function ym(n,s,c,d,g,y,T,L){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){fu(n);return}c=c!=null?""+En(c):"",s=s!=null?""+En(s):c,L||s===n.value||(n.value=s),n.defaultValue=s}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=L?n.checked:!!d,n.defaultChecked=!!d,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),fu(n)}function pu(n,s,c){s==="number"&&Ql(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function ba(n,s,c,d){if(n=n.options,s){s={};for(var g=0;g<c.length;g++)s["$"+c[g]]=!0;for(c=0;c<n.length;c++)g=s.hasOwnProperty("$"+n[c].value),n[c].selected!==g&&(n[c].selected=g),g&&d&&(n[c].defaultSelected=!0)}else{for(c=""+En(c),s=null,g=0;g<n.length;g++){if(n[g].value===c){n[g].selected=!0,d&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function xm(n,s,c){if(s!=null&&(s=""+En(s),s!==n.value&&(n.value=s),c==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=c!=null?""+En(c):""}function wm(n,s,c,d){if(s==null){if(d!=null){if(c!=null)throw Error(i(92));if(nt(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),s=c}c=En(s),n.defaultValue=c,d=n.textContent,d===c&&d!==""&&d!==null&&(n.value=d),fu(n)}function va(n,s){if(s){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=s;return}}n.textContent=s}var Uv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sm(n,s,c){var d=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":d?n.setProperty(s,c):typeof c!="number"||c===0||Uv.has(s)?s==="float"?n.cssFloat=c:n[s]=(""+c).trim():n[s]=c+"px"}function Am(n,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var g in s)d=s[g],s.hasOwnProperty(g)&&c[g]!==d&&Sm(n,g,d)}else for(var y in s)s.hasOwnProperty(y)&&Sm(n,y,s[y])}function gu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jl(n){return jv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Sr(){}var bu=null;function vu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ya=null,xa=null;function _m(n){var s=Jt(n);if(s&&(n=s.stateNode)){var c=n[Ii]||null;t:switch(n=s.stateNode,s.type){case"input":if(mu(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Tn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==n&&d.form===n.form){var g=d[Ii]||null;if(!g)throw Error(i(90));mu(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<c.length;s++)d=c[s],d.form===n.form&&vm(d)}break t;case"textarea":xm(n,c.value,c.defaultValue);break t;case"select":s=c.value,s!=null&&ba(n,!!c.multiple,s,!1)}}}var yu=!1;function km(n,s,c){if(yu)return n(s,c);yu=!0;try{var d=n(s);return d}finally{if(yu=!1,(ya!==null||xa!==null)&&(Uc(),ya&&(s=ya,n=xa,xa=ya=null,_m(s),n)))for(s=0;s<n.length;s++)_m(n[s])}}function xo(n,s){var c=n.stateNode;if(c===null)return null;var d=c[Ii]||null;if(d===null)return null;c=d[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break t;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xu=!1;if(Ar)try{var wo={};Object.defineProperty(wo,"passive",{get:function(){xu=!0}}),window.addEventListener("test",wo,wo),window.removeEventListener("test",wo,wo)}catch{xu=!1}var ts=null,wu=null,tc=null;function Em(){if(tc)return tc;var n,s=wu,c=s.length,d,g="value"in ts?ts.value:ts.textContent,y=g.length;for(n=0;n<c&&s[n]===g[n];n++);var T=c-n;for(d=1;d<=T&&s[c-d]===g[y-d];d++);return tc=g.slice(n,1<d?1-d:void 0)}function ec(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ic(){return!0}function Tm(){return!1}function tn(n){function s(c,d,g,y,T){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var L in n)n.hasOwnProperty(L)&&(c=n[L],this[L]=c?c(y):y[L]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ic:Tm,this.isPropagationStopped=Tm,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ic)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ic)},persist:function(){},isPersistent:ic}),s}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nc=tn(Ps),So=p({},Ps,{view:0,detail:0}),Gv=tn(So),Su,Au,Ao,rc=p({},So,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ku,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ao&&(Ao&&n.type==="mousemove"?(Su=n.screenX-Ao.screenX,Au=n.screenY-Ao.screenY):Au=Su=0,Ao=n),Su)},movementY:function(n){return"movementY"in n?n.movementY:Au}}),Cm=tn(rc),qv=p({},rc,{dataTransfer:0}),$v=tn(qv),Vv=p({},So,{relatedTarget:0}),_u=tn(Vv),Yv=p({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),Xv=tn(Yv),Kv=p({},Ps,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Zv=tn(Kv),Wv=p({},Ps,{data:0}),Mm=tn(Wv),Qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e3(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=t3[n])?!!s[n]:!1}function ku(){return e3}var i3=p({},So,{key:function(n){if(n.key){var s=Qv[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ec(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Jv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ku,charCode:function(n){return n.type==="keypress"?ec(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ec(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),n3=tn(i3),r3=p({},rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rm=tn(r3),s3=p({},So,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ku}),a3=tn(s3),o3=p({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),l3=tn(o3),c3=p({},rc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),u3=tn(c3),h3=p({},Ps,{newState:0,oldState:0}),d3=tn(h3),f3=[9,13,27,32],Eu=Ar&&"CompositionEvent"in window,_o=null;Ar&&"documentMode"in document&&(_o=document.documentMode);var m3=Ar&&"TextEvent"in window&&!_o,Dm=Ar&&(!Eu||_o&&8<_o&&11>=_o),Nm=" ",Om=!1;function zm(n,s){switch(n){case"keyup":return f3.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var wa=!1;function p3(n,s){switch(n){case"compositionend":return Lm(s);case"keypress":return s.which!==32?null:(Om=!0,Nm);case"textInput":return n=s.data,n===Nm&&Om?null:n;default:return null}}function g3(n,s){if(wa)return n==="compositionend"||!Eu&&zm(n,s)?(n=Em(),tc=wu=ts=null,wa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Dm&&s.locale!=="ko"?null:s.data;default:return null}}var b3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!b3[n.type]:s==="textarea"}function Im(n,s,c,d){ya?xa?xa.push(d):xa=[d]:ya=d,s=Yc(s,"onChange"),0<s.length&&(c=new nc("onChange","change",null,c,d),n.push({event:c,listeners:s}))}var ko=null,Eo=null;function v3(n){yg(n,0)}function sc(n){var s=Te(n);if(vm(s))return n}function Fm(n,s){if(n==="change")return s}var Pm=!1;if(Ar){var Tu;if(Ar){var Cu="oninput"in document;if(!Cu){var Um=document.createElement("div");Um.setAttribute("oninput","return;"),Cu=typeof Um.oninput=="function"}Tu=Cu}else Tu=!1;Pm=Tu&&(!document.documentMode||9<document.documentMode)}function Hm(){ko&&(ko.detachEvent("onpropertychange",jm),Eo=ko=null)}function jm(n){if(n.propertyName==="value"&&sc(Eo)){var s=[];Im(s,Eo,n,vu(n)),km(v3,s)}}function y3(n,s,c){n==="focusin"?(Hm(),ko=s,Eo=c,ko.attachEvent("onpropertychange",jm)):n==="focusout"&&Hm()}function x3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sc(Eo)}function w3(n,s){if(n==="click")return sc(s)}function S3(n,s){if(n==="input"||n==="change")return sc(s)}function A3(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var fn=typeof Object.is=="function"?Object.is:A3;function To(n,s){if(fn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var c=Object.keys(n),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!J.call(s,g)||!fn(n[g],s[g]))return!1}return!0}function Gm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function qm(n,s){var c=Gm(n);n=0;for(var d;c;){if(c.nodeType===3){if(d=n+c.textContent.length,n<=s&&d>=s)return{node:c,offset:s-n};n=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Gm(c)}}function $m(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?$m(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Vm(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Ql(n.document);s instanceof n.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)n=s.contentWindow;else break;s=Ql(n.document)}return s}function Mu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var _3=Ar&&"documentMode"in document&&11>=document.documentMode,Sa=null,Ru=null,Co=null,Du=!1;function Ym(n,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Du||Sa==null||Sa!==Ql(d)||(d=Sa,"selectionStart"in d&&Mu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Co&&To(Co,d)||(Co=d,d=Yc(Ru,"onSelect"),0<d.length&&(s=new nc("onSelect","select",null,s,c),n.push({event:s,listeners:d}),s.target=Sa)))}function Us(n,s){var c={};return c[n.toLowerCase()]=s.toLowerCase(),c["Webkit"+n]="webkit"+s,c["Moz"+n]="moz"+s,c}var Aa={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},Nu={},Xm={};Ar&&(Xm=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);function Hs(n){if(Nu[n])return Nu[n];if(!Aa[n])return n;var s=Aa[n],c;for(c in s)if(s.hasOwnProperty(c)&&c in Xm)return Nu[n]=s[c];return n}var Km=Hs("animationend"),Zm=Hs("animationiteration"),Wm=Hs("animationstart"),k3=Hs("transitionrun"),E3=Hs("transitionstart"),T3=Hs("transitioncancel"),Qm=Hs("transitionend"),Jm=new Map,Ou="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ou.push("scrollEnd");function qn(n,s){Jm.set(n,s),Qn(s,[n])}var ac=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Cn=[],_a=0,zu=0;function oc(){for(var n=_a,s=zu=_a=0;s<n;){var c=Cn[s];Cn[s++]=null;var d=Cn[s];Cn[s++]=null;var g=Cn[s];Cn[s++]=null;var y=Cn[s];if(Cn[s++]=null,d!==null&&g!==null){var T=d.pending;T===null?g.next=g:(g.next=T.next,T.next=g),d.pending=g}y!==0&&tp(c,g,y)}}function lc(n,s,c,d){Cn[_a++]=n,Cn[_a++]=s,Cn[_a++]=c,Cn[_a++]=d,zu|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function Lu(n,s,c,d){return lc(n,s,c,d),cc(n)}function js(n,s){return lc(n,null,null,s),cc(n)}function tp(n,s,c){n.lanes|=c;var d=n.alternate;d!==null&&(d.lanes|=c);for(var g=!1,y=n.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,g&&s!==null&&(g=31-He(c),n=y.hiddenUpdates,d=n[g],d===null?n[g]=[s]:d.push(s),s.lane=c|536870912),y):null}function cc(n){if(50<Zo)throw Zo=0,qh=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ka={};function C3(n,s,c,d){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(n,s,c,d){return new C3(n,s,c,d)}function Bu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _r(n,s){var c=n.alternate;return c===null?(c=mn(n.tag,s,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=s,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,s=n.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function ep(n,s){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,s=c.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function uc(n,s,c,d,g,y){var T=0;if(d=n,typeof n=="function")Bu(n)&&(T=1);else if(typeof n=="string")T=Oy(n,c,ht.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case j:return n=mn(31,c,s,g),n.elementType=j,n.lanes=y,n;case x:return Gs(c.children,g,y,s);case _:T=8,g|=24;break;case A:return n=mn(12,c,s,g|2),n.elementType=A,n.lanes=y,n;case D:return n=mn(13,c,s,g),n.elementType=D,n.lanes=y,n;case F:return n=mn(19,c,s,g),n.elementType=F,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:T=10;break t;case E:T=9;break t;case N:T=11;break t;case B:T=14;break t;case Y:T=16,d=null;break t}T=29,c=Error(i(130,n===null?"null":typeof n,"")),d=null}return s=mn(T,c,s,g),s.elementType=n,s.type=d,s.lanes=y,s}function Gs(n,s,c,d){return n=mn(7,n,d,s),n.lanes=c,n}function Iu(n,s,c){return n=mn(6,n,null,s),n.lanes=c,n}function ip(n){var s=mn(18,null,null,0);return s.stateNode=n,s}function Fu(n,s,c){return s=mn(4,n.children!==null?n.children:[],n.key,s),s.lanes=c,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var np=new WeakMap;function Mn(n,s){if(typeof n=="object"&&n!==null){var c=np.get(n);return c!==void 0?c:(s={value:n,source:s,stack:U(s)},np.set(n,s),s)}return{value:n,source:s,stack:U(s)}}var Ea=[],Ta=0,hc=null,Mo=0,Rn=[],Dn=0,es=null,Jn=1,tr="";function kr(n,s){Ea[Ta++]=Mo,Ea[Ta++]=hc,hc=n,Mo=s}function rp(n,s,c){Rn[Dn++]=Jn,Rn[Dn++]=tr,Rn[Dn++]=es,es=n;var d=Jn;n=tr;var g=32-He(d)-1;d&=~(1<<g),c+=1;var y=32-He(s)+g;if(30<y){var T=g-g%5;y=(d&(1<<T)-1).toString(32),d>>=T,g-=T,Jn=1<<32-He(s)+g|c<<g|d,tr=y+n}else Jn=1<<y|c<<g|d,tr=n}function Pu(n){n.return!==null&&(kr(n,1),rp(n,1,0))}function Uu(n){for(;n===hc;)hc=Ea[--Ta],Ea[Ta]=null,Mo=Ea[--Ta],Ea[Ta]=null;for(;n===es;)es=Rn[--Dn],Rn[Dn]=null,tr=Rn[--Dn],Rn[Dn]=null,Jn=Rn[--Dn],Rn[Dn]=null}function sp(n,s){Rn[Dn++]=Jn,Rn[Dn++]=tr,Rn[Dn++]=es,Jn=s.id,tr=s.overflow,es=n}var Ci=null,Ve=null,Se=!1,is=null,Nn=!1,Hu=Error(i(519));function ns(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ro(Mn(s,n)),Hu}function ap(n){var s=n.stateNode,c=n.type,d=n.memoizedProps;switch(s[mi]=n,s[Ii]=d,c){case"dialog":be("cancel",s),be("close",s);break;case"iframe":case"object":case"embed":be("load",s);break;case"video":case"audio":for(c=0;c<Qo.length;c++)be(Qo[c],s);break;case"source":be("error",s);break;case"img":case"image":case"link":be("error",s),be("load",s);break;case"details":be("toggle",s);break;case"input":be("invalid",s),ym(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":be("invalid",s);break;case"textarea":be("invalid",s),wm(s,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||d.suppressHydrationWarning===!0||Ag(s.textContent,c)?(d.popover!=null&&(be("beforetoggle",s),be("toggle",s)),d.onScroll!=null&&be("scroll",s),d.onScrollEnd!=null&&be("scrollend",s),d.onClick!=null&&(s.onclick=Sr),s=!0):s=!1,s||ns(n,!0)}function op(n){for(Ci=n.return;Ci;)switch(Ci.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Ci=Ci.return}}function Ca(n){if(n!==Ci)return!1;if(!Se)return op(n),Se=!0,!1;var s=n.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||sd(n.type,n.memoizedProps)),c=!c),c&&Ve&&ns(n),op(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ve=Ng(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ve=Ng(n)}else s===27?(s=Ve,bs(n.type)?(n=ud,ud=null,Ve=n):Ve=s):Ve=Ci?zn(n.stateNode.nextSibling):null;return!0}function qs(){Ve=Ci=null,Se=!1}function ju(){var n=is;return n!==null&&(sn===null?sn=n:sn.push.apply(sn,n),is=null),n}function Ro(n){is===null?is=[n]:is.push(n)}var Gu=z(null),$s=null,Er=null;function rs(n,s,c){at(Gu,s._currentValue),s._currentValue=c}function Tr(n){n._currentValue=Gu.current,P(Gu)}function qu(n,s,c){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===c)break;n=n.return}}function $u(n,s,c,d){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var T=g.child;y=y.firstContext;t:for(;y!==null;){var L=y;y=g;for(var K=0;K<s.length;K++)if(L.context===s[K]){y.lanes|=c,L=y.alternate,L!==null&&(L.lanes|=c),qu(y.return,c,n),d||(T=null);break t}y=L.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(i(341));T.lanes|=c,y=T.alternate,y!==null&&(y.lanes|=c),qu(T,c,n),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===n){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function Ma(n,s,c,d){n=null;for(var g=s,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var L=g.type;fn(g.pendingProps.value,T.value)||(n!==null?n.push(L):n=[L])}}else if(g===Lt.current){if(T=g.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(nl):n=[nl])}g=g.return}n!==null&&$u(s,n,c,d),s.flags|=262144}function dc(n){for(n=n.firstContext;n!==null;){if(!fn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Vs(n){$s=n,Er=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Mi(n){return lp($s,n)}function fc(n,s){return $s===null&&Vs(n),lp(n,s)}function lp(n,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Er===null){if(n===null)throw Error(i(308));Er=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Er=Er.next=s;return c}var M3=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(c,d){n.push(d)}};this.abort=function(){s.aborted=!0,n.forEach(function(c){return c()})}},R3=l.unstable_scheduleCallback,D3=l.unstable_NormalPriority,pi={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vu(){return{controller:new M3,data:new Map,refCount:0}}function Do(n){n.refCount--,n.refCount===0&&R3(D3,function(){n.controller.abort()})}var No=null,Yu=0,Ra=0,Da=null;function N3(n,s){if(No===null){var c=No=[];Yu=0,Ra=Zh(),Da={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Yu++,s.then(cp,cp),s}function cp(){if(--Yu===0&&No!==null){Da!==null&&(Da.status="fulfilled");var n=No;No=null,Ra=0,Da=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function O3(n,s){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return n.then(function(){d.status="fulfilled",d.value=s;for(var g=0;g<c.length;g++)(0,c[g])(s)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var up=$.S;$.S=function(n,s){Y1=Ot(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&N3(n,s),up!==null&&up(n,s)};var Ys=z(null);function Xu(){var n=Ys.current;return n!==null?n:je.pooledCache}function mc(n,s){s===null?at(Ys,Ys.current):at(Ys,s.pool)}function hp(){var n=Xu();return n===null?null:{parent:pi._currentValue,pool:n}}var Na=Error(i(460)),Ku=Error(i(474)),pc=Error(i(542)),gc={then:function(){}};function dp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function fp(n,s,c){switch(c=n[c],c===void 0?n.push(s):c!==s&&(s.then(Sr,Sr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,pp(n),n;default:if(typeof s.status=="string")s.then(Sr,Sr);else{if(n=je,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(d){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=d}},function(d){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,pp(n),n}throw Ks=s,Na}}function Xs(n){try{var s=n._init;return s(n._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ks=c,Na):c}}var Ks=null;function mp(){if(Ks===null)throw Error(i(459));var n=Ks;return Ks=null,n}function pp(n){if(n===Na||n===pc)throw Error(i(483))}var Oa=null,Oo=0;function bc(n){var s=Oo;return Oo+=1,Oa===null&&(Oa=[]),fp(Oa,n,s)}function zo(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function vc(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function gp(n){function s(tt,W){if(n){var rt=tt.deletions;rt===null?(tt.deletions=[W],tt.flags|=16):rt.push(W)}}function c(tt,W){if(!n)return null;for(;W!==null;)s(tt,W),W=W.sibling;return null}function d(tt){for(var W=new Map;tt!==null;)tt.key!==null?W.set(tt.key,tt):W.set(tt.index,tt),tt=tt.sibling;return W}function g(tt,W){return tt=_r(tt,W),tt.index=0,tt.sibling=null,tt}function y(tt,W,rt){return tt.index=rt,n?(rt=tt.alternate,rt!==null?(rt=rt.index,rt<W?(tt.flags|=67108866,W):rt):(tt.flags|=67108866,W)):(tt.flags|=1048576,W)}function T(tt){return n&&tt.alternate===null&&(tt.flags|=67108866),tt}function L(tt,W,rt,St){return W===null||W.tag!==6?(W=Iu(rt,tt.mode,St),W.return=tt,W):(W=g(W,rt),W.return=tt,W)}function K(tt,W,rt,St){var Wt=rt.type;return Wt===x?yt(tt,W,rt.props.children,St,rt.key):W!==null&&(W.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===Y&&Xs(Wt)===W.type)?(W=g(W,rt.props),zo(W,rt),W.return=tt,W):(W=uc(rt.type,rt.key,rt.props,null,tt.mode,St),zo(W,rt),W.return=tt,W)}function ot(tt,W,rt,St){return W===null||W.tag!==4||W.stateNode.containerInfo!==rt.containerInfo||W.stateNode.implementation!==rt.implementation?(W=Fu(rt,tt.mode,St),W.return=tt,W):(W=g(W,rt.children||[]),W.return=tt,W)}function yt(tt,W,rt,St,Wt){return W===null||W.tag!==7?(W=Gs(rt,tt.mode,St,Wt),W.return=tt,W):(W=g(W,rt),W.return=tt,W)}function At(tt,W,rt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Iu(""+W,tt.mode,rt),W.return=tt,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return rt=uc(W.type,W.key,W.props,null,tt.mode,rt),zo(rt,W),rt.return=tt,rt;case w:return W=Fu(W,tt.mode,rt),W.return=tt,W;case Y:return W=Xs(W),At(tt,W,rt)}if(nt(W)||H(W))return W=Gs(W,tt.mode,rt,null),W.return=tt,W;if(typeof W.then=="function")return At(tt,bc(W),rt);if(W.$$typeof===C)return At(tt,fc(tt,W),rt);vc(tt,W)}return null}function ct(tt,W,rt,St){var Wt=W!==null?W.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return Wt!==null?null:L(tt,W,""+rt,St);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case v:return rt.key===Wt?K(tt,W,rt,St):null;case w:return rt.key===Wt?ot(tt,W,rt,St):null;case Y:return rt=Xs(rt),ct(tt,W,rt,St)}if(nt(rt)||H(rt))return Wt!==null?null:yt(tt,W,rt,St,null);if(typeof rt.then=="function")return ct(tt,W,bc(rt),St);if(rt.$$typeof===C)return ct(tt,W,fc(tt,rt),St);vc(tt,rt)}return null}function bt(tt,W,rt,St,Wt){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return tt=tt.get(rt)||null,L(W,tt,""+St,Wt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case v:return tt=tt.get(St.key===null?rt:St.key)||null,K(W,tt,St,Wt);case w:return tt=tt.get(St.key===null?rt:St.key)||null,ot(W,tt,St,Wt);case Y:return St=Xs(St),bt(tt,W,rt,St,Wt)}if(nt(St)||H(St))return tt=tt.get(rt)||null,yt(W,tt,St,Wt,null);if(typeof St.then=="function")return bt(tt,W,rt,bc(St),Wt);if(St.$$typeof===C)return bt(tt,W,rt,fc(W,St),Wt);vc(W,St)}return null}function qt(tt,W,rt,St){for(var Wt=null,Ce=null,Yt=W,he=W=0,ye=null;Yt!==null&&he<rt.length;he++){Yt.index>he?(ye=Yt,Yt=null):ye=Yt.sibling;var Me=ct(tt,Yt,rt[he],St);if(Me===null){Yt===null&&(Yt=ye);break}n&&Yt&&Me.alternate===null&&s(tt,Yt),W=y(Me,W,he),Ce===null?Wt=Me:Ce.sibling=Me,Ce=Me,Yt=ye}if(he===rt.length)return c(tt,Yt),Se&&kr(tt,he),Wt;if(Yt===null){for(;he<rt.length;he++)Yt=At(tt,rt[he],St),Yt!==null&&(W=y(Yt,W,he),Ce===null?Wt=Yt:Ce.sibling=Yt,Ce=Yt);return Se&&kr(tt,he),Wt}for(Yt=d(Yt);he<rt.length;he++)ye=bt(Yt,tt,he,rt[he],St),ye!==null&&(n&&ye.alternate!==null&&Yt.delete(ye.key===null?he:ye.key),W=y(ye,W,he),Ce===null?Wt=ye:Ce.sibling=ye,Ce=ye);return n&&Yt.forEach(function(Ss){return s(tt,Ss)}),Se&&kr(tt,he),Wt}function ie(tt,W,rt,St){if(rt==null)throw Error(i(151));for(var Wt=null,Ce=null,Yt=W,he=W=0,ye=null,Me=rt.next();Yt!==null&&!Me.done;he++,Me=rt.next()){Yt.index>he?(ye=Yt,Yt=null):ye=Yt.sibling;var Ss=ct(tt,Yt,Me.value,St);if(Ss===null){Yt===null&&(Yt=ye);break}n&&Yt&&Ss.alternate===null&&s(tt,Yt),W=y(Ss,W,he),Ce===null?Wt=Ss:Ce.sibling=Ss,Ce=Ss,Yt=ye}if(Me.done)return c(tt,Yt),Se&&kr(tt,he),Wt;if(Yt===null){for(;!Me.done;he++,Me=rt.next())Me=At(tt,Me.value,St),Me!==null&&(W=y(Me,W,he),Ce===null?Wt=Me:Ce.sibling=Me,Ce=Me);return Se&&kr(tt,he),Wt}for(Yt=d(Yt);!Me.done;he++,Me=rt.next())Me=bt(Yt,tt,he,Me.value,St),Me!==null&&(n&&Me.alternate!==null&&Yt.delete(Me.key===null?he:Me.key),W=y(Me,W,he),Ce===null?Wt=Me:Ce.sibling=Me,Ce=Me);return n&&Yt.forEach(function(qy){return s(tt,qy)}),Se&&kr(tt,he),Wt}function Pe(tt,W,rt,St){if(typeof rt=="object"&&rt!==null&&rt.type===x&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case v:t:{for(var Wt=rt.key;W!==null;){if(W.key===Wt){if(Wt=rt.type,Wt===x){if(W.tag===7){c(tt,W.sibling),St=g(W,rt.props.children),St.return=tt,tt=St;break t}}else if(W.elementType===Wt||typeof Wt=="object"&&Wt!==null&&Wt.$$typeof===Y&&Xs(Wt)===W.type){c(tt,W.sibling),St=g(W,rt.props),zo(St,rt),St.return=tt,tt=St;break t}c(tt,W);break}else s(tt,W);W=W.sibling}rt.type===x?(St=Gs(rt.props.children,tt.mode,St,rt.key),St.return=tt,tt=St):(St=uc(rt.type,rt.key,rt.props,null,tt.mode,St),zo(St,rt),St.return=tt,tt=St)}return T(tt);case w:t:{for(Wt=rt.key;W!==null;){if(W.key===Wt)if(W.tag===4&&W.stateNode.containerInfo===rt.containerInfo&&W.stateNode.implementation===rt.implementation){c(tt,W.sibling),St=g(W,rt.children||[]),St.return=tt,tt=St;break t}else{c(tt,W);break}else s(tt,W);W=W.sibling}St=Fu(rt,tt.mode,St),St.return=tt,tt=St}return T(tt);case Y:return rt=Xs(rt),Pe(tt,W,rt,St)}if(nt(rt))return qt(tt,W,rt,St);if(H(rt)){if(Wt=H(rt),typeof Wt!="function")throw Error(i(150));return rt=Wt.call(rt),ie(tt,W,rt,St)}if(typeof rt.then=="function")return Pe(tt,W,bc(rt),St);if(rt.$$typeof===C)return Pe(tt,W,fc(tt,rt),St);vc(tt,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,W!==null&&W.tag===6?(c(tt,W.sibling),St=g(W,rt),St.return=tt,tt=St):(c(tt,W),St=Iu(rt,tt.mode,St),St.return=tt,tt=St),T(tt)):c(tt,W)}return function(tt,W,rt,St){try{Oo=0;var Wt=Pe(tt,W,rt,St);return Oa=null,Wt}catch(Yt){if(Yt===Na||Yt===pc)throw Yt;var Ce=mn(29,Yt,null,tt.mode);return Ce.lanes=St,Ce.return=tt,Ce}finally{}}}var Zs=gp(!0),bp=gp(!1),ss=!1;function Zu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wu(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function as(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function os(n,s,c){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Oe&2)!==0){var g=d.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),d.pending=s,s=cc(n),tp(n,null,c),s}return lc(n,d,s,c),cc(n)}function Lo(n,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var d=s.lanes;d&=n.pendingLanes,c|=d,s.lanes=c,Xl(n,c)}}function Qu(n,s){var c=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=T:y=y.next=T,c=c.next}while(c!==null);y===null?g=y=s:y=y.next=s}else g=y=s;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=s:n.next=s,c.lastBaseUpdate=s}var Ju=!1;function Bo(){if(Ju){var n=Da;if(n!==null)throw n}}function Io(n,s,c,d){Ju=!1;var g=n.updateQueue;ss=!1;var y=g.firstBaseUpdate,T=g.lastBaseUpdate,L=g.shared.pending;if(L!==null){g.shared.pending=null;var K=L,ot=K.next;K.next=null,T===null?y=ot:T.next=ot,T=K;var yt=n.alternate;yt!==null&&(yt=yt.updateQueue,L=yt.lastBaseUpdate,L!==T&&(L===null?yt.firstBaseUpdate=ot:L.next=ot,yt.lastBaseUpdate=K))}if(y!==null){var At=g.baseState;T=0,yt=ot=K=null,L=y;do{var ct=L.lane&-536870913,bt=ct!==L.lane;if(bt?(ve&ct)===ct:(d&ct)===ct){ct!==0&&ct===Ra&&(Ju=!0),yt!==null&&(yt=yt.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});t:{var qt=n,ie=L;ct=s;var Pe=c;switch(ie.tag){case 1:if(qt=ie.payload,typeof qt=="function"){At=qt.call(Pe,At,ct);break t}At=qt;break t;case 3:qt.flags=qt.flags&-65537|128;case 0:if(qt=ie.payload,ct=typeof qt=="function"?qt.call(Pe,At,ct):qt,ct==null)break t;At=p({},At,ct);break t;case 2:ss=!0}}ct=L.callback,ct!==null&&(n.flags|=64,bt&&(n.flags|=8192),bt=g.callbacks,bt===null?g.callbacks=[ct]:bt.push(ct))}else bt={lane:ct,tag:L.tag,payload:L.payload,callback:L.callback,next:null},yt===null?(ot=yt=bt,K=At):yt=yt.next=bt,T|=ct;if(L=L.next,L===null){if(L=g.shared.pending,L===null)break;bt=L,L=bt.next,bt.next=null,g.lastBaseUpdate=bt,g.shared.pending=null}}while(!0);yt===null&&(K=At),g.baseState=K,g.firstBaseUpdate=ot,g.lastBaseUpdate=yt,y===null&&(g.shared.lanes=0),ds|=T,n.lanes=T,n.memoizedState=At}}function vp(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function yp(n,s){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)vp(c[n],s)}var za=z(null),yc=z(0);function xp(n,s){n=Br,at(yc,n),at(za,s),Br=n|s.baseLanes}function th(){at(yc,Br),at(za,za.current)}function eh(){Br=yc.current,P(za),P(yc)}var pn=z(null),On=null;function ls(n){var s=n.alternate;at(ci,ci.current&1),at(pn,n),On===null&&(s===null||za.current!==null||s.memoizedState!==null)&&(On=n)}function ih(n){at(ci,ci.current),at(pn,n),On===null&&(On=n)}function wp(n){n.tag===22?(at(ci,ci.current),at(pn,n),On===null&&(On=n)):cs()}function cs(){at(ci,ci.current),at(pn,pn.current)}function gn(n){P(pn),On===n&&(On=null),P(ci)}var ci=z(0);function xc(n){for(var s=n;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||ld(c)||cd(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Cr=0,ue=null,Ie=null,gi=null,wc=!1,La=!1,Ws=!1,Sc=0,Fo=0,Ba=null,z3=0;function ni(){throw Error(i(321))}function nh(n,s){if(s===null)return!1;for(var c=0;c<s.length&&c<n.length;c++)if(!fn(n[c],s[c]))return!1;return!0}function rh(n,s,c,d,g,y){return Cr=y,ue=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=n===null||n.memoizedState===null?r1:yh,Ws=!1,y=c(d,g),Ws=!1,La&&(y=Ap(s,c,d,g)),Sp(n),y}function Sp(n){$.H=Ho;var s=Ie!==null&&Ie.next!==null;if(Cr=0,gi=Ie=ue=null,wc=!1,Fo=0,Ba=null,s)throw Error(i(300));n===null||bi||(n=n.dependencies,n!==null&&dc(n)&&(bi=!0))}function Ap(n,s,c,d){ue=n;var g=0;do{if(La&&(Ba=null),Fo=0,La=!1,25<=g)throw Error(i(301));if(g+=1,gi=Ie=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}$.H=s1,y=s(c,d)}while(La);return y}function L3(){var n=$.H,s=n.useState()[0];return s=typeof s.then=="function"?Po(s):s,n=n.useState()[0],(Ie!==null?Ie.memoizedState:null)!==n&&(ue.flags|=1024),s}function sh(){var n=Sc!==0;return Sc=0,n}function ah(n,s,c){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~c}function oh(n){if(wc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}wc=!1}Cr=0,gi=Ie=ue=null,La=!1,Fo=Sc=0,Ba=null}function Hi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?ue.memoizedState=gi=n:gi=gi.next=n,gi}function ui(){if(Ie===null){var n=ue.alternate;n=n!==null?n.memoizedState:null}else n=Ie.next;var s=gi===null?ue.memoizedState:gi.next;if(s!==null)gi=s,Ie=n;else{if(n===null)throw ue.alternate===null?Error(i(467)):Error(i(310));Ie=n,n={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},gi===null?ue.memoizedState=gi=n:gi=gi.next=n}return gi}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Po(n){var s=Fo;return Fo+=1,Ba===null&&(Ba=[]),n=fp(Ba,n,s),s=ue,(gi===null?s.memoizedState:gi.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?r1:yh),n}function _c(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Po(n);if(n.$$typeof===C)return Mi(n)}throw Error(i(438,String(n)))}function lh(n){var s=null,c=ue.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var d=ue.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Ac(),ue.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(n),d=0;d<n;d++)c[d]=et;return s.index++,c}function Mr(n,s){return typeof s=="function"?s(n):s}function kc(n){var s=ui();return ch(s,Ie,n)}function ch(n,s,c){var d=n.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var g=n.baseQueue,y=d.pending;if(y!==null){if(g!==null){var T=g.next;g.next=y.next,y.next=T}s.baseQueue=g=y,d.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{s=g.next;var L=T=null,K=null,ot=s,yt=!1;do{var At=ot.lane&-536870913;if(At!==ot.lane?(ve&At)===At:(Cr&At)===At){var ct=ot.revertLane;if(ct===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),At===Ra&&(yt=!0);else if((Cr&ct)===ct){ot=ot.next,ct===Ra&&(yt=!0);continue}else At={lane:0,revertLane:ot.revertLane,gesture:null,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},K===null?(L=K=At,T=y):K=K.next=At,ue.lanes|=ct,ds|=ct;At=ot.action,Ws&&c(y,At),y=ot.hasEagerState?ot.eagerState:c(y,At)}else ct={lane:At,revertLane:ot.revertLane,gesture:ot.gesture,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},K===null?(L=K=ct,T=y):K=K.next=ct,ue.lanes|=At,ds|=At;ot=ot.next}while(ot!==null&&ot!==s);if(K===null?T=y:K.next=L,!fn(y,n.memoizedState)&&(bi=!0,yt&&(c=Da,c!==null)))throw c;n.memoizedState=y,n.baseState=T,n.baseQueue=K,d.lastRenderedState=y}return g===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function uh(n){var s=ui(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=n;var d=c.dispatch,g=c.pending,y=s.memoizedState;if(g!==null){c.pending=null;var T=g=g.next;do y=n(y,T.action),T=T.next;while(T!==g);fn(y,s.memoizedState)||(bi=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),c.lastRenderedState=y}return[y,d]}function _p(n,s,c){var d=ue,g=ui(),y=Se;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=s();var T=!fn((Ie||g).memoizedState,c);if(T&&(g.memoizedState=c,bi=!0),g=g.queue,fh(Tp.bind(null,d,g,n),[n]),g.getSnapshot!==s||T||gi!==null&&gi.memoizedState.tag&1){if(d.flags|=2048,Ia(9,{destroy:void 0},Ep.bind(null,d,g,c,s),null),je===null)throw Error(i(349));y||(Cr&127)!==0||kp(d,s,c)}return c}function kp(n,s,c){n.flags|=16384,n={getSnapshot:s,value:c},s=ue.updateQueue,s===null?(s=Ac(),ue.updateQueue=s,s.stores=[n]):(c=s.stores,c===null?s.stores=[n]:c.push(n))}function Ep(n,s,c,d){s.value=c,s.getSnapshot=d,Cp(s)&&Mp(n)}function Tp(n,s,c){return c(function(){Cp(s)&&Mp(n)})}function Cp(n){var s=n.getSnapshot;n=n.value;try{var c=s();return!fn(n,c)}catch{return!0}}function Mp(n){var s=js(n,2);s!==null&&an(s,n,2)}function hh(n){var s=Hi();if(typeof n=="function"){var c=n;if(n=c(),Ws){Wi(!0);try{c()}finally{Wi(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:n},s}function Rp(n,s,c,d){return n.baseState=c,ch(n,Ie,typeof d=="function"?d:Mr)}function B3(n,s,c,d,g){if(Cc(n))throw Error(i(485));if(n=s.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};$.T!==null?c(!0):y.isTransition=!1,d(y),c=s.pending,c===null?(y.next=s.pending=y,Dp(s,y)):(y.next=c.next,s.pending=c.next=y)}}function Dp(n,s){var c=s.action,d=s.payload,g=n.state;if(s.isTransition){var y=$.T,T={};$.T=T;try{var L=c(g,d),K=$.S;K!==null&&K(T,L),Np(n,s,L)}catch(ot){dh(n,s,ot)}finally{y!==null&&T.types!==null&&(y.types=T.types),$.T=y}}else try{y=c(g,d),Np(n,s,y)}catch(ot){dh(n,s,ot)}}function Np(n,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Op(n,s,d)},function(d){return dh(n,s,d)}):Op(n,s,c)}function Op(n,s,c){s.status="fulfilled",s.value=c,zp(s),n.state=c,s=n.pending,s!==null&&(c=s.next,c===s?n.pending=null:(c=c.next,s.next=c,Dp(n,c)))}function dh(n,s,c){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=c,zp(s),s=s.next;while(s!==d)}n.action=null}function zp(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Lp(n,s){return s}function Bp(n,s){if(Se){var c=je.formState;if(c!==null){t:{var d=ue;if(Se){if(Ve){e:{for(var g=Ve,y=Nn;g.nodeType!==8;){if(!y){g=null;break e}if(g=zn(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Ve=zn(g.nextSibling),d=g.data==="F!";break t}}ns(d)}d=!1}d&&(s=c[0])}}return c=Hi(),c.memoizedState=c.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:s},c.queue=d,c=e1.bind(null,ue,d),d.dispatch=c,d=hh(!1),y=vh.bind(null,ue,!1,d.queue),d=Hi(),g={state:s,dispatch:null,action:n,pending:null},d.queue=g,c=B3.bind(null,ue,g,y,c),g.dispatch=c,d.memoizedState=n,[s,c,!1]}function Ip(n){var s=ui();return Fp(s,Ie,n)}function Fp(n,s,c){if(s=ch(n,s,Lp)[0],n=kc(Mr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=Po(s)}catch(T){throw T===Na?pc:T}else d=s;s=ui();var g=s.queue,y=g.dispatch;return c!==s.memoizedState&&(ue.flags|=2048,Ia(9,{destroy:void 0},I3.bind(null,g,c),null)),[d,y,n]}function I3(n,s){n.action=s}function Pp(n){var s=ui(),c=Ie;if(c!==null)return Fp(s,c,n);ui(),s=s.memoizedState,c=ui();var d=c.queue.dispatch;return c.memoizedState=n,[s,d,!1]}function Ia(n,s,c,d){return n={tag:n,create:c,deps:d,inst:s,next:null},s=ue.updateQueue,s===null&&(s=Ac(),ue.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=n.next=n:(d=c.next,c.next=n,n.next=d,s.lastEffect=n),n}function Up(){return ui().memoizedState}function Ec(n,s,c,d){var g=Hi();ue.flags|=n,g.memoizedState=Ia(1|s,{destroy:void 0},c,d===void 0?null:d)}function Tc(n,s,c,d){var g=ui();d=d===void 0?null:d;var y=g.memoizedState.inst;Ie!==null&&d!==null&&nh(d,Ie.memoizedState.deps)?g.memoizedState=Ia(s,y,c,d):(ue.flags|=n,g.memoizedState=Ia(1|s,y,c,d))}function Hp(n,s){Ec(8390656,8,n,s)}function fh(n,s){Tc(2048,8,n,s)}function F3(n){ue.flags|=4;var s=ue.updateQueue;if(s===null)s=Ac(),ue.updateQueue=s,s.events=[n];else{var c=s.events;c===null?s.events=[n]:c.push(n)}}function jp(n){var s=ui().memoizedState;return F3({ref:s,nextImpl:n}),function(){if((Oe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Gp(n,s){return Tc(4,2,n,s)}function qp(n,s){return Tc(4,4,n,s)}function $p(n,s){if(typeof s=="function"){n=n();var c=s(n);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Vp(n,s,c){c=c!=null?c.concat([n]):null,Tc(4,4,$p.bind(null,s,n),c)}function mh(){}function Yp(n,s){var c=ui();s=s===void 0?null:s;var d=c.memoizedState;return s!==null&&nh(s,d[1])?d[0]:(c.memoizedState=[n,s],n)}function Xp(n,s){var c=ui();s=s===void 0?null:s;var d=c.memoizedState;if(s!==null&&nh(s,d[1]))return d[0];if(d=n(),Ws){Wi(!0);try{n()}finally{Wi(!1)}}return c.memoizedState=[d,s],d}function ph(n,s,c){return c===void 0||(Cr&1073741824)!==0&&(ve&261930)===0?n.memoizedState=s:(n.memoizedState=c,n=K1(),ue.lanes|=n,ds|=n,c)}function Kp(n,s,c,d){return fn(c,s)?c:za.current!==null?(n=ph(n,c,d),fn(n,s)||(bi=!0),n):(Cr&42)===0||(Cr&1073741824)!==0&&(ve&261930)===0?(bi=!0,n.memoizedState=c):(n=K1(),ue.lanes|=n,ds|=n,s)}function Zp(n,s,c,d,g){var y=X.p;X.p=y!==0&&8>y?y:8;var T=$.T,L={};$.T=L,vh(n,!1,s,c);try{var K=g(),ot=$.S;if(ot!==null&&ot(L,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var yt=O3(K,d);Uo(n,s,yt,yn(n))}else Uo(n,s,d,yn(n))}catch(At){Uo(n,s,{then:function(){},status:"rejected",reason:At},yn())}finally{X.p=y,T!==null&&L.types!==null&&(T.types=L.types),$.T=T}}function P3(){}function gh(n,s,c,d){if(n.tag!==5)throw Error(i(476));var g=Wp(n).queue;Zp(n,g,s,vt,c===null?P3:function(){return Qp(n),c(d)})}function Wp(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:vt,baseState:vt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:vt},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mr,lastRenderedState:c},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Qp(n){var s=Wp(n);s.next===null&&(s=n.alternate.memoizedState),Uo(n,s.next.queue,{},yn())}function bh(){return Mi(nl)}function Jp(){return ui().memoizedState}function t1(){return ui().memoizedState}function U3(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var c=yn();n=as(c);var d=os(s,n,c);d!==null&&(an(d,s,c),Lo(d,s,c)),s={cache:Vu()},n.payload=s;return}s=s.return}}function H3(n,s,c){var d=yn();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Cc(n)?i1(s,c):(c=Lu(n,s,c,d),c!==null&&(an(c,n,d),n1(c,s,d)))}function e1(n,s,c){var d=yn();Uo(n,s,c,d)}function Uo(n,s,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Cc(n))i1(s,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var T=s.lastRenderedState,L=y(T,c);if(g.hasEagerState=!0,g.eagerState=L,fn(L,T))return lc(n,s,g,0),je===null&&oc(),!1}catch{}finally{}if(c=Lu(n,s,g,d),c!==null)return an(c,n,d),n1(c,s,d),!0}return!1}function vh(n,s,c,d){if(d={lane:2,revertLane:Zh(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Cc(n)){if(s)throw Error(i(479))}else s=Lu(n,c,d,2),s!==null&&an(s,n,2)}function Cc(n){var s=n.alternate;return n===ue||s!==null&&s===ue}function i1(n,s){La=wc=!0;var c=n.pending;c===null?s.next=s:(s.next=c.next,c.next=s),n.pending=s}function n1(n,s,c){if((c&4194048)!==0){var d=s.lanes;d&=n.pendingLanes,c|=d,s.lanes=c,Xl(n,c)}}var Ho={readContext:Mi,use:_c,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useLayoutEffect:ni,useInsertionEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useSyncExternalStore:ni,useId:ni,useHostTransitionStatus:ni,useFormState:ni,useActionState:ni,useOptimistic:ni,useMemoCache:ni,useCacheRefresh:ni};Ho.useEffectEvent=ni;var r1={readContext:Mi,use:_c,useCallback:function(n,s){return Hi().memoizedState=[n,s===void 0?null:s],n},useContext:Mi,useEffect:Hp,useImperativeHandle:function(n,s,c){c=c!=null?c.concat([n]):null,Ec(4194308,4,$p.bind(null,s,n),c)},useLayoutEffect:function(n,s){return Ec(4194308,4,n,s)},useInsertionEffect:function(n,s){Ec(4,2,n,s)},useMemo:function(n,s){var c=Hi();s=s===void 0?null:s;var d=n();if(Ws){Wi(!0);try{n()}finally{Wi(!1)}}return c.memoizedState=[d,s],d},useReducer:function(n,s,c){var d=Hi();if(c!==void 0){var g=c(s);if(Ws){Wi(!0);try{c(s)}finally{Wi(!1)}}}else g=s;return d.memoizedState=d.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},d.queue=n,n=n.dispatch=H3.bind(null,ue,n),[d.memoizedState,n]},useRef:function(n){var s=Hi();return n={current:n},s.memoizedState=n},useState:function(n){n=hh(n);var s=n.queue,c=e1.bind(null,ue,s);return s.dispatch=c,[n.memoizedState,c]},useDebugValue:mh,useDeferredValue:function(n,s){var c=Hi();return ph(c,n,s)},useTransition:function(){var n=hh(!1);return n=Zp.bind(null,ue,n.queue,!0,!1),Hi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,c){var d=ue,g=Hi();if(Se){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),je===null)throw Error(i(349));(ve&127)!==0||kp(d,s,c)}g.memoizedState=c;var y={value:c,getSnapshot:s};return g.queue=y,Hp(Tp.bind(null,d,y,n),[n]),d.flags|=2048,Ia(9,{destroy:void 0},Ep.bind(null,d,y,c,s),null),c},useId:function(){var n=Hi(),s=je.identifierPrefix;if(Se){var c=tr,d=Jn;c=(d&~(1<<32-He(d)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Sc++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=z3++,s="_"+s+"r_"+c.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:bh,useFormState:Bp,useActionState:Bp,useOptimistic:function(n){var s=Hi();s.memoizedState=s.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=vh.bind(null,ue,!0,c),c.dispatch=s,[n,s]},useMemoCache:lh,useCacheRefresh:function(){return Hi().memoizedState=U3.bind(null,ue)},useEffectEvent:function(n){var s=Hi(),c={impl:n};return s.memoizedState=c,function(){if((Oe&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},yh={readContext:Mi,use:_c,useCallback:Yp,useContext:Mi,useEffect:fh,useImperativeHandle:Vp,useInsertionEffect:Gp,useLayoutEffect:qp,useMemo:Xp,useReducer:kc,useRef:Up,useState:function(){return kc(Mr)},useDebugValue:mh,useDeferredValue:function(n,s){var c=ui();return Kp(c,Ie.memoizedState,n,s)},useTransition:function(){var n=kc(Mr)[0],s=ui().memoizedState;return[typeof n=="boolean"?n:Po(n),s]},useSyncExternalStore:_p,useId:Jp,useHostTransitionStatus:bh,useFormState:Ip,useActionState:Ip,useOptimistic:function(n,s){var c=ui();return Rp(c,Ie,n,s)},useMemoCache:lh,useCacheRefresh:t1};yh.useEffectEvent=jp;var s1={readContext:Mi,use:_c,useCallback:Yp,useContext:Mi,useEffect:fh,useImperativeHandle:Vp,useInsertionEffect:Gp,useLayoutEffect:qp,useMemo:Xp,useReducer:uh,useRef:Up,useState:function(){return uh(Mr)},useDebugValue:mh,useDeferredValue:function(n,s){var c=ui();return Ie===null?ph(c,n,s):Kp(c,Ie.memoizedState,n,s)},useTransition:function(){var n=uh(Mr)[0],s=ui().memoizedState;return[typeof n=="boolean"?n:Po(n),s]},useSyncExternalStore:_p,useId:Jp,useHostTransitionStatus:bh,useFormState:Pp,useActionState:Pp,useOptimistic:function(n,s){var c=ui();return Ie!==null?Rp(c,Ie,n,s):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:lh,useCacheRefresh:t1};s1.useEffectEvent=jp;function xh(n,s,c,d){s=n.memoizedState,c=c(d,s),c=c==null?s:p({},s,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var wh={enqueueSetState:function(n,s,c){n=n._reactInternals;var d=yn(),g=as(d);g.payload=s,c!=null&&(g.callback=c),s=os(n,g,d),s!==null&&(an(s,n,d),Lo(s,n,d))},enqueueReplaceState:function(n,s,c){n=n._reactInternals;var d=yn(),g=as(d);g.tag=1,g.payload=s,c!=null&&(g.callback=c),s=os(n,g,d),s!==null&&(an(s,n,d),Lo(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var c=yn(),d=as(c);d.tag=2,s!=null&&(d.callback=s),s=os(n,d,c),s!==null&&(an(s,n,c),Lo(s,n,c))}};function a1(n,s,c,d,g,y,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,T):s.prototype&&s.prototype.isPureReactComponent?!To(c,d)||!To(g,y):!0}function o1(n,s,c,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==n&&wh.enqueueReplaceState(s,s.state,null)}function Qs(n,s){var c=s;if("ref"in s){c={};for(var d in s)d!=="ref"&&(c[d]=s[d])}if(n=n.defaultProps){c===s&&(c=p({},c));for(var g in n)c[g]===void 0&&(c[g]=n[g])}return c}function l1(n){ac(n)}function c1(n){console.error(n)}function u1(n){ac(n)}function Mc(n,s){try{var c=n.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function h1(n,s,c){try{var d=n.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Sh(n,s,c){return c=as(c),c.tag=3,c.payload={element:null},c.callback=function(){Mc(n,s)},c}function d1(n){return n=as(n),n.tag=3,n}function f1(n,s,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;n.payload=function(){return g(y)},n.callback=function(){h1(s,c,d)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){h1(s,c,d),typeof g!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var L=d.stack;this.componentDidCatch(d.value,{componentStack:L!==null?L:""})})}function j3(n,s,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=c.alternate,s!==null&&Ma(s,c,g,!0),c=pn.current,c!==null){switch(c.tag){case 31:case 13:return On===null?Hc():c.alternate===null&&ri===0&&(ri=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===gc?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([d]):s.add(d),Yh(n,d,g)),!1;case 22:return c.flags|=65536,d===gc?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([d]):c.add(d)),Yh(n,d,g)),!1}throw Error(i(435,c.tag))}return Yh(n,d,g),Hc(),!1}if(Se)return s=pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,d!==Hu&&(n=Error(i(422),{cause:d}),Ro(Mn(n,c)))):(d!==Hu&&(s=Error(i(423),{cause:d}),Ro(Mn(s,c))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,d=Mn(d,c),g=Sh(n.stateNode,d,g),Qu(n,g),ri!==4&&(ri=2)),!1;var y=Error(i(520),{cause:d});if(y=Mn(y,c),Ko===null?Ko=[y]:Ko.push(y),ri!==4&&(ri=2),s===null)return!0;d=Mn(d,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,n=g&-g,c.lanes|=n,n=Sh(c.stateNode,d,n),Qu(c,n),!1;case 1:if(s=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(fs===null||!fs.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=d1(g),f1(g,n,c,d),Qu(c,g),!1}c=c.return}while(c!==null);return!1}var Ah=Error(i(461)),bi=!1;function Ri(n,s,c,d){s.child=n===null?bp(s,null,c,d):Zs(s,n.child,c,d)}function m1(n,s,c,d,g){c=c.render;var y=s.ref;if("ref"in d){var T={};for(var L in d)L!=="ref"&&(T[L]=d[L])}else T=d;return Vs(s),d=rh(n,s,c,T,y,g),L=sh(),n!==null&&!bi?(ah(n,s,g),Rr(n,s,g)):(Se&&L&&Pu(s),s.flags|=1,Ri(n,s,d,g),s.child)}function p1(n,s,c,d,g){if(n===null){var y=c.type;return typeof y=="function"&&!Bu(y)&&y.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=y,g1(n,s,y,d,g)):(n=uc(c.type,null,d,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!Dh(n,g)){var T=y.memoizedProps;if(c=c.compare,c=c!==null?c:To,c(T,d)&&n.ref===s.ref)return Rr(n,s,g)}return s.flags|=1,n=_r(y,d),n.ref=s.ref,n.return=s,s.child=n}function g1(n,s,c,d,g){if(n!==null){var y=n.memoizedProps;if(To(y,d)&&n.ref===s.ref)if(bi=!1,s.pendingProps=d=y,Dh(n,g))(n.flags&131072)!==0&&(bi=!0);else return s.lanes=n.lanes,Rr(n,s,g)}return _h(n,s,c,d,g)}function b1(n,s,c,d){var g=d.children,y=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,n!==null){for(d=s.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~y}else d=0,s.child=null;return v1(n,s,y,c,d)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&mc(s,y!==null?y.cachePool:null),y!==null?xp(s,y):th(),wp(s);else return d=s.lanes=536870912,v1(n,s,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(mc(s,y.cachePool),xp(s,y),cs(),s.memoizedState=null):(n!==null&&mc(s,null),th(),cs());return Ri(n,s,g,c),s.child}function jo(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function v1(n,s,c,d,g){var y=Xu();return y=y===null?null:{parent:pi._currentValue,pool:y},s.memoizedState={baseLanes:c,cachePool:y},n!==null&&mc(s,null),th(),wp(s),n!==null&&Ma(n,s,d,!0),s.childLanes=g,null}function Rc(n,s){return s=Nc({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function y1(n,s,c){return Zs(s,n.child,null,c),n=Rc(s,s.pendingProps),n.flags|=2,gn(s),s.memoizedState=null,n}function G3(n,s,c){var d=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Se){if(d.mode==="hidden")return n=Rc(s,d),s.lanes=536870912,jo(null,n);if(ih(s),(n=Ve)?(n=Dg(n,Nn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:es!==null?{id:Jn,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},c=ip(n),c.return=s,s.child=c,Ci=s,Ve=null)):n=null,n===null)throw ns(s);return s.lanes=536870912,null}return Rc(s,d)}var y=n.memoizedState;if(y!==null){var T=y.dehydrated;if(ih(s),g)if(s.flags&256)s.flags&=-257,s=y1(n,s,c);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(bi||Ma(n,s,c,!1),g=(c&n.childLanes)!==0,bi||g){if(d=je,d!==null&&(T=Kl(d,c),T!==0&&T!==y.retryLane))throw y.retryLane=T,js(n,T),an(d,n,T),Ah;Hc(),s=y1(n,s,c)}else n=y.treeContext,Ve=zn(T.nextSibling),Ci=s,Se=!0,is=null,Nn=!1,n!==null&&sp(s,n),s=Rc(s,d),s.flags|=4096;return s}return n=_r(n.child,{mode:d.mode,children:d.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Dc(n,s){var c=s.ref;if(c===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(n===null||n.ref!==c)&&(s.flags|=4194816)}}function _h(n,s,c,d,g){return Vs(s),c=rh(n,s,c,d,void 0,g),d=sh(),n!==null&&!bi?(ah(n,s,g),Rr(n,s,g)):(Se&&d&&Pu(s),s.flags|=1,Ri(n,s,c,g),s.child)}function x1(n,s,c,d,g,y){return Vs(s),s.updateQueue=null,c=Ap(s,d,c,g),Sp(n),d=sh(),n!==null&&!bi?(ah(n,s,y),Rr(n,s,y)):(Se&&d&&Pu(s),s.flags|=1,Ri(n,s,c,y),s.child)}function w1(n,s,c,d,g){if(Vs(s),s.stateNode===null){var y=ka,T=c.contextType;typeof T=="object"&&T!==null&&(y=Mi(T)),y=new c(d,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=wh,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=d,y.state=s.memoizedState,y.refs={},Zu(s),T=c.contextType,y.context=typeof T=="object"&&T!==null?Mi(T):ka,y.state=s.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(xh(s,c,T,d),y.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&wh.enqueueReplaceState(y,y.state,null),Io(s,d,y,g),Bo(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(n===null){y=s.stateNode;var L=s.memoizedProps,K=Qs(c,L);y.props=K;var ot=y.context,yt=c.contextType;T=ka,typeof yt=="object"&&yt!==null&&(T=Mi(yt));var At=c.getDerivedStateFromProps;yt=typeof At=="function"||typeof y.getSnapshotBeforeUpdate=="function",L=s.pendingProps!==L,yt||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(L||ot!==T)&&o1(s,y,d,T),ss=!1;var ct=s.memoizedState;y.state=ct,Io(s,d,y,g),Bo(),ot=s.memoizedState,L||ct!==ot||ss?(typeof At=="function"&&(xh(s,c,At,d),ot=s.memoizedState),(K=ss||a1(s,c,K,d,ct,ot,T))?(yt||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=ot),y.props=d,y.state=ot,y.context=T,d=K):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{y=s.stateNode,Wu(n,s),T=s.memoizedProps,yt=Qs(c,T),y.props=yt,At=s.pendingProps,ct=y.context,ot=c.contextType,K=ka,typeof ot=="object"&&ot!==null&&(K=Mi(ot)),L=c.getDerivedStateFromProps,(ot=typeof L=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==At||ct!==K)&&o1(s,y,d,K),ss=!1,ct=s.memoizedState,y.state=ct,Io(s,d,y,g),Bo();var bt=s.memoizedState;T!==At||ct!==bt||ss||n!==null&&n.dependencies!==null&&dc(n.dependencies)?(typeof L=="function"&&(xh(s,c,L,d),bt=s.memoizedState),(yt=ss||a1(s,c,yt,d,ct,bt,K)||n!==null&&n.dependencies!==null&&dc(n.dependencies))?(ot||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,bt,K),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,bt,K)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===n.memoizedProps&&ct===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&ct===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=bt),y.props=d,y.state=bt,y.context=K,d=yt):(typeof y.componentDidUpdate!="function"||T===n.memoizedProps&&ct===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&ct===n.memoizedState||(s.flags|=1024),d=!1)}return y=d,Dc(n,s),d=(s.flags&128)!==0,y||d?(y=s.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&d?(s.child=Zs(s,n.child,null,g),s.child=Zs(s,null,c,g)):Ri(n,s,c,g),s.memoizedState=y.state,n=s.child):n=Rr(n,s,g),n}function S1(n,s,c,d){return qs(),s.flags|=256,Ri(n,s,c,d),s.child}var kh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eh(n){return{baseLanes:n,cachePool:hp()}}function Th(n,s,c){return n=n!==null?n.childLanes&~c:0,s&&(n|=vn),n}function A1(n,s,c){var d=s.pendingProps,g=!1,y=(s.flags&128)!==0,T;if((T=y)||(T=n!==null&&n.memoizedState===null?!1:(ci.current&2)!==0),T&&(g=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,n===null){if(Se){if(g?ls(s):cs(),(n=Ve)?(n=Dg(n,Nn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:es!==null?{id:Jn,overflow:tr}:null,retryLane:536870912,hydrationErrors:null},c=ip(n),c.return=s,s.child=c,Ci=s,Ve=null)):n=null,n===null)throw ns(s);return cd(n)?s.lanes=32:s.lanes=536870912,null}var L=d.children;return d=d.fallback,g?(cs(),g=s.mode,L=Nc({mode:"hidden",children:L},g),d=Gs(d,g,c,null),L.return=s,d.return=s,L.sibling=d,s.child=L,d=s.child,d.memoizedState=Eh(c),d.childLanes=Th(n,T,c),s.memoizedState=kh,jo(null,d)):(ls(s),Ch(s,L))}var K=n.memoizedState;if(K!==null&&(L=K.dehydrated,L!==null)){if(y)s.flags&256?(ls(s),s.flags&=-257,s=Mh(n,s,c)):s.memoizedState!==null?(cs(),s.child=n.child,s.flags|=128,s=null):(cs(),L=d.fallback,g=s.mode,d=Nc({mode:"visible",children:d.children},g),L=Gs(L,g,c,null),L.flags|=2,d.return=s,L.return=s,d.sibling=L,s.child=d,Zs(s,n.child,null,c),d=s.child,d.memoizedState=Eh(c),d.childLanes=Th(n,T,c),s.memoizedState=kh,s=jo(null,d));else if(ls(s),cd(L)){if(T=L.nextSibling&&L.nextSibling.dataset,T)var ot=T.dgst;T=ot,d=Error(i(419)),d.stack="",d.digest=T,Ro({value:d,source:null,stack:null}),s=Mh(n,s,c)}else if(bi||Ma(n,s,c,!1),T=(c&n.childLanes)!==0,bi||T){if(T=je,T!==null&&(d=Kl(T,c),d!==0&&d!==K.retryLane))throw K.retryLane=d,js(n,d),an(T,n,d),Ah;ld(L)||Hc(),s=Mh(n,s,c)}else ld(L)?(s.flags|=192,s.child=n.child,s=null):(n=K.treeContext,Ve=zn(L.nextSibling),Ci=s,Se=!0,is=null,Nn=!1,n!==null&&sp(s,n),s=Ch(s,d.children),s.flags|=4096);return s}return g?(cs(),L=d.fallback,g=s.mode,K=n.child,ot=K.sibling,d=_r(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,ot!==null?L=_r(ot,L):(L=Gs(L,g,c,null),L.flags|=2),L.return=s,d.return=s,d.sibling=L,s.child=d,jo(null,d),d=s.child,L=n.child.memoizedState,L===null?L=Eh(c):(g=L.cachePool,g!==null?(K=pi._currentValue,g=g.parent!==K?{parent:K,pool:K}:g):g=hp(),L={baseLanes:L.baseLanes|c,cachePool:g}),d.memoizedState=L,d.childLanes=Th(n,T,c),s.memoizedState=kh,jo(n.child,d)):(ls(s),c=n.child,n=c.sibling,c=_r(c,{mode:"visible",children:d.children}),c.return=s,c.sibling=null,n!==null&&(T=s.deletions,T===null?(s.deletions=[n],s.flags|=16):T.push(n)),s.child=c,s.memoizedState=null,c)}function Ch(n,s){return s=Nc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Nc(n,s){return n=mn(22,n,null,s),n.lanes=0,n}function Mh(n,s,c){return Zs(s,n.child,null,c),n=Ch(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function _1(n,s,c){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),qu(n.return,s,c)}function Rh(n,s,c,d,g,y){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:y}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=d,T.tail=c,T.tailMode=g,T.treeForkCount=y)}function k1(n,s,c){var d=s.pendingProps,g=d.revealOrder,y=d.tail;d=d.children;var T=ci.current,L=(T&2)!==0;if(L?(T=T&1|2,s.flags|=128):T&=1,at(ci,T),Ri(n,s,d,c),d=Se?Mo:0,!L&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_1(n,c,s);else if(n.tag===19)_1(n,c,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(c=s.child,g=null;c!==null;)n=c.alternate,n!==null&&xc(n)===null&&(g=c),c=c.sibling;c=g,c===null?(g=s.child,s.child=null):(g=c.sibling,c.sibling=null),Rh(s,!1,g,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&xc(n)===null){s.child=g;break}n=g.sibling,g.sibling=c,c=g,g=n}Rh(s,!0,c,null,y,d);break;case"together":Rh(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function Rr(n,s,c){if(n!==null&&(s.dependencies=n.dependencies),ds|=s.lanes,(c&s.childLanes)===0)if(n!==null){if(Ma(n,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,c=_r(n,n.pendingProps),s.child=c,c.return=s;n.sibling!==null;)n=n.sibling,c=c.sibling=_r(n,n.pendingProps),c.return=s;c.sibling=null}return s.child}function Dh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&dc(n)))}function q3(n,s,c){switch(s.tag){case 3:Ht(s,s.stateNode.containerInfo),rs(s,pi,n.memoizedState.cache),qs();break;case 27:case 5:xe(s);break;case 4:Ht(s,s.stateNode.containerInfo);break;case 10:rs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ih(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(ls(s),s.flags|=128,null):(c&s.child.childLanes)!==0?A1(n,s,c):(ls(s),n=Rr(n,s,c),n!==null?n.sibling:null);ls(s);break;case 19:var g=(n.flags&128)!==0;if(d=(c&s.childLanes)!==0,d||(Ma(n,s,c,!1),d=(c&s.childLanes)!==0),g){if(d)return k1(n,s,c);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),at(ci,ci.current),d)break;return null;case 22:return s.lanes=0,b1(n,s,c,s.pendingProps);case 24:rs(s,pi,n.memoizedState.cache)}return Rr(n,s,c)}function E1(n,s,c){if(n!==null)if(n.memoizedProps!==s.pendingProps)bi=!0;else{if(!Dh(n,c)&&(s.flags&128)===0)return bi=!1,q3(n,s,c);bi=(n.flags&131072)!==0}else bi=!1,Se&&(s.flags&1048576)!==0&&rp(s,Mo,s.index);switch(s.lanes=0,s.tag){case 16:t:{var d=s.pendingProps;if(n=Xs(s.elementType),s.type=n,typeof n=="function")Bu(n)?(d=Qs(n,d),s.tag=1,s=w1(null,s,n,d,c)):(s.tag=0,s=_h(null,s,n,d,c));else{if(n!=null){var g=n.$$typeof;if(g===N){s.tag=11,s=m1(null,s,n,d,c);break t}else if(g===B){s.tag=14,s=p1(null,s,n,d,c);break t}}throw s=R(n)||n,Error(i(306,s,""))}}return s;case 0:return _h(n,s,s.type,s.pendingProps,c);case 1:return d=s.type,g=Qs(d,s.pendingProps),w1(n,s,d,g,c);case 3:t:{if(Ht(s,s.stateNode.containerInfo),n===null)throw Error(i(387));d=s.pendingProps;var y=s.memoizedState;g=y.element,Wu(n,s),Io(s,d,null,c);var T=s.memoizedState;if(d=T.cache,rs(s,pi,d),d!==y.cache&&$u(s,[pi],c,!0),Bo(),d=T.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=S1(n,s,d,c);break t}else if(d!==g){g=Mn(Error(i(424)),s),Ro(g),s=S1(n,s,d,c);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ve=zn(n.firstChild),Ci=s,Se=!0,is=null,Nn=!0,c=bp(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(qs(),d===g){s=Rr(n,s,c);break t}Ri(n,s,d,c)}s=s.child}return s;case 26:return Dc(n,s),n===null?(c=Ig(s.type,null,s.pendingProps,null))?s.memoizedState=c:Se||(c=s.type,n=s.pendingProps,d=Xc(Bt.current).createElement(c),d[mi]=s,d[Ii]=n,Di(d,c,n),ce(d),s.stateNode=d):s.memoizedState=Ig(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return xe(s),n===null&&Se&&(d=s.stateNode=zg(s.type,s.pendingProps,Bt.current),Ci=s,Nn=!0,g=Ve,bs(s.type)?(ud=g,Ve=zn(d.firstChild)):Ve=g),Ri(n,s,s.pendingProps.children,c),Dc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Se&&((g=d=Ve)&&(d=xy(d,s.type,s.pendingProps,Nn),d!==null?(s.stateNode=d,Ci=s,Ve=zn(d.firstChild),Nn=!1,g=!0):g=!1),g||ns(s)),xe(s),g=s.type,y=s.pendingProps,T=n!==null?n.memoizedProps:null,d=y.children,sd(g,y)?d=null:T!==null&&sd(g,T)&&(s.flags|=32),s.memoizedState!==null&&(g=rh(n,s,L3,null,null,c),nl._currentValue=g),Dc(n,s),Ri(n,s,d,c),s.child;case 6:return n===null&&Se&&((n=c=Ve)&&(c=wy(c,s.pendingProps,Nn),c!==null?(s.stateNode=c,Ci=s,Ve=null,n=!0):n=!1),n||ns(s)),null;case 13:return A1(n,s,c);case 4:return Ht(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=Zs(s,null,d,c):Ri(n,s,d,c),s.child;case 11:return m1(n,s,s.type,s.pendingProps,c);case 7:return Ri(n,s,s.pendingProps,c),s.child;case 8:return Ri(n,s,s.pendingProps.children,c),s.child;case 12:return Ri(n,s,s.pendingProps.children,c),s.child;case 10:return d=s.pendingProps,rs(s,s.type,d.value),Ri(n,s,d.children,c),s.child;case 9:return g=s.type._context,d=s.pendingProps.children,Vs(s),g=Mi(g),d=d(g),s.flags|=1,Ri(n,s,d,c),s.child;case 14:return p1(n,s,s.type,s.pendingProps,c);case 15:return g1(n,s,s.type,s.pendingProps,c);case 19:return k1(n,s,c);case 31:return G3(n,s,c);case 22:return b1(n,s,c,s.pendingProps);case 24:return Vs(s),d=Mi(pi),n===null?(g=Xu(),g===null&&(g=je,y=Vu(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),s.memoizedState={parent:d,cache:g},Zu(s),rs(s,pi,g)):((n.lanes&c)!==0&&(Wu(n,s),Io(s,null,null,c),Bo()),g=n.memoizedState,y=s.memoizedState,g.parent!==d?(g={parent:d,cache:d},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),rs(s,pi,d)):(d=y.cache,rs(s,pi,d),d!==g.cache&&$u(s,[pi],c,!0))),Ri(n,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Dr(n){n.flags|=4}function Nh(n,s,c,d,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(J1())n.flags|=8192;else throw Ks=gc,Ku}else n.flags&=-16777217}function T1(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!jg(s))if(J1())n.flags|=8192;else throw Ks=gc,Ku}function Oc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Vl():536870912,n.lanes|=s,Ha|=s)}function Go(n,s){if(!Se)switch(n.tailMode){case"hidden":s=n.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ye(n){var s=n.alternate!==null&&n.alternate.child===n.child,c=0,d=0;if(s)for(var g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=d,n.childLanes=c,s}function $3(n,s,c){var d=s.pendingProps;switch(Uu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(s),null;case 1:return Ye(s),null;case 3:return c=s.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Tr(pi),jt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ca(s)?Dr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ju())),Ye(s),null;case 26:var g=s.type,y=s.memoizedState;return n===null?(Dr(s),y!==null?(Ye(s),T1(s,y)):(Ye(s),Nh(s,g,null,d,c))):y?y!==n.memoizedState?(Dr(s),Ye(s),T1(s,y)):(Ye(s),s.flags&=-16777217):(n=n.memoizedProps,n!==d&&Dr(s),Ye(s),Nh(s,g,n,d,c)),null;case 27:if(we(s),c=Bt.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Dr(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Ye(s),null}n=ht.current,Ca(s)?ap(s):(n=zg(g,d,c),s.stateNode=n,Dr(s))}return Ye(s),null;case 5:if(we(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Dr(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Ye(s),null}if(y=ht.current,Ca(s))ap(s);else{var T=Xc(Bt.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?T.createElement("select",{is:d.is}):T.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?T.createElement(g,{is:d.is}):T.createElement(g)}}y[mi]=s,y[Ii]=d;t:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break t;for(;T.sibling===null;){if(T.return===null||T.return===s)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=y;t:switch(Di(y,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Dr(s)}}return Ye(s),Nh(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,c),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==d&&Dr(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(n=Bt.current,Ca(s)){if(n=s.stateNode,c=s.memoizedProps,d=null,g=Ci,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}n[mi]=s,n=!!(n.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Ag(n.nodeValue,c)),n||ns(s,!0)}else n=Xc(n).createTextNode(d),n[mi]=s,s.stateNode=n}return Ye(s),null;case 31:if(c=s.memoizedState,n===null||n.memoizedState!==null){if(d=Ca(s),c!==null){if(n===null){if(!d)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[mi]=s}else qs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ye(s),n=!1}else c=ju(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=c),n=!0;if(!n)return s.flags&256?(gn(s),s):(gn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ye(s),null;case 13:if(d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Ca(s),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[mi]=s}else qs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ye(s),g=!1}else g=ju(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(gn(s),s):(gn(s),null)}return gn(s),(s.flags&128)!==0?(s.lanes=c,s):(c=d!==null,n=n!==null&&n.memoizedState!==null,c&&(d=s.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)),c!==n&&c&&(s.child.flags|=8192),Oc(s,s.updateQueue),Ye(s),null);case 4:return jt(),n===null&&td(s.stateNode.containerInfo),Ye(s),null;case 10:return Tr(s.type),Ye(s),null;case 19:if(P(ci),d=s.memoizedState,d===null)return Ye(s),null;if(g=(s.flags&128)!==0,y=d.rendering,y===null)if(g)Go(d,!1);else{if(ri!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=xc(n),y!==null){for(s.flags|=128,Go(d,!1),n=y.updateQueue,s.updateQueue=n,Oc(s,n),s.subtreeFlags=0,n=c,c=s.child;c!==null;)ep(c,n),c=c.sibling;return at(ci,ci.current&1|2),Se&&kr(s,d.treeForkCount),s.child}n=n.sibling}d.tail!==null&&Ot()>Fc&&(s.flags|=128,g=!0,Go(d,!1),s.lanes=4194304)}else{if(!g)if(n=xc(y),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,Oc(s,n),Go(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Se)return Ye(s),null}else 2*Ot()-d.renderingStartTime>Fc&&c!==536870912&&(s.flags|=128,g=!0,Go(d,!1),s.lanes=4194304);d.isBackwards?(y.sibling=s.child,s.child=y):(n=d.last,n!==null?n.sibling=y:s.child=y,d.last=y)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Ot(),n.sibling=null,c=ci.current,at(ci,g?c&1|2:c&1),Se&&kr(s,d.treeForkCount),n):(Ye(s),null);case 22:case 23:return gn(s),eh(),d=s.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(c&536870912)!==0&&(s.flags&128)===0&&(Ye(s),s.subtreeFlags&6&&(s.flags|=8192)):Ye(s),c=s.updateQueue,c!==null&&Oc(s,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048),n!==null&&P(Ys),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Tr(pi),Ye(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function V3(n,s){switch(Uu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Tr(pi),jt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return we(s),null;case 31:if(s.memoizedState!==null){if(gn(s),s.alternate===null)throw Error(i(340));qs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(gn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));qs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return P(ci),null;case 4:return jt(),null;case 10:return Tr(s.type),null;case 22:case 23:return gn(s),eh(),n!==null&&P(Ys),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Tr(pi),null;case 25:return null;default:return null}}function C1(n,s){switch(Uu(s),s.tag){case 3:Tr(pi),jt();break;case 26:case 27:case 5:we(s);break;case 4:jt();break;case 31:s.memoizedState!==null&&gn(s);break;case 13:gn(s);break;case 19:P(ci);break;case 10:Tr(s.type);break;case 22:case 23:gn(s),eh(),n!==null&&P(Ys);break;case 24:Tr(pi)}}function qo(n,s){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&n)===n){d=void 0;var y=c.create,T=c.inst;d=y(),T.destroy=d}c=c.next}while(c!==g)}}catch(L){Be(s,s.return,L)}}function us(n,s,c){try{var d=s.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&n)===n){var T=d.inst,L=T.destroy;if(L!==void 0){T.destroy=void 0,g=s;var K=c,ot=L;try{ot()}catch(yt){Be(g,K,yt)}}}d=d.next}while(d!==y)}}catch(yt){Be(s,s.return,yt)}}function M1(n){var s=n.updateQueue;if(s!==null){var c=n.stateNode;try{yp(s,c)}catch(d){Be(n,n.return,d)}}}function R1(n,s,c){c.props=Qs(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(d){Be(n,s,d)}}function $o(n,s){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof c=="function"?n.refCleanup=c(d):c.current=d}}catch(g){Be(n,s,g)}}function er(n,s){var c=n.ref,d=n.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Be(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Be(n,s,g)}else c.current=null}function D1(n){var s=n.type,c=n.memoizedProps,d=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Be(n,n.return,g)}}function Oh(n,s,c){try{var d=n.stateNode;my(d,n.type,c,s),d[Ii]=s}catch(g){Be(n,n.return,g)}}function N1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&bs(n.type)||n.tag===4}function zh(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||N1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&bs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Lh(n,s,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(n),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Sr));else if(d!==4&&(d===27&&bs(n.type)&&(c=n.stateNode,s=null),n=n.child,n!==null))for(Lh(n,s,c),n=n.sibling;n!==null;)Lh(n,s,c),n=n.sibling}function zc(n,s,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?c.insertBefore(n,s):c.appendChild(n);else if(d!==4&&(d===27&&bs(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(zc(n,s,c),n=n.sibling;n!==null;)zc(n,s,c),n=n.sibling}function O1(n){var s=n.stateNode,c=n.memoizedProps;try{for(var d=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Di(s,d,c),s[mi]=n,s[Ii]=c}catch(y){Be(n,n.return,y)}}var Nr=!1,vi=!1,Bh=!1,z1=typeof WeakSet=="function"?WeakSet:Set,ki=null;function Y3(n,s){if(n=n.containerInfo,nd=e0,n=Vm(n),Mu(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else t:{c=(c=n.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break t}var T=0,L=-1,K=-1,ot=0,yt=0,At=n,ct=null;e:for(;;){for(var bt;At!==c||g!==0&&At.nodeType!==3||(L=T+g),At!==y||d!==0&&At.nodeType!==3||(K=T+d),At.nodeType===3&&(T+=At.nodeValue.length),(bt=At.firstChild)!==null;)ct=At,At=bt;for(;;){if(At===n)break e;if(ct===c&&++ot===g&&(L=T),ct===y&&++yt===d&&(K=T),(bt=At.nextSibling)!==null)break;At=ct,ct=At.parentNode}At=bt}c=L===-1||K===-1?null:{start:L,end:K}}else c=null}c=c||{start:0,end:0}}else c=null;for(rd={focusedElem:n,selectionRange:c},e0=!1,ki=s;ki!==null;)if(s=ki,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ki=n;else for(;ki!==null;){switch(s=ki,y=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(c=0;c<n.length;c++)g=n[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,c=s,g=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var qt=Qs(c.type,g);n=d.getSnapshotBeforeUpdate(qt,y),d.__reactInternalSnapshotBeforeUpdate=n}catch(ie){Be(c,c.return,ie)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,c=n.nodeType,c===9)od(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":od(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,ki=n;break}ki=s.return}}function L1(n,s,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:zr(n,c),d&4&&qo(5,c);break;case 1:if(zr(n,c),d&4)if(n=c.stateNode,s===null)try{n.componentDidMount()}catch(T){Be(c,c.return,T)}else{var g=Qs(c.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(T){Be(c,c.return,T)}}d&64&&M1(c),d&512&&$o(c,c.return);break;case 3:if(zr(n,c),d&64&&(n=c.updateQueue,n!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{yp(n,s)}catch(T){Be(c,c.return,T)}}break;case 27:s===null&&d&4&&O1(c);case 26:case 5:zr(n,c),s===null&&d&4&&D1(c),d&512&&$o(c,c.return);break;case 12:zr(n,c);break;case 31:zr(n,c),d&4&&F1(n,c);break;case 13:zr(n,c),d&4&&P1(n,c),d&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=iy.bind(null,c),Sy(n,c))));break;case 22:if(d=c.memoizedState!==null||Nr,!d){s=s!==null&&s.memoizedState!==null||vi,g=Nr;var y=vi;Nr=d,(vi=s)&&!y?Lr(n,c,(c.subtreeFlags&8772)!==0):zr(n,c),Nr=g,vi=y}break;case 30:break;default:zr(n,c)}}function B1(n){var s=n.alternate;s!==null&&(n.alternate=null,B1(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Pt(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Xe=null,en=!1;function Or(n,s,c){for(c=c.child;c!==null;)I1(n,s,c),c=c.sibling}function I1(n,s,c){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(ze,c)}catch{}switch(c.tag){case 26:vi||er(c,s),Or(n,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:vi||er(c,s);var d=Xe,g=en;bs(c.type)&&(Xe=c.stateNode,en=!1),Or(n,s,c),tl(c.stateNode),Xe=d,en=g;break;case 5:vi||er(c,s);case 6:if(d=Xe,g=en,Xe=null,Or(n,s,c),Xe=d,en=g,Xe!==null)if(en)try{(Xe.nodeType===9?Xe.body:Xe.nodeName==="HTML"?Xe.ownerDocument.body:Xe).removeChild(c.stateNode)}catch(y){Be(c,s,y)}else try{Xe.removeChild(c.stateNode)}catch(y){Be(c,s,y)}break;case 18:Xe!==null&&(en?(n=Xe,Mg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),Ka(n)):Mg(Xe,c.stateNode));break;case 4:d=Xe,g=en,Xe=c.stateNode.containerInfo,en=!0,Or(n,s,c),Xe=d,en=g;break;case 0:case 11:case 14:case 15:us(2,c,s),vi||us(4,c,s),Or(n,s,c);break;case 1:vi||(er(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"&&R1(c,s,d)),Or(n,s,c);break;case 21:Or(n,s,c);break;case 22:vi=(d=vi)||c.memoizedState!==null,Or(n,s,c),vi=d;break;default:Or(n,s,c)}}function F1(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ka(n)}catch(c){Be(s,s.return,c)}}}function P1(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ka(n)}catch(c){Be(s,s.return,c)}}function X3(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new z1),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new z1),s;default:throw Error(i(435,n.tag))}}function Lc(n,s){var c=X3(n);s.forEach(function(d){if(!c.has(d)){c.add(d);var g=ny.bind(null,n,d);d.then(g,g)}})}function nn(n,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],y=n,T=s,L=T;t:for(;L!==null;){switch(L.tag){case 27:if(bs(L.type)){Xe=L.stateNode,en=!1;break t}break;case 5:Xe=L.stateNode,en=!1;break t;case 3:case 4:Xe=L.stateNode.containerInfo,en=!0;break t}L=L.return}if(Xe===null)throw Error(i(160));I1(y,T,g),Xe=null,en=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)U1(s,n),s=s.sibling}var $n=null;function U1(n,s){var c=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:nn(s,n),rn(n),d&4&&(us(3,n,n.return),qo(3,n),us(5,n,n.return));break;case 1:nn(s,n),rn(n),d&512&&(vi||c===null||er(c,c.return)),d&64&&Nr&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=$n;if(nn(s,n),rn(n),d&512&&(vi||c===null||er(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=n.memoizedState,c===null)if(d===null)if(n.stateNode===null){t:{d=n.type,c=n.memoizedProps,g=g.ownerDocument||g;e:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Vt]||y[mi]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),Di(y,d,c),y[mi]=n,ce(y),d=y;break t;case"link":var T=Ug("link","href",g).get(d+(c.href||""));if(T){for(var L=0;L<T.length;L++)if(y=T[L],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(L,1);break e}}y=g.createElement(d),Di(y,d,c),g.head.appendChild(y);break;case"meta":if(T=Ug("meta","content",g).get(d+(c.content||""))){for(L=0;L<T.length;L++)if(y=T[L],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(L,1);break e}}y=g.createElement(d),Di(y,d,c),g.head.appendChild(y);break;default:throw Error(i(468,d))}y[mi]=n,ce(y),d=y}n.stateNode=d}else Hg(g,n.type,n.stateNode);else n.stateNode=Pg(g,d,n.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?Hg(g,n.type,n.stateNode):Pg(g,d,n.memoizedProps)):d===null&&n.stateNode!==null&&Oh(n,n.memoizedProps,c.memoizedProps)}break;case 27:nn(s,n),rn(n),d&512&&(vi||c===null||er(c,c.return)),c!==null&&d&4&&Oh(n,n.memoizedProps,c.memoizedProps);break;case 5:if(nn(s,n),rn(n),d&512&&(vi||c===null||er(c,c.return)),n.flags&32){g=n.stateNode;try{va(g,"")}catch(qt){Be(n,n.return,qt)}}d&4&&n.stateNode!=null&&(g=n.memoizedProps,Oh(n,g,c!==null?c.memoizedProps:g)),d&1024&&(Bh=!0);break;case 6:if(nn(s,n),rn(n),d&4){if(n.stateNode===null)throw Error(i(162));d=n.memoizedProps,c=n.stateNode;try{c.nodeValue=d}catch(qt){Be(n,n.return,qt)}}break;case 3:if(Wc=null,g=$n,$n=Kc(s.containerInfo),nn(s,n),$n=g,rn(n),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ka(s.containerInfo)}catch(qt){Be(n,n.return,qt)}Bh&&(Bh=!1,H1(n));break;case 4:d=$n,$n=Kc(n.stateNode.containerInfo),nn(s,n),rn(n),$n=d;break;case 12:nn(s,n),rn(n);break;case 31:nn(s,n),rn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Lc(n,d)));break;case 13:nn(s,n),rn(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ic=Ot()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Lc(n,d)));break;case 22:g=n.memoizedState!==null;var K=c!==null&&c.memoizedState!==null,ot=Nr,yt=vi;if(Nr=ot||g,vi=yt||K,nn(s,n),vi=yt,Nr=ot,rn(n),d&8192)t:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(c===null||K||Nr||vi||Js(n)),c=null,s=n;;){if(s.tag===5||s.tag===26){if(c===null){K=c=s;try{if(y=K.stateNode,g)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{L=K.stateNode;var At=K.memoizedProps.style,ct=At!=null&&At.hasOwnProperty("display")?At.display:null;L.style.display=ct==null||typeof ct=="boolean"?"":(""+ct).trim()}}catch(qt){Be(K,K.return,qt)}}}else if(s.tag===6){if(c===null){K=s;try{K.stateNode.nodeValue=g?"":K.memoizedProps}catch(qt){Be(K,K.return,qt)}}}else if(s.tag===18){if(c===null){K=s;try{var bt=K.stateNode;g?Rg(bt,!0):Rg(K.stateNode,!1)}catch(qt){Be(K,K.return,qt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=n.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Lc(n,c))));break;case 19:nn(s,n),rn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,Lc(n,d)));break;case 30:break;case 21:break;default:nn(s,n),rn(n)}}function rn(n){var s=n.flags;if(s&2){try{for(var c,d=n.return;d!==null;){if(N1(d)){c=d;break}d=d.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,y=zh(n);zc(n,y,g);break;case 5:var T=c.stateNode;c.flags&32&&(va(T,""),c.flags&=-33);var L=zh(n);zc(n,L,T);break;case 3:case 4:var K=c.stateNode.containerInfo,ot=zh(n);Lh(n,ot,K);break;default:throw Error(i(161))}}catch(yt){Be(n,n.return,yt)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function H1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;H1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function zr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)L1(n,s.alternate,s),s=s.sibling}function Js(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:us(4,s,s.return),Js(s);break;case 1:er(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&R1(s,s.return,c),Js(s);break;case 27:tl(s.stateNode);case 26:case 5:er(s,s.return),Js(s);break;case 22:s.memoizedState===null&&Js(s);break;case 30:Js(s);break;default:Js(s)}n=n.sibling}}function Lr(n,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,g=n,y=s,T=y.flags;switch(y.tag){case 0:case 11:case 15:Lr(g,y,c),qo(4,y);break;case 1:if(Lr(g,y,c),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ot){Be(d,d.return,ot)}if(d=y,g=d.updateQueue,g!==null){var L=d.stateNode;try{var K=g.shared.hiddenCallbacks;if(K!==null)for(g.shared.hiddenCallbacks=null,g=0;g<K.length;g++)vp(K[g],L)}catch(ot){Be(d,d.return,ot)}}c&&T&64&&M1(y),$o(y,y.return);break;case 27:O1(y);case 26:case 5:Lr(g,y,c),c&&d===null&&T&4&&D1(y),$o(y,y.return);break;case 12:Lr(g,y,c);break;case 31:Lr(g,y,c),c&&T&4&&F1(g,y);break;case 13:Lr(g,y,c),c&&T&4&&P1(g,y);break;case 22:y.memoizedState===null&&Lr(g,y,c),$o(y,y.return);break;case 30:break;default:Lr(g,y,c)}s=s.sibling}}function Ih(n,s){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&Do(c))}function Fh(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Do(n))}function Vn(n,s,c,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)j1(n,s,c,d),s=s.sibling}function j1(n,s,c,d){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Vn(n,s,c,d),g&2048&&qo(9,s);break;case 1:Vn(n,s,c,d);break;case 3:Vn(n,s,c,d),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Do(n)));break;case 12:if(g&2048){Vn(n,s,c,d),n=s.stateNode;try{var y=s.memoizedProps,T=y.id,L=y.onPostCommit;typeof L=="function"&&L(T,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(K){Be(s,s.return,K)}}else Vn(n,s,c,d);break;case 31:Vn(n,s,c,d);break;case 13:Vn(n,s,c,d);break;case 23:break;case 22:y=s.stateNode,T=s.alternate,s.memoizedState!==null?y._visibility&2?Vn(n,s,c,d):Vo(n,s):y._visibility&2?Vn(n,s,c,d):(y._visibility|=2,Fa(n,s,c,d,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Ih(T,s);break;case 24:Vn(n,s,c,d),g&2048&&Fh(s.alternate,s);break;default:Vn(n,s,c,d)}}function Fa(n,s,c,d,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=n,T=s,L=c,K=d,ot=T.flags;switch(T.tag){case 0:case 11:case 15:Fa(y,T,L,K,g),qo(8,T);break;case 23:break;case 22:var yt=T.stateNode;T.memoizedState!==null?yt._visibility&2?Fa(y,T,L,K,g):Vo(y,T):(yt._visibility|=2,Fa(y,T,L,K,g)),g&&ot&2048&&Ih(T.alternate,T);break;case 24:Fa(y,T,L,K,g),g&&ot&2048&&Fh(T.alternate,T);break;default:Fa(y,T,L,K,g)}s=s.sibling}}function Vo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=n,d=s,g=d.flags;switch(d.tag){case 22:Vo(c,d),g&2048&&Ih(d.alternate,d);break;case 24:Vo(c,d),g&2048&&Fh(d.alternate,d);break;default:Vo(c,d)}s=s.sibling}}var Yo=8192;function Pa(n,s,c){if(n.subtreeFlags&Yo)for(n=n.child;n!==null;)G1(n,s,c),n=n.sibling}function G1(n,s,c){switch(n.tag){case 26:Pa(n,s,c),n.flags&Yo&&n.memoizedState!==null&&zy(c,$n,n.memoizedState,n.memoizedProps);break;case 5:Pa(n,s,c);break;case 3:case 4:var d=$n;$n=Kc(n.stateNode.containerInfo),Pa(n,s,c),$n=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=Yo,Yo=16777216,Pa(n,s,c),Yo=d):Pa(n,s,c));break;default:Pa(n,s,c)}}function q1(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Xo(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];ki=d,V1(d,n)}q1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)$1(n),n=n.sibling}function $1(n){switch(n.tag){case 0:case 11:case 15:Xo(n),n.flags&2048&&us(9,n,n.return);break;case 3:Xo(n);break;case 12:Xo(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Bc(n)):Xo(n);break;default:Xo(n)}}function Bc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];ki=d,V1(d,n)}q1(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:us(8,s,s.return),Bc(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Bc(s));break;default:Bc(s)}n=n.sibling}}function V1(n,s){for(;ki!==null;){var c=ki;switch(c.tag){case 0:case 11:case 15:us(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Do(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,ki=d;else t:for(c=n;ki!==null;){d=ki;var g=d.sibling,y=d.return;if(B1(d),d===c){ki=null;break t}if(g!==null){g.return=y,ki=g;break t}ki=y}}}var K3={getCacheForType:function(n){var s=Mi(pi),c=s.data.get(n);return c===void 0&&(c=n(),s.data.set(n,c)),c},cacheSignal:function(){return Mi(pi).controller.signal}},Z3=typeof WeakMap=="function"?WeakMap:Map,Oe=0,je=null,ge=null,ve=0,Le=0,bn=null,hs=!1,Ua=!1,Ph=!1,Br=0,ri=0,ds=0,ta=0,Uh=0,vn=0,Ha=0,Ko=null,sn=null,Hh=!1,Ic=0,Y1=0,Fc=1/0,Pc=null,fs=null,Ai=0,ms=null,ja=null,Ir=0,jh=0,Gh=null,X1=null,Zo=0,qh=null;function yn(){return(Oe&2)!==0&&ve!==0?ve&-ve:$.T!==null?Zh():Zl()}function K1(){if(vn===0)if((ve&536870912)===0||Se){var n=yr;yr<<=1,(yr&3932160)===0&&(yr=262144),vn=n}else vn=536870912;return n=pn.current,n!==null&&(n.flags|=32),vn}function an(n,s,c){(n===je&&(Le===2||Le===9)||n.cancelPendingCommit!==null)&&(Ga(n,0),ps(n,ve,vn,!1)),Is(n,c),((Oe&2)===0||n!==je)&&(n===je&&((Oe&2)===0&&(ta|=c),ri===4&&ps(n,ve,vn,!1)),ir(n))}function Z1(n,s,c){if((Oe&6)!==0)throw Error(i(327));var d=!c&&(s&127)===0&&(s&n.expiredLanes)===0||Bs(n,s),g=d?J3(n,s):Vh(n,s,!0),y=d;do{if(g===0){Ua&&!d&&ps(n,s,0,!1);break}else{if(c=n.current.alternate,y&&!W3(c)){g=Vh(n,s,!1),y=!1;continue}if(g===2){if(y=s,n.errorRecoveryDisabledLanes&y)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;t:{var L=n;g=Ko;var K=L.current.memoizedState.isDehydrated;if(K&&(Ga(L,T).flags|=256),T=Vh(L,T,!1),T!==2){if(Ph&&!K){L.errorRecoveryDisabledLanes|=y,ta|=y,g=4;break t}y=sn,sn=g,y!==null&&(sn===null?sn=y:sn.push.apply(sn,y))}g=T}if(y=!1,g!==2)continue}}if(g===1){Ga(n,0),ps(n,s,0,!0);break}t:{switch(d=n,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ps(d,s,vn,!hs);break t;case 2:sn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Ic+300-Ot(),10<g)){if(ps(d,s,vn,!hs),Wr(d,0,!0)!==0)break t;Ir=s,d.timeoutHandle=Tg(W1.bind(null,d,c,sn,Pc,Hh,s,vn,ta,Ha,hs,y,"Throttled",-0,0),g);break t}W1(d,c,sn,Pc,Hh,s,vn,ta,Ha,hs,y,null,-0,0)}}break}while(!0);ir(n)}function W1(n,s,c,d,g,y,T,L,K,ot,yt,At,ct,bt){if(n.timeoutHandle=-1,At=s.subtreeFlags,At&8192||(At&16785408)===16785408){At={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sr},G1(s,y,At);var qt=(y&62914560)===y?Ic-Ot():(y&4194048)===y?Y1-Ot():0;if(qt=Ly(At,qt),qt!==null){Ir=y,n.cancelPendingCommit=qt(sg.bind(null,n,s,y,c,d,g,T,L,K,yt,At,null,ct,bt)),ps(n,y,T,!ot);return}}sg(n,s,y,c,d,g,T,L,K)}function W3(n){for(var s=n;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],y=g.getSnapshot;g=g.value;try{if(!fn(y(),g))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ps(n,s,c,d){s&=~Uh,s&=~ta,n.suspendedLanes|=s,n.pingedLanes&=~s,d&&(n.warmLanes|=s),d=n.expirationTimes;for(var g=s;0<g;){var y=31-He(g),T=1<<y;d[y]=-1,g&=~T}c!==0&&Yl(n,c,s)}function Uc(){return(Oe&6)===0?(Wo(0),!1):!0}function $h(){if(ge!==null){if(Le===0)var n=ge.return;else n=ge,Er=$s=null,oh(n),Oa=null,Oo=0,n=ge;for(;n!==null;)C1(n.alternate,n),n=n.return;ge=null}}function Ga(n,s){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,by(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),Ir=0,$h(),je=n,ge=c=_r(n.current,null),ve=s,Le=0,bn=null,hs=!1,Ua=Bs(n,s),Ph=!1,Ha=vn=Uh=ta=ds=ri=0,sn=Ko=null,Hh=!1,(s&8)!==0&&(s|=s&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=s;0<d;){var g=31-He(d),y=1<<g;s|=n[g],d&=~y}return Br=s,oc(),c}function Q1(n,s){ue=null,$.H=Ho,s===Na||s===pc?(s=mp(),Le=3):s===Ku?(s=mp(),Le=4):Le=s===Ah?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,bn=s,ge===null&&(ri=1,Mc(n,Mn(s,n.current)))}function J1(){var n=pn.current;return n===null?!0:(ve&4194048)===ve?On===null:(ve&62914560)===ve||(ve&536870912)!==0?n===On:!1}function tg(){var n=$.H;return $.H=Ho,n===null?Ho:n}function eg(){var n=$.A;return $.A=K3,n}function Hc(){ri=4,hs||(ve&4194048)!==ve&&pn.current!==null||(Ua=!0),(ds&134217727)===0&&(ta&134217727)===0||je===null||ps(je,ve,vn,!1)}function Vh(n,s,c){var d=Oe;Oe|=2;var g=tg(),y=eg();(je!==n||ve!==s)&&(Pc=null,Ga(n,s)),s=!1;var T=ri;t:do try{if(Le!==0&&ge!==null){var L=ge,K=bn;switch(Le){case 8:$h(),T=6;break t;case 3:case 2:case 9:case 6:pn.current===null&&(s=!0);var ot=Le;if(Le=0,bn=null,qa(n,L,K,ot),c&&Ua){T=0;break t}break;default:ot=Le,Le=0,bn=null,qa(n,L,K,ot)}}Q3(),T=ri;break}catch(yt){Q1(n,yt)}while(!0);return s&&n.shellSuspendCounter++,Er=$s=null,Oe=d,$.H=g,$.A=y,ge===null&&(je=null,ve=0,oc()),T}function Q3(){for(;ge!==null;)ig(ge)}function J3(n,s){var c=Oe;Oe|=2;var d=tg(),g=eg();je!==n||ve!==s?(Pc=null,Fc=Ot()+500,Ga(n,s)):Ua=Bs(n,s);t:do try{if(Le!==0&&ge!==null){s=ge;var y=bn;e:switch(Le){case 1:Le=0,bn=null,qa(n,s,y,1);break;case 2:case 9:if(dp(y)){Le=0,bn=null,ng(s);break}s=function(){Le!==2&&Le!==9||je!==n||(Le=7),ir(n)},y.then(s,s);break t;case 3:Le=7;break t;case 4:Le=5;break t;case 7:dp(y)?(Le=0,bn=null,ng(s)):(Le=0,bn=null,qa(n,s,y,7));break;case 5:var T=null;switch(ge.tag){case 26:T=ge.memoizedState;case 5:case 27:var L=ge;if(T?jg(T):L.stateNode.complete){Le=0,bn=null;var K=L.sibling;if(K!==null)ge=K;else{var ot=L.return;ot!==null?(ge=ot,jc(ot)):ge=null}break e}}Le=0,bn=null,qa(n,s,y,5);break;case 6:Le=0,bn=null,qa(n,s,y,6);break;case 8:$h(),ri=6;break t;default:throw Error(i(462))}}ty();break}catch(yt){Q1(n,yt)}while(!0);return Er=$s=null,$.H=d,$.A=g,Oe=c,ge!==null?0:(je=null,ve=0,oc(),ri)}function ty(){for(;ge!==null&&!lt();)ig(ge)}function ig(n){var s=E1(n.alternate,n,Br);n.memoizedProps=n.pendingProps,s===null?jc(n):ge=s}function ng(n){var s=n,c=s.alternate;switch(s.tag){case 15:case 0:s=x1(c,s,s.pendingProps,s.type,void 0,ve);break;case 11:s=x1(c,s,s.pendingProps,s.type.render,s.ref,ve);break;case 5:oh(s);default:C1(c,s),s=ge=ep(s,Br),s=E1(c,s,Br)}n.memoizedProps=n.pendingProps,s===null?jc(n):ge=s}function qa(n,s,c,d){Er=$s=null,oh(s),Oa=null,Oo=0;var g=s.return;try{if(j3(n,g,s,c,ve)){ri=1,Mc(n,Mn(c,n.current)),ge=null;return}}catch(y){if(g!==null)throw ge=g,y;ri=1,Mc(n,Mn(c,n.current)),ge=null;return}s.flags&32768?(Se||d===1?n=!0:Ua||(ve&536870912)!==0?n=!1:(hs=n=!0,(d===2||d===9||d===3||d===6)&&(d=pn.current,d!==null&&d.tag===13&&(d.flags|=16384))),rg(s,n)):jc(s)}function jc(n){var s=n;do{if((s.flags&32768)!==0){rg(s,hs);return}n=s.return;var c=$3(s.alternate,s,Br);if(c!==null){ge=c;return}if(s=s.sibling,s!==null){ge=s;return}ge=s=n}while(s!==null);ri===0&&(ri=5)}function rg(n,s){do{var c=V3(n.alternate,n);if(c!==null){c.flags&=32767,ge=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(n=n.sibling,n!==null)){ge=n;return}ge=n=c}while(n!==null);ri=6,ge=null}function sg(n,s,c,d,g,y,T,L,K){n.cancelPendingCommit=null;do Gc();while(Ai!==0);if((Oe&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=zu,du(n,c,y,T,L,K),n===je&&(ge=je=null,ve=0),ja=s,ms=n,Ir=c,jh=y,Gh=g,X1=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ry(le,function(){return ug(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=$.T,$.T=null,g=X.p,X.p=2,T=Oe,Oe|=4;try{Y3(n,s,c)}finally{Oe=T,X.p=g,$.T=d}}Ai=1,ag(),og(),lg()}}function ag(){if(Ai===1){Ai=0;var n=ms,s=ja,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var d=X.p;X.p=2;var g=Oe;Oe|=4;try{U1(s,n);var y=rd,T=Vm(n.containerInfo),L=y.focusedElem,K=y.selectionRange;if(T!==L&&L&&L.ownerDocument&&$m(L.ownerDocument.documentElement,L)){if(K!==null&&Mu(L)){var ot=K.start,yt=K.end;if(yt===void 0&&(yt=ot),"selectionStart"in L)L.selectionStart=ot,L.selectionEnd=Math.min(yt,L.value.length);else{var At=L.ownerDocument||document,ct=At&&At.defaultView||window;if(ct.getSelection){var bt=ct.getSelection(),qt=L.textContent.length,ie=Math.min(K.start,qt),Pe=K.end===void 0?ie:Math.min(K.end,qt);!bt.extend&&ie>Pe&&(T=Pe,Pe=ie,ie=T);var tt=qm(L,ie),W=qm(L,Pe);if(tt&&W&&(bt.rangeCount!==1||bt.anchorNode!==tt.node||bt.anchorOffset!==tt.offset||bt.focusNode!==W.node||bt.focusOffset!==W.offset)){var rt=At.createRange();rt.setStart(tt.node,tt.offset),bt.removeAllRanges(),ie>Pe?(bt.addRange(rt),bt.extend(W.node,W.offset)):(rt.setEnd(W.node,W.offset),bt.addRange(rt))}}}}for(At=[],bt=L;bt=bt.parentNode;)bt.nodeType===1&&At.push({element:bt,left:bt.scrollLeft,top:bt.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<At.length;L++){var St=At[L];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}e0=!!nd,rd=nd=null}finally{Oe=g,X.p=d,$.T=c}}n.current=s,Ai=2}}function og(){if(Ai===2){Ai=0;var n=ms,s=ja,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var d=X.p;X.p=2;var g=Oe;Oe|=4;try{L1(n,s.alternate,s)}finally{Oe=g,X.p=d,$.T=c}}Ai=3}}function lg(){if(Ai===4||Ai===3){Ai=0,Rt();var n=ms,s=ja,c=Ir,d=X1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ai=5:(Ai=0,ja=ms=null,cg(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(fs=null),yo(c),s=s.stateNode,fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(ze,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=$.T,g=X.p,X.p=2,$.T=null;try{for(var y=n.onRecoverableError,T=0;T<d.length;T++){var L=d[T];y(L.value,{componentStack:L.stack})}}finally{$.T=s,X.p=g}}(Ir&3)!==0&&Gc(),ir(n),g=n.pendingLanes,(c&261930)!==0&&(g&42)!==0?n===qh?Zo++:(Zo=0,qh=n):Zo=0,Wo(0)}}function cg(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Do(s)))}function Gc(){return ag(),og(),lg(),ug()}function ug(){if(Ai!==5)return!1;var n=ms,s=jh;jh=0;var c=yo(Ir),d=$.T,g=X.p;try{X.p=32>c?32:c,$.T=null,c=Gh,Gh=null;var y=ms,T=Ir;if(Ai=0,ja=ms=null,Ir=0,(Oe&6)!==0)throw Error(i(331));var L=Oe;if(Oe|=4,$1(y.current),j1(y,y.current,T,c),Oe=L,Wo(0,!1),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(ze,y)}catch{}return!0}finally{X.p=g,$.T=d,cg(n,s)}}function hg(n,s,c){s=Mn(c,s),s=Sh(n.stateNode,s,2),n=os(n,s,2),n!==null&&(Is(n,2),ir(n))}function Be(n,s,c){if(n.tag===3)hg(n,n,c);else for(;s!==null;){if(s.tag===3){hg(s,n,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(fs===null||!fs.has(d))){n=Mn(c,n),c=d1(2),d=os(s,c,2),d!==null&&(f1(c,d,s,n),Is(d,2),ir(d));break}}s=s.return}}function Yh(n,s,c){var d=n.pingCache;if(d===null){d=n.pingCache=new Z3;var g=new Set;d.set(s,g)}else g=d.get(s),g===void 0&&(g=new Set,d.set(s,g));g.has(c)||(Ph=!0,g.add(c),n=ey.bind(null,n,s,c),s.then(n,n))}function ey(n,s,c){var d=n.pingCache;d!==null&&d.delete(s),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,je===n&&(ve&c)===c&&(ri===4||ri===3&&(ve&62914560)===ve&&300>Ot()-Ic?(Oe&2)===0&&Ga(n,0):Uh|=c,Ha===ve&&(Ha=0)),ir(n)}function dg(n,s){s===0&&(s=Vl()),n=js(n,s),n!==null&&(Is(n,s),ir(n))}function iy(n){var s=n.memoizedState,c=0;s!==null&&(c=s.retryLane),dg(n,c)}function ny(n,s){var c=0;switch(n.tag){case 31:case 13:var d=n.stateNode,g=n.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),dg(n,c)}function ry(n,s){return wt(n,s)}var qc=null,$a=null,Xh=!1,$c=!1,Kh=!1,gs=0;function ir(n){n!==$a&&n.next===null&&($a===null?qc=$a=n:$a=$a.next=n),$c=!0,Xh||(Xh=!0,ay())}function Wo(n,s){if(!Kh&&$c){Kh=!0;do for(var c=!1,d=qc;d!==null;){if(n!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var T=d.suspendedLanes,L=d.pingedLanes;y=(1<<31-He(42|n)+1)-1,y&=g&~(T&~L),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,gg(d,y))}else y=ve,y=Wr(d,d===je?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||Bs(d,y)||(c=!0,gg(d,y));d=d.next}while(c);Kh=!1}}function sy(){fg()}function fg(){$c=Xh=!1;var n=0;gs!==0&&gy()&&(n=gs);for(var s=Ot(),c=null,d=qc;d!==null;){var g=d.next,y=mg(d,s);y===0?(d.next=null,c===null?qc=g:c.next=g,g===null&&($a=c)):(c=d,(n!==0||(y&3)!==0)&&($c=!0)),d=g}Ai!==0&&Ai!==5||Wo(n),gs!==0&&(gs=0)}function mg(n,s){for(var c=n.suspendedLanes,d=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var T=31-He(y),L=1<<T,K=g[T];K===-1?((L&c)===0||(L&d)!==0)&&(g[T]=hu(L,s)):K<=s&&(n.expiredLanes|=L),y&=~L}if(s=je,c=ve,c=Wr(n,n===s?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,c===0||n===s&&(Le===2||Le===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&_t(d),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||Bs(n,c)){if(s=c&-c,s===n.callbackPriority)return s;switch(d!==null&&_t(d),yo(c)){case 2:case 8:c=Ne;break;case 32:c=le;break;case 268435456:c=Wn;break;default:c=le}return d=pg.bind(null,n),c=wt(c,d),n.callbackPriority=s,n.callbackNode=c,s}return d!==null&&d!==null&&_t(d),n.callbackPriority=2,n.callbackNode=null,2}function pg(n,s){if(Ai!==0&&Ai!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(Gc()&&n.callbackNode!==c)return null;var d=ve;return d=Wr(n,n===je?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(Z1(n,d,s),mg(n,Ot()),n.callbackNode!=null&&n.callbackNode===c?pg.bind(null,n):null)}function gg(n,s){if(Gc())return null;Z1(n,s,!0)}function ay(){vy(function(){(Oe&6)!==0?wt(Kt,sy):fg()})}function Zh(){if(gs===0){var n=Ra;n===0&&(n=Zr,Zr<<=1,(Zr&261888)===0&&(Zr=256)),gs=n}return gs}function bg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Jl(""+n)}function vg(n,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,n.id&&c.setAttribute("form",n.id),s.parentNode.insertBefore(c,s),n=new FormData(n),c.parentNode.removeChild(c),n}function oy(n,s,c,d,g){if(s==="submit"&&c&&c.stateNode===g){var y=bg((g[Ii]||null).action),T=d.submitter;T&&(s=(s=T[Ii]||null)?bg(s.formAction):T.getAttribute("formAction"),s!==null&&(y=s,T=null));var L=new nc("action","action",null,d,g);n.push({event:L,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(gs!==0){var K=T?vg(g,T):new FormData(g);gh(c,{pending:!0,data:K,method:g.method,action:y},null,K)}}else typeof y=="function"&&(L.preventDefault(),K=T?vg(g,T):new FormData(g),gh(c,{pending:!0,data:K,method:g.method,action:y},y,K))},currentTarget:g}]})}}for(var Wh=0;Wh<Ou.length;Wh++){var Qh=Ou[Wh],ly=Qh.toLowerCase(),cy=Qh[0].toUpperCase()+Qh.slice(1);qn(ly,"on"+cy)}qn(Km,"onAnimationEnd"),qn(Zm,"onAnimationIteration"),qn(Wm,"onAnimationStart"),qn("dblclick","onDoubleClick"),qn("focusin","onFocus"),qn("focusout","onBlur"),qn(k3,"onTransitionRun"),qn(E3,"onTransitionStart"),qn(T3,"onTransitionCancel"),qn(Qm,"onTransitionEnd"),ke("onMouseEnter",["mouseout","mouseover"]),ke("onMouseLeave",["mouseout","mouseover"]),ke("onPointerEnter",["pointerout","pointerover"]),ke("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qo));function yg(n,s){s=(s&4)!==0;for(var c=0;c<n.length;c++){var d=n[c],g=d.event;d=d.listeners;t:{var y=void 0;if(s)for(var T=d.length-1;0<=T;T--){var L=d[T],K=L.instance,ot=L.currentTarget;if(L=L.listener,K!==y&&g.isPropagationStopped())break t;y=L,g.currentTarget=ot;try{y(g)}catch(yt){ac(yt)}g.currentTarget=null,y=K}else for(T=0;T<d.length;T++){if(L=d[T],K=L.instance,ot=L.currentTarget,L=L.listener,K!==y&&g.isPropagationStopped())break t;y=L,g.currentTarget=ot;try{y(g)}catch(yt){ac(yt)}g.currentTarget=null,y=K}}}}function be(n,s){var c=s[ft];c===void 0&&(c=s[ft]=new Set);var d=n+"__bubble";c.has(d)||(xg(s,n,2,!1),c.add(d))}function Jh(n,s,c){var d=0;s&&(d|=4),xg(c,n,d,s)}var Vc="_reactListening"+Math.random().toString(36).slice(2);function td(n){if(!n[Vc]){n[Vc]=!0,li.forEach(function(c){c!=="selectionchange"&&(uy.has(c)||Jh(c,!1,n),Jh(c,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Vc]||(s[Vc]=!0,Jh("selectionchange",!1,s))}}function xg(n,s,c,d){switch(Kg(s)){case 2:var g=Fy;break;case 8:g=Py;break;default:g=pd}c=g.bind(null,s,c,n),g=void 0,!xu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),d?g!==void 0?n.addEventListener(s,c,{capture:!0,passive:g}):n.addEventListener(s,c,!0):g!==void 0?n.addEventListener(s,c,{passive:g}):n.addEventListener(s,c,!1)}function ed(n,s,c,d,g){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)t:for(;;){if(d===null)return;var T=d.tag;if(T===3||T===4){var L=d.stateNode.containerInfo;if(L===g)break;if(T===4)for(T=d.return;T!==null;){var K=T.tag;if((K===3||K===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;L!==null;){if(T=Ft(L),T===null)return;if(K=T.tag,K===5||K===6||K===26||K===27){d=y=T;continue t}L=L.parentNode}}d=d.return}km(function(){var ot=y,yt=vu(c),At=[];t:{var ct=Jm.get(n);if(ct!==void 0){var bt=nc,qt=n;switch(n){case"keypress":if(ec(c)===0)break t;case"keydown":case"keyup":bt=n3;break;case"focusin":qt="focus",bt=_u;break;case"focusout":qt="blur",bt=_u;break;case"beforeblur":case"afterblur":bt=_u;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=$v;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=a3;break;case Km:case Zm:case Wm:bt=Xv;break;case Qm:bt=l3;break;case"scroll":case"scrollend":bt=Gv;break;case"wheel":bt=u3;break;case"copy":case"cut":case"paste":bt=Zv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Rm;break;case"toggle":case"beforetoggle":bt=d3}var ie=(s&4)!==0,Pe=!ie&&(n==="scroll"||n==="scrollend"),tt=ie?ct!==null?ct+"Capture":null:ct;ie=[];for(var W=ot,rt;W!==null;){var St=W;if(rt=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||rt===null||tt===null||(St=xo(W,tt),St!=null&&ie.push(Jo(W,St,rt))),Pe)break;W=W.return}0<ie.length&&(ct=new bt(ct,qt,null,c,yt),At.push({event:ct,listeners:ie}))}}if((s&7)===0){t:{if(ct=n==="mouseover"||n==="pointerover",bt=n==="mouseout"||n==="pointerout",ct&&c!==bu&&(qt=c.relatedTarget||c.fromElement)&&(Ft(qt)||qt[Jr]))break t;if((bt||ct)&&(ct=yt.window===yt?yt:(ct=yt.ownerDocument)?ct.defaultView||ct.parentWindow:window,bt?(qt=c.relatedTarget||c.toElement,bt=ot,qt=qt?Ft(qt):null,qt!==null&&(Pe=a(qt),ie=qt.tag,qt!==Pe||ie!==5&&ie!==27&&ie!==6)&&(qt=null)):(bt=null,qt=ot),bt!==qt)){if(ie=Cm,St="onMouseLeave",tt="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(ie=Rm,St="onPointerLeave",tt="onPointerEnter",W="pointer"),Pe=bt==null?ct:Te(bt),rt=qt==null?ct:Te(qt),ct=new ie(St,W+"leave",bt,c,yt),ct.target=Pe,ct.relatedTarget=rt,St=null,Ft(yt)===ot&&(ie=new ie(tt,W+"enter",qt,c,yt),ie.target=rt,ie.relatedTarget=Pe,St=ie),Pe=St,bt&&qt)e:{for(ie=hy,tt=bt,W=qt,rt=0,St=tt;St;St=ie(St))rt++;St=0;for(var Wt=W;Wt;Wt=ie(Wt))St++;for(;0<rt-St;)tt=ie(tt),rt--;for(;0<St-rt;)W=ie(W),St--;for(;rt--;){if(tt===W||W!==null&&tt===W.alternate){ie=tt;break e}tt=ie(tt),W=ie(W)}ie=null}else ie=null;bt!==null&&wg(At,ct,bt,ie,!1),qt!==null&&Pe!==null&&wg(At,Pe,qt,ie,!0)}}t:{if(ct=ot?Te(ot):window,bt=ct.nodeName&&ct.nodeName.toLowerCase(),bt==="select"||bt==="input"&&ct.type==="file")var Ce=Fm;else if(Bm(ct))if(Pm)Ce=S3;else{Ce=x3;var Yt=y3}else bt=ct.nodeName,!bt||bt.toLowerCase()!=="input"||ct.type!=="checkbox"&&ct.type!=="radio"?ot&&gu(ot.elementType)&&(Ce=Fm):Ce=w3;if(Ce&&(Ce=Ce(n,ot))){Im(At,Ce,c,yt);break t}Yt&&Yt(n,ct,ot),n==="focusout"&&ot&&ct.type==="number"&&ot.memoizedProps.value!=null&&pu(ct,"number",ct.value)}switch(Yt=ot?Te(ot):window,n){case"focusin":(Bm(Yt)||Yt.contentEditable==="true")&&(Sa=Yt,Ru=ot,Co=null);break;case"focusout":Co=Ru=Sa=null;break;case"mousedown":Du=!0;break;case"contextmenu":case"mouseup":case"dragend":Du=!1,Ym(At,c,yt);break;case"selectionchange":if(_3)break;case"keydown":case"keyup":Ym(At,c,yt)}var he;if(Eu)t:{switch(n){case"compositionstart":var ye="onCompositionStart";break t;case"compositionend":ye="onCompositionEnd";break t;case"compositionupdate":ye="onCompositionUpdate";break t}ye=void 0}else wa?zm(n,c)&&(ye="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(ye="onCompositionStart");ye&&(Dm&&c.locale!=="ko"&&(wa||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&wa&&(he=Em()):(ts=yt,wu="value"in ts?ts.value:ts.textContent,wa=!0)),Yt=Yc(ot,ye),0<Yt.length&&(ye=new Mm(ye,n,null,c,yt),At.push({event:ye,listeners:Yt}),he?ye.data=he:(he=Lm(c),he!==null&&(ye.data=he)))),(he=m3?p3(n,c):g3(n,c))&&(ye=Yc(ot,"onBeforeInput"),0<ye.length&&(Yt=new Mm("onBeforeInput","beforeinput",null,c,yt),At.push({event:Yt,listeners:ye}),Yt.data=he)),oy(At,n,ot,c,yt)}yg(At,s)})}function Jo(n,s,c){return{instance:n,listener:s,currentTarget:c}}function Yc(n,s){for(var c=s+"Capture",d=[];n!==null;){var g=n,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=xo(n,c),g!=null&&d.unshift(Jo(n,g,y)),g=xo(n,s),g!=null&&d.push(Jo(n,g,y))),n.tag===3)return d;n=n.return}return[]}function hy(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function wg(n,s,c,d,g){for(var y=s._reactName,T=[];c!==null&&c!==d;){var L=c,K=L.alternate,ot=L.stateNode;if(L=L.tag,K!==null&&K===d)break;L!==5&&L!==26&&L!==27||ot===null||(K=ot,g?(ot=xo(c,y),ot!=null&&T.unshift(Jo(c,ot,K))):g||(ot=xo(c,y),ot!=null&&T.push(Jo(c,ot,K)))),c=c.return}T.length!==0&&n.push({event:s,listeners:T})}var dy=/\r\n?/g,fy=/\u0000|\uFFFD/g;function Sg(n){return(typeof n=="string"?n:""+n).replace(dy,`
`).replace(fy,"")}function Ag(n,s){return s=Sg(s),Sg(n)===s}function Fe(n,s,c,d,g,y){switch(c){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||va(n,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&va(n,""+d);break;case"className":ga(n,"class",d);break;case"tabIndex":ga(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ga(n,c,d);break;case"style":Am(n,d,y);break;case"data":if(s!=="object"){ga(n,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||c!=="href")){n.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=Jl(""+d),n.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(s!=="input"&&Fe(n,s,"name",g.name,g,null),Fe(n,s,"formEncType",g.formEncType,g,null),Fe(n,s,"formMethod",g.formMethod,g,null),Fe(n,s,"formTarget",g.formTarget,g,null)):(Fe(n,s,"encType",g.encType,g,null),Fe(n,s,"method",g.method,g,null),Fe(n,s,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=Jl(""+d),n.setAttribute(c,d);break;case"onClick":d!=null&&(n.onclick=Sr);break;case"onScroll":d!=null&&be("scroll",n);break;case"onScrollEnd":d!=null&&be("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}c=Jl(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""+d):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":d===!0?n.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,d):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(c,d):n.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(c):n.setAttribute(c,d);break;case"popover":be("beforetoggle",n),be("toggle",n),Ji(n,"popover",d);break;case"xlinkActuate":wr(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":wr(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":wr(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":wr(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":wr(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":wr(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":wr(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":wr(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":wr(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ji(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Hv.get(c)||c,Ji(n,c,d))}}function id(n,s,c,d,g,y){switch(c){case"style":Am(n,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"children":typeof d=="string"?va(n,d):(typeof d=="number"||typeof d=="bigint")&&va(n,""+d);break;case"onScroll":d!=null&&be("scroll",n);break;case"onScrollEnd":d!=null&&be("scrollend",n);break;case"onClick":d!=null&&(n.onclick=Sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fs.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),s=c.slice(2,g?c.length-7:void 0),y=n[Ii]||null,y=y!=null?y[c]:null,typeof y=="function"&&n.removeEventListener(s,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(s,d,g);break t}c in n?n[c]=d:d===!0?n.setAttribute(c,""):Ji(n,c,d)}}}function Di(n,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",n),be("load",n);var d=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var T=c[y];if(T!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Fe(n,s,y,T,c,null)}}g&&Fe(n,s,"srcSet",c.srcSet,c,null),d&&Fe(n,s,"src",c.src,c,null);return;case"input":be("invalid",n);var L=y=T=g=null,K=null,ot=null;for(d in c)if(c.hasOwnProperty(d)){var yt=c[d];if(yt!=null)switch(d){case"name":g=yt;break;case"type":T=yt;break;case"checked":K=yt;break;case"defaultChecked":ot=yt;break;case"value":y=yt;break;case"defaultValue":L=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(i(137,s));break;default:Fe(n,s,d,yt,c,null)}}ym(n,y,L,K,ot,T,g,!1);return;case"select":be("invalid",n),d=T=y=null;for(g in c)if(c.hasOwnProperty(g)&&(L=c[g],L!=null))switch(g){case"value":y=L;break;case"defaultValue":T=L;break;case"multiple":d=L;default:Fe(n,s,g,L,c,null)}s=y,c=T,n.multiple=!!d,s!=null?ba(n,!!d,s,!1):c!=null&&ba(n,!!d,c,!0);return;case"textarea":be("invalid",n),y=g=d=null;for(T in c)if(c.hasOwnProperty(T)&&(L=c[T],L!=null))switch(T){case"value":d=L;break;case"defaultValue":g=L;break;case"children":y=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(i(91));break;default:Fe(n,s,T,L,c,null)}wm(n,d,g,y);return;case"option":for(K in c)if(c.hasOwnProperty(K)&&(d=c[K],d!=null))switch(K){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Fe(n,s,K,d,c,null)}return;case"dialog":be("beforetoggle",n),be("toggle",n),be("cancel",n),be("close",n);break;case"iframe":case"object":be("load",n);break;case"video":case"audio":for(d=0;d<Qo.length;d++)be(Qo[d],n);break;case"image":be("error",n),be("load",n);break;case"details":be("toggle",n);break;case"embed":case"source":case"link":be("error",n),be("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ot in c)if(c.hasOwnProperty(ot)&&(d=c[ot],d!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Fe(n,s,ot,d,c,null)}return;default:if(gu(s)){for(yt in c)c.hasOwnProperty(yt)&&(d=c[yt],d!==void 0&&id(n,s,yt,d,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(d=c[L],d!=null&&Fe(n,s,L,d,c,null))}function my(n,s,c,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,T=null,L=null,K=null,ot=null,yt=null;for(bt in c){var At=c[bt];if(c.hasOwnProperty(bt)&&At!=null)switch(bt){case"checked":break;case"value":break;case"defaultValue":K=At;default:d.hasOwnProperty(bt)||Fe(n,s,bt,null,d,At)}}for(var ct in d){var bt=d[ct];if(At=c[ct],d.hasOwnProperty(ct)&&(bt!=null||At!=null))switch(ct){case"type":y=bt;break;case"name":g=bt;break;case"checked":ot=bt;break;case"defaultChecked":yt=bt;break;case"value":T=bt;break;case"defaultValue":L=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(i(137,s));break;default:bt!==At&&Fe(n,s,ct,bt,d,At)}}mu(n,T,L,K,ot,yt,y,g);return;case"select":bt=T=L=ct=null;for(y in c)if(K=c[y],c.hasOwnProperty(y)&&K!=null)switch(y){case"value":break;case"multiple":bt=K;default:d.hasOwnProperty(y)||Fe(n,s,y,null,d,K)}for(g in d)if(y=d[g],K=c[g],d.hasOwnProperty(g)&&(y!=null||K!=null))switch(g){case"value":ct=y;break;case"defaultValue":L=y;break;case"multiple":T=y;default:y!==K&&Fe(n,s,g,y,d,K)}s=L,c=T,d=bt,ct!=null?ba(n,!!c,ct,!1):!!d!=!!c&&(s!=null?ba(n,!!c,s,!0):ba(n,!!c,c?[]:"",!1));return;case"textarea":bt=ct=null;for(L in c)if(g=c[L],c.hasOwnProperty(L)&&g!=null&&!d.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:Fe(n,s,L,null,d,g)}for(T in d)if(g=d[T],y=c[T],d.hasOwnProperty(T)&&(g!=null||y!=null))switch(T){case"value":ct=g;break;case"defaultValue":bt=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&Fe(n,s,T,g,d,y)}xm(n,ct,bt);return;case"option":for(var qt in c)if(ct=c[qt],c.hasOwnProperty(qt)&&ct!=null&&!d.hasOwnProperty(qt))switch(qt){case"selected":n.selected=!1;break;default:Fe(n,s,qt,null,d,ct)}for(K in d)if(ct=d[K],bt=c[K],d.hasOwnProperty(K)&&ct!==bt&&(ct!=null||bt!=null))switch(K){case"selected":n.selected=ct&&typeof ct!="function"&&typeof ct!="symbol";break;default:Fe(n,s,K,ct,d,bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in c)ct=c[ie],c.hasOwnProperty(ie)&&ct!=null&&!d.hasOwnProperty(ie)&&Fe(n,s,ie,null,d,ct);for(ot in d)if(ct=d[ot],bt=c[ot],d.hasOwnProperty(ot)&&ct!==bt&&(ct!=null||bt!=null))switch(ot){case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,s));break;default:Fe(n,s,ot,ct,d,bt)}return;default:if(gu(s)){for(var Pe in c)ct=c[Pe],c.hasOwnProperty(Pe)&&ct!==void 0&&!d.hasOwnProperty(Pe)&&id(n,s,Pe,void 0,d,ct);for(yt in d)ct=d[yt],bt=c[yt],!d.hasOwnProperty(yt)||ct===bt||ct===void 0&&bt===void 0||id(n,s,yt,ct,d,bt);return}}for(var tt in c)ct=c[tt],c.hasOwnProperty(tt)&&ct!=null&&!d.hasOwnProperty(tt)&&Fe(n,s,tt,null,d,ct);for(At in d)ct=d[At],bt=c[At],!d.hasOwnProperty(At)||ct===bt||ct==null&&bt==null||Fe(n,s,At,ct,d,bt)}function _g(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function py(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],y=g.transferSize,T=g.initiatorType,L=g.duration;if(y&&L&&_g(T)){for(T=0,L=g.responseEnd,d+=1;d<c.length;d++){var K=c[d],ot=K.startTime;if(ot>L)break;var yt=K.transferSize,At=K.initiatorType;yt&&_g(At)&&(K=K.responseEnd,T+=yt*(K<L?1:(L-ot)/(K-ot)))}if(--d,s+=8*(y+T)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var nd=null,rd=null;function Xc(n){return n.nodeType===9?n:n.ownerDocument}function kg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Eg(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function sd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ad=null;function gy(){var n=window.event;return n&&n.type==="popstate"?n===ad?!1:(ad=n,!0):(ad=null,!1)}var Tg=typeof setTimeout=="function"?setTimeout:void 0,by=typeof clearTimeout=="function"?clearTimeout:void 0,Cg=typeof Promise=="function"?Promise:void 0,vy=typeof queueMicrotask=="function"?queueMicrotask:typeof Cg<"u"?function(n){return Cg.resolve(null).then(n).catch(yy)}:Tg;function yy(n){setTimeout(function(){throw n})}function bs(n){return n==="head"}function Mg(n,s){var c=s,d=0;do{var g=c.nextSibling;if(n.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){n.removeChild(g),Ka(s);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")tl(n.ownerDocument.documentElement);else if(c==="head"){c=n.ownerDocument.head,tl(c);for(var y=c.firstChild;y;){var T=y.nextSibling,L=y.nodeName;y[Vt]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=T}}else c==="body"&&tl(n.ownerDocument.body);c=g}while(c);Ka(s)}function Rg(n,s){var c=n;n=0;do{var d=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(n===0)break;n--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||n++;c=d}while(c)}function od(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":od(c),Pt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function xy(n,s,c,d){for(;n.nodeType===1;){var g=c;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Vt])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=zn(n.nextSibling),n===null)break}return null}function wy(n,s,c){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=zn(n.nextSibling),n===null))return null;return n}function Dg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=zn(n.nextSibling),n===null))return null;return n}function ld(n){return n.data==="$?"||n.data==="$~"}function cd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Sy(n,s){var c=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||c.readyState!=="loading")s();else{var d=function(){s(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function zn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var ud=null;function Ng(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"||c==="/&"){if(s===0)return zn(n.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}n=n.nextSibling}return null}function Og(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return n;s--}else c!=="/$"&&c!=="/&"||s++}n=n.previousSibling}return null}function zg(n,s,c){switch(s=Xc(c),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function tl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Pt(n)}var Ln=new Map,Lg=new Set;function Kc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Fr=X.d;X.d={f:Ay,r:_y,D:ky,C:Ey,L:Ty,m:Cy,X:Ry,S:My,M:Dy};function Ay(){var n=Fr.f(),s=Uc();return n||s}function _y(n){var s=Jt(n);s!==null&&s.tag===5&&s.type==="form"?Qp(s):Fr.r(n)}var Va=typeof document>"u"?null:document;function Bg(n,s,c){var d=Va;if(d&&typeof s=="string"&&s){var g=Tn(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Lg.has(g)||(Lg.add(g),n={rel:n,crossOrigin:c,href:s},d.querySelector(g)===null&&(s=d.createElement("link"),Di(s,"link",n),ce(s),d.head.appendChild(s)))}}function ky(n){Fr.D(n),Bg("dns-prefetch",n,null)}function Ey(n,s){Fr.C(n,s),Bg("preconnect",n,s)}function Ty(n,s,c){Fr.L(n,s,c);var d=Va;if(d&&n&&s){var g='link[rel="preload"][as="'+Tn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Tn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Tn(c.imageSizes)+'"]')):g+='[href="'+Tn(n)+'"]';var y=g;switch(s){case"style":y=Ya(n);break;case"script":y=Xa(n)}Ln.has(y)||(n=p({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:n,as:s},c),Ln.set(y,n),d.querySelector(g)!==null||s==="style"&&d.querySelector(el(y))||s==="script"&&d.querySelector(il(y))||(s=d.createElement("link"),Di(s,"link",n),ce(s),d.head.appendChild(s)))}}function Cy(n,s){Fr.m(n,s);var c=Va;if(c&&n){var d=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Tn(d)+'"][href="'+Tn(n)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Xa(n)}if(!Ln.has(y)&&(n=p({rel:"modulepreload",href:n},s),Ln.set(y,n),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(il(y)))return}d=c.createElement("link"),Di(d,"link",n),ce(d),c.head.appendChild(d)}}}function My(n,s,c){Fr.S(n,s,c);var d=Va;if(d&&n){var g=Ti(d).hoistableStyles,y=Ya(n);s=s||"default";var T=g.get(y);if(!T){var L={loading:0,preload:null};if(T=d.querySelector(el(y)))L.loading=5;else{n=p({rel:"stylesheet",href:n,"data-precedence":s},c),(c=Ln.get(y))&&hd(n,c);var K=T=d.createElement("link");ce(K),Di(K,"link",n),K._p=new Promise(function(ot,yt){K.onload=ot,K.onerror=yt}),K.addEventListener("load",function(){L.loading|=1}),K.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Zc(T,s,d)}T={type:"stylesheet",instance:T,count:1,state:L},g.set(y,T)}}}function Ry(n,s){Fr.X(n,s);var c=Va;if(c&&n){var d=Ti(c).hoistableScripts,g=Xa(n),y=d.get(g);y||(y=c.querySelector(il(g)),y||(n=p({src:n,async:!0},s),(s=Ln.get(g))&&dd(n,s),y=c.createElement("script"),ce(y),Di(y,"link",n),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function Dy(n,s){Fr.M(n,s);var c=Va;if(c&&n){var d=Ti(c).hoistableScripts,g=Xa(n),y=d.get(g);y||(y=c.querySelector(il(g)),y||(n=p({src:n,async:!0,type:"module"},s),(s=Ln.get(g))&&dd(n,s),y=c.createElement("script"),ce(y),Di(y,"link",n),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function Ig(n,s,c,d){var g=(g=Bt.current)?Kc(g):null;if(!g)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Ya(c.href),c=Ti(g).hoistableStyles,d=c.get(s),d||(d={type:"style",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=Ya(c.href);var y=Ti(g).hoistableStyles,T=y.get(n);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,T),(y=g.querySelector(el(n)))&&!y._p&&(T.instance=y,T.state.loading=5),Ln.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ln.set(n,c),y||Ny(g,n,c,T.state))),s&&d===null)throw Error(i(528,""));return T}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Xa(c),c=Ti(g).hoistableScripts,d=c.get(s),d||(d={type:"script",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ya(n){return'href="'+Tn(n)+'"'}function el(n){return'link[rel="stylesheet"]['+n+"]"}function Fg(n){return p({},n,{"data-precedence":n.precedence,precedence:null})}function Ny(n,s,c,d){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=n.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Di(s,"link",c),ce(s),n.head.appendChild(s))}function Xa(n){return'[src="'+Tn(n)+'"]'}function il(n){return"script[async]"+n}function Pg(n,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var d=n.querySelector('style[data-href~="'+Tn(c.href)+'"]');if(d)return s.instance=d,ce(d),d;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),ce(d),Di(d,"style",g),Zc(d,c.precedence,n),s.instance=d;case"stylesheet":g=Ya(c.href);var y=n.querySelector(el(g));if(y)return s.state.loading|=4,s.instance=y,ce(y),y;d=Fg(c),(g=Ln.get(g))&&hd(d,g),y=(n.ownerDocument||n).createElement("link"),ce(y);var T=y;return T._p=new Promise(function(L,K){T.onload=L,T.onerror=K}),Di(y,"link",d),s.state.loading|=4,Zc(y,c.precedence,n),s.instance=y;case"script":return y=Xa(c.src),(g=n.querySelector(il(y)))?(s.instance=g,ce(g),g):(d=c,(g=Ln.get(y))&&(d=p({},c),dd(d,g)),n=n.ownerDocument||n,g=n.createElement("script"),ce(g),Di(g,"link",d),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,Zc(d,c.precedence,n));return s.instance}function Zc(n,s,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,T=0;T<d.length;T++){var L=d[T];if(L.dataset.precedence===s)y=L;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(n,s.firstChild))}function hd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function dd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Wc=null;function Ug(n,s,c){if(Wc===null){var d=new Map,g=Wc=new Map;g.set(c,d)}else g=Wc,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(n))return d;for(d.set(n,null),c=c.getElementsByTagName(n),g=0;g<c.length;g++){var y=c[g];if(!(y[Vt]||y[mi]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(s)||"";T=n+T;var L=d.get(T);L?L.push(y):d.set(T,[y])}}return d}function Hg(n,s,c){n=n.ownerDocument||n,n.head.insertBefore(c,s==="title"?n.querySelector("head > title"):null)}function Oy(n,s,c){if(c===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function jg(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function zy(n,s,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=Ya(d.href),y=s.querySelector(el(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Qc.bind(n),s.then(n,n)),c.state.loading|=4,c.instance=y,ce(y);return}y=s.ownerDocument||s,d=Fg(d),(g=Ln.get(g))&&hd(d,g),y=y.createElement("link"),ce(y);var T=y;T._p=new Promise(function(L,K){T.onload=L,T.onerror=K}),Di(y,"link",d),c.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(n.count++,c=Qc.bind(n),s.addEventListener("load",c),s.addEventListener("error",c))}}var fd=0;function Ly(n,s){return n.stylesheets&&n.count===0&&t0(n,n.stylesheets),0<n.count||0<n.imgCount?function(c){var d=setTimeout(function(){if(n.stylesheets&&t0(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+s);0<n.imgBytes&&fd===0&&(fd=62500*py());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&t0(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>fd?50:800)+s);return n.unsuspend=c,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function Qc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)t0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Jc=null;function t0(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Jc=new Map,s.forEach(By,n),Jc=null,Qc.call(n))}function By(n,s){if(!(s.state.loading&4)){var c=Jc.get(n);if(c)var d=c.get(null);else{c=new Map,Jc.set(n,c);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var T=g[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),d=T)}d&&c.set(null,d)}g=s.instance,T=g.getAttribute("data-precedence"),y=c.get(T)||d,y===d&&c.set(null,g),c.set(T,g),this.count++,d=Qc.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var nl={$$typeof:C,Provider:null,Consumer:null,_currentValue:vt,_currentValue2:vt,_threadCount:0};function Iy(n,s,c,d,g,y,T,L,K){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qr(0),this.hiddenUpdates=Qr(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Gg(n,s,c,d,g,y,T,L,K,ot,yt,At){return n=new Iy(n,s,c,T,K,ot,yt,At,L),s=1,y===!0&&(s|=24),y=mn(3,null,null,s),n.current=y,y.stateNode=n,s=Vu(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:s},Zu(y),n}function qg(n){return n?(n=ka,n):ka}function $g(n,s,c,d,g,y){g=qg(g),d.context===null?d.context=g:d.pendingContext=g,d=as(s),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=os(n,d,s),c!==null&&(an(c,n,s),Lo(c,n,s))}function Vg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<s?c:s}}function md(n,s){Vg(n,s),(n=n.alternate)&&Vg(n,s)}function Yg(n){if(n.tag===13||n.tag===31){var s=js(n,67108864);s!==null&&an(s,n,67108864),md(n,67108864)}}function Xg(n){if(n.tag===13||n.tag===31){var s=yn();s=vo(s);var c=js(n,s);c!==null&&an(c,n,s),md(n,s)}}var e0=!0;function Fy(n,s,c,d){var g=$.T;$.T=null;var y=X.p;try{X.p=2,pd(n,s,c,d)}finally{X.p=y,$.T=g}}function Py(n,s,c,d){var g=$.T;$.T=null;var y=X.p;try{X.p=8,pd(n,s,c,d)}finally{X.p=y,$.T=g}}function pd(n,s,c,d){if(e0){var g=gd(d);if(g===null)ed(n,s,d,i0,c),Zg(n,d);else if(Hy(g,n,s,c,d))d.stopPropagation();else if(Zg(n,d),s&4&&-1<Uy.indexOf(n)){for(;g!==null;){var y=Jt(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Qi(y.pendingLanes);if(T!==0){var L=y;for(L.pendingLanes|=2,L.entangledLanes|=2;T;){var K=1<<31-He(T);L.entanglements[1]|=K,T&=~K}ir(y),(Oe&6)===0&&(Fc=Ot()+500,Wo(0))}}break;case 31:case 13:L=js(y,2),L!==null&&an(L,y,2),Uc(),md(y,2)}if(y=gd(d),y===null&&ed(n,s,d,i0,c),y===g)break;g=y}g!==null&&d.stopPropagation()}else ed(n,s,d,null,c)}}function gd(n){return n=vu(n),bd(n)}var i0=null;function bd(n){if(i0=null,n=Ft(n),n!==null){var s=a(n);if(s===null)n=null;else{var c=s.tag;if(c===13){if(n=o(s),n!==null)return n;n=null}else if(c===31){if(n=u(s),n!==null)return n;n=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return i0=n,null}function Kg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case Kt:return 2;case Ne:return 8;case le:case Bi:return 32;case Wn:return 268435456;default:return 32}default:return 32}}var vd=!1,vs=null,ys=null,xs=null,rl=new Map,sl=new Map,ws=[],Uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zg(n,s){switch(n){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":rl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(s.pointerId)}}function al(n,s,c,d,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},s!==null&&(s=Jt(s),s!==null&&Yg(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function Hy(n,s,c,d,g){switch(s){case"focusin":return vs=al(vs,n,s,c,d,g),!0;case"dragenter":return ys=al(ys,n,s,c,d,g),!0;case"mouseover":return xs=al(xs,n,s,c,d,g),!0;case"pointerover":var y=g.pointerId;return rl.set(y,al(rl.get(y)||null,n,s,c,d,g)),!0;case"gotpointercapture":return y=g.pointerId,sl.set(y,al(sl.get(y)||null,n,s,c,d,g)),!0}return!1}function Wg(n){var s=Ft(n.target);if(s!==null){var c=a(s);if(c!==null){if(s=c.tag,s===13){if(s=o(c),s!==null){n.blockedOn=s,Wl(n.priority,function(){Xg(c)});return}}else if(s===31){if(s=u(c),s!==null){n.blockedOn=s,Wl(n.priority,function(){Xg(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function n0(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var c=gd(n.nativeEvent);if(c===null){c=n.nativeEvent;var d=new c.constructor(c.type,c);bu=d,c.target.dispatchEvent(d),bu=null}else return s=Jt(c),s!==null&&Yg(s),n.blockedOn=c,!1;s.shift()}return!0}function Qg(n,s,c){n0(n)&&c.delete(s)}function jy(){vd=!1,vs!==null&&n0(vs)&&(vs=null),ys!==null&&n0(ys)&&(ys=null),xs!==null&&n0(xs)&&(xs=null),rl.forEach(Qg),sl.forEach(Qg)}function r0(n,s){n.blockedOn===s&&(n.blockedOn=null,vd||(vd=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,jy)))}var s0=null;function Jg(n){s0!==n&&(s0=n,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){s0===n&&(s0=null);for(var s=0;s<n.length;s+=3){var c=n[s],d=n[s+1],g=n[s+2];if(typeof d!="function"){if(bd(d||c)===null)continue;break}var y=Jt(c);y!==null&&(n.splice(s,3),s-=3,gh(y,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function Ka(n){function s(K){return r0(K,n)}vs!==null&&r0(vs,n),ys!==null&&r0(ys,n),xs!==null&&r0(xs,n),rl.forEach(s),sl.forEach(s);for(var c=0;c<ws.length;c++){var d=ws[c];d.blockedOn===n&&(d.blockedOn=null)}for(;0<ws.length&&(c=ws[0],c.blockedOn===null);)Wg(c),c.blockedOn===null&&ws.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],y=c[d+1],T=g[Ii]||null;if(typeof y=="function")T||Jg(c);else if(T){var L=null;if(y&&y.hasAttribute("formAction")){if(g=y,T=y[Ii]||null)L=T.formAction;else if(bd(g)!==null)continue}else L=T.action;typeof L=="function"?c[d+1]=L:(c.splice(d,3),d-=3),Jg(c)}}}function t2(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function yd(n){this._internalRoot=n}a0.prototype.render=yd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,d=yn();$g(c,d,n,s,null,null)},a0.prototype.unmount=yd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;$g(n.current,2,null,n,null,null),Uc(),s[Jr]=null}};function a0(n){this._internalRoot=n}a0.prototype.unstable_scheduleHydration=function(n){if(n){var s=Zl();n={blockedOn:null,target:n,priority:s};for(var c=0;c<ws.length&&s!==0&&s<ws[c].priority;c++);ws.splice(c,0,n),c===0&&Wg(n)}};var e2=t.version;if(e2!=="19.2.0")throw Error(i(527,e2,"19.2.0"));X.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var Gy={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o0.isDisabled&&o0.supportsFiber)try{ze=o0.inject(Gy),fi=o0}catch{}}return ll.createRoot=function(n,s){if(!r(n))throw Error(i(299));var c=!1,d="",g=l1,y=c1,T=u1;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=Gg(n,1,!1,null,null,c,d,null,g,y,T,t2),n[Jr]=s.current,td(n),new yd(s)},ll.hydrateRoot=function(n,s,c){if(!r(n))throw Error(i(299));var d=!1,g="",y=l1,T=c1,L=u1,K=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.formState!==void 0&&(K=c.formState)),s=Gg(n,1,!0,s,c??null,d,g,K,y,T,L,t2),s.context=qg(null),c=s.current,d=yn(),d=vo(d),g=as(d),g.callback=null,os(c,g,d),c=d,s.current.lanes=c,Is(s,c),ir(s),n[Jr]=s.current,td(n),new a0(s)},ll.version="19.2.0",ll}var f2;function t5(){if(f2)return Ad.exports;f2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),Ad.exports=Jy(),Ad.exports}var e5=t5();const qi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Wd=[.001,0,0,.001,0,0],Td=1.35,xn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Es={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_l="pdfjs_internal_editor_",oe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ae={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},i5={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ni={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},R0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},xi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ja={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},K0={ERRORS:0,WARNINGS:1,INFOS:5},kl={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},c0={moveTo:0,lineTo:1,curveTo:2,closePath:3},n5={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Z0=K0.WARNINGS;function r5(l){Number.isInteger(l)&&(Z0=l)}function s5(){return Z0}function W0(l){Z0>=K0.INFOS&&console.info(`Info: ${l}`)}function ae(l){Z0>=K0.WARNINGS&&console.warn(`Warning: ${l}`)}function Ge(l){throw new Error(l)}function _e(l,t){l||Ge(t)}function a5(l){switch(l?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function X4(l,t=null,e=null){if(!l)return null;if(e&&typeof l=="string"&&(e.addDefaultProtocol&&l.startsWith("www.")&&l.match(/\./g)?.length>=2&&(l=`http://${l}`),e.tryConvertEncoding))try{l=h5(l)}catch{}const i=t?URL.parse(l,t):URL.parse(l);return a5(i)?i:null}function K4(l,t,e=!1){const i=URL.parse(l);return i?(i.hash=t,i.href):e&&X4(l,"http://example.com")?l.split("#",1)[0]+`${t?`#${t}`:""}`:""}function me(l,t,e,i=!1){return Object.defineProperty(l,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const ha=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class m2 extends ha{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Cd extends ha{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Qd extends ha{constructor(t){super(t,"InvalidPDFException")}}class I0 extends ha{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class o5 extends ha{constructor(t){super(t,"FormatError")}}class Rs extends ha{constructor(t){super(t,"AbortException")}}function Z4(l){(typeof l!="object"||l?.length===void 0)&&Ge("Invalid argument for bytesToString");const t=l.length,e=8192;if(t<e)return String.fromCharCode.apply(null,l);const i=[];for(let r=0;r<t;r+=e){const a=Math.min(r+e,t),o=l.subarray(r,a);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function zl(l){typeof l!="string"&&Ge("Invalid argument for stringToBytes");const t=l.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=l.charCodeAt(i)&255;return e}function l5(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255)}function c5(){const l=new Uint8Array(4);return l[0]=1,new Uint32Array(l.buffer,0,1)[0]===1}function u5(){try{return new Function(""),!0}catch{return!1}}class Li{static get isLittleEndian(){return me(this,"isLittleEndian",c5())}static get isEvalSupported(){return me(this,"isEvalSupported",u5())}static get isOffscreenCanvasSupported(){return me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return me(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return me(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return me(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Md=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));class $t{static makeHexColor(t,e,i){return`#${Md[t]}${Md[e]}${Md[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const r=t[i],a=t[i+1];t[i]=r*e[0]+a*e[2]+e[4],t[i+1]=r*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const r=e[0],a=e[1],o=e[2],u=e[3],h=e[4],f=e[5];for(let m=0;m<6;m+=2){const p=t[i+m],b=t[i+m+1];t[i+m]=p*r+b*o+h,t[i+m+1]=p*a+b*u+f}}static applyInverseTransform(t,e){const i=t[0],r=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-i*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,i){const r=e[0],a=e[1],o=e[2],u=e[3],h=e[4],f=e[5],m=t[0],p=t[1],b=t[2],v=t[3];let w=r*m+h,x=w,_=r*b+h,A=_,E=u*p+f,C=E,N=u*v+f,D=N;if(a!==0||o!==0){const F=a*m,B=a*b,Y=o*p,j=o*v;w+=Y,A+=Y,_+=j,x+=j,E+=F,D+=F,N+=B,C+=B}i[0]=Math.min(i[0],w,_,x,A),i[1]=Math.min(i[1],E,N,C,D),i[2]=Math.max(i[2],w,_,x,A),i[3]=Math.max(i[3],E,N,C,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],r=t[1],a=t[2],o=t[3],u=i**2+r**2,h=i*a+r*o,f=a**2+o**2,m=(u+f)/2,p=Math.sqrt(m**2-(u*f-h**2));e[0]=Math.sqrt(m+p||1),e[1]=Math.sqrt(m-p||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>o?null:[i,a,r,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,r,a){a[0]=Math.min(a[0],t,i),a[1]=Math.min(a[1],e,r),a[2]=Math.max(a[2],t,i),a[3]=Math.max(a[3],e,r)}static#t(t,e,i,r,a,o,u,h,f,m){if(f<=0||f>=1)return;const p=1-f,b=f*f,v=b*f,w=p*(p*(p*t+3*f*e)+3*b*i)+v*r,x=p*(p*(p*a+3*f*o)+3*b*u)+v*h;m[0]=Math.min(m[0],w),m[1]=Math.min(m[1],x),m[2]=Math.max(m[2],w),m[3]=Math.max(m[3],x)}static#e(t,e,i,r,a,o,u,h,f,m,p,b){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,e,i,r,a,o,u,h,-p/m,b);return}const v=m**2-4*p*f;if(v<0)return;const w=Math.sqrt(v),x=2*f;this.#t(t,e,i,r,a,o,u,h,(-m+w)/x,b),this.#t(t,e,i,r,a,o,u,h,(-m-w)/x,b)}static bezierBoundingBox(t,e,i,r,a,o,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),this.#e(t,i,a,u,e,r,o,h,3*(-t+3*(i-a)+u),6*(t-2*i+a),3*(i-t),f),this.#e(t,i,a,u,e,r,o,h,3*(-e+3*(r-o)+h),6*(e-2*r+o),3*(r-e),f)}}function h5(l){return decodeURIComponent(escape(l))}let Rd=null,p2=null;function d5(l){return Rd||(Rd=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,p2=new Map([["ﬅ","ſt"]])),l.replaceAll(Rd,(t,e,i)=>e?e.normalize("NFKC"):p2.get(i))}function W4(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const l=new Uint8Array(32);return crypto.getRandomValues(l),Z4(l)}const kf="pdfjs_internal_id_";function f5(l,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,r,...a]=e;if(!l(i)&&!Number.isInteger(i)||!t(r))return!1;const o=a.length;let u=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;u=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function $i(l,t,e){return Math.min(Math.max(l,t),e)}function Q4(l){return Uint8Array.prototype.toBase64?l.toBase64():btoa(Z4(l))}function m5(l){return Uint8Array.fromBase64?Uint8Array.fromBase64(l):zl(atob(l))}typeof Promise.try!="function"&&(Promise.try=function(l,...t){return new Promise(e=>{e(l(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(l){return l.reduce((t,e)=>t+e,0)});class El{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(a){if(!a)return;let o=null;const u=a.name;if(u==="#text")o=a.value;else if(El.shouldBuildText(u))a?.attributes?.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&e.push({str:o}),!!a.children)for(const h of a.children)r(h)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class J4{static setupStorage(t,e,i,r,a){const o=r.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),a==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),a==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const u of i.children)u.attributes.value===o.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:a}){const{attributes:o}=e,u=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[h,f]of Object.entries(o))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&a.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,a=t.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:a,linkService:i});const u=a!=="richText",h=t.div;if(h.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=p}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);o.append(p),u&&El.shouldBuildText(r.name)&&f.push(p)}return{textDivs:f}}const m=[[r,-1,o]];for(;m.length>0;){const[p,b,v]=m.at(-1);if(b+1===p.children.length){m.pop();continue}const w=p.children[++m.at(-1)[1]];if(w===null)continue;const{name:x}=w;if(x==="#text"){const A=document.createTextNode(w.value);f.push(A),v.append(A);continue}const _=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,x):document.createElement(x);if(v.append(_),w.attributes&&this.setAttributes({html:_,element:w,storage:e,intent:a,linkService:i}),w.children?.length>0)m.push([w,-1,_]);else if(w.value){const A=document.createTextNode(w.value);u&&El.shouldBuildText(x)&&f.push(A),_.append(A)}}for(const p of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Ur="http://www.w3.org/2000/svg";class ho{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ll(l,t="text"){if(pl(l,document.baseURI)){const e=await fetch(l);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",l,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Bl{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:a=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=a,this.offsetY=o,i*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,p,b,v;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,p=0,b=0,v=1;break;case 90:m=0,p=1,b=1,v=0;break;case 270:m=0,p=-1,b=-1,v=0;break;case 0:m=1,p=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,v=-v);let w,x,_,A;m===0?(w=Math.abs(f-t[1])*i+a,x=Math.abs(h-t[0])*i+o,_=(t[3]-t[1])*i,A=(t[2]-t[0])*i):(w=Math.abs(h-t[0])*i+a,x=Math.abs(f-t[1])*i+o,_=(t[2]-t[0])*i,A=(t[3]-t[1])*i),this.transform=[m*i,p*i,b*i,v*i,w-m*i*h-b*i*f,x-p*i*h-v*i*f],this.width=_,this.height=A}get rawDims(){const t=this.viewBox;return me(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new Bl({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(t,e){const i=[t,e];return $t.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];$t.applyTransform(e,this.transform);const i=[t[2],t[3]];return $t.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return $t.applyInverseTransform(i,this.transform),i}}class Ef extends ha{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Q0(l){const t=l.length;let e=0;for(;e<t&&l[e].trim()==="";)e++;return l.substring(e,e+5).toLowerCase()==="data:"}function Tf(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function p5(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function g5(l,t="document.pdf"){if(typeof l!="string")return t;if(Q0(l))return ae('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(l);if(!i)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},a=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(a.test(o))return r(o);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const f of u)if(a.test(f))return r(f);const h=Array.from(i.searchParams.keys()).reverse();for(const f of h)if(a.test(f))return r(f)}if(i.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(h)return r(h[0])}return t}class g2{started=Object.create(null);times=[];time(t){t in this.started&&ae(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ae(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:a}of this.times)t.push(`${i.padEnd(e)} ${a-r}ms
`);return t.join("")}}function pl(l,t){const e=t?URL.parse(l,t):URL.parse(l);return e?.protocol==="http:"||e?.protocol==="https:"}function Un(l){l.preventDefault()}function ai(l){l.preventDefault(),l.stopPropagation()}function b5(l){console.log("Deprecated API usage: "+l)}class Jd{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,f==="-"?(o+=m,u+=p):f==="+"&&(o-=m,u-=p),new Date(Date.UTC(i,r,a,o,u,h))}}function v5(l,{scale:t=1,rotation:e=0}){const{width:i,height:r}=l.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new Bl({viewBox:a,userUnit:1,scale:t,rotation:e})}function Il(l){if(l.startsWith("#")){const t=parseInt(l.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(t=>parseInt(t)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ae(`Not a valid color format: "${l}"`),[0,0,0])}function y5(l){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of l.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;l.set(e,Il(i))}t.remove()}function Je(l){const{a:t,b:e,c:i,d:r,e:a,f:o}=l.getTransform();return[t,e,i,r,a,o]}function sr(l){const{a:t,b:e,c:i,d:r,e:a,f:o}=l.getTransform().invertSelf();return[t,e,i,r,a,o]}function oa(l,t,e=!1,i=!0){if(t instanceof Bl){const{pageWidth:r,pageHeight:a}=t.rawDims,{style:o}=l,u=Li.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${a}px`,m=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,p=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(o.width=m,o.height=p):(o.width=p,o.height=m)}i&&l.setAttribute("data-main-rotation",t.rotation)}class mr{constructor(){const{pixelRatio:t}=mr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,r,a=-1){let o=1/0,u=1/0,h=1/0;i=mr.capPixels(i,a),i>0&&(o=Math.sqrt(i/(t*e))),r!==-1&&(u=r/t,h=r/e);const f=Math.min(o,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const tf=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class x5{static get isDarkMode(){return me(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class w5{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),me(this,"commentForegroundColor",Il(i))}}function S5(l,t,e,i){i=Math.min(Math.max(i??1,0),1);const r=255*(1-i);return l=Math.round(l*i+r),t=Math.round(t*i+r),e=Math.round(e*i+r),[l,t,e]}function b2(l,t){const e=l[0]/255,i=l[1]/255,r=l[2]/255,a=Math.max(e,i,r),o=Math.min(e,i,r),u=(a+o)/2;if(a===o)t[0]=t[1]=0;else{const h=a-o;switch(t[1]=u<.5?h/(a+o):h/(2-a-o),a){case e:t[0]=((i-r)/h+(i<r?6:0))*60;break;case i:t[0]=((r-e)/h+2)*60;break;case r:t[0]=((e-i)/h+4)*60;break}}t[2]=u}function ef(l,t){const e=l[0],i=l[1],r=l[2],a=(1-Math.abs(2*r-1))*i,o=a*(1-Math.abs(e/60%2-1)),u=r-a/2;switch(Math.floor(e/60)){case 0:t[0]=a+u,t[1]=o+u,t[2]=u;break;case 1:t[0]=o+u,t[1]=a+u,t[2]=u;break;case 2:t[0]=u,t[1]=a+u,t[2]=o+u;break;case 3:t[0]=u,t[1]=o+u,t[2]=a+u;break;case 4:t[0]=o+u,t[1]=u,t[2]=a+u;break;case 5:case 6:t[0]=a+u,t[1]=u,t[2]=o+u;break}}function v2(l){return l<=.03928?l/12.92:((l+.055)/1.055)**2.4}function y2(l,t,e){ef(l,e),e.map(v2);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];ef(t,e),e.map(v2);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const x2=new Map;function A5(l,t){const e=l[0]+l[1]*256+l[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=x2.get(e);if(i)return i;const r=new Float32Array(9),a=r.subarray(0,3),o=r.subarray(3,6);b2(l,o);const u=r.subarray(6,9);b2(t,u);const h=u[2]<.5,f=h?12:4.5;if(o[2]=h?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),y2(o,u,a)<f){let m,p;h?(m=o[2],p=1):(m=0,p=o[2]);const b=.005;for(;p-m>b;){const v=o[2]=(m+p)/2;h===y2(o,u,a)<f?m=v:p=v}o[2]=h?p:m}return ef(o,a),i=$t.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),x2.set(e,i),i}function tb({html:l,dir:t,className:e},i){const r=document.createDocumentFragment();if(typeof l=="string"){const a=document.createElement("p");a.dir=t||"auto";const o=l.split(/(?:\r\n?|\n)/);for(let u=0,h=o.length;u<h;++u){const f=o[u];a.append(document.createTextNode(f)),u<h-1&&a.append(document.createElement("br"))}r.append(a)}else J4.render({xfaHtml:l,div:r,intent:"richText"});r.firstChild.classList.add("richText",e),i.append(r)}class xl{#t=null;#e=null;#n;#i=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,xl.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Un,{signal:e}),t.addEventListener("pointerdown",xl.#l,{signal:e}));const i=this.#i=document.createElement("div");i.className="buttons",t.append(i);const r=this.#n.toolbarPosition;if(r){const{style:a}=t,o=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ai(t)}#h(t){this.#n._focusEventsAllowed=!0,ai(t)}#f(t){const e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Un,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",xl.#c[t]),this.#f(i)&&i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#i.append(e,this.#g),this.#a=t}addComment(t,e=null){if(this.#r)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const r=this.#s=this.#g;e?(this.#i.insertBefore(i,e),this.#i.insertBefore(r,e)):this.#i.append(i,r),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#i.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#n);this.#f(e),this.#i.append(e,this.#g)}removeButton(t){switch(t){case"comment":this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const r=this.#i.querySelector(i);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class _5{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Un,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#n.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,e){let i=0,r=0;for(const a of t){const o=a.y+a.height;if(o<i)continue;const u=a.x+(e?a.width:0);if(o>i){r=u,i=o;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,i]}show(t,e,i){const[r,a]=this.#a(e,i),{style:o}=this.#e||=this.#i();t.append(this.#e),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,i,r){const a=document.createElement("button");a.classList.add("basic",t),a.tabIndex=0,a.setAttribute("data-l10n-id",e);const o=document.createElement("span");a.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",i);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(a.addEventListener("contextmenu",Un,{signal:u}),a.addEventListener("click",r,{signal:u})),this.#t.append(a)}}function eb(l,t,e){for(const i of e)t.addEventListener(i,l[i].bind(l))}class k5{#t=0;get id(){return`${_l}${this.#t++}`}}class Cf{#t=W4();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return me(this,"_isSVGFittingCanvas",a)}async#i(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(i.url=e,r=await Ll(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const a=Cf._isSVGFittingCanvas,o=new FileReader,u=new Image,h=new Promise((f,m)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,f()},o.onload=async()=>{const p=i.svgUrl=o.result;u.src=await a?`${p}#svgView(preserveAspectRatio(none))`:p},u.onerror=o.onerror=m});o.readAsDataURL(r),await h}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){ae(r),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:r,type:a}=t;return this.#i(`${e}_${i}_${r}_${a}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const i=await e;return this.#i(t,i)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class E5{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:e,post:i,type:a};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(o&&this.#t[this.#i].type===a){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Fl{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Li.platform;for(const[i,r,a={}]of t)for(const o of i){const u=o.startsWith("mac+");e&&u?(this.callbacks.set(o.slice(4),{callback:r,options:a}),this.allKeys.add(o.split("+").at(-1))):!e&&!u&&(this.callbacks.set(o,{callback:r,options:a}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:r,options:{bubbles:a=!1,args:o=[],checker:u=null}}=i;u&&!u(t,e)||(r.bind(t,...o,e)(),a||ai(e))}}class Mf{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return y5(t),me(this,"_colors",t)}convert(t){const e=Il(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((a,o)=>a===e[o]))return Mf._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?$t.makeHexColor(...e):t}}class Ds{#t=new AbortController;#e=null;#n=null;#i=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new E5;#l=null;#d=null;#h=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#b=!1;#y=!1;#v=!1;#k=null;#A=null;#x=null;#T=null;#S=!1;#_=null;#R=new k5;#C=!1;#M=!1;#I=!1;#N=null;#z=null;#F=null;#L=null;#q=null;#E=oe.NONE;#w=new Set;#O=null;#P=null;#H=null;#Y=null;#V=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#B=null;#$=null;#Q=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ds.prototype,e=o=>o.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return me(this,"_keyboardManager",new Fl([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#$.contains(u)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,i,r,a,o,u,h,f,m,p,b,v,w,x,_){const A=this._signal=this.#t.signal;this.#$=t,this.#Q=e,this.#J=i,this.#r=r,this.#l=a,this.#P=o,this.#V=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:A}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),u._on("setpreference",this.onSetPreference.bind(this),{signal:A}),u._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:A}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:A}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:A}),this.#lt(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#k=h.filterFactory,this.#H=f,this.#T=m||null,this.#b=p,this.#y=b,this.#v=v,this.#q=w||null,this.viewParameters={realScale:ho.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=_!==!1,a?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#p.clear(),this.#L?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#P?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#V=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return me(this,"hcmFilter",this.#H?this.#k.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return me(this,"direction",getComputedStyle(this.#$).direction)}get _highlightColors(){return me(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return me(this,"highlightColors",null);const e=new Map,i=!!this.#H;for(const[r,a]of t){const o=r.endsWith("_HCM");if(i&&o){e.set(r.replace("_HCM",""),a);continue}!i&&!o&&e.set(r,a)}return me(this,"highlightColors",e)}get highlightColorNames(){return me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,r){this.#l?.showDialog(this,t,e,i,r)}selectComment(t,e){this.#a.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),r=a=>{a.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await i}getSignature(t){this.#P?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#P}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#$.focus()}findParent(t,e){for(const i of this.#a.values()){const{x:r,y:a,width:o,height:u}=i.div.getBoundingClientRect();if(t>=r&&t<=r+o&&e>=a&&e<=a+u)return i}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ho.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#a.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:a,focusNode:o,focusOffset:u}=i,h=i.toString(),m=this.#W(i).closest(".textLayer"),p=this.getSelectionBoxes(m);if(!p)return;i.empty();const b=this.#tt(m),v=this.#E===oe.NONE,w=()=>{const x=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:r,anchorOffset:a,focusNode:o,focusOffset:u,text:h});v&&this.showAllEditors("highlight",!0,!0),e&&x?.editComment()};if(v){this.switchToMode(oe.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#at(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#W(t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(this.#_||=new _5(this),this.#_.show(i,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${_l}${t}`,i=this.#s.getRawValue(e);return i&&this.#s.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#_?.hide(),this.#O=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const r=this.#W(t).closest(".textLayer");if(!r){this.#O&&(this.#_?.hide(),this.#O=null,this.#D({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#O=e,this.#D({hasSelectedText:!0}),!(this.#E!==oe.HIGHLIGHT&&this.#E!==oe.NONE)&&(this.#E===oe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#E===oe.HIGHLIGHT?this.#tt(r):null;if(a?.toggleDrawing(),this.#M){const o=new AbortController,u=this.combinedSignal(o),h=f=>{f.type==="pointerup"&&f.button!==0||(o.abort(),a?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else a?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#E===oe.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#z=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#z)return;const[t,e]=this.#z;this.#z=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#N)return;this.#N=new AbortController;const t=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#N?.abort(),this.#N=null}#it(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#nt(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#it()}removeEditListeners(){this.#ht(),this.#nt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#w){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const o of this.#u)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){ae(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const h of i){const f=await r.deserialize(h);if(!f)return;a.push(f)}const o=()=>{for(const h of a)this.#rt(h);this.#st(a)},u=()=>{for(const h of a)h.remove()};this.addCommands({cmd:o,undo:u,mustExec:!0})}catch(a){ae(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==oe.NONE&&!this.isEditorHandlingKeyboard&&Ds._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(t){Object.entries(t).some(([i,r])=>this.#X[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#E===oe.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Ae.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#it(),this.#D({isEditing:this.#E!==oe.NONE,isEmpty:this.#Z(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#nt(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#C?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,r=!1,a=!1){if(this.#E!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#E===oe.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#E=t,t===oe.NONE){this.setEditingState(!1),this.#mt();for(const o of this.#i.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const o of this.#i.values())o.addStandaloneCommentButton();t===oe.SIGNATURE&&await this.#P?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const o of this.#a.values())o.updateMode(t);if(t===oe.POPUP){this.#n||=await this.#V.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const o=new Set,u=[];for(const h of this.#i.values()){const{annotationElementId:f,hasComment:m,deleted:p}=h;f&&o.add(f),m&&!p&&u.push(h.getData())}for(const h of this.#n){const{id:f,popupRef:m,contentsObj:p}=h;m&&p?.str&&!o.has(f)&&!this.#g.has(f)&&u.push(h)}this.#l?.showSidebar(u)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const o of this.#i.values())o.uid===e?(this.setSelected(o),a?o.editComment():r?o.enterInEditMode():o.focus()):o.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Ae.CREATE:this.currentLayer.addNewEditor(e);return;case Ae.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#w)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const a of this.#i.values())a.editorType===t&&a.show(e);(this.#Y?.get(Ae.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Ae.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#C){this.#C=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#i.values())e.enable()}}#mt(){if(this.unselectAll(),this.#C){this.#C=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const e of this.#i.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#rt(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#pt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Z()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Z()})}addCommands(t){this.#c.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Z()})}cleanUndoStack(t){this.#c.cleanType(t)}#Z(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],i=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},r=()=>{for(const a of e)this.#rt(a)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#st(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#st(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#E!==oe.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=t,this.#j[1]+=e;const[r,a]=this.#j,o=[...this.#w],u=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const h of o)this.#i.has(h.id)&&(h.translateInPage(r,a),h.translationDone())},undo:()=>{for(const h of o)this.#i.has(h.id)&&(h.translateInPage(-r,-a),h.translationDone())},mustExec:!1})},u);for(const h of o)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#w)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:r,y:a,pageIndex:o},u]of t)u.newX=r,u.newY=a,u.newPageIndex=o,e||=r!==u.savedX||a!==u.savedY||o!==u.savedPageIndex;if(!e)return!1;const i=(r,a,o,u)=>{if(this.#i.has(r.id)){const h=this.#a.get(u);h?r._setParentAndPosition(h,a,o):(r.pageIndex=u,r.x=a,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:o,newPageIndex:u}]of t)i(r,a,o,u)},undo:()=>{for(const[r,{savedX:a,savedY:o,savedPageIndex:u}]of t)i(r,a,o,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const i of this.#m.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#E}isEditingMode(){return this.#E!==oe.NONE}get imageManager(){return me(this,"imageManager",new Cf)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:r,width:a,height:o}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,m,p,b)=>({x:(m-r)/o,y:1-(f+p-i)/a,width:b/o,height:p/a});break;case"180":u=(f,m,p,b)=>({x:1-(f+p-i)/a,y:1-(m+b-r)/o,width:p/a,height:b/o});break;case"270":u=(f,m,p,b)=>({x:1-(m+b-r)/o,y:(f-i)/a,width:b/o,height:p/a});break;default:u=(f,m,p,b)=>({x:(f-i)/a,y:(m-r)/o,width:p/a,height:b/o});break}const h=[];for(let f=0,m=e.rangeCount;f<m;f++){const p=e.getRangeAt(f);if(!p.collapsed)for(const{x:b,y:v,width:w,height:x}of p.getClientRects())w===0||x===0||h.push(u(b,v,w,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#s.getRawValue(e);i&&(this.#E===oe.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const r=this.#L?.get(t);r&&(r.setCanvas(e,i),this.#L.delete(t))}addMissingCanvas(t,e){(this.#L||=new Map).set(t,e)}}class ur{#t=null;#e=!1;#n=null;#i=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,ur.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){ur._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",ur.#f.missing),e.setAttribute("data-l10n-id",ur.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",Un,{signal:i}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#s=!0,r(a))},{signal:i}),await this.#m(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await ur._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:a=!1}){i&&(this.#l=i,this.#d=r),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#m(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",ur.#f[this.#g]),this.#i?.setAttribute("data-l10n-id",ur.#f[`${this.#g}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const r=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class u0{#t=null;#e=null;#n=!1;#i=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#i.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(i.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:r,y:a,width:o,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/o,(e+i-a)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=this.#i._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",Un,{signal:i}),e&&(t.addEventListener("focusin",a=>{this.#i._focusEventsAllowed=!1,ai(a)},{capture:!0,signal:i}),t.addEventListener("focusout",a=>{this.#i._focusEventsAllowed=!0,ai(a)},{capture:!0,signal:i})),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#n=!0,r(a))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,r;if(e)[i,r]=e;else{[i,r]=this.#i.commentButtonPosition;const{width:m,height:p,x:b,y:v}=this.#i;i=b+i*m,r=v+r*p}const a=this.#i.parent.boundingClientRect,{x:o,y:u,width:h,height:f}=a;this.#i._uiManager.editComment(this.#i,o+i*h,u+r*f,{...t,parentDimensions:a})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#r=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#a=t,this.data=t,this.#o=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#r=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class J0{#t;#e=!1;#n=null;#i;#a;#r;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:a=null,onPinchEnd:o=null,signal:u}){this.#t=t,this.#n=i,this.#i=e,this.#a=r,this.#r=a,this.#s=o,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/mr.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,a=AbortSignal.any([this.#c,r.signal]),o=this.#t,u={capture:!0,signal:a,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ai(f),h(f))},u),o.addEventListener("pointerup",h,u),o.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),a=this.#t,o={signal:r,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),o);const u=this.#m.bind(this);a.addEventListener("touchend",u,o),a.addEventListener("touchcancel",u,o),o.capture=!0,a.addEventListener("pointerdown",ai,o),a.addEventListener("pointermove",ai,o),a.addEventListener("pointercancel",ai,o),a.addEventListener("pointerup",ai,o),this.#a?.()}if(ai(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;ai(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:a}=e,{screenX:o,screenY:u}=i,h=this.#l,{touch0X:f,touch0Y:m,touch1X:p,touch1Y:b}=h,v=p-f,w=b-m,x=o-r,_=u-a,A=Math.hypot(x,_)||1,E=Math.hypot(v,w)||1;if(!this.#e&&Math.abs(E-A)<=J0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=a,h.touch1X=o,h.touch1Y=u,!this.#e){this.#e=!0;return}const C=[(r+o)/2,(a+u)/2];this.#r?.(C,E,A)}#m(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ai(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class Qt{#t=null;#e=null;#n=null;#i=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#b=!1;#y=!1;#v=null;#k=0;#A=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#_=Qt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Mf;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Qt.prototype._resizeWithKeyboard,e=Ds.TRANSLATE_SMALL,i=Ds.TRANSLATE_BIG;return me(this,"_resizerKeyboardManager",new Fl([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Qt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,o];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new T5({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Qt._l10n??=t,Qt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Qt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Qt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ge("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[a,o]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/a,this.y=(e+r)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,r]=this.parentDimensions;this.setAt(t*i,e*r,this.width*i,this.height*r),this._onTranslated()}#R([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[r,a]}=this;if(this.x+=t/r,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[h,f]=this.getBaseTranslation();o+=h,u+=f;const{style:m}=i;m.left=`${(100*o).toFixed(2)}%`,m.top=`${(100*u).toFixed(2)}%`,this._onTranslating(o,u),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Qt,r=i/t,a=i/e;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:a,y:o,width:u,height:h}=this;if(u*=i,h*=r,a*=i,o*=r,this._mustFixPosition)switch(t){case 0:a=$i(a,0,i-u),o=$i(o,0,r-h);break;case 90:a=$i(a,0,i-h),o=$i(o,u,r);break;case 180:a=$i(a,u,i),o=$i(o,h,r);break;case 270:a=$i(a,h,i),o=$i(o,0,r-u);break}this.x=a/=i,this.y=o/=r;const[f,m]=this.getBaseTranslation();a+=f,o+=m,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#C(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Qt.#C(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Qt.#C(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#N.bind(this,i),{signal:e}),r.addEventListener("contextmenu",Un,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#c)}#N(t,e){e.preventDefault();const{isMac:i}=Li.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ai,{passive:!1,signal:o}),window.addEventListener("contextmenu",Un,{signal:o}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}#z(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=this.#d;this.#d=null;const a=this.x,o=this.y,u=this.width,h=this.height;a===t&&o===e&&u===i&&h===r||this.addCommands({cmd:this.#z.bind(this,a,o,u,h),undo:this.#z.bind(this,t,e,i,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#L(t,e){const[i,r]=this.parentDimensions,a=this.x,o=this.y,u=this.width,h=this.height,f=Qt.MIN_SIZE/i,m=Qt.MIN_SIZE/r,p=this.#M(this.rotation),b=($,X)=>[p[0]*$+p[2]*X,p[1]*$+p[3]*X],v=this.#M(360-this.rotation),w=($,X)=>[v[0]*$+v[2]*X,v[1]*$+v[3]*X];let x,_,A=!1,E=!1;switch(t){case"topLeft":A=!0,x=($,X)=>[0,0],_=($,X)=>[$,X];break;case"topMiddle":x=($,X)=>[$/2,0],_=($,X)=>[$/2,X];break;case"topRight":A=!0,x=($,X)=>[$,0],_=($,X)=>[0,X];break;case"middleRight":E=!0,x=($,X)=>[$,X/2],_=($,X)=>[0,X/2];break;case"bottomRight":A=!0,x=($,X)=>[$,X],_=($,X)=>[0,0];break;case"bottomMiddle":x=($,X)=>[$/2,X],_=($,X)=>[$/2,0];break;case"bottomLeft":A=!0,x=($,X)=>[0,X],_=($,X)=>[$,0];break;case"middleLeft":E=!0,x=($,X)=>[0,X/2],_=($,X)=>[$,X/2];break}const C=x(u,h),N=_(u,h);let D=b(...N);const F=Qt._round(a+D[0]),B=Qt._round(o+D[1]);let Y=1,j=1,et,ut;if(e.fromKeyboard)({deltaX:et,deltaY:ut}=e);else{const{screenX:$,screenY:X}=e,[vt,mt]=this.#l;[et,ut]=this.screenToPageTranslation($-vt,X-mt),this.#l[0]=$,this.#l[1]=X}if([et,ut]=w(et/i,ut/r),A){const $=Math.hypot(u,h);Y=j=Math.max(Math.min(Math.hypot(N[0]-C[0]-et,N[1]-C[1]-ut)/$,1/u,1/h),f/u,m/h)}else E?Y=$i(Math.abs(N[0]-C[0]-et),f,1)/u:j=$i(Math.abs(N[1]-C[1]-ut),m,1)/h;const H=Qt._round(u*Y),it=Qt._round(h*j);D=b(..._(H,it));const R=F-D[0],nt=B-D[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=H,this.height=it,this.x=R,this.y=nt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new xl(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(ur.initialize(Qt._l10n),this.#n=new ur(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.#i||=new u0(this)}addStandaloneCommentButton(){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:r}}=this.#i;return{text:e,richText:t,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new u0(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#i||=new u0(this),this.#i.setInitialText(t,i),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new u0(this),this.#i.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[a]=this.pageDimensions,[o]=this.pageTranslation,u=o+a+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#i.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[r,a]=this.getInitialTranslation();return this.translate(r,a),eb(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new J0({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#E.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#E(t,e,i){let a=.7*(i/e)+1-.7;if(a===1)return;const o=this.#M(this.rotation),u=(F,B)=>[o[0]*F+o[2]*B,o[1]*F+o[3]*B],[h,f]=this.parentDimensions,m=this.x,p=this.y,b=this.width,v=this.height,w=Qt.MIN_SIZE/h,x=Qt.MIN_SIZE/f;a=Math.max(Math.min(a,1/b,1/v),w/b,x/v);const _=Qt._round(b*a),A=Qt._round(v*a);if(_===b&&A===v)return;this.#u||=[m,p,b,v];const E=u(b/2,v/2),C=Qt._round(m+E[0]),N=Qt._round(p+E[1]),D=u(_/2,A/2);this.x=C-D[0],this.y=N-D[1],this.width=_,this.height=A,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=Li.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#P(t);return}this.#O(t)}#O(t){const{isMac:e}=Li.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:a},u=f=>{r.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#O(f),i&&this._onStopDragging()};e&&(this.#k=t.clientX,this.#A=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:p,pointerId:b}=f;if(b!==this.#s){ai(f);return}const[v,w]=this.screenToPageTranslation(m-this.#k,p-this.#A);this.#k=m,this.#A=p,this._uiManager.dragSelectedEditors(v,w)},o),window.addEventListener("touchmove",ai,o),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&u(f),ai(f)},o));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}ai(f)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[a,o]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,m=e/r,p=this.x*a,b=this.y*o,v=this.width*a,w=this.height*o;switch(i){case 0:return[p+f+u,o-b-m-w+h,p+f+v+u,o-b-m+h];case 90:return[p+m+u,o-b+f+h,p+m+w+u,o-b+f+v+h];case 180:return[p-f-v+u,o-b+m+h,p-f+u,o-b+m+w+h];case 270:return[p-m-w+u,o-b-f-v+h,p-m+u,o-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,a,o]=t,u=a-i,h=o-r;switch(this.rotation){case 0:return[i,e-o,u,h];case 90:return[i,e-r,h,u];case 180:return[a,e-r,u,h];case 270:return[a,e-o,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Qt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:r,deleted:a,richText:o},uid:u,pageIndex:h,creationDate:f,modificationDate:m}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:f,modificationDate:i||m,popupRef:!a,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return e<o&&r>0&&t<a&&i>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[a,o]=r.pageDimensions,[u,h,f,m]=r.getRectInCurrentCoords(t.rect,o);return r.x=u/a,r.y=h/o,r.width=f/a,r.height=m/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#B(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,r,a,o]=this.getPDFRect();return[Qt._round(i+(a-i)*t),Qt._round(r+(o-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const o=this.#Y.bind(this),u=this.#V.bind(this),h=this._uiManager._signal;for(const f of this.#e){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",o,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#X.bind(this,m),{signal:h}),f.setAttribute("data-l10n-id",Qt._l10nResizer[m])}}const i=this.#e[0];let r=0;for(const o of e){if(o===i)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==r){if(a<r)for(let u=0;u<r-a;u++)this.#c.append(this.#c.firstChild);else if(a>r)for(let u=0;u<a-r;u++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const u of e){const f=this.#e[o++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Qt._l10nResizer[f])}}this.#j(0),this.#y=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){Qt._resizerKeyboardManager.exec(this,t)}#V(t){this.#y&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#X(t){this.#g=this.#y?t:""}#j(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#y&&this.#L(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#B(){this.#y=!1,this.#j(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:i}=t;let r=this.#x.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(i),this.#x.size===0&&(this.#x=null)},Qt._telemetryTimeout),this.#x.set(i,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class T5 extends Qt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const w2=3285377520,Bn=4294901760,ar=65535;class ib{constructor(t){this.h1=t?t&4294967295:w2,this.h2=t?t&4294967295:w2}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let x=0,_=t.length;x<_;x++){const A=t.charCodeAt(x);A<=255?e[i++]=A:(e[i++]=A>>>8,e[i++]=A&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,a=i-r*4,o=new Uint32Array(e.buffer,0,r);let u=0,h=0,f=this.h1,m=this.h2;const p=3432918353,b=461845907,v=p&ar,w=b&ar;for(let x=0;x<r;x++)x&1?(u=o[x],u=u*p&Bn|u*v&ar,u=u<<15|u>>>17,u=u*b&Bn|u*w&ar,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=o[x],h=h*p&Bn|h*v&ar,h=h<<15|h>>>17,h=h*b&Bn|h*w&ar,m^=h,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,a){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*p&Bn|u*v&ar,u=u<<15|u>>>17,u=u*b&Bn|u*w&ar,r&1?f^=u:m^=u}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Bn|t*36045&ar,e=e*4283543511&Bn|((e<<16|t>>>16)*2950163797&Bn)>>>16,t^=e>>>1,t=t*444984403&Bn|t*60499&ar,e=e*3301882366&Bn|((e<<16|t>>>16)*3120437893&Bn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const nf=Object.freeze({map:null,hash:"",transfer:void 0});class Rf{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#i.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#i.get(t)}remove(t){const e=this.#i.get(t);if(e!==void 0&&(e instanceof Qt&&this.#n.delete(e.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#i.values())if(i instanceof Qt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#i.get(t);let r=!1;if(i!==void 0)for(const[a,o]of Object.entries(e))i[a]!==o&&(r=!0,i[a]=o);else r=!0,this.#i.set(t,e);r&&this.#a(),e instanceof Qt&&((this.#n||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new nb(this)}get serializable(){if(this.#i.size===0)return nf;const t=new Map,e=new ib,i=[],r=Object.create(null);let a=!1;for(const[o,u]of this.#i){const h=u instanceof Qt?u.serialize(!1,r):u;h&&(t.set(o,h),e.update(`${o}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:nf}get editorStats(){let t=null;const e=new Map;let i=0,r=0;for(const a of this.#i.values()){if(!(a instanceof Qt)){a.popup&&(a.popup.deleted?r+=1:i+=1);continue}a.isCommentDeleted?r+=1:a.hasEditedComment&&(i+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:u}=o;e.has(u)||e.set(u,Object.getPrototypeOf(a).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,m]of Object.entries(o)){if(f==="type")continue;let p=h.get(f);p||(p=new Map,h.set(f,p));const b=p.get(m)??0;p.set(m,b+1)}}if((r>0||i>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:i}),!t)return null;for(const[a,o]of e)t[a]=o.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#n?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const e of this.#n.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class nb extends Rf{#t;constructor(t){super();const{map:e,hash:i,transfer:r}=t.serializable,a=structuredClone(e,r?{transfer:r}:null);this.#t={map:a,hash:i,transfer:r}}get print(){Ge("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return me(this,"modifiedIds",{ids:new Set,hash:""})}}class C5{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(_e(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:a,style:o}=t,u=new FontFace(r,a,o);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),i?.(t)}catch{ae(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Ge("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw ae(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return me(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return me(this,"isSyncFontLoadingSupported",qi||Li.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(_e(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return me(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(N,D){return N.charCodeAt(D)<<24|N.charCodeAt(D+1)<<16|N.charCodeAt(D+2)<<8|N.charCodeAt(D+3)&255}function r(N,D,F,B){const Y=N.substring(0,D),j=N.substring(D+F);return Y+B+j}let a,o;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function m(N,D){if(++f>30){ae("Load test font never loaded."),D();return}if(h.font="30px "+N,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(m.bind(null,N,D))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,p.length,p);const w=16,x=1482184792;let _=i(b,w);for(a=0,o=p.length-3;a<o;a+=4)_=_-x+i(p,a)|0;a<p.length&&(_=_-x+i(p+"XXX",a)|0),b=r(b,w,4,l5(_));const A=`url(data:font/opentype;base64,${btoa(b)});`,E=`@font-face {font-family:"${p}";src:${A}}`;this.insertRule(E);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const N of[t.loadedName,p]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=N,C.append(D)}this._document.body.append(C),m(p,()=>{C.remove(),e.complete()})}}class M5{#t;constructor(t,e=null,i,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Q4(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(o){ae(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=a}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function R5(l){if(l instanceof URL)return l.href;if(typeof l=="string"){if(qi)return l;const t=URL.parse(l,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function D5(l){if(qi&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return zl(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="object"&&!isNaN(l?.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function h0(l){if(typeof l!="string")return null;if(l.endsWith("/"))return l;throw new Error(`Invalid factory url: "${l}" must include trailing slash.`)}const rf=l=>typeof l=="object"&&Number.isInteger(l?.num)&&l.num>=0&&Number.isInteger(l?.gen)&&l.gen>=0,N5=l=>typeof l=="object"&&typeof l?.name=="string",O5=f5.bind(null,rf,N5);class z5{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:a}=i;if(a.aborted){ae("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);r=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const d0={DATA:1,ERROR:2},yi={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S2(){}function ln(l){if(l instanceof Rs||l instanceof Qd||l instanceof m2||l instanceof I0||l instanceof Cd)return l;switch(l instanceof Error||typeof l=="object"&&l!==null||Ge('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new Rs(l.message);case"InvalidPDFException":return new Qd(l.message);case"PasswordException":return new m2(l.message,l.code);case"ResponseException":return new I0(l.message,l.status,l.missing);case"UnknownErrorException":return new Cd(l.message,l.details)}return new Cd(l.message,l.toString())}class gl{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===d0.DATA)r.resolve(t.data);else if(t.callback===d0.ERROR)r.reject(ln(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(o){a.postMessage({sourceName:i,targetName:r,callback:d0.DATA,callbackId:t.callbackId,data:o})},function(o){a.postMessage({sourceName:i,targetName:r,callback:d0.ERROR,callbackId:t.callbackId,reason:ln(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(o){a.reject(o)}return a.promise}sendWithStream(t,e,i,r){const a=this.streamId++,o=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:u,action:t,streamId:a,data:e,desiredSize:f.desiredSize},r),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,h.postMessage({sourceName:o,targetName:u,stream:yi.PULL,streamId:a,desiredSize:f.desiredSize}),m.promise},cancel:f=>{_e(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:o,targetName:u,stream:yi.CANCEL,streamId:a,reason:ln(f)}),m.promise}},i)}#n(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,o=this,u=this.actionHandler[t.action],h={enqueue(f,m=1,p){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:yi.ENQUEUE,streamId:e,chunk:f},p)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:yi.CLOSE,streamId:e}),delete o.streamSinks[e])},error(f){_e(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:yi.ERROR,streamId:e,reason:ln(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){a.postMessage({sourceName:i,targetName:r,stream:yi.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:yi.START_COMPLETE,streamId:e,reason:ln(f)})})}#i(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,o=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case yi.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(ln(t.reason));break;case yi.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(ln(t.reason));break;case yi.PULL:if(!u){a.postMessage({sourceName:i,targetName:r,stream:yi.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||S2).then(function(){a.postMessage({sourceName:i,targetName:r,stream:yi.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:yi.PULL_COMPLETE,streamId:e,reason:ln(f)})});break;case yi.ENQUEUE:if(_e(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case yi.CLOSE:if(_e(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#a(o,e);break;case yi.ERROR:_e(o,"error should have stream controller"),o.controller.error(ln(t.reason)),this.#a(o,e);break;case yi.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(ln(t.reason)),this.#a(o,e);break;case yi.CANCEL:if(!u)break;const h=ln(t.reason);Promise.try(u.onCancel||S2,h).then(function(){a.postMessage({sourceName:i,targetName:r,stream:yi.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:yi.CANCEL_COMPLETE,streamId:e,reason:ln(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class rb{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ge("Abstract method `_createCanvas` called.")}}class L5 extends rb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class sb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ge("Abstract method `_fetch` called.")}}class A2 extends sb{async _fetch(t){const e=await Ll(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):zl(e)}}class ab{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,a){return"none"}destroy(t=!1){}}class B5 extends ab{#t;#e;#n;#i;#a;#r;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#a=e}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#n){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#a.createElementNS(Ur,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#a.createElementNS(Ur,"defs"),t.append(i),i.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let p=0;p<256;p++)f[p]=h[p]/255;const m=f.join(",");return[m,m,m]}const[e,i,r]=t,a=new Array(256),o=new Array(256),u=new Array(256);for(let h=0;h<256;h++)a[h]=e[h]/255,o[h]=i[h]/255,u[h]=r[h]/255;return[a.join(","),o.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(Q0(e)?ae('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=K4(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,r,a]=this.#d(t),o=t.length===1?i:`${i}${r}${a}`;if(e=this.#o.get(o),e)return this.#o.set(t,e),e;const u=`g_${this.#i}_transfer_map_${this.#s++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(o,h);const f=this.#m(u);return this.#p(i,r,a,f),h}addHCMFilter(t,e){const i=`${t}-${e}`,r="base";let a=this.#c.get(r);if(a?.key===i||(a?(a.filter?.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},this.#c.set(r,a)),!t||!e))return a.url;const o=this.#y(t);t=$t.makeHexColor(...o);const u=this.#y(e);if(e=$t.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const h=new Array(256);for(let v=0;v<=255;v++){const w=v/255;h[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=h.join(","),m=`g_${this.#i}_hcm_filter`,p=a.filter=this.#m(m);this.#p(f,f,f,p),this.#g(p);const b=(v,w)=>{const x=o[v]/255,_=u[v]/255,A=new Array(w+1);for(let E=0;E<=w;E++)A[E]=x+E/w*(_-x);return A.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),p),a.url=this.#h(m),a.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),r=`alpha_${i}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;const a=`g_${this.#i}_alpha_map_${this.#s++}`,o=this.#h(a);this.#o.set(t,o),this.#o.set(r,o);const u=this.#m(a);return this.#b(i,u),o}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,r;if(t?([i]=this.#d([t]),r=`luminosity_${i}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;const a=`g_${this.#i}_luminosity_map_${this.#s++}`,o=this.#h(a);this.#o.set(t,o),this.#o.set(r,o);const u=this.#m(a);return this.#f(u),t&&this.#b(i,u),o}addHighlightHCMFilter(t,e,i,r,a){const o=`${e}-${i}-${r}-${a}`;let u=this.#c.get(t);if(u?.key===o||(u?(u.filter?.remove(),u.key=o,u.url="none",u.filter=null):(u={key:o,url:"none",filter:null},this.#c.set(t,u)),!e||!i))return u.url;const[h,f]=[e,i].map(this.#y.bind(this));let m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,v]=[r,a].map(this.#y.bind(this));p<m&&([m,p,b,v]=[p,m,v,b]),this.#l.style.color="";const w=(A,E,C)=>{const N=new Array(256),D=(p-m)/C,F=A/255,B=(E-A)/(255*C);let Y=0;for(let j=0;j<=C;j++){const et=Math.round(m+j*D),ut=F+j*B;for(let H=Y;H<=et;H++)N[H]=ut;Y=et+1}for(let j=Y;j<256;j++)N[j]=N[Y-1];return N.join(",")},x=`g_${this.#i}_hcm_${t}_filter`,_=u.filter=this.#m(x);return this.#g(_),this.#p(w(b[0],v[0],5),w(b[1],v[1],5),w(b[2],v[2],5),_),u.url=this.#h(x),u.url}destroy(t=!1){t&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(t){const e=this.#a.createElementNS(Ur,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(Ur,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#a.createElementNS(Ur,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const r=this.#a.createElementNS(Ur,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)}#p(t,e,i,r){const a=this.#a.createElementNS(Ur,"feComponentTransfer");r.append(a),this.#u(a,"feFuncR",t),this.#u(a,"feFuncG",e),this.#u(a,"feFuncB",i)}#b(t,e){const i=this.#a.createElementNS(Ur,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#y(t){return this.#l.style.color=t,Il(getComputedStyle(this.#l).getPropertyValue("color"))}}class ob{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ge("Abstract method `_fetch` called.")}}class _2 extends ob{async _fetch(t){const e=await Ll(t,"arraybuffer");return new Uint8Array(e)}}class lb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ge("Abstract method `_fetch` called.")}}class k2 extends lb{async _fetch(t){const e=await Ll(t,"arraybuffer");return new Uint8Array(e)}}qi&&ae("Please use the `legacy` build in Node.js environments.");async function Df(l){const e=await process.getBuiltinModule("fs").promises.readFile(l);return new Uint8Array(e)}class I5 extends ab{}class F5 extends rb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class P5 extends sb{async _fetch(t){return Df(t)}}class U5 extends ob{async _fetch(t){return Df(t)}}class H5 extends lb{async _fetch(t){return Df(t)}}const Za="__forcedDependency",{floor:E2,ceil:T2}=Math;function f0(l,t,e,i,r,a){l[t*4+0]=Math.min(l[t*4+0],e),l[t*4+1]=Math.min(l[t*4+1],i),l[t*4+2]=Math.max(l[t*4+2],r),l[t*4+3]=Math.max(l[t*4+3],a)}const sf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class j5{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===sf}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const m0=(l,t)=>{if(!l)return;let e=l.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},l.set(t,e)),e};class G5{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Za]:[]};#n=new Map;#i=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#m;#u;#p;constructor(t,e,i=!1){this.#f=t.width,this.#g=t.height,this.#b(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,e){const i=new ArrayBuffer(t*4);this.#m=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(sf,e.length)):this.#u.fill(sf)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Za]:{__proto__:this.#e[Za]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const i=this.#i.pop();return i!==void 0&&(m0(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const e=this.#i.pop();return e!==void 0&&(m0(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(m0(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push($t.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#n.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Za,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Za,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,r,a,o){const u=$t.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];$t.axialAlignedBoundingBox([i,a,r,o],u,h);const f=$t.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,i,r,a,o){const u=this.#s;if(u[0]===1/0)return this;const h=$t.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(u[0]===-1/0)return $t.axialAlignedBoundingBox([i,a,r,o],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return $t.axialAlignedBoundingBox([i,a,r,o],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,i,r=1,a=0,o=0,u){const h=i.bbox;let f,m;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(i),f!==!1&&(m=[0,0,0,0],$t.axialAlignedBoundingBox(h,i.fontMatrix,m),(r!==1||a!==0||o!==0)&&$t.scaleMinMax([r,0,0,-r,a,o],m),f)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!u)return this.recordFullPageBBox(t);const p=u();return h&&m&&f===void 0&&(f=m[0]<=a-p.actualBoundingBoxLeft&&m[2]>=a+p.actualBoundingBoxRight&&m[1]<=o-p.actualBoundingBoxAscent&&m[3]>=o+p.actualBoundingBoxDescent,this.#h.set(i,f),f)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,a-p.actualBoundingBoxLeft,a+p.actualBoundingBoxRight,o-p.actualBoundingBoxAscent,o+p.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,r=this.#t,a=this.#e;for(const o of e)o in this.#t?i.add(r[o]):o in a&&a[o].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#l.add(this.#n.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Za]),this.#p){const i=m0(this.#p,t),{dependencies:r}=i;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#a.forEach(r.add,r),r.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=E2(this.#o[0]*256/this.#f),r=E2(this.#o[1]*256/this.#g),a=T2(this.#o[2]*256/this.#f),o=T2(this.#o[3]*256/this.#g);f0(this.#m,t,i,r,a,o);for(const u of this.#l)u!==t&&f0(this.#m,u,i,r,a,o);for(const u of this.#i)u!==t&&f0(this.#m,u,i,r,a,o);for(const u of this.#a)u!==t&&f0(this.#m,u,i,r,a,o);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new j5(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class F0{#t;#e;#n;#i=0;#a=0;constructor(t,e,i){if(t instanceof F0&&t.#n===!!i)return t;this.#t=t,this.#e=e,this.#n=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,r,a,o){return this.#n||this.#t.recordClipBox(this.#e,e,i,r,a,o),this}recordBBox(t,e,i,r,a,o){return this.#n||this.#t.recordBBox(this.#e,e,i,r,a,o),this}recordCharacterBBox(t,e,i,r,a,o,u){return this.#n||this.#t.recordCharacterBBox(this.#e,e,i,r,a,o,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const In={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},zi={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function af(l,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),l.clip(r)}class Nf{isModifyingCurrentTransform(){return!1}getPattern(){Ge("Abstract method `getPattern` called.")}}class q5 extends Nf{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let a;if(r===zi.STROKE||r===zi.FILL){const o=e.current.getClippedPathBoundingBox(r,Je(t))||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-o[0],-o[1]),i=$t.transform(i,[1,0,0,1,o[0],o[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),af(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=t.createPattern(f.canvas,"no-repeat");const p=new DOMMatrix(i);a.setTransform(p)}else af(t,this._bbox),a=this._createGradient(t);return a}}function Dd(l,t,e,i,r,a,o,u){const h=t.coords,f=t.colors,m=l.data,p=l.width*4;let b;h[e+1]>h[i+1]&&(b=e,e=i,i=b,b=a,a=o,o=b),h[i+1]>h[r+1]&&(b=i,i=r,r=b,b=o,o=u,u=b),h[e+1]>h[i+1]&&(b=e,e=i,i=b,b=a,a=o,o=b);const v=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,x=(h[i]+t.offsetX)*t.scaleX,_=(h[i+1]+t.offsetY)*t.scaleY,A=(h[r]+t.offsetX)*t.scaleX,E=(h[r+1]+t.offsetY)*t.scaleY;if(w>=E)return;const C=f[a],N=f[a+1],D=f[a+2],F=f[o],B=f[o+1],Y=f[o+2],j=f[u],et=f[u+1],ut=f[u+2],H=Math.round(w),it=Math.round(E);let R,nt,$,X,vt,mt,Et,z;for(let P=H;P<=it;P++){if(P<_){const Lt=P<w?0:(w-P)/(w-_);R=v-(v-x)*Lt,nt=C-(C-F)*Lt,$=N-(N-B)*Lt,X=D-(D-Y)*Lt}else{let Lt;P>E?Lt=1:_===E?Lt=0:Lt=(_-P)/(_-E),R=x-(x-A)*Lt,nt=F-(F-j)*Lt,$=B-(B-et)*Lt,X=Y-(Y-ut)*Lt}let at;P<w?at=0:P>E?at=1:at=(w-P)/(w-E),vt=v-(v-A)*at,mt=C-(C-j)*at,Et=N-(N-et)*at,z=D-(D-ut)*at;const ht=Math.round(Math.min(R,vt)),pt=Math.round(Math.max(R,vt));let Bt=p*P+ht*4;for(let Lt=ht;Lt<=pt;Lt++)at=(R-Lt)/(R-vt),at<0?at=0:at>1&&(at=1),m[Bt++]=nt-(nt-mt)*at|0,m[Bt++]=$-($-Et)*at|0,m[Bt++]=X-(X-z)*at|0,m[Bt++]=255}}function $5(l,t,e){const i=t.coords,r=t.colors;let a,o;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(i.length/u)-1,f=u-1;for(a=0;a<h;a++){let m=a*u;for(let p=0;p<f;p++,m++)Dd(l,e,i[m],i[m+1],i[m+u],r[m],r[m+1],r[m+u]),Dd(l,e,i[m+u+1],i[m+1],i[m+u],r[m+u+1],r[m+1],r[m+u])}break;case"triangles":for(a=0,o=i.length;a<o;a+=3)Dd(l,e,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class V5 extends Nf{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-h,p=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),v=f/p,w=m/b,x={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/v,scaleY:1/w},_=p+4,A=b+4,E=i.getCanvas("mesh",_,A),C=E.context,N=C.createImageData(p,b);if(e){const F=N.data;for(let B=0,Y=F.length;B<Y;B+=4)F[B]=e[0],F[B+1]=e[1],F[B+2]=e[2],F[B+3]=255}for(const F of this._figures)$5(N,F,x);return C.putImageData(N,2,2),{canvas:E.canvas,offsetX:u-2*v,offsetY:h-2*w,scaleX:v,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,r){af(t,this._bbox);const a=new Float32Array(2);if(r===zi.SHADING)$t.singularValueDecompose2dScale(Je(t),a);else if(this.matrix){$t.singularValueDecompose2dScale(this.matrix,a);const[u,h]=a;$t.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=u,a[1]*=h}else $t.singularValueDecompose2dScale(e.baseTransform,a);const o=this._createMeshCanvas(a,r===zi.SHADING?null:this._background,e.cachedCanvases);return r!==zi.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class Y5 extends Nf{getPattern(){return"hotpink"}}function X5(l){switch(l[0]){case"RadialAxial":return new q5(l);case"Mesh":return new V5(l);case"Dummy":return new Y5}throw new Error(`Unknown IR type: ${l[0]}`)}const C2={COLORED:1,UNCOLORED:2};class Of{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t,e){const{bbox:i,operatorList:r,paintType:a,tilingType:o,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),W0("TilingType: "+o);const p=i[0],b=i[1],v=i[2],w=i[3],x=v-p,_=w-b,A=new Float32Array(2);$t.singularValueDecompose2dScale(this.matrix,A);const[E,C]=A;$t.singularValueDecompose2dScale(this.baseTransform,A);const N=E*A[0],D=C*A[1];let F=x,B=_,Y=!1,j=!1;const et=Math.ceil(f*N),ut=Math.ceil(m*D),H=Math.ceil(x*N),it=Math.ceil(_*D);et>=H?F=f:Y=!0,ut>=it?B=m:j=!0;const R=this.getSizeAndScale(F,this.ctx.canvas.width,N),nt=this.getSizeAndScale(B,this.ctx.canvas.height,D),$=t.cachedCanvases.getCanvas("pattern",R.size,nt.size),X=$.context,vt=h.createCanvasGraphics(X,e);if(vt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(vt,a,u),X.translate(-R.scale*p,-nt.scale*b),vt.transform(0,R.scale,0,0,nt.scale,0,0),X.save(),vt.dependencyTracker?.save(),this.clipBbox(vt,p,b,v,w),vt.baseTransform=Je(vt.ctx),vt.executeOperatorList(r),vt.endDrawing(),vt.dependencyTracker?.restore(),X.restore(),Y||j){const mt=$.canvas;Y&&(F=f),j&&(B=m);const Et=this.getSizeAndScale(F,this.ctx.canvas.width,N),z=this.getSizeAndScale(B,this.ctx.canvas.height,D),P=Et.size,at=z.size,ht=t.cachedCanvases.getCanvas("pattern-workaround",P,at),pt=ht.context,Bt=Y?Math.floor(x/f):0,Lt=j?Math.floor(_/m):0;for(let Ht=0;Ht<=Bt;Ht++)for(let jt=0;jt<=Lt;jt++)pt.drawImage(mt,P*Ht,at*jt,P,at,0,0,P,at);return{canvas:ht.canvas,scaleX:Et.scale,scaleY:z.scale,offsetX:p,offsetY:b}}return{canvas:$.canvas,scaleX:R.scale,scaleY:nt.scale,offsetX:p,offsetY:b}}getSizeAndScale(t,e,i){const r=Math.max(Of.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*i);return a>=r?a=r:i=a/t,{scale:i,size:a}}clipBbox(t,e,i,r,a){const o=r-e,u=a-i;t.ctx.rect(e,i,o,u),$t.axialAlignedBoundingBox([e,i,r,a],Je(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,a=t.current;switch(e){case C2.COLORED:const{fillStyle:o,strokeStyle:u}=this.ctx;r.fillStyle=a.fillColor=o,r.strokeStyle=a.strokeColor=u;break;case C2.UNCOLORED:r.fillStyle=r.strokeStyle=i,a.fillColor=a.strokeColor=i;break;default:throw new o5(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,r,a){let o=i;r!==zi.SHADING&&(o=$t.transform(o,e.baseTransform),this.matrix&&(o=$t.transform(o,this.matrix)));const u=this.createPatternCanvas(e,a);let h=new DOMMatrix(o);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function K5({src:l,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const u=Li.isLittleEndian?4278190080:255,[h,f]=o?[a,u]:[u,a],m=i>>3,p=i&7,b=l.length;e=new Uint32Array(e.buffer);let v=0;for(let w=0;w<r;w++){for(const _=t+m;t<_;t++){const A=t<b?l[t]:255;e[v++]=A&128?f:h,e[v++]=A&64?f:h,e[v++]=A&32?f:h,e[v++]=A&16?f:h,e[v++]=A&8?f:h,e[v++]=A&4?f:h,e[v++]=A&2?f:h,e[v++]=A&1?f:h}if(p===0)continue;const x=t<b?l[t++]:255;for(let _=0;_<p;_++)e[v++]=x&1<<7-_?f:h}return{srcPos:t,destPos:v}}const M2=16,R2=100,Z5=15,D2=10,un=16,Nd=new DOMMatrix,wn=new Float32Array(2),no=new Float32Array([1/0,1/0,-1/0,-1/0]);function W5(l,t){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){t.save(),this.__originalSave()},l.restore=function(){t.restore(),this.__originalRestore()},l.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},l.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},l.transform=function(e,i,r,a,o,u){t.transform(e,i,r,a,o,u),this.__originalTransform(e,i,r,a,o,u)},l.setTransform=function(e,i,r,a,o,u){t.setTransform(e,i,r,a,o,u),this.__originalSetTransform(e,i,r,a,o,u)},l.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},l.rotate=function(e){t.rotate(e),this.__originalRotate(e)},l.clip=function(e){t.clip(e),this.__originalClip(e)},l.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},l.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},l.bezierCurveTo=function(e,i,r,a,o,u){t.bezierCurveTo(e,i,r,a,o,u),this.__originalBezierCurveTo(e,i,r,a,o,u)},l.rect=function(e,i,r,a){t.rect(e,i,r,a),this.__originalRect(e,i,r,a)},l.closePath=function(){t.closePath(),this.__originalClosePath()},l.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Q5{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function p0(l,t,e,i,r,a,o,u,h,f){const[m,p,b,v,w,x]=Je(l);if(p===0&&b===0){const E=o*m+w,C=Math.round(E),N=u*v+x,D=Math.round(N),F=(o+h)*m+w,B=Math.abs(Math.round(F)-C)||1,Y=(u+f)*v+x,j=Math.abs(Math.round(Y)-D)||1;return l.setTransform(Math.sign(m),0,0,Math.sign(v),C,D),l.drawImage(t,e,i,r,a,0,0,B,j),l.setTransform(m,p,b,v,w,x),[B,j]}if(m===0&&v===0){const E=u*b+w,C=Math.round(E),N=o*p+x,D=Math.round(N),F=(u+f)*b+w,B=Math.abs(Math.round(F)-C)||1,Y=(o+h)*p+x,j=Math.abs(Math.round(Y)-D)||1;return l.setTransform(0,Math.sign(p),Math.sign(b),0,C,D),l.drawImage(t,e,i,r,a,0,0,j,B),l.setTransform(m,p,b,v,w,x),[j,B]}l.drawImage(t,e,i,r,a,o,u,h,f);const _=Math.hypot(m,p),A=Math.hypot(b,v);return[_*h,A*f]}class N2{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Wd;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ni.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=no.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=zi.FILL,e=null){const i=this.minMax.slice();if(t===zi.STROKE){e||Ge("Stroke bounding box must include transform."),$t.singularValueDecompose2dScale(e,wn);const r=wn[0]*this.lineWidth/2,a=wn[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const t=$t.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(no,0)}getClippedPathBoundingBox(t=zi.FILL,e=null){return $t.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function O2(l,t){if(t instanceof ImageData){l.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%un,a=(e-r)/un,o=r===0?a:a+1,u=l.createImageData(i,un);let h=0,f;const m=t.data,p=u.data;let b,v,w,x;if(t.kind===R0.GRAYSCALE_1BPP){const _=m.byteLength,A=new Uint32Array(p.buffer,0,p.byteLength>>2),E=A.length,C=i+7>>3,N=4294967295,D=Li.isLittleEndian?4278190080:255;for(b=0;b<o;b++){for(w=b<a?un:r,f=0,v=0;v<w;v++){const F=_-h;let B=0;const Y=F>C?i:F*8-7,j=Y&-8;let et=0,ut=0;for(;B<j;B+=8)ut=m[h++],A[f++]=ut&128?N:D,A[f++]=ut&64?N:D,A[f++]=ut&32?N:D,A[f++]=ut&16?N:D,A[f++]=ut&8?N:D,A[f++]=ut&4?N:D,A[f++]=ut&2?N:D,A[f++]=ut&1?N:D;for(;B<Y;B++)et===0&&(ut=m[h++],et=128),A[f++]=ut&et?N:D,et>>=1}for(;f<E;)A[f++]=0;l.putImageData(u,0,b*un)}}else if(t.kind===R0.RGBA_32BPP){for(v=0,x=i*un*4,b=0;b<a;b++)p.set(m.subarray(h,h+x)),h+=x,l.putImageData(u,0,v),v+=un;b<o&&(x=i*r*4,p.set(m.subarray(h,h+x)),l.putImageData(u,0,v))}else if(t.kind===R0.RGB_24BPP)for(w=un,x=i*w,b=0;b<o;b++){for(b>=a&&(w=r,x=i*w),f=0,v=x;v--;)p[f++]=m[h++],p[f++]=m[h++],p[f++]=m[h++],p[f++]=255;l.putImageData(u,0,b*un)}else throw new Error(`bad image kind: ${t.kind}`)}function z2(l,t){if(t.bitmap){l.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%un,a=(e-r)/un,o=r===0?a:a+1,u=l.createImageData(i,un);let h=0;const f=t.data,m=u.data;for(let p=0;p<o;p++){const b=p<a?un:r;({srcPos:h}=K5({src:f,srcPos:h,dest:m,width:i,height:b,nonBlackColor:0})),l.putImageData(u,0,p*un)}}function cl(l,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)l[i]!==void 0&&(t[i]=l[i]);l.setLineDash!==void 0&&(t.setLineDash(l.getLineDash()),t.lineDashOffset=l.lineDashOffset)}function g0(l){l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",l.setLineDash!==void 0&&(l.setLineDash([]),l.lineDashOffset=0);const{filter:t}=l;t!=="none"&&t!==""&&(l.filter="none")}function L2(l,t){if(t)return!0;$t.singularValueDecompose2dScale(l,wn);const e=Math.fround(mr.pixelRatio*ho.PDF_TO_CSS_UNITS);return wn[0]<=e&&wn[1]<=e}const J5=["butt","round","square"],t6=["miter","round","bevel"],e6={},B2={};class so{constructor(t,e,i,r,a,{optionalContentConfig:o,markedContentStack:u=null},h,f,m){this.ctx=t,this.current=new N2(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=o,this.cachedCanvases=new Q5(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=u,i){const h=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Je(this.compositeCtx))}this.ctx.save(),g0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Je(this.ctx)}executeOperatorList(t,e,i,r,a){const o=t.argsArray,u=t.fnArray;let h=e||0;const f=o.length;if(f===h)return h;const m=f-h>D2&&typeof i=="function",p=m?Date.now()+Z5:0;let b=0;const v=this.commonObjs,w=this.objs;let x,_;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,i),h;if(!a||a(h))if(x=u[h],_=o[h]??null,x!==kl.dependency)_===null?this[x](h):this[x](h,..._);else for(const A of _){this.dependencyTracker?.recordNamedData(A,h);const E=A.startsWith("g_")?v:w;if(!E.has(A))return E.get(A,i),h}if(h++,h===f)return h;if(m&&++b>D2){if(Date.now()>p)return i(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),u=i,h=r,f="prescale1",m,p;for(;a>2&&u>1||o>2&&h>1;){let b=u,v=h;a>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/b),o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/v),m=this.cachedCanvases.getCanvas(f,b,v),p=m.context,p.clearRect(0,0,b,v),p.drawImage(t,0,0,u,h,0,0,b,v),t=m.canvas,u=b,h=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){const i=this.ctx,{width:r,height:a}=e,o=this.current.fillColor,u=this.current.patternFill,h=Je(i);let f,m,p,b;if((e.bitmap||e.data)&&e.count>1){const et=e.bitmap||e.data.buffer;m=JSON.stringify(u?h:[h.slice(0,4),o]),f=this._cachedBitmapsMap.get(et),f||(f=new Map,this._cachedBitmapsMap.set(et,f));const ut=f.get(m);if(ut&&!u){const H=Math.round(Math.min(h[0],h[2])+h[4]),it=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,In.transformAndFill),{canvas:ut,offsetX:H,offsetY:it}}p=ut}p||(b=this.cachedCanvases.getCanvas("maskCanvas",r,a),z2(b.context,e));let v=$t.transform(h,[1/r,0,0,-1/a,0,0]);v=$t.transform(v,[1,0,0,1,0,-a]);const w=no.slice();$t.axialAlignedBoundingBox([0,0,r,a],v,w);const[x,_,A,E]=w,C=Math.round(A-x)||1,N=Math.round(E-_)||1,D=this.cachedCanvases.getCanvas("fillCanvas",C,N),F=D.context,B=x,Y=_;F.translate(-B,-Y),F.transform(...v),p||(p=this._scaleImage(b.canvas,sr(F)),p=p.img,f&&u&&f.set(m,p)),F.imageSmoothingEnabled=L2(Je(F),e.interpolate),p0(F,p,0,0,p.width,p.height,0,0,r,a),F.globalCompositeOperation="source-in";const j=$t.transform(sr(F),[1,0,0,1,-B,-Y]);return F.fillStyle=u?o.getPattern(i,this,j,zi.FILL,t):o,F.fillRect(0,0,r,a),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,D.canvas)),this.dependencyTracker?.recordDependencies(t,In.transformAndFill),{canvas:D.canvas,offsetX:Math.round(B),offsetY:Math.round(Y)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=J5[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=t6[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,r]of e)switch(i){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(r,e,i);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),cl(this.suspendedCtx,o),W5(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),cl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const a=r[0],o=r[1],u=r[2]-a,h=r[3]-o;u===0||h===0||(this.genericComposeSMask(e.context,i,u,h,e.subtype,e.backdrop,e.transferMap,a,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,a,o,u,h,f,m,p){let b=t.canvas,v=h-m,w=f-p;if(o)if(v<0||w<0||v+i>b.width||w+r>b.height){const _=this.cachedCanvases.getCanvas("maskExtension",i,r),A=_.context;A.drawImage(b,-v,-w),A.globalCompositeOperation="destination-atop",A.fillStyle=o,A.fillRect(0,0,i,r),A.globalCompositeOperation="source-over",b=_.canvas,v=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(v,w,i,r),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(v,w,i,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const x=new Path2D;x.rect(h,f,i,r),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(b,v,w,i,r,h,f,i,r),e.restore()}save(t){this.inSMaskMode&&cl(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&cl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,r,a,o,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,r,a,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,r){let[a]=i;if(!r){a||=i[0]=new Path2D,this[e](t,a);return}if(this.dependencyTracker!==null){const o=e===kl.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(t,["transform"])}if(!(a instanceof Path2D)){const o=i[0]=new Path2D;for(let u=0,h=a.length;u<h;)switch(a[u++]){case c0.moveTo:o.moveTo(a[u++],a[u++]);break;case c0.lineTo:o.lineTo(a[u++],a[u++]);break;case c0.curveTo:o.bezierCurveTo(a[u++],a[u++],a[u++],a[u++],a[u++],a[u++]);break;case c0.closePath:o.closePath();break;default:ae(`Unrecognized drawing path operator: ${a[u-1]}`);break}a=o}$t.axialAlignedBoundingBox(r,Je(this.ctx),this.current.minMax),this[e](t,a),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const r=this.ctx,a=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const o=a.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=a.getPattern(r,this,sr(r),zi.STROKE,t),o){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(o)),e=u}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,In.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(zi.STROKE,Je(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const r=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let u=!1;if(o){const f=a.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=a.getPattern(r,this,sr(r),zi.FILL,t),f){const m=new Path2D;m.addPath(e,r.getTransform().invertSelf().multiplySelf(f)),e=m}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),this.dependencyTracker?.recordDependencies(t,In.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,In.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=e6}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=B2}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,a=i.getTransform().invertSelf();for(const{transform:o,x:u,y:h,fontSize:f,path:m}of e)m&&r.addPath(m,new DOMMatrix(o).preMultiplySelf(a).translate(u,h).scale(f,-f));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),a=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=r.fontMatrix||Wd,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&ae("Invalid font matrix for font "+e),i<0?(i=-i,a.fontDirection=-1):a.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;const o=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${o}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let m=i;i<M2?m=M2:i>R2&&(m=R2),this.current.fontSizeScale=i/m,this.ctx.font=`${f} ${h} ${m}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r}paintChar(t,e,i,r,a,o){const u=this.ctx,h=this.current,f=h.font,m=h.textRenderingMode,p=h.fontSize/h.fontSizeScale,b=m&Ni.FILL_STROKE_MASK,v=!!(m&Ni.ADD_TO_PATH_FLAG),w=h.patternFill&&!f.missingFile,x=h.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||v||w||x)&&!f.missingFile&&(_=f.getPathGenerator(this.commonObjs,e)),_&&(f.disableFontFace||w||x)){u.save(),u.translate(i,r),u.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(t,u,f);let A;if(b===Ni.FILL||b===Ni.FILL_STROKE)if(a){A=u.getTransform(),u.setTransform(...a);const E=this.#n(_,A,a);u.fill(E)}else u.fill(_);if(b===Ni.STROKE||b===Ni.FILL_STROKE)if(o){A||=u.getTransform(),u.setTransform(...o);const{a:E,b:C,c:N,d:D}=A,F=$t.inverseTransform(o),B=$t.transform([E,C,N,D,0,0],F);$t.singularValueDecompose2dScale(B,wn),u.lineWidth*=Math.max(wn[0],wn[1])/p,u.stroke(this.#n(_,A,o))}else u.lineWidth/=p,u.stroke(_);u.restore()}else(b===Ni.FILL||b===Ni.FILL_STROKE)&&(u.fillText(e,i,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,p,i,r,()=>u.measureText(e))),(b===Ni.STROKE||b===Ni.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,p,i,r,()=>u.measureText(e)).recordDependencies(t,In.stroke),u.strokeText(e,i,r));v&&((this.pendingTextPaths||=[]).push({transform:Je(u),x:i,y:r,fontSize:p,path:_}),this.dependencyTracker?.recordCharacterBBox(t,u,f,p,i,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return me(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,In.showText).resetBBox(t),this.current.textRenderingMode&Ni.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const a=i.fontSize;if(a===0){this.dependencyTracker?.recordOperation(t);return}const o=this.ctx,u=i.fontSizeScale,h=i.charSpacing,f=i.wordSpacing,m=i.fontDirection,p=i.textHScale*m,b=e.length,v=r.vertical,w=v?1:-1,x=r.defaultVMetrics,_=a*i.fontMatrix[0],A=i.textRenderingMode===Ni.FILL&&!r.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),m>0?o.scale(p,-1):o.scale(p,1);let E,C;if(i.patternFill){o.save();const Y=i.fillColor.getPattern(o,this,sr(o),zi.FILL,t);E=Je(o),o.restore(),o.fillStyle=Y}if(i.patternStroke){o.save();const Y=i.strokeColor.getPattern(o,this,sr(o),zi.STROKE,t);C=Je(o),o.restore(),o.strokeStyle=Y}let N=i.lineWidth;const D=i.textMatrixScale;if(D===0||N===0){const Y=i.textRenderingMode&Ni.FILL_STROKE_MASK;(Y===Ni.STROKE||Y===Ni.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=D;if(u!==1&&(o.scale(u,u),N/=u),o.lineWidth=N,r.isInvalidPDFjsFont){const Y=[];let j=0;for(const ut of e)Y.push(ut.unicode),j+=ut.width;const et=Y.join("");if(o.fillText(et,0,0),this.dependencyTracker!==null){const ut=o.measureText(et);this.dependencyTracker.recordBBox(t,this.ctx,-ut.actualBoundingBoxLeft,ut.actualBoundingBoxRight,-ut.actualBoundingBoxAscent,ut.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=j*_*p,o.restore(),this.compose();return}let F=0,B;for(B=0;B<b;++B){const Y=e[B];if(typeof Y=="number"){F+=w*Y*a/1e3;continue}let j=!1;const et=(Y.isSpace?f:0)+h,ut=Y.fontChar,H=Y.accent;let it,R,nt=Y.width;if(v){const vt=Y.vmetric||x,mt=-(Y.vmetric?vt[1]:nt*.5)*_,Et=vt[2]*_;nt=vt?-vt[0]:nt,it=mt/u,R=(F+Et)/u}else it=F/u,R=0;let $;if(r.remeasure&&nt>0){$=o.measureText(ut);const vt=$.width*1e3/a*u;if(nt<vt&&this.isFontSubpixelAAEnabled){const mt=nt/vt;j=!0,o.save(),o.scale(mt,1),it/=mt}else nt!==vt&&(it+=(nt-vt)/2e3*a/u)}if(this.contentVisible&&(Y.isInFont||r.missingFile)){if(A&&!H)o.fillText(ut,it,R),this.dependencyTracker?.recordCharacterBBox(t,o,$?{bbox:null}:r,a/u,it,R,()=>$??o.measureText(ut));else if(this.paintChar(t,ut,it,R,E,C),H){const vt=it+a*H.offset.x/u,mt=R-a*H.offset.y/u;this.paintChar(t,H.fontChar,vt,mt,E,C)}}const X=v?nt*_-et*m:nt*_+et*m;F+=X,j&&o.restore()}v?i.y-=F:i.x+=F*p,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,r=this.current,a=r.font,o=r.fontSize,u=r.fontDirection,h=a.vertical?1:-1,f=r.charSpacing,m=r.wordSpacing,p=r.textHScale*u,b=r.fontMatrix||Wd,v=e.length,w=r.textRenderingMode===Ni.INVISIBLE;let x,_,A,E;if(w||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(p,u);const C=this.dependencyTracker;for(this.dependencyTracker=C?new F0(C,t):null,x=0;x<v;++x){if(_=e[x],typeof _=="number"){E=h*_*o/1e3,this.ctx.translate(E,0),r.x+=E*p;continue}const N=(_.isSpace?m:0)+f,D=a.charProcOperatorList[_.operatorListId];D?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...b),this.executeOperatorList(D),this.restore()):ae(`Type3 character "${_.operatorListId}" is not available.`);const F=[_.width,0];$t.applyTransform(F,b),A=F[0]*o+N,i.translate(A,0),r.x+=A*p}i.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,r,a,o,u){const h=new Path2D;h.rect(r,a,o-r,u-a),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,o,a,u).recordClipBox(t,this.ctx,r,o,a,u),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const r=this.baseTransform||Je(this.ctx),a={createCanvasGraphics:(o,u)=>new so(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new F0(this.dependencyTracker,u,!0):null)};i=new Of(e,this.ctx,a,r)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=X5(this.getObject(t,e)),this.cachedPatterns.set(e,r)),i&&(r.matrix=i),r}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const r=this._getPattern(t,e);i.fillStyle=r.getPattern(i,this,sr(i),zi.SHADING,t);const a=sr(i);if(a){const{width:o,height:u}=i.canvas,h=no.slice();$t.axialAlignedBoundingBox([0,0,o,u],a,h);const[f,m,p,b]=h;this.ctx.fillRect(f,m,p-f,b-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,In.transform).recordDependencies(t,In.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Ge("Should not call beginInlineImage")}beginImageData(){Ge("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Je(this.ctx),i)){$t.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,a,o,u]=i,h=new Path2D;h.rect(r,a,o-r,u-a),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,o,a,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||W0("TODO: Support non-isolated groups."),e.knockout&&ae("Knockout groups not supported.");const r=Je(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=no.slice();$t.axialAlignedBoundingBox(e.bbox,Je(i),a);const o=[0,0,i.canvas.width,i.canvas.height];a=$t.intersect(a,o)||[0,0,0,0];const u=Math.floor(a[0]),h=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-u,1),m=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,m]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(p,f,m),v=b.context;v.translate(-u,-h),v.transform(...r);let w=new Path2D;const[x,_,A,E]=e.bbox;if(w.rect(x,_,A-x,E-_),e.matrix){const C=new Path2D;C.addPath(w,new DOMMatrix(e.matrix)),w=C}v.clip(w),e.smask&&this.smaskStack.push({canvas:b.canvas,context:v,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(u,h),i.save()),cl(i,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Je(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...a);const o=no.slice();$t.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],a,o),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,i,r,a,o){if(this.#t(),g0(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],h=i[3]-i[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=h,$t.singularValueDecompose2dScale(Je(this.ctx),wn);const{viewportScale:f}=this,m=Math.ceil(u*this.outputScaleX*f),p=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,p);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(wn[0],0,0,-wn[1],0,h*wn[1]),g0(this.ctx)}else{g0(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],u,h),this.ctx.clip(f)}}this.current=new N2(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...a)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const r=this.ctx,a=this._createMaskCanvas(t,e),o=a.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,a.offsetX,a.offsetX+o.width,a.offsetY,a.offsetY+o.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,r=0,a=0,o,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=Je(h);h.transform(i,r,a,o,0,0);const m=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let p=0,b=u.length;p<b;p+=2){const v=$t.transform(f,[i,r,a,o,u[p],u[p+1]]);h.drawImage(m.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+m.canvas.width,v[5],v[5]+m.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,r=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,In.transformAndFill);for(const o of e){const{data:u,width:h,height:f,transform:m}=o,p=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=p.context;b.save();const v=this.getObject(t,u,o);z2(b,v),b.globalCompositeOperation="source-in",b.fillStyle=a?r.getPattern(b,this,sr(i),zi.FILL,t):r,b.fillRect(0,0,h,f),b.restore(),i.save(),i.transform(...m),i.scale(1,-1),p0(i,p.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,h,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){ae("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,r,a){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){ae("Dependent image isn't ready yet");return}const u=o.width,h=o.height,f=[];for(let m=0,p=a.length;m<p;m+=2)f.push({transform:[i,0,0,r,a[m],a[m+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,o,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,a=this.cachedCanvases.getCanvas("inlineImage",i,r),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",a.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,r=e.height,a=this.ctx;this.save(t);const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/i,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",i,r).context;O2(m,e),u=this.applyTransferMapsToCanvas(m)}const h=this._scaleImage(u,sr(a));a.imageSmoothingEnabled=L2(Je(a),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,a,0,i,-r,0).recordDependencies(t,In.imageXObject).recordOperation(t),p0(a,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,i,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const r=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const o=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",o,u).context;O2(f,e),a=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const o of i)r.save(),r.transform(...o.transform),r.scale(1,-1),p0(r,a,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,In.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const a=this.ctx;this.pendingClip?(r||(this.pendingClip===B2?a.clip(e,"evenodd"):a.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Je(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:a}=this.ctx.getTransform();let o,u;if(i===0&&r===0){const h=Math.abs(e),f=Math.abs(a);if(h===f)if(t===0)o=u=1/h;else{const m=h*t;o=u=m<1?1/m:1}else if(t===0)o=1/h,u=1/f;else{const m=h*t,p=f*t;o=m<1?1/m:1,u=p<1?1/p:1}}else{const h=Math.abs(e*a-i*r),f=Math.hypot(e,i),m=Math.hypot(r,a);if(t===0)o=m/h,u=f/h;else{const p=t*h;o=m>p?m/p:1,u=f>p?f/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:r}}=this,[a,o]=this.getScaleForStroking();if(a===o){i.lineWidth=(r||1)*a,i.stroke(t);return}const u=i.getLineDash();e&&i.save(),i.scale(a,o),Nd.a=1/a,Nd.d=1/o;const h=new Path2D;if(h.addPath(t,Nd),u.length>0){const f=Math.max(a,o);i.setLineDash(u.map(m=>m/f)),i.lineDashOffset/=f}i.lineWidth=r||1,i.stroke(h),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const l in kl)so.prototype[l]!==void 0&&(so.prototype[kl[l]]=so.prototype[l]);class ao{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let r=0;for(const f of ao.strings){const m=e.encode(t[f]);i[f]=m,r+=4+m.length}const a=new ArrayBuffer(r),o=new Uint8Array(a),u=new DataView(a);let h=0;for(const f of ao.strings){const m=i[f],p=m.length;u.setUint32(h,p),o.set(m,h+4),h+=4+p}return _e(h===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){_e(t<ao.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class oo{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let r=0;for(const b of oo.strings){const v=e.encode(t[b]);i[b]=v,r+=4+v.length}r+=4;let a,o,u=1+r;t.style&&(a=e.encode(t.style.style),o=e.encode(t.style.weight),u+=4+a.length+4+o.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),m=new DataView(h);let p=0;m.setUint8(p++,t.guessFallback?1:0),m.setUint32(p,0),p+=4,r=0;for(const b of oo.strings){const v=i[b],w=v.length;r+=4+w,m.setUint32(p,w),f.set(v,p+4),p+=4+w}return m.setUint32(p-r-4,r),t.style&&(m.setUint32(p,a.length),f.set(a,p+4),p+=4+a.length,m.setUint32(p,o.length),f.set(o,p+4),p+=4+o.length),_e(p<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(p)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){_e(t<oo.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#n.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const r=this.#e.getUint32(t),a=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:i,weight:a}}}class Ue{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#a=this.#i+1+6;#r;#s;#o;constructor({data:t,extra:e}){this.#r=t,this.#s=new TextDecoder,this.#o=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){_e(t<Ue.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,r=this.#o.getUint8(e)>>i&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return _e(t<Ue.numbers.length,"Invalid number index"),this.#o.getFloat64(Ue.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Ue.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<4;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=Ue.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<6;r++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=Ue.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<3;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){_e(t<Ue.strings.length,"Invalid string index");let e=Ue.#a+4;for(let a=0;a<t;a++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),r=new Uint8Array(i);return r.set(new Uint8Array(this.#r,e+4,i)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Ue.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);t+=4+r;const a=this.#o.getUint32(t);if(a!==0)return new Uint8Array(this.#r,t+4,a)}clearData(){let t=Ue.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);t+=4+r;const a=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,a).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Ue.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);if(r===0)return null;const a=new Uint8Array(r);return a.set(new Uint8Array(this.#r,t+4,r)),new ao(a.buffer)}get systemFontInfo(){let t=Ue.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#r,t+4,i)),new oo(r.buffer)}static write(t){const e=t.systemFontInfo?oo.write(t.systemFontInfo):null,i=t.cssFontInfo?ao.write(t.cssFontInfo):null,r=new TextEncoder,a={};let o=0;for(const x of Ue.strings)a[x]=r.encode(t[x]),o+=4+a[x].length;const u=Ue.#a+4+o+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),m=new DataView(h);let p=0;const b=Ue.bools.length;let v=0,w=0;for(let x=0;x<b;x++){const _=t[Ue.bools[x]];v|=(_===void 0?0:_?2:1)<<w,w+=2,(w===8||x===b-1)&&(m.setUint8(p++,v),v=0,w=0)}_e(p===Ue.#t,"FontInfo.write: Boolean properties offset mismatch");for(const x of Ue.numbers)m.setFloat64(p,t[x]),p+=8;if(_e(p===Ue.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(p++,4);for(const x of t.bbox)m.setInt16(p,x,!0),p+=2}else m.setUint8(p++,0),p+=8;if(_e(p===Ue.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(p++,6);for(const x of t.fontMatrix)m.setFloat64(p,x,!0),p+=8}else m.setUint8(p++,0),p+=48;if(_e(p===Ue.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(p++,1);for(const x of t.defaultVMetrics)m.setInt16(p,x,!0),p+=2}else m.setUint8(p++,0),p+=6;_e(p===Ue.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(Ue.#a,0),p+=4;for(const x of Ue.strings){const _=a[x],A=_.length;m.setUint32(p,A),f.set(_,p+4),p+=4+A}if(m.setUint32(Ue.#a,p-Ue.#a-4),!e)m.setUint32(p,0),p+=4;else{const x=e.byteLength;m.setUint32(p,x),_e(p+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),p+4),p+=4+x}if(!i)m.setUint32(p,0),p+=4;else{const x=i.byteLength;m.setUint32(p,x),_e(p+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),p+4),p+=4+x}return t.data===void 0?(m.setUint32(p,0),p+=4):(m.setUint32(p,t.data.length),f.set(t.data,p+4),p+=4+t.data.length),_e(p<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(p)}}class lo{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class i6{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const to=Symbol("INTERNAL");class n6{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:i,usage:r,rbGroups:a}){this.#t=!!(t&xn.DISPLAY),this.#e=!!(t&xn.PRINT),this.name=e,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==to&&Ge("Internal method `_setVisible` called."),this.#n=i,this.#i=e}}class r6{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=xn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const i of t.groups)this.#e.set(i.id,new n6(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(to,!1);for(const i of t.on)this.#e.get(i)._setVisible(to,!0);for(const i of t.off)this.#e.get(i)._setVisible(to,!1);this.#n=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const a=t[r];let o;if(Array.isArray(a))o=this.#a(a);else if(this.#e.has(a))o=this.#e.get(a).visible;else return ae(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return W0("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(ae(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return ae(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return ae(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return ae(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return ae(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return ae(`Unknown optional content policy ${t.policy}.`),!0}return ae(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const r=this.#e.get(t);if(!r){ae(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const a of r.rbGroups)for(const o of a)o!==t&&this.#e.get(o)?._setVisible(to,!1,!0);r._setVisible(to,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const a=this.#e.get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new ib;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class s6{constructor(t,{disableRange:e=!1,disableStream:i=!1}){_e(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:o,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=u,a?.length>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(i),!0)});_e(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){_e(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new a6(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new o6(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class a6{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=Tf(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o6{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function l6(l){let t=!0,e=i("filename\\*","i").exec(l);if(e){e=e[1];let m=u(e);return m=unescape(m),m=h(m),m=f(m),a(m)}if(e=o(l),e){const m=f(e);return a(m)}if(e=i("filename","i").exec(l),e){e=e[1];let m=u(e);return m=f(m),a(m)}function i(m,p){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function r(m,p){if(m){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const b=new TextDecoder(m,{fatal:!0}),v=zl(p);p=b.decode(v),t=!1}catch{}}return p}function a(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function o(m){const p=[];let b;const v=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(m))!==null;){let[,x,_,A]=b;if(x=parseInt(x,10),x in p){if(x===0)break;continue}p[x]=[_,A]}const w=[];for(let x=0;x<p.length&&x in p;++x){let[_,A]=p[x];A=u(A),_&&(A=unescape(A),x===0&&(A=h(A))),w.push(A)}return w.join("")}function u(m){if(m.startsWith('"')){const p=m.slice(1).split('\\"');for(let b=0;b<p.length;++b){const v=p[b].indexOf('"');v!==-1&&(p[b]=p[b].slice(0,v),p.length=b+1),p[b]=p[b].replaceAll(/\\(.)/g,"$1")}m=p.join('"')}return m}function h(m){const p=m.indexOf("'");if(p===-1)return m;const b=m.slice(0,p),w=m.slice(p+1).replace(/^[^']*'/,"");return r(b,w)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,b,v,w){if(v==="q"||v==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,_){return String.fromCharCode(parseInt(_,16))}),r(b,w);try{w=atob(w)}catch{}return r(b,w)})}return""}function cb(l,t){const e=new Headers;if(!l||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function tu(l){return URL.parse(l)?.origin??null}function ub({responseHeaders:l,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(l.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*e)||i||!t||l.get("Accept-Ranges")!=="bytes"||(l.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function hb(l){const t=l.get("Content-Disposition");if(t){let e=l6(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Tf(e))return e}return null}function Pl(l,t){return new I0(`Unexpected server response (${l}) while retrieving PDF "${t}".`,l,l===404||l===0&&t.startsWith("file:"))}function db(l){return l===200||l===206}function fb(l,t,e){return{method:"GET",headers:l,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function mb(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:(ae(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class c6{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=cb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return _e(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new u6(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new h6(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class u6{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,fb(i,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=tu(a.url),!db(a.status))throw Pl(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:u,suggestedLength:h}=ub({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=hb(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Rs("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:mb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class h6{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${i-1}`);const o=r.url;fetch(o,fb(a,this._withCredentials,this._abortController)).then(u=>{const h=tu(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!db(u.status))throw Pl(u.status,o);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:mb(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Od=200,zd=206;function d6(l){const t=l.response;return typeof t!="string"?t:zl(t).buffer}class f6{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=cb(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,o]of this.headers)e.setRequestHeader(a,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=zd):r.expectedStatus=Od,e.responseType="arraybuffer",_e(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const a=r.status||Od;if(!(a===Od&&i.expectedStatus===zd)&&a!==i.expectedStatus){i.onError(r.status);return}const u=d6(r);if(a===zd){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?i.onDone({begin:parseInt(f[1],10),chunk:u}):(ae('Missing or invalid "Content-Range" header.'),i.onError(0))}else u?i.onDone({begin:0,chunk:u}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class m6{constructor(t){this._source=t,this._manager=new f6(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return _e(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p6(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new g6(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class p6{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=tu(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=ub({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=hb(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Pl(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class g6{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=tu(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Pl(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const b6=/^[a-z][a-z0-9\-+.]+:/i;function v6(l){if(b6.test(l))return new URL(l);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(l))}class y6{constructor(t){this.source=t,this.url=v6(t.url),_e(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return _e(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new x6(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new w6(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class x6{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Pl(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Rs("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w6{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ul=Symbol("INITIAL_DATA");class pb{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:ul}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const i=this.#t[t];if(!i||i.data===ul)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==ul}delete(t){const e=this.#t[t];return!e||e.data===ul?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==ul&&(yield[t,e])}}}const S6=1e5,I2=30;class Gi{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#b=null;static#y=new Map;static#v=new Map;static#k=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*mr.pixelRatio,this.#d=i.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:a,pageX:o,pageY:u}=i.rawDims;this.#b=[1,0,0,-1,-o,u+a],this.#o=r,this.#s=a,Gi.#M(),oa(e,i),this.#t.promise.finally(()=>{Gi.#x.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Li.platform;return me(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#m.getReader(),Gi.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*mr.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,oa(this.#l,{rotation:r})),i!==this.#h){e?.(),this.#h=i;const a={div:null,properties:null,ctx:Gi.#R(this.#a)};for(const o of this.#u)a.properties=this.#p.get(o),a.div=o,this.#_(a)}}cancel(){const t=new Rs("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(t){if(this.#n)return;this.#r.ctx??=Gi.#R(this.#a);const e=this.#u,i=this.#g;for(const r of t){if(e.length>S6){ae("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),a.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(r.str),this.#S(r)}}#S(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const r=$t.transform(this.#b,t.transform);let a=Math.atan2(r[1],r[0]);const o=this.#f[t.fontName];o.vertical&&(a+=Math.PI/2);let u=this.#i&&o.fontSubstitution||o.fontFamily;u=Gi.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*Gi.#I(u,o,this.#a);let m,p;a===0?(m=r[4],p=r[5]-f):(m=r[4]+f*Math.sin(a),p=r[5]-f*Math.cos(a));const b="calc(var(--total-scale-factor) *",v=e.style;this.#e===this.#l?(v.left=`${(100*m/this.#o).toFixed(2)}%`,v.top=`${(100*p/this.#s).toFixed(2)}%`):(v.left=`${b}${m.toFixed(2)}px)`,v.top=`${b}${p.toFixed(2)}px)`),v.fontSize=`${b}${(Gi.#A*h).toFixed(2)}px)`,v.fontFamily=u,i.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),a!==0&&(i.angle=a*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);x!==_&&Math.max(x,_)/Math.min(x,_)>1.5&&(w=!0)}if(w&&(i.canvasWidth=o.vertical?t.height:t.width),this.#p.set(e,i),this.#r.div=e,this.#r.properties=i,this.#_(this.#r),i.hasText&&this.#e.append(e),i.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#_(t){const{div:e,properties:i,ctx:r}=t,{style:a}=e;let o="";if(Gi.#A>1&&(o=`scale(${1/Gi.#A})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=a,{canvasWidth:h,fontSize:f}=i;Gi.#C(r,f*this.#h,u);const{width:m}=r.measureText(e.textContent);m>0&&(o=`scaleX(${h*this.#h/m}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#x.size>0)){this.#y.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#R(t=null){let e=this.#v.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#k.set(e,{size:0,family:""})}return e}static#C(t,e,i){const r=this.#k.get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)}static#M(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#I(t,e,i){const r=this.#y.get(t);if(r)return r;const a=this.#R(i);a.canvas.width=a.canvas.height=I2,this.#C(a,I2,t);const o=a.measureText(""),u=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let f=.8;return u?f=u/(u+h):(Li.platform.isFirefox&&ae("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#y.set(t,f),f}}const A6=100;function gb(l={}){typeof l=="string"||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const t=new zf,{docId:e}=t,i=l.url?R5(l.url):null,r=l.data?D5(l.data):null,a=l.httpHeaders||null,o=l.withCredentials===!0,u=l.password??null,h=l.range instanceof bb?l.range:null,f=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:2**16;let m=l.worker instanceof Tl?l.worker:null;const p=l.verbosity,b=typeof l.docBaseUrl=="string"&&!Q0(l.docBaseUrl)?l.docBaseUrl:null,v=h0(l.cMapUrl),w=l.cMapPacked!==!1,x=l.CMapReaderFactory||(qi?P5:A2),_=h0(l.iccUrl),A=h0(l.standardFontDataUrl),E=l.StandardFontDataFactory||(qi?U5:_2),C=h0(l.wasmUrl),N=l.WasmFactory||(qi?H5:k2),D=l.stopAtErrors!==!0,F=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,B=l.isEvalSupported!==!1,Y=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!qi,j=typeof l.isImageDecoderSupported=="boolean"?l.isImageDecoderSupported:!qi&&(Li.platform.isFirefox||!globalThis.chrome),et=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,ut=typeof l.disableFontFace=="boolean"?l.disableFontFace:qi,H=l.fontExtraProperties===!0,it=l.enableXfa===!0,R=l.ownerDocument||globalThis.document,nt=l.disableRange===!0,$=l.disableStream===!0,X=l.disableAutoFetch===!0,vt=l.pdfBug===!0,mt=l.CanvasFactory||(qi?F5:L5),Et=l.FilterFactory||(qi?I5:B5),z=l.enableHWA===!0,P=l.useWasm!==!1,at=h?h.length:l.length??NaN,ht=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!qi&&!ut,pt=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:!!(x===A2&&E===_2&&N===k2&&v&&A&&C&&pl(v,document.baseURI)&&pl(A,document.baseURI)&&pl(C,document.baseURI)),Bt=null;r5(p);const Lt={canvasFactory:new mt({ownerDocument:R,enableHWA:z}),filterFactory:new Et({docId:e,ownerDocument:R}),cMapReaderFactory:pt?null:new x({baseUrl:v,isCompressed:w}),standardFontDataFactory:pt?null:new E({baseUrl:A}),wasmFactory:pt?null:new N({baseUrl:C})};m||(m=Tl.create({verbosity:p,port:lo.workerPort}),t._worker=m);const Ht={docId:e,apiVersion:"5.4.296",data:r,password:u,disableAutoFetch:X,rangeChunkSize:f,length:at,docBaseUrl:b,enableXfa:it,evaluatorOptions:{maxImageSize:F,disableFontFace:ut,ignoreErrors:D,isEvalSupported:B,isOffscreenCanvasSupported:Y,isImageDecoderSupported:j,canvasMaxAreaInBytes:et,fontExtraProperties:H,useSystemFonts:ht,useWasm:P,useWorkerFetch:pt,cMapUrl:v,iccUrl:_,standardFontDataUrl:A,wasmUrl:C}},jt={ownerDocument:R,pdfBug:vt,styleElement:Bt,loadingParams:{disableAutoFetch:X,enableXfa:it}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const xe=m.messageHandler.sendWithPromise("GetDocRequest",Ht,r?[r.buffer]:null);let we;if(h)we=new s6(h,{disableRange:nt,disableStream:$});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Qe=pl(i)?c6:qi?y6:m6;we=new Qe({url:i,length:at,httpHeaders:a,withCredentials:o,rangeChunkSize:f,disableRange:nt,disableStream:$})}return xe.then(Qe=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const oi=new gl(e,Qe,m.port),M=new E6(oi,t,we,jt,Lt,z);t._transport=M,oi.send("Ready",null)})}).catch(t._capability.reject),t}class zf{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${zf.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class bb{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#a)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#i)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Ge("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class _6{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class k6{#t=!1;constructor(t,e,i,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new g2:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new pb,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new Bl({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:r="display",annotationMode:a=Es.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:p=null,isEditing:b=!1,recordOperations:v=!1,operationsFilter:w=null}){this._stats?.time("Overall");const x=this._transport.getRenderingIntent(r,a,p,b),{renderingIntent:_,cacheKey:A}=x;this.#t=!1,h||=this._transport.getOptionalContentConfig(_);let E=this._intentStates.get(A);E||(E=Object.create(null),this._intentStates.set(A,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const C=!!(_&xn.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(x));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(v||N),F=j=>{if(E.renderTasks.delete(B),D){const et=B.gfx?.dependencyTracker.take();et&&(B.stepper&&B.stepper.setOperatorBBoxes(et,B.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=et))}C&&(this.#t=!0),this.#e(),j?(B.capability.reject(j),this._abortOperatorList({intentState:E,reason:j instanceof Error?j:new Error(j)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new ro({callback:F,params:{canvas:e,canvasContext:t,dependencyTracker:D?new G5(e,E.operatorList.length,N):null,viewport:i,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:w});(E.renderTasks||=new Set).add(B);const Y=B.task;return Promise.all([E.displayReadyCapability.promise,h]).then(([j,et])=>{if(this.destroyed){F();return}if(this._stats?.time("Rendering"),!(et.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:j,optionalContentConfig:et}),B.operatorListChanged()}).catch(F),Y}getOperatorList({intent:t="display",annotationMode:e=Es.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,e,i,r,!0);let u=this._intentStates.get(o.cacheKey);u||(u=Object.create(null),this._intentStates.set(o.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>El.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function a(){o.read().then(function({value:h,done:f}){if(f){i(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),a()},r)}const o=e.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new g2),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:a,transfer:o}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:r},o).getReader(),f=this._intentStates.get(e);f.streamReader=h;const m=()=>{h.read().then(({value:p,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,f),m())},p=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(p);else if(f.opListReadCapability)f.opListReadCapability.reject(p);else throw p}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Ef){let r=A6;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Rs(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Ts,Yn,Gr,ra,X0,sa,aa,Xi,D0,vb,yb,bl,uo,N0;const Ze=class Ze{constructor({name:t=null,port:e=null,verbosity:i=s5()}={}){nr(this,Xi);nr(this,Ts,Promise.withResolvers());nr(this,Yn,null);nr(this,Gr,null);nr(this,ra,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(Ke(Ze,aa).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Ke(Ze,aa).set(e,this),rr(this,Xi,vb).call(this,e)}else rr(this,Xi,yb).call(this)}get promise(){return Ke(this,Ts).promise}get port(){return Ke(this,Gr)}get messageHandler(){return Ke(this,Yn)}destroy(){this.destroyed=!0,Ke(this,ra)?.terminate(),on(this,ra,null),Ke(Ze,aa).delete(Ke(this,Gr)),on(this,Gr,null),Ke(this,Yn)?.destroy(),on(this,Yn,null)}static create(t){const e=Ke(this,aa).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ze(t)}static get workerSrc(){if(lo.workerSrc)return lo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return me(this,"_setupFakeWorkerGlobal",(async()=>Ke(this,uo,N0)?Ke(this,uo,N0):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ts=new WeakMap,Yn=new WeakMap,Gr=new WeakMap,ra=new WeakMap,X0=new WeakMap,sa=new WeakMap,aa=new WeakMap,Xi=new WeakSet,D0=function(){Ke(this,Ts).resolve(),Ke(this,Yn).send("configure",{verbosity:this.verbosity})},vb=function(t){on(this,Gr,t),on(this,Yn,new gl("main","worker",t)),Ke(this,Yn).on("ready",()=>{}),rr(this,Xi,D0).call(this)},yb=function(){if(Ke(Ze,sa)||Ke(Ze,uo,N0)){rr(this,Xi,bl).call(this);return}let{workerSrc:t}=Ze;try{Ze._isSameOrigin(window.location,t)||(t=Ze._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new gl("main","worker",e),r=()=>{a.abort(),i.destroy(),e.terminate(),this.destroyed?Ke(this,Ts).reject(new Error("Worker was destroyed")):rr(this,Xi,bl).call(this)},a=new AbortController;e.addEventListener("error",()=>{Ke(this,ra)||r()},{signal:a.signal}),i.on("test",u=>{if(a.abort(),this.destroyed||!u){r();return}on(this,Yn,i),on(this,Gr,e),on(this,ra,e),rr(this,Xi,D0).call(this)}),i.on("ready",u=>{if(a.abort(),this.destroyed){r();return}try{o()}catch{rr(this,Xi,bl).call(this)}});const o=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};o();return}catch{W0("The worker has been disabled.")}rr(this,Xi,bl).call(this)},bl=function(){Ke(Ze,sa)||(ae("Setting up fake worker."),on(Ze,sa,!0)),Ze._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Ke(this,Ts).reject(new Error("Worker was destroyed"));return}const e=new z5;on(this,Gr,e);const i=`fake${n2(Ze,X0)._++}`,r=new gl(i+"_worker",i,e);t.setup(r,e),on(this,Yn,new gl(i,i+"_worker",e)),rr(this,Xi,D0).call(this)}).catch(t=>{Ke(this,Ts).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},uo=new WeakSet,N0=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},nr(Ze,uo),nr(Ze,X0,0),nr(Ze,sa,!1),nr(Ze,aa,new WeakMap),qi&&(on(Ze,sa,!0),lo.workerSrc||="./pdf.worker.mjs"),Ze._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const r=new URL(e,i);return i.origin===r.origin},Ze._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ze.fromPort=t=>{if(b5("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ze.create(t)};let Tl=Ze;class E6{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#a=null;constructor(t,e,i,r,a,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new pb,this.fontLoader=new C5({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#r(t,e=null){const i=this.#t.get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return me(this,"annotationStorage",new Rf)}getRenderingIntent(t,e=Es.ENABLE,i=null,r=!1,a=!1){let o=xn.DISPLAY,u=nf;switch(t){case"any":o=xn.ANY;break;case"display":break;case"print":o=xn.PRINT;break;default:ae(`getRenderingIntent - invalid intent: ${t}`)}const h=o&xn.PRINT&&i instanceof nb?i:this.annotationStorage;switch(e){case Es.DISABLE:o+=xn.ANNOTATIONS_DISABLE;break;case Es.ENABLE:break;case Es.ENABLE_FORMS:o+=xn.ANNOTATIONS_FORMS;break;case Es.ENABLE_STORAGE:o+=xn.ANNOTATIONS_STORAGE,u=h.serializable;break;default:ae(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(o+=xn.IS_EDITING),a&&(o+=xn.OPLIST);const{ids:f,hash:m}=h.modifiedIds,p=[o,u.hash,m];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Gi.cleanup(),this._networkStream?.cancelAllRequests(new Rs("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{_e(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){r.close();return}_e(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:o}=this._fullReader;return(!r||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:o}}),t.on("GetRangeReader",(i,r)=>{_e(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:o,done:u}){if(u){r.close();return}_e(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{a.cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new _6(i,this))}),t.on("DocException",i=>{e._capability.reject(ln(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw ln(i);const r=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};e.onPassword(r,i.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,a])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in a){const m=a.error;ae(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const o=new Ue(a),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,p)=>globalThis.FontInspector.fontAdded(m,p):null,h=new M5(o,u,a.extra,a.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:f}=a;_e(f,"The imageRef must be defined.");for(const m of this.#e.values())for(const[,p]of m.objs)if(p?.ref===f)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,a,o])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(i)){if(u._intentStates.size===0){o?.bitmap?.close();return}switch(a){case"Image":case"Pattern":u.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ae("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#n.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#i.set(a.refStr,t);const o=new k6(e,a,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#n.set(e,r),r}getPageIndex(t){return rf(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new r6(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new i6(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Gi.cleanup()}}cachedPageNumber(t){if(!rf(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class T6{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ro{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:o,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:p=!1,pageColors:b=null,enableHWA:v=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=p,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new T6(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ro.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ro.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:r,background:a,dependencyTracker:o}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new so(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ro.#e.delete(this._canvas),t||=new Ef(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ro.#e.delete(this._canvas),this.callback())))}}const C6="5.4.296",M6="f56dc8601";class Fn{#t=null;#e=null;#n;#i=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return me(this,"_keyboardManager",new Fl([[["Escape","mac+Escape"],Fn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fn.prototype._moveToPrevious],[["Home","mac+Home"],Fn.prototype._moveToBeginning],[["End","mac+End"],Fn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#s=t):this.#r=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Fn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Un,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[i,r]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",Fn.#d[i]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=r,a.ariaSelected=r===this.#n,a.addEventListener("click",this.#f.bind(this,r),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ae.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#m(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#m(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#m(t);return}this.#i.lastChild?.focus()}#g(t){Fn._keyboardManager.exec(this,t)}#m(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#h();this.#t.append(e)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const i of this.#i.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Cl{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Cl.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Cl.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(e,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function F2(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function hl(l){return Math.max(0,Math.min(255,255*l))}class P2{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=hl(t),[t,t,t]}static G_HTML([t]){const e=F2(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(hl)}static RGB_HTML(t){return`#${t.map(F2).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[hl(1-Math.min(1,t+r)),hl(1-Math.min(1,i+r)),hl(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,a=1-e,o=1-i,u=Math.min(r,a,o);return["CMYK",r,a,o,u]}}class R6{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ge("Abstract method `_createSVG` called.")}}class P0 extends R6{_createSVG(t){return document.createElementNS(Ur,t)}}const D6=9,la=new WeakSet,N6=new Date().getTimezoneOffset()*60*1e3;class U2{static create(t){switch(t.data.annotationType){case xi.LINK:return new Lf(t);case xi.TEXT:return new z6(t);case xi.WIDGET:switch(t.data.fieldType){case"Tx":return new L6(t);case"Btn":return t.data.radioButton?new xb(t):t.data.checkBox?new I6(t):new F6(t);case"Ch":return new P6(t);case"Sig":return new B6(t)}return new da(t);case xi.POPUP:return new of(t);case xi.FREETEXT:return new wb(t);case xi.LINE:return new H6(t);case xi.SQUARE:return new j6(t);case xi.CIRCLE:return new G6(t);case xi.POLYLINE:return new Sb(t);case xi.CARET:return new $6(t);case xi.INK:return new Bf(t);case xi.POLYGON:return new q6(t);case xi.HIGHLIGHT:return new Ab(t);case xi.UNDERLINE:return new V6(t);case xi.SQUIGGLY:return new Y6(t);case xi.STRIKEOUT:return new X6(t);case xi.STAMP:return new _b(t);case xi.FILEATTACHMENT:return new K6(t);default:return new ii(t)}}}class ii{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ii._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:r}=this.data;let a=-1/0,o=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>o?(o=e[u+1],a=e[u+2]):e[u+1]===o&&(a=Math.max(a,e[u+2]));return[a,o]}if(i?.length>=1){for(const u of i)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>o?(o=u[h+1],a=u[h]):u[h+1]===o&&(a=Math.max(a,u[h]));if(a!==1/0)return[a,o]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-a)/i,t[1]=100*(t[1]-o)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${_l}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${_l}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#i(e);let r=this.#n?.popup||this.popup;!r&&i?.text&&(this._createPopup(i),r=this.#n.popup),r&&(r.updateEdited(t),i?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:u,pageY:h}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-u)/a}%`,e.top=`${100*(o-t[3]+h)/o}%`,r===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof da)&&!(this instanceof Lf)&&(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof of){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,a),a}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(x>0||_>0){const E=`calc(${x}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;o.borderRadius=E}else if(this instanceof xb){const E=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;o.borderRadius=E}switch(e.borderStyle.style){case Ja.SOLID:o.borderStyle="solid";break;case Ja.DASHED:o.borderStyle="dashed";break;case Ja.BEVELED:ae("Unimplemented border style: beveled");break;case Ja.INSET:ae("Unimplemented border style: inset");break;case Ja.UNDERLINE:o.borderBottomStyle="solid";break}const A=e.borderColor||null;A?(this.#e=!0,o.borderColor=$t.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):o.borderWidth=0}const f=$t.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:p,pageX:b,pageY:v}=r.rawDims;o.left=`${100*(f[0]-b)/m}%`,o.top=`${100*(f[1]-v)/p}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(o.width=`${100*u/m}%`,o.height=`${100*h/p}%`):this.setRotation(w,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims;let{width:a,height:o}=this;t%180!==0&&([a,o]=[o,a]),e.style.width=`${100*a/i}%`,e.style.height=`${100*o/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const a=r.detail[e],o=a[0],u=a.slice(1);r.target.style[i]=P2[`${o}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:P2[`${o}_rgb`](u)})};return me(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||i[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,a]of Object.entries(e)){const o=i[r];if(o){const u={detail:{[r]:a},target:t};o(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,a]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,_,A,E]=t.subarray(2,6);if(r===x&&a===_&&e===A&&i===E)return}const{style:o}=this.container;let u;if(this.#e){const{borderColor:x,borderWidth:_}=o;o.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const h=r-e,f=a-i,{svgFactory:m}=this,p=m.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const b=m.createElement("defs");p.append(b);const v=m.createElement("clipPath"),w=`clippath_${this.data.id}`;v.setAttribute("id",w),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let x=2,_=t.length;x<_;x+=8){const A=t[x],E=t[x+1],C=t[x+2],N=t[x+3],D=m.createElement("rect"),F=(C-e)/h,B=(a-E)/f,Y=(A-C)/h,j=(E-N)/f;D.setAttribute("x",F),D.setAttribute("y",B),D.setAttribute("width",Y),D.setAttribute("height",j),v.append(D),u?.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${B}" width="${Y}" height="${j}"/>`)}this.#e&&(u.push("</g></svg>')"),o.backgroundImage=u.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let i,r;t?(i={str:t.text},r=t.date):(i=e.contentsObj,r=e.modificationDate);const a=this.#n=new of({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Ge("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:a,id:o,exportValues:u}of r){if(a===-1||o===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${o}"]`);if(f&&!la.has(f)){ae(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:h,domElement:f})}return i}for(const r of document.getElementsByName(t)){const{exportValue:a}=r,o=r.getAttribute("data-element-id");o!==e&&la.has(r)&&i.push({id:o,exportValue:a,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class O6 extends ii{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Lf extends ii{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(i,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#n(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const a=i.get(r);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){ae('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:r,refs:a,include:o}=e,u=[];if(r.length!==0||a.length!==0){const m=new Set(a);for(const p of r){const b=this._fieldObjects[p]||[];for(const{id:v}of b)m.add(v)}for(const p of Object.values(this._fieldObjects))for(const b of p)m.has(b.id)===o&&u.push(b)}else for(const m of Object.values(this._fieldObjects))u.push(...m);const h=this.annotationStorage,f=[];for(const m of u){const{id:p}=m;switch(f.push(p),m.type){case"text":{const v=m.defaultValue||"";h.setValue(p,{value:v});break}case"checkbox":case"radiobutton":{const v=m.defaultValue===m.exportValues;h.setValue(p,{value:v});break}case"combobox":case"listbox":{const v=m.defaultValue||"";h.setValue(p,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${p}"]`);if(b){if(!la.has(b)){ae(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class z6 extends ii{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class da extends ii{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Li.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,a){i.includes("mouse")?t.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(o)}})})}_setEventListeners(t,e,i,r){for(const[a,o]of i)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,o,r),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":$t.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||D6,a=t.style;let o;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(f/(Td*r))||1,p=f/m;o=Math.min(r,h(p/Td))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);o=Math.min(r,h(f/Td))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=$t.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class L6 extends da{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const a=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),a.setValue(o.id,{[r]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let a=r.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),la.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:p}=this.data,b=!!m&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",w=>{const x=this.data.defaultFieldValue??"";i.value=h.userValue=x,h.formattedValue=null});let v=w=>{const{formattedValue:x}=h;x!=null&&(w.target.value=x),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",x=>{if(h.focused)return;const{target:_}=x;if(b&&(_.type=m,p&&(_.step=p)),h.userValue){const A=h.userValue;if(b)if(m==="time"){const E=new Date(A),C=[E.getHours(),E.getMinutes(),E.getSeconds()];_.value=C.map(N=>N.toString().padStart(2,"0")).join(":")}else _.value=new Date(A-N6).toISOString().split(m==="date"?"T":".",1)[0];else _.value=A}h.lastCommittedValue=_.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const _={value(A){h.userValue=A.detail.value??"",b||t.setValue(e,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:E}=A.detail;h.formattedValue=E,E!=null&&A.target!==document.activeElement&&(A.target.value=E);const C={formattedValue:E};b&&(C.value=E),t.setValue(e,C)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:E}=A.detail,{target:C}=A;if(E===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",E);let N=h.userValue;!N||N.length<=E||(N=N.slice(0,E),C.value=h.userValue=N,t.setValue(e,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(_,x)}),i.addEventListener("keydown",x=>{h.commitKey=1;let _=-1;if(x.key==="Escape"?_=0:x.key==="Enter"&&!this.data.multiLine?_=2:x.key==="Tab"&&(h.commitKey=3),_===-1)return;const{value:A}=x.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:_,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const w=v;v=null,i.addEventListener("blur",x=>{if(!h.focused||!x.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:_}=x;let{value:A}=_;if(b){if(A&&m==="time"){const E=A.split(":").map(C=>parseInt(C,10));A=new Date(2e3,0,1,E[0],E[1],E[2]||0).valueOf(),_.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();_.type="text"}h.userValue=A,h.lastCommittedValue!==A&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:h.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),w(x)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",x=>{h.lastCommittedValue=null;const{data:_,target:A}=x,{value:E,selectionStart:C,selectionEnd:N}=A;let D=C,F=N;switch(x.inputType){case"deleteWordBackward":{const B=E.substring(0,C).match(/\w*[^\w]*$/);B&&(D-=B[0].length);break}case"deleteWordForward":{const B=E.substring(C).match(/^[^\w]*\w*/);B&&(F+=B[0].length);break}case"deleteContentBackward":C===N&&(D-=1);break;case"deleteContentForward":C===N&&(F+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:_||"",willCommit:!1,selStart:D,selEnd:F}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class B6 extends da{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class I6 extends da{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return la.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const f of this._getElementsByName(u,i)){const m=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(i,{value:h})}),a.addEventListener("resetform",o=>{const u=e.defaultFieldValue||"Off";o.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class xb extends da{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const a=document.createElement("input");if(la.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const f of this._getElementsByName(u,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:h})}),a.addEventListener("resetform",o=>{const u=e.defaultFieldValue;o.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;a.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const m=o===f.detail.value;for(const p of this._getElementsByName(f.target.name)){const b=m&&p.id===i;p.domElement&&(p.domElement.checked=b),t.setValue(p.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class F6 extends Lf{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class P6 extends da{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");la.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const p=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===p});for(const m of this.data.options){const p=document.createElement("option");p.textContent=m.displayValue,p.value=m.exportValue,i.value.includes(m.exportValue)&&(p.setAttribute("selected",!0),a=!1),r.append(p)}let o=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),o=()=>{m.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const u=m=>{const p=m?"value":"textContent",{options:b,multiple:v}=r;return v?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[p]):b.selectedIndex===-1?null:b[b.selectedIndex][p]};let h=u(!1);const f=m=>{const p=m.target.options;return Array.prototype.map.call(p,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const p={value(b){o?.();const v=b.detail.value,w=new Set(Array.isArray(v)?v:[v]);for(const x of r.options)x.selected=w.has(x.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const v=r.options,w=b.detail.remove;v[w].selected=!1,r.remove(w),v.length>0&&Array.prototype.findIndex.call(v,_=>_.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(b){const{index:v,displayValue:w,exportValue:x}=b.detail.insert,_=r.children[v],A=document.createElement("option");A.textContent=w,A.value=x,_?_.before(A):r.append(A),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:v}=b.detail;for(;r.length!==0;)r.remove(0);for(const w of v){const{displayValue:x,exportValue:_}=w,A=document.createElement("option");A.textContent=x,A.value=_,r.append(A)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const v=new Set(b.detail.indices);for(const w of b.target.options)w.selected=v.has(w.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(p,m)}),r.addEventListener("input",m=>{const p=u(!0),b=u(!1);t.setValue(e,{value:p}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:b,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class of extends ii{constructor(t){const{data:e,elements:i,parent:r}=t,a=!!r._commentManager;if(super(t,{isRenderable:!a&&ii._hasPopupData(e)}),this.elements=i,a&&ii._hasPopupData(e)){const o=this.popup=this.#t();for(const u of i)u.popup=o}else this.popup=null}#t(){return new U6({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${kf}${r}`).join(",")),this.container}}class U6{#t=null;#e=this.#q.bind(this);#n=this.#P.bind(this);#i=this.#O.bind(this);#a=this.#w.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#b=null;#y=null;#v=null;#k=null;#A=null;#x=null;#T=!1;#S=null;#_=null;constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:a,contentsObj:o,richText:u,parent:h,rect:f,parentRect:m,open:p,commentManager:b=null}){this.#s=t,this.#A=r,this.#o=o,this.#k=u,this.#d=h,this.#r=e,this.#v=f,this.#h=m,this.#l=i,this.#t=b,this.#S=i[0],this.#c=Jd.toDateObject(a),this.trigger=i.flatMap(v=>v.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#R(),this.#s.hidden=!0,p&&this.#w())}#R(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#a,{signal:t}),e.addEventListener("pointerenter",this.#i,{signal:t}),e.addEventListener("pointerleave",this.#n,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#C(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#b||this.#C(),!this.#b))return;const{signal:t}=this.#m=new AbortController,e=!!this.#S.extraPopupElement,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#S.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",a,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=this.#p=document.createElement("button");o.className="annotationCommentButton";const u=this.#S.container;o.style.zIndex=u.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#M(),o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",a,{signal:t}),u.after(o)}}#M(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[t,e]=this.#b,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#I(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#S.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:r,modificationDate:a}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:r,modificationDate:a}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#S.commentText,this.#_}set comment(t){t!==this.comment&&(this.#S.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#y)return this.#y;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:r,y:a,width:o,height:u}=this.#S.layer.getBoundingClientRect();return[(t-r)/o,(e+i-a)/u]}set commentPopupPosition(t){this.#y=t}hasDefaultPopupPosition(){return this.#y===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#y||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:a,y:o,width:u,height:h}=r;this.#t.showDialog(null,this,a+e*u,o+i*h,{...t,parentDimensions:r})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#r){const i=t.style.outlineColor=$t.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#A?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#A}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}tb({html:this.#N||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#N(){const t=this.#k,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#k.html||null}get#z(){return this.#N?.attributes?.style?.fontSize||0}get#F(){return this.#N?.attributes?.style?.color||null}#L(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#F,fontSize:this.#z?`calc(${this.#z}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:r});return i}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#I(),this.#_=e.text)),t&&(this.#b=null,this.#C(),this.#M());return}if(i||e?.deleted){this.remove();return}this.#R(),this.#x||={contentsObj:this.#o,richText:this.#k},t&&(this.#u=null),e&&e.text&&(this.#k=this.#L(e.text),this.#c=Jd.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#k}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#E(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:a}}}=this.#d;let o=!!this.#h,u=o?this.#h:this.#v;for(const w of this.#l)if(!u||$t.intersect(w.data.rect,u)!==null){u=w.data.rect,o=!0;break}const h=$t.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),m=o?u[2]-u[0]+5:0,p=h[0]+m,b=h[1];this.#u=[100*(p-r)/e,100*(b-a)/i];const{style:v}=this.#s;v.left=`${this.#u[0]}%`,v.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#e)):(this.#P(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#e))}#O(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#E(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#P(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#T&&(this.#g||this.#O(),this.#T=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class wb extends ii{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=oe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class H6 extends ii{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class j6 extends ii{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",e-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class G6 extends ii{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",i/2),o.setAttribute("rx",e/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Sb extends ii{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:r},width:a,height:o}=this;if(!e)return this.container;const u=this.svgFactory.create(a,o,!0);let h=[];for(let m=0,p=e.length;m<p;m+=2){const b=e[m]-t[0],v=t[3]-e[m+1];h.push(`${b},${v}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class q6 extends Sb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $6 extends ii{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Bf extends ii{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?oe.HIGHLIGHT:oe.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:o,width:u,height:h}=this.#n(e,t),f=this.svgFactory.create(u,h,!0),m=this.#t=this.svgFactory.createElement("svg:g");f.append(m),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",o);for(let p=0,b=i.length;p<b;p++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",i[p].join(",")),m.append(v)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:r}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),i)for(let o=0,u=this.#e.length;o<u;o++)this.#e[o].setAttribute("points",i[o].join(","));if(r){const{transform:o,width:u,height:h}=this.#n(this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ab extends ii{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=oe.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class V6 extends ii{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class Y6 extends ii{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class X6 extends ii{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class _b extends ii{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=oe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class K6 extends ii{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:r}=Li.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class If{#t=null;#e=null;#n=null;#i=new Map;#a=null;#r=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:o,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:m}){this.div=t,this.#t=e,this.#e=i,this.#a=u||null,this.#r=f||null,this.#n=m||new Rf,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async#s(t,e,i){const r=t.firstChild||t,a=r.id=`${kf}${e}`,o=await this.#a?.getAriaAttributes(a);if(o)for(const[u,h]of o)r.setAttribute(u,h);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:e}=t,i=this.div;oa(i,this.viewport);const r=new Map,a={data:null,layer:i,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new P0,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const u=o.annotationType===xi.POPUP;if(u){const m=r.get(o.id);if(!m)continue;a.elements=m}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const h=U2.create(a);if(!h.isRenderable)continue;if(!u&&o.popupRef){const m=r.get(o.popupRef);m?m.push(h):r.set(o.popupRef,[h])}const f=h.render();o.hidden&&(f.style.visibility="hidden"),await this.#s(f,o.id,a.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#i.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#r,svgFactory:new P0,parent:this};for(const i of t){i.borderStyle||=If._defaultBorderStyle,e.data=i;const r=U2.create(e);if(!r.isRenderable)continue;const a=r.render();await this.#s(a,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,oa(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i);const o=this.#i.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,i),o._hasNoCanvas=!1):o.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:r}=t,a=new O6({data:{id:i,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#n}),o=a.render();return e.append(o),this.#t?.moveElementInDOM(e,o,o,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return me(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ja.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const b0=/\r\n?|\n/g;class Ei extends Qt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ei.prototype,e=a=>a.isEmpty(),i=Ds.TRANSLATE_SMALL,r=Ds.TRANSLATE_BIG;return me(this,"_keyboardManager",new Fl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=oe.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ei._defaultColor||Qt._defaultLineColor,this.#i=t.fontSize||Ei._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){Qt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ae.FREETEXT_SIZE:Ei._defaultFontSize=e;break;case Ae.FREETEXT_COLOR:Ei._defaultColor=e;break}}updateParams(t,e){switch(t){case Ae.FREETEXT_SIZE:this.#a(e);break;case Ae.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[Ae.FREETEXT_SIZE,Ei._defaultFontSize],[Ae.FREETEXT_COLOR,Ei._defaultColor||Qt._defaultLineColor]]}get propertiesToUpdate(){return[[Ae.FREETEXT_SIZE,this.#i],[Ae.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Cl(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ae.FREETEXT_COLOR}#a(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},i=this.#i;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const e=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ei._internalPadding*t,-(Ei._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(Ei.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const i=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ei._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,m]=this.pageDimensions,[p,b]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(o[0]-p)/f,w=e+this.height-(o[1]-b)/m;break;case 90:v=t+(o[0]-p)/f,w=e-(o[1]-b)/m,[u,h]=[h,-u];break;case 180:v=t-this.width+(o[0]-p)/f,w=e-(o[1]-b)/m,[u,h]=[-u,-h];break;case 270:v=t+(o[0]-p-this.height*m)/f,w=e+(o[1]-b-this.width*f)/m,[u,h]=[-h,u];break}this.setAt(v*r,w*a,u,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(b0,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=Ei.#h(e.getData("text")||"").replaceAll(b0,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:h}=o,f=[],m=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(m.push(u.nodeValue.slice(h).replaceAll(b0,"")),v!==this.editorDiv){let w=f;for(const x of this.editorDiv.childNodes){if(x===v){w=m;continue}w.push(Ei.#c(x))}}f.push(u.nodeValue.slice(0,h).replaceAll(b0,""))}else if(u===this.editorDiv){let v=f,w=0;for(const x of this.editorDiv.childNodes)w++===h&&(v=m),v.push(Ei.#c(x))}this.#t=`${f.join(`
`)}${r}${m.join(`
`)}`,this.#l();const p=new Range;let b=Math.sumPrecise(f.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(b<=w){p.setStart(v,b),p.setEnd(v,b);break}b-=w}a.removeAllRanges(),a.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(" "," ")}static#h(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ei._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let r=null;if(t instanceof wb){const{data:{defaultAppearanceData:{fontSize:o,fontColor:u},rect:h,rotation:f,id:m,popupRef:p,richText:b,contentsObj:v,creationDate:w,modificationDate:x},textContent:_,textPosition:A,parent:{page:{pageNumber:E}}}=t;if(!_||_.length===0)return null;r=t={annotationType:oe.FREETEXT,color:Array.from(u),fontSize:o,value:_.join(`
`),position:A,pageIndex:E-1,rect:h.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:p,comment:v?.str||null,richText:b,creationDate:w,modificationDate:x}}const a=await super.deserialize(t,e,i);return a.#i=t.fontSize,a.color=$t.makeHexColor(...t.color),a.#t=Ei.#h(t.value),a._initialData=r,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Qt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#i,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((o,u)=>o!==r[u])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const r of this.#t.split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),e.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Gt{static PRECISION=1e-4;toSVGPath(){Ge("Abstract method `toSVGPath` must be implemented.")}get box(){Ge("Abstract getter `box` must be implemented.")}serialize(t,e){Ge("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,a,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=e+t[u]*r,o[u+1]=i+t[u+1]*a;return o}static _rescaleAndSwap(t,e,i,r,a,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=e+t[u+1]*r,o[u+1]=i+t[u]*a;return o}static _translate(t,e,i,r){r||=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a],r[a+1]=i+t[a+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,a){switch(a){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,a,o){return[(t+5*i)/6,(e+5*r)/6,(5*i+a)/6,(5*r+o)/6,(i+a)/2,(r+o)/2]}}class na{#t;#e=[];#n;#i;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#g=8;static#m=2;static#u=na.#g+na.#m;constructor({x:t,y:e},i,r,a,o,u=0){this.#t=i,this.#h=a*r,this.#i=o,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=u,this.#l=na.#g*r,this.#c=na.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#p(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[i,r,a,o]=this.#t;return[(this.#s+(t[0]-e[0])/2-i)/a,(this.#o+(t[1]-e[1])/2-r)/o,(this.#s+(e[0]-t[0])/2-i)/a,(this.#o+(e[1]-t[1])/2-r)/o]}add({x:t,y:e}){this.#s=t,this.#o=e;const[i,r,a,o]=this.#t;let[u,h,f,m]=this.#r.subarray(8,12);const p=t-f,b=e-m,v=Math.hypot(p,b);if(v<this.#c)return!1;const w=v-this.#l,x=w/v,_=x*p,A=x*b;let E=u,C=h;u=f,h=m,f+=_,m+=A,this.#f?.push(t,e);const N=-A/w,D=_/w,F=N*this.#h,B=D*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+F,m+B],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-F,m-B],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+F,h+B],2),this.#a.push(NaN,NaN,NaN,NaN,(u+F-i)/a,(h+B-r)/o),this.#r.set([u-F,h-B],14),this.#e.push(NaN,NaN,NaN,NaN,(u-F-i)/a,(h-B-r)/o)),this.#r.set([E,C,u,h,f,m],6),!this.isEmpty()):(this.#r.set([E,C,u,h,f,m],6),Math.abs(Math.atan2(C-h,E-u)-Math.atan2(A,_))<Math.PI/2?([u,h,f,m]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-i)/a,((h+m)/2-r)/o),[u,h,E,C]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((E+u)/2-i)/a,((C+h)/2-r)/o),!0):([E,C,u,h,f,m]=this.#r.subarray(0,6),this.#a.push(((E+5*u)/6-i)/a,((C+5*h)/6-r)/o,((5*u+f)/6-i)/a,((5*h+m)/6-r)/o,((u+f)/2-i)/a,((h+m)/2-r)/o),[f,m,u,h,E,C]=this.#r.subarray(12,18),this.#e.push(((E+5*u)/6-i)/a,((C+5*h)/6-r)/o,((5*u+f)/6-i)/a,((5*h+m)/6-r)/o,((u+f)/2-i)/a,((h+m)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#b();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#v(i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#y(i),i.join(" ")}#b(){const[t,e,i,r]=this.#t,[a,o,u,h]=this.#p();return`M${(this.#r[2]-t)/i} ${(this.#r[3]-e)/r} L${(this.#r[4]-t)/i} ${(this.#r[5]-e)/r} L${a} ${o} L${u} ${h} L${(this.#r[16]-t)/i} ${(this.#r[17]-e)/r} L${(this.#r[14]-t)/i} ${(this.#r[15]-e)/r} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,i,r,a]=this.#t,o=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[h,f,m,p]=this.#p();t.push(`L${(o[0]-e)/r} ${(o[1]-i)/a} L${h} ${f} L${m} ${p} L${(u[0]-e)/r} ${(u[1]-i)/a}`)}newFreeDrawOutline(t,e,i,r,a,o){return new kb(t,e,i,r,a,o)}getOutlines(){const t=this.#a,e=this.#e,i=this.#r,[r,a,o,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let p=0,b=h.length-2;p<b;p+=2)h[p]=(this.#f[p]-r)/o,h[p+1]=(this.#f[p+1]-a)/u;if(h[h.length-2]=(this.#s-r)/o,h[h.length-1]=(this.#o-a)/u,isNaN(i[6])&&!this.isEmpty())return this.#k(h);const f=new Float32Array(this.#a.length+24+this.#e.length);let m=t.length;for(let p=0;p<m;p+=2){if(isNaN(t[p])){f[p]=f[p+1]=NaN;continue}f[p]=t[p],f[p+1]=t[p+1]}m=this.#x(f,m);for(let p=e.length-6;p>=6;p-=6)for(let b=0;b<6;b+=2){if(isNaN(e[p+b])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[p+b],f[m+1]=e[p+b+1],m+=2}return this.#A(f,m),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#n,this.#i)}#k(t){const e=this.#r,[i,r,a,o]=this.#t,[u,h,f,m]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-i)/a,(e[3]-r)/o,NaN,NaN,NaN,NaN,(e[4]-i)/a,(e[5]-r)/o,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-i)/a,(e[17]-r)/o,NaN,NaN,NaN,NaN,(e[14]-i)/a,(e[15]-r)/o],0),this.newFreeDrawOutline(p,t,this.#t,this.#d,this.#n,this.#i)}#A(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#x(t,e){const i=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[a,o,u,h]=this.#t,[f,m,p,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-a)/u,(i[1]-o)/h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,p,b,NaN,NaN,NaN,NaN,(r[0]-a)/u,(r[1]-o)/h],e),e+=24}}class kb extends Gt{#t;#e=new Float32Array(4);#n;#i;#a;#r;#s;constructor(t,e,i,r,a,o){super(),this.#s=t,this.#a=e,this.#t=i,this.#r=r,this.#n=a,this.#i=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(o);const[u,h,f,m]=this.#e;for(let p=0,b=t.length;p<b;p+=2)t[p]=(t[p]-u)/f,t[p+1]=(t[p+1]-h)/m;for(let p=0,b=e.length;p<b;p+=2)e[p]=(e[p]-u)/f,e[p+1]=(e[p+1]-h)/m}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,i=this.#s.length;e<i;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,r],a){const o=i-t,u=r-e;let h,f;switch(a){case 0:h=Gt._rescale(this.#s,t,r,o,-u),f=Gt._rescale(this.#a,t,r,o,-u);break;case 90:h=Gt._rescaleAndSwap(this.#s,t,e,o,u),f=Gt._rescaleAndSwap(this.#a,t,e,o,u);break;case 180:h=Gt._rescale(this.#s,i,e,-o,u),f=Gt._rescale(this.#a,i,e,-o,u);break;case 270:h=Gt._rescaleAndSwap(this.#s,i,r,-o,-u),f=Gt._rescaleAndSwap(this.#a,i,r,-o,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const e=this.#s;let i=e[4],r=e[5];const a=[i,r,i,r];let o=i,u=r,h=i,f=r;const m=t?Math.max:Math.min,p=new Float32Array(4);for(let v=6,w=e.length;v<w;v+=6){const x=e[v+4],_=e[v+5];isNaN(e[v])?($t.pointBoundingBox(x,_,a),u>_?(o=x,u=_):u===_&&(o=m(o,x)),f<_?(h=x,f=_):f===_&&(h=m(h,x))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,$t.bezierBoundingBox(i,r,...e.slice(v,v+6),p),$t.rectBoundingBox(p[0],p[1],p[2],p[3],a),u>p[1]?(o=p[0],u=p[1]):u===p[1]&&(o=m(o,p[0])),f<p[3]?(h=p[2],f=p[3]):f===p[3]&&(h=m(h,p[2]))),i=x,r=_}const b=this.#e;b[0]=a[0]-this.#n,b[1]=a[1]-this.#n,b[2]=a[2]-a[0]+2*this.#n,b[3]=a[3]-a[1]+2*this.#n,this.firstPoint=[o,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,e,i,r,a,o=0){return new na(t,e,i,r,a,o)}getNewOutline(t,e){const[i,r,a,o]=this.#e,[u,h,f,m]=this.#t,p=a*f,b=o*m,v=i*f+u,w=r*m+h,x=this.newOutliner({x:this.#a[0]*p+v,y:this.#a[1]*b+w},this.#t,this.#r,t,this.#i,e??this.#n);for(let _=2;_<this.#a.length;_+=2)x.add({x:this.#a[_]*p+v,y:this.#a[_+1]*b+w});return x.getOutlines()}}class lf{#t;#e;#n;#i=[];#a=[];constructor(t,e=0,i=0,r=!0){const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x,y:_,width:A,height:E}of t){const C=Math.floor((x-e)/o)*o,N=Math.ceil((x+A+e)/o)*o,D=Math.floor((_-e)/o)*o,F=Math.ceil((_+E+e)/o)*o,B=[C,D,F,!0],Y=[N,D,F,!1];this.#i.push(B,Y),$t.rectBoundingBox(C,D,N,F,a)}const u=a[2]-a[0]+2*i,h=a[3]-a[1]+2*i,f=a[0]-i,m=a[1]-i;let p=r?-1/0:1/0,b=1/0;const v=this.#i.at(r?-1:-2),w=[v[0],v[2]];for(const x of this.#i){const[_,A,E,C]=x;!C&&r?A<b?(b=A,p=_):A===b&&(p=Math.max(p,_)):C&&!r&&(A<b?(b=A,p=_):A===b&&(p=Math.min(p,_))),x[0]=(_-f)/u,x[1]=(A-m)/h,x[2]=(E-m)/h}this.#t=new Float32Array([f,m,u,h]),this.#e=[p,b],this.#n=w}getOutlines(){this.#i.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#i)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],i=new Set;for(const o of t){const[u,h,f]=o;e.push([u,h,o],[u,f,o])}e.sort((o,u)=>o[1]-u[1]||o[0]-u[0]);for(let o=0,u=e.length;o<u;o+=2){const h=e[o][2],f=e[o+1][2];h.push(f),f.push(h),i.add(h),i.add(f)}const r=[];let a;for(;i.size>0;){const o=i.values().next().value;let[u,h,f,m,p]=o;i.delete(o);let b=u,v=h;for(a=[u,f],r.push(a);;){let w;if(i.has(m))w=m;else if(i.has(p))w=p;else break;i.delete(w),[u,h,f,m,p]=w,b!==u&&(a.push(b,v,u,v===h?h:f),b=u),v=v===h?f:h}a.push(b,v)}return new Z6(r,this.#t,this.#e,this.#n)}#s(t){const e=this.#a;let i=0,r=e.length-1;for(;i<=r;){const a=i+r>>1,o=e[a][0];if(o===t)return a;o<t?i=a+1:r=a-1}return r+1}#o([,t,e]){const i=this.#s(t);this.#a.splice(i,0,[t,e])}#c([,t,e]){const i=this.#s(t);for(let r=i;r<this.#a.length;r++){const[a,o]=this.#a[r];if(a!==t)break;if(a===t&&o===e){this.#a.splice(r,1);return}}for(let r=i-1;r>=0;r--){const[a,o]=this.#a[r];if(a!==t)break;if(a===t&&o===e){this.#a.splice(r,1);return}}}#l(t){const[e,i,r]=t,a=[[e,i,r]],o=this.#s(r);for(let u=0;u<o;u++){const[h,f]=this.#a[u];for(let m=0,p=a.length;m<p;m++){const[,b,v]=a[m];if(!(f<=b||v<=h)){if(b>=h){if(v>f)a[m][1]=f;else{if(p===1)return[];a.splice(m,1),m--,p--}continue}a[m][2]=h,v>f&&a.push([e,f,v])}}}return a}}class Z6 extends Gt{#t;#e;constructor(t,e,i,r){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=r}toSVGPath(){const t=[];for(const e of this.#e){let[i,r]=e;t.push(`M${i} ${r}`);for(let a=2;a<e.length;a+=2){const o=e[a],u=e[a+1];o===i?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,e,i,r],a){const o=[],u=i-t,h=r-e;for(const f of this.#e){const m=new Array(f.length);for(let p=0;p<f.length;p+=2)m[p]=t+f[p]*u,m[p+1]=r-f[p+1]*h;o.push(m)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class cf extends na{newFreeDrawOutline(t,e,i,r,a,o){return new W6(t,e,i,r,a,o)}}class W6 extends kb{newOutliner(t,e,i,r,a,o=0){return new cf(t,e,i,r,a,o)}}class hi extends Qt{#t=null;#e=0;#n;#i=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#m=null;#u="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=oe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=hi.prototype;return me(this,"_keyboardManager",new Fl([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||hi._defaultColor,this.#p=t.thickness||hi._defaultThickness,this.opacity=t.opacity||hi._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#S()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#y(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new lf(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new lf(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:r}=this.#r;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const r=1.5;if(this.#r=t.getNewOutline(this.#p/2+r,.0025),e>=0)this.#d=e,this.#i=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:hi.#_(this.#l.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:hi.#_(this.#r.box,p),path:{d:this.#r.toSVGPath()}})}const[a,o,u,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=u,this.height=h;break;case 90:{const[p,b]=this.parentDimensions;this.x=o,this.y=1-a,this.width=u*b/p,this.height=h*p/b;break}case 180:this.x=1-a,this.y=1-o,this.width=u,this.height=h;break;case 270:{const[p,b]=this.parentDimensions;this.x=1-o,this.y=a,this.width=u*b/p,this.height=h*p/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-a)/u,(f[1]-o)/h];const{lastPoint:m}=this.#r;this.#g=[(m[0]-a)/u,(m[1]-o)/h]}static initialize(t,e){Qt.initialize(t,e),hi._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ae.HIGHLIGHT_COLOR:hi._defaultColor=e;break;case Ae.HIGHLIGHT_THICKNESS:hi._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Ae.HIGHLIGHT_COLOR:this.#k(e);break;case Ae.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[Ae.HIGHLIGHT_COLOR,hi._defaultColor],[Ae.HIGHLIGHT_THICKNESS,hi._defaultThickness]]}get propertiesToUpdate(){return[[Ae.HIGHLIGHT_COLOR,this.color||hi._defaultColor],[Ae.HIGHLIGHT_THICKNESS,this.#p||hi._defaultThickness],[Ae.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#k(t){const e=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:e.bind(this,t,hi._defaultOpacity),undo:e.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#A(t){const e=this.#p,i=r=>{this.#p=r,this.#x(r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ae.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Fn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#S(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#_([t,e,i,r],a){switch(a){case 90:return[1-e-r,t,r,i];case 180:return[1-t-i,1-e-r,i,r];case 270:return[e,1-t-i,r,i]}return[t,e,i,r]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=hi.#_(this.#l.box,t)):i=hi.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:hi.#_(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i,this.setDims(this.width,this.height),eb(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#R(t){hi._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#h||this.#C(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#I(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,r]=this.pageTranslation,a=this.#n,o=new Float32Array(a.length*8);let u=0;for(const{x:h,y:f,width:m,height:p}of a){const b=h*t+i,v=(1-f)*e+r;o[u]=o[u+4]=b,o[u+1]=o[u+3]=v,o[u+2]=o[u+6]=b+m*t,o[u+5]=o[u+7]=v-p*e,u+=8}return o}#N(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:i,x:r,y:a}){const{x:o,y:u,width:h,height:f}=i.getBoundingClientRect(),m=new AbortController,p=t.combinedSignal(m),b=v=>{m.abort(),this.#F(t,v)};window.addEventListener("blur",b,{signal:p}),window.addEventListener("pointerup",b,{signal:p}),window.addEventListener("pointerdown",ai,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Un,{signal:p}),i.addEventListener("pointermove",this.#z.bind(this,t),{signal:p}),this._freeHighlight=new cf({x:r,y:a},[o,u,h,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#z(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let r=null;if(t instanceof Ab){const{data:{quadPoints:w,rect:x,rotation:_,id:A,color:E,opacity:C,popupRef:N,richText:D,contentsObj:F,creationDate:B,modificationDate:Y},parent:{page:{pageNumber:j}}}=t;r=t={annotationType:oe.HIGHLIGHT,color:Array.from(E),opacity:C,quadPoints:w,boxes:null,pageIndex:j-1,rect:x.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,popupRef:N,richText:D,comment:F?.str||null,creationDate:B,modificationDate:Y}}else if(t instanceof Bf){const{data:{inkLists:w,rect:x,rotation:_,id:A,color:E,borderStyle:{rawWidth:C},popupRef:N,richText:D,contentsObj:F,creationDate:B,modificationDate:Y},parent:{page:{pageNumber:j}}}=t;r=t={annotationType:oe.HIGHLIGHT,color:Array.from(E),thickness:C,inkLists:w,boxes:null,pageIndex:j-1,rect:x.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,popupRef:N,richText:D,comment:F?.str||null,creationDate:B,modificationDate:Y}}const{color:a,quadPoints:o,inkLists:u,opacity:h}=t,f=await super.deserialize(t,e,i);f.color=$t.makeHexColor(...a),f.opacity=h||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[m,p]=f.pageDimensions,[b,v]=f.pageTranslation;if(o){const w=f.#n=[];for(let x=0;x<o.length;x+=8)w.push({x:(o[x]-b)/m,y:1-(o[x+1]-v)/p,width:(o[x+2]-o[x])/m,height:(o[x+1]-o[x+5])/p});f.#y(),f.#S(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],x={x:w[0]-b,y:p-(w[1]-v)},_=new cf(x,[0,0,m,p],1,f.#p/2,!0,.001);for(let C=0,N=w.length;C<N;C+=2)x.x=w[C]-b,x.y=p-(w[C+1]-v),_.add(x);const{id:A,clipPathId:E}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);f.#v({highlightOutlines:_.getOutlines(),highlightId:A,clipPathId:E}),f.#S(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=Qt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#I(),outlines:this.#N(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#L(i)?null:(i.id=this.annotationElementId,i)}#L(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,r)=>i!==e[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Eb{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Ge("Not implemented")}}class ne extends Qt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static#r=NaN;static#s=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(ne._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[r,a]of Object.entries(e))i.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){Ge("Not implemented")}static get typesMap(){Ge("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(ne.#n.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,e[r]]);return t}_updateProperty(t,e,i){const r=this._drawingOptions,a=r[e],o=u=>{r.updateProperty(e,u);const h=this.#t.updateProperty(e,u);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#m()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#m()),{bbox:this.#p()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,i,r]){const{parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[e,1-t,i*(o/a),r*(a/o)];case 180:return[1-t,1-e,i,r];case 270:return[1-e,t,i*(o/a),r*(a/o)];default:return[t,e,i,r]}}#m(){const{x:t,y:e,width:i,height:r,parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[1-e,t,i*(a/o),r*(o/a)];case 180:return[1-t,1-e,i,r];case 270:return[e,1-t,i*(a/o),r*(o/a)];default:return[t,e,i,r]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:t,y:e,width:i,height:r,rotation:a,parentRotation:o,parentDimensions:[u,h]}=this;switch((a*4+o)/90){case 1:return[1-e-r,t,r,i];case 2:return[1-t-i,1-e-r,i,r];case 3:return[e,1-t-i,r,i];case 4:return[t,e-i*(u/h),r*(h/u),i*(u/h)];case 5:return[1-e,t,i*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-e,r*(h/u),i*(u/h)];case 7:return[e-i*(u/h),1-t-r*(h/u),i*(u/h),r*(h/u)];case 8:return[t-i,e-r,i,r];case 9:return[1-e,t-i,r,i];case 10:return[1-t,1-e,i,r];case 11:return[e-r,1-t,r,i];case 12:return[t-r*(h/u),e,r*(h/u),i*(u/h)];case 13:return[1-e-i*(u/h),t-r*(h/u),i*(u/h),r*(h/u)];case 14:return[1-t,1-e-i*(u/h),r*(h/u),i*(u/h)];case 15:return[e,1-t,i*(u/h),r*(h/u)];default:return[t,e,i,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties({bbox:this.#p()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,r,a){Ge("Not implemented")}static startDrawing(t,e,i,r){const{target:a,offsetX:o,offsetY:u,pointerId:h,pointerType:f}=r;if(ne.#s&&ne.#s!==f)return;const{viewport:{rotation:m}}=t,{width:p,height:b}=a.getBoundingClientRect(),v=ne.#i=new AbortController,w=t.combinedSignal(v);if(ne.#r||=h,ne.#s??=f,window.addEventListener("pointerup",x=>{ne.#r===x.pointerId?this._endDraw(x):ne.#o?.delete(x.pointerId)},{signal:w}),window.addEventListener("pointercancel",x=>{ne.#r===x.pointerId?this._currentParent.endDrawingSession():ne.#o?.delete(x.pointerId)},{signal:w}),window.addEventListener("pointerdown",x=>{ne.#s===x.pointerType&&((ne.#o||=new Set).add(x.pointerId),ne.#n.isCancellable()&&(ne.#n.removeLastElement(),ne.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Un,{signal:w}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),a.addEventListener("touchmove",x=>{x.timeStamp===ne.#c&&ai(x)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),ne.#n){t.drawLayer.updateProperties(this._currentDrawId,ne.#n.startNew(o,u,p,b,m));return}e.updateUIForDefaultProperties(this),ne.#n=this.createDrawerInstance(o,u,p,b,m),ne.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(ne.#a.toSVGProperties(),ne.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ne.#c=-1,!ne.#n)return;const{offsetX:e,offsetY:i,pointerId:r}=t;if(ne.#r===r){if(ne.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ne.#n.add(e,i)),ne.#c=t.timeStamp,ai(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,ne.#n=null,ne.#a=null,ne.#s=null,ne.#c=NaN),ne.#i&&(ne.#i.abort(),ne.#i=null,ne.#r=NaN,ne.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,ne.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=ne.#n,r=this._currentDrawId,a=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Ae.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ae.DRAW_STEP),!ne.#n.isEmpty()){const{pageDimensions:[i,r],scale:a}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ne.#n.getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:ne.#a,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,r,a,o){Ge("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:u}}=e.viewport,h=this.deserializeDraw(o,u,r,a,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#l({drawOutlines:h}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[r,a]=this.pageDimensions;return this.#t.serialize([e,i,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Q6{#t=new Float64Array(6);#e;#n;#i;#a;#r;#s="";#o=0;#c=new Ul;#l;#d;constructor(t,e,i,r,a,o){this.#l=i,this.#d=r,this.#i=a,this.#a=o,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#n=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#h(t,e){return Gt._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,r,a,o]=this.#t.subarray(2,6),u=t-a,h=e-o;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#r.push(t,e),isNaN(i)?(this.#t.set([a,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,r,a,o,t,e],0),this.#e.push(...Gt.createBezierPoints(i,r,a,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,a){this.#l=i,this.#d=r,this.#i=a,[t,e]=this.#h(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:o,points:this.#r}),this.#t.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,e=this.#n.length;t<e;t++){const{line:i,points:r}=this.#n[t];this.#e=i,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=Gt.svgRound(this.#e[4]),e=Gt.svgRound(this.#e[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#r.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){const r=Gt.svgRound(this.#e[10]),a=Gt.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${a}`,this.#o=12,this.#s}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,a=this.#e.length;r<a;r+=6){const[o,u,h,f,m,p]=this.#e.slice(r,r+6).map(Gt.svgRound);i.push(`C${o} ${u} ${h} ${f} ${m} ${p}`)}return this.#s+=i.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,i,r){const a=this.#n.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#n,t,e,i,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Ul extends Gt{#t;#e=0;#n;#i;#a;#r;#s;#o;#c;build(t,e,i,r,a,o,u){this.#a=e,this.#r=i,this.#s=r,this.#o=a,this.#c=o,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${Gt.svgRound(e[4])} ${Gt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Gt.svgRound(e[10])} ${Gt.svgRound(e[11])}`);continue}for(let i=6,r=e.length;i<r;i+=6){const[a,o,u,h,f,m]=e.subarray(i,i+6).map(Gt.svgRound);t.push(`C${a} ${o} ${u} ${h} ${f} ${m}`)}}return t.join("")}serialize([t,e,i,r],a){const o=[],u=[],[h,f,m,p]=this.#d();let b,v,w,x,_,A,E,C,N;switch(this.#o){case 0:N=Gt._rescale,b=t,v=e+r,w=i,x=-r,_=t+h*i,A=e+(1-f-p)*r,E=t+(h+m)*i,C=e+(1-f)*r;break;case 90:N=Gt._rescaleAndSwap,b=t,v=e,w=i,x=r,_=t+f*i,A=e+h*r,E=t+(f+p)*i,C=e+(h+m)*r;break;case 180:N=Gt._rescale,b=t+i,v=e,w=-i,x=r,_=t+(1-h-m)*i,A=e+f*r,E=t+(1-h)*i,C=e+(f+p)*r;break;case 270:N=Gt._rescaleAndSwap,b=t+i,v=e+r,w=-i,x=-r,_=t+(1-f-p)*i,A=e+(1-h-m)*r,E=t+(1-f)*i,C=e+(1-h)*r;break}for(const{line:D,points:F}of this.#i)o.push(N(D,b,v,w,x,a?new Array(D.length):null)),u.push(N(F,b,v,w,x,a?new Array(F.length):null));return{lines:o,points:u,rect:[_,A,E,C]}}static deserialize(t,e,i,r,a,{paths:{lines:o,points:u},rotation:h,thickness:f}){const m=[];let p,b,v,w,x;switch(h){case 0:x=Gt._rescale,p=-t/i,b=e/r+1,v=1/i,w=-1/r;break;case 90:x=Gt._rescaleAndSwap,p=-e/r,b=-t/i,v=1/r,w=1/i;break;case 180:x=Gt._rescale,p=t/i+1,b=-e/r,v=-1/i,w=1/r;break;case 270:x=Gt._rescaleAndSwap,p=e/r+1,b=t/i+1,v=-1/r,w=-1/i;break}if(!o){o=[];for(const A of u){const E=A.length;if(E===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1]]));continue}if(E===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1],NaN,NaN,NaN,NaN,A[2],A[3]]));continue}const C=new Float32Array(3*(E-2));o.push(C);let[N,D,F,B]=A.subarray(0,4);C.set([NaN,NaN,NaN,NaN,N,D],0);for(let Y=4;Y<E;Y+=2){const j=A[Y],et=A[Y+1];C.set(Gt.createBezierPoints(N,D,F,B,j,et),(Y-2)*3),[N,D,F,B]=[F,B,j,et]}}}for(let A=0,E=o.length;A<E;A++)m.push({line:x(o[A].map(C=>C??NaN),p,b,v,w),points:x(u[A].map(C=>C??NaN),p,b,v,w)});const _=new this.prototype.constructor;return _.build(m,i,r,1,h,f,a),_}#l(t=this.#c){const e=this.#n+t/2*this.#s;return this.#o%180===0?[e/this.#a,e/this.#r]:[e/this.#r,e/this.#a]}#d(){const[t,e,i,r]=this.#t,[a,o]=this.#l(0);return[t+a,e+o,i-2*a,r-2*o]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)$t.pointBoundingBox(r[u],r[u+1],t);continue}let a=r[4],o=r[5];for(let u=6,h=r.length;u<h;u+=6){const[f,m,p,b,v,w]=r.subarray(u,u+6);$t.bezierBoundingBox(a,o,f,m,p,b,v,w,t),a=v,o=w}}const[e,i]=this.#l();t[0]=$i(t[0]-e,0,1),t[1]=$i(t[1]-i,0,1),t[2]=$i(t[2]+e,0,1),t[3]=$i(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[r,a]=this.#l(),[o,u]=[r-e,a-i],h=this.#t;return h[0]-=o,h[1]-=u,h[2]+=2*o,h[3]+=2*u,h}updateParentDimensions([t,e],i){const[r,a]=this.#l();this.#a=t,this.#r=e,this.#s=i;const[o,u]=this.#l(),h=o-r,f=u-a,m=this.#t;return m[0]-=h,m[1]-=f,m[2]+=2*h,m[3]+=2*f,m}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Gt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,r=0,a=0,o=0,u=0,h=0;switch(this.#e){case 90:r=e/t,a=-t/e,u=t;break;case 180:i=-1,o=-1,u=t,h=e;break;case 270:r=-e/t,a=t/e,h=e;break;default:return""}return`matrix(${i} ${r} ${a} ${o} ${Gt.svgRound(u)} ${Gt.svgRound(h)})`}getPathResizingSVGProperties([t,e,i,r]){const[a,o]=this.#l(),[u,h,f,m]=this.#t;if(Math.abs(f-a)<=Gt.PRECISION||Math.abs(m-o)<=Gt.PRECISION){const x=t+i/2-(u+f/2),_=e+r/2-(h+m/2);return{path:{"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${x} ${_})`}}}const p=(i-2*a)/(f-2*a),b=(r-2*o)/(m-2*o),v=f/i,w=m/r;return{path:{"transform-origin":`${Gt.svgRound(u)} ${Gt.svgRound(h)}`,transform:`${this.rotationTransform} scale(${v} ${w}) translate(${Gt.svgRound(a)} ${Gt.svgRound(o)}) scale(${p} ${b}) translate(${Gt.svgRound(-a)} ${Gt.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,i,r]){const[a,o]=this.#l(),u=this.#t,[h,f,m,p]=u;if(u[0]=t,u[1]=e,u[2]=i,u[3]=r,Math.abs(m-a)<=Gt.PRECISION||Math.abs(p-o)<=Gt.PRECISION){const _=t+i/2-(h+m/2),A=e+r/2-(f+p/2);for(const{line:E,points:C}of this.#i)Gt._translate(E,_,A,E),Gt._translate(C,_,A,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*a)/(m-2*a),v=(r-2*o)/(p-2*o),w=-b*(h+a)+t+a,x=-v*(f+o)+e+o;if(b!==1||v!==1||w!==0||x!==0)for(const{line:_,points:A}of this.#i)Gt._rescale(_,w,x,b,v,_),Gt._rescale(A,w,x,b,v,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[r,a]=i,o=this.#t,u=t-o[0],h=e-o[1];if(this.#a===r&&this.#r===a)for(const{line:f,points:m}of this.#i)Gt._translate(f,u,h,f),Gt._translate(m,u,h,m);else{const f=this.#a/r,m=this.#r/a;this.#a=r,this.#r=a;for(const{line:p,points:b}of this.#i)Gt._rescale(p,u,h,f,m,p),Gt._rescale(b,u,h,f,m,b);o[2]*=f,o[3]*=m}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Gt.svgRound(t)} ${Gt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Gt.svgRound(t[0])} ${Gt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class eu extends Eb{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Qt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new eu(this._viewParameters);return t.updateAll(this),t}}class Ff extends ne{static _type="ink";static _editorType=oe.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Qt.initialize(t,e),this._defaultDrawingOptions=new eu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return me(this,"typesMap",new Map([[Ae.INK_THICKNESS,"stroke-width"],[Ae.INK_COLOR,"stroke"],[Ae.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,r,a){return new Q6(t,e,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,r,a,o){return Ul.deserialize(t,e,i,r,a,o)}static async deserialize(t,e,i){let r=null;if(t instanceof Bf){const{data:{inkLists:o,rect:u,rotation:h,id:f,color:m,opacity:p,borderStyle:{rawWidth:b},popupRef:v,richText:w,contentsObj:x,creationDate:_,modificationDate:A},parent:{page:{pageNumber:E}}}=t;r=t={annotationType:oe.INK,color:Array.from(m),thickness:b,opacity:p,paths:{points:o},boxes:null,pageIndex:E-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:v,richText:w,comment:x?.str||null,creationDate:_,modificationDate:A}}const a=await super.deserialize(t,e,i);return a._initialData=r,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||=new Cl(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ae.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Ff.getDefaultDrawingOptions({stroke:$t.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":o}}=this,u=Object.assign(super.serialize(t),{color:Qt._colorManager.convert(r),opacity:a,thickness:o,paths:{lines:e,points:i}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,u)=>o!==e[u])||t.thickness!==i||t.opacity!==r||t.pageIndex!==a}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class uf extends Ul{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const v0=8,dl=3;class eo{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,r){return i-=t,r-=e,i===0?r>0?0:4:i===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,i,r,a,o,u){const h=this.#e(i,r,a,o);for(let f=0;f<8;f++){const m=(-f+h-u+16)%8,p=this.#n[2*m],b=this.#n[2*m+1];if(t[(i+p)*e+(r+b)]!==0)return m}return-1}static#a(t,e,i,r,a,o,u){const h=this.#e(i,r,a,o);for(let f=0;f<8;f++){const m=(f+h+u+16)%8,p=this.#n[2*m],b=this.#n[2*m+1];if(t[(i+p)*e+(r+b)]!==0)return m}return-1}static#r(t,e,i,r){const a=t.length,o=new Int32Array(a);for(let m=0;m<a;m++)o[m]=t[m]<=r?1:0;for(let m=1;m<i-1;m++)o[m*e]=o[m*e+e-1]=0;for(let m=0;m<e;m++)o[m]=o[e*i-1-m]=0;let u=1,h;const f=[];for(let m=1;m<i-1;m++){h=1;for(let p=1;p<e-1;p++){const b=m*e+p,v=o[b];if(v===0)continue;let w=m,x=p;if(v===1&&o[b-1]===0)u+=1,x-=1;else if(v>=1&&o[b+1]===0)u+=1,x+=1,v>1&&(h=v);else{v!==1&&(h=Math.abs(v));continue}const _=[p,m],A=x===p+1,E={isHole:A,points:_,id:u,parent:0};f.push(E);let C;for(const ut of f)if(ut.id===h){C=ut;break}C?C.isHole?E.parent=A?C.parent:h:E.parent=A?h:C.parent:E.parent=A?h:0;const N=this.#i(o,e,m,p,w,x,0);if(N===-1){o[b]=-u,o[b]!==1&&(h=Math.abs(o[b]));continue}let D=this.#n[2*N],F=this.#n[2*N+1];const B=m+D,Y=p+F;w=B,x=Y;let j=m,et=p;for(;;){const ut=this.#a(o,e,j,et,w,x,1);D=this.#n[2*ut],F=this.#n[2*ut+1];const H=j+D,it=et+F;_.push(it,H);const R=j*e+et;if(o[R+1]===0?o[R]=-u:o[R]===1&&(o[R]=u),H===m&&it===p&&j===B&&et===Y){o[b]!==1&&(h=Math.abs(o[b]));break}else w=j,x=et,j=H,et=it}}}return f}static#s(t,e,i,r){if(i-e<=4){for(let B=e;B<i-2;B+=2)r.push(t[B],t[B+1]);return}const a=t[e],o=t[e+1],u=t[i-4]-a,h=t[i-3]-o,f=Math.hypot(u,h),m=u/f,p=h/f,b=m*o-p*a,v=h/u,w=1/f,x=Math.atan(v),_=Math.cos(x),A=Math.sin(x),E=w*(Math.abs(_)+Math.abs(A)),C=w*(1-E+E**2),N=Math.max(Math.atan(Math.abs(A+_)*C),Math.atan(Math.abs(A-_)*C));let D=0,F=e;for(let B=e+2;B<i-2;B+=2){const Y=Math.abs(b-m*t[B+1]+p*t[B]);Y>D&&(F=B,D=Y)}D>(f*N)**2?(this.#s(t,e,F+2,r),this.#s(t,F,i,r)):r.push(a,o)}static#o(t){const e=[],i=t.length;return this.#s(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,r,a,o){const u=new Float32Array(o**2),h=-2*r**2,f=o>>1;for(let x=0;x<o;x++){const _=(x-f)**2;for(let A=0;A<o;A++)u[x*o+A]=Math.exp((_+(A-f)**2)/h)}const m=new Float32Array(256),p=-2*a**2;for(let x=0;x<256;x++)m[x]=Math.exp(x**2/p);const b=t.length,v=new Uint8Array(b),w=new Uint32Array(256);for(let x=0;x<i;x++)for(let _=0;_<e;_++){const A=x*e+_,E=t[A];let C=0,N=0;for(let F=0;F<o;F++){const B=x+F-f;if(!(B<0||B>=i))for(let Y=0;Y<o;Y++){const j=_+Y-f;if(j<0||j>=e)continue;const et=t[B*e+j],ut=u[F*o+Y]*m[Math.abs(et-E)];C+=et*ut,N+=ut}}const D=v[A]=Math.round(C/N);w[D]++}return[v,w]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let r=-1/0,a=1/0;for(let u=0,h=i.length;u<h;u++){const f=i[u]=t[u<<2];r=Math.max(r,f),a=Math.min(a,f)}const o=255/(r-a);for(let u=0,h=i.length;u<h;u++)i[u]=(i[u]-a)*o;return i}static#h(t){let e,i=-1/0,r=-1/0;const a=t.findIndex(h=>h!==0);let o=a,u=a;for(e=a;e<256;e++){const h=t[e];h>i&&(e-o>r&&(r=e-o,u=e-1),i=h,o=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:r}=t,{maxDim:a}=this.#t;let o=i,u=r;if(i>a||r>a){let b=i,v=r,w=Math.log2(Math.max(i,r)/a);const x=Math.floor(w);w=w===x?x-1:x;for(let A=0;A<w;A++){o=Math.ceil(b/2),u=Math.ceil(v/2);const E=new OffscreenCanvas(o,u);E.getContext("2d").drawImage(t,0,0,b,v,0,0,o,u),b=o,v=u,t!==e&&t.close(),t=E.transferToImageBitmap()}const _=Math.min(a/o,a/u);o=Math.round(o*_),u=Math.round(u*_)}const f=new OffscreenCanvas(o,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,o,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,o,u);const m=f.getImageData(0,0,o,u).data;return[this.#d(m),o,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:r},a,o,u,h){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const p=200,b=m.font=`${i} ${r} ${p}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:w,actualBoundingBoxAscent:x,actualBoundingBoxDescent:_,fontBoundingBoxAscent:A,fontBoundingBoxDescent:E,width:C}=m.measureText(t),N=1.5,D=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||0,C)*N),F=Math.ceil(Math.max(Math.abs(x)+Math.abs(_)||p,Math.abs(A)+Math.abs(E)||p)*N);f=new OffscreenCanvas(D,F),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,D,F),m.fillStyle="black",m.fillText(t,D*(N-1)/2,F*(3-N)/2);const B=this.#d(m.getImageData(0,0,D,F).data),Y=this.#l(B),j=this.#h(Y),et=this.#r(B,D,F,j);return this.processDrawnLines({lines:{curves:et,width:D,height:F},pageWidth:a,pageHeight:o,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,i,r,a){const[o,u,h]=this.#f(t),[f,m]=this.#c(o,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),p=this.#h(m),b=this.#r(f,u,h,p);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:e,pageHeight:i,rotation:r,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:a,mustSmooth:o,areContours:u}){r%180!==0&&([e,i]=[i,e]);const{curves:h,width:f,height:m}=t,p=t.thickness??0,b=[],v=Math.min(e/f,i/m),w=v/e,x=v/i,_=[];for(const{points:E}of h){const C=o?this.#o(E):E;if(!C)continue;_.push(C);const N=C.length,D=new Float32Array(N),F=new Float32Array(3*(N===2?2:N-2));if(b.push({line:F,points:D}),N===2){D[0]=C[0]*w,D[1]=C[1]*x,F.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[B,Y,j,et]=C;B*=w,Y*=x,j*=w,et*=x,D.set([B,Y,j,et],0),F.set([NaN,NaN,NaN,NaN,B,Y],0);for(let ut=4;ut<N;ut+=2){const H=D[ut]=C[ut]*w,it=D[ut+1]=C[ut+1]*x;F.set(Gt.createBezierPoints(B,Y,j,et,H,it),(ut-2)*3),[B,Y,j,et]=[j,et,H,it]}}if(b.length===0)return null;const A=u?new uf:new Ul;return A.build(b,e,i,1,r,u?0:p,a),{outline:A,newCurves:_,areContours:u,thickness:p,width:f,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:r,height:a}){let o=1/0,u=-1/0,h=0;for(const C of t){h+=C.length;for(let N=2,D=C.length;N<D;N++){const F=C[N]-C[N-2];o=Math.min(o,F),u=Math.max(u,F)}}let f;o>=-128&&u<=127?f=Int8Array:o>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const m=t.length,p=v0+dl*m,b=new Uint32Array(p);let v=0;b[v++]=p*Uint32Array.BYTES_PER_ELEMENT+(h-2*m)*f.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=r,b[v++]=a,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(i??0)),b[v++]=m,b[v++]=f.BYTES_PER_ELEMENT;for(const C of t)b[v++]=C.length-2,b[v++]=C[0],b[v++]=C[1];const w=new CompressionStream("deflate-raw"),x=w.writable.getWriter();await x.ready,x.write(b);const _=f.prototype.constructor;for(const C of t){const N=new _(C.length-2);for(let D=2,F=C.length;D<F;D++)N[D-2]=C[D]-C[D-2];x.write(N)}x.close();const A=await new Response(w.readable).arrayBuffer(),E=new Uint8Array(A);return Q4(E)}static async decompressSignature(t){try{const e=m5(t),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),a=r.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,u=0;for await(const C of i)o||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),o.set(C,u),u+=C.length;const h=new Uint32Array(o.buffer,0,o.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=h[2],p=h[3],b=h[4]===0,v=h[5],w=h[6],x=h[7],_=[],A=(v0+dl*w)*Uint32Array.BYTES_PER_ELEMENT;let E;switch(x){case Int8Array.BYTES_PER_ELEMENT:E=new Int8Array(o.buffer,A);break;case Int16Array.BYTES_PER_ELEMENT:E=new Int16Array(o.buffer,A);break;case Int32Array.BYTES_PER_ELEMENT:E=new Int32Array(o.buffer,A);break}u=0;for(let C=0;C<w;C++){const N=h[dl*C+v0],D=new Float32Array(N+2);_.push(D);for(let F=0;F<dl-1;F++)D[F]=h[dl*C+v0+F+1];for(let F=0;F<N;F++)D[F+2]=D[F]+E[u++]}return{areContours:b,thickness:v,outlines:_,width:m,height:p}}catch(e){return ae(`decompressSignature: ${e}`),null}}}class Pf extends Eb{constructor(){super(),super.updateProperties({fill:Qt._defaultLineColor,"stroke-width":0})}clone(){const t=new Pf;return t.updateAll(this),t}}class Uf extends eu{constructor(t){super(t),super.updateProperties({stroke:Qt._defaultLineColor,"stroke-width":1})}clone(){const t=new Uf(this._viewParameters);return t.updateAll(this),t}}class cr extends ne{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=oe.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Qt.initialize(t,e),this._defaultDrawingOptions=new Pf,this._defaultDrawnSignatureOptions=new Uf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return me(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:a,areContours:o,description:u,uuid:h,heightInPage:f}=this.#n,{rawDims:{pageWidth:m,pageHeight:p},rotation:b}=this.parent.viewport,v=eo.processDrawnLines({lines:r,pageWidth:m,pageHeight:p,rotation:b,innerMargin:cr._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(v,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:r,height:a}=this.#n,o=Math.max(r,a),u=eo.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:i,width:r,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,r){const{x:a,y:o}=this,{outline:u}=this.#n=t;this.#t=u instanceof uf,this.description=i;let h;this.#t?h=cr.getDefaultDrawingOptions():(h=cr._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let m=e/f;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return eo.process(t,e,i,r,cr._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:r},rotation:a}=this.parent.viewport;return eo.extractContoursFromText(t,e,i,r,a,cr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return eo.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:cr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=cr.getDefaultDrawingOptions():(this._drawingOptions=cr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(a),t?(a.paths={lines:e,points:i},a.uuid=this.#i,a.isCopy=!0):a.lines=e,this.#e&&(a.accessibilityData={type:"Figure",alt:this.#e}),a}static deserializeDraw(t,e,i,r,a,o){return o.areContours?uf.deserialize(t,e,i,r,a,o):Ul.deserialize(t,e,i,r,a,o)}static async deserialize(t,e,i){const r=await super.deserialize(t,e,i);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class J6 extends Qt{#t=null;#e=null;#n=null;#i=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=oe.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Qt.initialize(t,e)}static isHandlingMimeForPasting(t){return tf.includes(t)}static paste(t,e){e.pasteEditor({mode:oe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#m()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=tf.join(",");const e=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,r&&(this.#t=r),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#m(){const{div:t}=this;let{width:e,height:i}=this.#t;const[r,a]=this.pageDimensions,o=.75;if(this.width)e=this.width*r,i=this.height*a;else if(e>o*r||i>o*a){const h=Math.min(o*r/e,o*a/i);e*=h,i*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/r,this.height=i/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:r,height:a}=this.#t,o=new mr;let u=this.#t,h=r,f=a,m=null;if(e){if(r>e||a>e){const F=Math.min(e/r,e/a);h=Math.floor(r*F),f=Math.floor(a*F)}m=document.createElement("canvas");const b=m.width=Math.ceil(h*o.sx),v=m.height=Math.ceil(f*o.sy);this.#l||(u=this.#u(b,v));const w=m.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":x5.isDarkMode&&(x="#8f8f9d",_="#42414d");const A=15,E=A*o.sx,C=A*o.sy,N=new OffscreenCanvas(E*2,C*2),D=N.getContext("2d");D.fillStyle=x,D.fillRect(0,0,E*2,C*2),D.fillStyle=_,D.fillRect(0,0,E,C),D.fillRect(E,C,E,C),w.fillStyle=w.createPattern(N,"repeat"),w.fillRect(0,0,b,v),w.drawImage(u,0,0,u.width,u.height,0,0,b,v)}let p=null;if(i){let b,v;if(o.symmetric&&u.width<t&&u.height<t)b=u.width,v=u.height;else if(u=this.#t,r>t||a>t){const _=Math.min(t/r,t/a);b=Math.floor(r*_),v=Math.floor(a*_),this.#l||(u=this.#u(b,v))}const x=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});x.drawImage(u,0,0,u.width,u.height,0,0,b,v),p={width:b,height:v,data:x.getImageData(0,0,b,v).data}}return{canvas:m,width:h,height:f,imageData:p}}#u(t,e){const{width:i,height:r}=this.#t;let a=i,o=r,u=this.#t;for(;a>2*t||o>2*e;){const h=a,f=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const m=new OffscreenCanvas(a,o);m.getContext("2d").drawImage(u,0,0,h,f,0,0,a,o),u=m.transferToImageBitmap()}return u}#p(){const[t,e]=this.parentDimensions,{width:i,height:r}=this,a=new mr,o=Math.ceil(i*t*a.sx),u=Math.ceil(r*e*a.sy),h=this.#s;if(!h||h.width===o&&h.height===u)return;h.width=o,h.height=u;const f=this.#l?this.#t:this.#u(o,u),m=h.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(f,0,0,f.width,f.height,0,0,o,u)}#b(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,r=Math.round(this.width*e*ho.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*ho.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let r=null,a=!1;if(t instanceof _b){const{data:{rect:x,rotation:_,id:A,structParent:E,popupRef:C,richText:N,contentsObj:D,creationDate:F,modificationDate:B},container:Y,parent:{page:{pageNumber:j}},canvas:et}=t;let ut,H;et?(delete t.canvas,{id:ut,bitmap:H}=i.imageManager.getFromCanvas(Y.id,et),et.remove()):(a=!0,t._hasNoCanvas=!0);const it=(await e._structTree.getAriaAttributes(`${kf}${A}`))?.get("aria-label")||"";r=t={annotationType:oe.STAMP,bitmapId:ut,bitmap:H,pageIndex:j-1,rect:x.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:it},isSvg:!1,structParent:E,popupRef:C,richText:N,comment:D?.str||null,creationDate:F,modificationDate:B}}const o=await super.deserialize(t,e,i),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:m,isSvg:p,accessibilityData:b}=t;a?(i.addMissingCanvas(t.id,o),o.#o=!0):m&&i.imageManager.isValidId(m)?(o.#e=m,h&&(o.#t=h)):o.#i=f,o.#l=p;const[v,w]=o.pageDimensions;return o.width=(u[2]-u[0])/v,o.height=(u[3]-u[1])/w,b&&(o.altTextData=b),o._initialData=r,t.comment&&o.setCommentData(t),o.#d=!!r,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#b(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=this.#y(i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const o=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:i}),i.bitmap=this.#b(!1);else if(this.#l){const u=e.stamps.get(this.#e);o>u.area&&(u.area=o,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return i}#y(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Hr{#t;#e=!1;#n=null;#i=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([Ei,Ff,J6,hi,cr].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:a,annotationLayer:o,drawLayer:u,textLayer:h,viewport:f,l10n:m}){const p=[...Hr.#p.values()];if(!Hr._initialized){Hr._initialized=!0;for(const b of p)b.initialize(m,t)}t.registerEditorTypes(p),this.#u=t,this.pageIndex=e,this.div=i,this.#t=a,this.#n=o,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===oe.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case oe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case oe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case oe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===oe.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of Hr.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}get#b(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const i of this.#b)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#n;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const i=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:o,clientY:u,timeStamp:h}=r,f=this.#m;if(h-f>500){this.#m=h;return}this.#m=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const p=document.elementsFromPoint(o,u);if(m.toggle("getElements",!1),!this.div.contains(p[0]))return;let b;const v=new RegExp(`^${_l}[0-9]+$`);for(const x of p)if(v.test(x.id)){b=x.id;break}if(!b)return;const w=this.#r.get(b);w?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick(r))},{signal:i,capture:!0})}const t=this.#n;if(t){const i=new Map,r=new Map;for(const o of this.#b){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(t);continue}if(o.serialize()!==null){i.set(o.annotationElementId,o);continue}else r.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const a=t.getEditableAnnotations();for(const o of a){const{id:u}=o.data;if(this.#u.isDeletedAnnotationElement(u)){o.updateEdited({deleted:!0});continue}let h=r.get(u);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=i.get(u),h&&(this.#u.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const i of Hr.#p.values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#y(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=Li.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),hi.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),Qt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Hr.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#k(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:r}=this.#A(),a=this.getNextId(),o=this.#k({parent:this,id:a,x:i,y:r,uiManager:this.#u,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await Hr.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),a=this.#k({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:t,y:e,width:i,height:r}=this.boundingClientRect,a=Math.max(0,t),o=Math.max(0,e),u=Math.min(window.innerWidth,t+i),h=Math.min(window.innerHeight,e+r),f=(a+u)/2-t,m=(o+h)/2-e,[p,b]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:p,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Li.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===oe.STAMP||i===oe.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===oe.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=Li.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,i){const r=this.#u.findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,oa(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,oa(this.div,{rotation:i}),e!==i)for(const r of this.#r.values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Oi{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return me(this,"_svgFactory",new P0)}static#a(t,[e,i,r,a]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*r}%`,o.height=`${100*a}%`}#r(){const t=Oi._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const i=Oi._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const a=Oi._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),r}#o(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)}draw(t,e=!1,i=!1){const r=Oi.#i++,a=this.#r(),o=Oi._svgFactory.createElement("defs");a.append(o);const u=Oi._svgFactory.createElement("path");o.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(r,u);const f=i?this.#s(o,h):null,m=Oi._svgFactory.createElement("use");return a.append(m),m.setAttribute("href",`#${h}`),this.updateProperties(a,t),this.#e.set(r,a),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Oi.#i++,r=this.#r(),a=Oi._svgFactory.createElement("defs");r.append(a);const o=Oi._svgFactory.createElement("path");a.append(o);const u=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const p=Oi._svgFactory.createElement("mask");a.append(p),h=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",h),p.setAttribute("maskUnits","objectBoundingBox");const b=Oi._svgFactory.createElement("rect");p.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=Oi._svgFactory.createElement("use");p.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=Oi._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const m=f.cloneNode();return r.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(i,r),i}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:r,rootClass:a,path:o}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(i&&this.#o(u,i),r&&Oi.#a(u,r),a){const{classList:h}=u;for(const[f,m]of Object.entries(a))h.toggle(f,m)}if(o){const f=u.firstChild.firstChild;this.#o(f,o)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:lf};globalThis.pdfjsLib={AbortException:Rs,AnnotationEditorLayer:Hr,AnnotationEditorParamsType:Ae,AnnotationEditorType:oe,AnnotationEditorUIManager:Ds,AnnotationLayer:If,AnnotationMode:Es,AnnotationType:xi,applyOpacity:S5,build:M6,ColorPicker:Fn,createValidAbsoluteUrl:X4,CSSConstants:w5,DOMSVGFactory:P0,DrawLayer:Oi,FeatureTest:Li,fetchData:Ll,findContrastColor:A5,getDocument:gb,getFilenameFromUrl:p5,getPdfFilenameFromUrl:g5,getRGB:Il,getUuid:W4,getXfaPageViewport:v5,GlobalWorkerOptions:lo,ImageKind:R0,InvalidPDFException:Qd,isDataScheme:Q0,isPdfFile:Tf,isValidExplicitDest:O5,MathClamp:$i,noContextMenu:Un,normalizeUnicode:d5,OPS:kl,OutputScale:mr,PasswordResponses:n5,PDFDataRangeTransport:bb,PDFDateString:Jd,PDFWorker:Tl,PermissionFlag:i5,PixelsPerInch:ho,RenderingCancelledException:Ef,renderRichText:tb,ResponseException:I0,setLayerDimensions:oa,shadow:me,SignatureExtractor:eo,stopEvent:ai,SupportedImageMimeTypes:tf,TextLayer:Gi,TouchManager:J0,updateUrlHash:K4,Util:$t,VerbosityLevel:K0,version:C6,XfaLayer:J4};var H2;(function(l){l.STRING="string",l.NUMBER="number",l.INTEGER="integer",l.BOOLEAN="boolean",l.ARRAY="array",l.OBJECT="object"})(H2||(H2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j2;(function(l){l.LANGUAGE_UNSPECIFIED="language_unspecified",l.PYTHON="python"})(j2||(j2={}));var G2;(function(l){l.OUTCOME_UNSPECIFIED="outcome_unspecified",l.OUTCOME_OK="outcome_ok",l.OUTCOME_FAILED="outcome_failed",l.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(G2||(G2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=["user","model","function","system"];var $2;(function(l){l.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",l.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",l.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",l.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",l.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",l.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})($2||($2={}));var V2;(function(l){l.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",l.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",l.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",l.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",l.BLOCK_NONE="BLOCK_NONE"})(V2||(V2={}));var Y2;(function(l){l.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",l.NEGLIGIBLE="NEGLIGIBLE",l.LOW="LOW",l.MEDIUM="MEDIUM",l.HIGH="HIGH"})(Y2||(Y2={}));var X2;(function(l){l.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",l.SAFETY="SAFETY",l.OTHER="OTHER"})(X2||(X2={}));var wl;(function(l){l.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",l.STOP="STOP",l.MAX_TOKENS="MAX_TOKENS",l.SAFETY="SAFETY",l.RECITATION="RECITATION",l.LANGUAGE="LANGUAGE",l.BLOCKLIST="BLOCKLIST",l.PROHIBITED_CONTENT="PROHIBITED_CONTENT",l.SPII="SPII",l.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",l.OTHER="OTHER"})(wl||(wl={}));var K2;(function(l){l.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",l.RETRIEVAL_QUERY="RETRIEVAL_QUERY",l.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",l.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",l.CLASSIFICATION="CLASSIFICATION",l.CLUSTERING="CLUSTERING"})(K2||(K2={}));var Z2;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.AUTO="AUTO",l.ANY="ANY",l.NONE="NONE"})(Z2||(Z2={}));var W2;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.MODE_DYNAMIC="MODE_DYNAMIC"})(W2||(W2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Wa extends Pi{constructor(t,e){super(t),this.response=e}}class Tb extends Pi{constructor(t,e,i,r){super(t),this.status=e,this.statusText=i,this.errorDetails=r}}class Ms extends Pi{}class Cb extends Pi{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7="https://generativelanguage.googleapis.com",e7="v1beta",i7="0.24.1",n7="genai-js";var ca;(function(l){l.GENERATE_CONTENT="generateContent",l.STREAM_GENERATE_CONTENT="streamGenerateContent",l.COUNT_TOKENS="countTokens",l.EMBED_CONTENT="embedContent",l.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ca||(ca={}));class r7{constructor(t,e,i,r,a){this.model=t,this.task=e,this.apiKey=i,this.stream=r,this.requestOptions=a}toString(){var t,e;const i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||e7;let a=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||t7}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function s7(l){const t=[];return l?.apiClient&&t.push(l.apiClient),t.push(`${n7}/${i7}`),t.join(" ")}async function a7(l){var t;const e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",s7(l.requestOptions)),e.append("x-goog-api-key",l.apiKey);let i=(t=l.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new Ms(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,a]of i.entries()){if(r==="x-goog-api-key")throw new Ms(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new Ms(`Header name ${r} can only be set using the apiClient field`);e.append(r,a)}}return e}async function o7(l,t,e,i,r,a){const o=new r7(l,t,e,i,a);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},h7(a)),{method:"POST",headers:await a7(o),body:r})}}async function Hl(l,t,e,i,r,a={},o=fetch){const{url:u,fetchOptions:h}=await o7(l,t,e,i,r,a);return l7(u,h,o)}async function l7(l,t,e=fetch){let i;try{i=await e(l,t)}catch(r){c7(r,l)}return i.ok||await u7(i,l),i}function c7(l,t){let e=l;throw e.name==="AbortError"?(e=new Cb(`Request aborted when fetching ${t.toString()}: ${l.message}`),e.stack=l.stack):l instanceof Tb||l instanceof Ms||(e=new Pi(`Error fetching from ${t.toString()}: ${l.message}`),e.stack=l.stack),e}async function u7(l,t){let e="",i;try{const r=await l.json();e=r.error.message,r.error.details&&(e+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new Tb(`Error fetching from ${t.toString()}: [${l.status} ${l.statusText}] ${e}`,l.status,l.statusText,i)}function h7(l){const t={};if(l?.signal!==void 0||l?.timeout>=0){const e=new AbortController;l?.timeout>=0&&setTimeout(()=>e.abort(),l.timeout),l?.signal&&l.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(l){return l.text=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),O0(l.candidates[0]))throw new Wa(`${ks(l)}`,l);return d7(l)}else if(l.promptFeedback)throw new Wa(`Text not available. ${ks(l)}`,l);return""},l.functionCall=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),O0(l.candidates[0]))throw new Wa(`${ks(l)}`,l);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Q2(l)[0]}else if(l.promptFeedback)throw new Wa(`Function call not available. ${ks(l)}`,l)},l.functionCalls=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),O0(l.candidates[0]))throw new Wa(`${ks(l)}`,l);return Q2(l)}else if(l.promptFeedback)throw new Wa(`Function call not available. ${ks(l)}`,l)},l}function d7(l){var t,e,i,r;const a=[];if(!((e=(t=l.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const o of(r=(i=l.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.text&&a.push(o.text),o.executableCode&&a.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&a.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function Q2(l){var t,e,i,r;const a=[];if(!((e=(t=l.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const o of(r=(i=l.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.functionCall&&a.push(o.functionCall);if(a.length>0)return a}const f7=[wl.RECITATION,wl.SAFETY,wl.LANGUAGE];function O0(l){return!!l.finishReason&&f7.includes(l.finishReason)}function ks(l){var t,e,i;let r="";if((!l.candidates||l.candidates.length===0)&&l.promptFeedback)r+="Response was blocked",!((t=l.promptFeedback)===null||t===void 0)&&t.blockReason&&(r+=` due to ${l.promptFeedback.blockReason}`),!((e=l.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(r+=`: ${l.promptFeedback.blockReasonMessage}`);else if(!((i=l.candidates)===null||i===void 0)&&i[0]){const a=l.candidates[0];O0(a)&&(r+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(r+=`: ${a.finishMessage}`))}return r}function Ml(l){return this instanceof Ml?(this.v=l,this):new Ml(l)}function m7(l,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(l,t||[]),r,a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(b){i[b]&&(r[b]=function(v){return new Promise(function(w,x){a.push([b,v,w,x])>1||u(b,v)})})}function u(b,v){try{h(i[b](v))}catch(w){p(a[0][3],w)}}function h(b){b.value instanceof Ml?Promise.resolve(b.value.v).then(f,m):p(a[0][2],b)}function f(b){u("next",b)}function m(b){u("throw",b)}function p(b,v){b(v),a.shift(),a.length&&u(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function p7(l){const t=l.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=v7(t),[i,r]=e.tee();return{stream:b7(i),response:g7(r)}}async function g7(l){const t=[],e=l.getReader();for(;;){const{done:i,value:r}=await e.read();if(i)return Hf(y7(t));t.push(r)}}function b7(l){return m7(this,arguments,function*(){const e=l.getReader();for(;;){const{value:i,done:r}=yield Ml(e.read());if(r)break;yield yield Ml(Hf(i))}})}function v7(l){const t=l.getReader();return new ReadableStream({start(i){let r="";return a();function a(){return t.read().then(({value:o,done:u})=>{if(u){if(r.trim()){i.error(new Pi("Failed to parse stream"));return}i.close();return}r+=o;let h=r.match(J2),f;for(;h;){try{f=JSON.parse(h[1])}catch{i.error(new Pi(`Error parsing JSON response: "${h[1]}"`));return}i.enqueue(f),r=r.substring(h[0].length),h=r.match(J2)}return a()}).catch(o=>{let u=o;throw u.stack=o.stack,u.name==="AbortError"?u=new Cb("Request aborted when reading from the stream"):u=new Pi("Error reading from the stream"),u})}}})}function y7(l){const t=l[l.length-1],e={promptFeedback:t?.promptFeedback};for(const i of l){if(i.candidates){let r=0;for(const a of i.candidates)if(e.candidates||(e.candidates=[]),e.candidates[r]||(e.candidates[r]={index:r}),e.candidates[r].citationMetadata=a.citationMetadata,e.candidates[r].groundingMetadata=a.groundingMetadata,e.candidates[r].finishReason=a.finishReason,e.candidates[r].finishMessage=a.finishMessage,e.candidates[r].safetyRatings=a.safetyRatings,a.content&&a.content.parts){e.candidates[r].content||(e.candidates[r].content={role:a.content.role||"user",parts:[]});const o={};for(const u of a.content.parts)u.text&&(o.text=u.text),u.functionCall&&(o.functionCall=u.functionCall),u.executableCode&&(o.executableCode=u.executableCode),u.codeExecutionResult&&(o.codeExecutionResult=u.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),e.candidates[r].content.parts.push(o)}r++}i.usageMetadata&&(e.usageMetadata=i.usageMetadata)}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(l,t,e,i){const r=await Hl(t,ca.STREAM_GENERATE_CONTENT,l,!0,JSON.stringify(e),i);return p7(r)}async function Rb(l,t,e,i){const a=await(await Hl(t,ca.GENERATE_CONTENT,l,!1,JSON.stringify(e),i)).json();return{response:Hf(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(l){if(l!=null){if(typeof l=="string")return{role:"system",parts:[{text:l}]};if(l.text)return{role:"system",parts:[l]};if(l.parts)return l.role?l:{role:"system",parts:l.parts}}}function Rl(l){let t=[];if(typeof l=="string")t=[{text:l}];else for(const e of l)typeof e=="string"?t.push({text:e}):t.push(e);return x7(t)}function x7(l){const t={role:"user",parts:[]},e={role:"function",parts:[]};let i=!1,r=!1;for(const a of l)"functionResponse"in a?(e.parts.push(a),r=!0):(t.parts.push(a),i=!0);if(i&&r)throw new Pi("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new Pi("No content is provided for sending chat message.");return i?t:e}function w7(l,t){var e;let i={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(e=t?.cachedContent)===null||e===void 0?void 0:e.name,contents:[]};const r=l.generateContentRequest!=null;if(l.contents){if(r)throw new Ms("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=l.contents}else if(r)i=Object.assign(Object.assign({},i),l.generateContentRequest);else{const a=Rl(l);i.contents=[a]}return{generateContentRequest:i}}function t4(l){let t;return l.contents?t=l:t={contents:[Rl(l)]},l.systemInstruction&&(t.systemInstruction=Db(l.systemInstruction)),t}function S7(l){return typeof l=="string"||Array.isArray(l)?{content:Rl(l)}:l}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],A7={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function _7(l){let t=!1;for(const e of l){const{role:i,parts:r}=e;if(!t&&i!=="user")throw new Pi(`First content should be with role 'user', got ${i}`);if(!q2.includes(i))throw new Pi(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(q2)}`);if(!Array.isArray(r))throw new Pi("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new Pi("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of r)for(const h of e4)h in u&&(a[h]+=1);const o=A7[i];for(const u of e4)if(!o.includes(u)&&a[u]>0)throw new Pi(`Content with role '${i}' can't contain '${u}' part`);t=!0}}function i4(l){var t;if(l.candidates===void 0||l.candidates.length===0)return!1;const e=(t=l.candidates[0])===null||t===void 0?void 0:t.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(const i of e.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4="SILENT_ERROR";class k7{constructor(t,e,i,r={}){this.model=e,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i?.history&&(_7(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var i,r,a,o,u,h;await this._sendPromise;const f=Rl(t),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},p=Object.assign(Object.assign({},this._requestOptions),e);let b;return this._sendPromise=this._sendPromise.then(()=>Rb(this._apiKey,this.model,m,p)).then(v=>{var w;if(i4(v.response)){this._history.push(f);const x=Object.assign({parts:[],role:"model"},(w=v.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(x)}else{const x=ks(v.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}b=v}).catch(v=>{throw this._sendPromise=Promise.resolve(),v}),await this._sendPromise,b}async sendMessageStream(t,e={}){var i,r,a,o,u,h;await this._sendPromise;const f=Rl(t),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},p=Object.assign(Object.assign({},this._requestOptions),e),b=Mb(this._apiKey,this.model,m,p);return this._sendPromise=this._sendPromise.then(()=>b).catch(v=>{throw new Error(n4)}).then(v=>v.response).then(v=>{if(i4(v)){this._history.push(f);const w=Object.assign({},v.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=ks(v);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(v=>{v.message!==n4&&console.error(v)}),b}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E7(l,t,e,i){return(await Hl(t,ca.COUNT_TOKENS,l,!1,JSON.stringify(e),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T7(l,t,e,i){return(await Hl(t,ca.EMBED_CONTENT,l,!1,JSON.stringify(e),i)).json()}async function C7(l,t,e,i){const r=e.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await Hl(t,ca.BATCH_EMBED_CONTENTS,l,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(t,e,i={}){this.apiKey=t,this._requestOptions=i,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=Db(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var i;const r=t4(t),a=Object.assign(Object.assign({},this._requestOptions),e);return Rb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}async generateContentStream(t,e={}){var i;const r=t4(t),a=Object.assign(Object.assign({},this._requestOptions),e);return Mb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}startChat(t){var e;return new k7(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){const i=w7(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),e);return E7(this.apiKey,this.model,i,r)}async embedContent(t,e={}){const i=S7(t),r=Object.assign(Object.assign({},this._requestOptions),e);return T7(this.apiKey,this.model,i,r)}async batchEmbedContents(t,e={}){const i=Object.assign(Object.assign({},this._requestOptions),e);return C7(this.apiKey,this.model,t,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new Pi("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new r4(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,i){if(!t.name)throw new Ms("Cached content must contain a `name` field.");if(!t.model)throw new Ms("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const o of r)if(e?.[o]&&t[o]&&e?.[o]!==t[o]){if(o==="model"){const u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(u===h)continue}throw new Ms(`Different value for "${o}" specified in modelParams (${e[o]}) and cachedContent (${t[o]})`)}const a=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new r4(this.apiKey,a,i)}}function y0(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ld={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var s4;function R7(){return s4||(s4=1,(function(l,t){(function(e){l.exports=e()})(function(){return(function e(i,r,a){function o(f,m){if(!r[f]){if(!i[f]){var p=typeof y0=="function"&&y0;if(!m&&p)return p(f,!0);if(u)return u(f,!0);var b=new Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b}var v=r[f]={exports:{}};i[f][0].call(v.exports,function(w){var x=i[f][1][w];return o(x||w)},v,v.exports,e,i,r,a)}return r[f].exports}for(var u=typeof y0=="function"&&y0,h=0;h<a.length;h++)o(a[h]);return o})({1:[function(e,i,r){var a=e("./utils"),o=e("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(h){for(var f,m,p,b,v,w,x,_=[],A=0,E=h.length,C=E,N=a.getTypeOf(h)!=="string";A<h.length;)C=E-A,p=N?(f=h[A++],m=A<E?h[A++]:0,A<E?h[A++]:0):(f=h.charCodeAt(A++),m=A<E?h.charCodeAt(A++):0,A<E?h.charCodeAt(A++):0),b=f>>2,v=(3&f)<<4|m>>4,w=1<C?(15&m)<<2|p>>6:64,x=2<C?63&p:64,_.push(u.charAt(b)+u.charAt(v)+u.charAt(w)+u.charAt(x));return _.join("")},r.decode=function(h){var f,m,p,b,v,w,x=0,_=0,A="data:";if(h.substr(0,A.length)===A)throw new Error("Invalid base64 input, it looks like a data url.");var E,C=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===u.charAt(64)&&C--,h.charAt(h.length-2)===u.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|C):new Array(0|C);x<h.length;)f=u.indexOf(h.charAt(x++))<<2|(b=u.indexOf(h.charAt(x++)))>>4,m=(15&b)<<4|(v=u.indexOf(h.charAt(x++)))>>2,p=(3&v)<<6|(w=u.indexOf(h.charAt(x++))),E[_++]=f,v!==64&&(E[_++]=m),w!==64&&(E[_++]=p);return E}},{"./support":30,"./utils":32}],2:[function(e,i,r){var a=e("./external"),o=e("./stream/DataWorker"),u=e("./stream/Crc32Probe"),h=e("./stream/DataLengthProbe");function f(m,p,b,v,w){this.compressedSize=m,this.uncompressedSize=p,this.crc32=b,this.compression=v,this.compressedContent=w}f.prototype={getContentWorker:function(){var m=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,p,b){return m.pipe(new u).pipe(new h("uncompressedSize")).pipe(p.compressWorker(b)).pipe(new h("compressedSize")).withStreamInfo("compression",p)},i.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,i,r){var a=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,i,r){var a=e("./utils"),o=(function(){for(var u,h=[],f=0;f<256;f++){u=f;for(var m=0;m<8;m++)u=1&u?3988292384^u>>>1:u>>>1;h[f]=u}return h})();i.exports=function(u,h){return u!==void 0&&u.length?a.getTypeOf(u)!=="string"?(function(f,m,p,b){var v=o,w=b+p;f^=-1;for(var x=b;x<w;x++)f=f>>>8^v[255&(f^m[x])];return-1^f})(0|h,u,u.length,0):(function(f,m,p,b){var v=o,w=b+p;f^=-1;for(var x=b;x<w;x++)f=f>>>8^v[255&(f^m.charCodeAt(x))];return-1^f})(0|h,u,u.length,0):0}},{"./utils":32}],5:[function(e,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,i,r){var a=null;a=typeof Promise<"u"?Promise:e("lie"),i.exports={Promise:a}},{lie:37}],7:[function(e,i,r){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),u=e("./utils"),h=e("./stream/GenericWorker"),f=a?"uint8array":"array";function m(p,b){h.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=b,this.meta={}}r.magic="\b\0",u.inherits(m,h),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(f,p.data),!1)},m.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(b){p.push({data:b,meta:p.meta})}},r.compressWorker=function(p){return new m("Deflate",p)},r.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,i,r){function a(v,w){var x,_="";for(x=0;x<w;x++)_+=String.fromCharCode(255&v),v>>>=8;return _}function o(v,w,x,_,A,E){var C,N,D=v.file,F=v.compression,B=E!==f.utf8encode,Y=u.transformTo("string",E(D.name)),j=u.transformTo("string",f.utf8encode(D.name)),et=D.comment,ut=u.transformTo("string",E(et)),H=u.transformTo("string",f.utf8encode(et)),it=j.length!==D.name.length,R=H.length!==et.length,nt="",$="",X="",vt=D.dir,mt=D.date,Et={crc32:0,compressedSize:0,uncompressedSize:0};w&&!x||(Et.crc32=v.crc32,Et.compressedSize=v.compressedSize,Et.uncompressedSize=v.uncompressedSize);var z=0;w&&(z|=8),B||!it&&!R||(z|=2048);var P=0,at=0;vt&&(P|=16),A==="UNIX"?(at=798,P|=(function(pt,Bt){var Lt=pt;return pt||(Lt=Bt?16893:33204),(65535&Lt)<<16})(D.unixPermissions,vt)):(at=20,P|=(function(pt){return 63&(pt||0)})(D.dosPermissions)),C=mt.getUTCHours(),C<<=6,C|=mt.getUTCMinutes(),C<<=5,C|=mt.getUTCSeconds()/2,N=mt.getUTCFullYear()-1980,N<<=4,N|=mt.getUTCMonth()+1,N<<=5,N|=mt.getUTCDate(),it&&($=a(1,1)+a(m(Y),4)+j,nt+="up"+a($.length,2)+$),R&&(X=a(1,1)+a(m(ut),4)+H,nt+="uc"+a(X.length,2)+X);var ht="";return ht+=`
\0`,ht+=a(z,2),ht+=F.magic,ht+=a(C,2),ht+=a(N,2),ht+=a(Et.crc32,4),ht+=a(Et.compressedSize,4),ht+=a(Et.uncompressedSize,4),ht+=a(Y.length,2),ht+=a(nt.length,2),{fileRecord:p.LOCAL_FILE_HEADER+ht+Y+nt,dirRecord:p.CENTRAL_FILE_HEADER+a(at,2)+ht+a(ut.length,2)+"\0\0\0\0"+a(P,4)+a(_,4)+Y+nt+ut}}var u=e("../utils"),h=e("../stream/GenericWorker"),f=e("../utf8"),m=e("../crc32"),p=e("../signature");function b(v,w,x,_){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=x,this.encodeFileName=_,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(b,h),b.prototype.push=function(v){var w=v.meta.percent||0,x=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,h.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:x?(w+100*(x-_-1))/x:100}}))},b.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var w=this.streamFiles&&!v.file.dir;if(w){var x=o(v,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(v){this.accumulate=!1;var w=this.streamFiles&&!v.file.dir,x=o(v,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),w)this.push({data:(function(_){return p.DATA_DESCRIPTOR+a(_.crc32,4)+a(_.compressedSize,4)+a(_.uncompressedSize,4)})(v),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var v=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var x=this.bytesWritten-v,_=(function(A,E,C,N,D){var F=u.transformTo("string",D(N));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(A,2)+a(A,2)+a(E,4)+a(C,4)+a(F.length,2)+F})(this.dirRecords.length,x,v,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(v){this._sources.push(v);var w=this;return v.on("data",function(x){w.processChunk(x)}),v.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),v.on("error",function(x){w.error(x)}),this},b.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(v){var w=this._sources;if(!h.prototype.error.call(this,v))return!1;for(var x=0;x<w.length;x++)try{w[x].error(v)}catch{}return!0},b.prototype.lock=function(){h.prototype.lock.call(this);for(var v=this._sources,w=0;w<v.length;w++)v[w].lock()},i.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,i,r){var a=e("../compressions"),o=e("./ZipFileWorker");r.generateWorker=function(u,h,f){var m=new o(h.streamFiles,f,h.platform,h.encodeFileName),p=0;try{u.forEach(function(b,v){p++;var w=(function(E,C){var N=E||C,D=a[N];if(!D)throw new Error(N+" is not a valid compression method !");return D})(v.options.compression,h.compression),x=v.options.compressionOptions||h.compressionOptions||{},_=v.dir,A=v.date;v._compressWorker(w,x).withStreamInfo("file",{name:b,dir:_,date:A,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(b){m.error(b)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,i,r){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var u in this)typeof this[u]!="function"&&(o[u]=this[u]);return o}}(a.prototype=e("./object")).loadAsync=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.version="3.10.1",a.loadAsync=function(o,u){return new a().loadAsync(o,u)},a.external=e("./external"),i.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,i,r){var a=e("./utils"),o=e("./external"),u=e("./utf8"),h=e("./zipEntries"),f=e("./stream/Crc32Probe"),m=e("./nodejsUtils");function p(b){return new o.Promise(function(v,w){var x=b.decompressed.getContentWorker().pipe(new f);x.on("error",function(_){w(_)}).on("end",function(){x.streamInfo.crc32!==b.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}i.exports=function(b,v){var w=this;return v=a.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),m.isNode&&m.isStream(b)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",b,!0,v.optimizedBinaryString,v.base64).then(function(x){var _=new h(v);return _.load(x),_}).then(function(x){var _=[o.Promise.resolve(x)],A=x.files;if(v.checkCRC32)for(var E=0;E<A.length;E++)_.push(p(A[E]));return o.Promise.all(_)}).then(function(x){for(var _=x.shift(),A=_.files,E=0;E<A.length;E++){var C=A[E],N=C.fileNameStr,D=a.resolve(C.fileNameStr);w.file(D,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:v.createFolders}),C.dir||(w.file(D).unsafeOriginalName=N)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,i,r){var a=e("../utils"),o=e("../stream/GenericWorker");function u(h,f){o.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(f)}a.inherits(u,o),u.prototype._bindStream=function(h){var f=this;(this._stream=h).pause(),h.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},u.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,i,r){var a=e("readable-stream").Readable;function o(u,h,f){a.call(this,h),this._helper=u;var m=this;u.on("data",function(p,b){m.push(p)||m._helper.pause(),f&&f(b)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}e("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(e,i,r){function a(D,F,B){var Y,j=u.getTypeOf(F),et=u.extend(B||{},m);et.date=et.date||new Date,et.compression!==null&&(et.compression=et.compression.toUpperCase()),typeof et.unixPermissions=="string"&&(et.unixPermissions=parseInt(et.unixPermissions,8)),et.unixPermissions&&16384&et.unixPermissions&&(et.dir=!0),et.dosPermissions&&16&et.dosPermissions&&(et.dir=!0),et.dir&&(D=A(D)),et.createFolders&&(Y=_(D))&&E.call(this,Y,!0);var ut=j==="string"&&et.binary===!1&&et.base64===!1;B&&B.binary!==void 0||(et.binary=!ut),(F instanceof p&&F.uncompressedSize===0||et.dir||!F||F.length===0)&&(et.base64=!1,et.binary=!0,F="",et.compression="STORE",j="string");var H=null;H=F instanceof p||F instanceof h?F:w.isNode&&w.isStream(F)?new x(D,F):u.prepareContent(D,F,et.binary,et.optimizedBinaryString,et.base64);var it=new b(D,H,et);this.files[D]=it}var o=e("./utf8"),u=e("./utils"),h=e("./stream/GenericWorker"),f=e("./stream/StreamHelper"),m=e("./defaults"),p=e("./compressedObject"),b=e("./zipObject"),v=e("./generate"),w=e("./nodejsUtils"),x=e("./nodejs/NodejsStreamInputAdapter"),_=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var F=D.lastIndexOf("/");return 0<F?D.substring(0,F):""},A=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},E=function(D,F){return F=F!==void 0?F:m.createFolders,D=A(D),this.files[D]||a.call(this,D,null,{dir:!0,createFolders:F}),this.files[D]};function C(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var F,B,Y;for(F in this.files)Y=this.files[F],(B=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&D(B,Y)},filter:function(D){var F=[];return this.forEach(function(B,Y){D(B,Y)&&F.push(Y)}),F},file:function(D,F,B){if(arguments.length!==1)return D=this.root+D,a.call(this,D,F,B),this;if(C(D)){var Y=D;return this.filter(function(et,ut){return!ut.dir&&Y.test(et)})}var j=this.files[this.root+D];return j&&!j.dir?j:null},folder:function(D){if(!D)return this;if(C(D))return this.filter(function(j,et){return et.dir&&D.test(j)});var F=this.root+D,B=E.call(this,F),Y=this.clone();return Y.root=B.name,Y},remove:function(D){D=this.root+D;var F=this.files[D];if(F||(D.slice(-1)!=="/"&&(D+="/"),F=this.files[D]),F&&!F.dir)delete this.files[D];else for(var B=this.filter(function(j,et){return et.name.slice(0,D.length)===D}),Y=0;Y<B.length;Y++)delete this.files[B[Y].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var F,B={};try{if((B=u.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");u.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var Y=B.comment||this.comment||"";F=v.generateWorker(this,B,Y)}catch(j){(F=new h("error")).error(j)}return new f(F,B.type||"string",B.mimeType)},generateAsync:function(D,F){return this.generateInternalStream(D).accumulate(F)},generateNodeStream:function(D,F){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(F)}};i.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,i,r){i.exports=e("stream")},{stream:void 0}],17:[function(e,i,r){var a=e("./DataReader");function o(u){a.call(this,u);for(var h=0;h<this.data.length;h++)u[h]=255&u[h]}e("../utils").inherits(o,a),o.prototype.byteAt=function(u){return this.data[this.zero+u]},o.prototype.lastIndexOfSignature=function(u){for(var h=u.charCodeAt(0),f=u.charCodeAt(1),m=u.charCodeAt(2),p=u.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===h&&this.data[b+1]===f&&this.data[b+2]===m&&this.data[b+3]===p)return b-this.zero;return-1},o.prototype.readAndCheckSignature=function(u){var h=u.charCodeAt(0),f=u.charCodeAt(1),m=u.charCodeAt(2),p=u.charCodeAt(3),b=this.readData(4);return h===b[0]&&f===b[1]&&m===b[2]&&p===b[3]},o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,i,r){var a=e("../utils");function o(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var h,f=0;for(this.checkOffset(u),h=this.index+u-1;h>=this.index;h--)f=(f<<8)+this.byteAt(h);return this.index+=u,f},readString:function(u){return a.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},i.exports=o},{"../utils":32}],19:[function(e,i,r){var a=e("./Uint8ArrayReader");function o(u){a.call(this,u)}e("../utils").inherits(o,a),o.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,i,r){var a=e("./DataReader");function o(u){a.call(this,u)}e("../utils").inherits(o,a),o.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},o.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},o.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},o.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,i,r){var a=e("./ArrayReader");function o(u){a.call(this,u)}e("../utils").inherits(o,a),o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,i,r){var a=e("../utils"),o=e("../support"),u=e("./ArrayReader"),h=e("./StringReader"),f=e("./NodeBufferReader"),m=e("./Uint8ArrayReader");i.exports=function(p){var b=a.getTypeOf(p);return a.checkSupport(b),b!=="string"||o.uint8array?b==="nodebuffer"?new f(p):o.uint8array?new m(a.transformTo("uint8array",p)):new u(a.transformTo("array",p)):new h(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,i,r){var a=e("./GenericWorker"),o=e("../utils");function u(h){a.call(this,"ConvertWorker to "+h),this.destType=h}o.inherits(u,a),u.prototype.processChunk=function(h){this.push({data:o.transformTo(this.destType,h.data),meta:h.meta})},i.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(e,i,r){var a=e("./GenericWorker"),o=e("../crc32");function u(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(u,a),u.prototype.processChunk=function(h){this.streamInfo.crc32=o(h.data,this.streamInfo.crc32||0),this.push(h)},i.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,i,r){var a=e("../utils"),o=e("./GenericWorker");function u(h){o.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}a.inherits(u,o),u.prototype.processChunk=function(h){if(h){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+h.data.length}o.prototype.processChunk.call(this,h)},i.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(e,i,r){var a=e("../utils"),o=e("./GenericWorker");function u(h){o.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(m){f.dataIsReady=!0,f.data=m,f.max=m&&m.length||0,f.type=a.getTypeOf(m),f.isPaused||f._tickAndRepeat()},function(m){f.error(m)})}a.inherits(u,o),u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,f);break;case"uint8array":h=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":h=this.data.slice(this.index,f)}return this.index=f,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(e,i,r){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,u){return this._listeners[o].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,u){if(this._listeners[o])for(var h=0;h<this._listeners[o].length;h++)this._listeners[o][h].call(this,u)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var u=this;return o.on("data",function(h){u.processChunk(h)}),o.on("end",function(){u.end()}),o.on("error",function(h){u.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,u){return this.extraStreamInfo[o]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=a},{}],29:[function(e,i,r){var a=e("../utils"),o=e("./ConvertWorker"),u=e("./GenericWorker"),h=e("../base64"),f=e("../support"),m=e("../external"),p=null;if(f.nodestream)try{p=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(w,x){return new m.Promise(function(_,A){var E=[],C=w._internalType,N=w._outputType,D=w._mimeType;w.on("data",function(F,B){E.push(F),x&&x(B)}).on("error",function(F){E=[],A(F)}).on("end",function(){try{var F=(function(B,Y,j){switch(B){case"blob":return a.newBlob(a.transformTo("arraybuffer",Y),j);case"base64":return h.encode(Y);default:return a.transformTo(B,Y)}})(N,(function(B,Y){var j,et=0,ut=null,H=0;for(j=0;j<Y.length;j++)H+=Y[j].length;switch(B){case"string":return Y.join("");case"array":return Array.prototype.concat.apply([],Y);case"uint8array":for(ut=new Uint8Array(H),j=0;j<Y.length;j++)ut.set(Y[j],et),et+=Y[j].length;return ut;case"nodebuffer":return Buffer.concat(Y);default:throw new Error("concat : unsupported type '"+B+"'")}})(C,E),D);_(F)}catch(B){A(B)}E=[]}).resume()})}function v(w,x,_){var A=x;switch(x){case"blob":case"arraybuffer":A="uint8array";break;case"base64":A="string"}try{this._internalType=A,this._outputType=x,this._mimeType=_,a.checkSupport(A),this._worker=w.pipe(new o(A)),w.lock()}catch(E){this._worker=new u("error"),this._worker.error(E)}}v.prototype={accumulate:function(w){return b(this,w)},on:function(w,x){var _=this;return w==="data"?this._worker.on(w,function(A){x.call(_,A.data,A.meta)}):this._worker.on(w,function(){a.delay(x,arguments,_)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var a=new ArrayBuffer(0);try{r.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),r.blob=o.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,i,r){for(var a=e("./utils"),o=e("./support"),u=e("./nodejsUtils"),h=e("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;f[254]=f[254]=1;function p(){h.call(this,"utf-8 decode"),this.leftOver=null}function b(){h.call(this,"utf-8 encode")}r.utf8encode=function(v){return o.nodebuffer?u.newBufferFrom(v,"utf-8"):(function(w){var x,_,A,E,C,N=w.length,D=0;for(E=0;E<N;E++)(64512&(_=w.charCodeAt(E)))==55296&&E+1<N&&(64512&(A=w.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(A-56320),E++),D+=_<128?1:_<2048?2:_<65536?3:4;for(x=o.uint8array?new Uint8Array(D):new Array(D),E=C=0;C<D;E++)(64512&(_=w.charCodeAt(E)))==55296&&E+1<N&&(64512&(A=w.charCodeAt(E+1)))==56320&&(_=65536+(_-55296<<10)+(A-56320),E++),_<128?x[C++]=_:(_<2048?x[C++]=192|_>>>6:(_<65536?x[C++]=224|_>>>12:(x[C++]=240|_>>>18,x[C++]=128|_>>>12&63),x[C++]=128|_>>>6&63),x[C++]=128|63&_);return x})(v)},r.utf8decode=function(v){return o.nodebuffer?a.transformTo("nodebuffer",v).toString("utf-8"):(function(w){var x,_,A,E,C=w.length,N=new Array(2*C);for(x=_=0;x<C;)if((A=w[x++])<128)N[_++]=A;else if(4<(E=f[A]))N[_++]=65533,x+=E-1;else{for(A&=E===2?31:E===3?15:7;1<E&&x<C;)A=A<<6|63&w[x++],E--;1<E?N[_++]=65533:A<65536?N[_++]=A:(A-=65536,N[_++]=55296|A>>10&1023,N[_++]=56320|1023&A)}return N.length!==_&&(N.subarray?N=N.subarray(0,_):N.length=_),a.applyFromCharCode(N)})(v=a.transformTo(o.uint8array?"uint8array":"array",v))},a.inherits(p,h),p.prototype.processChunk=function(v){var w=a.transformTo(o.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=w;(w=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),w.set(x,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=(function(E,C){var N;for((C=C||E.length)>E.length&&(C=E.length),N=C-1;0<=N&&(192&E[N])==128;)N--;return N<0||N===0?C:N+f[E[N]]>C?N:C})(w),A=w;_!==w.length&&(o.uint8array?(A=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(A=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:r.utf8decode(A),meta:v.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=p,a.inherits(b,h),b.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,i,r){var a=e("./support"),o=e("./base64"),u=e("./nodejsUtils"),h=e("./external");function f(x){return x}function m(x,_){for(var A=0;A<x.length;++A)_[A]=255&x.charCodeAt(A);return _}e("setimmediate"),r.newBlob=function(x,_){r.checkSupport("blob");try{return new Blob([x],{type:_})}catch{try{var A=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return A.append(x),A.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(x,_,A){var E=[],C=0,N=x.length;if(N<=A)return String.fromCharCode.apply(null,x);for(;C<N;)_==="array"||_==="nodebuffer"?E.push(String.fromCharCode.apply(null,x.slice(C,Math.min(C+A,N)))):E.push(String.fromCharCode.apply(null,x.subarray(C,Math.min(C+A,N)))),C+=A;return E.join("")},stringifyByChar:function(x){for(var _="",A=0;A<x.length;A++)_+=String.fromCharCode(x[A]);return _},applyCanBeUsed:{uint8array:(function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function b(x){var _=65536,A=r.getTypeOf(x),E=!0;if(A==="uint8array"?E=p.applyCanBeUsed.uint8array:A==="nodebuffer"&&(E=p.applyCanBeUsed.nodebuffer),E)for(;1<_;)try{return p.stringifyByChunk(x,A,_)}catch{_=Math.floor(_/2)}return p.stringifyByChar(x)}function v(x,_){for(var A=0;A<x.length;A++)_[A]=x[A];return _}r.applyFromCharCode=b;var w={};w.string={string:f,array:function(x){return m(x,new Array(x.length))},arraybuffer:function(x){return w.string.uint8array(x).buffer},uint8array:function(x){return m(x,new Uint8Array(x.length))},nodebuffer:function(x){return m(x,u.allocBuffer(x.length))}},w.array={string:b,array:f,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return u.newBufferFrom(x)}},w.arraybuffer={string:function(x){return b(new Uint8Array(x))},array:function(x){return v(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:f,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return u.newBufferFrom(new Uint8Array(x))}},w.uint8array={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:f,nodebuffer:function(x){return u.newBufferFrom(x)}},w.nodebuffer={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return w.nodebuffer.uint8array(x).buffer},uint8array:function(x){return v(x,new Uint8Array(x.length))},nodebuffer:f},r.transformTo=function(x,_){if(_=_||"",!x)return _;r.checkSupport(x);var A=r.getTypeOf(_);return w[A][x](_)},r.resolve=function(x){for(var _=x.split("/"),A=[],E=0;E<_.length;E++){var C=_[E];C==="."||C===""&&E!==0&&E!==_.length-1||(C===".."?A.pop():A.push(C))}return A.join("/")},r.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":a.nodebuffer&&u.isBuffer(x)?"nodebuffer":a.uint8array&&x instanceof Uint8Array?"uint8array":a.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(x){if(!a[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(x){var _,A,E="";for(A=0;A<(x||"").length;A++)E+="\\x"+((_=x.charCodeAt(A))<16?"0":"")+_.toString(16).toUpperCase();return E},r.delay=function(x,_,A){setImmediate(function(){x.apply(A||null,_||[])})},r.inherits=function(x,_){function A(){}A.prototype=_.prototype,x.prototype=new A},r.extend=function(){var x,_,A={};for(x=0;x<arguments.length;x++)for(_ in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],_)&&A[_]===void 0&&(A[_]=arguments[x][_]);return A},r.prepareContent=function(x,_,A,E,C){return h.Promise.resolve(_).then(function(N){return a.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new h.Promise(function(D,F){var B=new FileReader;B.onload=function(Y){D(Y.target.result)},B.onerror=function(Y){F(Y.target.error)},B.readAsArrayBuffer(N)}):N}).then(function(N){var D=r.getTypeOf(N);return D?(D==="arraybuffer"?N=r.transformTo("uint8array",N):D==="string"&&(C?N=o.decode(N):A&&E!==!0&&(N=(function(F){return m(F,a.uint8array?new Uint8Array(F.length):new Array(F.length))})(N))),N):h.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,i,r){var a=e("./reader/readerFor"),o=e("./utils"),u=e("./signature"),h=e("./zipEntry"),f=e("./support");function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(b)+", expected "+o.pretty(p)+")")}},isSignature:function(p,b){var v=this.reader.index;this.reader.setIndex(p);var w=this.reader.readString(4)===b;return this.reader.setIndex(v),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),b=f.uint8array?"uint8array":"array",v=o.transformTo(b,p);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,b,v,w=this.zip64EndOfCentralSize-44;0<w;)p=this.reader.readInt(2),b=this.reader.readInt(4),v=this.reader.readData(b),this.zip64ExtensibleData[p]={id:p,length:b,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,b;for(p=0;p<this.files.length;p++)b=this.files[p],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(p=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var b=p;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var w=b-v;if(0<w)this.isSignature(b,u.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(p){this.reader=a(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,i,r){var a=e("./reader/readerFor"),o=e("./utils"),u=e("./compressedObject"),h=e("./crc32"),f=e("./utf8"),m=e("./compressions"),p=e("./support");function b(v,w){this.options=v,this.loadOptions=w}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var w,x;if(v.skip(22),this.fileNameLength=v.readInt(2),x=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(_){for(var A in m)if(Object.prototype.hasOwnProperty.call(m,A)&&m[A].magic===_)return m[A];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,w,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var w=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(w),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var w,x,_,A=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<A;)w=v.readInt(2),x=v.readInt(2),_=v.readData(x),this.extraFields[w]={id:w,length:x,value:_};v.setIndex(A)},handleUTF8:function(){var v=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var x=o.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var A=o.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(A)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var w=a(v.value);return w.readInt(1)!==1||h(this.fileName)!==w.readInt(4)?null:f.utf8decode(w.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var w=a(v.value);return w.readInt(1)!==1||h(this.fileComment)!==w.readInt(4)?null:f.utf8decode(w.readData(v.length-5))}return null}},i.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,i,r){function a(w,x,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=x,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=e("./stream/StreamHelper"),u=e("./stream/DataWorker"),h=e("./utf8"),f=e("./compressedObject"),m=e("./stream/GenericWorker");a.prototype={internalStream:function(w){var x=null,_="string";try{if(!w)throw new Error("No output type specified.");var A=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),x=this._decompressWorker();var E=!this._dataBinary;E&&!A&&(x=x.pipe(new h.Utf8EncodeWorker)),!E&&A&&(x=x.pipe(new h.Utf8DecodeWorker))}catch(C){(x=new m("error")).error(C)}return new o(x,_,"")},async:function(w,x){return this.internalStream(w).accumulate(x)},nodeStream:function(w,x){return this.internalStream(w||"nodebuffer").toNodejsStream(x)},_compressWorker:function(w,x){if(this._data instanceof f&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new h.Utf8EncodeWorker)),f.createWorkerFrom(_,w,x)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof m?this._data:new u(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<p.length;v++)a.prototype[p[v]]=b;i.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,i,r){(function(a){var o,u,h=a.MutationObserver||a.WebKitMutationObserver;if(h){var f=0,m=new h(w),p=a.document.createTextNode("");m.observe(p,{characterData:!0}),o=function(){p.data=f=++f%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var x=a.document.createElement("script");x.onreadystatechange=function(){w(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},a.document.documentElement.appendChild(x)}:function(){setTimeout(w,0)};else{var b=new a.MessageChannel;b.port1.onmessage=w,o=function(){b.port2.postMessage(0)}}var v=[];function w(){var x,_;u=!0;for(var A=v.length;A;){for(_=v,v=[],x=-1;++x<A;)_[x]();A=v.length}u=!1}i.exports=function(x){v.push(x)!==1||u||o()}}).call(this,typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,i,r){var a=e("immediate");function o(){}var u={},h=["REJECTED"],f=["FULFILLED"],m=["PENDING"];function p(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,A!==o&&x(this,A)}function b(A,E,C){this.promise=A,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function v(A,E,C){a(function(){var N;try{N=E(C)}catch(D){return u.reject(A,D)}N===A?u.reject(A,new TypeError("Cannot resolve promise with itself")):u.resolve(A,N)})}function w(A){var E=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof E=="function")return function(){E.apply(A,arguments)}}function x(A,E){var C=!1;function N(B){C||(C=!0,u.reject(A,B))}function D(B){C||(C=!0,u.resolve(A,B))}var F=_(function(){E(D,N)});F.status==="error"&&N(F.value)}function _(A,E){var C={};try{C.value=A(E),C.status="success"}catch(N){C.status="error",C.value=N}return C}(i.exports=p).prototype.finally=function(A){if(typeof A!="function")return this;var E=this.constructor;return this.then(function(C){return E.resolve(A()).then(function(){return C})},function(C){return E.resolve(A()).then(function(){throw C})})},p.prototype.catch=function(A){return this.then(null,A)},p.prototype.then=function(A,E){if(typeof A!="function"&&this.state===f||typeof E!="function"&&this.state===h)return this;var C=new this.constructor(o);return this.state!==m?v(C,this.state===f?A:E,this.outcome):this.queue.push(new b(C,A,E)),C},b.prototype.callFulfilled=function(A){u.resolve(this.promise,A)},b.prototype.otherCallFulfilled=function(A){v(this.promise,this.onFulfilled,A)},b.prototype.callRejected=function(A){u.reject(this.promise,A)},b.prototype.otherCallRejected=function(A){v(this.promise,this.onRejected,A)},u.resolve=function(A,E){var C=_(w,E);if(C.status==="error")return u.reject(A,C.value);var N=C.value;if(N)x(A,N);else{A.state=f,A.outcome=E;for(var D=-1,F=A.queue.length;++D<F;)A.queue[D].callFulfilled(E)}return A},u.reject=function(A,E){A.state=h,A.outcome=E;for(var C=-1,N=A.queue.length;++C<N;)A.queue[C].callRejected(E);return A},p.resolve=function(A){return A instanceof this?A:u.resolve(new this(o),A)},p.reject=function(A){var E=new this(o);return u.reject(E,A)},p.all=function(A){var E=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=A.length,N=!1;if(!C)return this.resolve([]);for(var D=new Array(C),F=0,B=-1,Y=new this(o);++B<C;)j(A[B],B);return Y;function j(et,ut){E.resolve(et).then(function(H){D[ut]=H,++F!==C||N||(N=!0,u.resolve(Y,D))},function(H){N||(N=!0,u.reject(Y,H))})}},p.race=function(A){var E=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=A.length,N=!1;if(!C)return this.resolve([]);for(var D=-1,F=new this(o);++D<C;)B=A[D],E.resolve(B).then(function(Y){N||(N=!0,u.resolve(F,Y))},function(Y){N||(N=!0,u.reject(F,Y))});var B;return F}},{immediate:36}],38:[function(e,i,r){var a={};(0,e("./lib/utils/common").assign)(a,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),i.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,i,r){var a=e("./zlib/deflate"),o=e("./utils/common"),u=e("./utils/strings"),h=e("./zlib/messages"),f=e("./zlib/zstream"),m=Object.prototype.toString,p=0,b=-1,v=0,w=8;function x(A){if(!(this instanceof x))return new x(A);this.options=o.assign({level:b,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},A||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var C=a.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==p)throw new Error(h[C]);if(E.header&&a.deflateSetHeader(this.strm,E.header),E.dictionary){var N;if(N=typeof E.dictionary=="string"?u.string2buf(E.dictionary):m.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(C=a.deflateSetDictionary(this.strm,N))!==p)throw new Error(h[C]);this._dict_set=!0}}function _(A,E){var C=new x(E);if(C.push(A,!0),C.err)throw C.msg||h[C.err];return C.result}x.prototype.push=function(A,E){var C,N,D=this.strm,F=this.options.chunkSize;if(this.ended)return!1;N=E===~~E?E:E===!0?4:0,typeof A=="string"?D.input=u.string2buf(A):m.call(A)==="[object ArrayBuffer]"?D.input=new Uint8Array(A):D.input=A,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new o.Buf8(F),D.next_out=0,D.avail_out=F),(C=a.deflate(D,N))!==1&&C!==p)return this.onEnd(C),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(o.shrinkBuf(D.output,D.next_out))):this.onData(o.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&C!==1);return N===4?(C=a.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===p):N!==2||(this.onEnd(p),!(D.avail_out=0))},x.prototype.onData=function(A){this.chunks.push(A)},x.prototype.onEnd=function(A){A===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},r.Deflate=x,r.deflate=_,r.deflateRaw=function(A,E){return(E=E||{}).raw=!0,_(A,E)},r.gzip=function(A,E){return(E=E||{}).gzip=!0,_(A,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,i,r){var a=e("./zlib/inflate"),o=e("./utils/common"),u=e("./utils/strings"),h=e("./zlib/constants"),f=e("./zlib/messages"),m=e("./zlib/zstream"),p=e("./zlib/gzheader"),b=Object.prototype.toString;function v(x){if(!(this instanceof v))return new v(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||x&&x.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var A=a.inflateInit2(this.strm,_.windowBits);if(A!==h.Z_OK)throw new Error(f[A]);this.header=new p,a.inflateGetHeader(this.strm,this.header)}function w(x,_){var A=new v(_);if(A.push(x,!0),A.err)throw A.msg||f[A.err];return A.result}v.prototype.push=function(x,_){var A,E,C,N,D,F,B=this.strm,Y=this.options.chunkSize,j=this.options.dictionary,et=!1;if(this.ended)return!1;E=_===~~_?_:_===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof x=="string"?B.input=u.binstring2buf(x):b.call(x)==="[object ArrayBuffer]"?B.input=new Uint8Array(x):B.input=x,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new o.Buf8(Y),B.next_out=0,B.avail_out=Y),(A=a.inflate(B,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&j&&(F=typeof j=="string"?u.string2buf(j):b.call(j)==="[object ArrayBuffer]"?new Uint8Array(j):j,A=a.inflateSetDictionary(this.strm,F)),A===h.Z_BUF_ERROR&&et===!0&&(A=h.Z_OK,et=!1),A!==h.Z_STREAM_END&&A!==h.Z_OK)return this.onEnd(A),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&A!==h.Z_STREAM_END&&(B.avail_in!==0||E!==h.Z_FINISH&&E!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=u.utf8border(B.output,B.next_out),N=B.next_out-C,D=u.buf2string(B.output,C),B.next_out=N,B.avail_out=Y-N,N&&o.arraySet(B.output,B.output,C,N,0),this.onData(D)):this.onData(o.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(et=!0)}while((0<B.avail_in||B.avail_out===0)&&A!==h.Z_STREAM_END);return A===h.Z_STREAM_END&&(E=h.Z_FINISH),E===h.Z_FINISH?(A=a.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===h.Z_OK):E!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(B.avail_out=0))},v.prototype.onData=function(x){this.chunks.push(x)},v.prototype.onEnd=function(x){x===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},r.Inflate=v,r.inflate=w,r.inflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},r.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,i,r){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(h){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(h[p]=m[p])}}return h},r.shrinkBuf=function(h,f){return h.length===f?h:h.subarray?h.subarray(0,f):(h.length=f,h)};var o={arraySet:function(h,f,m,p,b){if(f.subarray&&h.subarray)h.set(f.subarray(m,m+p),b);else for(var v=0;v<p;v++)h[b+v]=f[m+v]},flattenChunks:function(h){var f,m,p,b,v,w;for(f=p=0,m=h.length;f<m;f++)p+=h[f].length;for(w=new Uint8Array(p),f=b=0,m=h.length;f<m;f++)v=h[f],w.set(v,b),b+=v.length;return w}},u={arraySet:function(h,f,m,p,b){for(var v=0;v<p;v++)h[b+v]=f[m+v]},flattenChunks:function(h){return[].concat.apply([],h)}};r.setTyped=function(h){h?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,u))},r.setTyped(a)},{}],42:[function(e,i,r){var a=e("./common"),o=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var h=new a.Buf8(256),f=0;f<256;f++)h[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function m(p,b){if(b<65537&&(p.subarray&&u||!p.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(p,b));for(var v="",w=0;w<b;w++)v+=String.fromCharCode(p[w]);return v}h[254]=h[254]=1,r.string2buf=function(p){var b,v,w,x,_,A=p.length,E=0;for(x=0;x<A;x++)(64512&(v=p.charCodeAt(x)))==55296&&x+1<A&&(64512&(w=p.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(w-56320),x++),E+=v<128?1:v<2048?2:v<65536?3:4;for(b=new a.Buf8(E),x=_=0;_<E;x++)(64512&(v=p.charCodeAt(x)))==55296&&x+1<A&&(64512&(w=p.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(w-56320),x++),v<128?b[_++]=v:(v<2048?b[_++]=192|v>>>6:(v<65536?b[_++]=224|v>>>12:(b[_++]=240|v>>>18,b[_++]=128|v>>>12&63),b[_++]=128|v>>>6&63),b[_++]=128|63&v);return b},r.buf2binstring=function(p){return m(p,p.length)},r.binstring2buf=function(p){for(var b=new a.Buf8(p.length),v=0,w=b.length;v<w;v++)b[v]=p.charCodeAt(v);return b},r.buf2string=function(p,b){var v,w,x,_,A=b||p.length,E=new Array(2*A);for(v=w=0;v<A;)if((x=p[v++])<128)E[w++]=x;else if(4<(_=h[x]))E[w++]=65533,v+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&v<A;)x=x<<6|63&p[v++],_--;1<_?E[w++]=65533:x<65536?E[w++]=x:(x-=65536,E[w++]=55296|x>>10&1023,E[w++]=56320|1023&x)}return m(E,w)},r.utf8border=function(p,b){var v;for((b=b||p.length)>p.length&&(b=p.length),v=b-1;0<=v&&(192&p[v])==128;)v--;return v<0||v===0?b:v+h[p[v]]>b?v:b}},{"./common":41}],43:[function(e,i,r){i.exports=function(a,o,u,h){for(var f=65535&a|0,m=a>>>16&65535|0,p=0;u!==0;){for(u-=p=2e3<u?2e3:u;m=m+(f=f+o[h++]|0)|0,--p;);f%=65521,m%=65521}return f|m<<16|0}},{}],44:[function(e,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,i,r){var a=(function(){for(var o,u=[],h=0;h<256;h++){o=h;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;u[h]=o}return u})();i.exports=function(o,u,h,f){var m=a,p=f+h;o^=-1;for(var b=f;b<p;b++)o=o>>>8^m[255&(o^u[b])];return-1^o}},{}],46:[function(e,i,r){var a,o=e("../utils/common"),u=e("./trees"),h=e("./adler32"),f=e("./crc32"),m=e("./messages"),p=0,b=4,v=0,w=-2,x=-1,_=4,A=2,E=8,C=9,N=286,D=30,F=19,B=2*N+1,Y=15,j=3,et=258,ut=et+j+1,H=42,it=113,R=1,nt=2,$=3,X=4;function vt(M,gt){return M.msg=m[gt],gt}function mt(M){return(M<<1)-(4<M?9:0)}function Et(M){for(var gt=M.length;0<=--gt;)M[gt]=0}function z(M){var gt=M.state,dt=gt.pending;dt>M.avail_out&&(dt=M.avail_out),dt!==0&&(o.arraySet(M.output,gt.pending_buf,gt.pending_out,dt,M.next_out),M.next_out+=dt,gt.pending_out+=dt,M.total_out+=dt,M.avail_out-=dt,gt.pending-=dt,gt.pending===0&&(gt.pending_out=0))}function P(M,gt){u._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,gt),M.block_start=M.strstart,z(M.strm)}function at(M,gt){M.pending_buf[M.pending++]=gt}function ht(M,gt){M.pending_buf[M.pending++]=gt>>>8&255,M.pending_buf[M.pending++]=255&gt}function pt(M,gt){var dt,G,U=M.max_chain_length,J=M.strstart,wt=M.prev_length,_t=M.nice_match,lt=M.strstart>M.w_size-ut?M.strstart-(M.w_size-ut):0,Rt=M.window,Ot=M.w_mask,Dt=M.prev,Kt=M.strstart+et,Ne=Rt[J+wt-1],le=Rt[J+wt];M.prev_length>=M.good_match&&(U>>=2),_t>M.lookahead&&(_t=M.lookahead);do if(Rt[(dt=gt)+wt]===le&&Rt[dt+wt-1]===Ne&&Rt[dt]===Rt[J]&&Rt[++dt]===Rt[J+1]){J+=2,dt++;do;while(Rt[++J]===Rt[++dt]&&Rt[++J]===Rt[++dt]&&Rt[++J]===Rt[++dt]&&Rt[++J]===Rt[++dt]&&Rt[++J]===Rt[++dt]&&Rt[++J]===Rt[++dt]&&Rt[++J]===Rt[++dt]&&Rt[++J]===Rt[++dt]&&J<Kt);if(G=et-(Kt-J),J=Kt-et,wt<G){if(M.match_start=gt,_t<=(wt=G))break;Ne=Rt[J+wt-1],le=Rt[J+wt]}}while((gt=Dt[gt&Ot])>lt&&--U!=0);return wt<=M.lookahead?wt:M.lookahead}function Bt(M){var gt,dt,G,U,J,wt,_t,lt,Rt,Ot,Dt=M.w_size;do{if(U=M.window_size-M.lookahead-M.strstart,M.strstart>=Dt+(Dt-ut)){for(o.arraySet(M.window,M.window,Dt,Dt,0),M.match_start-=Dt,M.strstart-=Dt,M.block_start-=Dt,gt=dt=M.hash_size;G=M.head[--gt],M.head[gt]=Dt<=G?G-Dt:0,--dt;);for(gt=dt=Dt;G=M.prev[--gt],M.prev[gt]=Dt<=G?G-Dt:0,--dt;);U+=Dt}if(M.strm.avail_in===0)break;if(wt=M.strm,_t=M.window,lt=M.strstart+M.lookahead,Rt=U,Ot=void 0,Ot=wt.avail_in,Rt<Ot&&(Ot=Rt),dt=Ot===0?0:(wt.avail_in-=Ot,o.arraySet(_t,wt.input,wt.next_in,Ot,lt),wt.state.wrap===1?wt.adler=h(wt.adler,_t,Ot,lt):wt.state.wrap===2&&(wt.adler=f(wt.adler,_t,Ot,lt)),wt.next_in+=Ot,wt.total_in+=Ot,Ot),M.lookahead+=dt,M.lookahead+M.insert>=j)for(J=M.strstart-M.insert,M.ins_h=M.window[J],M.ins_h=(M.ins_h<<M.hash_shift^M.window[J+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[J+j-1])&M.hash_mask,M.prev[J&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=J,J++,M.insert--,!(M.lookahead+M.insert<j)););}while(M.lookahead<ut&&M.strm.avail_in!==0)}function Lt(M,gt){for(var dt,G;;){if(M.lookahead<ut){if(Bt(M),M.lookahead<ut&&gt===p)return R;if(M.lookahead===0)break}if(dt=0,M.lookahead>=j&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+j-1])&M.hash_mask,dt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),dt!==0&&M.strstart-dt<=M.w_size-ut&&(M.match_length=pt(M,dt)),M.match_length>=j)if(G=u._tr_tally(M,M.strstart-M.match_start,M.match_length-j),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=j){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+j-1])&M.hash_mask,dt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else G=u._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(G&&(P(M,!1),M.strm.avail_out===0))return R}return M.insert=M.strstart<j-1?M.strstart:j-1,gt===b?(P(M,!0),M.strm.avail_out===0?$:X):M.last_lit&&(P(M,!1),M.strm.avail_out===0)?R:nt}function Ht(M,gt){for(var dt,G,U;;){if(M.lookahead<ut){if(Bt(M),M.lookahead<ut&&gt===p)return R;if(M.lookahead===0)break}if(dt=0,M.lookahead>=j&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+j-1])&M.hash_mask,dt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=j-1,dt!==0&&M.prev_length<M.max_lazy_match&&M.strstart-dt<=M.w_size-ut&&(M.match_length=pt(M,dt),M.match_length<=5&&(M.strategy===1||M.match_length===j&&4096<M.strstart-M.match_start)&&(M.match_length=j-1)),M.prev_length>=j&&M.match_length<=M.prev_length){for(U=M.strstart+M.lookahead-j,G=u._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-j),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=U&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+j-1])&M.hash_mask,dt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=j-1,M.strstart++,G&&(P(M,!1),M.strm.avail_out===0))return R}else if(M.match_available){if((G=u._tr_tally(M,0,M.window[M.strstart-1]))&&P(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return R}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(G=u._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<j-1?M.strstart:j-1,gt===b?(P(M,!0),M.strm.avail_out===0?$:X):M.last_lit&&(P(M,!1),M.strm.avail_out===0)?R:nt}function jt(M,gt,dt,G,U){this.good_length=M,this.max_lazy=gt,this.nice_length=dt,this.max_chain=G,this.func=U}function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*B),this.dyn_dtree=new o.Buf16(2*(2*D+1)),this.bl_tree=new o.Buf16(2*(2*F+1)),Et(this.dyn_ltree),Et(this.dyn_dtree),Et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(Y+1),this.heap=new o.Buf16(2*N+1),Et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*N+1),Et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function we(M){var gt;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=A,(gt=M.state).pending=0,gt.pending_out=0,gt.wrap<0&&(gt.wrap=-gt.wrap),gt.status=gt.wrap?H:it,M.adler=gt.wrap===2?0:1,gt.last_flush=p,u._tr_init(gt),v):vt(M,w)}function Qe(M){var gt=we(M);return gt===v&&(function(dt){dt.window_size=2*dt.w_size,Et(dt.head),dt.max_lazy_match=a[dt.level].max_lazy,dt.good_match=a[dt.level].good_length,dt.nice_match=a[dt.level].nice_length,dt.max_chain_length=a[dt.level].max_chain,dt.strstart=0,dt.block_start=0,dt.lookahead=0,dt.insert=0,dt.match_length=dt.prev_length=j-1,dt.match_available=0,dt.ins_h=0})(M.state),gt}function oi(M,gt,dt,G,U,J){if(!M)return w;var wt=1;if(gt===x&&(gt=6),G<0?(wt=0,G=-G):15<G&&(wt=2,G-=16),U<1||C<U||dt!==E||G<8||15<G||gt<0||9<gt||J<0||_<J)return vt(M,w);G===8&&(G=9);var _t=new xe;return(M.state=_t).strm=M,_t.wrap=wt,_t.gzhead=null,_t.w_bits=G,_t.w_size=1<<_t.w_bits,_t.w_mask=_t.w_size-1,_t.hash_bits=U+7,_t.hash_size=1<<_t.hash_bits,_t.hash_mask=_t.hash_size-1,_t.hash_shift=~~((_t.hash_bits+j-1)/j),_t.window=new o.Buf8(2*_t.w_size),_t.head=new o.Buf16(_t.hash_size),_t.prev=new o.Buf16(_t.w_size),_t.lit_bufsize=1<<U+6,_t.pending_buf_size=4*_t.lit_bufsize,_t.pending_buf=new o.Buf8(_t.pending_buf_size),_t.d_buf=1*_t.lit_bufsize,_t.l_buf=3*_t.lit_bufsize,_t.level=gt,_t.strategy=J,_t.method=dt,Qe(M)}a=[new jt(0,0,0,0,function(M,gt){var dt=65535;for(dt>M.pending_buf_size-5&&(dt=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Bt(M),M.lookahead===0&&gt===p)return R;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var G=M.block_start+dt;if((M.strstart===0||M.strstart>=G)&&(M.lookahead=M.strstart-G,M.strstart=G,P(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-ut&&(P(M,!1),M.strm.avail_out===0))return R}return M.insert=0,gt===b?(P(M,!0),M.strm.avail_out===0?$:X):(M.strstart>M.block_start&&(P(M,!1),M.strm.avail_out),R)}),new jt(4,4,8,4,Lt),new jt(4,5,16,8,Lt),new jt(4,6,32,32,Lt),new jt(4,4,16,16,Ht),new jt(8,16,32,32,Ht),new jt(8,16,128,128,Ht),new jt(8,32,128,256,Ht),new jt(32,128,258,1024,Ht),new jt(32,258,258,4096,Ht)],r.deflateInit=function(M,gt){return oi(M,gt,E,15,8,0)},r.deflateInit2=oi,r.deflateReset=Qe,r.deflateResetKeep=we,r.deflateSetHeader=function(M,gt){return M&&M.state?M.state.wrap!==2?w:(M.state.gzhead=gt,v):w},r.deflate=function(M,gt){var dt,G,U,J;if(!M||!M.state||5<gt||gt<0)return M?vt(M,w):w;if(G=M.state,!M.output||!M.input&&M.avail_in!==0||G.status===666&&gt!==b)return vt(M,M.avail_out===0?-5:w);if(G.strm=M,dt=G.last_flush,G.last_flush=gt,G.status===H)if(G.wrap===2)M.adler=0,at(G,31),at(G,139),at(G,8),G.gzhead?(at(G,(G.gzhead.text?1:0)+(G.gzhead.hcrc?2:0)+(G.gzhead.extra?4:0)+(G.gzhead.name?8:0)+(G.gzhead.comment?16:0)),at(G,255&G.gzhead.time),at(G,G.gzhead.time>>8&255),at(G,G.gzhead.time>>16&255),at(G,G.gzhead.time>>24&255),at(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),at(G,255&G.gzhead.os),G.gzhead.extra&&G.gzhead.extra.length&&(at(G,255&G.gzhead.extra.length),at(G,G.gzhead.extra.length>>8&255)),G.gzhead.hcrc&&(M.adler=f(M.adler,G.pending_buf,G.pending,0)),G.gzindex=0,G.status=69):(at(G,0),at(G,0),at(G,0),at(G,0),at(G,0),at(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),at(G,3),G.status=it);else{var wt=E+(G.w_bits-8<<4)<<8;wt|=(2<=G.strategy||G.level<2?0:G.level<6?1:G.level===6?2:3)<<6,G.strstart!==0&&(wt|=32),wt+=31-wt%31,G.status=it,ht(G,wt),G.strstart!==0&&(ht(G,M.adler>>>16),ht(G,65535&M.adler)),M.adler=1}if(G.status===69)if(G.gzhead.extra){for(U=G.pending;G.gzindex<(65535&G.gzhead.extra.length)&&(G.pending!==G.pending_buf_size||(G.gzhead.hcrc&&G.pending>U&&(M.adler=f(M.adler,G.pending_buf,G.pending-U,U)),z(M),U=G.pending,G.pending!==G.pending_buf_size));)at(G,255&G.gzhead.extra[G.gzindex]),G.gzindex++;G.gzhead.hcrc&&G.pending>U&&(M.adler=f(M.adler,G.pending_buf,G.pending-U,U)),G.gzindex===G.gzhead.extra.length&&(G.gzindex=0,G.status=73)}else G.status=73;if(G.status===73)if(G.gzhead.name){U=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>U&&(M.adler=f(M.adler,G.pending_buf,G.pending-U,U)),z(M),U=G.pending,G.pending===G.pending_buf_size)){J=1;break}J=G.gzindex<G.gzhead.name.length?255&G.gzhead.name.charCodeAt(G.gzindex++):0,at(G,J)}while(J!==0);G.gzhead.hcrc&&G.pending>U&&(M.adler=f(M.adler,G.pending_buf,G.pending-U,U)),J===0&&(G.gzindex=0,G.status=91)}else G.status=91;if(G.status===91)if(G.gzhead.comment){U=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>U&&(M.adler=f(M.adler,G.pending_buf,G.pending-U,U)),z(M),U=G.pending,G.pending===G.pending_buf_size)){J=1;break}J=G.gzindex<G.gzhead.comment.length?255&G.gzhead.comment.charCodeAt(G.gzindex++):0,at(G,J)}while(J!==0);G.gzhead.hcrc&&G.pending>U&&(M.adler=f(M.adler,G.pending_buf,G.pending-U,U)),J===0&&(G.status=103)}else G.status=103;if(G.status===103&&(G.gzhead.hcrc?(G.pending+2>G.pending_buf_size&&z(M),G.pending+2<=G.pending_buf_size&&(at(G,255&M.adler),at(G,M.adler>>8&255),M.adler=0,G.status=it)):G.status=it),G.pending!==0){if(z(M),M.avail_out===0)return G.last_flush=-1,v}else if(M.avail_in===0&&mt(gt)<=mt(dt)&&gt!==b)return vt(M,-5);if(G.status===666&&M.avail_in!==0)return vt(M,-5);if(M.avail_in!==0||G.lookahead!==0||gt!==p&&G.status!==666){var _t=G.strategy===2?(function(lt,Rt){for(var Ot;;){if(lt.lookahead===0&&(Bt(lt),lt.lookahead===0)){if(Rt===p)return R;break}if(lt.match_length=0,Ot=u._tr_tally(lt,0,lt.window[lt.strstart]),lt.lookahead--,lt.strstart++,Ot&&(P(lt,!1),lt.strm.avail_out===0))return R}return lt.insert=0,Rt===b?(P(lt,!0),lt.strm.avail_out===0?$:X):lt.last_lit&&(P(lt,!1),lt.strm.avail_out===0)?R:nt})(G,gt):G.strategy===3?(function(lt,Rt){for(var Ot,Dt,Kt,Ne,le=lt.window;;){if(lt.lookahead<=et){if(Bt(lt),lt.lookahead<=et&&Rt===p)return R;if(lt.lookahead===0)break}if(lt.match_length=0,lt.lookahead>=j&&0<lt.strstart&&(Dt=le[Kt=lt.strstart-1])===le[++Kt]&&Dt===le[++Kt]&&Dt===le[++Kt]){Ne=lt.strstart+et;do;while(Dt===le[++Kt]&&Dt===le[++Kt]&&Dt===le[++Kt]&&Dt===le[++Kt]&&Dt===le[++Kt]&&Dt===le[++Kt]&&Dt===le[++Kt]&&Dt===le[++Kt]&&Kt<Ne);lt.match_length=et-(Ne-Kt),lt.match_length>lt.lookahead&&(lt.match_length=lt.lookahead)}if(lt.match_length>=j?(Ot=u._tr_tally(lt,1,lt.match_length-j),lt.lookahead-=lt.match_length,lt.strstart+=lt.match_length,lt.match_length=0):(Ot=u._tr_tally(lt,0,lt.window[lt.strstart]),lt.lookahead--,lt.strstart++),Ot&&(P(lt,!1),lt.strm.avail_out===0))return R}return lt.insert=0,Rt===b?(P(lt,!0),lt.strm.avail_out===0?$:X):lt.last_lit&&(P(lt,!1),lt.strm.avail_out===0)?R:nt})(G,gt):a[G.level].func(G,gt);if(_t!==$&&_t!==X||(G.status=666),_t===R||_t===$)return M.avail_out===0&&(G.last_flush=-1),v;if(_t===nt&&(gt===1?u._tr_align(G):gt!==5&&(u._tr_stored_block(G,0,0,!1),gt===3&&(Et(G.head),G.lookahead===0&&(G.strstart=0,G.block_start=0,G.insert=0))),z(M),M.avail_out===0))return G.last_flush=-1,v}return gt!==b?v:G.wrap<=0?1:(G.wrap===2?(at(G,255&M.adler),at(G,M.adler>>8&255),at(G,M.adler>>16&255),at(G,M.adler>>24&255),at(G,255&M.total_in),at(G,M.total_in>>8&255),at(G,M.total_in>>16&255),at(G,M.total_in>>24&255)):(ht(G,M.adler>>>16),ht(G,65535&M.adler)),z(M),0<G.wrap&&(G.wrap=-G.wrap),G.pending!==0?v:1)},r.deflateEnd=function(M){var gt;return M&&M.state?(gt=M.state.status)!==H&&gt!==69&&gt!==73&&gt!==91&&gt!==103&&gt!==it&&gt!==666?vt(M,w):(M.state=null,gt===it?vt(M,-3):v):w},r.deflateSetDictionary=function(M,gt){var dt,G,U,J,wt,_t,lt,Rt,Ot=gt.length;if(!M||!M.state||(J=(dt=M.state).wrap)===2||J===1&&dt.status!==H||dt.lookahead)return w;for(J===1&&(M.adler=h(M.adler,gt,Ot,0)),dt.wrap=0,Ot>=dt.w_size&&(J===0&&(Et(dt.head),dt.strstart=0,dt.block_start=0,dt.insert=0),Rt=new o.Buf8(dt.w_size),o.arraySet(Rt,gt,Ot-dt.w_size,dt.w_size,0),gt=Rt,Ot=dt.w_size),wt=M.avail_in,_t=M.next_in,lt=M.input,M.avail_in=Ot,M.next_in=0,M.input=gt,Bt(dt);dt.lookahead>=j;){for(G=dt.strstart,U=dt.lookahead-(j-1);dt.ins_h=(dt.ins_h<<dt.hash_shift^dt.window[G+j-1])&dt.hash_mask,dt.prev[G&dt.w_mask]=dt.head[dt.ins_h],dt.head[dt.ins_h]=G,G++,--U;);dt.strstart=G,dt.lookahead=j-1,Bt(dt)}return dt.strstart+=dt.lookahead,dt.block_start=dt.strstart,dt.insert=dt.lookahead,dt.lookahead=0,dt.match_length=dt.prev_length=j-1,dt.match_available=0,M.next_in=_t,M.input=lt,M.avail_in=wt,dt.wrap=J,v},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,i,r){i.exports=function(a,o){var u,h,f,m,p,b,v,w,x,_,A,E,C,N,D,F,B,Y,j,et,ut,H,it,R,nt;u=a.state,h=a.next_in,R=a.input,f=h+(a.avail_in-5),m=a.next_out,nt=a.output,p=m-(o-a.avail_out),b=m+(a.avail_out-257),v=u.dmax,w=u.wsize,x=u.whave,_=u.wnext,A=u.window,E=u.hold,C=u.bits,N=u.lencode,D=u.distcode,F=(1<<u.lenbits)-1,B=(1<<u.distbits)-1;t:do{C<15&&(E+=R[h++]<<C,C+=8,E+=R[h++]<<C,C+=8),Y=N[E&F];e:for(;;){if(E>>>=j=Y>>>24,C-=j,(j=Y>>>16&255)===0)nt[m++]=65535&Y;else{if(!(16&j)){if((64&j)==0){Y=N[(65535&Y)+(E&(1<<j)-1)];continue e}if(32&j){u.mode=12;break t}a.msg="invalid literal/length code",u.mode=30;break t}et=65535&Y,(j&=15)&&(C<j&&(E+=R[h++]<<C,C+=8),et+=E&(1<<j)-1,E>>>=j,C-=j),C<15&&(E+=R[h++]<<C,C+=8,E+=R[h++]<<C,C+=8),Y=D[E&B];i:for(;;){if(E>>>=j=Y>>>24,C-=j,!(16&(j=Y>>>16&255))){if((64&j)==0){Y=D[(65535&Y)+(E&(1<<j)-1)];continue i}a.msg="invalid distance code",u.mode=30;break t}if(ut=65535&Y,C<(j&=15)&&(E+=R[h++]<<C,(C+=8)<j&&(E+=R[h++]<<C,C+=8)),v<(ut+=E&(1<<j)-1)){a.msg="invalid distance too far back",u.mode=30;break t}if(E>>>=j,C-=j,(j=m-p)<ut){if(x<(j=ut-j)&&u.sane){a.msg="invalid distance too far back",u.mode=30;break t}if(it=A,(H=0)===_){if(H+=w-j,j<et){for(et-=j;nt[m++]=A[H++],--j;);H=m-ut,it=nt}}else if(_<j){if(H+=w+_-j,(j-=_)<et){for(et-=j;nt[m++]=A[H++],--j;);if(H=0,_<et){for(et-=j=_;nt[m++]=A[H++],--j;);H=m-ut,it=nt}}}else if(H+=_-j,j<et){for(et-=j;nt[m++]=A[H++],--j;);H=m-ut,it=nt}for(;2<et;)nt[m++]=it[H++],nt[m++]=it[H++],nt[m++]=it[H++],et-=3;et&&(nt[m++]=it[H++],1<et&&(nt[m++]=it[H++]))}else{for(H=m-ut;nt[m++]=nt[H++],nt[m++]=nt[H++],nt[m++]=nt[H++],2<(et-=3););et&&(nt[m++]=nt[H++],1<et&&(nt[m++]=nt[H++]))}break}}break}}while(h<f&&m<b);h-=et=C>>3,E&=(1<<(C-=et<<3))-1,a.next_in=h,a.next_out=m,a.avail_in=h<f?f-h+5:5-(h-f),a.avail_out=m<b?b-m+257:257-(m-b),u.hold=E,u.bits=C}},{}],49:[function(e,i,r){var a=e("../utils/common"),o=e("./adler32"),u=e("./crc32"),h=e("./inffast"),f=e("./inftrees"),m=1,p=2,b=0,v=-2,w=1,x=852,_=592;function A(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(H){var it;return H&&H.state?(it=H.state,H.total_in=H.total_out=it.total=0,H.msg="",it.wrap&&(H.adler=1&it.wrap),it.mode=w,it.last=0,it.havedict=0,it.dmax=32768,it.head=null,it.hold=0,it.bits=0,it.lencode=it.lendyn=new a.Buf32(x),it.distcode=it.distdyn=new a.Buf32(_),it.sane=1,it.back=-1,b):v}function N(H){var it;return H&&H.state?((it=H.state).wsize=0,it.whave=0,it.wnext=0,C(H)):v}function D(H,it){var R,nt;return H&&H.state?(nt=H.state,it<0?(R=0,it=-it):(R=1+(it>>4),it<48&&(it&=15)),it&&(it<8||15<it)?v:(nt.window!==null&&nt.wbits!==it&&(nt.window=null),nt.wrap=R,nt.wbits=it,N(H))):v}function F(H,it){var R,nt;return H?(nt=new E,(H.state=nt).window=null,(R=D(H,it))!==b&&(H.state=null),R):v}var B,Y,j=!0;function et(H){if(j){var it;for(B=new a.Buf32(512),Y=new a.Buf32(32),it=0;it<144;)H.lens[it++]=8;for(;it<256;)H.lens[it++]=9;for(;it<280;)H.lens[it++]=7;for(;it<288;)H.lens[it++]=8;for(f(m,H.lens,0,288,B,0,H.work,{bits:9}),it=0;it<32;)H.lens[it++]=5;f(p,H.lens,0,32,Y,0,H.work,{bits:5}),j=!1}H.lencode=B,H.lenbits=9,H.distcode=Y,H.distbits=5}function ut(H,it,R,nt){var $,X=H.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new a.Buf8(X.wsize)),nt>=X.wsize?(a.arraySet(X.window,it,R-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(nt<($=X.wsize-X.wnext)&&($=nt),a.arraySet(X.window,it,R-nt,$,X.wnext),(nt-=$)?(a.arraySet(X.window,it,R-nt,nt,0),X.wnext=nt,X.whave=X.wsize):(X.wnext+=$,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=$))),0}r.inflateReset=N,r.inflateReset2=D,r.inflateResetKeep=C,r.inflateInit=function(H){return F(H,15)},r.inflateInit2=F,r.inflate=function(H,it){var R,nt,$,X,vt,mt,Et,z,P,at,ht,pt,Bt,Lt,Ht,jt,xe,we,Qe,oi,M,gt,dt,G,U=0,J=new a.Buf8(4),wt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return v;(R=H.state).mode===12&&(R.mode=13),vt=H.next_out,$=H.output,Et=H.avail_out,X=H.next_in,nt=H.input,mt=H.avail_in,z=R.hold,P=R.bits,at=mt,ht=Et,gt=b;t:for(;;)switch(R.mode){case w:if(R.wrap===0){R.mode=13;break}for(;P<16;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if(2&R.wrap&&z===35615){J[R.check=0]=255&z,J[1]=z>>>8&255,R.check=u(R.check,J,2,0),P=z=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&z)<<8)+(z>>8))%31){H.msg="incorrect header check",R.mode=30;break}if((15&z)!=8){H.msg="unknown compression method",R.mode=30;break}if(P-=4,M=8+(15&(z>>>=4)),R.wbits===0)R.wbits=M;else if(M>R.wbits){H.msg="invalid window size",R.mode=30;break}R.dmax=1<<M,H.adler=R.check=1,R.mode=512&z?10:12,P=z=0;break;case 2:for(;P<16;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if(R.flags=z,(255&R.flags)!=8){H.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){H.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=z>>8&1),512&R.flags&&(J[0]=255&z,J[1]=z>>>8&255,R.check=u(R.check,J,2,0)),P=z=0,R.mode=3;case 3:for(;P<32;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}R.head&&(R.head.time=z),512&R.flags&&(J[0]=255&z,J[1]=z>>>8&255,J[2]=z>>>16&255,J[3]=z>>>24&255,R.check=u(R.check,J,4,0)),P=z=0,R.mode=4;case 4:for(;P<16;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}R.head&&(R.head.xflags=255&z,R.head.os=z>>8),512&R.flags&&(J[0]=255&z,J[1]=z>>>8&255,R.check=u(R.check,J,2,0)),P=z=0,R.mode=5;case 5:if(1024&R.flags){for(;P<16;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}R.length=z,R.head&&(R.head.extra_len=z),512&R.flags&&(J[0]=255&z,J[1]=z>>>8&255,R.check=u(R.check,J,2,0)),P=z=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(mt<(pt=R.length)&&(pt=mt),pt&&(R.head&&(M=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),a.arraySet(R.head.extra,nt,X,pt,M)),512&R.flags&&(R.check=u(R.check,nt,pt,X)),mt-=pt,X+=pt,R.length-=pt),R.length))break t;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(mt===0)break t;for(pt=0;M=nt[X+pt++],R.head&&M&&R.length<65536&&(R.head.name+=String.fromCharCode(M)),M&&pt<mt;);if(512&R.flags&&(R.check=u(R.check,nt,pt,X)),mt-=pt,X+=pt,M)break t}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(mt===0)break t;for(pt=0;M=nt[X+pt++],R.head&&M&&R.length<65536&&(R.head.comment+=String.fromCharCode(M)),M&&pt<mt;);if(512&R.flags&&(R.check=u(R.check,nt,pt,X)),mt-=pt,X+=pt,M)break t}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;P<16;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if(z!==(65535&R.check)){H.msg="header crc mismatch",R.mode=30;break}P=z=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),H.adler=R.check=0,R.mode=12;break;case 10:for(;P<32;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}H.adler=R.check=A(z),P=z=0,R.mode=11;case 11:if(R.havedict===0)return H.next_out=vt,H.avail_out=Et,H.next_in=X,H.avail_in=mt,R.hold=z,R.bits=P,2;H.adler=R.check=1,R.mode=12;case 12:if(it===5||it===6)break t;case 13:if(R.last){z>>>=7&P,P-=7&P,R.mode=27;break}for(;P<3;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}switch(R.last=1&z,P-=1,3&(z>>>=1)){case 0:R.mode=14;break;case 1:if(et(R),R.mode=20,it!==6)break;z>>>=2,P-=2;break t;case 2:R.mode=17;break;case 3:H.msg="invalid block type",R.mode=30}z>>>=2,P-=2;break;case 14:for(z>>>=7&P,P-=7&P;P<32;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if((65535&z)!=(z>>>16^65535)){H.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&z,P=z=0,R.mode=15,it===6)break t;case 15:R.mode=16;case 16:if(pt=R.length){if(mt<pt&&(pt=mt),Et<pt&&(pt=Et),pt===0)break t;a.arraySet($,nt,X,pt,vt),mt-=pt,X+=pt,Et-=pt,vt+=pt,R.length-=pt;break}R.mode=12;break;case 17:for(;P<14;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if(R.nlen=257+(31&z),z>>>=5,P-=5,R.ndist=1+(31&z),z>>>=5,P-=5,R.ncode=4+(15&z),z>>>=4,P-=4,286<R.nlen||30<R.ndist){H.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;P<3;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}R.lens[wt[R.have++]]=7&z,z>>>=3,P-=3}for(;R.have<19;)R.lens[wt[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,dt={bits:R.lenbits},gt=f(0,R.lens,0,19,R.lencode,0,R.work,dt),R.lenbits=dt.bits,gt){H.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;jt=(U=R.lencode[z&(1<<R.lenbits)-1])>>>16&255,xe=65535&U,!((Ht=U>>>24)<=P);){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if(xe<16)z>>>=Ht,P-=Ht,R.lens[R.have++]=xe;else{if(xe===16){for(G=Ht+2;P<G;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if(z>>>=Ht,P-=Ht,R.have===0){H.msg="invalid bit length repeat",R.mode=30;break}M=R.lens[R.have-1],pt=3+(3&z),z>>>=2,P-=2}else if(xe===17){for(G=Ht+3;P<G;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}P-=Ht,M=0,pt=3+(7&(z>>>=Ht)),z>>>=3,P-=3}else{for(G=Ht+7;P<G;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}P-=Ht,M=0,pt=11+(127&(z>>>=Ht)),z>>>=7,P-=7}if(R.have+pt>R.nlen+R.ndist){H.msg="invalid bit length repeat",R.mode=30;break}for(;pt--;)R.lens[R.have++]=M}}if(R.mode===30)break;if(R.lens[256]===0){H.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,dt={bits:R.lenbits},gt=f(m,R.lens,0,R.nlen,R.lencode,0,R.work,dt),R.lenbits=dt.bits,gt){H.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,dt={bits:R.distbits},gt=f(p,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,dt),R.distbits=dt.bits,gt){H.msg="invalid distances set",R.mode=30;break}if(R.mode=20,it===6)break t;case 20:R.mode=21;case 21:if(6<=mt&&258<=Et){H.next_out=vt,H.avail_out=Et,H.next_in=X,H.avail_in=mt,R.hold=z,R.bits=P,h(H,ht),vt=H.next_out,$=H.output,Et=H.avail_out,X=H.next_in,nt=H.input,mt=H.avail_in,z=R.hold,P=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;jt=(U=R.lencode[z&(1<<R.lenbits)-1])>>>16&255,xe=65535&U,!((Ht=U>>>24)<=P);){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if(jt&&(240&jt)==0){for(we=Ht,Qe=jt,oi=xe;jt=(U=R.lencode[oi+((z&(1<<we+Qe)-1)>>we)])>>>16&255,xe=65535&U,!(we+(Ht=U>>>24)<=P);){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}z>>>=we,P-=we,R.back+=we}if(z>>>=Ht,P-=Ht,R.back+=Ht,R.length=xe,jt===0){R.mode=26;break}if(32&jt){R.back=-1,R.mode=12;break}if(64&jt){H.msg="invalid literal/length code",R.mode=30;break}R.extra=15&jt,R.mode=22;case 22:if(R.extra){for(G=R.extra;P<G;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}R.length+=z&(1<<R.extra)-1,z>>>=R.extra,P-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;jt=(U=R.distcode[z&(1<<R.distbits)-1])>>>16&255,xe=65535&U,!((Ht=U>>>24)<=P);){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if((240&jt)==0){for(we=Ht,Qe=jt,oi=xe;jt=(U=R.distcode[oi+((z&(1<<we+Qe)-1)>>we)])>>>16&255,xe=65535&U,!(we+(Ht=U>>>24)<=P);){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}z>>>=we,P-=we,R.back+=we}if(z>>>=Ht,P-=Ht,R.back+=Ht,64&jt){H.msg="invalid distance code",R.mode=30;break}R.offset=xe,R.extra=15&jt,R.mode=24;case 24:if(R.extra){for(G=R.extra;P<G;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}R.offset+=z&(1<<R.extra)-1,z>>>=R.extra,P-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){H.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(Et===0)break t;if(pt=ht-Et,R.offset>pt){if((pt=R.offset-pt)>R.whave&&R.sane){H.msg="invalid distance too far back",R.mode=30;break}Bt=pt>R.wnext?(pt-=R.wnext,R.wsize-pt):R.wnext-pt,pt>R.length&&(pt=R.length),Lt=R.window}else Lt=$,Bt=vt-R.offset,pt=R.length;for(Et<pt&&(pt=Et),Et-=pt,R.length-=pt;$[vt++]=Lt[Bt++],--pt;);R.length===0&&(R.mode=21);break;case 26:if(Et===0)break t;$[vt++]=R.length,Et--,R.mode=21;break;case 27:if(R.wrap){for(;P<32;){if(mt===0)break t;mt--,z|=nt[X++]<<P,P+=8}if(ht-=Et,H.total_out+=ht,R.total+=ht,ht&&(H.adler=R.check=R.flags?u(R.check,$,ht,vt-ht):o(R.check,$,ht,vt-ht)),ht=Et,(R.flags?z:A(z))!==R.check){H.msg="incorrect data check",R.mode=30;break}P=z=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;P<32;){if(mt===0)break t;mt--,z+=nt[X++]<<P,P+=8}if(z!==(4294967295&R.total)){H.msg="incorrect length check",R.mode=30;break}P=z=0}R.mode=29;case 29:gt=1;break t;case 30:gt=-3;break t;case 31:return-4;case 32:default:return v}return H.next_out=vt,H.avail_out=Et,H.next_in=X,H.avail_in=mt,R.hold=z,R.bits=P,(R.wsize||ht!==H.avail_out&&R.mode<30&&(R.mode<27||it!==4))&&ut(H,H.output,H.next_out,ht-H.avail_out)?(R.mode=31,-4):(at-=H.avail_in,ht-=H.avail_out,H.total_in+=at,H.total_out+=ht,R.total+=ht,R.wrap&&ht&&(H.adler=R.check=R.flags?u(R.check,$,ht,H.next_out-ht):o(R.check,$,ht,H.next_out-ht)),H.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(at==0&&ht===0||it===4)&&gt===b&&(gt=-5),gt)},r.inflateEnd=function(H){if(!H||!H.state)return v;var it=H.state;return it.window&&(it.window=null),H.state=null,b},r.inflateGetHeader=function(H,it){var R;return H&&H.state?(2&(R=H.state).wrap)==0?v:((R.head=it).done=!1,b):v},r.inflateSetDictionary=function(H,it){var R,nt=it.length;return H&&H.state?(R=H.state).wrap!==0&&R.mode!==11?v:R.mode===11&&o(1,it,nt,0)!==R.check?-3:ut(H,it,nt,nt)?(R.mode=31,-4):(R.havedict=1,b):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,i,r){var a=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(m,p,b,v,w,x,_,A){var E,C,N,D,F,B,Y,j,et,ut=A.bits,H=0,it=0,R=0,nt=0,$=0,X=0,vt=0,mt=0,Et=0,z=0,P=null,at=0,ht=new a.Buf16(16),pt=new a.Buf16(16),Bt=null,Lt=0;for(H=0;H<=15;H++)ht[H]=0;for(it=0;it<v;it++)ht[p[b+it]]++;for($=ut,nt=15;1<=nt&&ht[nt]===0;nt--);if(nt<$&&($=nt),nt===0)return w[x++]=20971520,w[x++]=20971520,A.bits=1,0;for(R=1;R<nt&&ht[R]===0;R++);for($<R&&($=R),H=mt=1;H<=15;H++)if(mt<<=1,(mt-=ht[H])<0)return-1;if(0<mt&&(m===0||nt!==1))return-1;for(pt[1]=0,H=1;H<15;H++)pt[H+1]=pt[H]+ht[H];for(it=0;it<v;it++)p[b+it]!==0&&(_[pt[p[b+it]]++]=it);if(B=m===0?(P=Bt=_,19):m===1?(P=o,at-=257,Bt=u,Lt-=257,256):(P=h,Bt=f,-1),H=R,F=x,vt=it=z=0,N=-1,D=(Et=1<<(X=$))-1,m===1&&852<Et||m===2&&592<Et)return 1;for(;;){for(Y=H-vt,et=_[it]<B?(j=0,_[it]):_[it]>B?(j=Bt[Lt+_[it]],P[at+_[it]]):(j=96,0),E=1<<H-vt,R=C=1<<X;w[F+(z>>vt)+(C-=E)]=Y<<24|j<<16|et|0,C!==0;);for(E=1<<H-1;z&E;)E>>=1;if(E!==0?(z&=E-1,z+=E):z=0,it++,--ht[H]==0){if(H===nt)break;H=p[b+_[it]]}if($<H&&(z&D)!==N){for(vt===0&&(vt=$),F+=R,mt=1<<(X=H-vt);X+vt<nt&&!((mt-=ht[X+vt])<=0);)X++,mt<<=1;if(Et+=1<<X,m===1&&852<Et||m===2&&592<Et)return 1;w[N=z&D]=$<<24|X<<16|F-x|0}}return z!==0&&(w[F+z]=H-vt<<24|64<<16|0),A.bits=$,0}},{"../utils/common":41}],51:[function(e,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,i,r){var a=e("../utils/common"),o=0,u=1;function h(U){for(var J=U.length;0<=--J;)U[J]=0}var f=0,m=29,p=256,b=p+1+m,v=30,w=19,x=2*b+1,_=15,A=16,E=7,C=256,N=16,D=17,F=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],et=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ut=new Array(2*(b+2));h(ut);var H=new Array(2*v);h(H);var it=new Array(512);h(it);var R=new Array(256);h(R);var nt=new Array(m);h(nt);var $,X,vt,mt=new Array(v);function Et(U,J,wt,_t,lt){this.static_tree=U,this.extra_bits=J,this.extra_base=wt,this.elems=_t,this.max_length=lt,this.has_stree=U&&U.length}function z(U,J){this.dyn_tree=U,this.max_code=0,this.stat_desc=J}function P(U){return U<256?it[U]:it[256+(U>>>7)]}function at(U,J){U.pending_buf[U.pending++]=255&J,U.pending_buf[U.pending++]=J>>>8&255}function ht(U,J,wt){U.bi_valid>A-wt?(U.bi_buf|=J<<U.bi_valid&65535,at(U,U.bi_buf),U.bi_buf=J>>A-U.bi_valid,U.bi_valid+=wt-A):(U.bi_buf|=J<<U.bi_valid&65535,U.bi_valid+=wt)}function pt(U,J,wt){ht(U,wt[2*J],wt[2*J+1])}function Bt(U,J){for(var wt=0;wt|=1&U,U>>>=1,wt<<=1,0<--J;);return wt>>>1}function Lt(U,J,wt){var _t,lt,Rt=new Array(_+1),Ot=0;for(_t=1;_t<=_;_t++)Rt[_t]=Ot=Ot+wt[_t-1]<<1;for(lt=0;lt<=J;lt++){var Dt=U[2*lt+1];Dt!==0&&(U[2*lt]=Bt(Rt[Dt]++,Dt))}}function Ht(U){var J;for(J=0;J<b;J++)U.dyn_ltree[2*J]=0;for(J=0;J<v;J++)U.dyn_dtree[2*J]=0;for(J=0;J<w;J++)U.bl_tree[2*J]=0;U.dyn_ltree[2*C]=1,U.opt_len=U.static_len=0,U.last_lit=U.matches=0}function jt(U){8<U.bi_valid?at(U,U.bi_buf):0<U.bi_valid&&(U.pending_buf[U.pending++]=U.bi_buf),U.bi_buf=0,U.bi_valid=0}function xe(U,J,wt,_t){var lt=2*J,Rt=2*wt;return U[lt]<U[Rt]||U[lt]===U[Rt]&&_t[J]<=_t[wt]}function we(U,J,wt){for(var _t=U.heap[wt],lt=wt<<1;lt<=U.heap_len&&(lt<U.heap_len&&xe(J,U.heap[lt+1],U.heap[lt],U.depth)&&lt++,!xe(J,_t,U.heap[lt],U.depth));)U.heap[wt]=U.heap[lt],wt=lt,lt<<=1;U.heap[wt]=_t}function Qe(U,J,wt){var _t,lt,Rt,Ot,Dt=0;if(U.last_lit!==0)for(;_t=U.pending_buf[U.d_buf+2*Dt]<<8|U.pending_buf[U.d_buf+2*Dt+1],lt=U.pending_buf[U.l_buf+Dt],Dt++,_t===0?pt(U,lt,J):(pt(U,(Rt=R[lt])+p+1,J),(Ot=B[Rt])!==0&&ht(U,lt-=nt[Rt],Ot),pt(U,Rt=P(--_t),wt),(Ot=Y[Rt])!==0&&ht(U,_t-=mt[Rt],Ot)),Dt<U.last_lit;);pt(U,C,J)}function oi(U,J){var wt,_t,lt,Rt=J.dyn_tree,Ot=J.stat_desc.static_tree,Dt=J.stat_desc.has_stree,Kt=J.stat_desc.elems,Ne=-1;for(U.heap_len=0,U.heap_max=x,wt=0;wt<Kt;wt++)Rt[2*wt]!==0?(U.heap[++U.heap_len]=Ne=wt,U.depth[wt]=0):Rt[2*wt+1]=0;for(;U.heap_len<2;)Rt[2*(lt=U.heap[++U.heap_len]=Ne<2?++Ne:0)]=1,U.depth[lt]=0,U.opt_len--,Dt&&(U.static_len-=Ot[2*lt+1]);for(J.max_code=Ne,wt=U.heap_len>>1;1<=wt;wt--)we(U,Rt,wt);for(lt=Kt;wt=U.heap[1],U.heap[1]=U.heap[U.heap_len--],we(U,Rt,1),_t=U.heap[1],U.heap[--U.heap_max]=wt,U.heap[--U.heap_max]=_t,Rt[2*lt]=Rt[2*wt]+Rt[2*_t],U.depth[lt]=(U.depth[wt]>=U.depth[_t]?U.depth[wt]:U.depth[_t])+1,Rt[2*wt+1]=Rt[2*_t+1]=lt,U.heap[1]=lt++,we(U,Rt,1),2<=U.heap_len;);U.heap[--U.heap_max]=U.heap[1],(function(le,Bi){var Wn,Zi,vr,ze,fi,Wi,He=Bi.dyn_tree,pa=Bi.max_code,go=Bi.stat_desc.static_tree,bo=Bi.stat_desc.has_stree,Zr=Bi.stat_desc.extra_bits,yr=Bi.stat_desc.extra_base,kn=Bi.stat_desc.max_length,Qi=0;for(ze=0;ze<=_;ze++)le.bl_count[ze]=0;for(He[2*le.heap[le.heap_max]+1]=0,Wn=le.heap_max+1;Wn<x;Wn++)kn<(ze=He[2*He[2*(Zi=le.heap[Wn])+1]+1]+1)&&(ze=kn,Qi++),He[2*Zi+1]=ze,pa<Zi||(le.bl_count[ze]++,fi=0,yr<=Zi&&(fi=Zr[Zi-yr]),Wi=He[2*Zi],le.opt_len+=Wi*(ze+fi),bo&&(le.static_len+=Wi*(go[2*Zi+1]+fi)));if(Qi!==0){do{for(ze=kn-1;le.bl_count[ze]===0;)ze--;le.bl_count[ze]--,le.bl_count[ze+1]+=2,le.bl_count[kn]--,Qi-=2}while(0<Qi);for(ze=kn;ze!==0;ze--)for(Zi=le.bl_count[ze];Zi!==0;)pa<(vr=le.heap[--Wn])||(He[2*vr+1]!==ze&&(le.opt_len+=(ze-He[2*vr+1])*He[2*vr],He[2*vr+1]=ze),Zi--)}})(U,J),Lt(Rt,Ne,U.bl_count)}function M(U,J,wt){var _t,lt,Rt=-1,Ot=J[1],Dt=0,Kt=7,Ne=4;for(Ot===0&&(Kt=138,Ne=3),J[2*(wt+1)+1]=65535,_t=0;_t<=wt;_t++)lt=Ot,Ot=J[2*(_t+1)+1],++Dt<Kt&&lt===Ot||(Dt<Ne?U.bl_tree[2*lt]+=Dt:lt!==0?(lt!==Rt&&U.bl_tree[2*lt]++,U.bl_tree[2*N]++):Dt<=10?U.bl_tree[2*D]++:U.bl_tree[2*F]++,Rt=lt,Ne=(Dt=0)===Ot?(Kt=138,3):lt===Ot?(Kt=6,3):(Kt=7,4))}function gt(U,J,wt){var _t,lt,Rt=-1,Ot=J[1],Dt=0,Kt=7,Ne=4;for(Ot===0&&(Kt=138,Ne=3),_t=0;_t<=wt;_t++)if(lt=Ot,Ot=J[2*(_t+1)+1],!(++Dt<Kt&&lt===Ot)){if(Dt<Ne)for(;pt(U,lt,U.bl_tree),--Dt!=0;);else lt!==0?(lt!==Rt&&(pt(U,lt,U.bl_tree),Dt--),pt(U,N,U.bl_tree),ht(U,Dt-3,2)):Dt<=10?(pt(U,D,U.bl_tree),ht(U,Dt-3,3)):(pt(U,F,U.bl_tree),ht(U,Dt-11,7));Rt=lt,Ne=(Dt=0)===Ot?(Kt=138,3):lt===Ot?(Kt=6,3):(Kt=7,4)}}h(mt);var dt=!1;function G(U,J,wt,_t){ht(U,(f<<1)+(_t?1:0),3),(function(lt,Rt,Ot,Dt){jt(lt),at(lt,Ot),at(lt,~Ot),a.arraySet(lt.pending_buf,lt.window,Rt,Ot,lt.pending),lt.pending+=Ot})(U,J,wt)}r._tr_init=function(U){dt||((function(){var J,wt,_t,lt,Rt,Ot=new Array(_+1);for(lt=_t=0;lt<m-1;lt++)for(nt[lt]=_t,J=0;J<1<<B[lt];J++)R[_t++]=lt;for(R[_t-1]=lt,lt=Rt=0;lt<16;lt++)for(mt[lt]=Rt,J=0;J<1<<Y[lt];J++)it[Rt++]=lt;for(Rt>>=7;lt<v;lt++)for(mt[lt]=Rt<<7,J=0;J<1<<Y[lt]-7;J++)it[256+Rt++]=lt;for(wt=0;wt<=_;wt++)Ot[wt]=0;for(J=0;J<=143;)ut[2*J+1]=8,J++,Ot[8]++;for(;J<=255;)ut[2*J+1]=9,J++,Ot[9]++;for(;J<=279;)ut[2*J+1]=7,J++,Ot[7]++;for(;J<=287;)ut[2*J+1]=8,J++,Ot[8]++;for(Lt(ut,b+1,Ot),J=0;J<v;J++)H[2*J+1]=5,H[2*J]=Bt(J,5);$=new Et(ut,B,p+1,b,_),X=new Et(H,Y,0,v,_),vt=new Et(new Array(0),j,0,w,E)})(),dt=!0),U.l_desc=new z(U.dyn_ltree,$),U.d_desc=new z(U.dyn_dtree,X),U.bl_desc=new z(U.bl_tree,vt),U.bi_buf=0,U.bi_valid=0,Ht(U)},r._tr_stored_block=G,r._tr_flush_block=function(U,J,wt,_t){var lt,Rt,Ot=0;0<U.level?(U.strm.data_type===2&&(U.strm.data_type=(function(Dt){var Kt,Ne=4093624447;for(Kt=0;Kt<=31;Kt++,Ne>>>=1)if(1&Ne&&Dt.dyn_ltree[2*Kt]!==0)return o;if(Dt.dyn_ltree[18]!==0||Dt.dyn_ltree[20]!==0||Dt.dyn_ltree[26]!==0)return u;for(Kt=32;Kt<p;Kt++)if(Dt.dyn_ltree[2*Kt]!==0)return u;return o})(U)),oi(U,U.l_desc),oi(U,U.d_desc),Ot=(function(Dt){var Kt;for(M(Dt,Dt.dyn_ltree,Dt.l_desc.max_code),M(Dt,Dt.dyn_dtree,Dt.d_desc.max_code),oi(Dt,Dt.bl_desc),Kt=w-1;3<=Kt&&Dt.bl_tree[2*et[Kt]+1]===0;Kt--);return Dt.opt_len+=3*(Kt+1)+5+5+4,Kt})(U),lt=U.opt_len+3+7>>>3,(Rt=U.static_len+3+7>>>3)<=lt&&(lt=Rt)):lt=Rt=wt+5,wt+4<=lt&&J!==-1?G(U,J,wt,_t):U.strategy===4||Rt===lt?(ht(U,2+(_t?1:0),3),Qe(U,ut,H)):(ht(U,4+(_t?1:0),3),(function(Dt,Kt,Ne,le){var Bi;for(ht(Dt,Kt-257,5),ht(Dt,Ne-1,5),ht(Dt,le-4,4),Bi=0;Bi<le;Bi++)ht(Dt,Dt.bl_tree[2*et[Bi]+1],3);gt(Dt,Dt.dyn_ltree,Kt-1),gt(Dt,Dt.dyn_dtree,Ne-1)})(U,U.l_desc.max_code+1,U.d_desc.max_code+1,Ot+1),Qe(U,U.dyn_ltree,U.dyn_dtree)),Ht(U),_t&&jt(U)},r._tr_tally=function(U,J,wt){return U.pending_buf[U.d_buf+2*U.last_lit]=J>>>8&255,U.pending_buf[U.d_buf+2*U.last_lit+1]=255&J,U.pending_buf[U.l_buf+U.last_lit]=255&wt,U.last_lit++,J===0?U.dyn_ltree[2*wt]++:(U.matches++,J--,U.dyn_ltree[2*(R[wt]+p+1)]++,U.dyn_dtree[2*P(J)]++),U.last_lit===U.lit_bufsize-1},r._tr_align=function(U){ht(U,2,3),pt(U,C,ut),(function(J){J.bi_valid===16?(at(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)})(U)}},{"../utils/common":41}],53:[function(e,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,i,r){(function(a){(function(o,u){if(!o.setImmediate){var h,f,m,p,b=1,v={},w=!1,x=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,h={}.toString.call(o.process)==="[object process]"?function(N){process.nextTick(function(){E(N)})}:(function(){if(o.postMessage&&!o.importScripts){var N=!0,D=o.onmessage;return o.onmessage=function(){N=!1},o.postMessage("","*"),o.onmessage=D,N}})()?(p="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",C,!1):o.attachEvent("onmessage",C),function(N){o.postMessage(p+N,"*")}):o.MessageChannel?((m=new MessageChannel).port1.onmessage=function(N){E(N.data)},function(N){m.port2.postMessage(N)}):x&&"onreadystatechange"in x.createElement("script")?(f=x.documentElement,function(N){var D=x.createElement("script");D.onreadystatechange=function(){E(N),D.onreadystatechange=null,f.removeChild(D),D=null},f.appendChild(D)}):function(N){setTimeout(E,0,N)},_.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var D=new Array(arguments.length-1),F=0;F<D.length;F++)D[F]=arguments[F+1];var B={callback:N,args:D};return v[b]=B,h(b),b++},_.clearImmediate=A}function A(N){delete v[N]}function E(N){if(w)setTimeout(E,0,N);else{var D=v[N];if(D){w=!0;try{(function(F){var B=F.callback,Y=F.args;switch(Y.length){case 0:B();break;case 1:B(Y[0]);break;case 2:B(Y[0],Y[1]);break;case 3:B(Y[0],Y[1],Y[2]);break;default:B.apply(u,Y)}})(D)}finally{A(N),w=!1}}}}function C(N){N.source===o&&typeof N.data=="string"&&N.data.indexOf(p)===0&&E(+N.data.slice(p.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof l0<"u"?l0:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ld)),Ld.exports}var D7=R7();const N7=$y(D7),O7={title_slide:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');
        :root {
            --bg-color-dark: #0f172a; --text-color-dark: #f1f5f9; --accent-color-dark: #38bdf8; --sub-text-color-dark: #94a3b8;
            --bg-color-light: #F8FAFC; --text-color-light: #1E293B; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 80px; 
            background: var(--bg-color); color: var(--text-color); 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: flex-start; /* 左揃え */
            text-align: left; 
        }
        h1 { font-size: 80px; font-weight: 900; margin: 0; line-height: 1.3; }
        p { font-size: 28px; margin: 24px 0 0; color: var(--sub-text-color); font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
        <p>{summary}</p>
    </div>
</body>
</html>`,agenda:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        ol { padding-left: 50px; margin: 0; }
        li { font-size: 32px; color: var(--sub-text-color); line-height: 2.0; /* 行間を広めに */ margin-bottom: 15px; font-weight: 400; }
        li::marker { color: var(--accent-color); font-weight: 700; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <ol>{agenda_items_html}</ol>
    </div>
</body>
</html>`,section_header:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@900&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #f1f5f9; --accent-color-dark: #38bdf8;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 80px; 
            background: var(--bg-color); 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: flex-start; /* 左揃え */
        }
        h1 { 
            font-size: 96px; font-weight: 900; color: var(--text-color); 
            margin: 0; line-height: 1.2; 
            border-left: 10px solid var(--accent-color); /* アクセントの縦線 */
            padding-left: 40px; 
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
    </div>
</body>
</html>`,content_basic:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { padding-left: 20px; overflow: hidden; /* ★追加: 万が一はみ出た場合にレイアウト崩れを防ぐ */}
        ul { 
            padding-left: 0; /* ★修正: 標準インデントをリセット */
            margin: 0; 
            list-style-type: none; /* ★修正: 標準マーカーを削除 */
        }
        li { 
            font-size: 22px; /* ★修正: 24px -> 22px に変更 */
            color: var(--sub-text-color); 
            line-height: 1.7; /* ★修正: 1.8 -> 1.7 に変更 */
            margin-bottom: 12px; /* ★修正: 15px -> 12px に変更 */
            font-weight: 400; 
            white-space: pre-wrap;
            position: relative;
            padding-left: 1.5em;
        }
        li[data-level="0"]::before { /* ★修正: li::before から変更 (レベル0を明示) */
            content: '●';
            color: var(--accent-color);
            font-size: 0.8em;
            position: absolute;
            left: 0.2em;
            top: 0.15em;
        }
        li[data-level="1"]::before {
            content: '○';
            color: var(--accent-color); /* ★追加: 念のため色を指定 */
            font-size: 0.7em;
            position: absolute; /* ★追加: 念のため指定 */
            left: 0.25em;
            top: 0.2em;
        }
        li[data-level="2"]::before,
        li[data-level="3"]::before,
        li[data-level="4"]::before {
            content: '■';
            color: var(--accent-color); /* ★追加: 念のため色を指定 */
            font-size: 0.6em;
            position: absolute; /* ★追加: 念のため指定 */
            left: 0.3em;
            top: 0.3em;
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <ul>{items_html}</ul>
        </div>
    </div>
</body>
</html>`,content_with_diagram:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { display: grid; grid-template-columns: 40% 60%; gap: 40px; flex-grow: 1; align-items: center; }
        
        .content { 
            font-size: 22px; 
            line-height: 1.7; /* ★修正: 基準となる行間を 1.7 に設定 */
            color: var(--sub-text-color); 
            /* white-space: pre-wrap; */ /* ★削除: markedがpタグを生成するため不要 */
            font-weight: 400; 
            display: flex; 
            flex-direction: column; 
            justify-content: flex-start;
            /* ★追加: はみ出し防止 */
            height: 100%;
            overflow: hidden;
        }

        /* ▼▼▼ 修正（ここから追加） ▼▼▼ */
        /* marked.parse() が生成するタグのスタイルリセット */
        .content p {
            margin: 0 0 16px 0; /* 段落下のマージンを16pxに固定 */
            line-height: 1.7;
        }
        .content p:last-child {
            margin-bottom: 0; /* 最後の要素の余白を削除 */
        }
        .content ul {
            margin: 0 0 16px 0; /* 箇条書きブロックのマージン */
            padding-left: 1.5em; /* 箇条書きのインデント */
            list-style-type: none; /* デフォルトの黒丸を削除 */
        }
        .content li {
            margin: 0 0 12px 0; /* 項目間のマージン */
            line-height: 1.7;
            position: relative;
            padding-left: 0.5em;
        }
        .content li::before {
            content: '●'; /* content_basic と同じカスタムビュレット */
            color: var(--accent-color);
            font-size: 0.8em;
            position: absolute;
            left: -1.2em;
            top: 0.15em;
        }
        .content strong {
            font-weight: 700;
            color: var(--text-color); /* AIが強調した部分を目立たせる */
        }
        /* ▲▲▲ 修正（ここまで） ▲▲▲ */
        
        #infographic-slot { display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; }
        #infographic-slot svg {
            width: 100%; /* max-width から変更 */
            height: 100%; /* max-height から変更 */
            object-fit: contain; /* アスペクト比を維持 */
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <div class="content">{content}</div>
            <div id="infographic-slot">{infographic_svg}</div>
        </div>
    </div>
</body>
</html>`,three_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1; --card-bg-color-dark: #334155;
            --bg-color-light: #F8FAFC; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569; --card-bg-color-light: #FFFFFF;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); --card-bg-color: var(--card-bg-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: flex; justify-content: space-around; gap: 30px; align-items: stretch; }
        .point { 
            background: var(--card-bg-color); 
            border-radius: 8px; 
            padding: 25px; flex: 1; 
            border-top: 4px solid var(--accent-color); 
            display: flex; flex-direction: column; align-items: center; text-align: center; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.05); /* 薄い影 */
        }
        .point-icon { height: 120px; width: 100%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; color: var(--accent-color); }
        .point-icon svg {
            width: 80px;  /* SVGの幅を80pxに指定 */
            height: 80px; /* SVGの高さを80pxに指定 */
        }
        h2 { font-size: 26px; color: var(--text-color); margin: 0 0 15px; font-weight: 700; }
        p { font-size: 18px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_3_svg}</div>
                <h2>{point_3_title}</h2>
                <p>{point_3_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,vertical_steps:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #94a3b8;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .steps-container { position: relative; padding-left: 80px; }
        .timeline { position: absolute; left: 30px; top: 15px; bottom: 15px; width: 4px; background-color: var(--accent-color); opacity: 0.3; }
        .step { position: relative; margin-bottom: 25px; }
        .step-marker { position: absolute; left: -52px; top: 5px; width: 24px; height: 24px; background-color: var(--accent-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--bg-color-light); font-weight: 700; font-size: 14px; }
        body.theme-dark .step-marker { color: var(--bg-color-dark); }
        h2 { font-size: 28px; color: var(--text-color); margin: 0 0 8px; font-weight: 700; }
        p { font-size: 20px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="steps-container">
            <div class="timeline"></div>
            {items_html}
        </div>
    </div>
</body>
</html>`,comparison:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; flex-grow: 1; }
        .column { padding: 0; }
        .column h2 { font-size: 28px; color: var(--text-color); margin: 0 0 20px; font-weight: 700; text-align: center; }
        .column ul { padding-left: 30px; margin: 0; }
        .column li { font-size: 20px; color: var(--sub-text-color); line-height: 1.8; margin-bottom: 12px; font-weight: 400; white-space: pre-wrap; }
        .column li::marker { color: var(--accent-color); font-size: 1.2em; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <div class="column">
                <h2>{col_1_title}</h2>
                <ul>{col_1_items_html}</ul>
            </div>
            <div class="column">
                <h2>{col_2_title}</h2>
                <ul>{col_2_items_html}</ul>
            </div>
        </div>
    </div>
</body>
</html>`,summary_or_thankyou:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;900&display=swap');
        :root {
            --bg-color-dark: #0f172a; --text-color-dark: #f1f5f9; --accent-color-dark: #38bdf8; --sub-text-color-dark: #94a3b8;
            --bg-color-light: #F8FAFC; --text-color-light: #1E293B; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 80px; 
            background: var(--bg-color); color: var(--text-color); 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center; /* 中央揃え */
            text-align: center; 
        }
        h1 { font-size: 72px; font-weight: 900; margin: 0; line-height: 1.3; color: var(--accent-color); }
        p { font-size: 24px; margin: 24px 0 0; color: var(--sub-text-color); font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
        <p>{summary}</p>
    </div>
</body>
</html>`,table_basic:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        .table-container { 
            width: 100%; 
            height: calc(100% - 100px); /* ヘッダーの高さを引いた分 */
            overflow: hidden; /* スクロールバーはなし */
        }
        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed; /* 列幅を固定し、はみ出しを防ぐ */
        }
        th, td {
            border: 1px solid var(--sub-text-color);
            padding: 10px;
            font-size: 18px;
            color: var(--sub-text-color);
            word-wrap: break-word; /* セル内でテキストを改行 */
            text-align: left;
        }
        th {
            background-color: var(--accent-color);
            color: var(--bg-color-light);
            font-weight: 700;
        }
        body.theme-dark th { color: var(--bg-color-dark); }
        tr:nth-child(even) { 
            background-color: rgba(128, 128, 128, 0.1);
        }
        body.theme-light tr:nth-child(even) {
             background-color: #f8f9fa;
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="table-container">
            <table>
                {table_html}
            </table>
        </div>
    </div>
</body>
</html>`},z7={title_slide:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@700;900&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; overflow: hidden; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        h1 { font-size: 100px; font-weight: 900; margin: 0; line-height: 1.3; color: var(--accent-color-2); text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
        p { font-size: 32px; margin: 20px 0 0; color: var(--sub-text-color); font-weight: 700; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
        <p>{summary}</p>
    </div>
</body>
</html>`,agenda:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        ol { padding-left: 50px; }
        li { font-size: 34px; color: var(--sub-text-color); line-height: 1.8; margin-bottom: 15px; font-weight: 700; }
        li::marker { color: var(--accent-color); font-weight: 900; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <ol>{agenda_items_html}</ol>
    </div>
</body>
</html>`,section_header:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@900&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--accent-color-3); color: var(--text-color); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        h1 { font-size: 110px; font-weight: 900; color: var(--text-color); margin: 0; line-height: 1.2; padding: 20px 40px; background: var(--bg-color); border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
    </div>
</body>
</html>`,quote:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 80px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; justify-content: center; align-items: center; }
        blockquote { margin: 0; padding: 0; border-left: 10px solid var(--accent-color); padding-left: 40px; }
        p { font-size: 52px; font-weight: 700; color: var(--text-color); margin: 0; }
        footer { font-size: 28px; color: var(--text-color); margin-top: 30px; align-self: flex-end; font-weight: 700; padding: 10px 20px; background: var(--accent-color-3); border-radius: 10px; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <blockquote>
            <p>“{title}”</p>
        </blockquote>
        <footer>{summary}</footer>
    </div>
</body>
</html>`,content_left_infographic_right:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 30px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; flex-grow: 1; }
        .content { font-size: 24px; line-height: 1.8; color: var(--sub-text-color); white-space: pre-wrap; font-weight: 400; }
        #infographic-slot { display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <div class="content">{content}</div>
            <div id="infographic-slot">{infographic_svg}</div>
        </div>
    </div>
</body>
</html>`,two_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: flex; justify-content: space-around; gap: 40px; align-items: stretch; }
        .point { background: var(--card-bg-color); border-radius: 16px; padding: 30px; flex: 1; border-top: 8px solid var(--accent-color-2); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .point-icon { height: 150px; width: 100%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; }
        h2 { font-size: 30px; color: var(--text-color); margin: 0 0 15px; font-weight: 700; }
        p { font-size: 22px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,three_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: flex; justify-content: space-around; gap: 30px; align-items: stretch; }
        .point { background: var(--card-bg-color); border-radius: 16px; padding: 25px; flex: 1; border-top: 8px solid var(--accent-color-2); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .point-icon { height: 140px; width: 100%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; }
        h2 { font-size: 28px; color: var(--text-color); margin: 0 0 15px; font-weight: 700; }
        p { font-size: 20px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_3_svg}</div>
                <h2>{point_3_title}</h2>
                <p>{point_3_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,four_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 30px; }
        h1 { font-size: 44px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; gap: 25px; flex-grow: 1; }
        .point { background: var(--card-bg-color); border-radius: 16px; padding: 20px; border-top: 8px solid var(--accent-color-2); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .point-icon { height: 80px; width: 100%; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; }
        h2 { font-size: 24px; color: var(--text-color); margin: 0 0 10px; font-weight: 700; }
        p { font-size: 18px; line-height: 1.6; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_3_svg}</div>
                <h2>{point_3_title}</h2>
                <p>{point_3_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_4_svg}</div>
                <h2>{point_4_title}</h2>
                <p>{point_4_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,vertical_steps:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .steps-container { position: relative; padding-left: 60px; }
        .timeline { position: absolute; left: 20px; top: 15px; bottom: 15px; width: 8px; background-color: var(--accent-color); opacity: 0.3; border-radius: 4px; }
        .step { position: relative; margin-bottom: 25px; }
        .step-marker { position: absolute; left: -48px; top: 0px; width: 36px; height: 36px; background-color: var(--accent-color-2); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--bg-color); font-weight: 700; font-size: 18px; border: 4px solid var(--bg-color); box-shadow: 0 0 0 4px var(--accent-color-2); }
        h2 { font-size: 30px; color: var(--text-color); margin: 0 0 8px; font-weight: 700; }
        p { font-size: 22px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="steps-container">
            <div class="timeline"></div>
            {items_html}
        </div>
    </div>
</body>
</html>`,icon_list:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .list-container { display: flex; flex-direction: column; gap: 30px; }
        .list-item { display: flex; align-items: center; gap: 25px; }
        .item-icon { flex-shrink: 0; width: 72px; height: 72px; color: var(--accent-color); background: var(--card-bg-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; padding: 10px; box-sizing: border-box; }
        .item-icon svg { width: 48px; height: 48px; }
        .item-content h2 { font-size: 28px; color: var(--text-color); margin: 0 0 8px; font-weight: 700; }
        .item-content p { font-size: 22px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="list-container">
            {items_html}
        </div>
    </div>
</body>
</html>`},Dl={standard:{name:"スタンダード (ビジネス)",templates:O7},pop:{name:"ポップ",templates:z7}};function jf(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var fa=jf();function Nb(l){fa=l}var Sl={exec:()=>null};function De(l,t=""){let e=typeof l=="string"?l:l.source,i={replace:(r,a)=>{let o=typeof a=="string"?a:a.source;return o=o.replace(Vi.caret,"$1"),e=e.replace(r,o),i},getRegex:()=>new RegExp(e,t)};return i}var Vi={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:l=>new RegExp(`^( {0,3}${l})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}#`),htmlBeginRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}<(?:[a-z].*>|!--)`,"i")},L7=/^(?:[ \t]*(?:\n|$))+/,B7=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,I7=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,jl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,F7=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Gf=/(?:[*+-]|\d{1,9}[.)])/,Ob=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,zb=De(Ob).replace(/bull/g,Gf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),P7=De(Ob).replace(/bull/g,Gf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),qf=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,U7=/^[^\n]+/,$f=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,H7=De(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",$f).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),j7=De(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Gf).getRegex(),iu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Vf=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,G7=De("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Vf).replace("tag",iu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Lb=De(qf).replace("hr",jl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",iu).getRegex(),q7=De(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Lb).getRegex(),Yf={blockquote:q7,code:B7,def:H7,fences:I7,heading:F7,hr:jl,html:G7,lheading:zb,list:j7,newline:L7,paragraph:Lb,table:Sl,text:U7},a4=De("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",jl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",iu).getRegex(),$7={...Yf,lheading:P7,table:a4,paragraph:De(qf).replace("hr",jl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",a4).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",iu).getRegex()},V7={...Yf,html:De(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Vf).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Sl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:De(qf).replace("hr",jl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",zb).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Y7=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,X7=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Bb=/^( {2,}|\\)\n(?!\s*$)/,K7=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,nu=/[\p{P}\p{S}]/u,Xf=/[\s\p{P}\p{S}]/u,Ib=/[^\s\p{P}\p{S}]/u,Z7=De(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Xf).getRegex(),Fb=/(?!~)[\p{P}\p{S}]/u,W7=/(?!~)[\s\p{P}\p{S}]/u,Q7=/(?:[^\s\p{P}\p{S}]|~)/u,J7=De(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),Pb=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,t8=De(Pb,"u").replace(/punct/g,nu).getRegex(),e8=De(Pb,"u").replace(/punct/g,Fb).getRegex(),Ub="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",i8=De(Ub,"gu").replace(/notPunctSpace/g,Ib).replace(/punctSpace/g,Xf).replace(/punct/g,nu).getRegex(),n8=De(Ub,"gu").replace(/notPunctSpace/g,Q7).replace(/punctSpace/g,W7).replace(/punct/g,Fb).getRegex(),r8=De("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ib).replace(/punctSpace/g,Xf).replace(/punct/g,nu).getRegex(),s8=De(/\\(punct)/,"gu").replace(/punct/g,nu).getRegex(),a8=De(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),o8=De(Vf).replace("(?:-->|$)","-->").getRegex(),l8=De("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",o8).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),U0=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,c8=De(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",U0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Hb=De(/^!?\[(label)\]\[(ref)\]/).replace("label",U0).replace("ref",$f).getRegex(),jb=De(/^!?\[(ref)\](?:\[\])?/).replace("ref",$f).getRegex(),u8=De("reflink|nolink(?!\\()","g").replace("reflink",Hb).replace("nolink",jb).getRegex(),o4=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Kf={_backpedal:Sl,anyPunctuation:s8,autolink:a8,blockSkip:J7,br:Bb,code:X7,del:Sl,emStrongLDelim:t8,emStrongRDelimAst:i8,emStrongRDelimUnd:r8,escape:Y7,link:c8,nolink:jb,punctuation:Z7,reflink:Hb,reflinkSearch:u8,tag:l8,text:K7,url:Sl},h8={...Kf,link:De(/^!?\[(label)\]\((.*?)\)/).replace("label",U0).getRegex(),reflink:De(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",U0).getRegex()},hf={...Kf,emStrongRDelimAst:n8,emStrongLDelim:e8,url:De(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",o4).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:De(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",o4).getRegex()},d8={...hf,br:De(Bb).replace("{2,}","*").getRegex(),text:De(hf.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},x0={normal:Yf,gfm:$7,pedantic:V7},fl={normal:Kf,gfm:hf,breaks:d8,pedantic:h8},f8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l4=l=>f8[l];function lr(l,t){if(t){if(Vi.escapeTest.test(l))return l.replace(Vi.escapeReplace,l4)}else if(Vi.escapeTestNoEncode.test(l))return l.replace(Vi.escapeReplaceNoEncode,l4);return l}function c4(l){try{l=encodeURI(l).replace(Vi.percentDecode,"%")}catch{return null}return l}function u4(l,t){let e=l.replace(Vi.findPipe,(a,o,u)=>{let h=!1,f=o;for(;--f>=0&&u[f]==="\\";)h=!h;return h?"|":" |"}),i=e.split(Vi.splitPipe),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(Vi.slashPipe,"|");return i}function ml(l,t,e){let i=l.length;if(i===0)return"";let r=0;for(;r<i&&l.charAt(i-r-1)===t;)r++;return l.slice(0,i-r)}function m8(l,t){if(l.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<l.length;i++)if(l[i]==="\\")i++;else if(l[i]===t[0])e++;else if(l[i]===t[1]&&(e--,e<0))return i;return e>0?-2:-1}function h4(l,t,e,i,r){let a=t.href,o=t.title||null,u=l[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;let h={type:l[0].charAt(0)==="!"?"image":"link",raw:e,href:a,title:o,text:u,tokens:i.inlineTokens(u)};return i.state.inLink=!1,h}function p8(l,t,e){let i=l.match(e.other.indentCodeCompensation);if(i===null)return t;let r=i[1];return t.split(`
`).map(a=>{let o=a.match(e.other.beginningSpace);if(o===null)return a;let[u]=o;return u.length>=r.length?a.slice(r.length):a}).join(`
`)}var H0=class{options;rules;lexer;constructor(l){this.options=l||fa}space(l){let t=this.rules.block.newline.exec(l);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(l){let t=this.rules.block.code.exec(l);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:ml(e,`
`)}}}fences(l){let t=this.rules.block.fences.exec(l);if(t){let e=t[0],i=p8(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(l){let t=this.rules.block.heading.exec(l);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let i=ml(e,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(e=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(l){let t=this.rules.block.hr.exec(l);if(t)return{type:"hr",raw:ml(t[0],`
`)}}blockquote(l){let t=this.rules.block.blockquote.exec(l);if(t){let e=ml(t[0],`
`).split(`
`),i="",r="",a=[];for(;e.length>0;){let o=!1,u=[],h;for(h=0;h<e.length;h++)if(this.rules.other.blockquoteStart.test(e[h]))u.push(e[h]),o=!0;else if(!o)u.push(e[h]);else break;e=e.slice(h);let f=u.join(`
`),m=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,r=r?`${r}
${m}`:m;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(m,a,!0),this.lexer.state.top=p,e.length===0)break;let b=a.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let v=b,w=v.raw+`
`+e.join(`
`),x=this.blockquote(w);a[a.length-1]=x,i=i.substring(0,i.length-v.raw.length)+x.raw,r=r.substring(0,r.length-v.text.length)+x.text;break}else if(b?.type==="list"){let v=b,w=v.raw+`
`+e.join(`
`),x=this.list(w);a[a.length-1]=x,i=i.substring(0,i.length-b.raw.length)+x.raw,r=r.substring(0,r.length-v.raw.length)+x.raw,e=w.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:r}}}list(l){let t=this.rules.block.list.exec(l);if(t){let e=t[1].trim(),i=e.length>1,r={type:"list",raw:"",ordered:i,start:i?+e.slice(0,-1):"",loose:!1,items:[]};e=i?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=i?e:"[*+-]");let a=this.rules.other.listItemRegex(e),o=!1;for(;l;){let h=!1,f="",m="";if(!(t=a.exec(l))||this.rules.block.hr.test(l))break;f=t[0],l=l.substring(f.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,A=>" ".repeat(3*A.length)),b=l.split(`
`,1)[0],v=!p.trim(),w=0;if(this.options.pedantic?(w=2,m=p.trimStart()):v?w=t[1].length+1:(w=t[2].search(this.rules.other.nonSpaceChar),w=w>4?1:w,m=p.slice(w),w+=t[1].length),v&&this.rules.other.blankLine.test(b)&&(f+=b+`
`,l=l.substring(b.length+1),h=!0),!h){let A=this.rules.other.nextBulletRegex(w),E=this.rules.other.hrRegex(w),C=this.rules.other.fencesBeginRegex(w),N=this.rules.other.headingBeginRegex(w),D=this.rules.other.htmlBeginRegex(w);for(;l;){let F=l.split(`
`,1)[0],B;if(b=F,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),B=b):B=b.replace(this.rules.other.tabCharGlobal,"    "),C.test(b)||N.test(b)||D.test(b)||A.test(b)||E.test(b))break;if(B.search(this.rules.other.nonSpaceChar)>=w||!b.trim())m+=`
`+B.slice(w);else{if(v||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(p)||N.test(p)||E.test(p))break;m+=`
`+b}!v&&!b.trim()&&(v=!0),f+=F+`
`,l=l.substring(F.length+1),p=B.slice(w)}}r.loose||(o?r.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(o=!0));let x=null,_;this.options.gfm&&(x=this.rules.other.listIsTask.exec(m),x&&(_=x[0]!=="[ ] ",m=m.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:f,task:!!x,checked:_,loose:!1,text:m,tokens:[]}),r.raw+=f}let u=r.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let h=0;h<r.items.length;h++)if(this.lexer.state.top=!1,r.items[h].tokens=this.lexer.blockTokens(r.items[h].text,[]),!r.loose){let f=r.items[h].tokens.filter(p=>p.type==="space"),m=f.length>0&&f.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=m}if(r.loose)for(let h=0;h<r.items.length;h++)r.items[h].loose=!0;return r}}html(l){let t=this.rules.block.html.exec(l);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(l){let t=this.rules.block.def.exec(l);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:r}}}table(l){let t=this.rules.block.table.exec(l);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=u4(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===i.length){for(let o of i)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<e.length;o++)a.header.push({text:e[o],tokens:this.lexer.inline(e[o]),header:!0,align:a.align[o]});for(let o of r)a.rows.push(u4(o,a.header.length).map((u,h)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:a.align[h]})));return a}}lheading(l){let t=this.rules.block.lheading.exec(l);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(l){let t=this.rules.block.paragraph.exec(l);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(l){let t=this.rules.block.text.exec(l);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(l){let t=this.rules.inline.escape.exec(l);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(l){let t=this.rules.inline.tag.exec(l);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(l){let t=this.rules.inline.link.exec(l);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let a=ml(e.slice(0,-1),"\\");if((e.length-a.length)%2===0)return}else{let a=m8(t[2],"()");if(a===-2)return;if(a>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],r=a[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i=i.slice(1):i=i.slice(1,-1)),h4(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(l,t){let e;if((e=this.rules.inline.reflink.exec(l))||(e=this.rules.inline.nolink.exec(l))){let i=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[i.toLowerCase()];if(!r){let a=e[0].charAt(0);return{type:"text",raw:a,text:a}}return h4(e,r,e[0],this.lexer,this.rules)}}emStrong(l,t,e=""){let i=this.rules.inline.emStrongLDelim.exec(l);if(!(!i||i[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!e||this.rules.inline.punctuation.exec(e))){let r=[...i[0]].length-1,a,o,u=r,h=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,t=t.slice(-1*l.length+r);(i=f.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(o=[...a].length,i[3]||i[4]){u+=o;continue}else if((i[5]||i[6])&&r%3&&!((r+o)%3)){h+=o;continue}if(u-=o,u>0)continue;o=Math.min(o,o+u+h);let m=[...i[0]][0].length,p=l.slice(0,r+i.index+m+o);if(Math.min(r,o)%2){let v=p.slice(1,-1);return{type:"em",raw:p,text:v,tokens:this.lexer.inlineTokens(v)}}let b=p.slice(2,-2);return{type:"strong",raw:p,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(l){let t=this.rules.inline.code.exec(l);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(l){let t=this.rules.inline.br.exec(l);if(t)return{type:"br",raw:t[0]}}del(l){let t=this.rules.inline.del.exec(l);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(l){let t=this.rules.inline.autolink.exec(l);if(t){let e,i;return t[2]==="@"?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(l){let t;if(t=this.rules.inline.url.exec(l)){let e,i;if(t[2]==="@")e=t[0],i="mailto:"+e;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(r!==t[0]);e=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(l){let t=this.rules.inline.text.exec(l);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},Kn=class df{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||fa,this.options.tokenizer=this.options.tokenizer||new H0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:Vi,block:x0.normal,inline:fl.normal};this.options.pedantic?(e.block=x0.pedantic,e.inline=fl.pedantic):this.options.gfm&&(e.block=x0.gfm,this.options.breaks?e.inline=fl.breaks:e.inline=fl.gfm),this.tokenizer.rules=e}static get rules(){return{block:x0,inline:fl}}static lex(t,e){return new df(e).lex(t)}static lexInline(t,e){return new df(e).inlineTokens(t)}lex(t){t=t.replace(Vi.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){for(this.options.pedantic&&(t=t.replace(Vi.tabCharGlobal,"    ").replace(Vi.spaceLine,""));t;){let r;if(this.options.extensions?.block?.some(o=>(r=o.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))continue;if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length);let o=e.at(-1);r.raw.length===1&&o!==void 0?o.raw+=`
`:e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.at(-1).src=o.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},e.push(r));continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}let a=t;if(this.options.extensions?.startBlock){let o=1/0,u=t.slice(1),h;this.options.extensions.startBlock.forEach(f=>{h=f.call({lexer:this},u),typeof h=="number"&&h>=0&&(o=Math.min(o,h))}),o<1/0&&o>=0&&(a=t.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){let o=e.at(-1);i&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(r),i=a.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(r);continue}if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i=t,r=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)u.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let a=!1,o="";for(;t;){a||(o=""),a=!1;let u;if(this.options.extensions?.inline?.some(f=>(u=f.call({lexer:this},t,e))?(t=t.substring(u.raw.length),e.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);let f=e.at(-1);u.type==="text"&&f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):e.push(u);continue}if(u=this.tokenizer.emStrong(t,i,o)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),e.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),e.push(u);continue}let h=t;if(this.options.extensions?.startInline){let f=1/0,m=t.slice(1),p;this.options.extensions.startInline.forEach(b=>{p=b.call({lexer:this},m),typeof p=="number"&&p>=0&&(f=Math.min(f,p))}),f<1/0&&f>=0&&(h=t.substring(0,f+1))}if(u=this.tokenizer.inlineText(h)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),a=!0;let f=e.at(-1);f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):e.push(u);continue}if(t){let f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return e}},j0=class{options;parser;constructor(l){this.options=l||fa}space(l){return""}code({text:l,lang:t,escaped:e}){let i=(t||"").match(Vi.notSpaceStart)?.[0],r=l.replace(Vi.endingNewline,"")+`
`;return i?'<pre><code class="language-'+lr(i)+'">'+(e?r:lr(r,!0))+`</code></pre>
`:"<pre><code>"+(e?r:lr(r,!0))+`</code></pre>
`}blockquote({tokens:l}){return`<blockquote>
${this.parser.parse(l)}</blockquote>
`}html({text:l}){return l}def(l){return""}heading({tokens:l,depth:t}){return`<h${t}>${this.parser.parseInline(l)}</h${t}>
`}hr(l){return`<hr>
`}list(l){let t=l.ordered,e=l.start,i="";for(let o=0;o<l.items.length;o++){let u=l.items[o];i+=this.listitem(u)}let r=t?"ol":"ul",a=t&&e!==1?' start="'+e+'"':"";return"<"+r+a+`>
`+i+"</"+r+`>
`}listitem(l){let t="";if(l.task){let e=this.checkbox({checked:!!l.checked});l.loose?l.tokens[0]?.type==="paragraph"?(l.tokens[0].text=e+" "+l.tokens[0].text,l.tokens[0].tokens&&l.tokens[0].tokens.length>0&&l.tokens[0].tokens[0].type==="text"&&(l.tokens[0].tokens[0].text=e+" "+lr(l.tokens[0].tokens[0].text),l.tokens[0].tokens[0].escaped=!0)):l.tokens.unshift({type:"text",raw:e+" ",text:e+" ",escaped:!0}):t+=e+" "}return t+=this.parser.parse(l.tokens,!!l.loose),`<li>${t}</li>
`}checkbox({checked:l}){return"<input "+(l?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:l}){return`<p>${this.parser.parseInline(l)}</p>
`}table(l){let t="",e="";for(let r=0;r<l.header.length;r++)e+=this.tablecell(l.header[r]);t+=this.tablerow({text:e});let i="";for(let r=0;r<l.rows.length;r++){let a=l.rows[r];e="";for(let o=0;o<a.length;o++)e+=this.tablecell(a[o]);i+=this.tablerow({text:e})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:l}){return`<tr>
${l}</tr>
`}tablecell(l){let t=this.parser.parseInline(l.tokens),e=l.header?"th":"td";return(l.align?`<${e} align="${l.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:l}){return`<strong>${this.parser.parseInline(l)}</strong>`}em({tokens:l}){return`<em>${this.parser.parseInline(l)}</em>`}codespan({text:l}){return`<code>${lr(l,!0)}</code>`}br(l){return"<br>"}del({tokens:l}){return`<del>${this.parser.parseInline(l)}</del>`}link({href:l,title:t,tokens:e}){let i=this.parser.parseInline(e),r=c4(l);if(r===null)return i;l=r;let a='<a href="'+l+'"';return t&&(a+=' title="'+lr(t)+'"'),a+=">"+i+"</a>",a}image({href:l,title:t,text:e,tokens:i}){i&&(e=this.parser.parseInline(i,this.parser.textRenderer));let r=c4(l);if(r===null)return lr(e);l=r;let a=`<img src="${l}" alt="${e}"`;return t&&(a+=` title="${lr(t)}"`),a+=">",a}text(l){return"tokens"in l&&l.tokens?this.parser.parseInline(l.tokens):"escaped"in l&&l.escaped?l.text:lr(l.text)}},Zf=class{strong({text:l}){return l}em({text:l}){return l}codespan({text:l}){return l}del({text:l}){return l}html({text:l}){return l}text({text:l}){return l}link({text:l}){return""+l}image({text:l}){return""+l}br(){return""}},Zn=class ff{options;renderer;textRenderer;constructor(t){this.options=t||fa,this.options.renderer=this.options.renderer||new j0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Zf}static parse(t,e){return new ff(e).parse(t)}static parseInline(t,e){return new ff(e).parseInline(t)}parse(t,e=!0){let i="";for(let r=0;r<t.length;r++){let a=t[r];if(this.options.extensions?.renderers?.[a.type]){let u=a,h=this.options.extensions.renderers[u.type].call({parser:this},u);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(u.type)){i+=h||"";continue}}let o=a;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"def":{i+=this.renderer.def(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let u=o,h=this.renderer.text(u);for(;r+1<t.length&&t[r+1].type==="text";)u=t[++r],h+=`
`+this.renderer.text(u);e?i+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):i+=h;continue}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return i}parseInline(t,e=this.renderer){let i="";for(let r=0;r<t.length;r++){let a=t[r];if(this.options.extensions?.renderers?.[a.type]){let u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=u||"";continue}}let o=a;switch(o.type){case"escape":{i+=e.text(o);break}case"html":{i+=e.html(o);break}case"link":{i+=e.link(o);break}case"image":{i+=e.image(o);break}case"strong":{i+=e.strong(o);break}case"em":{i+=e.em(o);break}case"codespan":{i+=e.codespan(o);break}case"br":{i+=e.br(o);break}case"del":{i+=e.del(o);break}case"text":{i+=e.text(o);break}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return i}},vl=class{options;block;constructor(t){this.options=t||fa}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Kn.lex:Kn.lexInline}provideParser(){return this.block?Zn.parse:Zn.parseInline}},g8=class{defaults=jf();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Zn;Renderer=j0;TextRenderer=Zf;Lexer=Kn;Tokenizer=H0;Hooks=vl;constructor(...l){this.use(...l)}walkTokens(l,t){let e=[];for(let i of l)switch(e=e.concat(t.call(this,i)),i.type){case"table":{let r=i;for(let a of r.header)e=e.concat(this.walkTokens(a.tokens,t));for(let a of r.rows)for(let o of a)e=e.concat(this.walkTokens(o.tokens,t));break}case"list":{let r=i;e=e.concat(this.walkTokens(r.items,t));break}default:{let r=i;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(a=>{let o=r[a].flat(1/0);e=e.concat(this.walkTokens(o,t))}):r.tokens&&(e=e.concat(this.walkTokens(r.tokens,t)))}}return e}use(...l){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return l.forEach(e=>{let i={...e};if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let a=t.renderers[r.name];a?t.renderers[r.name]=function(...o){let u=r.renderer.apply(this,o);return u===!1&&(u=a.apply(this,o)),u}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=t[r.level];a?a.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),i.extensions=t),e.renderer){let r=this.defaults.renderer||new j0(this.defaults);for(let a in e.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let o=a,u=e.renderer[o],h=r[o];r[o]=(...f)=>{let m=u.apply(r,f);return m===!1&&(m=h.apply(r,f)),m||""}}i.renderer=r}if(e.tokenizer){let r=this.defaults.tokenizer||new H0(this.defaults);for(let a in e.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let o=a,u=e.tokenizer[o],h=r[o];r[o]=(...f)=>{let m=u.apply(r,f);return m===!1&&(m=h.apply(r,f)),m}}i.tokenizer=r}if(e.hooks){let r=this.defaults.hooks||new vl;for(let a in e.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let o=a,u=e.hooks[o],h=r[o];vl.passThroughHooks.has(a)?r[o]=f=>{if(this.defaults.async&&vl.passThroughHooksRespectAsync.has(a))return(async()=>{let p=await u.call(r,f);return h.call(r,p)})();let m=u.call(r,f);return h.call(r,m)}:r[o]=(...f)=>{if(this.defaults.async)return(async()=>{let p=await u.apply(r,f);return p===!1&&(p=await h.apply(r,f)),p})();let m=u.apply(r,f);return m===!1&&(m=h.apply(r,f)),m}}i.hooks=r}if(e.walkTokens){let r=this.defaults.walkTokens,a=e.walkTokens;i.walkTokens=function(o){let u=[];return u.push(a.call(this,o)),r&&(u=u.concat(r.call(this,o))),u}}this.defaults={...this.defaults,...i}}),this}setOptions(l){return this.defaults={...this.defaults,...l},this}lexer(l,t){return Kn.lex(l,t??this.defaults)}parser(l,t){return Zn.parse(l,t??this.defaults)}parseMarkdown(l){return(t,e)=>{let i={...e},r={...this.defaults,...i},a=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=l),r.async)return(async()=>{let o=r.hooks?await r.hooks.preprocess(t):t,u=await(r.hooks?await r.hooks.provideLexer():l?Kn.lex:Kn.lexInline)(o,r),h=r.hooks?await r.hooks.processAllTokens(u):u;r.walkTokens&&await Promise.all(this.walkTokens(h,r.walkTokens));let f=await(r.hooks?await r.hooks.provideParser():l?Zn.parse:Zn.parseInline)(h,r);return r.hooks?await r.hooks.postprocess(f):f})().catch(a);try{r.hooks&&(t=r.hooks.preprocess(t));let o=(r.hooks?r.hooks.provideLexer():l?Kn.lex:Kn.lexInline)(t,r);r.hooks&&(o=r.hooks.processAllTokens(o)),r.walkTokens&&this.walkTokens(o,r.walkTokens);let u=(r.hooks?r.hooks.provideParser():l?Zn.parse:Zn.parseInline)(o,r);return r.hooks&&(u=r.hooks.postprocess(u)),u}catch(o){return a(o)}}}onError(l,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,l){let i="<p>An error occurred:</p><pre>"+lr(e.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(e);throw e}}},ua=new g8;function pe(l,t){return ua.parse(l,t)}pe.options=pe.setOptions=function(l){return ua.setOptions(l),pe.defaults=ua.defaults,Nb(pe.defaults),pe};pe.getDefaults=jf;pe.defaults=fa;pe.use=function(...l){return ua.use(...l),pe.defaults=ua.defaults,Nb(pe.defaults),pe};pe.walkTokens=function(l,t){return ua.walkTokens(l,t)};pe.parseInline=ua.parseInline;pe.Parser=Zn;pe.parser=Zn.parse;pe.Renderer=j0;pe.TextRenderer=Zf;pe.Lexer=Kn;pe.lexer=Kn.lex;pe.Tokenizer=H0;pe.Hooks=vl;pe.parse=pe;pe.options;pe.setOptions;pe.use;pe.walkTokens;pe.parseInline;Zn.parse;Kn.lex;class hn{constructor(t,e,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=i}static range(t,e){return e?!t||!t.loc||!e.loc||t.loc.lexer!==e.loc.lexer?null:new hn(t.loc.lexer,t.loc.start,e.loc.end):t&&t.loc}}class An{constructor(t,e){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=e}range(t,e){return new An(e,hn.range(this,t))}}class Mt{constructor(t,e){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var i="KaTeX parse error: "+t,r,a,o=e&&e.loc;if(o&&o.start<=o.end){var u=o.lexer.input;r=o.start,a=o.end,r===u.length?i+=" at end of input: ":i+=" at position "+(r+1)+": ";var h=u.slice(r,a).replace(/[^]/g,"$&̲"),f;r>15?f="…"+u.slice(r-15,r):f=u.slice(0,r);var m;a+15<u.length?m=u.slice(a,a+15)+"…":m=u.slice(a),i+=f+h+m}var p=new Error(i);return p.name="ParseError",p.__proto__=Mt.prototype,p.position=r,r!=null&&a!=null&&(p.length=a-r),p.rawMessage=t,p}}Mt.prototype.__proto__=Error.prototype;var b8=function(t,e){return t===void 0?e:t},v8=/([A-Z])/g,y8=function(t){return t.replace(v8,"-$1").toLowerCase()},x8={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},w8=/[&><"']/g;function S8(l){return String(l).replace(w8,t=>x8[t])}var Gb=function l(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?l(t.body[0]):t:t.type==="font"?l(t.body):t},A8=function(t){var e=Gb(t);return e.type==="mathord"||e.type==="textord"||e.type==="atom"},_8=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},k8=function(t){var e=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return e?e[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(e[1])?null:e[1].toLowerCase():"_relative"},Re={deflt:b8,escape:S8,hyphenate:y8,getBaseElem:Gb,isCharacterBox:A8,protocolFromUrl:k8},z0={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:l=>"#"+l},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(l,t)=>(t.push(l),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:l=>Math.max(0,l),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:l=>Math.max(0,l),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:l=>Math.max(0,l),cli:"-e, --max-expand <n>",cliProcessor:l=>l==="Infinity"?1/0:parseInt(l)},globalGroup:{type:"boolean",cli:!1}};function E8(l){if(l.default)return l.default;var t=l.type,e=Array.isArray(t)?t[0]:t;if(typeof e!="string")return e.enum[0];switch(e){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Wf{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var e in z0)if(z0.hasOwnProperty(e)){var i=z0[e];this[e]=t[e]!==void 0?i.processor?i.processor(t[e]):t[e]:E8(i)}}reportNonstrict(t,e,i){var r=this.strict;if(typeof r=="function"&&(r=r(t,e,i)),!(!r||r==="ignore")){if(r===!0||r==="error")throw new Mt("LaTeX-incompatible input and strict mode is set to 'error': "+(e+" ["+t+"]"),i);r==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(e+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+e+" ["+t+"]"))}}useStrictBehavior(t,e,i){var r=this.strict;if(typeof r=="function")try{r=r(t,e,i)}catch{r="error"}return!r||r==="ignore"?!1:r===!0||r==="error"?!0:r==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(e+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+e+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var e=Re.protocolFromUrl(t.url);if(e==null)return!1;t.protocol=e}var i=typeof this.trust=="function"?this.trust(t):this.trust;return!!i}}class As{constructor(t,e,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=i}sup(){return hr[T8[this.id]]}sub(){return hr[C8[this.id]]}fracNum(){return hr[M8[this.id]]}fracDen(){return hr[R8[this.id]]}cramp(){return hr[D8[this.id]]}text(){return hr[N8[this.id]]}isTight(){return this.size>=2}}var Qf=0,G0=1,co=2,qr=3,Nl=4,Pn=5,fo=6,Yi=7,hr=[new As(Qf,0,!1),new As(G0,0,!0),new As(co,1,!1),new As(qr,1,!0),new As(Nl,2,!1),new As(Pn,2,!0),new As(fo,3,!1),new As(Yi,3,!0)],T8=[Nl,Pn,Nl,Pn,fo,Yi,fo,Yi],C8=[Pn,Pn,Pn,Pn,Yi,Yi,Yi,Yi],M8=[co,qr,Nl,Pn,fo,Yi,fo,Yi],R8=[qr,qr,Pn,Pn,Yi,Yi,Yi,Yi],D8=[G0,G0,qr,qr,Pn,Pn,Yi,Yi],N8=[Qf,G0,co,qr,co,qr,co,qr],ee={DISPLAY:hr[Qf],TEXT:hr[co],SCRIPT:hr[Nl],SCRIPTSCRIPT:hr[fo]},mf=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function O8(l){for(var t=0;t<mf.length;t++)for(var e=mf[t],i=0;i<e.blocks.length;i++){var r=e.blocks[i];if(l>=r[0]&&l<=r[1])return e.name}return null}var L0=[];mf.forEach(l=>l.blocks.forEach(t=>L0.push(...t)));function qb(l){for(var t=0;t<L0.length;t+=2)if(l>=L0[t]&&l<=L0[t+1])return!0;return!1}var Qa=80,z8=function(t,e){return"M95,"+(622+t+e)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},L8=function(t,e){return"M263,"+(601+t+e)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},B8=function(t,e){return"M983 "+(10+t+e)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},I8=function(t,e){return"M424,"+(2398+t+e)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+e+`
h400000v`+(40+t)+"h-400000z"},F8=function(t,e){return"M473,"+(2713+t+e)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"},P8=function(t){var e=t/2;return"M400000 "+t+" H0 L"+e+" 0 l65 45 L145 "+(t-80)+" H400000z"},U8=function(t,e,i){var r=i-54-e-t;return"M702 "+(t+e)+"H400000"+(40+t)+`
H742v`+r+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+e+"H400000v"+(40+t)+"H742z"},H8=function(t,e,i){e=1e3*e;var r="";switch(t){case"sqrtMain":r=z8(e,Qa);break;case"sqrtSize1":r=L8(e,Qa);break;case"sqrtSize2":r=B8(e,Qa);break;case"sqrtSize3":r=I8(e,Qa);break;case"sqrtSize4":r=F8(e,Qa);break;case"sqrtTall":r=U8(e,Qa,i)}return r},j8=function(t,e){switch(t){case"⎜":return"M291 0 H417 V"+e+" H291z M291 0 H417 V"+e+" H291z";case"∣":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z";case"∥":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z"+("M367 0 H410 V"+e+" H367z M367 0 H410 V"+e+" H367z");case"⎟":return"M457 0 H583 V"+e+" H457z M457 0 H583 V"+e+" H457z";case"⎢":return"M319 0 H403 V"+e+" H319z M319 0 H403 V"+e+" H319z";case"⎥":return"M263 0 H347 V"+e+" H263z M263 0 H347 V"+e+" H263z";case"⎪":return"M384 0 H504 V"+e+" H384z M384 0 H504 V"+e+" H384z";case"⏐":return"M312 0 H355 V"+e+" H312z M312 0 H355 V"+e+" H312z";case"‖":return"M257 0 H300 V"+e+" H257z M257 0 H300 V"+e+" H257z"+("M478 0 H521 V"+e+" H478z M478 0 H521 V"+e+" H478z");default:return""}},d4={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},G8=function(t,e){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+e+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+e+" v1759 h84z";case"vert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+" v585 h43z";case"doublevert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+` v585 h43z
M367 15 v585 v`+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+e+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+e+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+e+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v602 h84z
M403 1759 V0 H319 V1759 v`+e+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v602 h84z
M347 1759 V0 h-84 V1759 v`+e+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(e+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(e+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(e+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(e+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Gl{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t}toMarkup(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t}toText(){var t=e=>e.toText();return this.children.map(t).join("")}}var dr={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},w0={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},f4={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function q8(l,t){dr[l]=t}function Jf(l,t,e){if(!dr[t])throw new Error("Font metrics not found for font: "+t+".");var i=l.charCodeAt(0),r=dr[t][i];if(!r&&l[0]in f4&&(i=f4[l[0]].charCodeAt(0),r=dr[t][i]),!r&&e==="text"&&qb(i)&&(r=dr[t][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}var Bd={};function $8(l){var t;if(l>=5?t=0:l>=3?t=1:t=2,!Bd[t]){var e=Bd[t]={cssEmPerMu:w0.quad[t]/18};for(var i in w0)w0.hasOwnProperty(i)&&(e[i]=w0[i][t])}return Bd[t]}var V8=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],m4=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],p4=function(t,e){return e.size<2?t:V8[t-1][e.size-1]};class jr{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||jr.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=m4[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var e={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return new jr(e)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:p4(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:m4[t-1]})}havingBaseStyle(t){t=t||this.style.text();var e=p4(jr.BASESIZE,t);return this.size===e&&this.textSize===jr.BASESIZE&&this.style===t?this:this.extend({style:t,size:e})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==jr.BASESIZE?["sizing","reset-size"+this.size,"size"+jr.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=$8(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}jr.BASESIZE=6;var pf={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Y8={ex:!0,em:!0,mu:!0},$b=function(t){return typeof t!="string"&&(t=t.unit),t in pf||t in Y8||t==="ex"},ei=function(t,e){var i;if(t.unit in pf)i=pf[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if(t.unit==="mu")i=e.fontMetrics().cssEmPerMu;else{var r;if(e.style.isTight()?r=e.havingStyle(e.style.text()):r=e,t.unit==="ex")i=r.fontMetrics().xHeight;else if(t.unit==="em")i=r.fontMetrics().quad;else throw new Mt("Invalid unit: '"+t.unit+"'");r!==e&&(i*=r.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*i,e.maxSize)},Nt=function(t){return+t.toFixed(4)+"em"},Ns=function(t){return t.filter(e=>e).join(" ")},Vb=function(t,e,i){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},e){e.style.isTight()&&this.classes.push("mtight");var r=e.getColor();r&&(this.style.color=r)}},Yb=function(t){var e=document.createElement(t);e.className=Ns(this.classes);for(var i in this.style)this.style.hasOwnProperty(i)&&(e.style[i]=this.style[i]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&e.setAttribute(r,this.attributes[r]);for(var a=0;a<this.children.length;a++)e.appendChild(this.children[a].toNode());return e},X8=/[\s"'>/=\x00-\x1f]/,Xb=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+Re.escape(Ns(this.classes))+'"');var i="";for(var r in this.style)this.style.hasOwnProperty(r)&&(i+=Re.hyphenate(r)+":"+this.style[r]+";");i&&(e+=' style="'+Re.escape(i)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(X8.test(a))throw new Mt("Invalid attribute name '"+a+"'");e+=" "+a+'="'+Re.escape(this.attributes[a])+'"'}e+=">";for(var o=0;o<this.children.length;o++)e+=this.children[o].toMarkup();return e+="</"+t+">",e};class ql{constructor(t,e,i,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Vb.call(this,t,i,r),this.children=e||[]}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return this.classes.includes(t)}toNode(){return Yb.call(this,"span")}toMarkup(){return Xb.call(this,"span")}}class tm{constructor(t,e,i,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Vb.call(this,e,r),this.children=i||[],this.setAttribute("href",t)}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return this.classes.includes(t)}toNode(){return Yb.call(this,"a")}toMarkup(){return Xb.call(this,"a")}}class K8{constructor(t,e,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=i}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var e in this.style)this.style.hasOwnProperty(e)&&(t.style[e]=this.style[e]);return t}toMarkup(){var t='<img src="'+Re.escape(this.src)+'"'+(' alt="'+Re.escape(this.alt)+'"'),e="";for(var i in this.style)this.style.hasOwnProperty(i)&&(e+=Re.hyphenate(i)+":"+this.style[i]+";");return e&&(t+=' style="'+Re.escape(e)+'"'),t+="'/>",t}}var Z8={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class Hn{constructor(t,e,i,r,a,o,u,h){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=i||0,this.italic=r||0,this.skew=a||0,this.width=o||0,this.classes=u||[],this.style=h||{},this.maxFontSize=0;var f=O8(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=Z8[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),e=null;this.italic>0&&(e=document.createElement("span"),e.style.marginRight=Nt(this.italic)),this.classes.length>0&&(e=e||document.createElement("span"),e.className=Ns(this.classes));for(var i in this.style)this.style.hasOwnProperty(i)&&(e=e||document.createElement("span"),e.style[i]=this.style[i]);return e?(e.appendChild(t),e):t}toMarkup(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=Re.escape(Ns(this.classes)),e+='"');var i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(var r in this.style)this.style.hasOwnProperty(r)&&(i+=Re.hyphenate(r)+":"+this.style[r]+";");i&&(t=!0,e+=' style="'+Re.escape(i)+'"');var a=Re.escape(this.text);return t?(e+=">",e+=a,e+="</span>",e):a}}class Vr{constructor(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&e.setAttribute(i,this.attributes[i]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+Re.escape(this.attributes[e])+'"');t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</svg>",t}}class Os{constructor(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",d4[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+Re.escape(this.alternate)+'"/>':'<path d="'+Re.escape(d4[this.pathName])+'"/>'}}class gf{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"line");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&e.setAttribute(i,this.attributes[i]);return e}toMarkup(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+Re.escape(this.attributes[e])+'"');return t+="/>",t}}function g4(l){if(l instanceof Hn)return l;throw new Error("Expected symbolNode but got "+String(l)+".")}function W8(l){if(l instanceof ql)return l;throw new Error("Expected span<HtmlDomNode> but got "+String(l)+".")}var Q8={bin:1,close:1,inner:1,open:1,punct:1,rel:1},J8={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},$e={math:{},text:{}};function S(l,t,e,i,r,a){$e[l][r]={font:t,group:e,replace:i},a&&i&&($e[l][i]=$e[l][r])}var k="math",kt="text",O="main",q="ams",We="accent-token",Ut="bin",Ki="close",mo="inner",te="mathord",wi="op-token",_n="open",ru="punct",V="rel",Kr="spacing",Q="textord";S(k,O,V,"≡","\\equiv",!0);S(k,O,V,"≺","\\prec",!0);S(k,O,V,"≻","\\succ",!0);S(k,O,V,"∼","\\sim",!0);S(k,O,V,"⊥","\\perp");S(k,O,V,"⪯","\\preceq",!0);S(k,O,V,"⪰","\\succeq",!0);S(k,O,V,"≃","\\simeq",!0);S(k,O,V,"∣","\\mid",!0);S(k,O,V,"≪","\\ll",!0);S(k,O,V,"≫","\\gg",!0);S(k,O,V,"≍","\\asymp",!0);S(k,O,V,"∥","\\parallel");S(k,O,V,"⋈","\\bowtie",!0);S(k,O,V,"⌣","\\smile",!0);S(k,O,V,"⊑","\\sqsubseteq",!0);S(k,O,V,"⊒","\\sqsupseteq",!0);S(k,O,V,"≐","\\doteq",!0);S(k,O,V,"⌢","\\frown",!0);S(k,O,V,"∋","\\ni",!0);S(k,O,V,"∝","\\propto",!0);S(k,O,V,"⊢","\\vdash",!0);S(k,O,V,"⊣","\\dashv",!0);S(k,O,V,"∋","\\owns");S(k,O,ru,".","\\ldotp");S(k,O,ru,"⋅","\\cdotp");S(k,O,Q,"#","\\#");S(kt,O,Q,"#","\\#");S(k,O,Q,"&","\\&");S(kt,O,Q,"&","\\&");S(k,O,Q,"ℵ","\\aleph",!0);S(k,O,Q,"∀","\\forall",!0);S(k,O,Q,"ℏ","\\hbar",!0);S(k,O,Q,"∃","\\exists",!0);S(k,O,Q,"∇","\\nabla",!0);S(k,O,Q,"♭","\\flat",!0);S(k,O,Q,"ℓ","\\ell",!0);S(k,O,Q,"♮","\\natural",!0);S(k,O,Q,"♣","\\clubsuit",!0);S(k,O,Q,"℘","\\wp",!0);S(k,O,Q,"♯","\\sharp",!0);S(k,O,Q,"♢","\\diamondsuit",!0);S(k,O,Q,"ℜ","\\Re",!0);S(k,O,Q,"♡","\\heartsuit",!0);S(k,O,Q,"ℑ","\\Im",!0);S(k,O,Q,"♠","\\spadesuit",!0);S(k,O,Q,"§","\\S",!0);S(kt,O,Q,"§","\\S");S(k,O,Q,"¶","\\P",!0);S(kt,O,Q,"¶","\\P");S(k,O,Q,"†","\\dag");S(kt,O,Q,"†","\\dag");S(kt,O,Q,"†","\\textdagger");S(k,O,Q,"‡","\\ddag");S(kt,O,Q,"‡","\\ddag");S(kt,O,Q,"‡","\\textdaggerdbl");S(k,O,Ki,"⎱","\\rmoustache",!0);S(k,O,_n,"⎰","\\lmoustache",!0);S(k,O,Ki,"⟯","\\rgroup",!0);S(k,O,_n,"⟮","\\lgroup",!0);S(k,O,Ut,"∓","\\mp",!0);S(k,O,Ut,"⊖","\\ominus",!0);S(k,O,Ut,"⊎","\\uplus",!0);S(k,O,Ut,"⊓","\\sqcap",!0);S(k,O,Ut,"∗","\\ast");S(k,O,Ut,"⊔","\\sqcup",!0);S(k,O,Ut,"◯","\\bigcirc",!0);S(k,O,Ut,"∙","\\bullet",!0);S(k,O,Ut,"‡","\\ddagger");S(k,O,Ut,"≀","\\wr",!0);S(k,O,Ut,"⨿","\\amalg");S(k,O,Ut,"&","\\And");S(k,O,V,"⟵","\\longleftarrow",!0);S(k,O,V,"⇐","\\Leftarrow",!0);S(k,O,V,"⟸","\\Longleftarrow",!0);S(k,O,V,"⟶","\\longrightarrow",!0);S(k,O,V,"⇒","\\Rightarrow",!0);S(k,O,V,"⟹","\\Longrightarrow",!0);S(k,O,V,"↔","\\leftrightarrow",!0);S(k,O,V,"⟷","\\longleftrightarrow",!0);S(k,O,V,"⇔","\\Leftrightarrow",!0);S(k,O,V,"⟺","\\Longleftrightarrow",!0);S(k,O,V,"↦","\\mapsto",!0);S(k,O,V,"⟼","\\longmapsto",!0);S(k,O,V,"↗","\\nearrow",!0);S(k,O,V,"↩","\\hookleftarrow",!0);S(k,O,V,"↪","\\hookrightarrow",!0);S(k,O,V,"↘","\\searrow",!0);S(k,O,V,"↼","\\leftharpoonup",!0);S(k,O,V,"⇀","\\rightharpoonup",!0);S(k,O,V,"↙","\\swarrow",!0);S(k,O,V,"↽","\\leftharpoondown",!0);S(k,O,V,"⇁","\\rightharpoondown",!0);S(k,O,V,"↖","\\nwarrow",!0);S(k,O,V,"⇌","\\rightleftharpoons",!0);S(k,q,V,"≮","\\nless",!0);S(k,q,V,"","\\@nleqslant");S(k,q,V,"","\\@nleqq");S(k,q,V,"⪇","\\lneq",!0);S(k,q,V,"≨","\\lneqq",!0);S(k,q,V,"","\\@lvertneqq");S(k,q,V,"⋦","\\lnsim",!0);S(k,q,V,"⪉","\\lnapprox",!0);S(k,q,V,"⊀","\\nprec",!0);S(k,q,V,"⋠","\\npreceq",!0);S(k,q,V,"⋨","\\precnsim",!0);S(k,q,V,"⪹","\\precnapprox",!0);S(k,q,V,"≁","\\nsim",!0);S(k,q,V,"","\\@nshortmid");S(k,q,V,"∤","\\nmid",!0);S(k,q,V,"⊬","\\nvdash",!0);S(k,q,V,"⊭","\\nvDash",!0);S(k,q,V,"⋪","\\ntriangleleft");S(k,q,V,"⋬","\\ntrianglelefteq",!0);S(k,q,V,"⊊","\\subsetneq",!0);S(k,q,V,"","\\@varsubsetneq");S(k,q,V,"⫋","\\subsetneqq",!0);S(k,q,V,"","\\@varsubsetneqq");S(k,q,V,"≯","\\ngtr",!0);S(k,q,V,"","\\@ngeqslant");S(k,q,V,"","\\@ngeqq");S(k,q,V,"⪈","\\gneq",!0);S(k,q,V,"≩","\\gneqq",!0);S(k,q,V,"","\\@gvertneqq");S(k,q,V,"⋧","\\gnsim",!0);S(k,q,V,"⪊","\\gnapprox",!0);S(k,q,V,"⊁","\\nsucc",!0);S(k,q,V,"⋡","\\nsucceq",!0);S(k,q,V,"⋩","\\succnsim",!0);S(k,q,V,"⪺","\\succnapprox",!0);S(k,q,V,"≆","\\ncong",!0);S(k,q,V,"","\\@nshortparallel");S(k,q,V,"∦","\\nparallel",!0);S(k,q,V,"⊯","\\nVDash",!0);S(k,q,V,"⋫","\\ntriangleright");S(k,q,V,"⋭","\\ntrianglerighteq",!0);S(k,q,V,"","\\@nsupseteqq");S(k,q,V,"⊋","\\supsetneq",!0);S(k,q,V,"","\\@varsupsetneq");S(k,q,V,"⫌","\\supsetneqq",!0);S(k,q,V,"","\\@varsupsetneqq");S(k,q,V,"⊮","\\nVdash",!0);S(k,q,V,"⪵","\\precneqq",!0);S(k,q,V,"⪶","\\succneqq",!0);S(k,q,V,"","\\@nsubseteqq");S(k,q,Ut,"⊴","\\unlhd");S(k,q,Ut,"⊵","\\unrhd");S(k,q,V,"↚","\\nleftarrow",!0);S(k,q,V,"↛","\\nrightarrow",!0);S(k,q,V,"⇍","\\nLeftarrow",!0);S(k,q,V,"⇏","\\nRightarrow",!0);S(k,q,V,"↮","\\nleftrightarrow",!0);S(k,q,V,"⇎","\\nLeftrightarrow",!0);S(k,q,V,"△","\\vartriangle");S(k,q,Q,"ℏ","\\hslash");S(k,q,Q,"▽","\\triangledown");S(k,q,Q,"◊","\\lozenge");S(k,q,Q,"Ⓢ","\\circledS");S(k,q,Q,"®","\\circledR");S(kt,q,Q,"®","\\circledR");S(k,q,Q,"∡","\\measuredangle",!0);S(k,q,Q,"∄","\\nexists");S(k,q,Q,"℧","\\mho");S(k,q,Q,"Ⅎ","\\Finv",!0);S(k,q,Q,"⅁","\\Game",!0);S(k,q,Q,"‵","\\backprime");S(k,q,Q,"▲","\\blacktriangle");S(k,q,Q,"▼","\\blacktriangledown");S(k,q,Q,"■","\\blacksquare");S(k,q,Q,"⧫","\\blacklozenge");S(k,q,Q,"★","\\bigstar");S(k,q,Q,"∢","\\sphericalangle",!0);S(k,q,Q,"∁","\\complement",!0);S(k,q,Q,"ð","\\eth",!0);S(kt,O,Q,"ð","ð");S(k,q,Q,"╱","\\diagup");S(k,q,Q,"╲","\\diagdown");S(k,q,Q,"□","\\square");S(k,q,Q,"□","\\Box");S(k,q,Q,"◊","\\Diamond");S(k,q,Q,"¥","\\yen",!0);S(kt,q,Q,"¥","\\yen",!0);S(k,q,Q,"✓","\\checkmark",!0);S(kt,q,Q,"✓","\\checkmark");S(k,q,Q,"ℶ","\\beth",!0);S(k,q,Q,"ℸ","\\daleth",!0);S(k,q,Q,"ℷ","\\gimel",!0);S(k,q,Q,"ϝ","\\digamma",!0);S(k,q,Q,"ϰ","\\varkappa");S(k,q,_n,"┌","\\@ulcorner",!0);S(k,q,Ki,"┐","\\@urcorner",!0);S(k,q,_n,"└","\\@llcorner",!0);S(k,q,Ki,"┘","\\@lrcorner",!0);S(k,q,V,"≦","\\leqq",!0);S(k,q,V,"⩽","\\leqslant",!0);S(k,q,V,"⪕","\\eqslantless",!0);S(k,q,V,"≲","\\lesssim",!0);S(k,q,V,"⪅","\\lessapprox",!0);S(k,q,V,"≊","\\approxeq",!0);S(k,q,Ut,"⋖","\\lessdot");S(k,q,V,"⋘","\\lll",!0);S(k,q,V,"≶","\\lessgtr",!0);S(k,q,V,"⋚","\\lesseqgtr",!0);S(k,q,V,"⪋","\\lesseqqgtr",!0);S(k,q,V,"≑","\\doteqdot");S(k,q,V,"≓","\\risingdotseq",!0);S(k,q,V,"≒","\\fallingdotseq",!0);S(k,q,V,"∽","\\backsim",!0);S(k,q,V,"⋍","\\backsimeq",!0);S(k,q,V,"⫅","\\subseteqq",!0);S(k,q,V,"⋐","\\Subset",!0);S(k,q,V,"⊏","\\sqsubset",!0);S(k,q,V,"≼","\\preccurlyeq",!0);S(k,q,V,"⋞","\\curlyeqprec",!0);S(k,q,V,"≾","\\precsim",!0);S(k,q,V,"⪷","\\precapprox",!0);S(k,q,V,"⊲","\\vartriangleleft");S(k,q,V,"⊴","\\trianglelefteq");S(k,q,V,"⊨","\\vDash",!0);S(k,q,V,"⊪","\\Vvdash",!0);S(k,q,V,"⌣","\\smallsmile");S(k,q,V,"⌢","\\smallfrown");S(k,q,V,"≏","\\bumpeq",!0);S(k,q,V,"≎","\\Bumpeq",!0);S(k,q,V,"≧","\\geqq",!0);S(k,q,V,"⩾","\\geqslant",!0);S(k,q,V,"⪖","\\eqslantgtr",!0);S(k,q,V,"≳","\\gtrsim",!0);S(k,q,V,"⪆","\\gtrapprox",!0);S(k,q,Ut,"⋗","\\gtrdot");S(k,q,V,"⋙","\\ggg",!0);S(k,q,V,"≷","\\gtrless",!0);S(k,q,V,"⋛","\\gtreqless",!0);S(k,q,V,"⪌","\\gtreqqless",!0);S(k,q,V,"≖","\\eqcirc",!0);S(k,q,V,"≗","\\circeq",!0);S(k,q,V,"≜","\\triangleq",!0);S(k,q,V,"∼","\\thicksim");S(k,q,V,"≈","\\thickapprox");S(k,q,V,"⫆","\\supseteqq",!0);S(k,q,V,"⋑","\\Supset",!0);S(k,q,V,"⊐","\\sqsupset",!0);S(k,q,V,"≽","\\succcurlyeq",!0);S(k,q,V,"⋟","\\curlyeqsucc",!0);S(k,q,V,"≿","\\succsim",!0);S(k,q,V,"⪸","\\succapprox",!0);S(k,q,V,"⊳","\\vartriangleright");S(k,q,V,"⊵","\\trianglerighteq");S(k,q,V,"⊩","\\Vdash",!0);S(k,q,V,"∣","\\shortmid");S(k,q,V,"∥","\\shortparallel");S(k,q,V,"≬","\\between",!0);S(k,q,V,"⋔","\\pitchfork",!0);S(k,q,V,"∝","\\varpropto");S(k,q,V,"◀","\\blacktriangleleft");S(k,q,V,"∴","\\therefore",!0);S(k,q,V,"∍","\\backepsilon");S(k,q,V,"▶","\\blacktriangleright");S(k,q,V,"∵","\\because",!0);S(k,q,V,"⋘","\\llless");S(k,q,V,"⋙","\\gggtr");S(k,q,Ut,"⊲","\\lhd");S(k,q,Ut,"⊳","\\rhd");S(k,q,V,"≂","\\eqsim",!0);S(k,O,V,"⋈","\\Join");S(k,q,V,"≑","\\Doteq",!0);S(k,q,Ut,"∔","\\dotplus",!0);S(k,q,Ut,"∖","\\smallsetminus");S(k,q,Ut,"⋒","\\Cap",!0);S(k,q,Ut,"⋓","\\Cup",!0);S(k,q,Ut,"⩞","\\doublebarwedge",!0);S(k,q,Ut,"⊟","\\boxminus",!0);S(k,q,Ut,"⊞","\\boxplus",!0);S(k,q,Ut,"⋇","\\divideontimes",!0);S(k,q,Ut,"⋉","\\ltimes",!0);S(k,q,Ut,"⋊","\\rtimes",!0);S(k,q,Ut,"⋋","\\leftthreetimes",!0);S(k,q,Ut,"⋌","\\rightthreetimes",!0);S(k,q,Ut,"⋏","\\curlywedge",!0);S(k,q,Ut,"⋎","\\curlyvee",!0);S(k,q,Ut,"⊝","\\circleddash",!0);S(k,q,Ut,"⊛","\\circledast",!0);S(k,q,Ut,"⋅","\\centerdot");S(k,q,Ut,"⊺","\\intercal",!0);S(k,q,Ut,"⋒","\\doublecap");S(k,q,Ut,"⋓","\\doublecup");S(k,q,Ut,"⊠","\\boxtimes",!0);S(k,q,V,"⇢","\\dashrightarrow",!0);S(k,q,V,"⇠","\\dashleftarrow",!0);S(k,q,V,"⇇","\\leftleftarrows",!0);S(k,q,V,"⇆","\\leftrightarrows",!0);S(k,q,V,"⇚","\\Lleftarrow",!0);S(k,q,V,"↞","\\twoheadleftarrow",!0);S(k,q,V,"↢","\\leftarrowtail",!0);S(k,q,V,"↫","\\looparrowleft",!0);S(k,q,V,"⇋","\\leftrightharpoons",!0);S(k,q,V,"↶","\\curvearrowleft",!0);S(k,q,V,"↺","\\circlearrowleft",!0);S(k,q,V,"↰","\\Lsh",!0);S(k,q,V,"⇈","\\upuparrows",!0);S(k,q,V,"↿","\\upharpoonleft",!0);S(k,q,V,"⇃","\\downharpoonleft",!0);S(k,O,V,"⊶","\\origof",!0);S(k,O,V,"⊷","\\imageof",!0);S(k,q,V,"⊸","\\multimap",!0);S(k,q,V,"↭","\\leftrightsquigarrow",!0);S(k,q,V,"⇉","\\rightrightarrows",!0);S(k,q,V,"⇄","\\rightleftarrows",!0);S(k,q,V,"↠","\\twoheadrightarrow",!0);S(k,q,V,"↣","\\rightarrowtail",!0);S(k,q,V,"↬","\\looparrowright",!0);S(k,q,V,"↷","\\curvearrowright",!0);S(k,q,V,"↻","\\circlearrowright",!0);S(k,q,V,"↱","\\Rsh",!0);S(k,q,V,"⇊","\\downdownarrows",!0);S(k,q,V,"↾","\\upharpoonright",!0);S(k,q,V,"⇂","\\downharpoonright",!0);S(k,q,V,"⇝","\\rightsquigarrow",!0);S(k,q,V,"⇝","\\leadsto");S(k,q,V,"⇛","\\Rrightarrow",!0);S(k,q,V,"↾","\\restriction");S(k,O,Q,"‘","`");S(k,O,Q,"$","\\$");S(kt,O,Q,"$","\\$");S(kt,O,Q,"$","\\textdollar");S(k,O,Q,"%","\\%");S(kt,O,Q,"%","\\%");S(k,O,Q,"_","\\_");S(kt,O,Q,"_","\\_");S(kt,O,Q,"_","\\textunderscore");S(k,O,Q,"∠","\\angle",!0);S(k,O,Q,"∞","\\infty",!0);S(k,O,Q,"′","\\prime");S(k,O,Q,"△","\\triangle");S(k,O,Q,"Γ","\\Gamma",!0);S(k,O,Q,"Δ","\\Delta",!0);S(k,O,Q,"Θ","\\Theta",!0);S(k,O,Q,"Λ","\\Lambda",!0);S(k,O,Q,"Ξ","\\Xi",!0);S(k,O,Q,"Π","\\Pi",!0);S(k,O,Q,"Σ","\\Sigma",!0);S(k,O,Q,"Υ","\\Upsilon",!0);S(k,O,Q,"Φ","\\Phi",!0);S(k,O,Q,"Ψ","\\Psi",!0);S(k,O,Q,"Ω","\\Omega",!0);S(k,O,Q,"A","Α");S(k,O,Q,"B","Β");S(k,O,Q,"E","Ε");S(k,O,Q,"Z","Ζ");S(k,O,Q,"H","Η");S(k,O,Q,"I","Ι");S(k,O,Q,"K","Κ");S(k,O,Q,"M","Μ");S(k,O,Q,"N","Ν");S(k,O,Q,"O","Ο");S(k,O,Q,"P","Ρ");S(k,O,Q,"T","Τ");S(k,O,Q,"X","Χ");S(k,O,Q,"¬","\\neg",!0);S(k,O,Q,"¬","\\lnot");S(k,O,Q,"⊤","\\top");S(k,O,Q,"⊥","\\bot");S(k,O,Q,"∅","\\emptyset");S(k,q,Q,"∅","\\varnothing");S(k,O,te,"α","\\alpha",!0);S(k,O,te,"β","\\beta",!0);S(k,O,te,"γ","\\gamma",!0);S(k,O,te,"δ","\\delta",!0);S(k,O,te,"ϵ","\\epsilon",!0);S(k,O,te,"ζ","\\zeta",!0);S(k,O,te,"η","\\eta",!0);S(k,O,te,"θ","\\theta",!0);S(k,O,te,"ι","\\iota",!0);S(k,O,te,"κ","\\kappa",!0);S(k,O,te,"λ","\\lambda",!0);S(k,O,te,"μ","\\mu",!0);S(k,O,te,"ν","\\nu",!0);S(k,O,te,"ξ","\\xi",!0);S(k,O,te,"ο","\\omicron",!0);S(k,O,te,"π","\\pi",!0);S(k,O,te,"ρ","\\rho",!0);S(k,O,te,"σ","\\sigma",!0);S(k,O,te,"τ","\\tau",!0);S(k,O,te,"υ","\\upsilon",!0);S(k,O,te,"ϕ","\\phi",!0);S(k,O,te,"χ","\\chi",!0);S(k,O,te,"ψ","\\psi",!0);S(k,O,te,"ω","\\omega",!0);S(k,O,te,"ε","\\varepsilon",!0);S(k,O,te,"ϑ","\\vartheta",!0);S(k,O,te,"ϖ","\\varpi",!0);S(k,O,te,"ϱ","\\varrho",!0);S(k,O,te,"ς","\\varsigma",!0);S(k,O,te,"φ","\\varphi",!0);S(k,O,Ut,"∗","*",!0);S(k,O,Ut,"+","+");S(k,O,Ut,"−","-",!0);S(k,O,Ut,"⋅","\\cdot",!0);S(k,O,Ut,"∘","\\circ",!0);S(k,O,Ut,"÷","\\div",!0);S(k,O,Ut,"±","\\pm",!0);S(k,O,Ut,"×","\\times",!0);S(k,O,Ut,"∩","\\cap",!0);S(k,O,Ut,"∪","\\cup",!0);S(k,O,Ut,"∖","\\setminus",!0);S(k,O,Ut,"∧","\\land");S(k,O,Ut,"∨","\\lor");S(k,O,Ut,"∧","\\wedge",!0);S(k,O,Ut,"∨","\\vee",!0);S(k,O,Q,"√","\\surd");S(k,O,_n,"⟨","\\langle",!0);S(k,O,_n,"∣","\\lvert");S(k,O,_n,"∥","\\lVert");S(k,O,Ki,"?","?");S(k,O,Ki,"!","!");S(k,O,Ki,"⟩","\\rangle",!0);S(k,O,Ki,"∣","\\rvert");S(k,O,Ki,"∥","\\rVert");S(k,O,V,"=","=");S(k,O,V,":",":");S(k,O,V,"≈","\\approx",!0);S(k,O,V,"≅","\\cong",!0);S(k,O,V,"≥","\\ge");S(k,O,V,"≥","\\geq",!0);S(k,O,V,"←","\\gets");S(k,O,V,">","\\gt",!0);S(k,O,V,"∈","\\in",!0);S(k,O,V,"","\\@not");S(k,O,V,"⊂","\\subset",!0);S(k,O,V,"⊃","\\supset",!0);S(k,O,V,"⊆","\\subseteq",!0);S(k,O,V,"⊇","\\supseteq",!0);S(k,q,V,"⊈","\\nsubseteq",!0);S(k,q,V,"⊉","\\nsupseteq",!0);S(k,O,V,"⊨","\\models");S(k,O,V,"←","\\leftarrow",!0);S(k,O,V,"≤","\\le");S(k,O,V,"≤","\\leq",!0);S(k,O,V,"<","\\lt",!0);S(k,O,V,"→","\\rightarrow",!0);S(k,O,V,"→","\\to");S(k,q,V,"≱","\\ngeq",!0);S(k,q,V,"≰","\\nleq",!0);S(k,O,Kr," ","\\ ");S(k,O,Kr," ","\\space");S(k,O,Kr," ","\\nobreakspace");S(kt,O,Kr," ","\\ ");S(kt,O,Kr," "," ");S(kt,O,Kr," ","\\space");S(kt,O,Kr," ","\\nobreakspace");S(k,O,Kr,null,"\\nobreak");S(k,O,Kr,null,"\\allowbreak");S(k,O,ru,",",",");S(k,O,ru,";",";");S(k,q,Ut,"⊼","\\barwedge",!0);S(k,q,Ut,"⊻","\\veebar",!0);S(k,O,Ut,"⊙","\\odot",!0);S(k,O,Ut,"⊕","\\oplus",!0);S(k,O,Ut,"⊗","\\otimes",!0);S(k,O,Q,"∂","\\partial",!0);S(k,O,Ut,"⊘","\\oslash",!0);S(k,q,Ut,"⊚","\\circledcirc",!0);S(k,q,Ut,"⊡","\\boxdot",!0);S(k,O,Ut,"△","\\bigtriangleup");S(k,O,Ut,"▽","\\bigtriangledown");S(k,O,Ut,"†","\\dagger");S(k,O,Ut,"⋄","\\diamond");S(k,O,Ut,"⋆","\\star");S(k,O,Ut,"◃","\\triangleleft");S(k,O,Ut,"▹","\\triangleright");S(k,O,_n,"{","\\{");S(kt,O,Q,"{","\\{");S(kt,O,Q,"{","\\textbraceleft");S(k,O,Ki,"}","\\}");S(kt,O,Q,"}","\\}");S(kt,O,Q,"}","\\textbraceright");S(k,O,_n,"{","\\lbrace");S(k,O,Ki,"}","\\rbrace");S(k,O,_n,"[","\\lbrack",!0);S(kt,O,Q,"[","\\lbrack",!0);S(k,O,Ki,"]","\\rbrack",!0);S(kt,O,Q,"]","\\rbrack",!0);S(k,O,_n,"(","\\lparen",!0);S(k,O,Ki,")","\\rparen",!0);S(kt,O,Q,"<","\\textless",!0);S(kt,O,Q,">","\\textgreater",!0);S(k,O,_n,"⌊","\\lfloor",!0);S(k,O,Ki,"⌋","\\rfloor",!0);S(k,O,_n,"⌈","\\lceil",!0);S(k,O,Ki,"⌉","\\rceil",!0);S(k,O,Q,"\\","\\backslash");S(k,O,Q,"∣","|");S(k,O,Q,"∣","\\vert");S(kt,O,Q,"|","\\textbar",!0);S(k,O,Q,"∥","\\|");S(k,O,Q,"∥","\\Vert");S(kt,O,Q,"∥","\\textbardbl");S(kt,O,Q,"~","\\textasciitilde");S(kt,O,Q,"\\","\\textbackslash");S(kt,O,Q,"^","\\textasciicircum");S(k,O,V,"↑","\\uparrow",!0);S(k,O,V,"⇑","\\Uparrow",!0);S(k,O,V,"↓","\\downarrow",!0);S(k,O,V,"⇓","\\Downarrow",!0);S(k,O,V,"↕","\\updownarrow",!0);S(k,O,V,"⇕","\\Updownarrow",!0);S(k,O,wi,"∐","\\coprod");S(k,O,wi,"⋁","\\bigvee");S(k,O,wi,"⋀","\\bigwedge");S(k,O,wi,"⨄","\\biguplus");S(k,O,wi,"⋂","\\bigcap");S(k,O,wi,"⋃","\\bigcup");S(k,O,wi,"∫","\\int");S(k,O,wi,"∫","\\intop");S(k,O,wi,"∬","\\iint");S(k,O,wi,"∭","\\iiint");S(k,O,wi,"∏","\\prod");S(k,O,wi,"∑","\\sum");S(k,O,wi,"⨂","\\bigotimes");S(k,O,wi,"⨁","\\bigoplus");S(k,O,wi,"⨀","\\bigodot");S(k,O,wi,"∮","\\oint");S(k,O,wi,"∯","\\oiint");S(k,O,wi,"∰","\\oiiint");S(k,O,wi,"⨆","\\bigsqcup");S(k,O,wi,"∫","\\smallint");S(kt,O,mo,"…","\\textellipsis");S(k,O,mo,"…","\\mathellipsis");S(kt,O,mo,"…","\\ldots",!0);S(k,O,mo,"…","\\ldots",!0);S(k,O,mo,"⋯","\\@cdots",!0);S(k,O,mo,"⋱","\\ddots",!0);S(k,O,Q,"⋮","\\varvdots");S(kt,O,Q,"⋮","\\varvdots");S(k,O,We,"ˊ","\\acute");S(k,O,We,"ˋ","\\grave");S(k,O,We,"¨","\\ddot");S(k,O,We,"~","\\tilde");S(k,O,We,"ˉ","\\bar");S(k,O,We,"˘","\\breve");S(k,O,We,"ˇ","\\check");S(k,O,We,"^","\\hat");S(k,O,We,"⃗","\\vec");S(k,O,We,"˙","\\dot");S(k,O,We,"˚","\\mathring");S(k,O,te,"","\\@imath");S(k,O,te,"","\\@jmath");S(k,O,Q,"ı","ı");S(k,O,Q,"ȷ","ȷ");S(kt,O,Q,"ı","\\i",!0);S(kt,O,Q,"ȷ","\\j",!0);S(kt,O,Q,"ß","\\ss",!0);S(kt,O,Q,"æ","\\ae",!0);S(kt,O,Q,"œ","\\oe",!0);S(kt,O,Q,"ø","\\o",!0);S(kt,O,Q,"Æ","\\AE",!0);S(kt,O,Q,"Œ","\\OE",!0);S(kt,O,Q,"Ø","\\O",!0);S(kt,O,We,"ˊ","\\'");S(kt,O,We,"ˋ","\\`");S(kt,O,We,"ˆ","\\^");S(kt,O,We,"˜","\\~");S(kt,O,We,"ˉ","\\=");S(kt,O,We,"˘","\\u");S(kt,O,We,"˙","\\.");S(kt,O,We,"¸","\\c");S(kt,O,We,"˚","\\r");S(kt,O,We,"ˇ","\\v");S(kt,O,We,"¨",'\\"');S(kt,O,We,"˝","\\H");S(kt,O,We,"◯","\\textcircled");var Kb={"--":!0,"---":!0,"``":!0,"''":!0};S(kt,O,Q,"–","--",!0);S(kt,O,Q,"–","\\textendash");S(kt,O,Q,"—","---",!0);S(kt,O,Q,"—","\\textemdash");S(kt,O,Q,"‘","`",!0);S(kt,O,Q,"‘","\\textquoteleft");S(kt,O,Q,"’","'",!0);S(kt,O,Q,"’","\\textquoteright");S(kt,O,Q,"“","``",!0);S(kt,O,Q,"“","\\textquotedblleft");S(kt,O,Q,"”","''",!0);S(kt,O,Q,"”","\\textquotedblright");S(k,O,Q,"°","\\degree",!0);S(kt,O,Q,"°","\\degree");S(kt,O,Q,"°","\\textdegree",!0);S(k,O,Q,"£","\\pounds");S(k,O,Q,"£","\\mathsterling",!0);S(kt,O,Q,"£","\\pounds");S(kt,O,Q,"£","\\textsterling",!0);S(k,q,Q,"✠","\\maltese");S(kt,q,Q,"✠","\\maltese");var b4='0123456789/@."';for(var Id=0;Id<b4.length;Id++){var v4=b4.charAt(Id);S(k,O,Q,v4,v4)}var y4='0123456789!@*()-=+";:?/.,';for(var Fd=0;Fd<y4.length;Fd++){var x4=y4.charAt(Fd);S(kt,O,Q,x4,x4)}var q0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Pd=0;Pd<q0.length;Pd++){var S0=q0.charAt(Pd);S(k,O,te,S0,S0),S(kt,O,Q,S0,S0)}S(k,q,Q,"C","ℂ");S(kt,q,Q,"C","ℂ");S(k,q,Q,"H","ℍ");S(kt,q,Q,"H","ℍ");S(k,q,Q,"N","ℕ");S(kt,q,Q,"N","ℕ");S(k,q,Q,"P","ℙ");S(kt,q,Q,"P","ℙ");S(k,q,Q,"Q","ℚ");S(kt,q,Q,"Q","ℚ");S(k,q,Q,"R","ℝ");S(kt,q,Q,"R","ℝ");S(k,q,Q,"Z","ℤ");S(kt,q,Q,"Z","ℤ");S(k,O,te,"h","ℎ");S(kt,O,te,"h","ℎ");var re="";for(var ji=0;ji<q0.length;ji++){var si=q0.charAt(ji);re=String.fromCharCode(55349,56320+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),re=String.fromCharCode(55349,56372+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),re=String.fromCharCode(55349,56424+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),re=String.fromCharCode(55349,56580+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),re=String.fromCharCode(55349,56684+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),re=String.fromCharCode(55349,56736+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),re=String.fromCharCode(55349,56788+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),re=String.fromCharCode(55349,56840+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),re=String.fromCharCode(55349,56944+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),ji<26&&(re=String.fromCharCode(55349,56632+ji),S(k,O,te,si,re),S(kt,O,Q,si,re),re=String.fromCharCode(55349,56476+ji),S(k,O,te,si,re),S(kt,O,Q,si,re))}re="𝕜";S(k,O,te,"k",re);S(kt,O,Q,"k",re);for(var ea=0;ea<10;ea++){var _s=ea.toString();re=String.fromCharCode(55349,57294+ea),S(k,O,te,_s,re),S(kt,O,Q,_s,re),re=String.fromCharCode(55349,57314+ea),S(k,O,te,_s,re),S(kt,O,Q,_s,re),re=String.fromCharCode(55349,57324+ea),S(k,O,te,_s,re),S(kt,O,Q,_s,re),re=String.fromCharCode(55349,57334+ea),S(k,O,te,_s,re),S(kt,O,Q,_s,re)}var bf="ÐÞþ";for(var Ud=0;Ud<bf.length;Ud++){var A0=bf.charAt(Ud);S(k,O,te,A0,A0),S(kt,O,Q,A0,A0)}var _0=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],w4=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],tx=function(t,e){var i=t.charCodeAt(0),r=t.charCodeAt(1),a=(i-55296)*1024+(r-56320)+65536,o=e==="math"?0:1;if(119808<=a&&a<120484){var u=Math.floor((a-119808)/26);return[_0[u][2],_0[u][o]]}else if(120782<=a&&a<=120831){var h=Math.floor((a-120782)/10);return[w4[h][2],w4[h][o]]}else{if(a===120485||a===120486)return[_0[0][2],_0[0][o]];if(120486<a&&a<120782)return["",""];throw new Mt("Unsupported character: "+t)}},su=function(t,e,i){return $e[i][t]&&$e[i][t].replace&&(t=$e[i][t].replace),{value:t,metrics:Jf(t,e,i)}},Xn=function(t,e,i,r,a){var o=su(t,e,i),u=o.metrics;t=o.value;var h;if(u){var f=u.italic;(i==="text"||r&&r.font==="mathit")&&(f=0),h=new Hn(t,u.height,u.depth,f,u.skew,u.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+e+"' and mode '"+i+"'")),h=new Hn(t,0,0,0,0,0,a);if(r){h.maxFontSize=r.sizeMultiplier,r.style.isTight()&&h.classes.push("mtight");var m=r.getColor();m&&(h.style.color=m)}return h},ex=function(t,e,i,r){return r===void 0&&(r=[]),i.font==="boldsymbol"&&su(t,"Main-Bold",e).metrics?Xn(t,"Main-Bold",e,i,r.concat(["mathbf"])):t==="\\"||$e[e][t].font==="main"?Xn(t,"Main-Regular",e,i,r):Xn(t,"AMS-Regular",e,i,r.concat(["amsrm"]))},ix=function(t,e,i,r,a){return a!=="textord"&&su(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},nx=function(t,e,i){var r=t.mode,a=t.text,o=["mord"],u=r==="math"||r==="text"&&e.font,h=u?e.font:e.fontFamily,f="",m="";if(a.charCodeAt(0)===55349&&([f,m]=tx(a,r)),f.length>0)return Xn(a,f,r,e,o.concat(m));if(h){var p,b;if(h==="boldsymbol"){var v=ix(a,r,e,o,i);p=v.fontName,b=[v.fontClass]}else u?(p=Qb[h].fontName,b=[h]):(p=k0(h,e.fontWeight,e.fontShape),b=[h,e.fontWeight,e.fontShape]);if(su(a,p,r).metrics)return Xn(a,p,r,e,o.concat(b));if(Kb.hasOwnProperty(a)&&p.slice(0,10)==="Typewriter"){for(var w=[],x=0;x<a.length;x++)w.push(Xn(a[x],p,r,e,o.concat(b)));return Wb(w)}}if(i==="mathord")return Xn(a,"Math-Italic",r,e,o.concat(["mathnormal"]));if(i==="textord"){var _=$e[r][a]&&$e[r][a].font;if(_==="ams"){var A=k0("amsrm",e.fontWeight,e.fontShape);return Xn(a,A,r,e,o.concat("amsrm",e.fontWeight,e.fontShape))}else if(_==="main"||!_){var E=k0("textrm",e.fontWeight,e.fontShape);return Xn(a,E,r,e,o.concat(e.fontWeight,e.fontShape))}else{var C=k0(_,e.fontWeight,e.fontShape);return Xn(a,C,r,e,o.concat(C,e.fontWeight,e.fontShape))}}else throw new Error("unexpected type: "+i+" in makeOrd")},rx=(l,t)=>{if(Ns(l.classes)!==Ns(t.classes)||l.skew!==t.skew||l.maxFontSize!==t.maxFontSize)return!1;if(l.classes.length===1){var e=l.classes[0];if(e==="mbin"||e==="mord")return!1}for(var i in l.style)if(l.style.hasOwnProperty(i)&&l.style[i]!==t.style[i])return!1;for(var r in t.style)if(t.style.hasOwnProperty(r)&&l.style[r]!==t.style[r])return!1;return!0},sx=l=>{for(var t=0;t<l.length-1;t++){var e=l[t],i=l[t+1];e instanceof Hn&&i instanceof Hn&&rx(e,i)&&(e.text+=i.text,e.height=Math.max(e.height,i.height),e.depth=Math.max(e.depth,i.depth),e.italic=i.italic,l.splice(t+1,1),t--)}return l},em=function(t){for(var e=0,i=0,r=0,a=0;a<t.children.length;a++){var o=t.children[a];o.height>e&&(e=o.height),o.depth>i&&(i=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}t.height=e,t.depth=i,t.maxFontSize=r},cn=function(t,e,i,r){var a=new ql(t,e,i,r);return em(a),a},Zb=(l,t,e,i)=>new ql(l,t,e,i),ax=function(t,e,i){var r=cn([t],[],e);return r.height=Math.max(i||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),r.style.borderBottomWidth=Nt(r.height),r.maxFontSize=1,r},ox=function(t,e,i,r){var a=new tm(t,e,i,r);return em(a),a},Wb=function(t){var e=new Gl(t);return em(e),e},lx=function(t,e){return t instanceof Gl?cn([],[t],e):t},cx=function(t){if(t.positionType==="individualShift"){for(var e=t.children,i=[e[0]],r=-e[0].shift-e[0].elem.depth,a=r,o=1;o<e.length;o++){var u=-e[o].shift-a-e[o].elem.depth,h=u-(e[o-1].elem.height+e[o-1].elem.depth);a=a+u,i.push({type:"kern",size:h}),i.push(e[o])}return{children:i,depth:r}}var f;if(t.positionType==="top"){for(var m=t.positionData,p=0;p<t.children.length;p++){var b=t.children[p];m-=b.type==="kern"?b.size:b.elem.height+b.elem.depth}f=m}else if(t.positionType==="bottom")f=-t.positionData;else{var v=t.children[0];if(v.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")f=-v.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")f=-v.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:f}},ux=function(t,e){for(var{children:i,depth:r}=cx(t),a=0,o=0;o<i.length;o++){var u=i[o];if(u.type==="elem"){var h=u.elem;a=Math.max(a,h.maxFontSize,h.height)}}a+=2;var f=cn(["pstrut"],[]);f.style.height=Nt(a);for(var m=[],p=r,b=r,v=r,w=0;w<i.length;w++){var x=i[w];if(x.type==="kern")v+=x.size;else{var _=x.elem,A=x.wrapperClasses||[],E=x.wrapperStyle||{},C=cn(A,[f,_],void 0,E);C.style.top=Nt(-a-v-_.depth),x.marginLeft&&(C.style.marginLeft=x.marginLeft),x.marginRight&&(C.style.marginRight=x.marginRight),m.push(C),v+=_.height+_.depth}p=Math.min(p,v),b=Math.max(b,v)}var N=cn(["vlist"],m);N.style.height=Nt(b);var D;if(p<0){var F=cn([],[]),B=cn(["vlist"],[F]);B.style.height=Nt(-p);var Y=cn(["vlist-s"],[new Hn("​")]);D=[cn(["vlist-r"],[N,Y]),cn(["vlist-r"],[B])]}else D=[cn(["vlist-r"],[N])];var j=cn(["vlist-t"],D);return D.length===2&&j.classes.push("vlist-t2"),j.height=b,j.depth=-p,j},hx=(l,t)=>{var e=cn(["mspace"],[],t),i=ei(l,t);return e.style.marginRight=Nt(i),e},k0=function(t,e,i){var r="";switch(t){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=t}var a;return e==="textbf"&&i==="textit"?a="BoldItalic":e==="textbf"?a="Bold":e==="textit"?a="Italic":a="Regular",r+"-"+a},Qb={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Jb={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},dx=function(t,e){var[i,r,a]=Jb[t],o=new Os(i),u=new Vr([o],{width:Nt(r),height:Nt(a),style:"width:"+Nt(r),viewBox:"0 0 "+1e3*r+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),h=Zb(["overlay"],[u],e);return h.height=a,h.style.height=Nt(a),h.style.width=Nt(r),h},st={fontMap:Qb,makeSymbol:Xn,mathsym:ex,makeSpan:cn,makeSvgSpan:Zb,makeLineSpan:ax,makeAnchor:ox,makeFragment:Wb,wrapFragment:lx,makeVList:ux,makeOrd:nx,makeGlue:hx,staticSvg:dx,svgData:Jb,tryCombineChars:sx},ti={number:3,unit:"mu"},ia={number:4,unit:"mu"},Pr={number:5,unit:"mu"},fx={mord:{mop:ti,mbin:ia,mrel:Pr,minner:ti},mop:{mord:ti,mop:ti,mrel:Pr,minner:ti},mbin:{mord:ia,mop:ia,mopen:ia,minner:ia},mrel:{mord:Pr,mop:Pr,mopen:Pr,minner:Pr},mopen:{},mclose:{mop:ti,mbin:ia,mrel:Pr,minner:ti},mpunct:{mord:ti,mop:ti,mrel:Pr,mopen:ti,mclose:ti,mpunct:ti,minner:ti},minner:{mord:ti,mop:ti,mbin:ia,mrel:Pr,mopen:ti,mpunct:ti,minner:ti}},mx={mord:{mop:ti},mop:{mord:ti,mop:ti},mbin:{},mrel:{},mopen:{},mclose:{mop:ti},mpunct:{},minner:{mop:ti}},tv={},$0={},V0={};function It(l){for(var{type:t,names:e,props:i,handler:r,htmlBuilder:a,mathmlBuilder:o}=l,u={type:t,numArgs:i.numArgs,argTypes:i.argTypes,allowedInArgument:!!i.allowedInArgument,allowedInText:!!i.allowedInText,allowedInMath:i.allowedInMath===void 0?!0:i.allowedInMath,numOptionalArgs:i.numOptionalArgs||0,infix:!!i.infix,primitive:!!i.primitive,handler:r},h=0;h<e.length;++h)tv[e[h]]=u;t&&(a&&($0[t]=a),o&&(V0[t]=o))}function ma(l){var{type:t,htmlBuilder:e,mathmlBuilder:i}=l;It({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:e,mathmlBuilder:i})}var Y0=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},di=function(t){return t.type==="ordgroup"?t.body:[t]},Yr=st.makeSpan,px=["leftmost","mbin","mopen","mrel","mop","mpunct"],gx=["rightmost","mrel","mclose","mpunct"],bx={display:ee.DISPLAY,text:ee.TEXT,script:ee.SCRIPT,scriptscript:ee.SCRIPTSCRIPT},vx={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},_i=function(t,e,i,r){r===void 0&&(r=[null,null]);for(var a=[],o=0;o<t.length;o++){var u=Ee(t[o],e);if(u instanceof Gl){var h=u.children;a.push(...h)}else a.push(u)}if(st.tryCombineChars(a),!i)return a;var f=e;if(t.length===1){var m=t[0];m.type==="sizing"?f=e.havingSize(m.size):m.type==="styling"&&(f=e.havingStyle(bx[m.style]))}var p=Yr([r[0]||"leftmost"],[],e),b=Yr([r[1]||"rightmost"],[],e),v=i==="root";return S4(a,(w,x)=>{var _=x.classes[0],A=w.classes[0];_==="mbin"&&gx.includes(A)?x.classes[0]="mord":A==="mbin"&&px.includes(_)&&(w.classes[0]="mord")},{node:p},b,v),S4(a,(w,x)=>{var _=vf(x),A=vf(w),E=_&&A?w.hasClass("mtight")?mx[_][A]:fx[_][A]:null;if(E)return st.makeGlue(E,f)},{node:p},b,v),a},S4=function l(t,e,i,r,a){r&&t.push(r);for(var o=0;o<t.length;o++){var u=t[o],h=ev(u);if(h){l(h.children,e,i,null,a);continue}var f=!u.hasClass("mspace");if(f){var m=e(u,i.node);m&&(i.insertAfter?i.insertAfter(m):(t.unshift(m),o++))}f?i.node=u:a&&u.hasClass("newline")&&(i.node=Yr(["leftmost"])),i.insertAfter=(p=>b=>{t.splice(p+1,0,b),o++})(o)}r&&t.pop()},ev=function(t){return t instanceof Gl||t instanceof tm||t instanceof ql&&t.hasClass("enclosing")?t:null},yx=function l(t,e){var i=ev(t);if(i){var r=i.children;if(r.length){if(e==="right")return l(r[r.length-1],"right");if(e==="left")return l(r[0],"left")}}return t},vf=function(t,e){return t?(e&&(t=yx(t,e)),vx[t.classes[0]]||null):null},Ol=function(t,e){var i=["nulldelimiter"].concat(t.baseSizingClasses());return Yr(e.concat(i))},Ee=function(t,e,i){if(!t)return Yr();if($0[t.type]){var r=$0[t.type](t,e);if(i&&e.size!==i.size){r=Yr(e.sizingClasses(i),[r],e);var a=e.sizeMultiplier/i.sizeMultiplier;r.height*=a,r.depth*=a}return r}else throw new Mt("Got group of unknown type: '"+t.type+"'")};function E0(l,t){var e=Yr(["base"],l,t),i=Yr(["strut"]);return i.style.height=Nt(e.height+e.depth),e.depth&&(i.style.verticalAlign=Nt(-e.depth)),e.children.unshift(i),e}function yf(l,t){var e=null;l.length===1&&l[0].type==="tag"&&(e=l[0].tag,l=l[0].body);var i=_i(l,t,"root"),r;i.length===2&&i[1].hasClass("tag")&&(r=i.pop());for(var a=[],o=[],u=0;u<i.length;u++)if(o.push(i[u]),i[u].hasClass("mbin")||i[u].hasClass("mrel")||i[u].hasClass("allowbreak")){for(var h=!1;u<i.length-1&&i[u+1].hasClass("mspace")&&!i[u+1].hasClass("newline");)u++,o.push(i[u]),i[u].hasClass("nobreak")&&(h=!0);h||(a.push(E0(o,t)),o=[])}else i[u].hasClass("newline")&&(o.pop(),o.length>0&&(a.push(E0(o,t)),o=[]),a.push(i[u]));o.length>0&&a.push(E0(o,t));var f;e?(f=E0(_i(e,t,!0)),f.classes=["tag"],a.push(f)):r&&a.push(r);var m=Yr(["katex-html"],a);if(m.setAttribute("aria-hidden","true"),f){var p=f.children[0];p.style.height=Nt(m.height+m.depth),m.depth&&(p.style.verticalAlign=Nt(-m.depth))}return m}function iv(l){return new Gl(l)}class Sn{constructor(t,e,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=e||[],this.classes=i||[]}setAttribute(t,e){this.attributes[t]=e}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);this.classes.length>0&&(t.className=Ns(this.classes));for(var i=0;i<this.children.length;i++)if(this.children[i]instanceof fr&&this.children[i+1]instanceof fr){for(var r=this.children[i].toText()+this.children[++i].toText();this.children[i+1]instanceof fr;)r+=this.children[++i].toText();t.appendChild(new fr(r).toNode())}else t.appendChild(this.children[i].toNode());return t}toMarkup(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=Re.escape(this.attributes[e]),t+='"');this.classes.length>0&&(t+=' class ="'+Re.escape(Ns(this.classes))+'"'),t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class fr{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Re.escape(this.toText())}toText(){return this.text}}class xx{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character=" ":t>=.1666&&t<=.1667?this.character=" ":t>=.2222&&t<=.2223?this.character=" ":t>=.2777&&t<=.2778?this.character="  ":t>=-.05556&&t<=-.05555?this.character=" ⁣":t>=-.1667&&t<=-.1666?this.character=" ⁣":t>=-.2223&&t<=-.2222?this.character=" ⁣":t>=-.2778&&t<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",Nt(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Nt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ct={MathNode:Sn,TextNode:fr,SpaceNode:xx,newDocumentFragment:iv},jn=function(t,e,i){return $e[e][t]&&$e[e][t].replace&&t.charCodeAt(0)!==55349&&!(Kb.hasOwnProperty(t)&&i&&(i.fontFamily&&i.fontFamily.slice(4,6)==="tt"||i.font&&i.font.slice(4,6)==="tt"))&&(t=$e[e][t].replace),new Ct.TextNode(t)},im=function(t){return t.length===1?t[0]:new Ct.MathNode("mrow",t)},nm=function(t,e){if(e.fontFamily==="texttt")return"monospace";if(e.fontFamily==="textsf")return e.fontShape==="textit"&&e.fontWeight==="textbf"?"sans-serif-bold-italic":e.fontShape==="textit"?"sans-serif-italic":e.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(e.fontShape==="textit"&&e.fontWeight==="textbf")return"bold-italic";if(e.fontShape==="textit")return"italic";if(e.fontWeight==="textbf")return"bold";var i=e.font;if(!i||i==="mathnormal")return null;var r=t.mode;if(i==="mathit")return"italic";if(i==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(i==="mathbf")return"bold";if(i==="mathbb")return"double-struck";if(i==="mathsfit")return"sans-serif-italic";if(i==="mathfrak")return"fraktur";if(i==="mathscr"||i==="mathcal")return"script";if(i==="mathsf")return"sans-serif";if(i==="mathtt")return"monospace";var a=t.text;if(["\\imath","\\jmath"].includes(a))return null;$e[r][a]&&$e[r][a].replace&&(a=$e[r][a].replace);var o=st.fontMap[i].fontName;return Jf(a,o,r)?st.fontMap[i].variant:null};function Hd(l){if(!l)return!1;if(l.type==="mi"&&l.children.length===1){var t=l.children[0];return t instanceof fr&&t.text==="."}else if(l.type==="mo"&&l.children.length===1&&l.getAttribute("separator")==="true"&&l.getAttribute("lspace")==="0em"&&l.getAttribute("rspace")==="0em"){var e=l.children[0];return e instanceof fr&&e.text===","}else return!1}var dn=function(t,e,i){if(t.length===1){var r=qe(t[0],e);return i&&r instanceof Sn&&r.type==="mo"&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var a=[],o,u=0;u<t.length;u++){var h=qe(t[u],e);if(h instanceof Sn&&o instanceof Sn){if(h.type==="mtext"&&o.type==="mtext"&&h.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...h.children);continue}else if(h.type==="mn"&&o.type==="mn"){o.children.push(...h.children);continue}else if(Hd(h)&&o.type==="mn"){o.children.push(...h.children);continue}else if(h.type==="mn"&&Hd(o))h.children=[...o.children,...h.children],a.pop();else if((h.type==="msup"||h.type==="msub")&&h.children.length>=1&&(o.type==="mn"||Hd(o))){var f=h.children[0];f instanceof Sn&&f.type==="mn"&&(f.children=[...o.children,...f.children],a.pop())}else if(o.type==="mi"&&o.children.length===1){var m=o.children[0];if(m instanceof fr&&m.text==="̸"&&(h.type==="mo"||h.type==="mi"||h.type==="mn")){var p=h.children[0];p instanceof fr&&p.text.length>0&&(p.text=p.text.slice(0,1)+"̸"+p.text.slice(1),a.pop())}}}a.push(h),o=h}return a},zs=function(t,e,i){return im(dn(t,e,i))},qe=function(t,e){if(!t)return new Ct.MathNode("mrow");if(V0[t.type]){var i=V0[t.type](t,e);return i}else throw new Mt("Got group of unknown type: '"+t.type+"'")};function A4(l,t,e,i,r){var a=dn(l,e),o;a.length===1&&a[0]instanceof Sn&&["mrow","mtable"].includes(a[0].type)?o=a[0]:o=new Ct.MathNode("mrow",a);var u=new Ct.MathNode("annotation",[new Ct.TextNode(t)]);u.setAttribute("encoding","application/x-tex");var h=new Ct.MathNode("semantics",[o,u]),f=new Ct.MathNode("math",[h]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),i&&f.setAttribute("display","block");var m=r?"katex":"katex-mathml";return st.makeSpan([m],[f])}var nv=function(t){return new jr({style:t.displayMode?ee.DISPLAY:ee.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},rv=function(t,e){if(e.displayMode){var i=["katex-display"];e.leqno&&i.push("leqno"),e.fleqn&&i.push("fleqn"),t=st.makeSpan(i,[t])}return t},wx=function(t,e,i){var r=nv(i),a;if(i.output==="mathml")return A4(t,e,r,i.displayMode,!0);if(i.output==="html"){var o=yf(t,r);a=st.makeSpan(["katex"],[o])}else{var u=A4(t,e,r,i.displayMode,!1),h=yf(t,r);a=st.makeSpan(["katex"],[u,h])}return rv(a,i)},Sx=function(t,e,i){var r=nv(i),a=yf(t,r),o=st.makeSpan(["katex"],[a]);return rv(o,i)},Ax={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},_x=function(t){var e=new Ct.MathNode("mo",[new Ct.TextNode(Ax[t.replace(/^\\/,"")])]);return e.setAttribute("stretchy","true"),e},kx={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Ex=function(t){return t.type==="ordgroup"?t.body.length:1},Tx=function(t,e){function i(){var u=4e5,h=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(h)){var f=t,m=Ex(f.base),p,b,v;if(m>5)h==="widehat"||h==="widecheck"?(p=420,u=2364,v=.42,b=h+"4"):(p=312,u=2340,v=.34,b="tilde4");else{var w=[1,1,2,2,3,3][m];h==="widehat"||h==="widecheck"?(u=[0,1062,2364,2364,2364][w],p=[0,239,300,360,420][w],v=[0,.24,.3,.3,.36,.42][w],b=h+w):(u=[0,600,1033,2339,2340][w],p=[0,260,286,306,312][w],v=[0,.26,.286,.3,.306,.34][w],b="tilde"+w)}var x=new Os(b),_=new Vr([x],{width:"100%",height:Nt(v),viewBox:"0 0 "+u+" "+p,preserveAspectRatio:"none"});return{span:st.makeSvgSpan([],[_],e),minWidth:0,height:v}}else{var A=[],E=kx[h],[C,N,D]=E,F=D/1e3,B=C.length,Y,j;if(B===1){var et=E[3];Y=["hide-tail"],j=[et]}else if(B===2)Y=["halfarrow-left","halfarrow-right"],j=["xMinYMin","xMaxYMin"];else if(B===3)Y=["brace-left","brace-center","brace-right"],j=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+B+" children.");for(var ut=0;ut<B;ut++){var H=new Os(C[ut]),it=new Vr([H],{width:"400em",height:Nt(F),viewBox:"0 0 "+u+" "+D,preserveAspectRatio:j[ut]+" slice"}),R=st.makeSvgSpan([Y[ut]],[it],e);if(B===1)return{span:R,minWidth:N,height:F};R.style.height=Nt(F),A.push(R)}return{span:st.makeSpan(["stretchy"],A,e),minWidth:N,height:F}}}var{span:r,minWidth:a,height:o}=i();return r.height=o,r.style.height=Nt(o),a>0&&(r.style.minWidth=Nt(a)),r},Cx=function(t,e,i,r,a){var o,u=t.height+t.depth+i+r;if(/fbox|color|angl/.test(e)){if(o=st.makeSpan(["stretchy",e],[],a),e==="fbox"){var h=a.color&&a.getColor();h&&(o.style.borderColor=h)}}else{var f=[];/^[bx]cancel$/.test(e)&&f.push(new gf({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&f.push(new gf({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var m=new Vr(f,{width:"100%",height:Nt(u)});o=st.makeSvgSpan([],[m],a)}return o.height=u,o.style.height=Nt(u),o},Xr={encloseSpan:Cx,mathMLnode:_x,svgSpan:Tx};function de(l,t){if(!l||l.type!==t)throw new Error("Expected node of type "+t+", but got "+(l?"node of type "+l.type:String(l)));return l}function rm(l){var t=au(l);if(!t)throw new Error("Expected node of symbol group type, but got "+(l?"node of type "+l.type:String(l)));return t}function au(l){return l&&(l.type==="atom"||J8.hasOwnProperty(l.type))?l:null}var sm=(l,t)=>{var e,i,r;l&&l.type==="supsub"?(i=de(l.base,"accent"),e=i.base,l.base=e,r=W8(Ee(l,t)),l.base=i):(i=de(l,"accent"),e=i.base);var a=Ee(e,t.havingCrampedStyle()),o=i.isShifty&&Re.isCharacterBox(e),u=0;if(o){var h=Re.getBaseElem(e),f=Ee(h,t.havingCrampedStyle());u=g4(f).skew}var m=i.label==="\\c",p=m?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),b;if(i.isStretchy)b=Xr.svgSpan(i,t),b=st.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:b,wrapperClasses:["svg-align"],wrapperStyle:u>0?{width:"calc(100% - "+Nt(2*u)+")",marginLeft:Nt(2*u)}:void 0}]},t);else{var v,w;i.label==="\\vec"?(v=st.staticSvg("vec",t),w=st.svgData.vec[1]):(v=st.makeOrd({mode:i.mode,text:i.label},t,"textord"),v=g4(v),v.italic=0,w=v.width,m&&(p+=v.depth)),b=st.makeSpan(["accent-body"],[v]);var x=i.label==="\\textcircled";x&&(b.classes.push("accent-full"),p=a.height);var _=u;x||(_-=w/2),b.style.left=Nt(_),i.label==="\\textcircled"&&(b.style.top=".2em"),b=st.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-p},{type:"elem",elem:b}]},t)}var A=st.makeSpan(["mord","accent"],[b],t);return r?(r.children[0]=A,r.height=Math.max(A.height,r.height),r.classes[0]="mord",r):A},sv=(l,t)=>{var e=l.isStretchy?Xr.mathMLnode(l.label):new Ct.MathNode("mo",[jn(l.label,l.mode)]),i=new Ct.MathNode("mover",[qe(l.base,t),e]);return i.setAttribute("accent","true"),i},Mx=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(l=>"\\"+l).join("|"));It({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(l,t)=>{var e=Y0(t[0]),i=!Mx.test(l.funcName),r=!i||l.funcName==="\\widehat"||l.funcName==="\\widetilde"||l.funcName==="\\widecheck";return{type:"accent",mode:l.parser.mode,label:l.funcName,isStretchy:i,isShifty:r,base:e}},htmlBuilder:sm,mathmlBuilder:sv});It({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(l,t)=>{var e=t[0],i=l.parser.mode;return i==="math"&&(l.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+l.funcName+" works only in text mode"),i="text"),{type:"accent",mode:i,label:l.funcName,isStretchy:!1,isShifty:!0,base:e}},htmlBuilder:sm,mathmlBuilder:sv});It({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0];return{type:"accentUnder",mode:e.mode,label:i,base:r}},htmlBuilder:(l,t)=>{var e=Ee(l.base,t),i=Xr.svgSpan(l,t),r=l.label==="\\utilde"?.12:0,a=st.makeVList({positionType:"top",positionData:e.height,children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:e}]},t);return st.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(l,t)=>{var e=Xr.mathMLnode(l.label),i=new Ct.MathNode("munder",[qe(l.base,t),e]);return i.setAttribute("accentunder","true"),i}});var T0=l=>{var t=new Ct.MathNode("mpadded",l?[l]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};It({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(l,t,e){var{parser:i,funcName:r}=l;return{type:"xArrow",mode:i.mode,label:r,body:t[0],below:e[0]}},htmlBuilder(l,t){var e=t.style,i=t.havingStyle(e.sup()),r=st.wrapFragment(Ee(l.body,i,t),t),a=l.label.slice(0,2)==="\\x"?"x":"cd";r.classes.push(a+"-arrow-pad");var o;l.below&&(i=t.havingStyle(e.sub()),o=st.wrapFragment(Ee(l.below,i,t),t),o.classes.push(a+"-arrow-pad"));var u=Xr.svgSpan(l,t),h=-t.fontMetrics().axisHeight+.5*u.height,f=-t.fontMetrics().axisHeight-.5*u.height-.111;(r.depth>.25||l.label==="\\xleftequilibrium")&&(f-=r.depth);var m;if(o){var p=-t.fontMetrics().axisHeight+o.height+.5*u.height+.111;m=st.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:f},{type:"elem",elem:u,shift:h},{type:"elem",elem:o,shift:p}]},t)}else m=st.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:f},{type:"elem",elem:u,shift:h}]},t);return m.children[0].children[0].children[1].classes.push("svg-align"),st.makeSpan(["mrel","x-arrow"],[m],t)},mathmlBuilder(l,t){var e=Xr.mathMLnode(l.label);e.setAttribute("minsize",l.label.charAt(0)==="x"?"1.75em":"3.0em");var i;if(l.body){var r=T0(qe(l.body,t));if(l.below){var a=T0(qe(l.below,t));i=new Ct.MathNode("munderover",[e,a,r])}else i=new Ct.MathNode("mover",[e,r])}else if(l.below){var o=T0(qe(l.below,t));i=new Ct.MathNode("munder",[e,o])}else i=T0(),i=new Ct.MathNode("mover",[e,i]);return i}});var Rx=st.makeSpan;function av(l,t){var e=_i(l.body,t,!0);return Rx([l.mclass],e,t)}function ov(l,t){var e,i=dn(l.body,t);return l.mclass==="minner"?e=new Ct.MathNode("mpadded",i):l.mclass==="mord"?l.isCharacterBox?(e=i[0],e.type="mi"):e=new Ct.MathNode("mi",i):(l.isCharacterBox?(e=i[0],e.type="mo"):e=new Ct.MathNode("mo",i),l.mclass==="mbin"?(e.attributes.lspace="0.22em",e.attributes.rspace="0.22em"):l.mclass==="mpunct"?(e.attributes.lspace="0em",e.attributes.rspace="0.17em"):l.mclass==="mopen"||l.mclass==="mclose"?(e.attributes.lspace="0em",e.attributes.rspace="0em"):l.mclass==="minner"&&(e.attributes.lspace="0.0556em",e.attributes.width="+0.1111em")),e}It({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];return{type:"mclass",mode:e.mode,mclass:"m"+i.slice(5),body:di(r),isCharacterBox:Re.isCharacterBox(r)}},htmlBuilder:av,mathmlBuilder:ov});var ou=l=>{var t=l.type==="ordgroup"&&l.body.length?l.body[0]:l;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};It({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(l,t){var{parser:e}=l;return{type:"mclass",mode:e.mode,mclass:ou(t[0]),body:di(t[1]),isCharacterBox:Re.isCharacterBox(t[1])}}});It({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(l,t){var{parser:e,funcName:i}=l,r=t[1],a=t[0],o;i!=="\\stackrel"?o=ou(r):o="mrel";var u={type:"op",mode:r.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:i!=="\\stackrel",body:di(r)},h={type:"supsub",mode:a.mode,base:u,sup:i==="\\underset"?null:a,sub:i==="\\underset"?a:null};return{type:"mclass",mode:e.mode,mclass:o,body:[h],isCharacterBox:Re.isCharacterBox(h)}},htmlBuilder:av,mathmlBuilder:ov});It({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(l,t){var{parser:e}=l;return{type:"pmb",mode:e.mode,mclass:ou(t[0]),body:di(t[0])}},htmlBuilder(l,t){var e=_i(l.body,t,!0),i=st.makeSpan([l.mclass],e,t);return i.style.textShadow="0.02em 0.01em 0.04px",i},mathmlBuilder(l,t){var e=dn(l.body,t),i=new Ct.MathNode("mstyle",e);return i.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),i}});var Dx={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},_4=()=>({type:"styling",body:[],mode:"math",style:"display"}),k4=l=>l.type==="textord"&&l.text==="@",Nx=(l,t)=>(l.type==="mathord"||l.type==="atom")&&l.text===t;function Ox(l,t,e){var i=Dx[l];switch(i){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return e.callFunction(i,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var r=e.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:i,mode:"math",family:"rel"},o=e.callFunction("\\Big",[a],[]),u=e.callFunction("\\\\cdright",[t[1]],[]),h={type:"ordgroup",mode:"math",body:[r,o,u]};return e.callFunction("\\\\cdparent",[h],[])}case"\\\\cdlongequal":return e.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return e.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function zx(l){var t=[];for(l.gullet.beginGroup(),l.gullet.macros.set("\\cr","\\\\\\relax"),l.gullet.beginGroup();;){t.push(l.parseExpression(!1,"\\\\")),l.gullet.endGroup(),l.gullet.beginGroup();var e=l.fetch().text;if(e==="&"||e==="\\\\")l.consume();else if(e==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new Mt("Expected \\\\ or \\cr or \\end",l.nextToken)}for(var i=[],r=[i],a=0;a<t.length;a++){for(var o=t[a],u=_4(),h=0;h<o.length;h++)if(!k4(o[h]))u.body.push(o[h]);else{i.push(u),h+=1;var f=rm(o[h]).text,m=new Array(2);if(m[0]={type:"ordgroup",mode:"math",body:[]},m[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var p=0;p<2;p++){for(var b=!0,v=h+1;v<o.length;v++){if(Nx(o[v],f)){b=!1,h=v;break}if(k4(o[v]))throw new Mt("Missing a "+f+" character to complete a CD arrow.",o[v]);m[p].body.push(o[v])}if(b)throw new Mt("Missing a "+f+" character to complete a CD arrow.",o[h])}else throw new Mt('Expected one of "<>AV=|." after @',o[h]);var w=Ox(f,m,l),x={type:"styling",body:[w],mode:"math",style:"display"};i.push(x),u=_4()}a%2===0?i.push(u):i.shift(),i=[],r.push(i)}l.gullet.endGroup(),l.gullet.endGroup();var _=new Array(r[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:r,arraystretch:1,addJot:!0,rowGaps:[null],cols:_,colSeparationType:"CD",hLinesBeforeRow:new Array(r.length+1).fill([])}}It({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(l,t){var{parser:e,funcName:i}=l;return{type:"cdlabel",mode:e.mode,side:i.slice(4),label:t[0]}},htmlBuilder(l,t){var e=t.havingStyle(t.style.sup()),i=st.wrapFragment(Ee(l.label,e,t),t);return i.classes.push("cd-label-"+l.side),i.style.bottom=Nt(.8-i.depth),i.height=0,i.depth=0,i},mathmlBuilder(l,t){var e=new Ct.MathNode("mrow",[qe(l.label,t)]);return e=new Ct.MathNode("mpadded",[e]),e.setAttribute("width","0"),l.side==="left"&&e.setAttribute("lspace","-1width"),e.setAttribute("voffset","0.7em"),e=new Ct.MathNode("mstyle",[e]),e.setAttribute("displaystyle","false"),e.setAttribute("scriptlevel","1"),e}});It({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(l,t){var{parser:e}=l;return{type:"cdlabelparent",mode:e.mode,fragment:t[0]}},htmlBuilder(l,t){var e=st.wrapFragment(Ee(l.fragment,t),t);return e.classes.push("cd-vert-arrow"),e},mathmlBuilder(l,t){return new Ct.MathNode("mrow",[qe(l.fragment,t)])}});It({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(l,t){for(var{parser:e}=l,i=de(t[0],"ordgroup"),r=i.body,a="",o=0;o<r.length;o++){var u=de(r[o],"textord");a+=u.text}var h=parseInt(a),f;if(isNaN(h))throw new Mt("\\@char has non-numeric argument "+a);if(h<0||h>=1114111)throw new Mt("\\@char with invalid code point "+a);return h<=65535?f=String.fromCharCode(h):(h-=65536,f=String.fromCharCode((h>>10)+55296,(h&1023)+56320)),{type:"textord",mode:e.mode,text:f}}});var lv=(l,t)=>{var e=_i(l.body,t.withColor(l.color),!1);return st.makeFragment(e)},cv=(l,t)=>{var e=dn(l.body,t.withColor(l.color)),i=new Ct.MathNode("mstyle",e);return i.setAttribute("mathcolor",l.color),i};It({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(l,t){var{parser:e}=l,i=de(t[0],"color-token").color,r=t[1];return{type:"color",mode:e.mode,color:i,body:di(r)}},htmlBuilder:lv,mathmlBuilder:cv});It({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(l,t){var{parser:e,breakOnTokenText:i}=l,r=de(t[0],"color-token").color;e.gullet.macros.set("\\current@color",r);var a=e.parseExpression(!0,i);return{type:"color",mode:e.mode,color:r,body:a}},htmlBuilder:lv,mathmlBuilder:cv});It({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(l,t,e){var{parser:i}=l,r=i.gullet.future().text==="["?i.parseSizeGroup(!0):null,a=!i.settings.displayMode||!i.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:i.mode,newLine:a,size:r&&de(r,"size").value}},htmlBuilder(l,t){var e=st.makeSpan(["mspace"],[],t);return l.newLine&&(e.classes.push("newline"),l.size&&(e.style.marginTop=Nt(ei(l.size,t)))),e},mathmlBuilder(l,t){var e=new Ct.MathNode("mspace");return l.newLine&&(e.setAttribute("linebreak","newline"),l.size&&e.setAttribute("height",Nt(ei(l.size,t)))),e}});var xf={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},uv=l=>{var t=l.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new Mt("Expected a control sequence",l);return t},Lx=l=>{var t=l.gullet.popToken();return t.text==="="&&(t=l.gullet.popToken(),t.text===" "&&(t=l.gullet.popToken())),t},hv=(l,t,e,i)=>{var r=l.gullet.macros.get(e.text);r==null&&(e.noexpand=!0,r={tokens:[e],numArgs:0,unexpandable:!l.gullet.isExpandable(e.text)}),l.gullet.macros.set(t,r,i)};It({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(l){var{parser:t,funcName:e}=l;t.consumeSpaces();var i=t.fetch();if(xf[i.text])return(e==="\\global"||e==="\\\\globallong")&&(i.text=xf[i.text]),de(t.parseFunction(),"internal");throw new Mt("Invalid token after macro prefix",i)}});It({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l){var{parser:t,funcName:e}=l,i=t.gullet.popToken(),r=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new Mt("Expected a control sequence",i);for(var a=0,o,u=[[]];t.gullet.future().text!=="{";)if(i=t.gullet.popToken(),i.text==="#"){if(t.gullet.future().text==="{"){o=t.gullet.future(),u[a].push("{");break}if(i=t.gullet.popToken(),!/^[1-9]$/.test(i.text))throw new Mt('Invalid argument number "'+i.text+'"');if(parseInt(i.text)!==a+1)throw new Mt('Argument number "'+i.text+'" out of order');a++,u.push([])}else{if(i.text==="EOF")throw new Mt("Expected a macro definition");u[a].push(i.text)}var{tokens:h}=t.gullet.consumeArg();return o&&h.unshift(o),(e==="\\edef"||e==="\\xdef")&&(h=t.gullet.expandTokens(h),h.reverse()),t.gullet.macros.set(r,{tokens:h,numArgs:a,delimiters:u},e===xf[e]),{type:"internal",mode:t.mode}}});It({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l){var{parser:t,funcName:e}=l,i=uv(t.gullet.popToken());t.gullet.consumeSpaces();var r=Lx(t);return hv(t,i,r,e==="\\\\globallet"),{type:"internal",mode:t.mode}}});It({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l){var{parser:t,funcName:e}=l,i=uv(t.gullet.popToken()),r=t.gullet.popToken(),a=t.gullet.popToken();return hv(t,i,a,e==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(r),{type:"internal",mode:t.mode}}});var yl=function(t,e,i){var r=$e.math[t]&&$e.math[t].replace,a=Jf(r||t,e,i);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return a},am=function(t,e,i,r){var a=i.havingBaseStyle(e),o=st.makeSpan(r.concat(a.sizingClasses(i)),[t],i),u=a.sizeMultiplier/i.sizeMultiplier;return o.height*=u,o.depth*=u,o.maxFontSize=a.sizeMultiplier,o},dv=function(t,e,i){var r=e.havingBaseStyle(i),a=(1-e.sizeMultiplier/r.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=Nt(a),t.height-=a,t.depth+=a},Bx=function(t,e,i,r,a,o){var u=st.makeSymbol(t,"Main-Regular",a,r),h=am(u,e,r,o);return i&&dv(h,r,e),h},Ix=function(t,e,i,r){return st.makeSymbol(t,"Size"+e+"-Regular",i,r)},fv=function(t,e,i,r,a,o){var u=Ix(t,e,a,r),h=am(st.makeSpan(["delimsizing","size"+e],[u],r),ee.TEXT,r,o);return i&&dv(h,r,ee.TEXT),h},jd=function(t,e,i){var r;e==="Size1-Regular"?r="delim-size1":r="delim-size4";var a=st.makeSpan(["delimsizinginner",r],[st.makeSpan([],[st.makeSymbol(t,e,i)])]);return{type:"elem",elem:a}},Gd=function(t,e,i){var r=dr["Size4-Regular"][t.charCodeAt(0)]?dr["Size4-Regular"][t.charCodeAt(0)][4]:dr["Size1-Regular"][t.charCodeAt(0)][4],a=new Os("inner",j8(t,Math.round(1e3*e))),o=new Vr([a],{width:Nt(r),height:Nt(e),style:"width:"+Nt(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*e),preserveAspectRatio:"xMinYMin"}),u=st.makeSvgSpan([],[o],i);return u.height=e,u.style.height=Nt(e),u.style.width=Nt(r),{type:"elem",elem:u}},wf=.008,C0={type:"kern",size:-1*wf},Fx=["|","\\lvert","\\rvert","\\vert"],Px=["\\|","\\lVert","\\rVert","\\Vert"],mv=function(t,e,i,r,a,o){var u,h,f,m,p="",b=0;u=f=m=t,h=null;var v="Size1-Regular";t==="\\uparrow"?f=m="⏐":t==="\\Uparrow"?f=m="‖":t==="\\downarrow"?u=f="⏐":t==="\\Downarrow"?u=f="‖":t==="\\updownarrow"?(u="\\uparrow",f="⏐",m="\\downarrow"):t==="\\Updownarrow"?(u="\\Uparrow",f="‖",m="\\Downarrow"):Fx.includes(t)?(f="∣",p="vert",b=333):Px.includes(t)?(f="∥",p="doublevert",b=556):t==="["||t==="\\lbrack"?(u="⎡",f="⎢",m="⎣",v="Size4-Regular",p="lbrack",b=667):t==="]"||t==="\\rbrack"?(u="⎤",f="⎥",m="⎦",v="Size4-Regular",p="rbrack",b=667):t==="\\lfloor"||t==="⌊"?(f=u="⎢",m="⎣",v="Size4-Regular",p="lfloor",b=667):t==="\\lceil"||t==="⌈"?(u="⎡",f=m="⎢",v="Size4-Regular",p="lceil",b=667):t==="\\rfloor"||t==="⌋"?(f=u="⎥",m="⎦",v="Size4-Regular",p="rfloor",b=667):t==="\\rceil"||t==="⌉"?(u="⎤",f=m="⎥",v="Size4-Regular",p="rceil",b=667):t==="("||t==="\\lparen"?(u="⎛",f="⎜",m="⎝",v="Size4-Regular",p="lparen",b=875):t===")"||t==="\\rparen"?(u="⎞",f="⎟",m="⎠",v="Size4-Regular",p="rparen",b=875):t==="\\{"||t==="\\lbrace"?(u="⎧",h="⎨",m="⎩",f="⎪",v="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(u="⎫",h="⎬",m="⎭",f="⎪",v="Size4-Regular"):t==="\\lgroup"||t==="⟮"?(u="⎧",m="⎩",f="⎪",v="Size4-Regular"):t==="\\rgroup"||t==="⟯"?(u="⎫",m="⎭",f="⎪",v="Size4-Regular"):t==="\\lmoustache"||t==="⎰"?(u="⎧",m="⎭",f="⎪",v="Size4-Regular"):(t==="\\rmoustache"||t==="⎱")&&(u="⎫",m="⎩",f="⎪",v="Size4-Regular");var w=yl(u,v,a),x=w.height+w.depth,_=yl(f,v,a),A=_.height+_.depth,E=yl(m,v,a),C=E.height+E.depth,N=0,D=1;if(h!==null){var F=yl(h,v,a);N=F.height+F.depth,D=2}var B=x+C+N,Y=Math.max(0,Math.ceil((e-B)/(D*A))),j=B+Y*D*A,et=r.fontMetrics().axisHeight;i&&(et*=r.sizeMultiplier);var ut=j/2-et,H=[];if(p.length>0){var it=j-x-C,R=Math.round(j*1e3),nt=G8(p,Math.round(it*1e3)),$=new Os(p,nt),X=(b/1e3).toFixed(3)+"em",vt=(R/1e3).toFixed(3)+"em",mt=new Vr([$],{width:X,height:vt,viewBox:"0 0 "+b+" "+R}),Et=st.makeSvgSpan([],[mt],r);Et.height=R/1e3,Et.style.width=X,Et.style.height=vt,H.push({type:"elem",elem:Et})}else{if(H.push(jd(m,v,a)),H.push(C0),h===null){var z=j-x-C+2*wf;H.push(Gd(f,z,r))}else{var P=(j-x-C-N)/2+2*wf;H.push(Gd(f,P,r)),H.push(C0),H.push(jd(h,v,a)),H.push(C0),H.push(Gd(f,P,r))}H.push(C0),H.push(jd(u,v,a))}var at=r.havingBaseStyle(ee.TEXT),ht=st.makeVList({positionType:"bottom",positionData:ut,children:H},at);return am(st.makeSpan(["delimsizing","mult"],[ht],at),ee.TEXT,r,o)},qd=80,$d=.08,Vd=function(t,e,i,r,a){var o=H8(t,r,i),u=new Os(t,o),h=new Vr([u],{width:"400em",height:Nt(e),viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return st.makeSvgSpan(["hide-tail"],[h],a)},Ux=function(t,e){var i=e.havingBaseSizing(),r=vv("\\surd",t*i.sizeMultiplier,bv,i),a=i.sizeMultiplier,o=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),u,h=0,f=0,m=0,p;return r.type==="small"?(m=1e3+1e3*o+qd,t<1?a=1:t<1.4&&(a=.7),h=(1+o+$d)/a,f=(1+o)/a,u=Vd("sqrtMain",h,m,o,e),u.style.minWidth="0.853em",p=.833/a):r.type==="large"?(m=(1e3+qd)*Al[r.size],f=(Al[r.size]+o)/a,h=(Al[r.size]+o+$d)/a,u=Vd("sqrtSize"+r.size,h,m,o,e),u.style.minWidth="1.02em",p=1/a):(h=t+o+$d,f=t+o,m=Math.floor(1e3*t+o)+qd,u=Vd("sqrtTall",h,m,o,e),u.style.minWidth="0.742em",p=1.056),u.height=f,u.style.height=Nt(h),{span:u,advanceWidth:p,ruleWidth:(e.fontMetrics().sqrtRuleThickness+o)*a}},pv=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],Hx=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],gv=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Al=[0,1.2,1.8,2.4,3],jx=function(t,e,i,r,a){if(t==="<"||t==="\\lt"||t==="⟨"?t="\\langle":(t===">"||t==="\\gt"||t==="⟩")&&(t="\\rangle"),pv.includes(t)||gv.includes(t))return fv(t,e,!1,i,r,a);if(Hx.includes(t))return mv(t,Al[e],!1,i,r,a);throw new Mt("Illegal delimiter: '"+t+"'")},Gx=[{type:"small",style:ee.SCRIPTSCRIPT},{type:"small",style:ee.SCRIPT},{type:"small",style:ee.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],qx=[{type:"small",style:ee.SCRIPTSCRIPT},{type:"small",style:ee.SCRIPT},{type:"small",style:ee.TEXT},{type:"stack"}],bv=[{type:"small",style:ee.SCRIPTSCRIPT},{type:"small",style:ee.SCRIPT},{type:"small",style:ee.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],$x=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},vv=function(t,e,i,r){for(var a=Math.min(2,3-r.style.size),o=a;o<i.length&&i[o].type!=="stack";o++){var u=yl(t,$x(i[o]),"math"),h=u.height+u.depth;if(i[o].type==="small"){var f=r.havingBaseStyle(i[o].style);h*=f.sizeMultiplier}if(h>e)return i[o]}return i[i.length-1]},yv=function(t,e,i,r,a,o){t==="<"||t==="\\lt"||t==="⟨"?t="\\langle":(t===">"||t==="\\gt"||t==="⟩")&&(t="\\rangle");var u;gv.includes(t)?u=Gx:pv.includes(t)?u=bv:u=qx;var h=vv(t,e,u,r);return h.type==="small"?Bx(t,h.style,i,r,a,o):h.type==="large"?fv(t,h.size,i,r,a,o):mv(t,e,i,r,a,o)},Vx=function(t,e,i,r,a,o){var u=r.fontMetrics().axisHeight*r.sizeMultiplier,h=901,f=5/r.fontMetrics().ptPerEm,m=Math.max(e-u,i+u),p=Math.max(m/500*h,2*m-f);return yv(t,p,!0,r,a,o)},$r={sqrtImage:Ux,sizedDelim:jx,sizeToMaxHeight:Al,customSizedDelim:yv,leftRightDelim:Vx},E4={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Yx=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function lu(l,t){var e=au(l);if(e&&Yx.includes(e.text))return e;throw e?new Mt("Invalid delimiter '"+e.text+"' after '"+t.funcName+"'",l):new Mt("Invalid delimiter type '"+l.type+"'",l)}It({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(l,t)=>{var e=lu(t[0],l);return{type:"delimsizing",mode:l.parser.mode,size:E4[l.funcName].size,mclass:E4[l.funcName].mclass,delim:e.text}},htmlBuilder:(l,t)=>l.delim==="."?st.makeSpan([l.mclass]):$r.sizedDelim(l.delim,l.size,t,l.mode,[l.mclass]),mathmlBuilder:l=>{var t=[];l.delim!=="."&&t.push(jn(l.delim,l.mode));var e=new Ct.MathNode("mo",t);l.mclass==="mopen"||l.mclass==="mclose"?e.setAttribute("fence","true"):e.setAttribute("fence","false"),e.setAttribute("stretchy","true");var i=Nt($r.sizeToMaxHeight[l.size]);return e.setAttribute("minsize",i),e.setAttribute("maxsize",i),e}});function T4(l){if(!l.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}It({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var e=l.parser.gullet.macros.get("\\current@color");if(e&&typeof e!="string")throw new Mt("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:l.parser.mode,delim:lu(t[0],l).text,color:e}}});It({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var e=lu(t[0],l),i=l.parser;++i.leftrightDepth;var r=i.parseExpression(!1);--i.leftrightDepth,i.expect("\\right",!1);var a=de(i.parseFunction(),"leftright-right");return{type:"leftright",mode:i.mode,body:r,left:e.text,right:a.delim,rightColor:a.color}},htmlBuilder:(l,t)=>{T4(l);for(var e=_i(l.body,t,!0,["mopen","mclose"]),i=0,r=0,a=!1,o=0;o<e.length;o++)e[o].isMiddle?a=!0:(i=Math.max(e[o].height,i),r=Math.max(e[o].depth,r));i*=t.sizeMultiplier,r*=t.sizeMultiplier;var u;if(l.left==="."?u=Ol(t,["mopen"]):u=$r.leftRightDelim(l.left,i,r,t,l.mode,["mopen"]),e.unshift(u),a)for(var h=1;h<e.length;h++){var f=e[h],m=f.isMiddle;m&&(e[h]=$r.leftRightDelim(m.delim,i,r,m.options,l.mode,[]))}var p;if(l.right===".")p=Ol(t,["mclose"]);else{var b=l.rightColor?t.withColor(l.rightColor):t;p=$r.leftRightDelim(l.right,i,r,b,l.mode,["mclose"])}return e.push(p),st.makeSpan(["minner"],e,t)},mathmlBuilder:(l,t)=>{T4(l);var e=dn(l.body,t);if(l.left!=="."){var i=new Ct.MathNode("mo",[jn(l.left,l.mode)]);i.setAttribute("fence","true"),e.unshift(i)}if(l.right!=="."){var r=new Ct.MathNode("mo",[jn(l.right,l.mode)]);r.setAttribute("fence","true"),l.rightColor&&r.setAttribute("mathcolor",l.rightColor),e.push(r)}return im(e)}});It({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var e=lu(t[0],l);if(!l.parser.leftrightDepth)throw new Mt("\\middle without preceding \\left",e);return{type:"middle",mode:l.parser.mode,delim:e.text}},htmlBuilder:(l,t)=>{var e;if(l.delim===".")e=Ol(t,[]);else{e=$r.sizedDelim(l.delim,1,t,l.mode,[]);var i={delim:l.delim,options:t};e.isMiddle=i}return e},mathmlBuilder:(l,t)=>{var e=l.delim==="\\vert"||l.delim==="|"?jn("|","text"):jn(l.delim,l.mode),i=new Ct.MathNode("mo",[e]);return i.setAttribute("fence","true"),i.setAttribute("lspace","0.05em"),i.setAttribute("rspace","0.05em"),i}});var om=(l,t)=>{var e=st.wrapFragment(Ee(l.body,t),t),i=l.label.slice(1),r=t.sizeMultiplier,a,o=0,u=Re.isCharacterBox(l.body);if(i==="sout")a=st.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/r,o=-.5*t.fontMetrics().xHeight;else if(i==="phase"){var h=ei({number:.6,unit:"pt"},t),f=ei({number:.35,unit:"ex"},t),m=t.havingBaseSizing();r=r/m.sizeMultiplier;var p=e.height+e.depth+h+f;e.style.paddingLeft=Nt(p/2+h);var b=Math.floor(1e3*p*r),v=P8(b),w=new Vr([new Os("phase",v)],{width:"400em",height:Nt(b/1e3),viewBox:"0 0 400000 "+b,preserveAspectRatio:"xMinYMin slice"});a=st.makeSvgSpan(["hide-tail"],[w],t),a.style.height=Nt(p),o=e.depth+h+f}else{/cancel/.test(i)?u||e.classes.push("cancel-pad"):i==="angl"?e.classes.push("anglpad"):e.classes.push("boxpad");var x=0,_=0,A=0;/box/.test(i)?(A=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),x=t.fontMetrics().fboxsep+(i==="colorbox"?0:A),_=x):i==="angl"?(A=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),x=4*A,_=Math.max(0,.25-e.depth)):(x=u?.2:0,_=x),a=Xr.encloseSpan(e,i,x,_,t),/fbox|boxed|fcolorbox/.test(i)?(a.style.borderStyle="solid",a.style.borderWidth=Nt(A)):i==="angl"&&A!==.049&&(a.style.borderTopWidth=Nt(A),a.style.borderRightWidth=Nt(A)),o=e.depth+_,l.backgroundColor&&(a.style.backgroundColor=l.backgroundColor,l.borderColor&&(a.style.borderColor=l.borderColor))}var E;if(l.backgroundColor)E=st.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:o},{type:"elem",elem:e,shift:0}]},t);else{var C=/cancel|phase/.test(i)?["svg-align"]:[];E=st.makeVList({positionType:"individualShift",children:[{type:"elem",elem:e,shift:0},{type:"elem",elem:a,shift:o,wrapperClasses:C}]},t)}return/cancel/.test(i)&&(E.height=e.height,E.depth=e.depth),/cancel/.test(i)&&!u?st.makeSpan(["mord","cancel-lap"],[E],t):st.makeSpan(["mord"],[E],t)},lm=(l,t)=>{var e=0,i=new Ct.MathNode(l.label.indexOf("colorbox")>-1?"mpadded":"menclose",[qe(l.body,t)]);switch(l.label){case"\\cancel":i.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":i.setAttribute("notation","downdiagonalstrike");break;case"\\phase":i.setAttribute("notation","phasorangle");break;case"\\sout":i.setAttribute("notation","horizontalstrike");break;case"\\fbox":i.setAttribute("notation","box");break;case"\\angl":i.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(e=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,i.setAttribute("width","+"+2*e+"pt"),i.setAttribute("height","+"+2*e+"pt"),i.setAttribute("lspace",e+"pt"),i.setAttribute("voffset",e+"pt"),l.label==="\\fcolorbox"){var r=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);i.setAttribute("style","border: "+r+"em solid "+String(l.borderColor))}break;case"\\xcancel":i.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return l.backgroundColor&&i.setAttribute("mathbackground",l.backgroundColor),i};It({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(l,t,e){var{parser:i,funcName:r}=l,a=de(t[0],"color-token").color,o=t[1];return{type:"enclose",mode:i.mode,label:r,backgroundColor:a,body:o}},htmlBuilder:om,mathmlBuilder:lm});It({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(l,t,e){var{parser:i,funcName:r}=l,a=de(t[0],"color-token").color,o=de(t[1],"color-token").color,u=t[2];return{type:"enclose",mode:i.mode,label:r,backgroundColor:o,borderColor:a,body:u}},htmlBuilder:om,mathmlBuilder:lm});It({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(l,t){var{parser:e}=l;return{type:"enclose",mode:e.mode,label:"\\fbox",body:t[0]}}});It({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];return{type:"enclose",mode:e.mode,label:i,body:r}},htmlBuilder:om,mathmlBuilder:lm});It({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(l,t){var{parser:e}=l;return{type:"enclose",mode:e.mode,label:"\\angl",body:t[0]}}});var xv={};function pr(l){for(var{type:t,names:e,props:i,handler:r,htmlBuilder:a,mathmlBuilder:o}=l,u={type:t,numArgs:i.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r},h=0;h<e.length;++h)xv[e[h]]=u;a&&($0[t]=a),o&&(V0[t]=o)}var wv={};function I(l,t){wv[l]=t}function C4(l){var t=[];l.consumeSpaces();var e=l.fetch().text;for(e==="\\relax"&&(l.consume(),l.consumeSpaces(),e=l.fetch().text);e==="\\hline"||e==="\\hdashline";)l.consume(),t.push(e==="\\hdashline"),l.consumeSpaces(),e=l.fetch().text;return t}var cu=l=>{var t=l.parser.settings;if(!t.displayMode)throw new Mt("{"+l.envName+"} can be used only in display mode.")};function cm(l){if(l.indexOf("ed")===-1)return l.indexOf("*")===-1}function Ls(l,t,e){var{hskipBeforeAndAfter:i,addJot:r,cols:a,arraystretch:o,colSeparationType:u,autoTag:h,singleRow:f,emptySingleRow:m,maxNumCols:p,leqno:b}=t;if(l.gullet.beginGroup(),f||l.gullet.macros.set("\\cr","\\\\\\relax"),!o){var v=l.gullet.expandMacroAsText("\\arraystretch");if(v==null)o=1;else if(o=parseFloat(v),!o||o<0)throw new Mt("Invalid \\arraystretch: "+v)}l.gullet.beginGroup();var w=[],x=[w],_=[],A=[],E=h!=null?[]:void 0;function C(){h&&l.gullet.macros.set("\\@eqnsw","1",!0)}function N(){E&&(l.gullet.macros.get("\\df@tag")?(E.push(l.subparse([new An("\\df@tag")])),l.gullet.macros.set("\\df@tag",void 0,!0)):E.push(!!h&&l.gullet.macros.get("\\@eqnsw")==="1"))}for(C(),A.push(C4(l));;){var D=l.parseExpression(!1,f?"\\end":"\\\\");l.gullet.endGroup(),l.gullet.beginGroup(),D={type:"ordgroup",mode:l.mode,body:D},e&&(D={type:"styling",mode:l.mode,style:e,body:[D]}),w.push(D);var F=l.fetch().text;if(F==="&"){if(p&&w.length===p){if(f||u)throw new Mt("Too many tab characters: &",l.nextToken);l.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}l.consume()}else if(F==="\\end"){N(),w.length===1&&D.type==="styling"&&D.body[0].body.length===0&&(x.length>1||!m)&&x.pop(),A.length<x.length+1&&A.push([]);break}else if(F==="\\\\"){l.consume();var B=void 0;l.gullet.future().text!==" "&&(B=l.parseSizeGroup(!0)),_.push(B?B.value:null),N(),A.push(C4(l)),w=[],x.push(w),C()}else throw new Mt("Expected & or \\\\ or \\cr or \\end",l.nextToken)}return l.gullet.endGroup(),l.gullet.endGroup(),{type:"array",mode:l.mode,addJot:r,arraystretch:o,body:x,cols:a,rowGaps:_,hskipBeforeAndAfter:i,hLinesBeforeRow:A,colSeparationType:u,tags:E,leqno:b}}function um(l){return l.slice(0,1)==="d"?"display":"text"}var gr=function(t,e){var i,r,a=t.body.length,o=t.hLinesBeforeRow,u=0,h=new Array(a),f=[],m=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),p=1/e.fontMetrics().ptPerEm,b=5*p;if(t.colSeparationType&&t.colSeparationType==="small"){var v=e.havingStyle(ee.SCRIPT).sizeMultiplier;b=.2778*(v/e.sizeMultiplier)}var w=t.colSeparationType==="CD"?ei({number:3,unit:"ex"},e):12*p,x=3*p,_=t.arraystretch*w,A=.7*_,E=.3*_,C=0;function N(U){for(var J=0;J<U.length;++J)J>0&&(C+=.25),f.push({pos:C,isDashed:U[J]})}for(N(o[0]),i=0;i<t.body.length;++i){var D=t.body[i],F=A,B=E;u<D.length&&(u=D.length);var Y=new Array(D.length);for(r=0;r<D.length;++r){var j=Ee(D[r],e);B<j.depth&&(B=j.depth),F<j.height&&(F=j.height),Y[r]=j}var et=t.rowGaps[i],ut=0;et&&(ut=ei(et,e),ut>0&&(ut+=E,B<ut&&(B=ut),ut=0)),t.addJot&&(B+=x),Y.height=F,Y.depth=B,C+=F,Y.pos=C,C+=B+ut,h[i]=Y,N(o[i+1])}var H=C/2+e.fontMetrics().axisHeight,it=t.cols||[],R=[],nt,$,X=[];if(t.tags&&t.tags.some(U=>U))for(i=0;i<a;++i){var vt=h[i],mt=vt.pos-H,Et=t.tags[i],z=void 0;Et===!0?z=st.makeSpan(["eqn-num"],[],e):Et===!1?z=st.makeSpan([],[],e):z=st.makeSpan([],_i(Et,e,!0),e),z.depth=vt.depth,z.height=vt.height,X.push({type:"elem",elem:z,shift:mt})}for(r=0,$=0;r<u||$<it.length;++r,++$){for(var P=it[$]||{},at=!0;P.type==="separator";){if(at||(nt=st.makeSpan(["arraycolsep"],[]),nt.style.width=Nt(e.fontMetrics().doubleRuleSep),R.push(nt)),P.separator==="|"||P.separator===":"){var ht=P.separator==="|"?"solid":"dashed",pt=st.makeSpan(["vertical-separator"],[],e);pt.style.height=Nt(C),pt.style.borderRightWidth=Nt(m),pt.style.borderRightStyle=ht,pt.style.margin="0 "+Nt(-m/2);var Bt=C-H;Bt&&(pt.style.verticalAlign=Nt(-Bt)),R.push(pt)}else throw new Mt("Invalid separator type: "+P.separator);$++,P=it[$]||{},at=!1}if(!(r>=u)){var Lt=void 0;(r>0||t.hskipBeforeAndAfter)&&(Lt=Re.deflt(P.pregap,b),Lt!==0&&(nt=st.makeSpan(["arraycolsep"],[]),nt.style.width=Nt(Lt),R.push(nt)));var Ht=[];for(i=0;i<a;++i){var jt=h[i],xe=jt[r];if(xe){var we=jt.pos-H;xe.depth=jt.depth,xe.height=jt.height,Ht.push({type:"elem",elem:xe,shift:we})}}Ht=st.makeVList({positionType:"individualShift",children:Ht},e),Ht=st.makeSpan(["col-align-"+(P.align||"c")],[Ht]),R.push(Ht),(r<u-1||t.hskipBeforeAndAfter)&&(Lt=Re.deflt(P.postgap,b),Lt!==0&&(nt=st.makeSpan(["arraycolsep"],[]),nt.style.width=Nt(Lt),R.push(nt)))}}if(h=st.makeSpan(["mtable"],R),f.length>0){for(var Qe=st.makeLineSpan("hline",e,m),oi=st.makeLineSpan("hdashline",e,m),M=[{type:"elem",elem:h,shift:0}];f.length>0;){var gt=f.pop(),dt=gt.pos-H;gt.isDashed?M.push({type:"elem",elem:oi,shift:dt}):M.push({type:"elem",elem:Qe,shift:dt})}h=st.makeVList({positionType:"individualShift",children:M},e)}if(X.length===0)return st.makeSpan(["mord"],[h],e);var G=st.makeVList({positionType:"individualShift",children:X},e);return G=st.makeSpan(["tag"],[G],e),st.makeFragment([h,G])},Xx={c:"center ",l:"left ",r:"right "},br=function(t,e){for(var i=[],r=new Ct.MathNode("mtd",[],["mtr-glue"]),a=new Ct.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<t.body.length;o++){for(var u=t.body[o],h=[],f=0;f<u.length;f++)h.push(new Ct.MathNode("mtd",[qe(u[f],e)]));t.tags&&t.tags[o]&&(h.unshift(r),h.push(r),t.leqno?h.unshift(a):h.push(a)),i.push(new Ct.MathNode("mtr",h))}var m=new Ct.MathNode("mtable",i),p=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);m.setAttribute("rowspacing",Nt(p));var b="",v="";if(t.cols&&t.cols.length>0){var w=t.cols,x="",_=!1,A=0,E=w.length;w[0].type==="separator"&&(b+="top ",A=1),w[w.length-1].type==="separator"&&(b+="bottom ",E-=1);for(var C=A;C<E;C++)w[C].type==="align"?(v+=Xx[w[C].align],_&&(x+="none "),_=!0):w[C].type==="separator"&&_&&(x+=w[C].separator==="|"?"solid ":"dashed ",_=!1);m.setAttribute("columnalign",v.trim()),/[sd]/.test(x)&&m.setAttribute("columnlines",x.trim())}if(t.colSeparationType==="align"){for(var N=t.cols||[],D="",F=1;F<N.length;F++)D+=F%2?"0em ":"1em ";m.setAttribute("columnspacing",D.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?m.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?m.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?m.setAttribute("columnspacing","0.5em"):m.setAttribute("columnspacing","1em");var B="",Y=t.hLinesBeforeRow;b+=Y[0].length>0?"left ":"",b+=Y[Y.length-1].length>0?"right ":"";for(var j=1;j<Y.length-1;j++)B+=Y[j].length===0?"none ":Y[j][0]?"dashed ":"solid ";return/[sd]/.test(B)&&m.setAttribute("rowlines",B.trim()),b!==""&&(m=new Ct.MathNode("menclose",[m]),m.setAttribute("notation",b.trim())),t.arraystretch&&t.arraystretch<1&&(m=new Ct.MathNode("mstyle",[m]),m.setAttribute("scriptlevel","1")),m},Sv=function(t,e){t.envName.indexOf("ed")===-1&&cu(t);var i=[],r=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",o=Ls(t.parser,{cols:i,addJot:!0,autoTag:a?void 0:cm(t.envName),emptySingleRow:!0,colSeparationType:r,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),u,h=0,f={type:"ordgroup",mode:t.mode,body:[]};if(e[0]&&e[0].type==="ordgroup"){for(var m="",p=0;p<e[0].body.length;p++){var b=de(e[0].body[p],"textord");m+=b.text}u=Number(m),h=u*2}var v=!h;o.body.forEach(function(A){for(var E=1;E<A.length;E+=2){var C=de(A[E],"styling"),N=de(C.body[0],"ordgroup");N.body.unshift(f)}if(v)h<A.length&&(h=A.length);else{var D=A.length/2;if(u<D)throw new Mt("Too many math in a row: "+("expected "+u+", but got "+D),A[0])}});for(var w=0;w<h;++w){var x="r",_=0;w%2===1?x="l":w>0&&v&&(_=1),i[w]={type:"align",align:x,pregap:_,postgap:0}}return o.colSeparationType=v?"align":"alignat",o};pr({type:"array",names:["array","darray"],props:{numArgs:1},handler(l,t){var e=au(t[0]),i=e?[t[0]]:de(t[0],"ordgroup").body,r=i.map(function(o){var u=rm(o),h=u.text;if("lcr".indexOf(h)!==-1)return{type:"align",align:h};if(h==="|")return{type:"separator",separator:"|"};if(h===":")return{type:"separator",separator:":"};throw new Mt("Unknown column alignment: "+h,o)}),a={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return Ls(l.parser,a,um(l.envName))},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(l){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[l.envName.replace("*","")],e="c",i={hskipBeforeAndAfter:!1,cols:[{type:"align",align:e}]};if(l.envName.charAt(l.envName.length-1)==="*"){var r=l.parser;if(r.consumeSpaces(),r.fetch().text==="["){if(r.consume(),r.consumeSpaces(),e=r.fetch().text,"lcr".indexOf(e)===-1)throw new Mt("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),i.cols=[{type:"align",align:e}]}}var a=Ls(l.parser,i,um(l.envName)),o=Math.max(0,...a.body.map(u=>u.length));return a.cols=new Array(o).fill({type:"align",align:e}),t?{type:"leftright",mode:l.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(l){var t={arraystretch:.5},e=Ls(l.parser,t,"script");return e.colSeparationType="small",e},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["subarray"],props:{numArgs:1},handler(l,t){var e=au(t[0]),i=e?[t[0]]:de(t[0],"ordgroup").body,r=i.map(function(o){var u=rm(o),h=u.text;if("lc".indexOf(h)!==-1)return{type:"align",align:h};throw new Mt("Unknown column alignment: "+h,o)});if(r.length>1)throw new Mt("{subarray} can contain only one column");var a={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=Ls(l.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new Mt("{subarray} can contain only one column");return a},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(l){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},e=Ls(l.parser,t,um(l.envName));return{type:"leftright",mode:l.mode,body:[e],left:l.envName.indexOf("r")>-1?".":"\\{",right:l.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Sv,htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(l){["gather","gather*"].includes(l.envName)&&cu(l);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:cm(l.envName),emptySingleRow:!0,leqno:l.parser.settings.leqno};return Ls(l.parser,t,"display")},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Sv,htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(l){cu(l);var t={autoTag:cm(l.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:l.parser.settings.leqno};return Ls(l.parser,t,"display")},htmlBuilder:gr,mathmlBuilder:br});pr({type:"array",names:["CD"],props:{numArgs:0},handler(l){return cu(l),zx(l.parser)},htmlBuilder:gr,mathmlBuilder:br});I("\\nonumber","\\gdef\\@eqnsw{0}");I("\\notag","\\nonumber");It({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(l,t){throw new Mt(l.funcName+" valid only within array environment")}});var M4=xv;It({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];if(r.type!=="ordgroup")throw new Mt("Invalid environment name",r);for(var a="",o=0;o<r.body.length;++o)a+=de(r.body[o],"textord").text;if(i==="\\begin"){if(!M4.hasOwnProperty(a))throw new Mt("No such environment: "+a,r);var u=M4[a],{args:h,optArgs:f}=e.parseArguments("\\begin{"+a+"}",u),m={mode:e.mode,envName:a,parser:e},p=u.handler(m,h,f);e.expect("\\end",!1);var b=e.nextToken,v=de(e.parseFunction(),"environment");if(v.name!==a)throw new Mt("Mismatch: \\begin{"+a+"} matched by \\end{"+v.name+"}",b);return p}return{type:"environment",mode:e.mode,name:a,nameGroup:r}}});var Av=(l,t)=>{var e=l.font,i=t.withFont(e);return Ee(l.body,i)},_v=(l,t)=>{var e=l.font,i=t.withFont(e);return qe(l.body,i)},R4={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};It({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=Y0(t[0]),a=i;return a in R4&&(a=R4[a]),{type:"font",mode:e.mode,font:a.slice(1),body:r}},htmlBuilder:Av,mathmlBuilder:_v});It({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(l,t)=>{var{parser:e}=l,i=t[0],r=Re.isCharacterBox(i);return{type:"mclass",mode:e.mode,mclass:ou(i),body:[{type:"font",mode:e.mode,font:"boldsymbol",body:i}],isCharacterBox:r}}});It({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(l,t)=>{var{parser:e,funcName:i,breakOnTokenText:r}=l,{mode:a}=e,o=e.parseExpression(!0,r),u="math"+i.slice(1);return{type:"font",mode:a,font:u,body:{type:"ordgroup",mode:e.mode,body:o}}},htmlBuilder:Av,mathmlBuilder:_v});var kv=(l,t)=>{var e=t;return l==="display"?e=e.id>=ee.SCRIPT.id?e.text():ee.DISPLAY:l==="text"&&e.size===ee.DISPLAY.size?e=ee.TEXT:l==="script"?e=ee.SCRIPT:l==="scriptscript"&&(e=ee.SCRIPTSCRIPT),e},hm=(l,t)=>{var e=kv(l.size,t.style),i=e.fracNum(),r=e.fracDen(),a;a=t.havingStyle(i);var o=Ee(l.numer,a,t);if(l.continued){var u=8.5/t.fontMetrics().ptPerEm,h=3.5/t.fontMetrics().ptPerEm;o.height=o.height<u?u:o.height,o.depth=o.depth<h?h:o.depth}a=t.havingStyle(r);var f=Ee(l.denom,a,t),m,p,b;l.hasBarLine?(l.barSize?(p=ei(l.barSize,t),m=st.makeLineSpan("frac-line",t,p)):m=st.makeLineSpan("frac-line",t),p=m.height,b=m.height):(m=null,p=0,b=t.fontMetrics().defaultRuleThickness);var v,w,x;e.size===ee.DISPLAY.size||l.size==="display"?(v=t.fontMetrics().num1,p>0?w=3*b:w=7*b,x=t.fontMetrics().denom1):(p>0?(v=t.fontMetrics().num2,w=b):(v=t.fontMetrics().num3,w=3*b),x=t.fontMetrics().denom2);var _;if(m){var E=t.fontMetrics().axisHeight;v-o.depth-(E+.5*p)<w&&(v+=w-(v-o.depth-(E+.5*p))),E-.5*p-(f.height-x)<w&&(x+=w-(E-.5*p-(f.height-x)));var C=-(E-.5*p);_=st.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:x},{type:"elem",elem:m,shift:C},{type:"elem",elem:o,shift:-v}]},t)}else{var A=v-o.depth-(f.height-x);A<w&&(v+=.5*(w-A),x+=.5*(w-A)),_=st.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:x},{type:"elem",elem:o,shift:-v}]},t)}a=t.havingStyle(e),_.height*=a.sizeMultiplier/t.sizeMultiplier,_.depth*=a.sizeMultiplier/t.sizeMultiplier;var N;e.size===ee.DISPLAY.size?N=t.fontMetrics().delim1:e.size===ee.SCRIPTSCRIPT.size?N=t.havingStyle(ee.SCRIPT).fontMetrics().delim2:N=t.fontMetrics().delim2;var D,F;return l.leftDelim==null?D=Ol(t,["mopen"]):D=$r.customSizedDelim(l.leftDelim,N,!0,t.havingStyle(e),l.mode,["mopen"]),l.continued?F=st.makeSpan([]):l.rightDelim==null?F=Ol(t,["mclose"]):F=$r.customSizedDelim(l.rightDelim,N,!0,t.havingStyle(e),l.mode,["mclose"]),st.makeSpan(["mord"].concat(a.sizingClasses(t)),[D,st.makeSpan(["mfrac"],[_]),F],t)},dm=(l,t)=>{var e=new Ct.MathNode("mfrac",[qe(l.numer,t),qe(l.denom,t)]);if(!l.hasBarLine)e.setAttribute("linethickness","0px");else if(l.barSize){var i=ei(l.barSize,t);e.setAttribute("linethickness",Nt(i))}var r=kv(l.size,t.style);if(r.size!==t.style.size){e=new Ct.MathNode("mstyle",[e]);var a=r.size===ee.DISPLAY.size?"true":"false";e.setAttribute("displaystyle",a),e.setAttribute("scriptlevel","0")}if(l.leftDelim!=null||l.rightDelim!=null){var o=[];if(l.leftDelim!=null){var u=new Ct.MathNode("mo",[new Ct.TextNode(l.leftDelim.replace("\\",""))]);u.setAttribute("fence","true"),o.push(u)}if(o.push(e),l.rightDelim!=null){var h=new Ct.MathNode("mo",[new Ct.TextNode(l.rightDelim.replace("\\",""))]);h.setAttribute("fence","true"),o.push(h)}return im(o)}return e};It({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0],a=t[1],o,u=null,h=null,f="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,u="(",h=")";break;case"\\\\bracefrac":o=!1,u="\\{",h="\\}";break;case"\\\\brackfrac":o=!1,u="[",h="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:e.mode,continued:!1,numer:r,denom:a,hasBarLine:o,leftDelim:u,rightDelim:h,size:f,barSize:null}},htmlBuilder:hm,mathmlBuilder:dm});It({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0],a=t[1];return{type:"genfrac",mode:e.mode,continued:!0,numer:r,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});It({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(l){var{parser:t,funcName:e,token:i}=l,r;switch(e){case"\\over":r="\\frac";break;case"\\choose":r="\\binom";break;case"\\atop":r="\\\\atopfrac";break;case"\\brace":r="\\\\bracefrac";break;case"\\brack":r="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:r,token:i}}});var D4=["display","text","script","scriptscript"],N4=function(t){var e=null;return t.length>0&&(e=t,e=e==="."?null:e),e};It({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(l,t){var{parser:e}=l,i=t[4],r=t[5],a=Y0(t[0]),o=a.type==="atom"&&a.family==="open"?N4(a.text):null,u=Y0(t[1]),h=u.type==="atom"&&u.family==="close"?N4(u.text):null,f=de(t[2],"size"),m,p=null;f.isBlank?m=!0:(p=f.value,m=p.number>0);var b="auto",v=t[3];if(v.type==="ordgroup"){if(v.body.length>0){var w=de(v.body[0],"textord");b=D4[Number(w.text)]}}else v=de(v,"textord"),b=D4[Number(v.text)];return{type:"genfrac",mode:e.mode,numer:i,denom:r,continued:!1,hasBarLine:m,barSize:p,leftDelim:o,rightDelim:h,size:b}},htmlBuilder:hm,mathmlBuilder:dm});It({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(l,t){var{parser:e,funcName:i,token:r}=l;return{type:"infix",mode:e.mode,replaceWith:"\\\\abovefrac",size:de(t[0],"size").value,token:r}}});It({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0],a=_8(de(t[1],"infix").size),o=t[2],u=a.number>0;return{type:"genfrac",mode:e.mode,numer:r,denom:o,continued:!1,hasBarLine:u,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:hm,mathmlBuilder:dm});var Ev=(l,t)=>{var e=t.style,i,r;l.type==="supsub"?(i=l.sup?Ee(l.sup,t.havingStyle(e.sup()),t):Ee(l.sub,t.havingStyle(e.sub()),t),r=de(l.base,"horizBrace")):r=de(l,"horizBrace");var a=Ee(r.base,t.havingBaseStyle(ee.DISPLAY)),o=Xr.svgSpan(r,t),u;if(r.isOver?(u=st.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:o}]},t),u.children[0].children[0].children[1].classes.push("svg-align")):(u=st.makeVList({positionType:"bottom",positionData:a.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:a}]},t),u.children[0].children[0].children[0].classes.push("svg-align")),i){var h=st.makeSpan(["mord",r.isOver?"mover":"munder"],[u],t);r.isOver?u=st.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:i}]},t):u=st.makeVList({positionType:"bottom",positionData:h.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:h}]},t)}return st.makeSpan(["mord",r.isOver?"mover":"munder"],[u],t)},Kx=(l,t)=>{var e=Xr.mathMLnode(l.label);return new Ct.MathNode(l.isOver?"mover":"munder",[qe(l.base,t),e])};It({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(l,t){var{parser:e,funcName:i}=l;return{type:"horizBrace",mode:e.mode,label:i,isOver:/^\\over/.test(i),base:t[0]}},htmlBuilder:Ev,mathmlBuilder:Kx});It({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[1],r=de(t[0],"url").url;return e.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:e.mode,href:r,body:di(i)}:e.formatUnsupportedCmd("\\href")},htmlBuilder:(l,t)=>{var e=_i(l.body,t,!1);return st.makeAnchor(l.href,[],e,t)},mathmlBuilder:(l,t)=>{var e=zs(l.body,t);return e instanceof Sn||(e=new Sn("mrow",[e])),e.setAttribute("href",l.href),e}});It({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=de(t[0],"url").url;if(!e.settings.isTrusted({command:"\\url",url:i}))return e.formatUnsupportedCmd("\\url");for(var r=[],a=0;a<i.length;a++){var o=i[a];o==="~"&&(o="\\textasciitilde"),r.push({type:"textord",mode:"text",text:o})}var u={type:"text",mode:e.mode,font:"\\texttt",body:r};return{type:"href",mode:e.mode,href:i,body:di(u)}}});It({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(l,t){var{parser:e}=l;return{type:"hbox",mode:e.mode,body:di(t[0])}},htmlBuilder(l,t){var e=_i(l.body,t,!1);return st.makeFragment(e)},mathmlBuilder(l,t){return new Ct.MathNode("mrow",dn(l.body,t))}});It({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(l,t)=>{var{parser:e,funcName:i,token:r}=l,a=de(t[0],"raw").string,o=t[1];e.settings.strict&&e.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var u,h={};switch(i){case"\\htmlClass":h.class=a,u={command:"\\htmlClass",class:a};break;case"\\htmlId":h.id=a,u={command:"\\htmlId",id:a};break;case"\\htmlStyle":h.style=a,u={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var f=a.split(","),m=0;m<f.length;m++){var p=f[m].split("=");if(p.length!==2)throw new Mt("Error parsing key-value for \\htmlData");h["data-"+p[0].trim()]=p[1].trim()}u={command:"\\htmlData",attributes:h};break}default:throw new Error("Unrecognized html command")}return e.settings.isTrusted(u)?{type:"html",mode:e.mode,attributes:h,body:di(o)}:e.formatUnsupportedCmd(i)},htmlBuilder:(l,t)=>{var e=_i(l.body,t,!1),i=["enclosing"];l.attributes.class&&i.push(...l.attributes.class.trim().split(/\s+/));var r=st.makeSpan(i,e,t);for(var a in l.attributes)a!=="class"&&l.attributes.hasOwnProperty(a)&&r.setAttribute(a,l.attributes[a]);return r},mathmlBuilder:(l,t)=>zs(l.body,t)});It({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l;return{type:"htmlmathml",mode:e.mode,html:di(t[0]),mathml:di(t[1])}},htmlBuilder:(l,t)=>{var e=_i(l.html,t,!1);return st.makeFragment(e)},mathmlBuilder:(l,t)=>zs(l.mathml,t)});var Yd=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new Mt("Invalid size: '"+t+"' in \\includegraphics");var i={number:+(e[1]+e[2]),unit:e[3]};if(!$b(i))throw new Mt("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i};It({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(l,t,e)=>{var{parser:i}=l,r={number:0,unit:"em"},a={number:.9,unit:"em"},o={number:0,unit:"em"},u="";if(e[0])for(var h=de(e[0],"raw").string,f=h.split(","),m=0;m<f.length;m++){var p=f[m].split("=");if(p.length===2){var b=p[1].trim();switch(p[0].trim()){case"alt":u=b;break;case"width":r=Yd(b);break;case"height":a=Yd(b);break;case"totalheight":o=Yd(b);break;default:throw new Mt("Invalid key: '"+p[0]+"' in \\includegraphics.")}}}var v=de(t[0],"url").url;return u===""&&(u=v,u=u.replace(/^.*[\\/]/,""),u=u.substring(0,u.lastIndexOf("."))),i.settings.isTrusted({command:"\\includegraphics",url:v})?{type:"includegraphics",mode:i.mode,alt:u,width:r,height:a,totalheight:o,src:v}:i.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(l,t)=>{var e=ei(l.height,t),i=0;l.totalheight.number>0&&(i=ei(l.totalheight,t)-e);var r=0;l.width.number>0&&(r=ei(l.width,t));var a={height:Nt(e+i)};r>0&&(a.width=Nt(r)),i>0&&(a.verticalAlign=Nt(-i));var o=new K8(l.src,l.alt,a);return o.height=e,o.depth=i,o},mathmlBuilder:(l,t)=>{var e=new Ct.MathNode("mglyph",[]);e.setAttribute("alt",l.alt);var i=ei(l.height,t),r=0;if(l.totalheight.number>0&&(r=ei(l.totalheight,t)-i,e.setAttribute("valign",Nt(-r))),e.setAttribute("height",Nt(i+r)),l.width.number>0){var a=ei(l.width,t);e.setAttribute("width",Nt(a))}return e.setAttribute("src",l.src),e}});It({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(l,t){var{parser:e,funcName:i}=l,r=de(t[0],"size");if(e.settings.strict){var a=i[1]==="m",o=r.value.unit==="mu";a?(o||e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" supports only mu units, "+("not "+r.value.unit+" units")),e.mode!=="math"&&e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" works only in math mode")):o&&e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" doesn't support mu units")}return{type:"kern",mode:e.mode,dimension:r.value}},htmlBuilder(l,t){return st.makeGlue(l.dimension,t)},mathmlBuilder(l,t){var e=ei(l.dimension,t);return new Ct.SpaceNode(e)}});It({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0];return{type:"lap",mode:e.mode,alignment:i.slice(5),body:r}},htmlBuilder:(l,t)=>{var e;l.alignment==="clap"?(e=st.makeSpan([],[Ee(l.body,t)]),e=st.makeSpan(["inner"],[e],t)):e=st.makeSpan(["inner"],[Ee(l.body,t)]);var i=st.makeSpan(["fix"],[]),r=st.makeSpan([l.alignment],[e,i],t),a=st.makeSpan(["strut"]);return a.style.height=Nt(r.height+r.depth),r.depth&&(a.style.verticalAlign=Nt(-r.depth)),r.children.unshift(a),r=st.makeSpan(["thinbox"],[r],t),st.makeSpan(["mord","vbox"],[r],t)},mathmlBuilder:(l,t)=>{var e=new Ct.MathNode("mpadded",[qe(l.body,t)]);if(l.alignment!=="rlap"){var i=l.alignment==="llap"?"-1":"-0.5";e.setAttribute("lspace",i+"width")}return e.setAttribute("width","0px"),e}});It({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(l,t){var{funcName:e,parser:i}=l,r=i.mode;i.switchMode("math");var a=e==="\\("?"\\)":"$",o=i.parseExpression(!1,a);return i.expect(a),i.switchMode(r),{type:"styling",mode:i.mode,style:"text",body:o}}});It({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(l,t){throw new Mt("Mismatched "+l.funcName)}});var O4=(l,t)=>{switch(t.style.size){case ee.DISPLAY.size:return l.display;case ee.TEXT.size:return l.text;case ee.SCRIPT.size:return l.script;case ee.SCRIPTSCRIPT.size:return l.scriptscript;default:return l.text}};It({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(l,t)=>{var{parser:e}=l;return{type:"mathchoice",mode:e.mode,display:di(t[0]),text:di(t[1]),script:di(t[2]),scriptscript:di(t[3])}},htmlBuilder:(l,t)=>{var e=O4(l,t),i=_i(e,t,!1);return st.makeFragment(i)},mathmlBuilder:(l,t)=>{var e=O4(l,t);return zs(e,t)}});var Tv=(l,t,e,i,r,a,o)=>{l=st.makeSpan([],[l]);var u=e&&Re.isCharacterBox(e),h,f;if(t){var m=Ee(t,i.havingStyle(r.sup()),i);f={elem:m,kern:Math.max(i.fontMetrics().bigOpSpacing1,i.fontMetrics().bigOpSpacing3-m.depth)}}if(e){var p=Ee(e,i.havingStyle(r.sub()),i);h={elem:p,kern:Math.max(i.fontMetrics().bigOpSpacing2,i.fontMetrics().bigOpSpacing4-p.height)}}var b;if(f&&h){var v=i.fontMetrics().bigOpSpacing5+h.elem.height+h.elem.depth+h.kern+l.depth+o;b=st.makeVList({positionType:"bottom",positionData:v,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:Nt(-a)},{type:"kern",size:h.kern},{type:"elem",elem:l},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Nt(a)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else if(h){var w=l.height-o;b=st.makeVList({positionType:"top",positionData:w,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:Nt(-a)},{type:"kern",size:h.kern},{type:"elem",elem:l}]},i)}else if(f){var x=l.depth+o;b=st.makeVList({positionType:"bottom",positionData:x,children:[{type:"elem",elem:l},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Nt(a)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else return l;var _=[b];if(h&&a!==0&&!u){var A=st.makeSpan(["mspace"],[],i);A.style.marginRight=Nt(a),_.unshift(A)}return st.makeSpan(["mop","op-limits"],_,i)},Cv=["\\smallint"],po=(l,t)=>{var e,i,r=!1,a;l.type==="supsub"?(e=l.sup,i=l.sub,a=de(l.base,"op"),r=!0):a=de(l,"op");var o=t.style,u=!1;o.size===ee.DISPLAY.size&&a.symbol&&!Cv.includes(a.name)&&(u=!0);var h;if(a.symbol){var f=u?"Size2-Regular":"Size1-Regular",m="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(m=a.name.slice(1),a.name=m==="oiint"?"\\iint":"\\iiint"),h=st.makeSymbol(a.name,f,"math",t,["mop","op-symbol",u?"large-op":"small-op"]),m.length>0){var p=h.italic,b=st.staticSvg(m+"Size"+(u?"2":"1"),t);h=st.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:0},{type:"elem",elem:b,shift:u?.08:0}]},t),a.name="\\"+m,h.classes.unshift("mop"),h.italic=p}}else if(a.body){var v=_i(a.body,t,!0);v.length===1&&v[0]instanceof Hn?(h=v[0],h.classes[0]="mop"):h=st.makeSpan(["mop"],v,t)}else{for(var w=[],x=1;x<a.name.length;x++)w.push(st.mathsym(a.name[x],a.mode,t));h=st.makeSpan(["mop"],w,t)}var _=0,A=0;return(h instanceof Hn||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(_=(h.height-h.depth)/2-t.fontMetrics().axisHeight,A=h.italic),r?Tv(h,e,i,t,o,A,_):(_&&(h.style.position="relative",h.style.top=Nt(_)),h)},$l=(l,t)=>{var e;if(l.symbol)e=new Sn("mo",[jn(l.name,l.mode)]),Cv.includes(l.name)&&e.setAttribute("largeop","false");else if(l.body)e=new Sn("mo",dn(l.body,t));else{e=new Sn("mi",[new fr(l.name.slice(1))]);var i=new Sn("mo",[jn("⁡","text")]);l.parentIsSupSub?e=new Sn("mrow",[e,i]):e=iv([e,i])}return e},Zx={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};It({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=i;return r.length===1&&(r=Zx[r]),{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:po,mathmlBuilder:$l});It({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:di(i)}},htmlBuilder:po,mathmlBuilder:$l});var Wx={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};It({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(l){var{parser:t,funcName:e}=l;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:e}},htmlBuilder:po,mathmlBuilder:$l});It({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(l){var{parser:t,funcName:e}=l;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:e}},htmlBuilder:po,mathmlBuilder:$l});It({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(l){var{parser:t,funcName:e}=l,i=e;return i.length===1&&(i=Wx[i]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:po,mathmlBuilder:$l});var Mv=(l,t)=>{var e,i,r=!1,a;l.type==="supsub"?(e=l.sup,i=l.sub,a=de(l.base,"operatorname"),r=!0):a=de(l,"operatorname");var o;if(a.body.length>0){for(var u=a.body.map(p=>{var b=p.text;return typeof b=="string"?{type:"textord",mode:p.mode,text:b}:p}),h=_i(u,t.withFont("mathrm"),!0),f=0;f<h.length;f++){var m=h[f];m instanceof Hn&&(m.text=m.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=st.makeSpan(["mop"],h,t)}else o=st.makeSpan(["mop"],[],t);return r?Tv(o,e,i,t,t.style,0,0):o},Qx=(l,t)=>{for(var e=dn(l.body,t.withFont("mathrm")),i=!0,r=0;r<e.length;r++){var a=e[r];if(!(a instanceof Ct.SpaceNode))if(a instanceof Ct.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=a.children[0];a.children.length===1&&o instanceof Ct.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):i=!1;break}default:i=!1}else i=!1}if(i){var u=e.map(m=>m.toText()).join("");e=[new Ct.TextNode(u)]}var h=new Ct.MathNode("mi",e);h.setAttribute("mathvariant","normal");var f=new Ct.MathNode("mo",[jn("⁡","text")]);return l.parentIsSupSub?new Ct.MathNode("mrow",[h,f]):Ct.newDocumentFragment([h,f])};It({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0];return{type:"operatorname",mode:e.mode,body:di(r),alwaysHandleSupSub:i==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Mv,mathmlBuilder:Qx});I("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");ma({type:"ordgroup",htmlBuilder(l,t){return l.semisimple?st.makeFragment(_i(l.body,t,!1)):st.makeSpan(["mord"],_i(l.body,t,!0),t)},mathmlBuilder(l,t){return zs(l.body,t,!0)}});It({type:"overline",names:["\\overline"],props:{numArgs:1},handler(l,t){var{parser:e}=l,i=t[0];return{type:"overline",mode:e.mode,body:i}},htmlBuilder(l,t){var e=Ee(l.body,t.havingCrampedStyle()),i=st.makeLineSpan("overline-line",t),r=t.fontMetrics().defaultRuleThickness,a=st.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e},{type:"kern",size:3*r},{type:"elem",elem:i},{type:"kern",size:r}]},t);return st.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(l,t){var e=new Ct.MathNode("mo",[new Ct.TextNode("‾")]);e.setAttribute("stretchy","true");var i=new Ct.MathNode("mover",[qe(l.body,t),e]);return i.setAttribute("accent","true"),i}});It({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"phantom",mode:e.mode,body:di(i)}},htmlBuilder:(l,t)=>{var e=_i(l.body,t.withPhantom(),!1);return st.makeFragment(e)},mathmlBuilder:(l,t)=>{var e=dn(l.body,t);return new Ct.MathNode("mphantom",e)}});It({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"hphantom",mode:e.mode,body:i}},htmlBuilder:(l,t)=>{var e=st.makeSpan([],[Ee(l.body,t.withPhantom())]);if(e.height=0,e.depth=0,e.children)for(var i=0;i<e.children.length;i++)e.children[i].height=0,e.children[i].depth=0;return e=st.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e}]},t),st.makeSpan(["mord"],[e],t)},mathmlBuilder:(l,t)=>{var e=dn(di(l.body),t),i=new Ct.MathNode("mphantom",e),r=new Ct.MathNode("mpadded",[i]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}});It({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"vphantom",mode:e.mode,body:i}},htmlBuilder:(l,t)=>{var e=st.makeSpan(["inner"],[Ee(l.body,t.withPhantom())]),i=st.makeSpan(["fix"],[]);return st.makeSpan(["mord","rlap"],[e,i],t)},mathmlBuilder:(l,t)=>{var e=dn(di(l.body),t),i=new Ct.MathNode("mphantom",e),r=new Ct.MathNode("mpadded",[i]);return r.setAttribute("width","0px"),r}});It({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(l,t){var{parser:e}=l,i=de(t[0],"size").value,r=t[1];return{type:"raisebox",mode:e.mode,dy:i,body:r}},htmlBuilder(l,t){var e=Ee(l.body,t),i=ei(l.dy,t);return st.makeVList({positionType:"shift",positionData:-i,children:[{type:"elem",elem:e}]},t)},mathmlBuilder(l,t){var e=new Ct.MathNode("mpadded",[qe(l.body,t)]),i=l.dy.number+l.dy.unit;return e.setAttribute("voffset",i),e}});It({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(l){var{parser:t}=l;return{type:"internal",mode:t.mode}}});It({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(l,t,e){var{parser:i}=l,r=e[0],a=de(t[0],"size"),o=de(t[1],"size");return{type:"rule",mode:i.mode,shift:r&&de(r,"size").value,width:a.value,height:o.value}},htmlBuilder(l,t){var e=st.makeSpan(["mord","rule"],[],t),i=ei(l.width,t),r=ei(l.height,t),a=l.shift?ei(l.shift,t):0;return e.style.borderRightWidth=Nt(i),e.style.borderTopWidth=Nt(r),e.style.bottom=Nt(a),e.width=i,e.height=r+a,e.depth=-a,e.maxFontSize=r*1.125*t.sizeMultiplier,e},mathmlBuilder(l,t){var e=ei(l.width,t),i=ei(l.height,t),r=l.shift?ei(l.shift,t):0,a=t.color&&t.getColor()||"black",o=new Ct.MathNode("mspace");o.setAttribute("mathbackground",a),o.setAttribute("width",Nt(e)),o.setAttribute("height",Nt(i));var u=new Ct.MathNode("mpadded",[o]);return r>=0?u.setAttribute("height",Nt(r)):(u.setAttribute("height",Nt(r)),u.setAttribute("depth",Nt(-r))),u.setAttribute("voffset",Nt(r)),u}});function Rv(l,t,e){for(var i=_i(l,t,!1),r=t.sizeMultiplier/e.sizeMultiplier,a=0;a<i.length;a++){var o=i[a].classes.indexOf("sizing");o<0?Array.prototype.push.apply(i[a].classes,t.sizingClasses(e)):i[a].classes[o+1]==="reset-size"+t.size&&(i[a].classes[o+1]="reset-size"+e.size),i[a].height*=r,i[a].depth*=r}return st.makeFragment(i)}var z4=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Jx=(l,t)=>{var e=t.havingSize(l.size);return Rv(l.body,e,t)};It({type:"sizing",names:z4,props:{numArgs:0,allowedInText:!0},handler:(l,t)=>{var{breakOnTokenText:e,funcName:i,parser:r}=l,a=r.parseExpression(!1,e);return{type:"sizing",mode:r.mode,size:z4.indexOf(i)+1,body:a}},htmlBuilder:Jx,mathmlBuilder:(l,t)=>{var e=t.havingSize(l.size),i=dn(l.body,e),r=new Ct.MathNode("mstyle",i);return r.setAttribute("mathsize",Nt(e.sizeMultiplier)),r}});It({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(l,t,e)=>{var{parser:i}=l,r=!1,a=!1,o=e[0]&&de(e[0],"ordgroup");if(o)for(var u="",h=0;h<o.body.length;++h){var f=o.body[h];if(u=f.text,u==="t")r=!0;else if(u==="b")a=!0;else{r=!1,a=!1;break}}else r=!0,a=!0;var m=t[0];return{type:"smash",mode:i.mode,body:m,smashHeight:r,smashDepth:a}},htmlBuilder:(l,t)=>{var e=st.makeSpan([],[Ee(l.body,t)]);if(!l.smashHeight&&!l.smashDepth)return e;if(l.smashHeight&&(e.height=0,e.children))for(var i=0;i<e.children.length;i++)e.children[i].height=0;if(l.smashDepth&&(e.depth=0,e.children))for(var r=0;r<e.children.length;r++)e.children[r].depth=0;var a=st.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e}]},t);return st.makeSpan(["mord"],[a],t)},mathmlBuilder:(l,t)=>{var e=new Ct.MathNode("mpadded",[qe(l.body,t)]);return l.smashHeight&&e.setAttribute("height","0px"),l.smashDepth&&e.setAttribute("depth","0px"),e}});It({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(l,t,e){var{parser:i}=l,r=e[0],a=t[0];return{type:"sqrt",mode:i.mode,body:a,index:r}},htmlBuilder(l,t){var e=Ee(l.body,t.havingCrampedStyle());e.height===0&&(e.height=t.fontMetrics().xHeight),e=st.wrapFragment(e,t);var i=t.fontMetrics(),r=i.defaultRuleThickness,a=r;t.style.id<ee.TEXT.id&&(a=t.fontMetrics().xHeight);var o=r+a/4,u=e.height+e.depth+o+r,{span:h,ruleWidth:f,advanceWidth:m}=$r.sqrtImage(u,t),p=h.height-f;p>e.height+e.depth+o&&(o=(o+p-e.height-e.depth)/2);var b=h.height-e.height-o-f;e.style.paddingLeft=Nt(m);var v=st.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e,wrapperClasses:["svg-align"]},{type:"kern",size:-(e.height+b)},{type:"elem",elem:h},{type:"kern",size:f}]},t);if(l.index){var w=t.havingStyle(ee.SCRIPTSCRIPT),x=Ee(l.index,w,t),_=.6*(v.height-v.depth),A=st.makeVList({positionType:"shift",positionData:-_,children:[{type:"elem",elem:x}]},t),E=st.makeSpan(["root"],[A]);return st.makeSpan(["mord","sqrt"],[E,v],t)}else return st.makeSpan(["mord","sqrt"],[v],t)},mathmlBuilder(l,t){var{body:e,index:i}=l;return i?new Ct.MathNode("mroot",[qe(e,t),qe(i,t)]):new Ct.MathNode("msqrt",[qe(e,t)])}});var L4={display:ee.DISPLAY,text:ee.TEXT,script:ee.SCRIPT,scriptscript:ee.SCRIPTSCRIPT};It({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l,t){var{breakOnTokenText:e,funcName:i,parser:r}=l,a=r.parseExpression(!0,e),o=i.slice(1,i.length-5);return{type:"styling",mode:r.mode,style:o,body:a}},htmlBuilder(l,t){var e=L4[l.style],i=t.havingStyle(e).withFont("");return Rv(l.body,i,t)},mathmlBuilder(l,t){var e=L4[l.style],i=t.havingStyle(e),r=dn(l.body,i),a=new Ct.MathNode("mstyle",r),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},u=o[l.style];return a.setAttribute("scriptlevel",u[0]),a.setAttribute("displaystyle",u[1]),a}});var tw=function(t,e){var i=t.base;if(i)if(i.type==="op"){var r=i.limits&&(e.style.size===ee.DISPLAY.size||i.alwaysHandleSupSub);return r?po:null}else if(i.type==="operatorname"){var a=i.alwaysHandleSupSub&&(e.style.size===ee.DISPLAY.size||i.limits);return a?Mv:null}else{if(i.type==="accent")return Re.isCharacterBox(i.base)?sm:null;if(i.type==="horizBrace"){var o=!t.sub;return o===i.isOver?Ev:null}else return null}else return null};ma({type:"supsub",htmlBuilder(l,t){var e=tw(l,t);if(e)return e(l,t);var{base:i,sup:r,sub:a}=l,o=Ee(i,t),u,h,f=t.fontMetrics(),m=0,p=0,b=i&&Re.isCharacterBox(i);if(r){var v=t.havingStyle(t.style.sup());u=Ee(r,v,t),b||(m=o.height-v.fontMetrics().supDrop*v.sizeMultiplier/t.sizeMultiplier)}if(a){var w=t.havingStyle(t.style.sub());h=Ee(a,w,t),b||(p=o.depth+w.fontMetrics().subDrop*w.sizeMultiplier/t.sizeMultiplier)}var x;t.style===ee.DISPLAY?x=f.sup1:t.style.cramped?x=f.sup3:x=f.sup2;var _=t.sizeMultiplier,A=Nt(.5/f.ptPerEm/_),E=null;if(h){var C=l.base&&l.base.type==="op"&&l.base.name&&(l.base.name==="\\oiint"||l.base.name==="\\oiiint");(o instanceof Hn||C)&&(E=Nt(-o.italic))}var N;if(u&&h){m=Math.max(m,x,u.depth+.25*f.xHeight),p=Math.max(p,f.sub2);var D=f.defaultRuleThickness,F=4*D;if(m-u.depth-(h.height-p)<F){p=F-(m-u.depth)+h.height;var B=.8*f.xHeight-(m-u.depth);B>0&&(m+=B,p-=B)}var Y=[{type:"elem",elem:h,shift:p,marginRight:A,marginLeft:E},{type:"elem",elem:u,shift:-m,marginRight:A}];N=st.makeVList({positionType:"individualShift",children:Y},t)}else if(h){p=Math.max(p,f.sub1,h.height-.8*f.xHeight);var j=[{type:"elem",elem:h,marginLeft:E,marginRight:A}];N=st.makeVList({positionType:"shift",positionData:p,children:j},t)}else if(u)m=Math.max(m,x,u.depth+.25*f.xHeight),N=st.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:u,marginRight:A}]},t);else throw new Error("supsub must have either sup or sub.");var et=vf(o,"right")||"mord";return st.makeSpan([et],[o,st.makeSpan(["msupsub"],[N])],t)},mathmlBuilder(l,t){var e=!1,i,r;l.base&&l.base.type==="horizBrace"&&(r=!!l.sup,r===l.base.isOver&&(e=!0,i=l.base.isOver)),l.base&&(l.base.type==="op"||l.base.type==="operatorname")&&(l.base.parentIsSupSub=!0);var a=[qe(l.base,t)];l.sub&&a.push(qe(l.sub,t)),l.sup&&a.push(qe(l.sup,t));var o;if(e)o=i?"mover":"munder";else if(l.sub)if(l.sup){var f=l.base;f&&f.type==="op"&&f.limits&&t.style===ee.DISPLAY||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(t.style===ee.DISPLAY||f.limits)?o="munderover":o="msubsup"}else{var h=l.base;h&&h.type==="op"&&h.limits&&(t.style===ee.DISPLAY||h.alwaysHandleSupSub)||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(h.limits||t.style===ee.DISPLAY)?o="munder":o="msub"}else{var u=l.base;u&&u.type==="op"&&u.limits&&(t.style===ee.DISPLAY||u.alwaysHandleSupSub)||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(u.limits||t.style===ee.DISPLAY)?o="mover":o="msup"}return new Ct.MathNode(o,a)}});ma({type:"atom",htmlBuilder(l,t){return st.mathsym(l.text,l.mode,t,["m"+l.family])},mathmlBuilder(l,t){var e=new Ct.MathNode("mo",[jn(l.text,l.mode)]);if(l.family==="bin"){var i=nm(l,t);i==="bold-italic"&&e.setAttribute("mathvariant",i)}else l.family==="punct"?e.setAttribute("separator","true"):(l.family==="open"||l.family==="close")&&e.setAttribute("stretchy","false");return e}});var Dv={mi:"italic",mn:"normal",mtext:"normal"};ma({type:"mathord",htmlBuilder(l,t){return st.makeOrd(l,t,"mathord")},mathmlBuilder(l,t){var e=new Ct.MathNode("mi",[jn(l.text,l.mode,t)]),i=nm(l,t)||"italic";return i!==Dv[e.type]&&e.setAttribute("mathvariant",i),e}});ma({type:"textord",htmlBuilder(l,t){return st.makeOrd(l,t,"textord")},mathmlBuilder(l,t){var e=jn(l.text,l.mode,t),i=nm(l,t)||"normal",r;return l.mode==="text"?r=new Ct.MathNode("mtext",[e]):/[0-9]/.test(l.text)?r=new Ct.MathNode("mn",[e]):l.text==="\\prime"?r=new Ct.MathNode("mo",[e]):r=new Ct.MathNode("mi",[e]),i!==Dv[r.type]&&r.setAttribute("mathvariant",i),r}});var Xd={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Kd={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ma({type:"spacing",htmlBuilder(l,t){if(Kd.hasOwnProperty(l.text)){var e=Kd[l.text].className||"";if(l.mode==="text"){var i=st.makeOrd(l,t,"textord");return i.classes.push(e),i}else return st.makeSpan(["mspace",e],[st.mathsym(l.text,l.mode,t)],t)}else{if(Xd.hasOwnProperty(l.text))return st.makeSpan(["mspace",Xd[l.text]],[],t);throw new Mt('Unknown type of space "'+l.text+'"')}},mathmlBuilder(l,t){var e;if(Kd.hasOwnProperty(l.text))e=new Ct.MathNode("mtext",[new Ct.TextNode(" ")]);else{if(Xd.hasOwnProperty(l.text))return new Ct.MathNode("mspace");throw new Mt('Unknown type of space "'+l.text+'"')}return e}});var B4=()=>{var l=new Ct.MathNode("mtd",[]);return l.setAttribute("width","50%"),l};ma({type:"tag",mathmlBuilder(l,t){var e=new Ct.MathNode("mtable",[new Ct.MathNode("mtr",[B4(),new Ct.MathNode("mtd",[zs(l.body,t)]),B4(),new Ct.MathNode("mtd",[zs(l.tag,t)])])]);return e.setAttribute("width","100%"),e}});var I4={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},F4={"\\textbf":"textbf","\\textmd":"textmd"},ew={"\\textit":"textit","\\textup":"textup"},P4=(l,t)=>{var e=l.font;if(e){if(I4[e])return t.withTextFontFamily(I4[e]);if(F4[e])return t.withTextFontWeight(F4[e]);if(e==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(ew[e])};It({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];return{type:"text",mode:e.mode,body:di(r),font:i}},htmlBuilder(l,t){var e=P4(l,t),i=_i(l.body,e,!0);return st.makeSpan(["mord","text"],i,e)},mathmlBuilder(l,t){var e=P4(l,t);return zs(l.body,e)}});It({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(l,t){var{parser:e}=l;return{type:"underline",mode:e.mode,body:t[0]}},htmlBuilder(l,t){var e=Ee(l.body,t),i=st.makeLineSpan("underline-line",t),r=t.fontMetrics().defaultRuleThickness,a=st.makeVList({positionType:"top",positionData:e.height,children:[{type:"kern",size:r},{type:"elem",elem:i},{type:"kern",size:3*r},{type:"elem",elem:e}]},t);return st.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(l,t){var e=new Ct.MathNode("mo",[new Ct.TextNode("‾")]);e.setAttribute("stretchy","true");var i=new Ct.MathNode("munder",[qe(l.body,t),e]);return i.setAttribute("accentunder","true"),i}});It({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(l,t){var{parser:e}=l;return{type:"vcenter",mode:e.mode,body:t[0]}},htmlBuilder(l,t){var e=Ee(l.body,t),i=t.fontMetrics().axisHeight,r=.5*(e.height-i-(e.depth+i));return st.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:e}]},t)},mathmlBuilder(l,t){return new Ct.MathNode("mpadded",[qe(l.body,t)],["vcenter"])}});It({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(l,t,e){throw new Mt("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(l,t){for(var e=U4(l),i=[],r=t.havingStyle(t.style.text()),a=0;a<e.length;a++){var o=e[a];o==="~"&&(o="\\textasciitilde"),i.push(st.makeSymbol(o,"Typewriter-Regular",l.mode,r,["mord","texttt"]))}return st.makeSpan(["mord","text"].concat(r.sizingClasses(t)),st.tryCombineChars(i),r)},mathmlBuilder(l,t){var e=new Ct.TextNode(U4(l)),i=new Ct.MathNode("mtext",[e]);return i.setAttribute("mathvariant","monospace"),i}});var U4=l=>l.body.replace(/ /g,l.star?"␣":" "),Cs=tv,Nv=`[ \r
	]`,iw="\\\\[a-zA-Z@]+",nw="\\\\[^\uD800-\uDFFF]",rw="("+iw+")"+Nv+"*",sw=`\\\\(
|[ \r	]+
?)[ \r	]*`,Sf="[̀-ͯ]",aw=new RegExp(Sf+"+$"),ow="("+Nv+"+)|"+(sw+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(Sf+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Sf+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+rw)+("|"+nw+")");class H4{constructor(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp(ow,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,e){this.catcodes[t]=e}lex(){var t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new An("EOF",new hn(this,e,e));var i=this.tokenRegex.exec(t);if(i===null||i.index!==e)throw new Mt("Unexpected character: '"+t[e]+"'",new An(t[e],new hn(this,e,e+1)));var r=i[6]||i[3]||(i[2]?"\\ ":" ");if(this.catcodes[r]===14){var a=t.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new An(r,new hn(this,e,this.tokenRegex.lastIndex))}}class lw{constructor(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Mt("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(t[e]==null?delete this.current[e]:this.current[e]=t[e])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,e,i){if(i===void 0&&(i=!1),i){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}e==null?delete this.current[t]:this.current[t]=e}}var cw=wv;I("\\noexpand",function(l){var t=l.popToken();return l.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});I("\\expandafter",function(l){var t=l.popToken();return l.expandOnce(!0),{tokens:[t],numArgs:0}});I("\\@firstoftwo",function(l){var t=l.consumeArgs(2);return{tokens:t[0],numArgs:0}});I("\\@secondoftwo",function(l){var t=l.consumeArgs(2);return{tokens:t[1],numArgs:0}});I("\\@ifnextchar",function(l){var t=l.consumeArgs(3);l.consumeSpaces();var e=l.future();return t[0].length===1&&t[0][0].text===e.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});I("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");I("\\TextOrMath",function(l){var t=l.consumeArgs(2);return l.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var j4={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};I("\\char",function(l){var t=l.popToken(),e,i="";if(t.text==="'")e=8,t=l.popToken();else if(t.text==='"')e=16,t=l.popToken();else if(t.text==="`")if(t=l.popToken(),t.text[0]==="\\")i=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new Mt("\\char` missing argument");i=t.text.charCodeAt(0)}else e=10;if(e){if(i=j4[t.text],i==null||i>=e)throw new Mt("Invalid base-"+e+" digit "+t.text);for(var r;(r=j4[l.future().text])!=null&&r<e;)i*=e,i+=r,l.popToken()}return"\\@char{"+i+"}"});var fm=(l,t,e,i)=>{var r=l.consumeArg().tokens;if(r.length!==1)throw new Mt("\\newcommand's first argument must be a macro name");var a=r[0].text,o=l.isDefined(a);if(o&&!t)throw new Mt("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!o&&!e)throw new Mt("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var u=0;if(r=l.consumeArg().tokens,r.length===1&&r[0].text==="["){for(var h="",f=l.expandNextToken();f.text!=="]"&&f.text!=="EOF";)h+=f.text,f=l.expandNextToken();if(!h.match(/^\s*[0-9]+\s*$/))throw new Mt("Invalid number of arguments: "+h);u=parseInt(h),r=l.consumeArg().tokens}return o&&i||l.macros.set(a,{tokens:r,numArgs:u}),""};I("\\newcommand",l=>fm(l,!1,!0,!1));I("\\renewcommand",l=>fm(l,!0,!1,!1));I("\\providecommand",l=>fm(l,!0,!0,!0));I("\\message",l=>{var t=l.consumeArgs(1)[0];return console.log(t.reverse().map(e=>e.text).join("")),""});I("\\errmessage",l=>{var t=l.consumeArgs(1)[0];return console.error(t.reverse().map(e=>e.text).join("")),""});I("\\show",l=>{var t=l.popToken(),e=t.text;return console.log(t,l.macros.get(e),Cs[e],$e.math[e],$e.text[e]),""});I("\\bgroup","{");I("\\egroup","}");I("~","\\nobreakspace");I("\\lq","`");I("\\rq","'");I("\\aa","\\r a");I("\\AA","\\r A");I("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");I("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");I("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");I("ℬ","\\mathscr{B}");I("ℰ","\\mathscr{E}");I("ℱ","\\mathscr{F}");I("ℋ","\\mathscr{H}");I("ℐ","\\mathscr{I}");I("ℒ","\\mathscr{L}");I("ℳ","\\mathscr{M}");I("ℛ","\\mathscr{R}");I("ℭ","\\mathfrak{C}");I("ℌ","\\mathfrak{H}");I("ℨ","\\mathfrak{Z}");I("\\Bbbk","\\Bbb{k}");I("·","\\cdotp");I("\\llap","\\mathllap{\\textrm{#1}}");I("\\rlap","\\mathrlap{\\textrm{#1}}");I("\\clap","\\mathclap{\\textrm{#1}}");I("\\mathstrut","\\vphantom{(}");I("\\underbar","\\underline{\\text{#1}}");I("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');I("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");I("\\ne","\\neq");I("≠","\\neq");I("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");I("∉","\\notin");I("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");I("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");I("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");I("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");I("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");I("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");I("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");I("⟂","\\perp");I("‼","\\mathclose{!\\mkern-0.8mu!}");I("∌","\\notni");I("⌜","\\ulcorner");I("⌝","\\urcorner");I("⌞","\\llcorner");I("⌟","\\lrcorner");I("©","\\copyright");I("®","\\textregistered");I("️","\\textregistered");I("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');I("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');I("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');I("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');I("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");I("⋮","\\vdots");I("\\varGamma","\\mathit{\\Gamma}");I("\\varDelta","\\mathit{\\Delta}");I("\\varTheta","\\mathit{\\Theta}");I("\\varLambda","\\mathit{\\Lambda}");I("\\varXi","\\mathit{\\Xi}");I("\\varPi","\\mathit{\\Pi}");I("\\varSigma","\\mathit{\\Sigma}");I("\\varUpsilon","\\mathit{\\Upsilon}");I("\\varPhi","\\mathit{\\Phi}");I("\\varPsi","\\mathit{\\Psi}");I("\\varOmega","\\mathit{\\Omega}");I("\\substack","\\begin{subarray}{c}#1\\end{subarray}");I("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");I("\\boxed","\\fbox{$\\displaystyle{#1}$}");I("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");I("\\implies","\\DOTSB\\;\\Longrightarrow\\;");I("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");I("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");I("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var G4={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};I("\\dots",function(l){var t="\\dotso",e=l.expandAfterFuture().text;return e in G4?t=G4[e]:(e.slice(0,4)==="\\not"||e in $e.math&&["bin","rel"].includes($e.math[e].group))&&(t="\\dotsb"),t});var mm={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};I("\\dotso",function(l){var t=l.future().text;return t in mm?"\\ldots\\,":"\\ldots"});I("\\dotsc",function(l){var t=l.future().text;return t in mm&&t!==","?"\\ldots\\,":"\\ldots"});I("\\cdots",function(l){var t=l.future().text;return t in mm?"\\@cdots\\,":"\\@cdots"});I("\\dotsb","\\cdots");I("\\dotsm","\\cdots");I("\\dotsi","\\!\\cdots");I("\\dotsx","\\ldots\\,");I("\\DOTSI","\\relax");I("\\DOTSB","\\relax");I("\\DOTSX","\\relax");I("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");I("\\,","\\tmspace+{3mu}{.1667em}");I("\\thinspace","\\,");I("\\>","\\mskip{4mu}");I("\\:","\\tmspace+{4mu}{.2222em}");I("\\medspace","\\:");I("\\;","\\tmspace+{5mu}{.2777em}");I("\\thickspace","\\;");I("\\!","\\tmspace-{3mu}{.1667em}");I("\\negthinspace","\\!");I("\\negmedspace","\\tmspace-{4mu}{.2222em}");I("\\negthickspace","\\tmspace-{5mu}{.277em}");I("\\enspace","\\kern.5em ");I("\\enskip","\\hskip.5em\\relax");I("\\quad","\\hskip1em\\relax");I("\\qquad","\\hskip2em\\relax");I("\\tag","\\@ifstar\\tag@literal\\tag@paren");I("\\tag@paren","\\tag@literal{({#1})}");I("\\tag@literal",l=>{if(l.macros.get("\\df@tag"))throw new Mt("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});I("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");I("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");I("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");I("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");I("\\newline","\\\\\\relax");I("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Ov=Nt(dr["Main-Regular"][84][1]-.7*dr["Main-Regular"][65][1]);I("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Ov+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");I("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Ov+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");I("\\hspace","\\@ifstar\\@hspacer\\@hspace");I("\\@hspace","\\hskip #1\\relax");I("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");I("\\ordinarycolon",":");I("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");I("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');I("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');I("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');I("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');I("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');I("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');I("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');I("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');I("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');I("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');I("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');I("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');I("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');I("∷","\\dblcolon");I("∹","\\eqcolon");I("≔","\\coloneqq");I("≕","\\eqqcolon");I("⩴","\\Coloneqq");I("\\ratio","\\vcentcolon");I("\\coloncolon","\\dblcolon");I("\\colonequals","\\coloneqq");I("\\coloncolonequals","\\Coloneqq");I("\\equalscolon","\\eqqcolon");I("\\equalscoloncolon","\\Eqqcolon");I("\\colonminus","\\coloneq");I("\\coloncolonminus","\\Coloneq");I("\\minuscolon","\\eqcolon");I("\\minuscoloncolon","\\Eqcolon");I("\\coloncolonapprox","\\Colonapprox");I("\\coloncolonsim","\\Colonsim");I("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");I("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");I("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");I("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");I("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");I("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");I("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");I("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");I("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");I("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");I("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");I("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");I("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");I("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");I("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");I("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");I("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");I("\\nleqq","\\html@mathml{\\@nleqq}{≰}");I("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");I("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");I("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");I("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");I("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");I("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");I("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");I("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");I("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");I("\\imath","\\html@mathml{\\@imath}{ı}");I("\\jmath","\\html@mathml{\\@jmath}{ȷ}");I("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");I("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");I("⟦","\\llbracket");I("⟧","\\rrbracket");I("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");I("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");I("⦃","\\lBrace");I("⦄","\\rBrace");I("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");I("⦵","\\minuso");I("\\darr","\\downarrow");I("\\dArr","\\Downarrow");I("\\Darr","\\Downarrow");I("\\lang","\\langle");I("\\rang","\\rangle");I("\\uarr","\\uparrow");I("\\uArr","\\Uparrow");I("\\Uarr","\\Uparrow");I("\\N","\\mathbb{N}");I("\\R","\\mathbb{R}");I("\\Z","\\mathbb{Z}");I("\\alef","\\aleph");I("\\alefsym","\\aleph");I("\\Alpha","\\mathrm{A}");I("\\Beta","\\mathrm{B}");I("\\bull","\\bullet");I("\\Chi","\\mathrm{X}");I("\\clubs","\\clubsuit");I("\\cnums","\\mathbb{C}");I("\\Complex","\\mathbb{C}");I("\\Dagger","\\ddagger");I("\\diamonds","\\diamondsuit");I("\\empty","\\emptyset");I("\\Epsilon","\\mathrm{E}");I("\\Eta","\\mathrm{H}");I("\\exist","\\exists");I("\\harr","\\leftrightarrow");I("\\hArr","\\Leftrightarrow");I("\\Harr","\\Leftrightarrow");I("\\hearts","\\heartsuit");I("\\image","\\Im");I("\\infin","\\infty");I("\\Iota","\\mathrm{I}");I("\\isin","\\in");I("\\Kappa","\\mathrm{K}");I("\\larr","\\leftarrow");I("\\lArr","\\Leftarrow");I("\\Larr","\\Leftarrow");I("\\lrarr","\\leftrightarrow");I("\\lrArr","\\Leftrightarrow");I("\\Lrarr","\\Leftrightarrow");I("\\Mu","\\mathrm{M}");I("\\natnums","\\mathbb{N}");I("\\Nu","\\mathrm{N}");I("\\Omicron","\\mathrm{O}");I("\\plusmn","\\pm");I("\\rarr","\\rightarrow");I("\\rArr","\\Rightarrow");I("\\Rarr","\\Rightarrow");I("\\real","\\Re");I("\\reals","\\mathbb{R}");I("\\Reals","\\mathbb{R}");I("\\Rho","\\mathrm{P}");I("\\sdot","\\cdot");I("\\sect","\\S");I("\\spades","\\spadesuit");I("\\sub","\\subset");I("\\sube","\\subseteq");I("\\supe","\\supseteq");I("\\Tau","\\mathrm{T}");I("\\thetasym","\\vartheta");I("\\weierp","\\wp");I("\\Zeta","\\mathrm{Z}");I("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");I("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");I("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");I("\\bra","\\mathinner{\\langle{#1}|}");I("\\ket","\\mathinner{|{#1}\\rangle}");I("\\braket","\\mathinner{\\langle{#1}\\rangle}");I("\\Bra","\\left\\langle#1\\right|");I("\\Ket","\\left|#1\\right\\rangle");var zv=l=>t=>{var e=t.consumeArg().tokens,i=t.consumeArg().tokens,r=t.consumeArg().tokens,a=t.consumeArg().tokens,o=t.macros.get("|"),u=t.macros.get("\\|");t.macros.beginGroup();var h=p=>b=>{l&&(b.macros.set("|",o),r.length&&b.macros.set("\\|",u));var v=p;if(!p&&r.length){var w=b.future();w.text==="|"&&(b.popToken(),v=!0)}return{tokens:v?r:i,numArgs:0}};t.macros.set("|",h(!1)),r.length&&t.macros.set("\\|",h(!0));var f=t.consumeArg().tokens,m=t.expandTokens([...a,...f,...e]);return t.macros.endGroup(),{tokens:m.reverse(),numArgs:0}};I("\\bra@ket",zv(!1));I("\\bra@set",zv(!0));I("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");I("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");I("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");I("\\angln","{\\angl n}");I("\\blue","\\textcolor{##6495ed}{#1}");I("\\orange","\\textcolor{##ffa500}{#1}");I("\\pink","\\textcolor{##ff00af}{#1}");I("\\red","\\textcolor{##df0030}{#1}");I("\\green","\\textcolor{##28ae7b}{#1}");I("\\gray","\\textcolor{gray}{#1}");I("\\purple","\\textcolor{##9d38bd}{#1}");I("\\blueA","\\textcolor{##ccfaff}{#1}");I("\\blueB","\\textcolor{##80f6ff}{#1}");I("\\blueC","\\textcolor{##63d9ea}{#1}");I("\\blueD","\\textcolor{##11accd}{#1}");I("\\blueE","\\textcolor{##0c7f99}{#1}");I("\\tealA","\\textcolor{##94fff5}{#1}");I("\\tealB","\\textcolor{##26edd5}{#1}");I("\\tealC","\\textcolor{##01d1c1}{#1}");I("\\tealD","\\textcolor{##01a995}{#1}");I("\\tealE","\\textcolor{##208170}{#1}");I("\\greenA","\\textcolor{##b6ffb0}{#1}");I("\\greenB","\\textcolor{##8af281}{#1}");I("\\greenC","\\textcolor{##74cf70}{#1}");I("\\greenD","\\textcolor{##1fab54}{#1}");I("\\greenE","\\textcolor{##0d923f}{#1}");I("\\goldA","\\textcolor{##ffd0a9}{#1}");I("\\goldB","\\textcolor{##ffbb71}{#1}");I("\\goldC","\\textcolor{##ff9c39}{#1}");I("\\goldD","\\textcolor{##e07d10}{#1}");I("\\goldE","\\textcolor{##a75a05}{#1}");I("\\redA","\\textcolor{##fca9a9}{#1}");I("\\redB","\\textcolor{##ff8482}{#1}");I("\\redC","\\textcolor{##f9685d}{#1}");I("\\redD","\\textcolor{##e84d39}{#1}");I("\\redE","\\textcolor{##bc2612}{#1}");I("\\maroonA","\\textcolor{##ffbde0}{#1}");I("\\maroonB","\\textcolor{##ff92c6}{#1}");I("\\maroonC","\\textcolor{##ed5fa6}{#1}");I("\\maroonD","\\textcolor{##ca337c}{#1}");I("\\maroonE","\\textcolor{##9e034e}{#1}");I("\\purpleA","\\textcolor{##ddd7ff}{#1}");I("\\purpleB","\\textcolor{##c6b9fc}{#1}");I("\\purpleC","\\textcolor{##aa87ff}{#1}");I("\\purpleD","\\textcolor{##7854ab}{#1}");I("\\purpleE","\\textcolor{##543b78}{#1}");I("\\mintA","\\textcolor{##f5f9e8}{#1}");I("\\mintB","\\textcolor{##edf2df}{#1}");I("\\mintC","\\textcolor{##e0e5cc}{#1}");I("\\grayA","\\textcolor{##f6f7f7}{#1}");I("\\grayB","\\textcolor{##f0f1f2}{#1}");I("\\grayC","\\textcolor{##e3e5e6}{#1}");I("\\grayD","\\textcolor{##d6d8da}{#1}");I("\\grayE","\\textcolor{##babec2}{#1}");I("\\grayF","\\textcolor{##888d93}{#1}");I("\\grayG","\\textcolor{##626569}{#1}");I("\\grayH","\\textcolor{##3b3e40}{#1}");I("\\grayI","\\textcolor{##21242c}{#1}");I("\\kaBlue","\\textcolor{##314453}{#1}");I("\\kaGreen","\\textcolor{##71B307}{#1}");var Lv={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class uw{constructor(t,e,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new lw(cw,e.macros),this.mode=i,this.stack=[]}feed(t){this.lexer=new H4(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var e,i,r;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;e=this.popToken(),{tokens:r,end:i}=this.consumeArg(["]"])}else({tokens:r,start:e,end:i}=this.consumeArg());return this.pushToken(new An("EOF",i.loc)),this.pushTokens(r),new An("",hn.range(e,i))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var e=[],i=t&&t.length>0;i||this.consumeSpaces();var r=this.future(),a,o=0,u=0;do{if(a=this.popToken(),e.push(a),a.text==="{")++o;else if(a.text==="}"){if(--o,o===-1)throw new Mt("Extra }",a)}else if(a.text==="EOF")throw new Mt("Unexpected end of input in a macro argument, expected '"+(t&&i?t[u]:"}")+"'",a);if(t&&i)if((o===0||o===1&&t[u]==="{")&&a.text===t[u]){if(++u,u===t.length){e.splice(-u,u);break}}else u=0}while(o!==0||i);return r.text==="{"&&e[e.length-1].text==="}"&&(e.pop(),e.shift()),e.reverse(),{tokens:e,start:r,end:a}}consumeArgs(t,e){if(e){if(e.length!==t+1)throw new Mt("The length of delimiters doesn't match the number of args!");for(var i=e[0],r=0;r<i.length;r++){var a=this.popToken();if(i[r]!==a.text)throw new Mt("Use of the macro doesn't match its definition",a)}}for(var o=[],u=0;u<t;u++)o.push(this.consumeArg(e&&e[u+1]).tokens);return o}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new Mt("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var e=this.popToken(),i=e.text,r=e.noexpand?null:this._getExpansion(i);if(r==null||t&&r.unexpandable){if(t&&r==null&&i[0]==="\\"&&!this.isDefined(i))throw new Mt("Undefined control sequence: "+i);return this.pushToken(e),!1}this.countExpansion(1);var a=r.tokens,o=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs){a=a.slice();for(var u=a.length-1;u>=0;--u){var h=a[u];if(h.text==="#"){if(u===0)throw new Mt("Incomplete placeholder at end of macro body",h);if(h=a[--u],h.text==="#")a.splice(u+1,1);else if(/^[1-9]$/.test(h.text))a.splice(u,2,...o[+h.text-1]);else throw new Mt("Not a valid argument number",h)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new An(t)]):void 0}expandTokens(t){var e=[],i=this.stack.length;for(this.pushTokens(t);this.stack.length>i;)if(this.expandOnce(!0)===!1){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),e.push(r)}return this.countExpansion(e.length),e}expandMacroAsText(t){var e=this.expandMacro(t);return e&&e.map(i=>i.text).join("")}_getExpansion(t){var e=this.macros.get(t);if(e==null)return e;if(t.length===1){var i=this.lexer.catcodes[t];if(i!=null&&i!==13)return}var r=typeof e=="function"?e(this):e;if(typeof r=="string"){var a=0;if(r.indexOf("#")!==-1)for(var o=r.replace(/##/g,"");o.indexOf("#"+(a+1))!==-1;)++a;for(var u=new H4(r,this.settings),h=[],f=u.lex();f.text!=="EOF";)h.push(f),f=u.lex();h.reverse();var m={tokens:h,numArgs:a};return m}return r}isDefined(t){return this.macros.has(t)||Cs.hasOwnProperty(t)||$e.math.hasOwnProperty(t)||$e.text.hasOwnProperty(t)||Lv.hasOwnProperty(t)}isExpandable(t){var e=this.macros.get(t);return e!=null?typeof e=="string"||typeof e=="function"||!e.unexpandable:Cs.hasOwnProperty(t)&&!Cs[t].primitive}}var q4=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,M0=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),Zd={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},$4={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};class uu{constructor(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new uw(t,e,this.mode),this.settings=e,this.leftrightDepth=0}expect(t,e){if(e===void 0&&(e=!0),this.fetch().text!==t)throw new Mt("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());e&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var e=this.nextToken;this.consume(),this.gullet.pushToken(new An("}")),this.gullet.pushTokens(t);var i=this.parseExpression(!1);return this.expect("}"),this.nextToken=e,i}parseExpression(t,e){for(var i=[];;){this.mode==="math"&&this.consumeSpaces();var r=this.fetch();if(uu.endOfExpression.indexOf(r.text)!==-1||e&&r.text===e||t&&Cs[r.text]&&Cs[r.text].infix)break;var a=this.parseAtom(e);if(a){if(a.type==="internal")continue}else break;i.push(a)}return this.mode==="text"&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(t){for(var e=-1,i,r=0;r<t.length;r++)if(t[r].type==="infix"){if(e!==-1)throw new Mt("only one infix operator per group",t[r].token);e=r,i=t[r].replaceWith}if(e!==-1&&i){var a,o,u=t.slice(0,e),h=t.slice(e+1);u.length===1&&u[0].type==="ordgroup"?a=u[0]:a={type:"ordgroup",mode:this.mode,body:u},h.length===1&&h[0].type==="ordgroup"?o=h[0]:o={type:"ordgroup",mode:this.mode,body:h};var f;return i==="\\\\abovefrac"?f=this.callFunction(i,[a,t[e],o],[]):f=this.callFunction(i,[a,o],[]),[f]}else return t}handleSupSubscript(t){var e=this.fetch(),i=e.text;this.consume(),this.consumeSpaces();var r;do{var a;r=this.parseGroup(t)}while(((a=r)==null?void 0:a.type)==="internal");if(!r)throw new Mt("Expected group after '"+i+"'",e);return r}formatUnsupportedCmd(t){for(var e=[],i=0;i<t.length;i++)e.push({type:"textord",mode:"text",text:t[i]});var r={type:"text",mode:this.mode,body:e},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]};return a}parseAtom(t){var e=this.parseGroup("atom",t);if(e?.type==="internal"||this.mode==="text")return e;for(var i,r;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(e&&e.type==="op"){var o=a.text==="\\limits";e.limits=o,e.alwaysHandleSupSub=!0}else if(e&&e.type==="operatorname")e.alwaysHandleSupSub&&(e.limits=a.text==="\\limits");else throw new Mt("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(i)throw new Mt("Double superscript",a);i=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(r)throw new Mt("Double subscript",a);r=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(i)throw new Mt("Double superscript",a);var u={type:"textord",mode:this.mode,text:"\\prime"},h=[u];for(this.consume();this.fetch().text==="'";)h.push(u),this.consume();this.fetch().text==="^"&&h.push(this.handleSupSubscript("superscript")),i={type:"ordgroup",mode:this.mode,body:h}}else if(M0[a.text]){var f=q4.test(a.text),m=[];for(m.push(new An(M0[a.text])),this.consume();;){var p=this.fetch().text;if(!M0[p]||q4.test(p)!==f)break;m.unshift(new An(M0[p])),this.consume()}var b=this.subparse(m);f?r={type:"ordgroup",mode:"math",body:b}:i={type:"ordgroup",mode:"math",body:b}}else break}return i||r?{type:"supsub",mode:this.mode,base:e,sup:i,sub:r}:e}parseFunction(t,e){var i=this.fetch(),r=i.text,a=Cs[r];if(!a)return null;if(this.consume(),e&&e!=="atom"&&!a.allowedInArgument)throw new Mt("Got function '"+r+"' with no arguments"+(e?" as "+e:""),i);if(this.mode==="text"&&!a.allowedInText)throw new Mt("Can't use function '"+r+"' in text mode",i);if(this.mode==="math"&&a.allowedInMath===!1)throw new Mt("Can't use function '"+r+"' in math mode",i);var{args:o,optArgs:u}=this.parseArguments(r,a);return this.callFunction(r,o,u,i,t)}callFunction(t,e,i,r,a){var o={funcName:t,parser:this,token:r,breakOnTokenText:a},u=Cs[t];if(u&&u.handler)return u.handler(o,e,i);throw new Mt("No function handler for "+t)}parseArguments(t,e){var i=e.numArgs+e.numOptionalArgs;if(i===0)return{args:[],optArgs:[]};for(var r=[],a=[],o=0;o<i;o++){var u=e.argTypes&&e.argTypes[o],h=o<e.numOptionalArgs;(e.primitive&&u==null||e.type==="sqrt"&&o===1&&a[0]==null)&&(u="primitive");var f=this.parseGroupOfType("argument to '"+t+"'",u,h);if(h)a.push(f);else if(f!=null)r.push(f);else throw new Mt("Null argument, please report this as a bug")}return{args:r,optArgs:a}}parseGroupOfType(t,e,i){switch(e){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,e);case"hbox":{var r=this.parseArgumentGroup(i,"text");return r!=null?{type:"styling",mode:r.mode,body:[r],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",i);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(i)throw new Mt("A primitive argument cannot be optional");var o=this.parseGroup(t);if(o==null)throw new Mt("Expected group as "+t,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new Mt("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,e){var i=this.gullet.scanArgument(e);if(i==null)return null;for(var r="",a;(a=this.fetch()).text!=="EOF";)r+=a.text,this.consume();return this.consume(),i.text=r,i}parseRegexGroup(t,e){for(var i=this.fetch(),r=i,a="",o;(o=this.fetch()).text!=="EOF"&&t.test(a+o.text);)r=o,a+=r.text,this.consume();if(a==="")throw new Mt("Invalid "+e+": '"+i.text+"'",i);return i.range(r,a)}parseColorGroup(t){var e=this.parseStringGroup("color",t);if(e==null)return null;var i=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!i)throw new Mt("Invalid color: '"+e.text+"'",e);var r=i[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(t){var e,i=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?e=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):e=this.parseStringGroup("size",t),!e)return null;!t&&e.text.length===0&&(e.text="0pt",i=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!r)throw new Mt("Invalid size: '"+e.text+"'",e);var a={number:+(r[1]+r[2]),unit:r[3]};if(!$b(a))throw new Mt("Invalid unit: '"+a.unit+"'",e);return{type:"size",mode:this.mode,value:a,isBlank:i}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var e=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),e==null)return null;var i=e.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(t,e){var i=this.gullet.scanArgument(t);if(i==null)return null;var r=this.mode;e&&this.switchMode(e),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:i.loc,body:a};return e&&this.switchMode(r),o}parseGroup(t,e){var i=this.fetch(),r=i.text,a;if(r==="{"||r==="\\begingroup"){this.consume();var o=r==="{"?"}":"\\endgroup";this.gullet.beginGroup();var u=this.parseExpression(!1,o),h=this.fetch();this.expect(o),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:hn.range(i,h),body:u,semisimple:r==="\\begingroup"||void 0}}else if(a=this.parseFunction(e,t)||this.parseSymbol(),a==null&&r[0]==="\\"&&!Lv.hasOwnProperty(r)){if(this.settings.throwOnError)throw new Mt("Undefined control sequence: "+r,i);a=this.formatUnsupportedCmd(r),this.consume()}return a}formLigatures(t){for(var e=t.length-1,i=0;i<e;++i){var r=t[i],a=r.text;a==="-"&&t[i+1].text==="-"&&(i+1<e&&t[i+2].text==="-"?(t.splice(i,3,{type:"textord",mode:"text",loc:hn.range(r,t[i+2]),text:"---"}),e-=2):(t.splice(i,2,{type:"textord",mode:"text",loc:hn.range(r,t[i+1]),text:"--"}),e-=1)),(a==="'"||a==="`")&&t[i+1].text===a&&(t.splice(i,2,{type:"textord",mode:"text",loc:hn.range(r,t[i+1]),text:a+a}),e-=1)}}parseSymbol(){var t=this.fetch(),e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();var i=e.slice(5),r=i.charAt(0)==="*";if(r&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new Mt(`\\verb assertion failed --
                    please report what input caused this bug`);return i=i.slice(1,-1),{type:"verb",mode:"text",body:i,star:r}}$4.hasOwnProperty(e[0])&&!$e[this.mode][e[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=$4[e[0]]+e.slice(1));var a=aw.exec(e);a&&(e=e.substring(0,a.index),e==="i"?e="ı":e==="j"&&(e="ȷ"));var o;if($e[this.mode][e]){this.settings.strict&&this.mode==="math"&&bf.indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);var u=$e[this.mode][e].group,h=hn.range(t),f;if(Q8.hasOwnProperty(u)){var m=u;f={type:"atom",mode:this.mode,family:m,loc:h,text:e}}else f={type:u,mode:this.mode,loc:h,text:e};o=f}else if(e.charCodeAt(0)>=128)this.settings.strict&&(qb(e.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'"'+(" ("+e.charCodeAt(0)+")"),t)),o={type:"textord",mode:"text",loc:hn.range(t),text:e};else return null;if(this.consume(),a)for(var p=0;p<a[0].length;p++){var b=a[0][p];if(!Zd[b])throw new Mt("Unknown accent ' "+b+"'",t);var v=Zd[b][this.mode]||Zd[b].text;if(!v)throw new Mt("Accent "+b+" unsupported in "+this.mode+" mode",t);o={type:"accent",mode:this.mode,loc:hn.range(t),label:v,isStretchy:!1,isShifty:!0,base:o}}return o}}uu.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var pm=function(t,e){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var i=new uu(t,e);delete i.gullet.macros.current["\\df@tag"];var r=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new Mt("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:i.subparse([new An("\\df@tag")])}]}return r},Bv=function(t,e,i){e.textContent="";var r=gm(t,i).toNode();e.appendChild(r)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Bv=function(){throw new Mt("KaTeX doesn't work in quirks mode.")});var hw=function(t,e){var i=gm(t,e).toMarkup();return i},dw=function(t,e){var i=new Wf(e);return pm(t,i)},Iv=function(t,e,i){if(i.throwOnError||!(t instanceof Mt))throw t;var r=st.makeSpan(["katex-error"],[new Hn(e)]);return r.setAttribute("title",t.toString()),r.setAttribute("style","color:"+i.errorColor),r},gm=function(t,e){var i=new Wf(e);try{var r=pm(t,i);return wx(r,t,i)}catch(a){return Iv(a,t,i)}},fw=function(t,e){var i=new Wf(e);try{var r=pm(t,i);return Sx(r,t,i)}catch(a){return Iv(a,t,i)}},mw="0.16.25",pw={Span:ql,Anchor:tm,SymbolNode:Hn,SvgNode:Vr,PathNode:Os,LineNode:gf},gw={version:mw,render:Bv,renderToString:hw,ParseError:Mt,SETTINGS_SCHEMA:z0,__parse:dw,__renderToDomTree:gm,__renderToHTMLTree:fw,__setFontMetrics:q8,__defineSymbol:S,__defineFunction:It,__defineMacro:I,__domTree:pw};const bw=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:？！。，：]|$)/,vw=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,yw=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function xw(l={}){return{extensions:[ww(l,V4(l,!1)),Sw(l,V4(l,!0))]}}function V4(l,t){return e=>gw.renderToString(e.text,{...l,displayMode:e.displayMode})+(t?`
`:"")}function ww(l,t){const e=l&&l.nonStandard,i=e?vw:bw;return{name:"inlineKatex",level:"inline",start(r){let a,o=r;for(;o;){if(a=o.indexOf("$"),a===-1)return;if((e?a>-1:a===0||o.charAt(a-1)===" ")&&o.substring(a).match(i))return a;o=o.substring(a+1).replace(/^\$+/,"")}},tokenizer(r,a){const o=r.match(i);if(o)return{type:"inlineKatex",raw:o[0],text:o[2].trim(),displayMode:o[1].length===2}},renderer:t}}function Sw(l,t){return{name:"blockKatex",level:"block",tokenizer(e,i){const r=e.match(yw);if(r)return{type:"blockKatex",raw:r[0],text:r[2].trim(),displayMode:r[1].length===2}},renderer:t}}lo.workerSrc=new URL("/ai-slide-generater/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const Xt={INITIAL:"initial",STRUCTURING:"structuring",STRUCTURED:"structured",SELECTING_THEME:"selecting_theme",CREATING_OUTLINE:"creating_outline",SELECTING_SECTION_HEADERS:"selecting_section_headers",GENERATING_OUTLINE:"generating_outline",OUTLINE_CREATED:"outline_created",GENERATING_SLIDES:"generating_slides",SLIDE_GENERATED:"slide_generated",ALL_SLIDES_GENERATED:"all_slides_generated"},or={structureText:l=>`### 指示
あなたは、与えられたテキストをクリーンアップし、論理構造を解析する専門家です。以下のテキストに含まれる、PDF抽出時に発生しがちな単語間の不自然なスペース（例：「ドキュメント」が「ドキュ メント」となっている箇所）を修正し、自然な文章にしてください。
その上で、内容を論理的に整理し、見出し、リスト、段落が明確に分かるMarkdown形式に再構成してください。元のテキストに含まれる重要な情報は一切省略しないでください。

### テキスト
${l}`,createOutline:(l,t,e)=>`### 指示
あなたはプロのプレゼンテーション構成作家です。以下のMarkdownテキストを分析し、最も効果的なプレゼンテーションの構成案をJSON形式で作成してください。

### 利用可能なテンプレート
- \`title_slide\`: 表紙
- \`agenda\`: 目次
- \`section_header\`: 章の区切り
- \`content_basic\`: **単純な箇条書き**（番号なし・あり両方）のための最も標準的なテンプレート。
- \`content_with_diagram\`: 文章と図解（インフォグラフィック）。
- \`three_points\`: 3つの要点を横並びで表示。
- \`vertical_steps\`: 時系列やステップ。
- \`comparison\`: **2つの項目（メリット/デメリット、A案/B案など）を比較・対比**するための専用テンプレート。
- \`table_basic\`: **表形式（テーブル）**。機能一覧、比較表、数値データなど。
- \`summary_or_thankyou\`: 最後のまとめ、または「ご聴取ありがとうございました」用。

### テンプレート選択の思考プロセスと具体例
あなたはMarkdownの各セクションを分析する際、以下の優先順位と思考プロセスでテンプレートを厳格に選択してください。

1.  **[最優先] 表形式か？**: 内容が機能一覧、数値データ、仕様比較など、明らかに表（テーブル）で表現するのが最適な場合は、必ず \`table_basic\` を選択します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### 機能比較
        | 機能 | プランA | プランB |
        |---|---|---|
        | 基本機能 | 〇 | 〇 |
        | 高度な分析 | - | 〇 |
        \`\`\`
    * **出力テンプレート**: \`table_basic\`

2.  **[次点] 比較・対比か？**: 内容が2つの項目（例：メリット/デメリット、A案/B案、従来/新規）を明確に比較・対比している場合は、必ず \`comparison\` を選択します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### 従来システムとの比較
        **従来システム**
        - 課題1: コストが高い
        - 課題2: 手動作業が多い
        **新システム**
        - 解決策1: 50%のコスト削減
        - 解決策2: 自動化を実現
        \`\`\`
    * **出力テンプレート**: \`comparison\`

3.  **[次点] 3つの要点か？**: 内容が3つの主要な特徴、ステップ、利点を並列で紹介している場合は、\`three_points\` の使用を優先します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### 3つのメリット
        1.  **コスト削減**: ...
        2.  **効率化**: ...
        3.  **セキュリティ向上**: ...
        \`\`\`
    * **出力テンプレート**: \`three_points\`

4.  **[次点] ステップか？**: 内容が時系列や手順を示している場合は、\`vertical_steps\` を選択します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### 導入プロセス
        - ステップ1: ヒアリング
        - ステップ2: 設計
        - ステップ3: 開発
        \`\`\`
    * **出力テンプレート**: \`vertical_steps\`

5.  **[次点] 図解が必要か？**: 内容が抽象的な概念や関係性（例：システム構成図、相関関係）を含み、テキストだけでは伝わりにくい場合は、\`content_with_diagram\` を選択します。
    * **入力例 (Markdown)**:
        \`\`\`markdown
        #### システム構成
        本システムは、ユーザー、アプリケーションサーバー、データベースの3層構造で構成されており...
        \`\`\`
    * **出力テンプレート**: \`content_with_diagram\`

6.  **[最終手段] 単純なリストか？**: 上記のいずれにも当てはまらない、単純な箇条書きや説明文の場合は、\`content_basic\` を選択します。

### 条件
- 1枚目は必ず\`template\`が\`title_slide\`のタイトルページとしてください。タイトルはMarkdownの内容から最も適切と思われるものを自動で設定してください。
- **【最重要・JSONエスケープルール】**: \`summary\`や\`description\`などのJSON文字列内にバックスラッシュ（\`\\\`）を含める場合は、必ず（\`\\\\\`）と二重にエスケープしてください。（例: \`"summary": "C:\\\\Windows"\`）
- **【文字数制限】**: スライドのタイトル（\`title\`キー）は、日本語で**27文字以内**の簡潔なものにしてください。長すぎて2行になるタイトルは避けてください。
- **最重要**: \`summary\`や各項目の説明は、**プレゼンテーションでそのまま使える簡潔な言葉**で記述し、必要に応じて箇条書き（- や 1.）を使用してください。

- **【強調ルール】**: \`summary\`, \`items\`, \`points\`, \`columns\`, \`table\` の各テキストを生成する際、**プレゼンテーションで特に重要となるキーワード、専門用語、またはキーとなる数値**は、必ずMarkdownの太字記法（\`**キーワード**\`）で囲んで積極的に強調してください。
- **【用語解説ルール】**: もし \`用語：その解説\` のような形式で記述する場合は、必ず \`**用語**：その解説\` のように、コロン（：）の前の用語部分を太字にしてください。

- **【数式表示ルール】**: もし内容に数式、変数、または計算式（例： \`y = ax + b\` や \`費用 - 収益\`）が含まれる場合は、**必ず KaTeX 形式**で記述してください。
  - **インライン数式**: 文中の数式は、シングルダラー（\`$\`）で囲んでください。（例: \`これは $y = ax + b$ の例です。\`）
  - **ブロック数式**: 独立した行の数式は、ダブルダラー（\`$$\`）で囲んでください。（例: \`$$ sum_{i=1}^{n} x_i $$ \`）
  - **【最重要】日本語の変数名**: 数式内で日本語の用語（例：\`課税譲渡所得金額\`）を使用する場合は、必ず \`	ext{...}\` コマンドで囲んでください。（例: \`$$ 	ext{課税譲渡所得金額} = 	ext{収入金額} - (	ext{取得費} + 	ext{譲渡費用}) - 	ext{特別控除額} $$ \`）

- **上記の専用テンプレート（table_basic, comparison, three_points など）のいずれにも当てはまらない**、単純な箇条書き（番号付き/なし）が中心のスライドを作成する場合に**のみ**、\`content_basic\` テンプレートを使用してください。
  - \`content_basic\` を選択した場合、**\`summary\`キーは絶対に空（""）**にし、代わりに **\`items\`キー** で「箇条書きの各項目（文字列）」の配列を生成してください。
  - **【最重要】\`items\` の各項目（文字列）の先頭には、ハイフン（-）やアスタリスク（*）、数字（1.）などのリストマーカーを**絶対に**含めないでください。（CSSで自動付与されます）
  - もし箇条書きを**ネスト（インデント）**させたい場合は、項目の先頭に**半角スペース2個**を挿入してください。（例： \`"  これが子項目です"\`）
  - 孫項目は半角スペース4個（\`"    これが孫項目です"\`）のように表現してください。
  - **【行数制限】**: スライドの視認性を保つため、\`content_basic\` の \`items\` 配列は **最大7行（7項目）程度** に収めてください。
  - **【自動分割】**: もし元のデータがこのサイズに **要約しきれないほど多い場合**、無理に1枚に押し込めたり、情報を省略したりしないでください。
  - **【分割ルール】**: その場合、\`template\` が \`content_basic\` のスライドを **複数枚に分割** してください。（例：1枚目のタイトルを「**主な特長 (1/2)**」、2枚目のタイトルを「**主な特長 (2/2)**」のようにし、8行目以降の項目を2枚目に配置してください。）

- **2つの項目を比較・対比**し、\`comparison\` テンプレートを使用する場合は、\`summary\`は空にし、代わりに\`columns\`というキーで2要素の配列を生成してください。

- **表形式（テーブル）が最適なデータ**（例：機能比較一覧、数値データ一覧など）を表現し、\`table_basic\` テンプレートを使用する場合は、
  - **\`summary\`キーは絶対に空（""）**にし、代わりに **\`table\`キー** で \`{ "headers": ["(ヘッダー1)", ...], "rows": [ ["(行1データ1)", ...], ["(行2データ1)", ...] ] }\` の形式のオブジェクトを生成してください。
  - **【表の重要ルール】**: スライドの視認性を保つため、\`table_basic\` の表は **最大10行、7列程度** に収めてください。
  - もし元のデータがこのサイズに **要約しきれないほど多い場合**、無理に1枚に押し込めず、\`template\` が \`table_basic\` のスライドを **複数枚に分割** してください。
    - （例：1枚目のタイトルを「**機能比較 (1/2)**」、2枚目のタイトルを「**機能比較 (2/2)**」のようにし、表の続きを2枚目に配置してください。この際、**ヘッダー行は両方のスライドに含めてください**。）

- **【▼▼▼ 修正点 ▼▼▼】**
- \`three_points\` テンプレートを使用する場合、
  - **\`summary\`キーは絶対に空（""）**にしてください。
  - 代わりに **\`points\`キー** で、**必ず3要素のオブジェクト配列**を生成してください。
  - 各オブジェクトには **\`title\`** (文字列), **\`summary\`** (文字列), **\`icon_description\`** (文字列) の3つのキーを**必ず含めてください**。
  
  - **【icon_description の超厳格ルール】**: \`icon_description\` キーには、**Lucide (lucide.dev) のアイコン名**（例: "check-circle", "braces", "database", "shield-check", "brain-cog"）を**単一の文字列**で指定してください。
  - **【禁止事項】**: **絶対に、説明文（例: "APIのアイコン"、"RAGの図"）や、日本語、スペースを含む文字列を指定しないでください。**
  - **【あなたの思考プロセス】**:
    1.  ポイントのタイトル（例: "API"）を理解します。
    2.  Lucideライブラリから最も関連性の高いアイコン名（例: "braces" や "code"）を1つだけ選びます。
    3.  その名前（"braces"）だけを \`icon_description\` キーに設定します。
  - （例: \`{"title": "API", "summary": "...", "icon_description": "braces"}\`）
- **【▲▲▲ 修正点ここまで ▲▲▲】**

- **【▼▼▼ 修正点 ▼▼▼】**
- **【vertical_steps ルール】**
- \`vertical_steps\` テンプレートを使用する場合、
  - **\`summary\`キーは絶対に空（""）**にしてください。
  - 代わりに **\`items\`キー** で、**オブジェクトの配列**を生成してください。
  - 各オブジェクトには **\`title\`** (文字列) と **\`description\`** (文字列、そのステップの簡潔な説明) の2つのキーを**必ず含めてください**。
  - （例: \`{"title": "ステップ1：申請", "description": "必要な書類を準備します。"}\`）
- **【▲▲▲ 修正点ここまで ▲▲▲】**

- **【▼▼▼ 修正点 ▼▼▼】**
- \`content_with_diagram\` テンプレートを選択した場合、
  - **スライドの本文を必ず \`summary\` キーに記述**してください。
  - 同時に、**必ず \`infographic\` キー** で \`{ "needed": true, "description": "AIが図解を生成するための詳細な指示..." }\` の形式のオブジェクトを生成してください。
  - AIへの指示（description）は、\`summary\`の内容を図解するために具体的に記述してください。
- **【▲▲▲ 修正点ここまで ▲▲▲】**

${t?'- 2枚目は必ず"アジェンダ"ページとし、`template`は`agenda`を選択してください。`summary`には3枚目以降のタイトルを改行区切りでリストアップしてください。\n- **【アジェンダの分割ルール】**: アジェンダの項目（`summary`にリストアップする3枚目以降のタイトル）が**6個を超えた**場合、`template`が`agenda`のスライドを**複数枚に分割**してください。\n- 1枚目のタイトルは『**アジェンダ (1/2)**』、2枚目は『**アジェンダ (2/2)**』のように、必ず連番を付与してください。\n- 各アジェンダスライドには、最大6項目までのリストを配置してください。':"- **アジェンダページは絶対に作成しないでください。**"}
${e?"- Markdownの主要な見出し（章やセクション）の前に、`template`が`section_header`のスライドを自動で挿入してください。":"- `section_header`テンプレートは使用しないでください。"}

- 最後のスライドは \`summary_or_thankyou\` とし、タイトルを「まとめ」または「ご清聴ありがとうございました」に設定してください。

### 出力形式(JSON)の例
- **最重要**: 出力はJSON配列の文字列のみとし、前後に\`\`\`jsonや説明文を含めないでください。
[
  { "title": "タイトルページ", "summary": "発表者名", "template": "title_slide" },
  { "title": "システムの概要", "summary": "...", "template": "content_with_diagram", "infographic": { "needed": true, "description": "システム概要の構成図" } },
  
  { 
    "title": "3つのプラン", 
    "summary": "", 
    "template": "three_points", 
    "points": [ 
      { "title": "プランA", "summary": "プランAの簡潔な説明...", "icon_description": "braces" }, 
      { "title": "プランB", "summary": "プランBの簡潔な説明...", "icon_description": "database" }, 
      { "title": "プランC", "summary": "プランCの簡潔な説明...", "icon_description": "shield-check" }
    ] 
  },
  
  { "title": "プロジェクトの3ステップ", "summary": "", "template": "vertical_steps", "items": [ {"title": "ステップ1", "description": "ステップ1の説明..."}, {"title": "ステップ2", "description": "ステップ2の説明..."} ] },
  { "title": "主な特長", "summary": "", "template": "content_basic", "items": [ "特長1", "特長2" ] },
  { "title": "A案とB案の比較", "summary": "", "template": "comparison", "columns": [ {"title": "A案", "items": ["メリット1"]}, {"title": "B案", "items": ["メリット2"]} ] },
  {
    "title": "機能比較表 (1/2)",
    "summary": "",
    "template": "table_basic",
    "table": {
      "headers": [ "機能名", "プランA", "プランB" ],
      "rows": [
        [ "基本機能", "〇", "〇" ],
        [ "高度な分析", "-", "〇" ],
        [ "専用サポート", "-", "-" ]
      ]
    }
  },
  { "title": "ご清聴ありがとうございました", "summary": "", "template": "summary_or_thankyou" }
]

### Markdownテキスト
${l}`,generateInfographic:(l,t)=>`### あなたの役割
あなたは、与えられた指示に基づき、情報を視覚的に表現するためのSVG（スケーラブル・ベクター・グラフィックス）コードを生成する専門家です。

### 指示
以下の「インフォグラフィックの詳細説明」を読み、その内容を表現するSVGコードを生成してください。

### 厳格なルール
- **最重要:** あなたの応答は\`<svg\`で始まり、\`</svg>\`で終わる必要があります。これ以外のXML宣言、コードブロック、解説、テキストは絶対に含めないでください。
- **【超重要】SVG内に\`<text>\`タグやその他のテキスト要素を一切含めないでください。アイコンや図形のみで内容を表現してください。**

- **【サイズ指定の厳格なルール】**:
- SVGタグには \`width="100%"\` と \`height="100%"\` を**必ず指定してください**。
- \`viewBox="0 0 100 100"\` のように、viewBox属性を必ず指定してください（値は内容に応じて調整可）。
- **絶対に \`width\` や \`height\` にピクセル値（例: \`width="500px"\`）を指定しないでください。**

- **【配色ルールの厳格なルール】**:
${t==="light"?"・背景は白（#FFFFFF）です。図形や線には濃い色（例: #1E293B, #0284c7）を使用してください。":"・背景は濃いグレー（#1e293b）です。図形や線には明るい色（例: #e2e8f0, #38bdf8）を使用してください。"}
- **絶対に、SVG自体に背景色（例: \`<rect width="100%" height="100%" fill="...">\`）は含めないでください。** スライドの背景を透過させる必要があります。

### インフォグラフィックの詳細説明
${l}`,modifySlide:(l,t)=>`### あなたの役割
あなたは、ユーザーの指示を100%忠実に、かつ正確にHTMLコードへ反映させる精密なコーディングアシスタントです。

### 指示
「修正対象のHTMLコード」を「ユーザーからの修正指示」に基づき修正し、その結果を厳格なJSON形式で出力してください。

### 思考プロセス
1. 「修正対象のHTMLコード」と「ユーザーからの修正指示」を完全に理解します。
2. 指示に従ってHTMLコードを修正します。
3. 実際に行った変更点を日本語の箇条書きで簡潔にまとめます。
4. 修正後の完全なHTMLコードと、まとめた変更点の両方を、指定されたJSON形式で出力します。

### 出力形式 (JSON)
- **最重要**: 出力は必ず以下の構造を持つJSONオブジェクトの文字列のみとしてください。前後に説明や\`\`\`jsonを含めないでください。
\`\`\`json
{
  "html": "(ここに修正後の完全なHTMLコードを文字列として挿入)",
  "changes": "(ここに実際に行った変更点の箇条書きを文字列として挿入。例: ・ヘッダーの文言を変更しました。\\n・背景色を#e0f7faに変更しました。)"
}
\`\`\`

### ユーザーからの修正指示
${l}

### 修正対象のHTMLコード
\`\`\`html
${t}
\`\`\`
`,regenerateSlideContent:(l,t,e,i)=>{const r=t!=="{}"&&t?`### 元のスライド情報（JSON）
${t}`:`### 元のスライド情報
元データはありません。タイトル「${l}」に基づいて内容を生成してください。`;return`### 指示
あなたはプロのプレゼンテーション構成作家です。
以下の「元のスライド情報」と「スライドタイトル」を分析し、「新しいテンプレート」の形式に最適なコンテンツを生成してください。

### スライドタイトル
${l}

${r}

### 新しいテンプレート
${e}

### 利用可能なテンプレートと必要なJSONキー
${i.map(a=>`- **${a.name}**: ${a.description}`).join(`
`)}

### 厳格な出力条件
- **最重要**: 出力は、新しいテンプレート（${e}）に必要なキー（例: \`items\`, \`points\`, \`columns\`, \`summary\`）のみを含むJSONオブジェクトの文字列としてください。
- 前後に\`\`\`jsonや説明文は絶対に含めないでください。
- 元の情報を活用し、新しいテンプレート形式で最も伝わりやすい内容を生成してください。

### 出力例
- ${e} が "content_basic" の場合: \`{ "items": ["項目1", "項目2", "項目3"] }\`
- ${e} が "three_points" の場合: \`{ "points": [ { "title": "...", "summary": "...", "icon_description": "..." }, ... ] }\`
- ${e} が "comparison" の場合: \`{ "columns": [ { "title": "A案", "items": [...] }, { "title": "B案", "items": [...] } ] }\`
- ${e} が "table_basic" の場合: \`{ "table": { "headers": ["H1", "H2"], "rows": [["R1C1", "R1C2"], ["R2C1", "R2C2"]] } }\`
- ${e} が "content_with_diagram" の場合: \`{ "summary": "ここにスライドの本文が入ります...", "infographic": { "needed": true, "description": "..." } }\`
`},modifyFullOutline:(l,t)=>`### 指示
あなたはプロのプレゼンテーション構成作家です。
添付された「現在の構成案(JSON)」を、以下の「ユーザーからの修正指示」に基づき、厳密に修正してください。

### 厳格なルール
- **最重要:** 出力は、修正後の**完全なJSON配列の文字列のみ**としてください。前後に\`\`\`jsonや説明文は絶対に含めないでください。
- 指示された箇所以外は、**絶対に、いかなる理由があっても変更しないでください。**
- スライドの順序変更、追加、削除、内容の書き換えなど、指示を忠実に実行してください。

### ユーザーからの修正指示
${t}

### 現在の構成案(JSON)
${l}
`,modifySingleSlideOutline:(l,t)=>`### 指示
あなたはプロのプレゼンテーション構成作家です。
添付された「現在のスライド(JSON)」を、以下の「ユーザーからの修正指示」に基づき、厳密に修正してください。

### 厳格なルール
- **最重要:** 出力は、修正後の**単一のJSONオブジェクトの文字列のみ**としてください。前後に\`\`\`jsonや説明文は絶対に含めないでください。
- 指示された箇所以外（例：指示がないのに \`template\` を変えるなど）は、**絶対に、いかなる理由があっても変更しないでください。**
- スライドのタイトル、要約（summary）、箇条書き（items）など、指示された部分のみを修正してください。

### ユーザーからの修正指示
${t}

### 現在のスライド(JSON)
${l}
`,findIconName:l=>`### 指示
あなたは、与えられた「概念」や「説明文」を、オープンソースの「Lucide (lucide.dev)」アイコンライブラリの**単一のアイコン名**にマッピングする専門家です。

### 厳格なルール
- **最重要**: あなたの応答は、Lucideのアイコン名（例: "braces", "shield-check", "database"）**そのもの**でなければなりません。
- 解説、前置き、引用符、JSON形式などは**一切不要**です。
- 関連するアイコンが複数ある場合でも、最も代表的だと思われるものを**1つだけ**選んでください。
- 存在しないアイコン名は返さないでください。

### 例
- 入力: "API、接続、歯車"
- 出力: braces
- 入力: "セキュリティ、盾、認証"
- 出力: shield-check
- 入力: "AI、チャットボット、根拠"
- 出力: brain-cog
- 入力: "存在しない概念"
- 出力: circle

### 変換対象の説明文
${l}`,findIconNameRetry:(l,t)=>`### 指示
あなたは、与えられた「概念」を「Lucide (lucide.dev)」の**正しいアイコン名**にマッピングする専門家です。

### 前回の失敗
前回のタスクで、あなたは「${l}」という概念に対して「${t}」という名前を返しましたが、そのアイコン名は**存在しません (404エラー)**でした。

### 厳格なルール
- **最重要**: 「${t}」とは**異なる、別の正しいLucideアイコン名**を1つだけ返してください。
- 解説、前置き、引用符、JSON形式などは**一切不要**です。
- どうしても適切な名前が見つからない場合は "circle" と返してください。

### 変換対象の概念
${l}`},B0=[{key:"cleaning",text:"テキストをクリーンアップ中... (例: 「ドキュ メント」→「ドキュメント」)"},{key:"analyzing",text:"ドキュメントの論理構造を解析中... (見出し、段落の識別)"},{key:"formatting",text:"Markdown形式に再構成中..."}],io=[{key:"analyzing_doc",text:"Markdownドキュメント全体を分析中..."},{key:"selecting_templates",text:"各セクションに最適なテンプレートを選定中... (例: 表、比較、図解)"},{key:"creating_title_agenda",text:"タイトルとアジェンダページを作成中..."},{key:"generating_content",text:"各スライドの内容（箇条書き、要約）を生成中..."},{key:"formatting_json",text:"最終的な構成案（JSON）を組み立て中..."}],Aw=[{key:"analyzing",text:"スライドの内容を分析中..."},{key:"designing",text:"インフォグラフィック/レイアウトをデザイン中..."},{key:"coding",text:"HTMLコードを組み立て中..."}],_w=()=>Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400 hover:text-white transition-colors",children:[Z.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),Z.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),kw=()=>Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400",children:[Z.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),Z.jsx("path",{d:"M12 12v9"}),Z.jsx("path",{d:"m16 16-4-4-4 4"})]}),Ew=()=>Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:[Z.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),Z.jsx("path",{d:"M22 2 11 13"})]}),Tw=({onSettingsClick:l})=>Z.jsxs("header",{className:"flex-shrink-0 h-14 bg-black/25 flex items-center px-6 justify-between border-b border-white/10 z-10",children:[Z.jsx("h1",{className:"text-lg font-semibold",children:"スライド作成ジェネレーター"}),Z.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:Z.jsx(_w,{})})]}),Cw=({isProcessing:l,processingStatus:t,fileName:e,handleDragOver:i,handleDrop:r,onFileSelect:a,appStatus:o,thinkingState:u,totalWaitTime:h})=>Z.jsx("div",{className:`w-full h-full bg-white/5 rounded-xl flex flex-col items-center justify-center p-6 border-2 border-dashed ${l?"border-indigo-500":"border-white/20 hover:border-indigo-500"} transition-colors`,onDragOver:i,onDrop:r,children:l?Z.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[o===Xt.STRUCTURING?Z.jsx(Af,{title:"テキストを構造化中...",steps:B0,currentStepKey:u,totalWaitTime:h}):o===Xt.GENERATING_OUTLINE?Z.jsx(Af,{title:"構成案を生成中...",steps:io,currentStepKey:u,totalWaitTime:h}):Z.jsxs(Z.Fragment,{children:[Z.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"}),Z.jsx("p",{className:"mt-4 text-lg font-semibold",children:t})]}),Z.jsx("p",{className:"mt-4 text-sm text-gray-400",children:e})]}):o!==Xt.INITIAL?Z.jsxs("div",{className:"text-center",children:[Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-400 mx-auto",children:[Z.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),Z.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Z.jsx("p",{className:"mt-4 text-lg font-semibold",children:"処理進行中"}),Z.jsx("p",{className:"mt-1 text-sm text-gray-400",children:e}),Z.jsx("p",{className:"mt-4 text-xs text-gray-500",children:"コントロールパネルで操作を続けてください。"})]}):Z.jsxs("div",{className:"text-center",children:[Z.jsx(kw,{}),Z.jsx("p",{className:"mt-4 text-lg font-semibold",children:"ドキュメントをドラッグ＆ドロップ"}),Z.jsx("p",{className:"mt-1 text-xs text-gray-400",children:"または"}),Z.jsx("button",{className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md text-sm font-medium transition-colors",onClick:()=>document.getElementById("file-upload").click(),children:"ファイルを選択"}),Z.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.txt,.md",onChange:f=>a(f.target.files[0])}),Z.jsx("p",{className:"mt-4 text-xs text-gray-500",children:"対応形式: PDF, TXT, MD"})]})}),Mw=({messages:l})=>Z.jsx("div",{className:"flex-grow p-6 overflow-y-auto space-y-4",children:l.map((t,e)=>Z.jsx("div",{className:`flex ${t.type==="user"?"justify-end":"justify-start"}`,children:Z.jsx("div",{className:`px-4 py-2 rounded-lg max-w-2xl ${t.type==="user"?"bg-indigo-600":"bg-gray-700"}`,children:Z.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.text})})},e))}),Rw=({markdown:l,setMarkdown:t,onApprove:e,onRegenerate:i})=>Z.jsxs("div",{className:"bg-black/20 p-4 rounded-lg",children:[Z.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"以下に構造化されたテキスト案を表示します。内容を確認し、必要であれば直接編集してください。"}),Z.jsx("textarea",{value:l,onChange:r=>t(r.target.value),className:"w-full h-64 bg-gray-900/50 border border-white/20 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow font-mono"}),Z.jsxs("div",{className:"flex justify-between items-center mt-4",children:[" ",Z.jsx("button",{onClick:i,className:"px-6 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors",children:"AIで再生成"}),Z.jsx("button",{onClick:e,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors",children:"内容を承認して次へ進む"})]})]}),Dw=({selectedTheme:l,selectedDesign:t,onThemeSelect:e,onDesignSelect:i,onApprove:r})=>Z.jsxs("div",{className:"bg-black/20 p-4 rounded-lg space-y-4",children:[Z.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[Z.jsx("p",{className:"text-sm text-gray-300",children:"1. プレゼンテーションのテーマを選択:"}),Object.entries(Dl).map(([a,o])=>Z.jsx("button",{onClick:()=>e(a),className:`px-6 py-2 text-sm font-medium rounded-md transition-colors ${l===a?"bg-indigo-600":"bg-gray-700 hover:bg-gray-600"}`,children:o.name},a))]}),Z.jsxs("div",{className:"flex justify-center items-center space-x-4 border-t border-white/10 pt-4",children:[Z.jsx("p",{className:"text-sm text-gray-300",children:"2. デザインを選択:"}),Z.jsx("button",{onClick:()=>i("dark"),className:`px-6 py-2 text-sm font-medium rounded-md transition-colors ${t==="dark"?"bg-gray-800 ring-2 ring-indigo-400":"bg-gray-800 hover:bg-gray-700"}`,children:"ダーク"}),Z.jsx("button",{onClick:()=>i("light"),className:`px-6 py-2 text-black text-sm font-medium rounded-md transition-colors ${t==="light"?"bg-gray-200 ring-2 ring-indigo-400":"bg-gray-200 hover:bg-gray-300"}`,children:"ライト"})]}),Z.jsx("div",{className:"flex justify-end pt-2",children:Z.jsx("button",{onClick:r,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors",children:"決定して次へ"})})]}),Nw=({onSelect:l})=>Z.jsxs("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center items-center space-x-4",children:[Z.jsx("p",{className:"text-sm text-gray-300",children:"アジェンダページを挿入しますか？"}),Z.jsx("button",{onClick:()=>l(!0),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-sm font-medium rounded-md transition-colors",children:"はい"}),Z.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-sm font-medium rounded-md transition-colors",children:"いいえ"})]}),Ow=({onSelect:l})=>Z.jsxs("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center items-center space-x-4",children:[Z.jsx("p",{className:"text-sm text-gray-300",children:"主要なセクションの前に区切りスライドを自動挿入しますか？"}),Z.jsx("button",{onClick:()=>l(!0),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-sm font-medium rounded-md transition-colors",children:"はい"}),Z.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-sm font-medium rounded-md transition-colors",children:"いいえ"})]}),zw=({outline:l,onChange:t,onInsert:e,onDelete:i,onStart:r,selectedTheme:a,onRegenerate:o,onRegenerateContent:u,onModifySlide:h,onModifyAll:f})=>{const m=(E,C,N)=>{const F={...[...l][E].table||{headers:[],rows:[]}};F.headers=N.split(",").map(B=>B.trim()),t(E,"table",F)},p=(E,C)=>{const D={...[...l][E].table||{headers:[],rows:[]}};D.rows=C.split(`
`).map(F=>F.split(",").map(B=>B.trim())),t(E,"table",D)},b=(E,C,N,D)=>{const B=[...[...l][E].points||[]];B[C]={...B[C],[N]:D},t(E,"points",B)},v=(E,C,N,D)=>{const B=[...[...l][E].items||[]];B[C]={...B[C],[N]:D},t(E,"items",B)},w=(E,C,N,D)=>{const B=[...[...l][E].columns||[{},{}]];B[C]={...B[C],[N]:D},t(E,"columns",B)},x=(E,C,N,D)=>{const B=[...[...l][E].columns||[{},{}]],Y=[...B[C].items||[]];Y[N]=D,B[C]={...B[C],items:Y},t(E,"columns",B)},_=(E,C)=>{const D=[...[...l][E].columns||[{},{}]],F=[...D[C].items||[],"新しい項目"];D[C]={...D[C],items:F},t(E,"columns",D)},A=Dl[a]?.templates?Object.keys(Dl[a].templates):[];return Z.jsxs("div",{className:"bg-black/20 p-4 rounded-lg space-y-4",children:[Z.jsx("p",{className:"text-sm text-gray-300 mb-2 font-semibold",children:"構成案が生成されました。内容を編集し、スライドの追加や削除ができます。"}),Z.jsx("div",{className:"space-y-4 max-h-[40vh] overflow-y-auto pr-2",children:l.map((E,C)=>Z.jsxs("div",{className:"bg-gray-900/50 border border-white/10 rounded-lg p-4",children:[Z.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Z.jsxs("div",{children:[Z.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:["スライド ",C+1," - タイトル"]}),Z.jsx("input",{type:"text",value:E.title,onChange:N=>t(C,"title",N.target.value),className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),Z.jsxs("div",{children:[Z.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:"レイアウトテンプレート"}),Z.jsxs("div",{className:"flex items-center space-x-2",children:[Z.jsx("select",{value:E.template||"",onChange:N=>t(C,"template",N.target.value),className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500",children:A.map(N=>Z.jsx("option",{value:N,children:N},N))}),Z.jsx("button",{onClick:()=>u(C),title:"現在のスライド情報（タイトルなど）を基に、選択中のテンプレートに合わせてAIで内容を再生成します。",className:"p-2 bg-indigo-600 hover:bg-indigo-500 rounded-md transition-colors flex-shrink-0",children:Z.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Z.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),Z.jsx("path",{d:"M3 3v5h5"}),Z.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),Z.jsx("path",{d:"M21 21v-5h-5"})]})})]})]})]}),["three_points"].includes(E.template)?Z.jsx("div",{className:"space-y-3 mt-3",children:E.points?.map((N,D)=>Z.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[Z.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:["ポイント ",D+1," - タイトル"]}),Z.jsx("input",{type:"text",value:N.title,onChange:F=>b(C,D,"title",F.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),Z.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:["ポイント ",D+1," - 内容"]}),Z.jsx("textarea",{value:N.summary,onChange:F=>b(C,D,"summary",F.target.value),rows:2,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"}),Z.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:["ポイント ",D+1," - アイコン指示"]}),Z.jsx("textarea",{value:N.icon_description,onChange:F=>b(C,D,"icon_description",F.target.value),rows:2,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]},D))}):["vertical_steps","content_basic"].includes(E.template)?Z.jsx("div",{className:"space-y-3 mt-3",children:E.template==="content_basic"?Z.jsxs("div",{children:[Z.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:"箇条書き項目 (1行に1項目)"}),Z.jsx("textarea",{value:Array.isArray(E.items)?E.items.join(`
`):"",onChange:N=>t(C,"items",N.target.value.split(`
`)),rows:5,className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]}):E.items?.map((N,D)=>Z.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[Z.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:["項目 ",D+1," - タイトル"]}),Z.jsx("input",{type:"text",value:N.title||"",onChange:F=>v(C,D,"title",F.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),Z.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:["項目 ",D+1," - 説明"]}),Z.jsx("textarea",{value:N.description||N.summary||"",onChange:F=>v(C,D,"description",F.target.value),rows:2,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]},D))}):E.template==="comparison"?Z.jsx("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[0,1].map(N=>Z.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[Z.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:["カラム ",N+1," - タイトル"]}),Z.jsx("input",{type:"text",value:E.columns?.[N]?.title||"",onChange:D=>w(C,N,"title",D.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),Z.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:["カラム ",N+1," - 箇条書き項目"]}),E.columns?.[N]?.items?.map((D,F)=>Z.jsx("input",{type:"text",value:D,onChange:B=>x(C,N,F,B.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-1"},F)),Z.jsx("button",{onClick:()=>_(C,N),className:"mt-2 text-xs px-2 py-1 bg-sky-700 hover:bg-sky-600 rounded",children:"項目を追加"})]},N))}):E.template==="table_basic"?Z.jsx("div",{className:"space-y-3 mt-3",children:Z.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[Z.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:"テーブルヘッダー (カンマ区切り)"}),Z.jsx("input",{type:"text",value:Array.isArray(E.table?.headers)?E.table.headers.join(", "):"",onChange:N=>m(C,"headers",N.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),Z.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:"テーブル行 (1行に1レコード、セルはカンマ区切り)"}),Z.jsx("textarea",{value:Array.isArray(E.table?.rows)?E.table.rows.map(N=>N.join(", ")).join(`
`):"",onChange:N=>p(C,N.target.value),rows:5,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]})}):Z.jsxs("div",{children:[Z.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-3 mb-2 block",children:["スライド ",C+1," - 要約（またはコンテンツ）"]}),Z.jsx("textarea",{value:E.summary,onChange:N=>t(C,"summary",N.target.value),rows:3,className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"}),E.infographic?.needed&&Z.jsxs("div",{children:[Z.jsx("label",{className:"text-xs font-bold text-gray-400 mt-3 mb-2 block",children:"インフォグラフィック詳細指示"}),Z.jsx("textarea",{value:E.infographic.description,onChange:N=>t(C,"infographic",{...E.infographic,description:N.target.value}),rows:3,className:"w-full bg-indigo-900/30 border border-indigo-500/50 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]})]}),Z.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-2 border-t border-white/10",children:[Z.jsx("button",{onClick:()=>h(C),title:"このスライドについてAIに修正指示を出す",className:"px-3 py-1 bg-indigo-600 hover:bg-indigo-500 text-xs font-medium rounded-md transition-colors",children:"AIで修正"}),Z.jsx("button",{onClick:()=>e(C),className:"px-3 py-1 bg-sky-600 hover:bg-sky-500 text-xs font-medium rounded-md transition-colors",children:"この下にスライドを挿入"}),Z.jsx("button",{onClick:()=>i(C),className:"px-3 py-1 bg-red-700 hover:bg-red-600 text-xs font-medium rounded-md transition-colors disabled:opacity-50",disabled:l.length<=1,children:"このスライドを削除"})]})]},C))}),Z.jsxs("div",{className:"flex flex-col items-center pt-2 space-y-3",children:[Z.jsx("button",{onClick:f,className:"w-full max-w-md px-6 py-2 bg-indigo-700 hover:bg-indigo-600 text-sm font-medium rounded-md transition-colors",children:"構成案全体をAIで修正..."}),Z.jsxs("div",{className:"flex justify-center space-x-4",children:[Z.jsx("button",{onClick:o,className:"px-6 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors",children:"構成案を再生成"}),Z.jsx("button",{onClick:r,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors",disabled:l.length===0,children:"構成案を承認し、スライド生成を開始する"})]})]})]})},Lw=({onDownload:l})=>Z.jsx("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center",children:Z.jsx("button",{onClick:l,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-sm font-medium rounded-md transition-colors",children:"ZIPファイルをダウンロード"})}),Bw=({value:l,onChange:t,onSend:e,disabled:i})=>Z.jsxs("div",{className:"relative",children:[Z.jsx("input",{type:"text",value:l,onChange:t,onKeyPress:r=>r.key==="Enter"&&e(),placeholder:"修正指示などを入力...",className:"w-full bg-gray-900/50 border border-white/20 rounded-lg py-3 pl-4 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow",disabled:i}),Z.jsxs("button",{onClick:e,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 bg-indigo-600 hover:bg-indigo-500 rounded-full transition-colors disabled:opacity-50",disabled:i||!l.trim(),children:[" ",Z.jsx(Ew,{})," "]})]}),Iw=({onPreview:l,onApprove:t,onEditCode:e,onRegenerate:i,onReturnToOutline:r,disabled:a})=>Z.jsxs("div",{className:"flex justify-end mt-4 space-x-2",children:[Z.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50 hidden",disabled:a,onClick:l,children:"プレビュー"}),Z.jsx("button",{className:"px-4 py-2 bg-sky-800 hover:bg-sky-700 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:r,title:"現在のプレビューを破棄し、構成案の編集画面に戻ります。",children:"構成案を修正"}),Z.jsx("button",{className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:i,children:"再生成"}),Z.jsx("button",{className:"px-4 py-2 bg-sky-600 hover:bg-sky-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:e,children:"ソースコードを編集"}),Z.jsx("button",{className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:t,children:"承認して次へ"})]}),Af=({title:l,steps:t,currentStepKey:e,totalWaitTime:i})=>{const r=t.findIndex(u=>u.key===e),[a,o]=fe.useState(Math.ceil(i/1e3));return fe.useEffect(()=>{if(i>0){const u=Math.ceil(i/1e3);o(u);const h=setInterval(()=>{o(f=>f<=1?(clearInterval(h),0):f-1)},1e3);return()=>clearInterval(h)}else o(0)},[i]),Z.jsxs("div",{className:"bg-gray-900/50 border border-white/10 rounded-lg p-4",children:[Z.jsxs("p",{className:"font-semibold text-sm flex items-center mb-3",children:[Z.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),l,a>0&&Z.jsxs("span",{className:"ml-auto text-xs text-gray-400",children:["(残り約 ",a," 秒)"]})]}),Z.jsx("div",{className:"ml-6 pl-4 border-l-2 border-indigo-500 space-y-2",children:t.map((u,h)=>Z.jsxs("p",{className:`text-xs flex items-center transition-colors ${h<=r?"text-gray-200":"text-gray-500"}`,children:[h<r?Z.jsx("span",{className:"text-green-400 mr-2",children:"✓"}):h===r?Z.jsx("span",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):Z.jsx("span",{className:"mr-2",children:"○"}),u.text]},u.key))})]})},Fw=({outline:l,currentIndex:t,thinkingState:e})=>{const i=fe.useRef(null);return fe.useEffect(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[t]),Z.jsxs("div",{className:"bg-black/20 p-4 rounded-lg space-y-3",children:[Z.jsx("p",{className:"text-sm text-gray-300 mb-2 font-semibold",children:"スライド生成中..."}),Z.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto pr-2",children:l.map((r,a)=>{const o=a<t,u=a===t;return Z.jsxs("div",{ref:u?i:null,className:`border border-white/10 rounded-lg p-3 transition-all duration-300 ${u?"bg-indigo-900/50":"bg-gray-900/50"}`,children:[Z.jsxs("p",{className:"font-semibold text-sm flex items-center",children:[o?Z.jsx("span",{className:"text-green-400 mr-2",children:"✅"}):u?Z.jsx("span",{className:"animate-pulse mr-2",children:"⏳"}):Z.jsx("span",{className:"text-gray-500 mr-2",children:"📄"}),a+1,". ",r.title,o&&Z.jsx("span",{className:"ml-auto text-xs text-green-400 font-medium",children:"完了"}),u&&Z.jsx("span",{className:"ml-auto text-xs text-indigo-300 font-medium",children:"生成中"})]}),u&&Z.jsx("div",{className:"mt-3",children:Z.jsx(Af,{title:"スライドを生成中...",steps:Aw,currentStepKey:e})})]},a)})})]})},Pw=({chatState:l})=>Z.jsxs("div",{className:"w-full h-full bg-white/5 rounded-xl flex flex-col border border-white/10 overflow-hidden",children:[Z.jsxs("div",{className:"flex-grow p-6 overflow-y-auto space-y-4",children:[Z.jsx(Mw,{messages:l.messages}),l.apiErrorStep&&Z.jsx("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center",children:Z.jsx("button",{onClick:l.handleRetry,className:"px-6 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors",children:"再試行"})}),l.appStatus===Xt.STRUCTURED&&Z.jsx(Rw,{markdown:l.structuredMarkdown,setMarkdown:l.setStructuredMarkdown,onApprove:l.handleMarkdownApproval,onRegenerate:l.handleRegenerateStructure}),l.appStatus===Xt.SELECTING_THEME&&Z.jsx(Dw,{selectedTheme:l.selectedTheme,selectedDesign:l.design,onThemeSelect:l.handleThemeSelection,onDesignSelect:l.handleDesignSelection,onApprove:l.handleThemeApproval}),l.appStatus===Xt.CREATING_OUTLINE&&Z.jsx(Nw,{onSelect:l.handleAgendaChoice}),l.appStatus===Xt.SELECTING_SECTION_HEADERS&&Z.jsx(Ow,{onSelect:l.handleSectionHeaderChoice}),l.appStatus===Xt.OUTLINE_CREATED&&Z.jsx(zw,{outline:l.slideOutline,onChange:l.handleOutlineChange,onInsert:l.handleInsertSlide,onDelete:l.handleDeleteSlide,onStart:l.handleStartGeneration,selectedTheme:l.selectedTheme,onRegenerate:l.handleRegenerateOutline,onRegenerateContent:l.handleRegenerateSlideContent,onModifySlide:l.handleOpenModifyModal,onModifyAll:l.handleOpenModifyAllModal}),(l.appStatus===Xt.GENERATING_SLIDES||l.appStatus===Xt.SLIDE_GENERATED)&&Z.jsx(Fw,{outline:l.slideOutline,currentIndex:l.currentSlideIndex,thinkingState:l.thinkingState}),l.appStatus===Xt.ALL_SLIDES_GENERATED&&Z.jsx(Lw,{onDownload:l.handleDownloadZip}),Z.jsx("div",{ref:l.chatEndRef})]}),Z.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-white/10 bg-black/20",children:[Z.jsx(Bw,{value:l.userInput,onChange:t=>l.setUserInput(t.target.value),onSend:l.handleSendMessage,disabled:l.appStatus!==Xt.SLIDE_GENERATED}),Z.jsx(Iw,{onPreview:l.handlePreview,onApprove:l.handleApproveAndNext,onEditCode:l.handleOpenCodeEditor,onRegenerate:l.handleRegenerateCurrentSlide,onReturnToOutline:l.handleReturnToOutline,disabled:l.appStatus!==Xt.SLIDE_GENERATED})]})]}),Y4=({htmlContent:l,containerWidth:t})=>{const r=t>0?(t-16)/1280:1,a=720*r;return Z.jsx("div",{className:"relative w-full rounded-lg overflow-hidden shadow-lg border border-white/10",style:{height:`${a}px`},children:Z.jsx("iframe",{srcDoc:l,width:1280,height:720,className:"border-none",style:{transform:`scale(${r})`,transformOrigin:"top left"},sandbox:"allow-same-origin",title:"Slide Preview Item"},l)})},Uw=({generatedSlides:l,htmlContent:t,isLoading:e,loadingSlideTitle:i})=>{const r=fe.useRef(null),a=fe.useRef(null),[o,u]=fe.useState(0);return fe.useEffect(()=>{const h=new ResizeObserver(f=>{if(f[0]){const{width:m}=f[0].contentRect;u(m)}});return r.current&&h.observe(r.current),()=>h.disconnect()},[]),fe.useEffect(()=>{a.current?.scrollIntoView({behavior:"smooth"})},[l,t,e]),Z.jsxs("div",{ref:r,className:"w-full h-full bg-black/10 rounded-xl flex flex-col p-4 border border-white/10 overflow-y-auto",children:[Z.jsxs("div",{className:"space-y-4",children:[l.map((h,f)=>Z.jsx(Y4,{htmlContent:h,containerWidth:o},f)),t&&!e&&Z.jsx(Y4,{htmlContent:t,containerWidth:o}),e&&Z.jsx("div",{className:"w-full flex flex-col items-center justify-center bg-white/5 rounded-lg border border-dashed border-indigo-500",style:{height:`${720*((o-16)/1280)}px`},children:Z.jsxs("div",{className:"text-center",children:[Z.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"}),Z.jsx("p",{className:"mt-4 text-lg font-semibold",children:i||"スライドを生成中..."}),Z.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"HTMLコードを組み立て中..."})]})})]}),Z.jsx("div",{ref:a})]})},Hw=({isOpen:l,tempApiKey:t,setTempApiKey:e,handleSave:i})=>l?Z.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:Z.jsxs("div",{className:"bg-[#2a2a2e] border border-white/10 rounded-lg shadow-xl p-8 w-full max-w-md",children:[Z.jsx("h2",{className:"text-xl font-bold mb-4",children:"Gemini APIキーを入力"}),Z.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Google AI StudioでAPIキーを取得し、以下に貼り付けてください。キーはあなたのブラウザのローカルストレージにのみ保存されます。"}),Z.jsx("input",{type:"password",value:t,onChange:r=>e(r.target.value),placeholder:"APIキーを入力...",className:"w-full bg-gray-900/50 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),Z.jsx("div",{className:"flex justify-end mt-6",children:Z.jsx("button",{onClick:i,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md font-medium transition-colors",children:"保存"})})]})}):null,jw=({isOpen:l,html:t,setHtml:e,onSave:i,onCancel:r})=>l?Z.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:Z.jsxs("div",{className:"bg-[#2a2a2e] border border-white/10 rounded-lg shadow-xl p-6 w-full max-w-4xl h-[80vh] flex flex-col",children:[Z.jsx("h2",{className:"text-xl font-bold mb-4 flex-shrink-0",children:"HTMLソースコードを編集"}),Z.jsx("textarea",{value:t,onChange:a=>e(a.target.value),className:"w-full flex-grow bg-gray-900/50 border border-white/20 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow font-mono",placeholder:"HTMLコード..."}),Z.jsxs("div",{className:"flex justify-end mt-4 flex-shrink-0 space-x-2",children:[Z.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-md font-medium transition-colors",children:"キャンセル"}),Z.jsx("button",{onClick:i,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md font-medium transition-colors",children:"変更を適用"})]})]})}):null,Gw=({isOpen:l,mode:t,index:e,value:i,onChange:r,onSave:a,onCancel:o})=>{if(!l)return null;const u=t==="all"?"構成案全体をAIで修正":`スライド ${e+1} をAIで修正`,h=t==="all"?"構成案全体（全スライドの順序、タイトル、内容）に対する修正指示を具体的に入力してください。":`このスライド（${e+1}）に対する修正指示（例：「タイトルを～にして」「箇条書きを3つに要約して」）を入力してください。`;return Z.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:Z.jsxs("div",{className:"bg-[#2a2a2e] border border-white/10 rounded-lg shadow-xl p-6 w-full max-w-2xl flex flex-col",children:[Z.jsx("h2",{className:"text-xl font-bold mb-4 flex-shrink-0",children:u}),Z.jsx("p",{className:"text-sm text-gray-400 mb-4",children:h}),Z.jsx("textarea",{value:i,onChange:f=>r(f.target.value),className:"w-full h-40 bg-gray-900/50 border border-white/20 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow font-mono",placeholder:"修正指示を入力..."}),Z.jsxs("div",{className:"flex justify-end mt-4 flex-shrink-0 space-x-2",children:[Z.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-md font-medium transition-colors",children:"キャンセル"}),Z.jsx("button",{onClick:a,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md font-medium transition-colors",children:"修正を実行"})]})]})})};function qw(){const[l,t]=fe.useState(""),[e,i]=fe.useState(!1),[r,a]=fe.useState(""),[o,u]=fe.useState(Xt.INITIAL),[h,f]=fe.useState([]),[m,p]=fe.useState(""),[b,v]=fe.useState(""),[w,x]=fe.useState(""),[_,A]=fe.useState(""),[E,C]=fe.useState([]),[N,D]=fe.useState(!1),[F,B]=fe.useState(""),[Y,j]=fe.useState(null),[et,ut]=fe.useState("standard"),[H,it]=fe.useState("dark"),[R,nt]=fe.useState(!1),[$,X]=fe.useState(0),[vt,mt]=fe.useState([]),[Et,z]=fe.useState(""),[P,at]=fe.useState(!1),[ht,pt]=fe.useState(""),[Bt,Lt]=fe.useState(!1),[Ht,jt]=fe.useState(""),[xe,we]=fe.useState({index:null,mode:"single"}),[Qe,oi]=fe.useState([]),[M,gt]=fe.useState(null),[dt,G]=fe.useState(0),U=fe.useRef(null);fe.useEffect(()=>{const ft=localStorage.getItem("gemini_api_key");ft?(t(ft),f([{type:"system",text:"ようこそ！スライドの元になるドキュメントをアップロードしてください。"}])):(i(!0),f([{type:"system",text:"まず、Gemini APIキーを設定してください。"}]));try{pe.use(xw({throwOnError:!1}))}catch(xt){console.error("Failed to load marked-katex-extension",xt)}},[]),fe.useEffect(()=>{U.current?.scrollIntoView({behavior:"smooth"})},[h,M]);const J=ft=>{if(typeof ft=="string")return ft.replace(/\\n/g,`
`);if(Array.isArray(ft))return ft.map(J);if(typeof ft=="object"&&ft!==null){const xt={};for(const Tt in ft)Object.prototype.hasOwnProperty.call(ft,Tt)&&(xt[Tt]=J(ft[Tt]));return xt}return ft},wt=async(ft,xt,Tt)=>{if(!l)return f(zt=>[...zt,{type:"system",text:"APIキーが設定されていません。"}]),null;try{const Vt=new M7(l).getGenerativeModel({model:xt});console.log(`[INFO] Calling Gemini API for: ${Tt} using ${xt}`),console.debug(`[DEBUG] Prompt for ${Tt}:`,ft);let Jt=await(await(await Vt.generateContent(ft)).response).text();return Jt=Jt.replace(/^```(json|html|svg)?\s*|```\s*$/g,"").trim(),Jt=Jt.replace(/^xml\s*/,""),console.log(`[INFO] Received response for: ${Tt}`),Jt}catch(zt){return console.error(`[FATAL] API Error during ${Tt}:`,zt),{error:`APIエラーが発生しました: ${zt.message}`}}},_t=ft=>{if(!ft||typeof ft!="string"||!ft.startsWith("<svg"))return console.warn("[WARN] Invalid SVG string received:",ft),ft;let xt=ft;return xt=xt.replace(/<svg([^>]*?)width=".*?"/g,"<svg$1"),xt=xt.replace(/<svg([^>]*?)height=".*?"/g,"<svg$1"),/<svg([^>]*?)viewBox=".*?"/g.test(xt)?xt=xt.replace("<svg",'<svg width="100%" height="100%"'):(console.warn('[WARN] SVG missing viewBox. Adding default "0 0 100 100".'),xt=xt.replace("<svg",'<svg width="100%" height="100%" viewBox="0 0 100 100"')),xt=xt.replace(/<svg([^>]*?)fill="(#fff|#ffffff|#000|#000000)"/gi,'<svg$1fill="transparent"'),xt=xt.replace(/<rect([^>]*?)fill="(#fff|#ffffff|#000|#000000)"([^>]*?)width="100%"([^>]*?)height="100%"/gi,'<rect$1fill="transparent"$3width="100%"$4height="100%"'),xt},lt=async ft=>{const xt=/^[a-z0-9-]+$/;let Tt=(ft.icon_description||"").trim(),zt=Tt,Vt=null;if(xt.test(Tt))zt=`${ft.title}: ${ft.summary}`,console.log(`[INFO] Icon name is valid: "${Tt}". Attempting fetch...`);else{console.warn(`[WARN] Invalid icon name: "${Tt}". Translating via AI...`);const Pt=or.findIconName(Tt),Ft=await wt(Pt,"gemini-2.5-flash-lite","Icon Translation");Ft&&!Ft.error?(Tt=Ft.trim().toLowerCase(),console.log(`[INFO] AI translation: "${ft.icon_description}" -> "${Tt}"`)):(console.error(`[ERROR] Icon translation failed for: "${ft.icon_description}"`),Tt="circle")}if(Vt=await Rt(Tt),Vt===null){console.warn(`[WARN] Retrying translation. (Failed attempt: "${Tt}")`);const Pt=or.findIconNameRetry(zt,Tt),Ft=await wt(Pt,"gemini-2.5-flash-lite","Icon Translation Retry");let Jt="circle";Ft&&!Ft.error?(Jt=Ft.trim().toLowerCase(),console.log(`[INFO] AI retry translation: "${zt}" -> "${Jt}"`)):console.error("[ERROR] Icon retry translation failed."),Vt=await Rt(Jt)}return Vt===null&&(console.log("[INFO] Final fallback: fetching 'circle'."),Vt=await Rt("circle")),Vt||""},Rt=async ft=>{(!ft||!/^[a-z0-9-]+$/.test(ft))&&(console.warn(`[WARN] Invalid icon name received: "${ft}". Using default 'circle'.`),ft="circle");try{const Tt=await fetch(`https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/${ft}.svg`);return Tt.ok?await Tt.text():(console.warn(`[WARN] Failed to fetch icon: ${ft}. Server responded with ${Tt.status}.`),null)}catch(Tt){return console.error(`[ERROR] Fetching icon ${ft}:`,Tt),null}},Ot=()=>{r&&(localStorage.setItem("gemini_api_key",r),t(r),i(!1),f([{type:"system",text:"APIキーが保存されました。スライドの元になるドキュメントをアップロードしてください。"}]))},Dt=()=>{if(Y==="structure")f(ft=>[...ft,{type:"system",text:"再試行します。内容を再度承認してください。"}]),j(null),u(Xt.STRUCTURED);else if(Y==="outline"){const ft=h.slice().reverse().find(xt=>xt.text.includes("セクションヘッダー"))?.text.includes("はい");He(ft)}},Kt=ft=>ft.preventDefault(),Ne=ft=>{ft.preventDefault();const xt=ft.dataTransfer.files;xt.length>0&&le(xt[0])},le=async ft=>{if(!ft)return;if(!["application/pdf","text/plain","text/markdown"].includes(ft.type)){f(Tt=>[...Tt,{type:"system",text:`サポートされていないファイル形式です: ${ft.type}`}]);return}v(ft.name),D(!0),B("テキストを抽出中..."),f(Tt=>[...Tt,{type:"system",text:`${ft.name} をアップロードしました。`}]);try{let Tt="";if(ft.type==="application/pdf"){const zt=new Uint8Array(await ft.arrayBuffer()),Vt=await gb({data:zt}).promise;for(let Pt=1;Pt<=Vt.numPages;Pt++){const Jt=await(await Vt.getPage(Pt)).getTextContent();Tt+=Jt.items.map(Te=>Te.str).join(" ")}}else Tt=await ft.text();Bi(Tt)}catch{f(zt=>[...zt,{type:"system",text:"テキスト抽出中にエラーが発生しました。"}]),D(!1),v("")}},Bi=async ft=>{f(Pt=>[...Pt,{type:"system",text:`テキスト抽出完了(${ft.length}文字)。内容を構造化します。`}]),u(Xt.STRUCTURING),B("テキストを構造化中..."),j(null),x(ft);const xt=Math.max(4e3,Math.min(18e4,ft.length*1.8));G(xt);const Tt=xt/3,zt=wt(or.structureText(ft),"gemini-2.5-flash-lite","テキスト構造化"),Vt=(async()=>{try{gt(B0[0].key),await new Promise(Pt=>setTimeout(Pt,Tt)),gt(B0[1].key),await new Promise(Pt=>setTimeout(Pt,Tt)),gt(B0[2].key),await new Promise(Pt=>setTimeout(Pt,Tt))}catch(Pt){console.error("Dummy progress failed",Pt)}})();try{const[Pt]=await Promise.all([zt,Vt]);gt(null),D(!1),G(0),Pt&&!Pt.error?(A(Pt),u(Xt.STRUCTURED),f(Ft=>[...Ft,{type:"system",text:"テキストの構造化が完了しました。"}])):(j("structure"),f(Ft=>[...Ft,{type:"system",text:Pt?Pt.error:"予期せぬエラーが発生しました。"}]))}catch(Pt){console.error("[FATAL] Error during structuring:",Pt),gt(null),D(!1),G(0),j("structure"),f(Ft=>[...Ft,{type:"system",text:`予期せぬエラーが発生しました: ${Pt.message}`}])}},Wn=async()=>{if(!w){f(xt=>[...xt,{type:"system",text:"エラー: 元のテキストが見つかりません。"}]);return}if(!window.confirm("現在の編集内容は破棄されますが、テキストの構造化をAIに再実行させますか？"))return;f(xt=>[...xt,{type:"system",text:"テキストの再構造化を実行します..."}]),u(Xt.STRUCTURING),D(!0),B("テキストを再構造化中..."),j(null);const ft=await wt(or.structureText(w),"gemini-2.5-flash-lite","テキスト再構造化");D(!1),ft&&!ft.error?(A(ft),u(Xt.STRUCTURED),f(xt=>[...xt,{type:"system",text:"テキストの再構造化が完了しました。"}])):(j("structure"),u(Xt.STRUCTURED),f(xt=>[...xt,{type:"system",text:ft?ft.error:"予期せぬエラーが発生しました。"}]))},Zi=()=>{u(Xt.SELECTING_THEME),f(ft=>[...ft,{type:"system",text:"内容が承認されました。次に、プレゼンテーションのテーマを選択してください。"}])},vr=ft=>{ut(ft)},ze=ft=>{it(ft)},fi=()=>{u(Xt.CREATING_OUTLINE);const ft=Dl[et]?.name||"選択されたテーマ",xt=H==="dark"?"ダーク":"ライト";f(Tt=>[...Tt,{type:"user",text:`${ft}テーマ (${xt}) を選択`},{type:"system",text:"テーマを承知しました。次に、アジェンダページを挿入しますか？"}])},Wi=ft=>{nt(ft),u(Xt.SELECTING_SECTION_HEADERS),f(xt=>[...xt,{type:"user",text:`アジェンダ: ${ft?"はい":"いいえ"}`},{type:"system",text:"主要なセクションの前に区切りスライドを自動挿入しますか？"}])},He=async ft=>{f(Ft=>[...Ft,{type:"user",text:`セクションヘダー: ${ft?"はい":"いえ"}`}]),u(Xt.GENERATING_OUTLINE),D(!0),B("構成案を生成中..."),j(null);const xt=Math.max(5e3,Math.min(18e4,_.length*1.4));G(xt);const Tt=xt/5,zt=or.createOutline(_,R,ft),Vt=wt(zt,"gemini-2.5-flash-lite","構成案生成"),Pt=(async()=>{try{gt(io[0].key),await new Promise(Ft=>setTimeout(Ft,Tt)),gt(io[1].key),await new Promise(Ft=>setTimeout(Ft,Tt)),gt(io[2].key),await new Promise(Ft=>setTimeout(Ft,Tt)),gt(io[3].key),await new Promise(Ft=>setTimeout(Ft,Tt)),gt(io[4].key),await new Promise(Ft=>setTimeout(Ft,Tt))}catch(Ft){console.error("Dummy progress failed",Ft)}})();try{const[Ft]=await Promise.all([Vt,Pt]);if(gt(null),D(!1),G(0),Ft&&!Ft.error){let Jt;try{Jt=JSON.parse(Ft)}catch(ke){if(ke.message.includes("escaped character")){console.warn("[WARN] JSON parse failed. Retrying with backslash fix...");try{const Zt=Ft.replace(/\\/g,"\\\\");Jt=JSON.parse(Zt),f(Si=>[...Si,{type:"system",text:"【自動修正】AIの応答形式(エスケープ文字)を修正しました。"}])}catch(Zt){console.error("[FATAL] Backslash fix failed.",Zt),j("outline"),f(Si=>[...Si,{type:"system",text:`構成案の解析に失敗しました。AIの応答形式が不正です: ${ke.message}`}]);return}}else{j("outline"),f(Zt=>[...Zt,{type:"system",text:`構成案の解析に失敗しました。AIの応答形式が不正です: ${ke.message}`}]);return}}const Te=Jt.map(ke=>{const Zt={...ke};return Zt.template==="content_basic"?((!Zt.items||Array.isArray(Zt.items)&&Zt.items.length===0)&&Zt.summary&&typeof Zt.summary=="string"&&Zt.summary.trim().length>0&&(Zt.items=Zt.summary.split(`
`).map(Si=>Si.trim()).filter(Si=>Si.length>0)),Zt.summary=""):["three_points","comparison","vertical_steps","table_basic"].includes(Zt.template)?Zt.summary="":["content_with_diagram","title_slide","agenda","summary_or_thankyou"].includes(Zt.template)?((!Zt.summary||typeof Zt.summary=="string"&&Zt.summary.trim().length===0)&&Zt.items&&Array.isArray(Zt.items)&&Zt.items.length>0&&(Zt.summary=Zt.items.join(`
`)),Zt.items=null,Zt.points=null,Zt.columns=null,Zt.table=null,typeof Zt.summary!="string"&&(Zt.summary="")):Zt.template==="section_header"&&(Zt.summary="",Zt.items=null,Zt.points=null,Zt.columns=null,Zt.table=null),Zt});let ce=[...J(Te)];const li=6;let Fs=ce.length>1&&ce[1].template==="agenda";if(R){if(Fs){const ke=ce[1],Zt=(ke.summary||"").split(`
`).filter(Si=>Si.trim().length>0);if(Zt.length>li){const Si=Math.ceil(Zt.length/li),xr=[],Ui=(ke.title||"アジェンダ").replace(/\s*\(\d+\/\d+\)\s*$/,"");for(let Ji=0;Ji<Si;Ji++){const ga=Zt.slice(Ji*li,(Ji+1)*li);xr.push({...ke,title:`${Ui} (${Ji+1}/${Si})`,summary:ga.join(`
`),items:null,points:null,columns:null,table:null})}ce.splice(1,1,...xr),f(Ji=>[...Ji,{type:"system",text:"【自動修正】アジェンダの項目数が多いため、スライドを自動的に分割しました。"}])}}if(Fs=ce.length>1&&ce[1].template==="agenda",!Fs){const ke=ce.slice(1).map(Ui=>Ui.title||"").filter(Ui=>Ui.length>0),Zt=ke.length>0?ke:["（目次がありません）"],Si=Math.ceil(Zt.length/li),xr=[];if(Zt.length===0||Zt.length===1&&Zt[0]==="（目次がありません）")xr.push({title:"アジェンダ",summary:"（目次がありません）",template:"agenda",items:null,points:null,columns:null,table:null});else for(let Ui=0;Ui<Si;Ui++){const Ji=Zt.slice(Ui*li,(Ui+1)*li);xr.push({title:`アジェンダ${Si>1?` (${Ui+1}/${Si})`:""}`,summary:Ji.join(`
`),template:"agenda",items:null,points:null,columns:null,table:null})}ce.splice(1,0,...xr),f(Ui=>[...Ui,{type:"system",text:"【自動修正】AIがアジェンダを生成しなかったため、2枚目に自動挿入しました。"}])}}else Fs&&(ce.splice(1,1),f(ke=>[...ke,{type:"system",text:"【自動修正】AIが不要なアジェンダを生成したため、2枚目から削除しました。"}])),ce=ce.filter((ke,Zt)=>Zt===0||ke.template!=="agenda");const Qn=ce.some(ke=>ke.template==="section_header");ft?Qn||f(ke=>[...ke,{type:"system",text:"【警告】セクションヘッダーの自動挿入（はい）を選択しましたが、AIが構成案に含めなかった可能性があります。構成案を確認してください。"}]):Qn&&(ce=ce.filter((ke,Zt)=>Zt===0||ke.template!=="section_header"),f(ke=>[...ke,{type:"system",text:"【自動修正】AIが不要なセクションヘッダーを生成したため、構成案から削除しました。"}])),C(ce),u(Xt.OUTLINE_CREATED),f(ke=>[...ke,{type:"system",text:"構成案を生成しました。内容を確認・編集してください。"}])}else j("outline"),f(Jt=>[...Jt,{type:"system",text:Ft?Ft.error:"予期せずエラーが発生しました。"}])}catch(Ft){console.error("[FATAL] Error during outline progress simulation:",Ft),gt(null),D(!1),G(0),j("outline"),f(Jt=>[...Jt,{type:"system",text:`予期せぬエラーが発生しました: ${Ft.message}`}])}},pa=(ft,xt,Tt)=>{const zt=[...E];xt==="infographic"?zt[ft].infographic=Tt:xt==="points"?zt[ft].points=Tt:zt[ft][xt]=Tt,C(zt)},go=ft=>{C(xt=>xt.filter((Tt,zt)=>zt!==ft))},bo=ft=>{const xt={title:"新しいスライド",summary:"ここに内容の要約を入力",template:"content_left_infographic_right",infographic:{needed:!1,description:""}},Tt=[...E.slice(0,ft+1),xt,...E.slice(ft+1)];C(Tt)},Zr=()=>{if(window.confirm("現在の構成案を破棄し、最初から再生成します。よろしいですか？")){f(Tt=>[...Tt,{type:"system",text:"構成案の再生成をリクエストしました。"}]);const ft=h.slice().reverse().find(Tt=>Tt.type==="user"&&Tt.text.includes("セクションヘッダー:"))?.text,xt=ft?ft.includes("はい"):!1;He(xt)}},yr=async ft=>{D(!0),B("スライド内容を再生成中...");const xt=E[ft],{title:Tt,template:zt}=xt,Vt={...xt};delete Vt.title,delete Vt.template,zt!=="content_with_diagram"&&delete Vt.infographic;const Pt=[{name:"content_basic",description:"`items` (文字列配列) が必要。`summary`は空にする。"},{name:"three_points",description:"`points` (3要素のオブジェクト配列) が必要。`summary`は空にする。"},{name:"vertical_steps",description:"`items` (オブジェクト配列) が必要。`summary`は空にする。"},{name:"comparison",description:"`columns` (2要素のオブジェクト配列) が必要。`summary`は空にする。"},{name:"table_basic",description:"`table` ({headers: [...], rows: [...]}) が必要。`summary`は空にする。"},{name:"content_with_diagram",description:"`summary` (本文) が必要。必要なら `infographic` も生成。"},{name:"agenda",description:"`summary` (改行区切りのリスト) が必要。"},{name:"title_slide",description:"`summary` (サブタイトル) が必要。"},{name:"section_header",description:"コンテンツ不要。`summary`は空にする。"},{name:"summary_or_thankyou",description:"`summary` (補足) が必要。"}],Ft=or.regenerateSlideContent(Tt,Object.keys(Vt).length>0?JSON.stringify(Vt):"{}",zt,Pt),Jt=await wt(Ft,"gemini-2.5-flash-lite",`スライド${ft+1}内容再生成`);if(Jt&&!Jt.error)try{const Te=JSON.parse(Jt);C(Ti=>{const ce=[...Ti],li={...ce[ft]};return zt!=="content_basic"&&(li.items=null),zt!=="three_points"&&(li.points=null),zt!=="comparison"&&(li.columns=null),zt!=="table_basic"&&(li.table=null),Object.assign(li,Te),["content_basic","three_points","comparison","vertical_steps","section_header","table_basic"].includes(zt)&&(li.summary=""),zt!=="content_with_diagram"&&(Te.infographic||(li.infographic=null)),ce[ft]=li,ce}),f(Ti=>[...Ti,{type:"system",text:`スライド ${ft+1} の内容を ${zt} 形式で再生成しました。`}])}catch(Te){f(Ti=>[...Ti,{type:"system",text:`内容の解析に失敗しました: ${Te.message}`}])}else f(Te=>[...Te,{type:"system",text:Jt?Jt.error:"内容の再生成中にエラーが発生しました。"}]);D(!1)},kn=ft=>{we({index:ft,mode:"single"}),jt(""),Lt(!0)},Qi=()=>{we({index:null,mode:"all"}),jt(""),Lt(!0)},Wr=()=>{Lt(!1),jt("")},Bs=async()=>{const{index:ft,mode:xt}=xe;if(!Ht.trim()){Wr();return}D(!0),j(null);let Tt=null;if(xt==="all"){B("構成案全体を修正中...");const zt=or.modifyFullOutline(JSON.stringify(E,null,2),Ht);Tt=await wt(zt,"gemini-2.5-flash-lite","構成案全体修正")}else if(xt==="single"&&ft!==null){B(`スライド ${ft+1} を修正中...`);const zt=or.modifySingleSlideOutline(JSON.stringify(E[ft],null,2),Ht);Tt=await wt(zt,"gemini-2.5-flash-lite",`スライド${ft+1}修正`)}if(Tt&&!Tt.error)try{const zt=JSON.parse(Tt);xt==="all"?(C(zt),f(Vt=>[...Vt,{type:"system",text:"構成案全体を修正しました。"}])):xt==="single"&&ft!==null&&(C(Vt=>{const Pt=[...Vt];return Pt[ft]=zt,Pt}),f(Vt=>[...Vt,{type:"system",text:`スライド ${ft+1} を修正しました。`}]))}catch(zt){f(Vt=>[...Vt,{type:"system",text:`修正結果の解析に失敗しました: ${zt.message}`}])}else f(zt=>[...zt,{type:"system",text:Tt?Tt.error:"修正中にエラーが発生しました。"}]);D(!1),Wr()},hu=()=>{window.confirm(`現在のスライドプレビューを破棄し、構成案の編集画面に戻ります。
これまでに承認したスライドは保持されます。

よろしいですか？`)&&(z(""),u(Xt.OUTLINE_CREATED),f(ft=>[...ft,{type:"system",text:"構成案の編集に戻りました。編集完了後、「構成案を承認し、スライド生成を開始する」ボタンを押してください。"}]))},Vl=()=>{const ft=E,xt=vt.length;let Tt=xt;for(let zt=0;zt<xt;zt++){const Vt=Qe[zt]?JSON.stringify(Qe[zt]):null,Pt=ft[zt]?JSON.stringify(ft[zt]):null;if(Vt!==Pt){Tt=zt;break}}Tt<xt&&(f(zt=>[...zt,{type:"system",text:`[INFO] スライド ${Tt+1} の構成案に変更が検出されたため、${Tt+1} 枚目以降のスライドを再生成します。`}]),mt(zt=>zt.slice(0,Tt))),oi([...ft]),X(Tt),Tt<ft.length?(f(zt=>[...zt.filter(Vt=>Vt.type!=="system"),{type:"system",text:`構成案承認済。
**ステップ2: スライド生成**
（スライド ${Tt+1} から）生成を再開します。`}]),Qr(Tt)):(u(Xt.ALL_SLIDES_GENERATED),f(zt=>[...zt,{type:"system",text:`構成案の編集が完了し、全てのスライドが承認済みです。
ZIPファイルをダウンロードできます。`}]))},Qr=async ft=>{u(Xt.GENERATING_SLIDES);const xt=E[ft];D(!0),B(`${ft+1}/${E.length}枚目を生成中...`);let Tt="";try{gt("analyzing"),await new Promise(Pt=>setTimeout(Pt,800));const zt=Dl[et].templates[xt.template];if(!zt)throw new Error(`テンプレート「${xt.template}」がテーマ「${et}」に見つかりません。`);const Vt={"{theme_class}":`theme-${H}`,"{title}":xt.title||"","{summary}":pe.parseInline(xt.summary||"",{breaks:!0}),"{content}":pe.parse(xt.summary||"",{breaks:!0}),"{infographic_svg}":"","{agenda_items_html}":"","{items_html}":""};if(xt.infographic?.needed){gt("designing"),await new Promise(Te=>setTimeout(Te,800));const Pt=or.generateInfographic(xt.infographic.description,H),Ft=await wt(Pt,"gemini-2.5-flash-lite",`SVG for Slide ${ft+1}`);if(!Ft||Ft.error){const Te=Ft?.error||"インフォグラフィックSVGの生成に失敗しました。";throw console.error(Te),new Error(Te)}const Jt=_t(Ft);Vt["{infographic_svg}"]=Jt}if(["three_points"].includes(xt.template)&&Array.isArray(xt.points)){gt("designing"),await new Promise(Jt=>setTimeout(Jt,800));const Pt=xt.points.map(Jt=>lt(Jt)),Ft=await Promise.all(Pt);xt.points.forEach((Jt,Te)=>{Vt[`{point_${Te+1}_title}`]=Jt.title||"",Vt[`{point_${Te+1}_summary}`]=pe.parseInline(Jt.summary||"",{breaks:!0}),Vt[`{icon_${Te+1}_svg}`]=Ft[Te]||""})}if(xt.template==="agenda"){const Pt=xt.summary.split(`
`).map(Ft=>{const Jt=Ft.replace(/^\s*\d+\.\s*/,"");return`<li>${pe.parseInline(Jt||"",{breaks:!0})}</li>`}).join("");Vt["{agenda_items_html}"]=Pt}if(["vertical_steps","content_basic"].includes(xt.template)&&Array.isArray(xt.items)){gt("designing"),await new Promise(Ft=>setTimeout(Ft,800));let Pt="";xt.template==="vertical_steps"?Pt=xt.items.map((Ft,Jt)=>`
            <div class="step">
              <div class="step-marker">${Jt+1}</div>
              <h2>${Ft.title||""}</h2>
              <p>${pe.parseInline(Ft.description||"",{breaks:!0})}</p> 
            </div>
          `).join(""):xt.template==="content_basic"&&(Pt=xt.items.map(Ft=>{const Jt=Ft||"",Te=Jt.match(/^(\s*)/)[0].length;let Ti=Jt.trim();Ti=Ti.replace(/^([\*\-\・\●\■]|(\d+\.)|[a-z]\.)\s*/,"");const ce=Math.floor(Te/2),li=ce>0?`style="margin-left: ${ce*2}em;"`:"";return`<li data-level="${ce}" ${li}>${pe.parseInline(Ti||"",{breaks:!0})}</li>`}).join("")),Vt["{items_html}"]=Pt}if(xt.template==="comparison"&&Array.isArray(xt.columns)&&(xt.columns[0]&&(Vt["{col_1_title}"]=xt.columns[0].title||"",Vt["{col_1_items_html}"]=Array.isArray(xt.columns[0].items)?xt.columns[0].items.map(Pt=>`<li>${pe.parseInline(Pt||"",{breaks:!0})}</li>`).join(""):""),xt.columns[1]&&(Vt["{col_2_title}"]=xt.columns[1].title||"",Vt["{col_2_items_html}"]=Array.isArray(xt.columns[1].items)?xt.columns[1].items.map(Pt=>`<li>${pe.parseInline(Pt||"",{breaks:!0})}</li>`).join(""):"")),xt.template==="table_basic"&&xt.table){gt("designing"),await new Promise(Ft=>setTimeout(Ft,800));let Pt="<thead><tr>";Array.isArray(xt.table.headers)&&(Pt+=xt.table.headers.map(Ft=>`<th>${pe.parseInline(Ft||"",{breaks:!0})}</th>`).join("")),Pt+="</tr></thead>",Pt+="<tbody>",Array.isArray(xt.table.rows)&&(Pt+=xt.table.rows.map(Ft=>{let Jt="<tr>";return Jt+=Ft.map(Te=>`<td>${pe.parseInline(Te||"",{breaks:!0})}</td>`).join(""),Jt+="</tr>",Jt}).join("")),Pt+="</tbody>",Vt["{table_html}"]=Pt}gt("coding"),await new Promise(Pt=>setTimeout(Pt,800)),Tt=Object.entries(Vt).reduce((Pt,[Ft,Jt])=>{const Te=new RegExp(Ft.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return Pt.replace(Te,Jt)},zt),f(Pt=>[...Pt,{type:"system",text:`スライド「${xt.title}」が生成されました。
プレビューで確認し、承認してください。`}])}catch(zt){console.error("Slide generation failed:",zt),Tt="",f(Vt=>[...Vt,{type:"system",text:`スライド生成に失敗しました: ${zt.message}。「承認して次へ」ボタンで再試行できます。`}])}finally{gt(null),D(!1),z(Tt),u(Xt.SLIDE_GENERATED)}},Is=async ft=>{D(!0),B(`スライド ${$+1} を修正中...`);const xt=or.modifySlide(ft,Et),Tt=await wt(xt,"gemini-2.5-flash-lite",`スライド${$+1}修正`);if(D(!1),Tt)try{const zt=JSON.parse(Tt);if(zt.html&&zt.changes){z(zt.html);const Vt=`スライドを修正しました。

**変更点:**
${zt.changes}`;f(Pt=>[...Pt,{type:"system",text:Vt}])}else throw new Error("Invalid JSON structure from API.")}catch(zt){console.error("Failed to parse JSON response for slide modification:",zt),f(Vt=>[...Vt,{type:"system",text:"スライドの修正結果を解析できませんでした。内容が予期せぬ形式です。"}])}},du=()=>{if(!Et)return;const ft=new Blob([Et],{type:"text/html"}),xt=URL.createObjectURL(ft);window.open(xt,"_blank")},Yl=()=>{if(!Et){f(Tt=>[...Tt,{type:"system",text:"スライド生成を再試行します。"}]),Qr($);return}const ft=[...vt,Et];mt(ft),z("");const xt=$+1;if(xt<E.length){X(xt);const Tt=E[xt];f(zt=>[...zt.filter(Vt=>Vt.type!=="system"),{type:"system",text:`スライド ${$+1} を承認しました。
次のスライド「${Tt.title}」の生成を開始します。`}]),Qr(xt)}else u(Xt.ALL_SLIDES_GENERATED),f(Tt=>[...Tt,{type:"system",text:`全てのステップが完了しました！
下のボタンからZIPファイルをダウンロードできます。`}])},Xl=async()=>{D(!0),B("ZIPファイルを生成中...");try{const ft=new N7;vt.forEach((zt,Vt)=>{ft.file(`s${Vt+1}.html`,zt)});const xt=await ft.generateAsync({type:"blob"}),Tt=document.createElement("a");Tt.href=URL.createObjectURL(xt),Tt.download="slides.zip",document.body.appendChild(Tt),Tt.click(),document.body.removeChild(Tt)}catch(ft){f(xt=>[...xt,{type:"system",text:`ZIPファイル生成中にエラーが発生しました: ${ft.message}`}])}finally{D(!1)}},Kl=()=>{if(o!==Xt.SLIDE_GENERATED)return;const ft=E[$]?.title||"";f(xt=>[...xt,{type:"system",text:`スライド「${ft}」を再生成します。`}]),z(""),Qr($)},vo=()=>{!m.trim()||o!==Xt.SLIDE_GENERATED||(f(ft=>[...ft,{type:"user",text:m}]),Is(m),p(""))},yo=()=>{pt(Et),at(!0)},Zl=()=>{z(ht),at(!1),f(ft=>[...ft,{type:"system",text:"手動での変更が適用されました。プレビューで確認してください。"}])},Wl=()=>{at(!1),pt("")},Gn=o===Xt.GENERATING_SLIDES,mi=o===Xt.SLIDE_GENERATED&&N,Ii=Gn||mi,Jr=Gn?E[$]?.title:mi?`${E[$]?.title} を修正中...`:"";return Z.jsxs("div",{className:"bg-[#1e1e1e] h-screen w-screen flex flex-col font-sans text-white",children:[Z.jsx(Tw,{onSettingsClick:()=>i(!0)}),Z.jsxs("main",{className:"flex-grow flex p-6 gap-6 overflow-hidden",children:[Z.jsx("div",{className:`transition-all duration-300 ease-in-out ${o===Xt.INITIAL||o===Xt.STRUCTURING||o===Xt.STRUCTURED||o===Xt.SELECTING_THEME||o===Xt.CREATING_OUTLINE||o===Xt.SELECTING_SECTION_HEADERS||o===Xt.GENERATING_OUTLINE||o===Xt.OUTLINE_CREATED?"w-1/3":"w-1/2"}`,children:o===Xt.INITIAL||o===Xt.STRUCTURING||o===Xt.STRUCTURED||o===Xt.SELECTING_THEME||o===Xt.CREATING_OUTLINE||o===Xt.SELECTING_SECTION_HEADERS||o===Xt.GENERATING_OUTLINE||o===Xt.OUTLINE_CREATED?Z.jsx(Cw,{isProcessing:N,processingStatus:F,fileName:b,handleDragOver:Kt,handleDrop:Ne,onFileSelect:le,appStatus:o,thinkingState:M,totalWaitTime:dt}):Z.jsx(Uw,{generatedSlides:vt,htmlContent:Et,isLoading:Ii,loadingSlideTitle:Jr})}),Z.jsx("div",{className:`transition-all duration-300 ease-in-out ${o===Xt.INITIAL||o===Xt.STRUCTURING||o===Xt.STRUCTURED||o===Xt.SELECTING_THEME||o===Xt.CREATING_OUTLINE||o===Xt.SELECTING_SECTION_HEADERS||o===Xt.GENERATING_OUTLINE||o===Xt.OUTLINE_CREATED?"w-2/3":"w-1/2"}`,children:Z.jsx(Pw,{chatState:{messages:h,userInput:m,setUserInput:p,handleSendMessage:vo,chatEndRef:U,appStatus:o,apiErrorStep:Y,handleRetry:Dt,structuredMarkdown:_,setStructuredMarkdown:A,handleMarkdownApproval:Zi,handleRegenerateStructure:Wn,selectedTheme:et,design:H,handleThemeSelection:vr,handleDesignSelection:ze,handleThemeApproval:fi,handleAgendaChoice:Wi,handleSectionHeaderChoice:He,slideOutline:E,handleOutlineChange:pa,handleInsertSlide:bo,handleDeleteSlide:go,handleStartGeneration:Vl,handleRegenerateOutline:Zr,handleRegenerateSlideContent:yr,handleOpenModifyModal:kn,handleOpenModifyAllModal:Qi,currentSlideIndex:$,thinkingState:M,handlePreview:du,handleRegenerateCurrentSlide:Kl,handleReturnToOutline:hu,handleApproveAndNext:Yl,handleDownloadZip:Xl,handleOpenCodeEditor:yo}})})]}),Z.jsx(Hw,{isOpen:e,tempApiKey:r,setTempApiKey:a,handleSave:Ot}),Z.jsx(jw,{isOpen:P,html:ht,setHtml:pt,onSave:Zl,onCancel:Wl}),Z.jsx(Gw,{isOpen:Bt,mode:xe.mode,index:xe.index,value:Ht,onChange:jt,onSave:Bs,onCancel:Wr})]})}e5.createRoot(document.getElementById("root")).render(Z.jsx(fe.StrictMode,{children:Z.jsx(qw,{})}));
