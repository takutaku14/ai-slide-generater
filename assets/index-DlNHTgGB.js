var s2=l=>{throw TypeError(l)};var Cd=(l,t,e)=>t.has(l)||s2("Cannot "+e);var ri=(l,t,e)=>(Cd(l,t,"read from private field"),e?e.call(l):t.get(l)),hr=(l,t,e)=>t.has(l)?s2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(l):t.set(l,e),gn=(l,t,e,i)=>(Cd(l,t,"write to private field"),i?i.call(l,e):t.set(l,e),e),dr=(l,t,e)=>(Cd(l,t,"access private method"),e);var a2=(l,t,e,i)=>({set _(r){gn(l,t,r,e)},get _(){return ri(l,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var v0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V3(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Md={exports:{}},vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o2;function X3(){if(o2)return vl;o2=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var u in r)u!=="key"&&(a[u]=r[u])}else a=r;return r=a.ref,{$$typeof:l,type:i,key:o,ref:r!==void 0?r:null,props:a}}return vl.Fragment=t,vl.jsx=e,vl.jsxs=e,vl}var l2;function K3(){return l2||(l2=1,Md.exports=X3()),Md.exports}var G=K3(),Rd={exports:{}},de={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2;function W3(){if(c2)return de;c2=1;var l=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),b=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=b&&B[b]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,_={};function A(B,P,st){this.props=B,this.context=P,this.refs=_,this.updater=st||w}A.prototype.isReactComponent={},A.prototype.setState=function(B,P){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,P,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function T(){}T.prototype=A.prototype;function M(B,P,st){this.props=B,this.context=P,this.refs=_,this.updater=st||w}var R=M.prototype=new T;R.constructor=M,x(R,A.prototype),R.isPureReactComponent=!0;var D=Array.isArray;function L(){}var z={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function U(B,P,st){var pt=st.ref;return{$$typeof:l,type:B,key:P,ref:pt!==void 0?pt:null,props:st}}function it(B,P){return U(B.type,P,B.props)}function ut(B){return typeof B=="object"&&B!==null&&B.$$typeof===l}function H(B){var P={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(st){return P[st]})}var rt=/\/+/g;function N(B,P){return typeof B=="object"&&B!==null&&B.key!=null?H(""+B.key):P.toString(36)}function at(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(L,L):(B.status="pending",B.then(function(P){B.status==="pending"&&(B.status="fulfilled",B.value=P)},function(P){B.status==="pending"&&(B.status="rejected",B.reason=P)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function X(B,P,st,pt,vt){var Ut=typeof B;(Ut==="undefined"||Ut==="boolean")&&(B=null);var Ft=!1;if(B===null)Ft=!0;else switch(Ut){case"bigint":case"string":case"number":Ft=!0;break;case"object":switch(B.$$typeof){case l:case t:Ft=!0;break;case m:return Ft=B._init,X(Ft(B._payload),P,st,pt,vt)}}if(Ft)return vt=vt(B),Ft=pt===""?"."+N(B,0):pt,D(vt)?(st="",Ft!=null&&(st=Ft.replace(rt,"$&/")+"/"),X(vt,P,st,"",function(ke){return ke})):vt!=null&&(ut(vt)&&(vt=it(vt,st+(vt.key==null||B&&B.key===vt.key?"":(""+vt.key).replace(rt,"$&/")+"/")+Ft)),P.push(vt)),1;Ft=0;var Yt=pt===""?".":pt+":";if(D(B))for(var qt=0;qt<B.length;qt++)pt=B[qt],Ut=Yt+N(pt,qt),Ft+=X(pt,P,st,Ut,vt);else if(qt=v(B),typeof qt=="function")for(B=qt.call(B),qt=0;!(pt=B.next()).done;)pt=pt.value,Ut=Yt+N(pt,qt++),Ft+=X(pt,P,st,Ut,vt);else if(Ut==="object"){if(typeof B.then=="function")return X(at(B),P,st,pt,vt);throw P=String(B),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Ft}function W(B,P,st){if(B==null)return B;var pt=[],vt=0;return X(B,pt,"","",function(Ut){return P.call(st,Ut,vt++)}),pt}function xt(B){if(B._status===-1){var P=B._result;P=P(),P.then(function(st){(B._status===0||B._status===-1)&&(B._status=1,B._result=st)},function(st){(B._status===0||B._status===-1)&&(B._status=2,B._result=st)}),B._status===-1&&(B._status=0,B._result=P)}if(B._status===1)return B._result.default;throw B._result}var bt=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Rt={map:W,forEach:function(B,P,st){W(B,function(){P.apply(this,arguments)},st)},count:function(B){var P=0;return W(B,function(){P++}),P},toArray:function(B){return W(B,function(P){return P})||[]},only:function(B){if(!ut(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return de.Activity=p,de.Children=Rt,de.Component=A,de.Fragment=e,de.Profiler=r,de.PureComponent=M,de.StrictMode=i,de.Suspense=h,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,de.__COMPILER_RUNTIME={__proto__:null,c:function(B){return z.H.useMemoCache(B)}},de.cache=function(B){return function(){return B.apply(null,arguments)}},de.cacheSignal=function(){return null},de.cloneElement=function(B,P,st){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var pt=x({},B.props),vt=B.key;if(P!=null)for(Ut in P.key!==void 0&&(vt=""+P.key),P)!q.call(P,Ut)||Ut==="key"||Ut==="__self"||Ut==="__source"||Ut==="ref"&&P.ref===void 0||(pt[Ut]=P[Ut]);var Ut=arguments.length-2;if(Ut===1)pt.children=st;else if(1<Ut){for(var Ft=Array(Ut),Yt=0;Yt<Ut;Yt++)Ft[Yt]=arguments[Yt+2];pt.children=Ft}return U(B.type,vt,pt)},de.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},de.createElement=function(B,P,st){var pt,vt={},Ut=null;if(P!=null)for(pt in P.key!==void 0&&(Ut=""+P.key),P)q.call(P,pt)&&pt!=="key"&&pt!=="__self"&&pt!=="__source"&&(vt[pt]=P[pt]);var Ft=arguments.length-2;if(Ft===1)vt.children=st;else if(1<Ft){for(var Yt=Array(Ft),qt=0;qt<Ft;qt++)Yt[qt]=arguments[qt+2];vt.children=Yt}if(B&&B.defaultProps)for(pt in Ft=B.defaultProps,Ft)vt[pt]===void 0&&(vt[pt]=Ft[pt]);return U(B,Ut,vt)},de.createRef=function(){return{current:null}},de.forwardRef=function(B){return{$$typeof:u,render:B}},de.isValidElement=ut,de.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:xt}},de.memo=function(B,P){return{$$typeof:f,type:B,compare:P===void 0?null:P}},de.startTransition=function(B){var P=z.T,st={};z.T=st;try{var pt=B(),vt=z.S;vt!==null&&vt(st,pt),typeof pt=="object"&&pt!==null&&typeof pt.then=="function"&&pt.then(L,bt)}catch(Ut){bt(Ut)}finally{P!==null&&st.types!==null&&(P.types=st.types),z.T=P}},de.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},de.use=function(B){return z.H.use(B)},de.useActionState=function(B,P,st){return z.H.useActionState(B,P,st)},de.useCallback=function(B,P){return z.H.useCallback(B,P)},de.useContext=function(B){return z.H.useContext(B)},de.useDebugValue=function(){},de.useDeferredValue=function(B,P){return z.H.useDeferredValue(B,P)},de.useEffect=function(B,P){return z.H.useEffect(B,P)},de.useEffectEvent=function(B){return z.H.useEffectEvent(B)},de.useId=function(){return z.H.useId()},de.useImperativeHandle=function(B,P,st){return z.H.useImperativeHandle(B,P,st)},de.useInsertionEffect=function(B,P){return z.H.useInsertionEffect(B,P)},de.useLayoutEffect=function(B,P){return z.H.useLayoutEffect(B,P)},de.useMemo=function(B,P){return z.H.useMemo(B,P)},de.useOptimistic=function(B,P){return z.H.useOptimistic(B,P)},de.useReducer=function(B,P,st){return z.H.useReducer(B,P,st)},de.useRef=function(B){return z.H.useRef(B)},de.useState=function(B){return z.H.useState(B)},de.useSyncExternalStore=function(B,P,st){return z.H.useSyncExternalStore(B,P,st)},de.useTransition=function(){return z.H.useTransition()},de.version="19.2.0",de}var u2;function Nf(){return u2||(u2=1,Rd.exports=W3()),Rd.exports}var pe=Nf(),Dd={exports:{}},yl={},Nd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2;function Z3(){return h2||(h2=1,(function(l){function t(X,W){var xt=X.length;X.push(W);t:for(;0<xt;){var bt=xt-1>>>1,Rt=X[bt];if(0<r(Rt,W))X[bt]=W,X[xt]=Rt,xt=bt;else break t}}function e(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var W=X[0],xt=X.pop();if(xt!==W){X[0]=xt;t:for(var bt=0,Rt=X.length,B=Rt>>>1;bt<B;){var P=2*(bt+1)-1,st=X[P],pt=P+1,vt=X[pt];if(0>r(st,xt))pt<Rt&&0>r(vt,st)?(X[bt]=vt,X[pt]=xt,bt=pt):(X[bt]=st,X[P]=xt,bt=P);else if(pt<Rt&&0>r(vt,xt))X[bt]=vt,X[pt]=xt,bt=pt;else break t}}return W}function r(X,W){var xt=X.sortIndex-W.sortIndex;return xt!==0?xt:X.id-W.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;l.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();l.unstable_now=function(){return o.now()-u}}var h=[],f=[],m=1,p=null,b=3,v=!1,w=!1,x=!1,_=!1,A=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function R(X){for(var W=e(f);W!==null;){if(W.callback===null)i(f);else if(W.startTime<=X)i(f),W.sortIndex=W.expirationTime,t(h,W);else break;W=e(f)}}function D(X){if(x=!1,R(X),!w)if(e(h)!==null)w=!0,L||(L=!0,H());else{var W=e(f);W!==null&&at(D,W.startTime-X)}}var L=!1,z=-1,q=5,U=-1;function it(){return _?!0:!(l.unstable_now()-U<q)}function ut(){if(_=!1,L){var X=l.unstable_now();U=X;var W=!0;try{t:{w=!1,x&&(x=!1,T(z),z=-1),v=!0;var xt=b;try{e:{for(R(X),p=e(h);p!==null&&!(p.expirationTime>X&&it());){var bt=p.callback;if(typeof bt=="function"){p.callback=null,b=p.priorityLevel;var Rt=bt(p.expirationTime<=X);if(X=l.unstable_now(),typeof Rt=="function"){p.callback=Rt,R(X),W=!0;break e}p===e(h)&&i(h),R(X)}else i(h);p=e(h)}if(p!==null)W=!0;else{var B=e(f);B!==null&&at(D,B.startTime-X),W=!1}}break t}finally{p=null,b=xt,v=!1}W=void 0}}finally{W?H():L=!1}}}var H;if(typeof M=="function")H=function(){M(ut)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,N=rt.port2;rt.port1.onmessage=ut,H=function(){N.postMessage(null)}}else H=function(){A(ut,0)};function at(X,W){z=A(function(){X(l.unstable_now())},W)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(X){X.callback=null},l.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<X?Math.floor(1e3/X):5},l.unstable_getCurrentPriorityLevel=function(){return b},l.unstable_next=function(X){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var xt=b;b=W;try{return X()}finally{b=xt}},l.unstable_requestPaint=function(){_=!0},l.unstable_runWithPriority=function(X,W){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var xt=b;b=X;try{return W()}finally{b=xt}},l.unstable_scheduleCallback=function(X,W,xt){var bt=l.unstable_now();switch(typeof xt=="object"&&xt!==null?(xt=xt.delay,xt=typeof xt=="number"&&0<xt?bt+xt:bt):xt=bt,X){case 1:var Rt=-1;break;case 2:Rt=250;break;case 5:Rt=1073741823;break;case 4:Rt=1e4;break;default:Rt=5e3}return Rt=xt+Rt,X={id:m++,callback:W,priorityLevel:X,startTime:xt,expirationTime:Rt,sortIndex:-1},xt>bt?(X.sortIndex=xt,t(f,X),e(h)===null&&X===e(f)&&(x?(T(z),z=-1):x=!0,at(D,xt-bt))):(X.sortIndex=Rt,t(h,X),w||v||(w=!0,L||(L=!0,H()))),X},l.unstable_shouldYield=it,l.unstable_wrapCallback=function(X){var W=b;return function(){var xt=b;b=W;try{return X.apply(this,arguments)}finally{b=xt}}}})(Od)),Od}var d2;function Q3(){return d2||(d2=1,Nd.exports=Z3()),Nd.exports}var zd={exports:{}},Vi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2;function J3(){if(f2)return Vi;f2=1;var l=Nf();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:h,containerInfo:f,implementation:m}}var o=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Vi.createPortal=function(h,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(h,f,null,m)},Vi.flushSync=function(h){var f=o.T,m=i.p;try{if(o.T=null,i.p=2,h)return h()}finally{o.T=f,i.p=m,i.d.f()}},Vi.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Vi.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Vi.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var m=f.as,p=u(m,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,v=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:v}):m==="script"&&i.d.X(h,{crossOrigin:p,integrity:b,fetchPriority:v,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Vi.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Vi.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=u(m,f.crossOrigin);i.d.L(h,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Vi.preloadModule=function(h,f){if(typeof h=="string")if(f){var m=u(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Vi.requestFormReset=function(h){i.d.r(h)},Vi.unstable_batchedUpdates=function(h,f){return h(f)},Vi.useFormState=function(h,f,m){return o.H.useFormState(h,f,m)},Vi.useFormStatus=function(){return o.H.useHostTransitionStatus()},Vi.version="19.2.0",Vi}var m2;function t5(){if(m2)return zd.exports;m2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),zd.exports=J3(),zd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function e5(){if(p2)return yl;p2=1;var l=Q3(),t=Nf(),e=t5();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a(n){var s=n,c=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(c=s.return),n=s.return;while(n)}return s.tag===3?c:null}function o(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function u(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(a(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=a(n),s===null)throw Error(i(188));return s!==n?null:n}for(var c=n,d=s;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return h(g),n;if(y===d)return h(g),s;y=y.sibling}throw Error(i(188))}if(c.return!==d.return)c=g,d=y;else{for(var k=!1,I=g.child;I;){if(I===c){k=!0,c=g,d=y;break}if(I===d){k=!0,d=g,c=y;break}I=I.sibling}if(!k){for(I=y.child;I;){if(I===c){k=!0,c=y,d=g;break}if(I===d){k=!0,d=y,c=g;break}I=I.sibling}if(!k)throw Error(i(189))}}if(c.alternate!==d)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?n:s}function m(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=m(n),s!==null)return s;n=n.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),M=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),it=Symbol.for("react.memo_cache_sentinel"),ut=Symbol.iterator;function H(n){return n===null||typeof n!="object"?null:(n=ut&&n[ut]||n["@@iterator"],typeof n=="function"?n:null)}var rt=Symbol.for("react.client.reference");function N(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===rt?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case A:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case L:return"SuspenseList";case U:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case M:return n.displayName||"Context";case T:return(n._context.displayName||"Context")+".Consumer";case R:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case z:return s=n.displayName||null,s!==null?s:N(n.type)||"Memo";case q:s=n._payload,n=n._init;try{return N(n(s))}catch{}}return null}var at=Array.isArray,X=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xt={pending:!1,data:null,method:null,action:null},bt=[],Rt=-1;function B(n){return{current:n}}function P(n){0>Rt||(n.current=bt[Rt],bt[Rt]=null,Rt--)}function st(n,s){Rt++,bt[Rt]=n.current,n.current=s}var pt=B(null),vt=B(null),Ut=B(null),Ft=B(null);function Yt(n,s){switch(st(Ut,s),st(vt,n),st(pt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Cg(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Cg(s),n=Mg(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}P(pt),st(pt,n)}function qt(){P(pt),P(vt),P(Ut)}function ke(n){n.memoizedState!==null&&st(Ft,n);var s=pt.current,c=Mg(s,n.type);s!==c&&(st(vt,n),st(pt,c))}function Ae(n){vt.current===n&&(P(pt),P(vt)),Ft.current===n&&(P(Ft),ml._currentValue=xt)}var ei,hi;function C(n){if(ei===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ei=s&&s[1]||"",hi=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ei+n+hi}var At=!1;function gt(n,s){if(!n||At)return"";At=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var Et=function(){throw Error()};if(Object.defineProperty(Et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Et,[])}catch(yt){var ft=yt}Reflect.construct(n,[],Et)}else{try{Et.call()}catch(yt){ft=yt}n.call(Et.prototype)}}else{try{throw Error()}catch(yt){ft=yt}(Et=n())&&typeof Et.catch=="function"&&Et.catch(function(){})}}catch(yt){if(yt&&ft&&typeof yt.stack=="string")return[yt.stack,ft.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=d.DetermineComponentFrameRoot(),k=y[0],I=y[1];if(k&&I){var K=k.split(`
`),ct=I.split(`
`);for(g=d=0;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;for(;g<ct.length&&!ct[g].includes("DetermineComponentFrameRoot");)g++;if(d===K.length||g===ct.length)for(d=K.length-1,g=ct.length-1;1<=d&&0<=g&&K[d]!==ct[g];)g--;for(;1<=d&&0<=g;d--,g--)if(K[d]!==ct[g]){if(d!==1||g!==1)do if(d--,g--,0>g||K[d]!==ct[g]){var St=`
`+K[d].replace(" at new "," at ");return n.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",n.displayName)),St}while(1<=d&&0<=g);break}}}finally{At=!1,Error.prepareStackTrace=c}return(c=n?n.displayName||n.name:"")?C(c):""}function $(n,s){switch(n.tag){case 26:case 27:case 5:return C(n.type);case 16:return C("Lazy");case 13:return n.child!==s&&s!==null?C("Suspense Fallback"):C("Suspense");case 19:return C("SuspenseList");case 0:case 15:return gt(n.type,!1);case 11:return gt(n.type.render,!1);case 1:return gt(n.type,!0);case 31:return C("Activity");default:return""}}function j(n){try{var s="",c=null;do s+=$(n,c),c=n,n=n.return;while(n);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Z=Object.prototype.hasOwnProperty,kt=l.unstable_scheduleCallback,Tt=l.unstable_cancelCallback,ht=l.unstable_shouldYield,zt=l.unstable_requestPaint,Lt=l.unstable_now,nt=l.unstable_getCurrentPriorityLevel,Zt=l.unstable_ImmediatePriority,ve=l.unstable_UserBlockingPriority,ye=l.unstable_NormalPriority,Gi=l.unstable_LowPriority,rr=l.unstable_IdlePriority,qi=l.log,Er=l.unstable_setDisableYieldValue,je=null,wi=null;function an(n){if(typeof qi=="function"&&Er(n),wi&&typeof wi.setStrictMode=="function")try{wi.setStrictMode(je,n)}catch{}}var Ze=Math.clz32?Math.clz32:_o,_a=Math.log,Ao=Math.LN2;function _o(n){return n>>>=0,n===0?32:31-(_a(n)/Ao|0)|0}var ns=256,kr=262144,zn=4194304;function on(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function rs(n,s,c){var d=n.pendingLanes;if(d===0)return 0;var g=0,y=n.suspendedLanes,k=n.pingedLanes;n=n.warmLanes;var I=d&134217727;return I!==0?(d=I&~y,d!==0?g=on(d):(k&=I,k!==0?g=on(k):c||(c=I&~n,c!==0&&(g=on(c))))):(I=d&~y,I!==0?g=on(I):k!==0?g=on(k):c||(c=d&~n,c!==0&&(g=on(c)))),g===0?0:s!==0&&s!==g&&(s&y)===0&&(y=g&-g,c=s&-s,y>=c||y===32&&(c&4194048)!==0)?s:g}function Gs(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function xu(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rc(){var n=zn;return zn<<=1,(zn&62914560)===0&&(zn=4194304),n}function Eo(n){for(var s=[],c=0;31>c;c++)s.push(n);return s}function qs(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function wu(n,s,c,d,g,y){var k=n.pendingLanes;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=c,n.entangledLanes&=c,n.errorRecoveryDisabledLanes&=c,n.shellSuspendCounter=0;var I=n.entanglements,K=n.expirationTimes,ct=n.hiddenUpdates;for(c=k&~c;0<c;){var St=31-Ze(c),Et=1<<St;I[St]=0,K[St]=-1;var ft=ct[St];if(ft!==null)for(ct[St]=null,St=0;St<ft.length;St++){var yt=ft[St];yt!==null&&(yt.lane&=-536870913)}c&=~Et}d!==0&&sc(n,d,0),y!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=y&~(k&~s))}function sc(n,s,c){n.pendingLanes|=s,n.suspendedLanes&=~s;var d=31-Ze(s);n.entangledLanes|=s,n.entanglements[d]=n.entanglements[d]|1073741824|c&261930}function Ea(n,s){var c=n.entangledLanes|=s;for(n=n.entanglements;c;){var d=31-Ze(c),g=1<<d;g&s|n[d]&s&&(n[d]|=s),c&=~g}}function ac(n,s){var c=s&-s;return c=(c&42)!==0?1:ko(c),(c&(n.suspendedLanes|s))!==0?0:c}function ko(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function To(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function $s(){var n=W.p;return n!==0?n:(n=window.event,n===void 0?32:Qg(n.type))}function oc(n,s){var c=W.p;try{return W.p=n,s()}finally{W.p=c}}var sr=Math.random().toString(36).slice(2),Mi="__reactFiber$"+sr,$i="__reactProps$"+sr,ss="__reactContainer$"+sr,Co="__reactEvents$"+sr,Su="__reactListeners$"+sr,Au="__reactHandles$"+sr,lc="__reactResources$"+sr,Ys="__reactMarker$"+sr;function Mo(n){delete n[Mi],delete n[$i],delete n[Co],delete n[Su],delete n[Au]}function Tr(n){var s=n[Mi];if(s)return s;for(var c=n.parentNode;c;){if(s=c[ss]||c[Mi]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(n=Bg(n);n!==null;){if(c=n[Mi])return c;n=Bg(n)}return s}n=c,c=n.parentNode}return null}function Cr(n){if(n=n[Mi]||n[ss]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Vs(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function as(n){var s=n[lc];return s||(s=n[lc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function tt(n){n[Ys]=!0}var dt=new Set,wt={};function mt(n,s){Nt(n,s),Nt(n+"Capture",s)}function Nt(n,s){for(wt[n]=s,n=0;n<s.length;n++)dt.add(s[n])}var Kt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),se={},te={};function Pt(n){return Z.call(te,n)?!0:Z.call(se,n)?!1:Kt.test(n)?te[n]=!0:(se[n]=!0,!1)}function Ct(n,s,c){if(Pt(s))if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+c)}}function ee(n,s,c){if(c===null)n.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+c)}}function re(n,s,c,d){if(d===null)n.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(c);return}n.setAttributeNS(s,c,""+d)}}function Gt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ce(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Fe(n,s,c){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(k){c=""+k,y.call(this,k)}}),Object.defineProperty(n,s,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(k){c=""+k},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ln(n){if(!n._valueTracker){var s=ce(n)?"checked":"value";n._valueTracker=Fe(n,s,""+n[s])}}function Ki(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return n&&(d=ce(n)?n.checked?"true":"false":n.value),n=d,n!==c?(s.setValue(n),!0):!1}function cn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ar=/[\n"\\]/g;function Ni(n){return n.replace(ar,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Qt(n,s,c,d,g,y,k,I){n.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.type=k:n.removeAttribute("type"),s!=null?k==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Gt(s)):n.value!==""+Gt(s)&&(n.value=""+Gt(s)):k!=="submit"&&k!=="reset"||n.removeAttribute("value"),s!=null?me(n,k,Gt(s)):c!=null?me(n,k,Gt(c)):d!=null&&n.removeAttribute("value"),g==null&&y!=null&&(n.defaultChecked=!!y),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+Gt(I):n.removeAttribute("name")}function It(n,s,c,d,g,y,k,I){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){ln(n);return}c=c!=null?""+Gt(c):"",s=s!=null?""+Gt(s):c,I||s===n.value||(n.value=s),n.defaultValue=s}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=I?n.checked:!!d,n.defaultChecked=!!d,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(n.name=k),ln(n)}function me(n,s,c){s==="number"&&cn(n.ownerDocument)===n||n.defaultValue===""+c||(n.defaultValue=""+c)}function Ne(n,s,c,d){if(n=n.options,s){s={};for(var g=0;g<c.length;g++)s["$"+c[g]]=!0;for(c=0;c<n.length;c++)g=s.hasOwnProperty("$"+n[c].value),n[c].selected!==g&&(n[c].selected=g),g&&d&&(n[c].defaultSelected=!0)}else{for(c=""+Gt(c),s=null,g=0;g<n.length;g++){if(n[g].value===c){n[g].selected=!0,d&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Yi(n,s,c){if(s!=null&&(s=""+Gt(s),s!==n.value&&(n.value=s),c==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=c!=null?""+Gt(c):""}function di(n,s,c,d){if(s==null){if(d!=null){if(c!=null)throw Error(i(92));if(at(d)){if(1<d.length)throw Error(i(93));d=d[0]}c=d}c==null&&(c=""),s=c}c=Gt(s),n.defaultValue=c,d=n.textContent,d===c&&d!==""&&d!==null&&(n.value=d),ln(n)}function ii(n,s){if(s){var c=n.firstChild;if(c&&c===n.lastChild&&c.nodeType===3){c.nodeValue=s;return}}n.textContent=s}var Ro=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Em(n,s,c){var d=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":d?n.setProperty(s,c):typeof c!="number"||c===0||Ro.has(s)?s==="float"?n.cssFloat=c:n[s]=(""+c).trim():n[s]=c+"px"}function km(n,s,c){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var g in s)d=s[g],s.hasOwnProperty(g)&&c[g]!==d&&Em(n,g,d)}else for(var y in s)s.hasOwnProperty(y)&&Em(n,y,s[y])}function _u(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cc(n){return qv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Mr(){}var Eu=null;function ku(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ka=null,Ta=null;function Tm(n){var s=Cr(n);if(s&&(n=s.stateNode)){var c=n[$i]||null;t:switch(n=s.stateNode,s.type){case"input":if(Qt(n,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=n;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ni(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==n&&d.form===n.form){var g=d[$i]||null;if(!g)throw Error(i(90));Qt(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<c.length;s++)d=c[s],d.form===n.form&&Ki(d)}break t;case"textarea":Yi(n,c.value,c.defaultValue);break t;case"select":s=c.value,s!=null&&Ne(n,!!c.multiple,s,!1)}}}var Tu=!1;function Cm(n,s,c){if(Tu)return n(s,c);Tu=!0;try{var d=n(s);return d}finally{if(Tu=!1,(ka!==null||Ta!==null)&&(Wc(),ka&&(s=ka,n=Ta,Ta=ka=null,Tm(s),n)))for(s=0;s<n.length;s++)Tm(n[s])}}function Do(n,s){var c=n.stateNode;if(c===null)return null;var d=c[$i]||null;if(d===null)return null;c=d[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break t;default:n=!1}if(n)return null;if(c&&typeof c!="function")throw Error(i(231,s,typeof c));return c}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cu=!1;if(Rr)try{var No={};Object.defineProperty(No,"passive",{get:function(){Cu=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{Cu=!1}var os=null,Mu=null,uc=null;function Mm(){if(uc)return uc;var n,s=Mu,c=s.length,d,g="value"in os?os.value:os.textContent,y=g.length;for(n=0;n<c&&s[n]===g[n];n++);var k=c-n;for(d=1;d<=k&&s[c-d]===g[y-d];d++);return uc=g.slice(n,1<d?1-d:void 0)}function hc(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function dc(){return!0}function Rm(){return!1}function un(n){function s(c,d,g,y,k){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(c=n[I],this[I]=c?c(y):y[I]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?dc:Rm,this.isPropagationStopped=Rm,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=dc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=dc)},persist:function(){},isPersistent:dc}),s}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=un(Xs),Oo=p({},Xs,{view:0,detail:0}),$v=un(Oo),Ru,Du,zo,mc=p({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zo&&(zo&&n.type==="mousemove"?(Ru=n.screenX-zo.screenX,Du=n.screenY-zo.screenY):Du=Ru=0,zo=n),Ru)},movementY:function(n){return"movementY"in n?n.movementY:Du}}),Dm=un(mc),Yv=p({},mc,{dataTransfer:0}),Vv=un(Yv),Xv=p({},Oo,{relatedTarget:0}),Nu=un(Xv),Kv=p({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),Wv=un(Kv),Zv=p({},Xs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qv=un(Zv),Jv=p({},Xs,{data:0}),Nm=un(Jv),ty={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ny(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=iy[n])?!!s[n]:!1}function Ou(){return ny}var ry=p({},Oo,{key:function(n){if(n.key){var s=ty[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=hc(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ey[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(n){return n.type==="keypress"?hc(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?hc(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sy=un(ry),ay=p({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Om=un(ay),oy=p({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),ly=un(oy),cy=p({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),uy=un(cy),hy=p({},mc,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dy=un(hy),fy=p({},Xs,{newState:0,oldState:0}),my=un(fy),py=[9,13,27,32],zu=Rr&&"CompositionEvent"in window,Lo=null;Rr&&"documentMode"in document&&(Lo=document.documentMode);var gy=Rr&&"TextEvent"in window&&!Lo,zm=Rr&&(!zu||Lo&&8<Lo&&11>=Lo),Lm=" ",Bm=!1;function Im(n,s){switch(n){case"keyup":return py.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ca=!1;function by(n,s){switch(n){case"compositionend":return Fm(s);case"keypress":return s.which!==32?null:(Bm=!0,Lm);case"textInput":return n=s.data,n===Lm&&Bm?null:n;default:return null}}function vy(n,s){if(Ca)return n==="compositionend"||!zu&&Im(n,s)?(n=Mm(),uc=Mu=os=null,Ca=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return zm&&s.locale!=="ko"?null:s.data;default:return null}}var yy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!yy[n.type]:s==="textarea"}function Um(n,s,c,d){ka?Ta?Ta.push(d):Ta=[d]:ka=d,s=n0(s,"onChange"),0<s.length&&(c=new fc("onChange","change",null,c,d),n.push({event:c,listeners:s}))}var Bo=null,Io=null;function xy(n){Sg(n,0)}function pc(n){var s=Vs(n);if(Ki(s))return n}function jm(n,s){if(n==="change")return s}var Hm=!1;if(Rr){var Lu;if(Rr){var Bu="oninput"in document;if(!Bu){var Gm=document.createElement("div");Gm.setAttribute("oninput","return;"),Bu=typeof Gm.oninput=="function"}Lu=Bu}else Lu=!1;Hm=Lu&&(!document.documentMode||9<document.documentMode)}function qm(){Bo&&(Bo.detachEvent("onpropertychange",$m),Io=Bo=null)}function $m(n){if(n.propertyName==="value"&&pc(Io)){var s=[];Um(s,Io,n,ku(n)),Cm(xy,s)}}function wy(n,s,c){n==="focusin"?(qm(),Bo=s,Io=c,Bo.attachEvent("onpropertychange",$m)):n==="focusout"&&qm()}function Sy(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return pc(Io)}function Ay(n,s){if(n==="click")return pc(s)}function _y(n,s){if(n==="input"||n==="change")return pc(s)}function Ey(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Sn=typeof Object.is=="function"?Object.is:Ey;function Fo(n,s){if(Sn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var c=Object.keys(n),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!Z.call(s,g)||!Sn(n[g],s[g]))return!1}return!0}function Ym(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vm(n,s){var c=Ym(n);n=0;for(var d;c;){if(c.nodeType===3){if(d=n+c.textContent.length,n<=s&&d>=s)return{node:c,offset:s-n};n=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=Ym(c)}}function Xm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Xm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Km(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=cn(n.document);s instanceof n.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)n=s.contentWindow;else break;s=cn(n.document)}return s}function Iu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var ky=Rr&&"documentMode"in document&&11>=document.documentMode,Ma=null,Fu=null,Po=null,Pu=!1;function Wm(n,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Pu||Ma==null||Ma!==cn(d)||(d=Ma,"selectionStart"in d&&Iu(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Po&&Fo(Po,d)||(Po=d,d=n0(Fu,"onSelect"),0<d.length&&(s=new fc("onSelect","select",null,s,c),n.push({event:s,listeners:d}),s.target=Ma)))}function Ks(n,s){var c={};return c[n.toLowerCase()]=s.toLowerCase(),c["Webkit"+n]="webkit"+s,c["Moz"+n]="moz"+s,c}var Ra={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},Uu={},Zm={};Rr&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function Ws(n){if(Uu[n])return Uu[n];if(!Ra[n])return n;var s=Ra[n],c;for(c in s)if(s.hasOwnProperty(c)&&c in Zm)return Uu[n]=s[c];return n}var Qm=Ws("animationend"),Jm=Ws("animationiteration"),tp=Ws("animationstart"),Ty=Ws("transitionrun"),Cy=Ws("transitionstart"),My=Ws("transitioncancel"),ep=Ws("transitionend"),ip=new Map,ju="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ju.push("scrollEnd");function Wn(n,s){ip.set(n,s),mt(s,[n])}var gc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ln=[],Da=0,Hu=0;function bc(){for(var n=Da,s=Hu=Da=0;s<n;){var c=Ln[s];Ln[s++]=null;var d=Ln[s];Ln[s++]=null;var g=Ln[s];Ln[s++]=null;var y=Ln[s];if(Ln[s++]=null,d!==null&&g!==null){var k=d.pending;k===null?g.next=g:(g.next=k.next,k.next=g),d.pending=g}y!==0&&np(c,g,y)}}function vc(n,s,c,d){Ln[Da++]=n,Ln[Da++]=s,Ln[Da++]=c,Ln[Da++]=d,Hu|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function Gu(n,s,c,d){return vc(n,s,c,d),yc(n)}function Zs(n,s){return vc(n,null,null,s),yc(n)}function np(n,s,c){n.lanes|=c;var d=n.alternate;d!==null&&(d.lanes|=c);for(var g=!1,y=n.return;y!==null;)y.childLanes|=c,d=y.alternate,d!==null&&(d.childLanes|=c),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(g=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,g&&s!==null&&(g=31-Ze(c),n=y.hiddenUpdates,d=n[g],d===null?n[g]=[s]:d.push(s),s.lane=c|536870912),y):null}function yc(n){if(50<ol)throw ol=0,Qh=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Na={};function Ry(n,s,c,d){this.tag=n,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,s,c,d){return new Ry(n,s,c,d)}function qu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Dr(n,s){var c=n.alternate;return c===null?(c=An(n.tag,s,n.key,n.mode),c.elementType=n.elementType,c.type=n.type,c.stateNode=n.stateNode,c.alternate=n,n.alternate=c):(c.pendingProps=s,c.type=n.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=n.flags&65011712,c.childLanes=n.childLanes,c.lanes=n.lanes,c.child=n.child,c.memoizedProps=n.memoizedProps,c.memoizedState=n.memoizedState,c.updateQueue=n.updateQueue,s=n.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=n.sibling,c.index=n.index,c.ref=n.ref,c.refCleanup=n.refCleanup,c}function rp(n,s){n.flags&=65011714;var c=n.alternate;return c===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=c.childLanes,n.lanes=c.lanes,n.child=c.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=c.memoizedProps,n.memoizedState=c.memoizedState,n.updateQueue=c.updateQueue,n.type=c.type,s=c.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function xc(n,s,c,d,g,y){var k=0;if(d=n,typeof n=="function")qu(n)&&(k=1);else if(typeof n=="string")k=L3(n,c,pt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case U:return n=An(31,c,s,g),n.elementType=U,n.lanes=y,n;case x:return Qs(c.children,g,y,s);case _:k=8,g|=24;break;case A:return n=An(12,c,s,g|2),n.elementType=A,n.lanes=y,n;case D:return n=An(13,c,s,g),n.elementType=D,n.lanes=y,n;case L:return n=An(19,c,s,g),n.elementType=L,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M:k=10;break t;case T:k=9;break t;case R:k=11;break t;case z:k=14;break t;case q:k=16,d=null;break t}k=29,c=Error(i(130,n===null?"null":typeof n,"")),d=null}return s=An(k,c,s,g),s.elementType=n,s.type=d,s.lanes=y,s}function Qs(n,s,c,d){return n=An(7,n,d,s),n.lanes=c,n}function $u(n,s,c){return n=An(6,n,null,s),n.lanes=c,n}function sp(n){var s=An(18,null,null,0);return s.stateNode=n,s}function Yu(n,s,c){return s=An(4,n.children!==null?n.children:[],n.key,s),s.lanes=c,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var ap=new WeakMap;function Bn(n,s){if(typeof n=="object"&&n!==null){var c=ap.get(n);return c!==void 0?c:(s={value:n,source:s,stack:j(s)},ap.set(n,s),s)}return{value:n,source:s,stack:j(s)}}var Oa=[],za=0,wc=null,Uo=0,In=[],Fn=0,ls=null,or=1,lr="";function Nr(n,s){Oa[za++]=Uo,Oa[za++]=wc,wc=n,Uo=s}function op(n,s,c){In[Fn++]=or,In[Fn++]=lr,In[Fn++]=ls,ls=n;var d=or;n=lr;var g=32-Ze(d)-1;d&=~(1<<g),c+=1;var y=32-Ze(s)+g;if(30<y){var k=g-g%5;y=(d&(1<<k)-1).toString(32),d>>=k,g-=k,or=1<<32-Ze(s)+g|c<<g|d,lr=y+n}else or=1<<y|c<<g|d,lr=n}function Vu(n){n.return!==null&&(Nr(n,1),op(n,1,0))}function Xu(n){for(;n===wc;)wc=Oa[--za],Oa[za]=null,Uo=Oa[--za],Oa[za]=null;for(;n===ls;)ls=In[--Fn],In[Fn]=null,lr=In[--Fn],In[Fn]=null,or=In[--Fn],In[Fn]=null}function lp(n,s){In[Fn++]=or,In[Fn++]=lr,In[Fn++]=ls,or=s.id,lr=s.overflow,ls=n}var Li=null,Je=null,Me=!1,cs=null,Pn=!1,Ku=Error(i(519));function us(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jo(Bn(s,n)),Ku}function cp(n){var s=n.stateNode,c=n.type,d=n.memoizedProps;switch(s[Mi]=n,s[$i]=d,c){case"dialog":Ee("cancel",s),Ee("close",s);break;case"iframe":case"object":case"embed":Ee("load",s);break;case"video":case"audio":for(c=0;c<cl.length;c++)Ee(cl[c],s);break;case"source":Ee("error",s);break;case"img":case"image":case"link":Ee("error",s),Ee("load",s);break;case"details":Ee("toggle",s);break;case"input":Ee("invalid",s),It(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Ee("invalid",s);break;case"textarea":Ee("invalid",s),di(s,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||d.suppressHydrationWarning===!0||kg(s.textContent,c)?(d.popover!=null&&(Ee("beforetoggle",s),Ee("toggle",s)),d.onScroll!=null&&Ee("scroll",s),d.onScrollEnd!=null&&Ee("scrollend",s),d.onClick!=null&&(s.onclick=Mr),s=!0):s=!1,s||us(n,!0)}function up(n){for(Li=n.return;Li;)switch(Li.tag){case 5:case 31:case 13:Pn=!1;return;case 27:case 3:Pn=!0;return;default:Li=Li.return}}function La(n){if(n!==Li)return!1;if(!Me)return up(n),Me=!0,!1;var s=n.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=n.type,c=!(c!=="form"&&c!=="button")||fd(n.type,n.memoizedProps)),c=!c),c&&Je&&us(n),up(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Je=Lg(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Je=Lg(n)}else s===27?(s=Je,_s(n.type)?(n=vd,vd=null,Je=n):Je=s):Je=Li?jn(n.stateNode.nextSibling):null;return!0}function Js(){Je=Li=null,Me=!1}function Wu(){var n=cs;return n!==null&&(mn===null?mn=n:mn.push.apply(mn,n),cs=null),n}function jo(n){cs===null?cs=[n]:cs.push(n)}var Zu=B(null),ta=null,Or=null;function hs(n,s,c){st(Zu,s._currentValue),s._currentValue=c}function zr(n){n._currentValue=Zu.current,P(Zu)}function Qu(n,s,c){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===c)break;n=n.return}}function Ju(n,s,c,d){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var y=g.dependencies;if(y!==null){var k=g.child;y=y.firstContext;t:for(;y!==null;){var I=y;y=g;for(var K=0;K<s.length;K++)if(I.context===s[K]){y.lanes|=c,I=y.alternate,I!==null&&(I.lanes|=c),Qu(y.return,c,n),d||(k=null);break t}y=I.next}}else if(g.tag===18){if(k=g.return,k===null)throw Error(i(341));k.lanes|=c,y=k.alternate,y!==null&&(y.lanes|=c),Qu(k,c,n),k=null}else k=g.child;if(k!==null)k.return=g;else for(k=g;k!==null;){if(k===n){k=null;break}if(g=k.sibling,g!==null){g.return=k.return,k=g;break}k=k.return}g=k}}function Ba(n,s,c,d){n=null;for(var g=s,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var k=g.alternate;if(k===null)throw Error(i(387));if(k=k.memoizedProps,k!==null){var I=g.type;Sn(g.pendingProps.value,k.value)||(n!==null?n.push(I):n=[I])}}else if(g===Ft.current){if(k=g.alternate,k===null)throw Error(i(387));k.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(ml):n=[ml])}g=g.return}n!==null&&Ju(s,n,c,d),s.flags|=262144}function Sc(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ea(n){ta=n,Or=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Bi(n){return hp(ta,n)}function Ac(n,s){return ta===null&&ea(n),hp(n,s)}function hp(n,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Or===null){if(n===null)throw Error(i(308));Or=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Or=Or.next=s;return c}var Dy=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(c,d){n.push(d)}};this.abort=function(){s.aborted=!0,n.forEach(function(c){return c()})}},Ny=l.unstable_scheduleCallback,Oy=l.unstable_NormalPriority,Si={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function th(){return{controller:new Dy,data:new Map,refCount:0}}function Ho(n){n.refCount--,n.refCount===0&&Ny(Oy,function(){n.controller.abort()})}var Go=null,eh=0,Ia=0,Fa=null;function zy(n,s){if(Go===null){var c=Go=[];eh=0,Ia=rd(),Fa={status:"pending",value:void 0,then:function(d){c.push(d)}}}return eh++,s.then(dp,dp),s}function dp(){if(--eh===0&&Go!==null){Fa!==null&&(Fa.status="fulfilled");var n=Go;Go=null,Ia=0,Fa=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Ly(n,s){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return n.then(function(){d.status="fulfilled",d.value=s;for(var g=0;g<c.length;g++)(0,c[g])(s)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var fp=X.S;X.S=function(n,s){W1=Lt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&zy(n,s),fp!==null&&fp(n,s)};var ia=B(null);function ih(){var n=ia.current;return n!==null?n:Xe.pooledCache}function _c(n,s){s===null?st(ia,ia.current):st(ia,s.pool)}function mp(){var n=ih();return n===null?null:{parent:Si._currentValue,pool:n}}var Pa=Error(i(460)),nh=Error(i(474)),Ec=Error(i(542)),kc={then:function(){}};function pp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function gp(n,s,c){switch(c=n[c],c===void 0?n.push(s):c!==s&&(s.then(Mr,Mr),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,vp(n),n;default:if(typeof s.status=="string")s.then(Mr,Mr);else{if(n=Xe,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(d){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=d}},function(d){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,vp(n),n}throw ra=s,Pa}}function na(n){try{var s=n._init;return s(n._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(ra=c,Pa):c}}var ra=null;function bp(){if(ra===null)throw Error(i(459));var n=ra;return ra=null,n}function vp(n){if(n===Pa||n===Ec)throw Error(i(483))}var Ua=null,qo=0;function Tc(n){var s=qo;return qo+=1,Ua===null&&(Ua=[]),gp(Ua,n,s)}function $o(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Cc(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function yp(n){function s(et,Q){if(n){var ot=et.deletions;ot===null?(et.deletions=[Q],et.flags|=16):ot.push(Q)}}function c(et,Q){if(!n)return null;for(;Q!==null;)s(et,Q),Q=Q.sibling;return null}function d(et){for(var Q=new Map;et!==null;)et.key!==null?Q.set(et.key,et):Q.set(et.index,et),et=et.sibling;return Q}function g(et,Q){return et=Dr(et,Q),et.index=0,et.sibling=null,et}function y(et,Q,ot){return et.index=ot,n?(ot=et.alternate,ot!==null?(ot=ot.index,ot<Q?(et.flags|=67108866,Q):ot):(et.flags|=67108866,Q)):(et.flags|=1048576,Q)}function k(et){return n&&et.alternate===null&&(et.flags|=67108866),et}function I(et,Q,ot,_t){return Q===null||Q.tag!==6?(Q=$u(ot,et.mode,_t),Q.return=et,Q):(Q=g(Q,ot),Q.return=et,Q)}function K(et,Q,ot,_t){var ie=ot.type;return ie===x?St(et,Q,ot.props.children,_t,ot.key):Q!==null&&(Q.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===q&&na(ie)===Q.type)?(Q=g(Q,ot.props),$o(Q,ot),Q.return=et,Q):(Q=xc(ot.type,ot.key,ot.props,null,et.mode,_t),$o(Q,ot),Q.return=et,Q)}function ct(et,Q,ot,_t){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ot.containerInfo||Q.stateNode.implementation!==ot.implementation?(Q=Yu(ot,et.mode,_t),Q.return=et,Q):(Q=g(Q,ot.children||[]),Q.return=et,Q)}function St(et,Q,ot,_t,ie){return Q===null||Q.tag!==7?(Q=Qs(ot,et.mode,_t,ie),Q.return=et,Q):(Q=g(Q,ot),Q.return=et,Q)}function Et(et,Q,ot){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=$u(""+Q,et.mode,ot),Q.return=et,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case v:return ot=xc(Q.type,Q.key,Q.props,null,et.mode,ot),$o(ot,Q),ot.return=et,ot;case w:return Q=Yu(Q,et.mode,ot),Q.return=et,Q;case q:return Q=na(Q),Et(et,Q,ot)}if(at(Q)||H(Q))return Q=Qs(Q,et.mode,ot,null),Q.return=et,Q;if(typeof Q.then=="function")return Et(et,Tc(Q),ot);if(Q.$$typeof===M)return Et(et,Ac(et,Q),ot);Cc(et,Q)}return null}function ft(et,Q,ot,_t){var ie=Q!==null?Q.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return ie!==null?null:I(et,Q,""+ot,_t);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case v:return ot.key===ie?K(et,Q,ot,_t):null;case w:return ot.key===ie?ct(et,Q,ot,_t):null;case q:return ot=na(ot),ft(et,Q,ot,_t)}if(at(ot)||H(ot))return ie!==null?null:St(et,Q,ot,_t,null);if(typeof ot.then=="function")return ft(et,Q,Tc(ot),_t);if(ot.$$typeof===M)return ft(et,Q,Ac(et,ot),_t);Cc(et,ot)}return null}function yt(et,Q,ot,_t,ie){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return et=et.get(ot)||null,I(Q,et,""+_t,ie);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case v:return et=et.get(_t.key===null?ot:_t.key)||null,K(Q,et,_t,ie);case w:return et=et.get(_t.key===null?ot:_t.key)||null,ct(Q,et,_t,ie);case q:return _t=na(_t),yt(et,Q,ot,_t,ie)}if(at(_t)||H(_t))return et=et.get(ot)||null,St(Q,et,_t,ie,null);if(typeof _t.then=="function")return yt(et,Q,ot,Tc(_t),ie);if(_t.$$typeof===M)return yt(et,Q,ot,Ac(Q,_t),ie);Cc(Q,_t)}return null}function Vt(et,Q,ot,_t){for(var ie=null,ze=null,Wt=Q,xe=Q=0,Ce=null;Wt!==null&&xe<ot.length;xe++){Wt.index>xe?(Ce=Wt,Wt=null):Ce=Wt.sibling;var Le=ft(et,Wt,ot[xe],_t);if(Le===null){Wt===null&&(Wt=Ce);break}n&&Wt&&Le.alternate===null&&s(et,Wt),Q=y(Le,Q,xe),ze===null?ie=Le:ze.sibling=Le,ze=Le,Wt=Ce}if(xe===ot.length)return c(et,Wt),Me&&Nr(et,xe),ie;if(Wt===null){for(;xe<ot.length;xe++)Wt=Et(et,ot[xe],_t),Wt!==null&&(Q=y(Wt,Q,xe),ze===null?ie=Wt:ze.sibling=Wt,ze=Wt);return Me&&Nr(et,xe),ie}for(Wt=d(Wt);xe<ot.length;xe++)Ce=yt(Wt,et,xe,ot[xe],_t),Ce!==null&&(n&&Ce.alternate!==null&&Wt.delete(Ce.key===null?xe:Ce.key),Q=y(Ce,Q,xe),ze===null?ie=Ce:ze.sibling=Ce,ze=Ce);return n&&Wt.forEach(function(Ms){return s(et,Ms)}),Me&&Nr(et,xe),ie}function le(et,Q,ot,_t){if(ot==null)throw Error(i(151));for(var ie=null,ze=null,Wt=Q,xe=Q=0,Ce=null,Le=ot.next();Wt!==null&&!Le.done;xe++,Le=ot.next()){Wt.index>xe?(Ce=Wt,Wt=null):Ce=Wt.sibling;var Ms=ft(et,Wt,Le.value,_t);if(Ms===null){Wt===null&&(Wt=Ce);break}n&&Wt&&Ms.alternate===null&&s(et,Wt),Q=y(Ms,Q,xe),ze===null?ie=Ms:ze.sibling=Ms,ze=Ms,Wt=Ce}if(Le.done)return c(et,Wt),Me&&Nr(et,xe),ie;if(Wt===null){for(;!Le.done;xe++,Le=ot.next())Le=Et(et,Le.value,_t),Le!==null&&(Q=y(Le,Q,xe),ze===null?ie=Le:ze.sibling=Le,ze=Le);return Me&&Nr(et,xe),ie}for(Wt=d(Wt);!Le.done;xe++,Le=ot.next())Le=yt(Wt,et,xe,Le.value,_t),Le!==null&&(n&&Le.alternate!==null&&Wt.delete(Le.key===null?xe:Le.key),Q=y(Le,Q,xe),ze===null?ie=Le:ze.sibling=Le,ze=Le);return n&&Wt.forEach(function(Y3){return s(et,Y3)}),Me&&Nr(et,xe),ie}function Ye(et,Q,ot,_t){if(typeof ot=="object"&&ot!==null&&ot.type===x&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case v:t:{for(var ie=ot.key;Q!==null;){if(Q.key===ie){if(ie=ot.type,ie===x){if(Q.tag===7){c(et,Q.sibling),_t=g(Q,ot.props.children),_t.return=et,et=_t;break t}}else if(Q.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===q&&na(ie)===Q.type){c(et,Q.sibling),_t=g(Q,ot.props),$o(_t,ot),_t.return=et,et=_t;break t}c(et,Q);break}else s(et,Q);Q=Q.sibling}ot.type===x?(_t=Qs(ot.props.children,et.mode,_t,ot.key),_t.return=et,et=_t):(_t=xc(ot.type,ot.key,ot.props,null,et.mode,_t),$o(_t,ot),_t.return=et,et=_t)}return k(et);case w:t:{for(ie=ot.key;Q!==null;){if(Q.key===ie)if(Q.tag===4&&Q.stateNode.containerInfo===ot.containerInfo&&Q.stateNode.implementation===ot.implementation){c(et,Q.sibling),_t=g(Q,ot.children||[]),_t.return=et,et=_t;break t}else{c(et,Q);break}else s(et,Q);Q=Q.sibling}_t=Yu(ot,et.mode,_t),_t.return=et,et=_t}return k(et);case q:return ot=na(ot),Ye(et,Q,ot,_t)}if(at(ot))return Vt(et,Q,ot,_t);if(H(ot)){if(ie=H(ot),typeof ie!="function")throw Error(i(150));return ot=ie.call(ot),le(et,Q,ot,_t)}if(typeof ot.then=="function")return Ye(et,Q,Tc(ot),_t);if(ot.$$typeof===M)return Ye(et,Q,Ac(et,ot),_t);Cc(et,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint"?(ot=""+ot,Q!==null&&Q.tag===6?(c(et,Q.sibling),_t=g(Q,ot),_t.return=et,et=_t):(c(et,Q),_t=$u(ot,et.mode,_t),_t.return=et,et=_t),k(et)):c(et,Q)}return function(et,Q,ot,_t){try{qo=0;var ie=Ye(et,Q,ot,_t);return Ua=null,ie}catch(Wt){if(Wt===Pa||Wt===Ec)throw Wt;var ze=An(29,Wt,null,et.mode);return ze.lanes=_t,ze.return=et,ze}finally{}}}var sa=yp(!0),xp=yp(!1),ds=!1;function rh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sh(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function fs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ms(n,s,c){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(Pe&2)!==0){var g=d.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),d.pending=s,s=yc(n),np(n,null,c),s}return vc(n,d,s,c),yc(n)}function Yo(n,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var d=s.lanes;d&=n.pendingLanes,c|=d,s.lanes=c,Ea(n,c)}}function ah(n,s){var c=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var k={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=k:y=y.next=k,c=c.next}while(c!==null);y===null?g=y=s:y=y.next=s}else g=y=s;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:d.shared,callbacks:d.callbacks},n.updateQueue=c;return}n=c.lastBaseUpdate,n===null?c.firstBaseUpdate=s:n.next=s,c.lastBaseUpdate=s}var oh=!1;function Vo(){if(oh){var n=Fa;if(n!==null)throw n}}function Xo(n,s,c,d){oh=!1;var g=n.updateQueue;ds=!1;var y=g.firstBaseUpdate,k=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var K=I,ct=K.next;K.next=null,k===null?y=ct:k.next=ct,k=K;var St=n.alternate;St!==null&&(St=St.updateQueue,I=St.lastBaseUpdate,I!==k&&(I===null?St.firstBaseUpdate=ct:I.next=ct,St.lastBaseUpdate=K))}if(y!==null){var Et=g.baseState;k=0,St=ct=K=null,I=y;do{var ft=I.lane&-536870913,yt=ft!==I.lane;if(yt?(Te&ft)===ft:(d&ft)===ft){ft!==0&&ft===Ia&&(oh=!0),St!==null&&(St=St.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});t:{var Vt=n,le=I;ft=s;var Ye=c;switch(le.tag){case 1:if(Vt=le.payload,typeof Vt=="function"){Et=Vt.call(Ye,Et,ft);break t}Et=Vt;break t;case 3:Vt.flags=Vt.flags&-65537|128;case 0:if(Vt=le.payload,ft=typeof Vt=="function"?Vt.call(Ye,Et,ft):Vt,ft==null)break t;Et=p({},Et,ft);break t;case 2:ds=!0}}ft=I.callback,ft!==null&&(n.flags|=64,yt&&(n.flags|=8192),yt=g.callbacks,yt===null?g.callbacks=[ft]:yt.push(ft))}else yt={lane:ft,tag:I.tag,payload:I.payload,callback:I.callback,next:null},St===null?(ct=St=yt,K=Et):St=St.next=yt,k|=ft;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;yt=I,I=yt.next,yt.next=null,g.lastBaseUpdate=yt,g.shared.pending=null}}while(!0);St===null&&(K=Et),g.baseState=K,g.firstBaseUpdate=ct,g.lastBaseUpdate=St,y===null&&(g.shared.lanes=0),ys|=k,n.lanes=k,n.memoizedState=Et}}function wp(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Sp(n,s){var c=n.callbacks;if(c!==null)for(n.callbacks=null,n=0;n<c.length;n++)wp(c[n],s)}var ja=B(null),Mc=B(0);function Ap(n,s){n=Gr,st(Mc,n),st(ja,s),Gr=n|s.baseLanes}function lh(){st(Mc,Gr),st(ja,ja.current)}function ch(){Gr=Mc.current,P(ja),P(Mc)}var _n=B(null),Un=null;function ps(n){var s=n.alternate;st(bi,bi.current&1),st(_n,n),Un===null&&(s===null||ja.current!==null||s.memoizedState!==null)&&(Un=n)}function uh(n){st(bi,bi.current),st(_n,n),Un===null&&(Un=n)}function _p(n){n.tag===22?(st(bi,bi.current),st(_n,n),Un===null&&(Un=n)):gs()}function gs(){st(bi,bi.current),st(_n,_n.current)}function En(n){P(_n),Un===n&&(Un=null),P(bi)}var bi=B(0);function Rc(n){for(var s=n;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||gd(c)||bd(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Lr=0,be=null,qe=null,Ai=null,Dc=!1,Ha=!1,aa=!1,Nc=0,Ko=0,Ga=null,By=0;function fi(){throw Error(i(321))}function hh(n,s){if(s===null)return!1;for(var c=0;c<s.length&&c<n.length;c++)if(!Sn(n[c],s[c]))return!1;return!0}function dh(n,s,c,d,g,y){return Lr=y,be=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=n===null||n.memoizedState===null?o1:Th,aa=!1,y=c(d,g),aa=!1,Ha&&(y=kp(s,c,d,g)),Ep(n),y}function Ep(n){X.H=Qo;var s=qe!==null&&qe.next!==null;if(Lr=0,Ai=qe=be=null,Dc=!1,Ko=0,Ga=null,s)throw Error(i(300));n===null||_i||(n=n.dependencies,n!==null&&Sc(n)&&(_i=!0))}function kp(n,s,c,d){be=n;var g=0;do{if(Ha&&(Ga=null),Ko=0,Ha=!1,25<=g)throw Error(i(301));if(g+=1,Ai=qe=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}X.H=l1,y=s(c,d)}while(Ha);return y}function Iy(){var n=X.H,s=n.useState()[0];return s=typeof s.then=="function"?Wo(s):s,n=n.useState()[0],(qe!==null?qe.memoizedState:null)!==n&&(be.flags|=1024),s}function fh(){var n=Nc!==0;return Nc=0,n}function mh(n,s,c){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~c}function ph(n){if(Dc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Dc=!1}Lr=0,Ai=qe=be=null,Ha=!1,Ko=Nc=0,Ga=null}function Wi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?be.memoizedState=Ai=n:Ai=Ai.next=n,Ai}function vi(){if(qe===null){var n=be.alternate;n=n!==null?n.memoizedState:null}else n=qe.next;var s=Ai===null?be.memoizedState:Ai.next;if(s!==null)Ai=s,qe=n;else{if(n===null)throw be.alternate===null?Error(i(467)):Error(i(310));qe=n,n={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ai===null?be.memoizedState=Ai=n:Ai=Ai.next=n}return Ai}function Oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wo(n){var s=Ko;return Ko+=1,Ga===null&&(Ga=[]),n=gp(Ga,n,s),s=be,(Ai===null?s.memoizedState:Ai.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?o1:Th),n}function zc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Wo(n);if(n.$$typeof===M)return Bi(n)}throw Error(i(438,String(n)))}function gh(n){var s=null,c=be.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var d=be.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Oc(),be.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(n),d=0;d<n;d++)c[d]=it;return s.index++,c}function Br(n,s){return typeof s=="function"?s(n):s}function Lc(n){var s=vi();return bh(s,qe,n)}function bh(n,s,c){var d=n.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=c;var g=n.baseQueue,y=d.pending;if(y!==null){if(g!==null){var k=g.next;g.next=y.next,y.next=k}s.baseQueue=g=y,d.pending=null}if(y=n.baseState,g===null)n.memoizedState=y;else{s=g.next;var I=k=null,K=null,ct=s,St=!1;do{var Et=ct.lane&-536870913;if(Et!==ct.lane?(Te&Et)===Et:(Lr&Et)===Et){var ft=ct.revertLane;if(ft===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),Et===Ia&&(St=!0);else if((Lr&ft)===ft){ct=ct.next,ft===Ia&&(St=!0);continue}else Et={lane:0,revertLane:ct.revertLane,gesture:null,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},K===null?(I=K=Et,k=y):K=K.next=Et,be.lanes|=ft,ys|=ft;Et=ct.action,aa&&c(y,Et),y=ct.hasEagerState?ct.eagerState:c(y,Et)}else ft={lane:Et,revertLane:ct.revertLane,gesture:ct.gesture,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null},K===null?(I=K=ft,k=y):K=K.next=ft,be.lanes|=Et,ys|=Et;ct=ct.next}while(ct!==null&&ct!==s);if(K===null?k=y:K.next=I,!Sn(y,n.memoizedState)&&(_i=!0,St&&(c=Fa,c!==null)))throw c;n.memoizedState=y,n.baseState=k,n.baseQueue=K,d.lastRenderedState=y}return g===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function vh(n){var s=vi(),c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=n;var d=c.dispatch,g=c.pending,y=s.memoizedState;if(g!==null){c.pending=null;var k=g=g.next;do y=n(y,k.action),k=k.next;while(k!==g);Sn(y,s.memoizedState)||(_i=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),c.lastRenderedState=y}return[y,d]}function Tp(n,s,c){var d=be,g=vi(),y=Me;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=s();var k=!Sn((qe||g).memoizedState,c);if(k&&(g.memoizedState=c,_i=!0),g=g.queue,wh(Rp.bind(null,d,g,n),[n]),g.getSnapshot!==s||k||Ai!==null&&Ai.memoizedState.tag&1){if(d.flags|=2048,qa(9,{destroy:void 0},Mp.bind(null,d,g,c,s),null),Xe===null)throw Error(i(349));y||(Lr&127)!==0||Cp(d,s,c)}return c}function Cp(n,s,c){n.flags|=16384,n={getSnapshot:s,value:c},s=be.updateQueue,s===null?(s=Oc(),be.updateQueue=s,s.stores=[n]):(c=s.stores,c===null?s.stores=[n]:c.push(n))}function Mp(n,s,c,d){s.value=c,s.getSnapshot=d,Dp(s)&&Np(n)}function Rp(n,s,c){return c(function(){Dp(s)&&Np(n)})}function Dp(n){var s=n.getSnapshot;n=n.value;try{var c=s();return!Sn(n,c)}catch{return!0}}function Np(n){var s=Zs(n,2);s!==null&&pn(s,n,2)}function yh(n){var s=Wi();if(typeof n=="function"){var c=n;if(n=c(),aa){an(!0);try{c()}finally{an(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:n},s}function Op(n,s,c,d){return n.baseState=c,bh(n,qe,typeof d=="function"?d:Br)}function Fy(n,s,c,d,g){if(Fc(n))throw Error(i(485));if(n=s.action,n!==null){var y={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){y.listeners.push(k)}};X.T!==null?c(!0):y.isTransition=!1,d(y),c=s.pending,c===null?(y.next=s.pending=y,zp(s,y)):(y.next=c.next,s.pending=c.next=y)}}function zp(n,s){var c=s.action,d=s.payload,g=n.state;if(s.isTransition){var y=X.T,k={};X.T=k;try{var I=c(g,d),K=X.S;K!==null&&K(k,I),Lp(n,s,I)}catch(ct){xh(n,s,ct)}finally{y!==null&&k.types!==null&&(y.types=k.types),X.T=y}}else try{y=c(g,d),Lp(n,s,y)}catch(ct){xh(n,s,ct)}}function Lp(n,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Bp(n,s,d)},function(d){return xh(n,s,d)}):Bp(n,s,c)}function Bp(n,s,c){s.status="fulfilled",s.value=c,Ip(s),n.state=c,s=n.pending,s!==null&&(c=s.next,c===s?n.pending=null:(c=c.next,s.next=c,zp(n,c)))}function xh(n,s,c){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=c,Ip(s),s=s.next;while(s!==d)}n.action=null}function Ip(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Fp(n,s){return s}function Pp(n,s){if(Me){var c=Xe.formState;if(c!==null){t:{var d=be;if(Me){if(Je){e:{for(var g=Je,y=Pn;g.nodeType!==8;){if(!y){g=null;break e}if(g=jn(g.nextSibling),g===null){g=null;break e}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Je=jn(g.nextSibling),d=g.data==="F!";break t}}us(d)}d=!1}d&&(s=c[0])}}return c=Wi(),c.memoizedState=c.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fp,lastRenderedState:s},c.queue=d,c=r1.bind(null,be,d),d.dispatch=c,d=yh(!1),y=kh.bind(null,be,!1,d.queue),d=Wi(),g={state:s,dispatch:null,action:n,pending:null},d.queue=g,c=Fy.bind(null,be,g,y,c),g.dispatch=c,d.memoizedState=n,[s,c,!1]}function Up(n){var s=vi();return jp(s,qe,n)}function jp(n,s,c){if(s=bh(n,s,Fp)[0],n=Lc(Br)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=Wo(s)}catch(k){throw k===Pa?Ec:k}else d=s;s=vi();var g=s.queue,y=g.dispatch;return c!==s.memoizedState&&(be.flags|=2048,qa(9,{destroy:void 0},Py.bind(null,g,c),null)),[d,y,n]}function Py(n,s){n.action=s}function Hp(n){var s=vi(),c=qe;if(c!==null)return jp(s,c,n);vi(),s=s.memoizedState,c=vi();var d=c.queue.dispatch;return c.memoizedState=n,[s,d,!1]}function qa(n,s,c,d){return n={tag:n,create:c,deps:d,inst:s,next:null},s=be.updateQueue,s===null&&(s=Oc(),be.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=n.next=n:(d=c.next,c.next=n,n.next=d,s.lastEffect=n),n}function Gp(){return vi().memoizedState}function Bc(n,s,c,d){var g=Wi();be.flags|=n,g.memoizedState=qa(1|s,{destroy:void 0},c,d===void 0?null:d)}function Ic(n,s,c,d){var g=vi();d=d===void 0?null:d;var y=g.memoizedState.inst;qe!==null&&d!==null&&hh(d,qe.memoizedState.deps)?g.memoizedState=qa(s,y,c,d):(be.flags|=n,g.memoizedState=qa(1|s,y,c,d))}function qp(n,s){Bc(8390656,8,n,s)}function wh(n,s){Ic(2048,8,n,s)}function Uy(n){be.flags|=4;var s=be.updateQueue;if(s===null)s=Oc(),be.updateQueue=s,s.events=[n];else{var c=s.events;c===null?s.events=[n]:c.push(n)}}function $p(n){var s=vi().memoizedState;return Uy({ref:s,nextImpl:n}),function(){if((Pe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Yp(n,s){return Ic(4,2,n,s)}function Vp(n,s){return Ic(4,4,n,s)}function Xp(n,s){if(typeof s=="function"){n=n();var c=s(n);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Kp(n,s,c){c=c!=null?c.concat([n]):null,Ic(4,4,Xp.bind(null,s,n),c)}function Sh(){}function Wp(n,s){var c=vi();s=s===void 0?null:s;var d=c.memoizedState;return s!==null&&hh(s,d[1])?d[0]:(c.memoizedState=[n,s],n)}function Zp(n,s){var c=vi();s=s===void 0?null:s;var d=c.memoizedState;if(s!==null&&hh(s,d[1]))return d[0];if(d=n(),aa){an(!0);try{n()}finally{an(!1)}}return c.memoizedState=[d,s],d}function Ah(n,s,c){return c===void 0||(Lr&1073741824)!==0&&(Te&261930)===0?n.memoizedState=s:(n.memoizedState=c,n=Q1(),be.lanes|=n,ys|=n,c)}function Qp(n,s,c,d){return Sn(c,s)?c:ja.current!==null?(n=Ah(n,c,d),Sn(n,s)||(_i=!0),n):(Lr&42)===0||(Lr&1073741824)!==0&&(Te&261930)===0?(_i=!0,n.memoizedState=c):(n=Q1(),be.lanes|=n,ys|=n,s)}function Jp(n,s,c,d,g){var y=W.p;W.p=y!==0&&8>y?y:8;var k=X.T,I={};X.T=I,kh(n,!1,s,c);try{var K=g(),ct=X.S;if(ct!==null&&ct(I,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var St=Ly(K,d);Zo(n,s,St,Cn(n))}else Zo(n,s,d,Cn(n))}catch(Et){Zo(n,s,{then:function(){},status:"rejected",reason:Et},Cn())}finally{W.p=y,k!==null&&I.types!==null&&(k.types=I.types),X.T=k}}function jy(){}function _h(n,s,c,d){if(n.tag!==5)throw Error(i(476));var g=t1(n).queue;Jp(n,g,s,xt,c===null?jy:function(){return e1(n),c(d)})}function t1(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:xt,baseState:xt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:xt},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:c},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function e1(n){var s=t1(n);s.next===null&&(s=n.alternate.memoizedState),Zo(n,s.next.queue,{},Cn())}function Eh(){return Bi(ml)}function i1(){return vi().memoizedState}function n1(){return vi().memoizedState}function Hy(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var c=Cn();n=fs(c);var d=ms(s,n,c);d!==null&&(pn(d,s,c),Yo(d,s,c)),s={cache:th()},n.payload=s;return}s=s.return}}function Gy(n,s,c){var d=Cn();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Fc(n)?s1(s,c):(c=Gu(n,s,c,d),c!==null&&(pn(c,n,d),a1(c,s,d)))}function r1(n,s,c){var d=Cn();Zo(n,s,c,d)}function Zo(n,s,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Fc(n))s1(s,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var k=s.lastRenderedState,I=y(k,c);if(g.hasEagerState=!0,g.eagerState=I,Sn(I,k))return vc(n,s,g,0),Xe===null&&bc(),!1}catch{}finally{}if(c=Gu(n,s,g,d),c!==null)return pn(c,n,d),a1(c,s,d),!0}return!1}function kh(n,s,c,d){if(d={lane:2,revertLane:rd(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Fc(n)){if(s)throw Error(i(479))}else s=Gu(n,c,d,2),s!==null&&pn(s,n,2)}function Fc(n){var s=n.alternate;return n===be||s!==null&&s===be}function s1(n,s){Ha=Dc=!0;var c=n.pending;c===null?s.next=s:(s.next=c.next,c.next=s),n.pending=s}function a1(n,s,c){if((c&4194048)!==0){var d=s.lanes;d&=n.pendingLanes,c|=d,s.lanes=c,Ea(n,c)}}var Qo={readContext:Bi,use:zc,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useLayoutEffect:fi,useInsertionEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useSyncExternalStore:fi,useId:fi,useHostTransitionStatus:fi,useFormState:fi,useActionState:fi,useOptimistic:fi,useMemoCache:fi,useCacheRefresh:fi};Qo.useEffectEvent=fi;var o1={readContext:Bi,use:zc,useCallback:function(n,s){return Wi().memoizedState=[n,s===void 0?null:s],n},useContext:Bi,useEffect:qp,useImperativeHandle:function(n,s,c){c=c!=null?c.concat([n]):null,Bc(4194308,4,Xp.bind(null,s,n),c)},useLayoutEffect:function(n,s){return Bc(4194308,4,n,s)},useInsertionEffect:function(n,s){Bc(4,2,n,s)},useMemo:function(n,s){var c=Wi();s=s===void 0?null:s;var d=n();if(aa){an(!0);try{n()}finally{an(!1)}}return c.memoizedState=[d,s],d},useReducer:function(n,s,c){var d=Wi();if(c!==void 0){var g=c(s);if(aa){an(!0);try{c(s)}finally{an(!1)}}}else g=s;return d.memoizedState=d.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},d.queue=n,n=n.dispatch=Gy.bind(null,be,n),[d.memoizedState,n]},useRef:function(n){var s=Wi();return n={current:n},s.memoizedState=n},useState:function(n){n=yh(n);var s=n.queue,c=r1.bind(null,be,s);return s.dispatch=c,[n.memoizedState,c]},useDebugValue:Sh,useDeferredValue:function(n,s){var c=Wi();return Ah(c,n,s)},useTransition:function(){var n=yh(!1);return n=Jp.bind(null,be,n.queue,!0,!1),Wi().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,c){var d=be,g=Wi();if(Me){if(c===void 0)throw Error(i(407));c=c()}else{if(c=s(),Xe===null)throw Error(i(349));(Te&127)!==0||Cp(d,s,c)}g.memoizedState=c;var y={value:c,getSnapshot:s};return g.queue=y,qp(Rp.bind(null,d,y,n),[n]),d.flags|=2048,qa(9,{destroy:void 0},Mp.bind(null,d,y,c,s),null),c},useId:function(){var n=Wi(),s=Xe.identifierPrefix;if(Me){var c=lr,d=or;c=(d&~(1<<32-Ze(d)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Nc++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=By++,s="_"+s+"r_"+c.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Eh,useFormState:Pp,useActionState:Pp,useOptimistic:function(n){var s=Wi();s.memoizedState=s.baseState=n;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=kh.bind(null,be,!0,c),c.dispatch=s,[n,s]},useMemoCache:gh,useCacheRefresh:function(){return Wi().memoizedState=Hy.bind(null,be)},useEffectEvent:function(n){var s=Wi(),c={impl:n};return s.memoizedState=c,function(){if((Pe&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},Th={readContext:Bi,use:zc,useCallback:Wp,useContext:Bi,useEffect:wh,useImperativeHandle:Kp,useInsertionEffect:Yp,useLayoutEffect:Vp,useMemo:Zp,useReducer:Lc,useRef:Gp,useState:function(){return Lc(Br)},useDebugValue:Sh,useDeferredValue:function(n,s){var c=vi();return Qp(c,qe.memoizedState,n,s)},useTransition:function(){var n=Lc(Br)[0],s=vi().memoizedState;return[typeof n=="boolean"?n:Wo(n),s]},useSyncExternalStore:Tp,useId:i1,useHostTransitionStatus:Eh,useFormState:Up,useActionState:Up,useOptimistic:function(n,s){var c=vi();return Op(c,qe,n,s)},useMemoCache:gh,useCacheRefresh:n1};Th.useEffectEvent=$p;var l1={readContext:Bi,use:zc,useCallback:Wp,useContext:Bi,useEffect:wh,useImperativeHandle:Kp,useInsertionEffect:Yp,useLayoutEffect:Vp,useMemo:Zp,useReducer:vh,useRef:Gp,useState:function(){return vh(Br)},useDebugValue:Sh,useDeferredValue:function(n,s){var c=vi();return qe===null?Ah(c,n,s):Qp(c,qe.memoizedState,n,s)},useTransition:function(){var n=vh(Br)[0],s=vi().memoizedState;return[typeof n=="boolean"?n:Wo(n),s]},useSyncExternalStore:Tp,useId:i1,useHostTransitionStatus:Eh,useFormState:Hp,useActionState:Hp,useOptimistic:function(n,s){var c=vi();return qe!==null?Op(c,qe,n,s):(c.baseState=n,[n,c.queue.dispatch])},useMemoCache:gh,useCacheRefresh:n1};l1.useEffectEvent=$p;function Ch(n,s,c,d){s=n.memoizedState,c=c(d,s),c=c==null?s:p({},s,c),n.memoizedState=c,n.lanes===0&&(n.updateQueue.baseState=c)}var Mh={enqueueSetState:function(n,s,c){n=n._reactInternals;var d=Cn(),g=fs(d);g.payload=s,c!=null&&(g.callback=c),s=ms(n,g,d),s!==null&&(pn(s,n,d),Yo(s,n,d))},enqueueReplaceState:function(n,s,c){n=n._reactInternals;var d=Cn(),g=fs(d);g.tag=1,g.payload=s,c!=null&&(g.callback=c),s=ms(n,g,d),s!==null&&(pn(s,n,d),Yo(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var c=Cn(),d=fs(c);d.tag=2,s!=null&&(d.callback=s),s=ms(n,d,c),s!==null&&(pn(s,n,c),Yo(s,n,c))}};function c1(n,s,c,d,g,y,k){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,y,k):s.prototype&&s.prototype.isPureReactComponent?!Fo(c,d)||!Fo(g,y):!0}function u1(n,s,c,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==n&&Mh.enqueueReplaceState(s,s.state,null)}function oa(n,s){var c=s;if("ref"in s){c={};for(var d in s)d!=="ref"&&(c[d]=s[d])}if(n=n.defaultProps){c===s&&(c=p({},c));for(var g in n)c[g]===void 0&&(c[g]=n[g])}return c}function h1(n){gc(n)}function d1(n){console.error(n)}function f1(n){gc(n)}function Pc(n,s){try{var c=n.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function m1(n,s,c){try{var d=n.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Rh(n,s,c){return c=fs(c),c.tag=3,c.payload={element:null},c.callback=function(){Pc(n,s)},c}function p1(n){return n=fs(n),n.tag=3,n}function g1(n,s,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=d.value;n.payload=function(){return g(y)},n.callback=function(){m1(s,c,d)}}var k=c.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(n.callback=function(){m1(s,c,d),typeof g!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function qy(n,s,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=c.alternate,s!==null&&Ba(s,c,g,!0),c=_n.current,c!==null){switch(c.tag){case 31:case 13:return Un===null?Zc():c.alternate===null&&mi===0&&(mi=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===kc?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([d]):s.add(d),ed(n,d,g)),!1;case 22:return c.flags|=65536,d===kc?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([d]):c.add(d)),ed(n,d,g)),!1}throw Error(i(435,c.tag))}return ed(n,d,g),Zc(),!1}if(Me)return s=_n.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,d!==Ku&&(n=Error(i(422),{cause:d}),jo(Bn(n,c)))):(d!==Ku&&(s=Error(i(423),{cause:d}),jo(Bn(s,c))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,d=Bn(d,c),g=Rh(n.stateNode,d,g),ah(n,g),mi!==4&&(mi=2)),!1;var y=Error(i(520),{cause:d});if(y=Bn(y,c),al===null?al=[y]:al.push(y),mi!==4&&(mi=2),s===null)return!0;d=Bn(d,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,n=g&-g,c.lanes|=n,n=Rh(c.stateNode,d,n),ah(c,n),!1;case 1:if(s=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(xs===null||!xs.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=p1(g),g1(g,n,c,d),ah(c,g),!1}c=c.return}while(c!==null);return!1}var Dh=Error(i(461)),_i=!1;function Ii(n,s,c,d){s.child=n===null?xp(s,null,c,d):sa(s,n.child,c,d)}function b1(n,s,c,d,g){c=c.render;var y=s.ref;if("ref"in d){var k={};for(var I in d)I!=="ref"&&(k[I]=d[I])}else k=d;return ea(s),d=dh(n,s,c,k,y,g),I=fh(),n!==null&&!_i?(mh(n,s,g),Ir(n,s,g)):(Me&&I&&Vu(s),s.flags|=1,Ii(n,s,d,g),s.child)}function v1(n,s,c,d,g){if(n===null){var y=c.type;return typeof y=="function"&&!qu(y)&&y.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=y,y1(n,s,y,d,g)):(n=xc(c.type,null,d,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!Ph(n,g)){var k=y.memoizedProps;if(c=c.compare,c=c!==null?c:Fo,c(k,d)&&n.ref===s.ref)return Ir(n,s,g)}return s.flags|=1,n=Dr(y,d),n.ref=s.ref,n.return=s,s.child=n}function y1(n,s,c,d,g){if(n!==null){var y=n.memoizedProps;if(Fo(y,d)&&n.ref===s.ref)if(_i=!1,s.pendingProps=d=y,Ph(n,g))(n.flags&131072)!==0&&(_i=!0);else return s.lanes=n.lanes,Ir(n,s,g)}return Nh(n,s,c,d,g)}function x1(n,s,c,d){var g=d.children,y=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,n!==null){for(d=s.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~y}else d=0,s.child=null;return w1(n,s,y,c,d)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&_c(s,y!==null?y.cachePool:null),y!==null?Ap(s,y):lh(),_p(s);else return d=s.lanes=536870912,w1(n,s,y!==null?y.baseLanes|c:c,c,d)}else y!==null?(_c(s,y.cachePool),Ap(s,y),gs(),s.memoizedState=null):(n!==null&&_c(s,null),lh(),gs());return Ii(n,s,g,c),s.child}function Jo(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function w1(n,s,c,d,g){var y=ih();return y=y===null?null:{parent:Si._currentValue,pool:y},s.memoizedState={baseLanes:c,cachePool:y},n!==null&&_c(s,null),lh(),_p(s),n!==null&&Ba(n,s,d,!0),s.childLanes=g,null}function Uc(n,s){return s=Hc({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function S1(n,s,c){return sa(s,n.child,null,c),n=Uc(s,s.pendingProps),n.flags|=2,En(s),s.memoizedState=null,n}function $y(n,s,c){var d=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Me){if(d.mode==="hidden")return n=Uc(s,d),s.lanes=536870912,Jo(null,n);if(uh(s),(n=Je)?(n=zg(n,Pn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ls!==null?{id:or,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},c=sp(n),c.return=s,s.child=c,Li=s,Je=null)):n=null,n===null)throw us(s);return s.lanes=536870912,null}return Uc(s,d)}var y=n.memoizedState;if(y!==null){var k=y.dehydrated;if(uh(s),g)if(s.flags&256)s.flags&=-257,s=S1(n,s,c);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(_i||Ba(n,s,c,!1),g=(c&n.childLanes)!==0,_i||g){if(d=Xe,d!==null&&(k=ac(d,c),k!==0&&k!==y.retryLane))throw y.retryLane=k,Zs(n,k),pn(d,n,k),Dh;Zc(),s=S1(n,s,c)}else n=y.treeContext,Je=jn(k.nextSibling),Li=s,Me=!0,cs=null,Pn=!1,n!==null&&lp(s,n),s=Uc(s,d),s.flags|=4096;return s}return n=Dr(n.child,{mode:d.mode,children:d.children}),n.ref=s.ref,s.child=n,n.return=s,n}function jc(n,s){var c=s.ref;if(c===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(n===null||n.ref!==c)&&(s.flags|=4194816)}}function Nh(n,s,c,d,g){return ea(s),c=dh(n,s,c,d,void 0,g),d=fh(),n!==null&&!_i?(mh(n,s,g),Ir(n,s,g)):(Me&&d&&Vu(s),s.flags|=1,Ii(n,s,c,g),s.child)}function A1(n,s,c,d,g,y){return ea(s),s.updateQueue=null,c=kp(s,d,c,g),Ep(n),d=fh(),n!==null&&!_i?(mh(n,s,y),Ir(n,s,y)):(Me&&d&&Vu(s),s.flags|=1,Ii(n,s,c,y),s.child)}function _1(n,s,c,d,g){if(ea(s),s.stateNode===null){var y=Na,k=c.contextType;typeof k=="object"&&k!==null&&(y=Bi(k)),y=new c(d,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Mh,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=d,y.state=s.memoizedState,y.refs={},rh(s),k=c.contextType,y.context=typeof k=="object"&&k!==null?Bi(k):Na,y.state=s.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(Ch(s,c,k,d),y.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(k=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),k!==y.state&&Mh.enqueueReplaceState(y,y.state,null),Xo(s,d,y,g),Vo(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(n===null){y=s.stateNode;var I=s.memoizedProps,K=oa(c,I);y.props=K;var ct=y.context,St=c.contextType;k=Na,typeof St=="object"&&St!==null&&(k=Bi(St));var Et=c.getDerivedStateFromProps;St=typeof Et=="function"||typeof y.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,St||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(I||ct!==k)&&u1(s,y,d,k),ds=!1;var ft=s.memoizedState;y.state=ft,Xo(s,d,y,g),Vo(),ct=s.memoizedState,I||ft!==ct||ds?(typeof Et=="function"&&(Ch(s,c,Et,d),ct=s.memoizedState),(K=ds||c1(s,c,K,d,ft,ct,k))?(St||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=ct),y.props=d,y.state=ct,y.context=k,d=K):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{y=s.stateNode,sh(n,s),k=s.memoizedProps,St=oa(c,k),y.props=St,Et=s.pendingProps,ft=y.context,ct=c.contextType,K=Na,typeof ct=="object"&&ct!==null&&(K=Bi(ct)),I=c.getDerivedStateFromProps,(ct=typeof I=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(k!==Et||ft!==K)&&u1(s,y,d,K),ds=!1,ft=s.memoizedState,y.state=ft,Xo(s,d,y,g),Vo();var yt=s.memoizedState;k!==Et||ft!==yt||ds||n!==null&&n.dependencies!==null&&Sc(n.dependencies)?(typeof I=="function"&&(Ch(s,c,I,d),yt=s.memoizedState),(St=ds||c1(s,c,St,d,ft,yt,K)||n!==null&&n.dependencies!==null&&Sc(n.dependencies))?(ct||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(d,yt,K),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(d,yt,K)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||k===n.memoizedProps&&ft===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&ft===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=yt),y.props=d,y.state=yt,y.context=K,d=St):(typeof y.componentDidUpdate!="function"||k===n.memoizedProps&&ft===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&ft===n.memoizedState||(s.flags|=1024),d=!1)}return y=d,jc(n,s),d=(s.flags&128)!==0,y||d?(y=s.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&d?(s.child=sa(s,n.child,null,g),s.child=sa(s,null,c,g)):Ii(n,s,c,g),s.memoizedState=y.state,n=s.child):n=Ir(n,s,g),n}function E1(n,s,c,d){return Js(),s.flags|=256,Ii(n,s,c,d),s.child}var Oh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zh(n){return{baseLanes:n,cachePool:mp()}}function Lh(n,s,c){return n=n!==null?n.childLanes&~c:0,s&&(n|=Tn),n}function k1(n,s,c){var d=s.pendingProps,g=!1,y=(s.flags&128)!==0,k;if((k=y)||(k=n!==null&&n.memoizedState===null?!1:(bi.current&2)!==0),k&&(g=!0,s.flags&=-129),k=(s.flags&32)!==0,s.flags&=-33,n===null){if(Me){if(g?ps(s):gs(),(n=Je)?(n=zg(n,Pn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ls!==null?{id:or,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},c=sp(n),c.return=s,s.child=c,Li=s,Je=null)):n=null,n===null)throw us(s);return bd(n)?s.lanes=32:s.lanes=536870912,null}var I=d.children;return d=d.fallback,g?(gs(),g=s.mode,I=Hc({mode:"hidden",children:I},g),d=Qs(d,g,c,null),I.return=s,d.return=s,I.sibling=d,s.child=I,d=s.child,d.memoizedState=zh(c),d.childLanes=Lh(n,k,c),s.memoizedState=Oh,Jo(null,d)):(ps(s),Bh(s,I))}var K=n.memoizedState;if(K!==null&&(I=K.dehydrated,I!==null)){if(y)s.flags&256?(ps(s),s.flags&=-257,s=Ih(n,s,c)):s.memoizedState!==null?(gs(),s.child=n.child,s.flags|=128,s=null):(gs(),I=d.fallback,g=s.mode,d=Hc({mode:"visible",children:d.children},g),I=Qs(I,g,c,null),I.flags|=2,d.return=s,I.return=s,d.sibling=I,s.child=d,sa(s,n.child,null,c),d=s.child,d.memoizedState=zh(c),d.childLanes=Lh(n,k,c),s.memoizedState=Oh,s=Jo(null,d));else if(ps(s),bd(I)){if(k=I.nextSibling&&I.nextSibling.dataset,k)var ct=k.dgst;k=ct,d=Error(i(419)),d.stack="",d.digest=k,jo({value:d,source:null,stack:null}),s=Ih(n,s,c)}else if(_i||Ba(n,s,c,!1),k=(c&n.childLanes)!==0,_i||k){if(k=Xe,k!==null&&(d=ac(k,c),d!==0&&d!==K.retryLane))throw K.retryLane=d,Zs(n,d),pn(k,n,d),Dh;gd(I)||Zc(),s=Ih(n,s,c)}else gd(I)?(s.flags|=192,s.child=n.child,s=null):(n=K.treeContext,Je=jn(I.nextSibling),Li=s,Me=!0,cs=null,Pn=!1,n!==null&&lp(s,n),s=Bh(s,d.children),s.flags|=4096);return s}return g?(gs(),I=d.fallback,g=s.mode,K=n.child,ct=K.sibling,d=Dr(K,{mode:"hidden",children:d.children}),d.subtreeFlags=K.subtreeFlags&65011712,ct!==null?I=Dr(ct,I):(I=Qs(I,g,c,null),I.flags|=2),I.return=s,d.return=s,d.sibling=I,s.child=d,Jo(null,d),d=s.child,I=n.child.memoizedState,I===null?I=zh(c):(g=I.cachePool,g!==null?(K=Si._currentValue,g=g.parent!==K?{parent:K,pool:K}:g):g=mp(),I={baseLanes:I.baseLanes|c,cachePool:g}),d.memoizedState=I,d.childLanes=Lh(n,k,c),s.memoizedState=Oh,Jo(n.child,d)):(ps(s),c=n.child,n=c.sibling,c=Dr(c,{mode:"visible",children:d.children}),c.return=s,c.sibling=null,n!==null&&(k=s.deletions,k===null?(s.deletions=[n],s.flags|=16):k.push(n)),s.child=c,s.memoizedState=null,c)}function Bh(n,s){return s=Hc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Hc(n,s){return n=An(22,n,null,s),n.lanes=0,n}function Ih(n,s,c){return sa(s,n.child,null,c),n=Bh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function T1(n,s,c){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),Qu(n.return,s,c)}function Fh(n,s,c,d,g,y){var k=n.memoizedState;k===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:y}:(k.isBackwards=s,k.rendering=null,k.renderingStartTime=0,k.last=d,k.tail=c,k.tailMode=g,k.treeForkCount=y)}function C1(n,s,c){var d=s.pendingProps,g=d.revealOrder,y=d.tail;d=d.children;var k=bi.current,I=(k&2)!==0;if(I?(k=k&1|2,s.flags|=128):k&=1,st(bi,k),Ii(n,s,d,c),d=Me?Uo:0,!I&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&T1(n,c,s);else if(n.tag===19)T1(n,c,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(c=s.child,g=null;c!==null;)n=c.alternate,n!==null&&Rc(n)===null&&(g=c),c=c.sibling;c=g,c===null?(g=s.child,s.child=null):(g=c.sibling,c.sibling=null),Fh(s,!1,g,c,y,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Rc(n)===null){s.child=g;break}n=g.sibling,g.sibling=c,c=g,g=n}Fh(s,!0,c,null,y,d);break;case"together":Fh(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function Ir(n,s,c){if(n!==null&&(s.dependencies=n.dependencies),ys|=s.lanes,(c&s.childLanes)===0)if(n!==null){if(Ba(n,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,c=Dr(n,n.pendingProps),s.child=c,c.return=s;n.sibling!==null;)n=n.sibling,c=c.sibling=Dr(n,n.pendingProps),c.return=s;c.sibling=null}return s.child}function Ph(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Sc(n)))}function Yy(n,s,c){switch(s.tag){case 3:Yt(s,s.stateNode.containerInfo),hs(s,Si,n.memoizedState.cache),Js();break;case 27:case 5:ke(s);break;case 4:Yt(s,s.stateNode.containerInfo);break;case 10:hs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,uh(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(ps(s),s.flags|=128,null):(c&s.child.childLanes)!==0?k1(n,s,c):(ps(s),n=Ir(n,s,c),n!==null?n.sibling:null);ps(s);break;case 19:var g=(n.flags&128)!==0;if(d=(c&s.childLanes)!==0,d||(Ba(n,s,c,!1),d=(c&s.childLanes)!==0),g){if(d)return C1(n,s,c);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),st(bi,bi.current),d)break;return null;case 22:return s.lanes=0,x1(n,s,c,s.pendingProps);case 24:hs(s,Si,n.memoizedState.cache)}return Ir(n,s,c)}function M1(n,s,c){if(n!==null)if(n.memoizedProps!==s.pendingProps)_i=!0;else{if(!Ph(n,c)&&(s.flags&128)===0)return _i=!1,Yy(n,s,c);_i=(n.flags&131072)!==0}else _i=!1,Me&&(s.flags&1048576)!==0&&op(s,Uo,s.index);switch(s.lanes=0,s.tag){case 16:t:{var d=s.pendingProps;if(n=na(s.elementType),s.type=n,typeof n=="function")qu(n)?(d=oa(n,d),s.tag=1,s=_1(null,s,n,d,c)):(s.tag=0,s=Nh(null,s,n,d,c));else{if(n!=null){var g=n.$$typeof;if(g===R){s.tag=11,s=b1(null,s,n,d,c);break t}else if(g===z){s.tag=14,s=v1(null,s,n,d,c);break t}}throw s=N(n)||n,Error(i(306,s,""))}}return s;case 0:return Nh(n,s,s.type,s.pendingProps,c);case 1:return d=s.type,g=oa(d,s.pendingProps),_1(n,s,d,g,c);case 3:t:{if(Yt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));d=s.pendingProps;var y=s.memoizedState;g=y.element,sh(n,s),Xo(s,d,null,c);var k=s.memoizedState;if(d=k.cache,hs(s,Si,d),d!==y.cache&&Ju(s,[Si],c,!0),Vo(),d=k.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:k.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=E1(n,s,d,c);break t}else if(d!==g){g=Bn(Error(i(424)),s),jo(g),s=E1(n,s,d,c);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Je=jn(n.firstChild),Li=s,Me=!0,cs=null,Pn=!0,c=xp(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Js(),d===g){s=Ir(n,s,c);break t}Ii(n,s,d,c)}s=s.child}return s;case 26:return jc(n,s),n===null?(c=Ug(s.type,null,s.pendingProps,null))?s.memoizedState=c:Me||(c=s.type,n=s.pendingProps,d=r0(Ut.current).createElement(c),d[Mi]=s,d[$i]=n,Fi(d,c,n),tt(d),s.stateNode=d):s.memoizedState=Ug(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ke(s),n===null&&Me&&(d=s.stateNode=Ig(s.type,s.pendingProps,Ut.current),Li=s,Pn=!0,g=Je,_s(s.type)?(vd=g,Je=jn(d.firstChild)):Je=g),Ii(n,s,s.pendingProps.children,c),jc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Me&&((g=d=Je)&&(d=S3(d,s.type,s.pendingProps,Pn),d!==null?(s.stateNode=d,Li=s,Je=jn(d.firstChild),Pn=!1,g=!0):g=!1),g||us(s)),ke(s),g=s.type,y=s.pendingProps,k=n!==null?n.memoizedProps:null,d=y.children,fd(g,y)?d=null:k!==null&&fd(g,k)&&(s.flags|=32),s.memoizedState!==null&&(g=dh(n,s,Iy,null,null,c),ml._currentValue=g),jc(n,s),Ii(n,s,d,c),s.child;case 6:return n===null&&Me&&((n=c=Je)&&(c=A3(c,s.pendingProps,Pn),c!==null?(s.stateNode=c,Li=s,Je=null,n=!0):n=!1),n||us(s)),null;case 13:return k1(n,s,c);case 4:return Yt(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=sa(s,null,d,c):Ii(n,s,d,c),s.child;case 11:return b1(n,s,s.type,s.pendingProps,c);case 7:return Ii(n,s,s.pendingProps,c),s.child;case 8:return Ii(n,s,s.pendingProps.children,c),s.child;case 12:return Ii(n,s,s.pendingProps.children,c),s.child;case 10:return d=s.pendingProps,hs(s,s.type,d.value),Ii(n,s,d.children,c),s.child;case 9:return g=s.type._context,d=s.pendingProps.children,ea(s),g=Bi(g),d=d(g),s.flags|=1,Ii(n,s,d,c),s.child;case 14:return v1(n,s,s.type,s.pendingProps,c);case 15:return y1(n,s,s.type,s.pendingProps,c);case 19:return C1(n,s,c);case 31:return $y(n,s,c);case 22:return x1(n,s,c,s.pendingProps);case 24:return ea(s),d=Bi(Si),n===null?(g=ih(),g===null&&(g=Xe,y=th(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),s.memoizedState={parent:d,cache:g},rh(s),hs(s,Si,g)):((n.lanes&c)!==0&&(sh(n,s),Xo(s,null,null,c),Vo()),g=n.memoizedState,y=s.memoizedState,g.parent!==d?(g={parent:d,cache:d},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),hs(s,Si,d)):(d=y.cache,hs(s,Si,d),d!==g.cache&&Ju(s,[Si],c,!0))),Ii(n,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Fr(n){n.flags|=4}function Uh(n,s,c,d,g){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(ig())n.flags|=8192;else throw ra=kc,nh}else n.flags&=-16777217}function R1(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!$g(s))if(ig())n.flags|=8192;else throw ra=kc,nh}function Gc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?rc():536870912,n.lanes|=s,Xa|=s)}function tl(n,s){if(!Me)switch(n.tailMode){case"hidden":s=n.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?n.tail=null:c.sibling=null;break;case"collapsed":c=n.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function ti(n){var s=n.alternate!==null&&n.alternate.child===n.child,c=0,d=0;if(s)for(var g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=d,n.childLanes=c,s}function Vy(n,s,c){var d=s.pendingProps;switch(Xu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(s),null;case 1:return ti(s),null;case 3:return c=s.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),zr(Si),qt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(La(s)?Fr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Wu())),ti(s),null;case 26:var g=s.type,y=s.memoizedState;return n===null?(Fr(s),y!==null?(ti(s),R1(s,y)):(ti(s),Uh(s,g,null,d,c))):y?y!==n.memoizedState?(Fr(s),ti(s),R1(s,y)):(ti(s),s.flags&=-16777217):(n=n.memoizedProps,n!==d&&Fr(s),ti(s),Uh(s,g,n,d,c)),null;case 27:if(Ae(s),c=Ut.current,g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Fr(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return ti(s),null}n=pt.current,La(s)?cp(s):(n=Ig(g,d,c),s.stateNode=n,Fr(s))}return ti(s),null;case 5:if(Ae(s),g=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Fr(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return ti(s),null}if(y=pt.current,La(s))cp(s);else{var k=r0(Ut.current);switch(y){case 1:y=k.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=k.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=k.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=k.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=k.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof d.is=="string"?k.createElement("select",{is:d.is}):k.createElement("select"),d.multiple?y.multiple=!0:d.size&&(y.size=d.size);break;default:y=typeof d.is=="string"?k.createElement(g,{is:d.is}):k.createElement(g)}}y[Mi]=s,y[$i]=d;t:for(k=s.child;k!==null;){if(k.tag===5||k.tag===6)y.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===s)break t;for(;k.sibling===null;){if(k.return===null||k.return===s)break t;k=k.return}k.sibling.return=k.return,k=k.sibling}s.stateNode=y;t:switch(Fi(y,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Fr(s)}}return ti(s),Uh(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,c),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==d&&Fr(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(n=Ut.current,La(s)){if(n=s.stateNode,c=s.memoizedProps,d=null,g=Li,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}n[Mi]=s,n=!!(n.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||kg(n.nodeValue,c)),n||us(s,!0)}else n=r0(n).createTextNode(d),n[Mi]=s,s.stateNode=n}return ti(s),null;case 31:if(c=s.memoizedState,n===null||n.memoizedState!==null){if(d=La(s),c!==null){if(n===null){if(!d)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Mi]=s}else Js(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ti(s),n=!1}else c=Wu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=c),n=!0;if(!n)return s.flags&256?(En(s),s):(En(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ti(s),null;case 13:if(d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=La(s),d!==null&&d.dehydrated!==null){if(n===null){if(!g)throw Error(i(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Mi]=s}else Js(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ti(s),g=!1}else g=Wu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(En(s),s):(En(s),null)}return En(s),(s.flags&128)!==0?(s.lanes=c,s):(c=d!==null,n=n!==null&&n.memoizedState!==null,c&&(d=s.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==g&&(d.flags|=2048)),c!==n&&c&&(s.child.flags|=8192),Gc(s,s.updateQueue),ti(s),null);case 4:return qt(),n===null&&ld(s.stateNode.containerInfo),ti(s),null;case 10:return zr(s.type),ti(s),null;case 19:if(P(bi),d=s.memoizedState,d===null)return ti(s),null;if(g=(s.flags&128)!==0,y=d.rendering,y===null)if(g)tl(d,!1);else{if(mi!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=Rc(n),y!==null){for(s.flags|=128,tl(d,!1),n=y.updateQueue,s.updateQueue=n,Gc(s,n),s.subtreeFlags=0,n=c,c=s.child;c!==null;)rp(c,n),c=c.sibling;return st(bi,bi.current&1|2),Me&&Nr(s,d.treeForkCount),s.child}n=n.sibling}d.tail!==null&&Lt()>Xc&&(s.flags|=128,g=!0,tl(d,!1),s.lanes=4194304)}else{if(!g)if(n=Rc(y),n!==null){if(s.flags|=128,g=!0,n=n.updateQueue,s.updateQueue=n,Gc(s,n),tl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Me)return ti(s),null}else 2*Lt()-d.renderingStartTime>Xc&&c!==536870912&&(s.flags|=128,g=!0,tl(d,!1),s.lanes=4194304);d.isBackwards?(y.sibling=s.child,s.child=y):(n=d.last,n!==null?n.sibling=y:s.child=y,d.last=y)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Lt(),n.sibling=null,c=bi.current,st(bi,g?c&1|2:c&1),Me&&Nr(s,d.treeForkCount),n):(ti(s),null);case 22:case 23:return En(s),ch(),d=s.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(c&536870912)!==0&&(s.flags&128)===0&&(ti(s),s.subtreeFlags&6&&(s.flags|=8192)):ti(s),c=s.updateQueue,c!==null&&Gc(s,c.retryQueue),c=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048),n!==null&&P(ia),null;case 24:return c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),zr(Si),ti(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Xy(n,s){switch(Xu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return zr(Si),qt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Ae(s),null;case 31:if(s.memoizedState!==null){if(En(s),s.alternate===null)throw Error(i(340));Js()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(En(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Js()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return P(bi),null;case 4:return qt(),null;case 10:return zr(s.type),null;case 22:case 23:return En(s),ch(),n!==null&&P(ia),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return zr(Si),null;case 25:return null;default:return null}}function D1(n,s){switch(Xu(s),s.tag){case 3:zr(Si),qt();break;case 26:case 27:case 5:Ae(s);break;case 4:qt();break;case 31:s.memoizedState!==null&&En(s);break;case 13:En(s);break;case 19:P(bi);break;case 10:zr(s.type);break;case 22:case 23:En(s),ch(),n!==null&&P(ia);break;case 24:zr(Si)}}function el(n,s){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&n)===n){d=void 0;var y=c.create,k=c.inst;d=y(),k.destroy=d}c=c.next}while(c!==g)}}catch(I){Ge(s,s.return,I)}}function bs(n,s,c){try{var d=s.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var y=g.next;d=y;do{if((d.tag&n)===n){var k=d.inst,I=k.destroy;if(I!==void 0){k.destroy=void 0,g=s;var K=c,ct=I;try{ct()}catch(St){Ge(g,K,St)}}}d=d.next}while(d!==y)}}catch(St){Ge(s,s.return,St)}}function N1(n){var s=n.updateQueue;if(s!==null){var c=n.stateNode;try{Sp(s,c)}catch(d){Ge(n,n.return,d)}}}function O1(n,s,c){c.props=oa(n.type,n.memoizedProps),c.state=n.memoizedState;try{c.componentWillUnmount()}catch(d){Ge(n,s,d)}}function il(n,s){try{var c=n.ref;if(c!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof c=="function"?n.refCleanup=c(d):c.current=d}}catch(g){Ge(n,s,g)}}function cr(n,s){var c=n.ref,d=n.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){Ge(n,s,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){Ge(n,s,g)}else c.current=null}function z1(n){var s=n.type,c=n.memoizedProps,d=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){Ge(n,n.return,g)}}function jh(n,s,c){try{var d=n.stateNode;g3(d,n.type,c,s),d[$i]=s}catch(g){Ge(n,n.return,g)}}function L1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&_s(n.type)||n.tag===4}function Hh(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||L1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&_s(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Gh(n,s,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(n,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(n),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=Mr));else if(d!==4&&(d===27&&_s(n.type)&&(c=n.stateNode,s=null),n=n.child,n!==null))for(Gh(n,s,c),n=n.sibling;n!==null;)Gh(n,s,c),n=n.sibling}function qc(n,s,c){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?c.insertBefore(n,s):c.appendChild(n);else if(d!==4&&(d===27&&_s(n.type)&&(c=n.stateNode),n=n.child,n!==null))for(qc(n,s,c),n=n.sibling;n!==null;)qc(n,s,c),n=n.sibling}function B1(n){var s=n.stateNode,c=n.memoizedProps;try{for(var d=n.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Fi(s,d,c),s[Mi]=n,s[$i]=c}catch(y){Ge(n,n.return,y)}}var Pr=!1,Ei=!1,qh=!1,I1=typeof WeakSet=="function"?WeakSet:Set,Oi=null;function Ky(n,s){if(n=n.containerInfo,hd=h0,n=Km(n),Iu(n)){if("selectionStart"in n)var c={start:n.selectionStart,end:n.selectionEnd};else t:{c=(c=n.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break t}var k=0,I=-1,K=-1,ct=0,St=0,Et=n,ft=null;e:for(;;){for(var yt;Et!==c||g!==0&&Et.nodeType!==3||(I=k+g),Et!==y||d!==0&&Et.nodeType!==3||(K=k+d),Et.nodeType===3&&(k+=Et.nodeValue.length),(yt=Et.firstChild)!==null;)ft=Et,Et=yt;for(;;){if(Et===n)break e;if(ft===c&&++ct===g&&(I=k),ft===y&&++St===d&&(K=k),(yt=Et.nextSibling)!==null)break;Et=ft,ft=Et.parentNode}Et=yt}c=I===-1||K===-1?null:{start:I,end:K}}else c=null}c=c||{start:0,end:0}}else c=null;for(dd={focusedElem:n,selectionRange:c},h0=!1,Oi=s;Oi!==null;)if(s=Oi,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Oi=n;else for(;Oi!==null;){switch(s=Oi,y=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(c=0;c<n.length;c++)g=n[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,c=s,g=y.memoizedProps,y=y.memoizedState,d=c.stateNode;try{var Vt=oa(c.type,g);n=d.getSnapshotBeforeUpdate(Vt,y),d.__reactInternalSnapshotBeforeUpdate=n}catch(le){Ge(c,c.return,le)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,c=n.nodeType,c===9)pd(n);else if(c===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":pd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Oi=n;break}Oi=s.return}}function F1(n,s,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:jr(n,c),d&4&&el(5,c);break;case 1:if(jr(n,c),d&4)if(n=c.stateNode,s===null)try{n.componentDidMount()}catch(k){Ge(c,c.return,k)}else{var g=oa(c.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(g,s,n.__reactInternalSnapshotBeforeUpdate)}catch(k){Ge(c,c.return,k)}}d&64&&N1(c),d&512&&il(c,c.return);break;case 3:if(jr(n,c),d&64&&(n=c.updateQueue,n!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{Sp(n,s)}catch(k){Ge(c,c.return,k)}}break;case 27:s===null&&d&4&&B1(c);case 26:case 5:jr(n,c),s===null&&d&4&&z1(c),d&512&&il(c,c.return);break;case 12:jr(n,c);break;case 31:jr(n,c),d&4&&j1(n,c);break;case 13:jr(n,c),d&4&&H1(n,c),d&64&&(n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(c=r3.bind(null,c),_3(n,c))));break;case 22:if(d=c.memoizedState!==null||Pr,!d){s=s!==null&&s.memoizedState!==null||Ei,g=Pr;var y=Ei;Pr=d,(Ei=s)&&!y?Hr(n,c,(c.subtreeFlags&8772)!==0):jr(n,c),Pr=g,Ei=y}break;case 30:break;default:jr(n,c)}}function P1(n){var s=n.alternate;s!==null&&(n.alternate=null,P1(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Mo(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ni=null,hn=!1;function Ur(n,s,c){for(c=c.child;c!==null;)U1(n,s,c),c=c.sibling}function U1(n,s,c){if(wi&&typeof wi.onCommitFiberUnmount=="function")try{wi.onCommitFiberUnmount(je,c)}catch{}switch(c.tag){case 26:Ei||cr(c,s),Ur(n,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ei||cr(c,s);var d=ni,g=hn;_s(c.type)&&(ni=c.stateNode,hn=!1),Ur(n,s,c),hl(c.stateNode),ni=d,hn=g;break;case 5:Ei||cr(c,s);case 6:if(d=ni,g=hn,ni=null,Ur(n,s,c),ni=d,hn=g,ni!==null)if(hn)try{(ni.nodeType===9?ni.body:ni.nodeName==="HTML"?ni.ownerDocument.body:ni).removeChild(c.stateNode)}catch(y){Ge(c,s,y)}else try{ni.removeChild(c.stateNode)}catch(y){Ge(c,s,y)}break;case 18:ni!==null&&(hn?(n=ni,Ng(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,c.stateNode),io(n)):Ng(ni,c.stateNode));break;case 4:d=ni,g=hn,ni=c.stateNode.containerInfo,hn=!0,Ur(n,s,c),ni=d,hn=g;break;case 0:case 11:case 14:case 15:bs(2,c,s),Ei||bs(4,c,s),Ur(n,s,c);break;case 1:Ei||(cr(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"&&O1(c,s,d)),Ur(n,s,c);break;case 21:Ur(n,s,c);break;case 22:Ei=(d=Ei)||c.memoizedState!==null,Ur(n,s,c),Ei=d;break;default:Ur(n,s,c)}}function j1(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{io(n)}catch(c){Ge(s,s.return,c)}}}function H1(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{io(n)}catch(c){Ge(s,s.return,c)}}function Wy(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new I1),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new I1),s;default:throw Error(i(435,n.tag))}}function $c(n,s){var c=Wy(n);s.forEach(function(d){if(!c.has(d)){c.add(d);var g=s3.bind(null,n,d);d.then(g,g)}})}function dn(n,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],y=n,k=s,I=k;t:for(;I!==null;){switch(I.tag){case 27:if(_s(I.type)){ni=I.stateNode,hn=!1;break t}break;case 5:ni=I.stateNode,hn=!1;break t;case 3:case 4:ni=I.stateNode.containerInfo,hn=!0;break t}I=I.return}if(ni===null)throw Error(i(160));U1(y,k,g),ni=null,hn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)G1(s,n),s=s.sibling}var Zn=null;function G1(n,s){var c=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:dn(s,n),fn(n),d&4&&(bs(3,n,n.return),el(3,n),bs(5,n,n.return));break;case 1:dn(s,n),fn(n),d&512&&(Ei||c===null||cr(c,c.return)),d&64&&Pr&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(c=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=Zn;if(dn(s,n),fn(n),d&512&&(Ei||c===null||cr(c,c.return)),d&4){var y=c!==null?c.memoizedState:null;if(d=n.memoizedState,c===null)if(d===null)if(n.stateNode===null){t:{d=n.type,c=n.memoizedProps,g=g.ownerDocument||g;e:switch(d){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Ys]||y[Mi]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(d),g.head.insertBefore(y,g.querySelector("head > title"))),Fi(y,d,c),y[Mi]=n,tt(y),d=y;break t;case"link":var k=Gg("link","href",g).get(d+(c.href||""));if(k){for(var I=0;I<k.length;I++)if(y=k[I],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){k.splice(I,1);break e}}y=g.createElement(d),Fi(y,d,c),g.head.appendChild(y);break;case"meta":if(k=Gg("meta","content",g).get(d+(c.content||""))){for(I=0;I<k.length;I++)if(y=k[I],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){k.splice(I,1);break e}}y=g.createElement(d),Fi(y,d,c),g.head.appendChild(y);break;default:throw Error(i(468,d))}y[Mi]=n,tt(y),d=y}n.stateNode=d}else qg(g,n.type,n.stateNode);else n.stateNode=Hg(g,d,n.memoizedProps);else y!==d?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,d===null?qg(g,n.type,n.stateNode):Hg(g,d,n.memoizedProps)):d===null&&n.stateNode!==null&&jh(n,n.memoizedProps,c.memoizedProps)}break;case 27:dn(s,n),fn(n),d&512&&(Ei||c===null||cr(c,c.return)),c!==null&&d&4&&jh(n,n.memoizedProps,c.memoizedProps);break;case 5:if(dn(s,n),fn(n),d&512&&(Ei||c===null||cr(c,c.return)),n.flags&32){g=n.stateNode;try{ii(g,"")}catch(Vt){Ge(n,n.return,Vt)}}d&4&&n.stateNode!=null&&(g=n.memoizedProps,jh(n,g,c!==null?c.memoizedProps:g)),d&1024&&(qh=!0);break;case 6:if(dn(s,n),fn(n),d&4){if(n.stateNode===null)throw Error(i(162));d=n.memoizedProps,c=n.stateNode;try{c.nodeValue=d}catch(Vt){Ge(n,n.return,Vt)}}break;case 3:if(o0=null,g=Zn,Zn=s0(s.containerInfo),dn(s,n),Zn=g,fn(n),d&4&&c!==null&&c.memoizedState.isDehydrated)try{io(s.containerInfo)}catch(Vt){Ge(n,n.return,Vt)}qh&&(qh=!1,q1(n));break;case 4:d=Zn,Zn=s0(n.stateNode.containerInfo),dn(s,n),fn(n),Zn=d;break;case 12:dn(s,n),fn(n);break;case 31:dn(s,n),fn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,$c(n,d)));break;case 13:dn(s,n),fn(n),n.child.flags&8192&&n.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Vc=Lt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,$c(n,d)));break;case 22:g=n.memoizedState!==null;var K=c!==null&&c.memoizedState!==null,ct=Pr,St=Ei;if(Pr=ct||g,Ei=St||K,dn(s,n),Ei=St,Pr=ct,fn(n),d&8192)t:for(s=n.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(c===null||K||Pr||Ei||la(n)),c=null,s=n;;){if(s.tag===5||s.tag===26){if(c===null){K=c=s;try{if(y=K.stateNode,g)k=y.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{I=K.stateNode;var Et=K.memoizedProps.style,ft=Et!=null&&Et.hasOwnProperty("display")?Et.display:null;I.style.display=ft==null||typeof ft=="boolean"?"":(""+ft).trim()}}catch(Vt){Ge(K,K.return,Vt)}}}else if(s.tag===6){if(c===null){K=s;try{K.stateNode.nodeValue=g?"":K.memoizedProps}catch(Vt){Ge(K,K.return,Vt)}}}else if(s.tag===18){if(c===null){K=s;try{var yt=K.stateNode;g?Og(yt,!0):Og(K.stateNode,!1)}catch(Vt){Ge(K,K.return,Vt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=n.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,$c(n,c))));break;case 19:dn(s,n),fn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,$c(n,d)));break;case 30:break;case 21:break;default:dn(s,n),fn(n)}}function fn(n){var s=n.flags;if(s&2){try{for(var c,d=n.return;d!==null;){if(L1(d)){c=d;break}d=d.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var g=c.stateNode,y=Hh(n);qc(n,y,g);break;case 5:var k=c.stateNode;c.flags&32&&(ii(k,""),c.flags&=-33);var I=Hh(n);qc(n,I,k);break;case 3:case 4:var K=c.stateNode.containerInfo,ct=Hh(n);Gh(n,ct,K);break;default:throw Error(i(161))}}catch(St){Ge(n,n.return,St)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function q1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;q1(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function jr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)F1(n,s.alternate,s),s=s.sibling}function la(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:bs(4,s,s.return),la(s);break;case 1:cr(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&O1(s,s.return,c),la(s);break;case 27:hl(s.stateNode);case 26:case 5:cr(s,s.return),la(s);break;case 22:s.memoizedState===null&&la(s);break;case 30:la(s);break;default:la(s)}n=n.sibling}}function Hr(n,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,g=n,y=s,k=y.flags;switch(y.tag){case 0:case 11:case 15:Hr(g,y,c),el(4,y);break;case 1:if(Hr(g,y,c),d=y,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ct){Ge(d,d.return,ct)}if(d=y,g=d.updateQueue,g!==null){var I=d.stateNode;try{var K=g.shared.hiddenCallbacks;if(K!==null)for(g.shared.hiddenCallbacks=null,g=0;g<K.length;g++)wp(K[g],I)}catch(ct){Ge(d,d.return,ct)}}c&&k&64&&N1(y),il(y,y.return);break;case 27:B1(y);case 26:case 5:Hr(g,y,c),c&&d===null&&k&4&&z1(y),il(y,y.return);break;case 12:Hr(g,y,c);break;case 31:Hr(g,y,c),c&&k&4&&j1(g,y);break;case 13:Hr(g,y,c),c&&k&4&&H1(g,y);break;case 22:y.memoizedState===null&&Hr(g,y,c),il(y,y.return);break;case 30:break;default:Hr(g,y,c)}s=s.sibling}}function $h(n,s){var c=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==c&&(n!=null&&n.refCount++,c!=null&&Ho(c))}function Yh(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ho(n))}function Qn(n,s,c,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)$1(n,s,c,d),s=s.sibling}function $1(n,s,c,d){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Qn(n,s,c,d),g&2048&&el(9,s);break;case 1:Qn(n,s,c,d);break;case 3:Qn(n,s,c,d),g&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ho(n)));break;case 12:if(g&2048){Qn(n,s,c,d),n=s.stateNode;try{var y=s.memoizedProps,k=y.id,I=y.onPostCommit;typeof I=="function"&&I(k,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(K){Ge(s,s.return,K)}}else Qn(n,s,c,d);break;case 31:Qn(n,s,c,d);break;case 13:Qn(n,s,c,d);break;case 23:break;case 22:y=s.stateNode,k=s.alternate,s.memoizedState!==null?y._visibility&2?Qn(n,s,c,d):nl(n,s):y._visibility&2?Qn(n,s,c,d):(y._visibility|=2,$a(n,s,c,d,(s.subtreeFlags&10256)!==0||!1)),g&2048&&$h(k,s);break;case 24:Qn(n,s,c,d),g&2048&&Yh(s.alternate,s);break;default:Qn(n,s,c,d)}}function $a(n,s,c,d,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=n,k=s,I=c,K=d,ct=k.flags;switch(k.tag){case 0:case 11:case 15:$a(y,k,I,K,g),el(8,k);break;case 23:break;case 22:var St=k.stateNode;k.memoizedState!==null?St._visibility&2?$a(y,k,I,K,g):nl(y,k):(St._visibility|=2,$a(y,k,I,K,g)),g&&ct&2048&&$h(k.alternate,k);break;case 24:$a(y,k,I,K,g),g&&ct&2048&&Yh(k.alternate,k);break;default:$a(y,k,I,K,g)}s=s.sibling}}function nl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=n,d=s,g=d.flags;switch(d.tag){case 22:nl(c,d),g&2048&&$h(d.alternate,d);break;case 24:nl(c,d),g&2048&&Yh(d.alternate,d);break;default:nl(c,d)}s=s.sibling}}var rl=8192;function Ya(n,s,c){if(n.subtreeFlags&rl)for(n=n.child;n!==null;)Y1(n,s,c),n=n.sibling}function Y1(n,s,c){switch(n.tag){case 26:Ya(n,s,c),n.flags&rl&&n.memoizedState!==null&&B3(c,Zn,n.memoizedState,n.memoizedProps);break;case 5:Ya(n,s,c);break;case 3:case 4:var d=Zn;Zn=s0(n.stateNode.containerInfo),Ya(n,s,c),Zn=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=rl,rl=16777216,Ya(n,s,c),rl=d):Ya(n,s,c));break;default:Ya(n,s,c)}}function V1(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function sl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];Oi=d,K1(d,n)}V1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)X1(n),n=n.sibling}function X1(n){switch(n.tag){case 0:case 11:case 15:sl(n),n.flags&2048&&bs(9,n,n.return);break;case 3:sl(n);break;case 12:sl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Yc(n)):sl(n);break;default:sl(n)}}function Yc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];Oi=d,K1(d,n)}V1(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:bs(8,s,s.return),Yc(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Yc(s));break;default:Yc(s)}n=n.sibling}}function K1(n,s){for(;Oi!==null;){var c=Oi;switch(c.tag){case 0:case 11:case 15:bs(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ho(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Oi=d;else t:for(c=n;Oi!==null;){d=Oi;var g=d.sibling,y=d.return;if(P1(d),d===c){Oi=null;break t}if(g!==null){g.return=y,Oi=g;break t}Oi=y}}}var Zy={getCacheForType:function(n){var s=Bi(Si),c=s.data.get(n);return c===void 0&&(c=n(),s.data.set(n,c)),c},cacheSignal:function(){return Bi(Si).controller.signal}},Qy=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Xe=null,_e=null,Te=0,He=0,kn=null,vs=!1,Va=!1,Vh=!1,Gr=0,mi=0,ys=0,ca=0,Xh=0,Tn=0,Xa=0,al=null,mn=null,Kh=!1,Vc=0,W1=0,Xc=1/0,Kc=null,xs=null,Ri=0,ws=null,Ka=null,qr=0,Wh=0,Zh=null,Z1=null,ol=0,Qh=null;function Cn(){return(Pe&2)!==0&&Te!==0?Te&-Te:X.T!==null?rd():$s()}function Q1(){if(Tn===0)if((Te&536870912)===0||Me){var n=kr;kr<<=1,(kr&3932160)===0&&(kr=262144),Tn=n}else Tn=536870912;return n=_n.current,n!==null&&(n.flags|=32),Tn}function pn(n,s,c){(n===Xe&&(He===2||He===9)||n.cancelPendingCommit!==null)&&(Wa(n,0),Ss(n,Te,Tn,!1)),qs(n,c),((Pe&2)===0||n!==Xe)&&(n===Xe&&((Pe&2)===0&&(ca|=c),mi===4&&Ss(n,Te,Tn,!1)),ur(n))}function J1(n,s,c){if((Pe&6)!==0)throw Error(i(327));var d=!c&&(s&127)===0&&(s&n.expiredLanes)===0||Gs(n,s),g=d?e3(n,s):td(n,s,!0),y=d;do{if(g===0){Va&&!d&&Ss(n,s,0,!1);break}else{if(c=n.current.alternate,y&&!Jy(c)){g=td(n,s,!1),y=!1;continue}if(g===2){if(y=s,n.errorRecoveryDisabledLanes&y)var k=0;else k=n.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){s=k;t:{var I=n;g=al;var K=I.current.memoizedState.isDehydrated;if(K&&(Wa(I,k).flags|=256),k=td(I,k,!1),k!==2){if(Vh&&!K){I.errorRecoveryDisabledLanes|=y,ca|=y,g=4;break t}y=mn,mn=g,y!==null&&(mn===null?mn=y:mn.push.apply(mn,y))}g=k}if(y=!1,g!==2)continue}}if(g===1){Wa(n,0),Ss(n,s,0,!0);break}t:{switch(d=n,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ss(d,s,Tn,!vs);break t;case 2:mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(g=Vc+300-Lt(),10<g)){if(Ss(d,s,Tn,!vs),rs(d,0,!0)!==0)break t;qr=s,d.timeoutHandle=Rg(tg.bind(null,d,c,mn,Kc,Kh,s,Tn,ca,Xa,vs,y,"Throttled",-0,0),g);break t}tg(d,c,mn,Kc,Kh,s,Tn,ca,Xa,vs,y,null,-0,0)}}break}while(!0);ur(n)}function tg(n,s,c,d,g,y,k,I,K,ct,St,Et,ft,yt){if(n.timeoutHandle=-1,Et=s.subtreeFlags,Et&8192||(Et&16785408)===16785408){Et={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mr},Y1(s,y,Et);var Vt=(y&62914560)===y?Vc-Lt():(y&4194048)===y?W1-Lt():0;if(Vt=I3(Et,Vt),Vt!==null){qr=y,n.cancelPendingCommit=Vt(lg.bind(null,n,s,y,c,d,g,k,I,K,St,Et,null,ft,yt)),Ss(n,y,k,!ct);return}}lg(n,s,y,c,d,g,k,I,K)}function Jy(n){for(var s=n;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],y=g.getSnapshot;g=g.value;try{if(!Sn(y(),g))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ss(n,s,c,d){s&=~Xh,s&=~ca,n.suspendedLanes|=s,n.pingedLanes&=~s,d&&(n.warmLanes|=s),d=n.expirationTimes;for(var g=s;0<g;){var y=31-Ze(g),k=1<<y;d[y]=-1,g&=~k}c!==0&&sc(n,c,s)}function Wc(){return(Pe&6)===0?(ll(0),!1):!0}function Jh(){if(_e!==null){if(He===0)var n=_e.return;else n=_e,Or=ta=null,ph(n),Ua=null,qo=0,n=_e;for(;n!==null;)D1(n.alternate,n),n=n.return;_e=null}}function Wa(n,s){var c=n.timeoutHandle;c!==-1&&(n.timeoutHandle=-1,y3(c)),c=n.cancelPendingCommit,c!==null&&(n.cancelPendingCommit=null,c()),qr=0,Jh(),Xe=n,_e=c=Dr(n.current,null),Te=s,He=0,kn=null,vs=!1,Va=Gs(n,s),Vh=!1,Xa=Tn=Xh=ca=ys=mi=0,mn=al=null,Kh=!1,(s&8)!==0&&(s|=s&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=s;0<d;){var g=31-Ze(d),y=1<<g;s|=n[g],d&=~y}return Gr=s,bc(),c}function eg(n,s){be=null,X.H=Qo,s===Pa||s===Ec?(s=bp(),He=3):s===nh?(s=bp(),He=4):He=s===Dh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,kn=s,_e===null&&(mi=1,Pc(n,Bn(s,n.current)))}function ig(){var n=_n.current;return n===null?!0:(Te&4194048)===Te?Un===null:(Te&62914560)===Te||(Te&536870912)!==0?n===Un:!1}function ng(){var n=X.H;return X.H=Qo,n===null?Qo:n}function rg(){var n=X.A;return X.A=Zy,n}function Zc(){mi=4,vs||(Te&4194048)!==Te&&_n.current!==null||(Va=!0),(ys&134217727)===0&&(ca&134217727)===0||Xe===null||Ss(Xe,Te,Tn,!1)}function td(n,s,c){var d=Pe;Pe|=2;var g=ng(),y=rg();(Xe!==n||Te!==s)&&(Kc=null,Wa(n,s)),s=!1;var k=mi;t:do try{if(He!==0&&_e!==null){var I=_e,K=kn;switch(He){case 8:Jh(),k=6;break t;case 3:case 2:case 9:case 6:_n.current===null&&(s=!0);var ct=He;if(He=0,kn=null,Za(n,I,K,ct),c&&Va){k=0;break t}break;default:ct=He,He=0,kn=null,Za(n,I,K,ct)}}t3(),k=mi;break}catch(St){eg(n,St)}while(!0);return s&&n.shellSuspendCounter++,Or=ta=null,Pe=d,X.H=g,X.A=y,_e===null&&(Xe=null,Te=0,bc()),k}function t3(){for(;_e!==null;)sg(_e)}function e3(n,s){var c=Pe;Pe|=2;var d=ng(),g=rg();Xe!==n||Te!==s?(Kc=null,Xc=Lt()+500,Wa(n,s)):Va=Gs(n,s);t:do try{if(He!==0&&_e!==null){s=_e;var y=kn;e:switch(He){case 1:He=0,kn=null,Za(n,s,y,1);break;case 2:case 9:if(pp(y)){He=0,kn=null,ag(s);break}s=function(){He!==2&&He!==9||Xe!==n||(He=7),ur(n)},y.then(s,s);break t;case 3:He=7;break t;case 4:He=5;break t;case 7:pp(y)?(He=0,kn=null,ag(s)):(He=0,kn=null,Za(n,s,y,7));break;case 5:var k=null;switch(_e.tag){case 26:k=_e.memoizedState;case 5:case 27:var I=_e;if(k?$g(k):I.stateNode.complete){He=0,kn=null;var K=I.sibling;if(K!==null)_e=K;else{var ct=I.return;ct!==null?(_e=ct,Qc(ct)):_e=null}break e}}He=0,kn=null,Za(n,s,y,5);break;case 6:He=0,kn=null,Za(n,s,y,6);break;case 8:Jh(),mi=6;break t;default:throw Error(i(462))}}i3();break}catch(St){eg(n,St)}while(!0);return Or=ta=null,X.H=d,X.A=g,Pe=c,_e!==null?0:(Xe=null,Te=0,bc(),mi)}function i3(){for(;_e!==null&&!ht();)sg(_e)}function sg(n){var s=M1(n.alternate,n,Gr);n.memoizedProps=n.pendingProps,s===null?Qc(n):_e=s}function ag(n){var s=n,c=s.alternate;switch(s.tag){case 15:case 0:s=A1(c,s,s.pendingProps,s.type,void 0,Te);break;case 11:s=A1(c,s,s.pendingProps,s.type.render,s.ref,Te);break;case 5:ph(s);default:D1(c,s),s=_e=rp(s,Gr),s=M1(c,s,Gr)}n.memoizedProps=n.pendingProps,s===null?Qc(n):_e=s}function Za(n,s,c,d){Or=ta=null,ph(s),Ua=null,qo=0;var g=s.return;try{if(qy(n,g,s,c,Te)){mi=1,Pc(n,Bn(c,n.current)),_e=null;return}}catch(y){if(g!==null)throw _e=g,y;mi=1,Pc(n,Bn(c,n.current)),_e=null;return}s.flags&32768?(Me||d===1?n=!0:Va||(Te&536870912)!==0?n=!1:(vs=n=!0,(d===2||d===9||d===3||d===6)&&(d=_n.current,d!==null&&d.tag===13&&(d.flags|=16384))),og(s,n)):Qc(s)}function Qc(n){var s=n;do{if((s.flags&32768)!==0){og(s,vs);return}n=s.return;var c=Vy(s.alternate,s,Gr);if(c!==null){_e=c;return}if(s=s.sibling,s!==null){_e=s;return}_e=s=n}while(s!==null);mi===0&&(mi=5)}function og(n,s){do{var c=Xy(n.alternate,n);if(c!==null){c.flags&=32767,_e=c;return}if(c=n.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(n=n.sibling,n!==null)){_e=n;return}_e=n=c}while(n!==null);mi=6,_e=null}function lg(n,s,c,d,g,y,k,I,K){n.cancelPendingCommit=null;do Jc();while(Ri!==0);if((Pe&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=Hu,wu(n,c,y,k,I,K),n===Xe&&(_e=Xe=null,Te=0),Ka=s,ws=n,qr=c,Wh=y,Zh=g,Z1=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,a3(ye,function(){return fg(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=X.T,X.T=null,g=W.p,W.p=2,k=Pe,Pe|=4;try{Ky(n,s,c)}finally{Pe=k,W.p=g,X.T=d}}Ri=1,cg(),ug(),hg()}}function cg(){if(Ri===1){Ri=0;var n=ws,s=Ka,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=X.T,X.T=null;var d=W.p;W.p=2;var g=Pe;Pe|=4;try{G1(s,n);var y=dd,k=Km(n.containerInfo),I=y.focusedElem,K=y.selectionRange;if(k!==I&&I&&I.ownerDocument&&Xm(I.ownerDocument.documentElement,I)){if(K!==null&&Iu(I)){var ct=K.start,St=K.end;if(St===void 0&&(St=ct),"selectionStart"in I)I.selectionStart=ct,I.selectionEnd=Math.min(St,I.value.length);else{var Et=I.ownerDocument||document,ft=Et&&Et.defaultView||window;if(ft.getSelection){var yt=ft.getSelection(),Vt=I.textContent.length,le=Math.min(K.start,Vt),Ye=K.end===void 0?le:Math.min(K.end,Vt);!yt.extend&&le>Ye&&(k=Ye,Ye=le,le=k);var et=Vm(I,le),Q=Vm(I,Ye);if(et&&Q&&(yt.rangeCount!==1||yt.anchorNode!==et.node||yt.anchorOffset!==et.offset||yt.focusNode!==Q.node||yt.focusOffset!==Q.offset)){var ot=Et.createRange();ot.setStart(et.node,et.offset),yt.removeAllRanges(),le>Ye?(yt.addRange(ot),yt.extend(Q.node,Q.offset)):(ot.setEnd(Q.node,Q.offset),yt.addRange(ot))}}}}for(Et=[],yt=I;yt=yt.parentNode;)yt.nodeType===1&&Et.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<Et.length;I++){var _t=Et[I];_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}h0=!!hd,dd=hd=null}finally{Pe=g,W.p=d,X.T=c}}n.current=s,Ri=2}}function ug(){if(Ri===2){Ri=0;var n=ws,s=Ka,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=X.T,X.T=null;var d=W.p;W.p=2;var g=Pe;Pe|=4;try{F1(n,s.alternate,s)}finally{Pe=g,W.p=d,X.T=c}}Ri=3}}function hg(){if(Ri===4||Ri===3){Ri=0,zt();var n=ws,s=Ka,c=qr,d=Z1;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ri=5:(Ri=0,Ka=ws=null,dg(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(xs=null),To(c),s=s.stateNode,wi&&typeof wi.onCommitFiberRoot=="function")try{wi.onCommitFiberRoot(je,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=X.T,g=W.p,W.p=2,X.T=null;try{for(var y=n.onRecoverableError,k=0;k<d.length;k++){var I=d[k];y(I.value,{componentStack:I.stack})}}finally{X.T=s,W.p=g}}(qr&3)!==0&&Jc(),ur(n),g=n.pendingLanes,(c&261930)!==0&&(g&42)!==0?n===Qh?ol++:(ol=0,Qh=n):ol=0,ll(0)}}function dg(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ho(s)))}function Jc(){return cg(),ug(),hg(),fg()}function fg(){if(Ri!==5)return!1;var n=ws,s=Wh;Wh=0;var c=To(qr),d=X.T,g=W.p;try{W.p=32>c?32:c,X.T=null,c=Zh,Zh=null;var y=ws,k=qr;if(Ri=0,Ka=ws=null,qr=0,(Pe&6)!==0)throw Error(i(331));var I=Pe;if(Pe|=4,X1(y.current),$1(y,y.current,k,c),Pe=I,ll(0,!1),wi&&typeof wi.onPostCommitFiberRoot=="function")try{wi.onPostCommitFiberRoot(je,y)}catch{}return!0}finally{W.p=g,X.T=d,dg(n,s)}}function mg(n,s,c){s=Bn(c,s),s=Rh(n.stateNode,s,2),n=ms(n,s,2),n!==null&&(qs(n,2),ur(n))}function Ge(n,s,c){if(n.tag===3)mg(n,n,c);else for(;s!==null;){if(s.tag===3){mg(s,n,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(xs===null||!xs.has(d))){n=Bn(c,n),c=p1(2),d=ms(s,c,2),d!==null&&(g1(c,d,s,n),qs(d,2),ur(d));break}}s=s.return}}function ed(n,s,c){var d=n.pingCache;if(d===null){d=n.pingCache=new Qy;var g=new Set;d.set(s,g)}else g=d.get(s),g===void 0&&(g=new Set,d.set(s,g));g.has(c)||(Vh=!0,g.add(c),n=n3.bind(null,n,s,c),s.then(n,n))}function n3(n,s,c){var d=n.pingCache;d!==null&&d.delete(s),n.pingedLanes|=n.suspendedLanes&c,n.warmLanes&=~c,Xe===n&&(Te&c)===c&&(mi===4||mi===3&&(Te&62914560)===Te&&300>Lt()-Vc?(Pe&2)===0&&Wa(n,0):Xh|=c,Xa===Te&&(Xa=0)),ur(n)}function pg(n,s){s===0&&(s=rc()),n=Zs(n,s),n!==null&&(qs(n,s),ur(n))}function r3(n){var s=n.memoizedState,c=0;s!==null&&(c=s.retryLane),pg(n,c)}function s3(n,s){var c=0;switch(n.tag){case 31:case 13:var d=n.stateNode,g=n.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),pg(n,c)}function a3(n,s){return kt(n,s)}var t0=null,Qa=null,id=!1,e0=!1,nd=!1,As=0;function ur(n){n!==Qa&&n.next===null&&(Qa===null?t0=Qa=n:Qa=Qa.next=n),e0=!0,id||(id=!0,l3())}function ll(n,s){if(!nd&&e0){nd=!0;do for(var c=!1,d=t0;d!==null;){if(n!==0){var g=d.pendingLanes;if(g===0)var y=0;else{var k=d.suspendedLanes,I=d.pingedLanes;y=(1<<31-Ze(42|n)+1)-1,y&=g&~(k&~I),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,yg(d,y))}else y=Te,y=rs(d,d===Xe?y:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(y&3)===0||Gs(d,y)||(c=!0,yg(d,y));d=d.next}while(c);nd=!1}}function o3(){gg()}function gg(){e0=id=!1;var n=0;As!==0&&v3()&&(n=As);for(var s=Lt(),c=null,d=t0;d!==null;){var g=d.next,y=bg(d,s);y===0?(d.next=null,c===null?t0=g:c.next=g,g===null&&(Qa=c)):(c=d,(n!==0||(y&3)!==0)&&(e0=!0)),d=g}Ri!==0&&Ri!==5||ll(n),As!==0&&(As=0)}function bg(n,s){for(var c=n.suspendedLanes,d=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var k=31-Ze(y),I=1<<k,K=g[k];K===-1?((I&c)===0||(I&d)!==0)&&(g[k]=xu(I,s)):K<=s&&(n.expiredLanes|=I),y&=~I}if(s=Xe,c=Te,c=rs(n,n===s?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,c===0||n===s&&(He===2||He===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&Tt(d),n.callbackNode=null,n.callbackPriority=0;if((c&3)===0||Gs(n,c)){if(s=c&-c,s===n.callbackPriority)return s;switch(d!==null&&Tt(d),To(c)){case 2:case 8:c=ve;break;case 32:c=ye;break;case 268435456:c=rr;break;default:c=ye}return d=vg.bind(null,n),c=kt(c,d),n.callbackPriority=s,n.callbackNode=c,s}return d!==null&&d!==null&&Tt(d),n.callbackPriority=2,n.callbackNode=null,2}function vg(n,s){if(Ri!==0&&Ri!==5)return n.callbackNode=null,n.callbackPriority=0,null;var c=n.callbackNode;if(Jc()&&n.callbackNode!==c)return null;var d=Te;return d=rs(n,n===Xe?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(J1(n,d,s),bg(n,Lt()),n.callbackNode!=null&&n.callbackNode===c?vg.bind(null,n):null)}function yg(n,s){if(Jc())return null;J1(n,s,!0)}function l3(){x3(function(){(Pe&6)!==0?kt(Zt,o3):gg()})}function rd(){if(As===0){var n=Ia;n===0&&(n=ns,ns<<=1,(ns&261888)===0&&(ns=256)),As=n}return As}function xg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:cc(""+n)}function wg(n,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,n.id&&c.setAttribute("form",n.id),s.parentNode.insertBefore(c,s),n=new FormData(n),c.parentNode.removeChild(c),n}function c3(n,s,c,d,g){if(s==="submit"&&c&&c.stateNode===g){var y=xg((g[$i]||null).action),k=d.submitter;k&&(s=(s=k[$i]||null)?xg(s.formAction):k.getAttribute("formAction"),s!==null&&(y=s,k=null));var I=new fc("action","action",null,d,g);n.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(As!==0){var K=k?wg(g,k):new FormData(g);_h(c,{pending:!0,data:K,method:g.method,action:y},null,K)}}else typeof y=="function"&&(I.preventDefault(),K=k?wg(g,k):new FormData(g),_h(c,{pending:!0,data:K,method:g.method,action:y},y,K))},currentTarget:g}]})}}for(var sd=0;sd<ju.length;sd++){var ad=ju[sd],u3=ad.toLowerCase(),h3=ad[0].toUpperCase()+ad.slice(1);Wn(u3,"on"+h3)}Wn(Qm,"onAnimationEnd"),Wn(Jm,"onAnimationIteration"),Wn(tp,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(Ty,"onTransitionRun"),Wn(Cy,"onTransitionStart"),Wn(My,"onTransitionCancel"),Wn(ep,"onTransitionEnd"),Nt("onMouseEnter",["mouseout","mouseover"]),Nt("onMouseLeave",["mouseout","mouseover"]),Nt("onPointerEnter",["pointerout","pointerover"]),Nt("onPointerLeave",["pointerout","pointerover"]),mt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mt("onBeforeInput",["compositionend","keypress","textInput","paste"]),mt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cl));function Sg(n,s){s=(s&4)!==0;for(var c=0;c<n.length;c++){var d=n[c],g=d.event;d=d.listeners;t:{var y=void 0;if(s)for(var k=d.length-1;0<=k;k--){var I=d[k],K=I.instance,ct=I.currentTarget;if(I=I.listener,K!==y&&g.isPropagationStopped())break t;y=I,g.currentTarget=ct;try{y(g)}catch(St){gc(St)}g.currentTarget=null,y=K}else for(k=0;k<d.length;k++){if(I=d[k],K=I.instance,ct=I.currentTarget,I=I.listener,K!==y&&g.isPropagationStopped())break t;y=I,g.currentTarget=ct;try{y(g)}catch(St){gc(St)}g.currentTarget=null,y=K}}}}function Ee(n,s){var c=s[Co];c===void 0&&(c=s[Co]=new Set);var d=n+"__bubble";c.has(d)||(Ag(s,n,2,!1),c.add(d))}function od(n,s,c){var d=0;s&&(d|=4),Ag(c,n,d,s)}var i0="_reactListening"+Math.random().toString(36).slice(2);function ld(n){if(!n[i0]){n[i0]=!0,dt.forEach(function(c){c!=="selectionchange"&&(d3.has(c)||od(c,!1,n),od(c,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[i0]||(s[i0]=!0,od("selectionchange",!1,s))}}function Ag(n,s,c,d){switch(Qg(s)){case 2:var g=U3;break;case 8:g=j3;break;default:g=Ad}c=g.bind(null,s,c,n),g=void 0,!Cu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),d?g!==void 0?n.addEventListener(s,c,{capture:!0,passive:g}):n.addEventListener(s,c,!0):g!==void 0?n.addEventListener(s,c,{passive:g}):n.addEventListener(s,c,!1)}function cd(n,s,c,d,g){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)t:for(;;){if(d===null)return;var k=d.tag;if(k===3||k===4){var I=d.stateNode.containerInfo;if(I===g)break;if(k===4)for(k=d.return;k!==null;){var K=k.tag;if((K===3||K===4)&&k.stateNode.containerInfo===g)return;k=k.return}for(;I!==null;){if(k=Tr(I),k===null)return;if(K=k.tag,K===5||K===6||K===26||K===27){d=y=k;continue t}I=I.parentNode}}d=d.return}Cm(function(){var ct=y,St=ku(c),Et=[];t:{var ft=ip.get(n);if(ft!==void 0){var yt=fc,Vt=n;switch(n){case"keypress":if(hc(c)===0)break t;case"keydown":case"keyup":yt=sy;break;case"focusin":Vt="focus",yt=Nu;break;case"focusout":Vt="blur",yt=Nu;break;case"beforeblur":case"afterblur":yt=Nu;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Dm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=Vv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=ly;break;case Qm:case Jm:case tp:yt=Wv;break;case ep:yt=uy;break;case"scroll":case"scrollend":yt=$v;break;case"wheel":yt=dy;break;case"copy":case"cut":case"paste":yt=Qv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Om;break;case"toggle":case"beforetoggle":yt=my}var le=(s&4)!==0,Ye=!le&&(n==="scroll"||n==="scrollend"),et=le?ft!==null?ft+"Capture":null:ft;le=[];for(var Q=ct,ot;Q!==null;){var _t=Q;if(ot=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||ot===null||et===null||(_t=Do(Q,et),_t!=null&&le.push(ul(Q,_t,ot))),Ye)break;Q=Q.return}0<le.length&&(ft=new yt(ft,Vt,null,c,St),Et.push({event:ft,listeners:le}))}}if((s&7)===0){t:{if(ft=n==="mouseover"||n==="pointerover",yt=n==="mouseout"||n==="pointerout",ft&&c!==Eu&&(Vt=c.relatedTarget||c.fromElement)&&(Tr(Vt)||Vt[ss]))break t;if((yt||ft)&&(ft=St.window===St?St:(ft=St.ownerDocument)?ft.defaultView||ft.parentWindow:window,yt?(Vt=c.relatedTarget||c.toElement,yt=ct,Vt=Vt?Tr(Vt):null,Vt!==null&&(Ye=a(Vt),le=Vt.tag,Vt!==Ye||le!==5&&le!==27&&le!==6)&&(Vt=null)):(yt=null,Vt=ct),yt!==Vt)){if(le=Dm,_t="onMouseLeave",et="onMouseEnter",Q="mouse",(n==="pointerout"||n==="pointerover")&&(le=Om,_t="onPointerLeave",et="onPointerEnter",Q="pointer"),Ye=yt==null?ft:Vs(yt),ot=Vt==null?ft:Vs(Vt),ft=new le(_t,Q+"leave",yt,c,St),ft.target=Ye,ft.relatedTarget=ot,_t=null,Tr(St)===ct&&(le=new le(et,Q+"enter",Vt,c,St),le.target=ot,le.relatedTarget=Ye,_t=le),Ye=_t,yt&&Vt)e:{for(le=f3,et=yt,Q=Vt,ot=0,_t=et;_t;_t=le(_t))ot++;_t=0;for(var ie=Q;ie;ie=le(ie))_t++;for(;0<ot-_t;)et=le(et),ot--;for(;0<_t-ot;)Q=le(Q),_t--;for(;ot--;){if(et===Q||Q!==null&&et===Q.alternate){le=et;break e}et=le(et),Q=le(Q)}le=null}else le=null;yt!==null&&_g(Et,ft,yt,le,!1),Vt!==null&&Ye!==null&&_g(Et,Ye,Vt,le,!0)}}t:{if(ft=ct?Vs(ct):window,yt=ft.nodeName&&ft.nodeName.toLowerCase(),yt==="select"||yt==="input"&&ft.type==="file")var ze=jm;else if(Pm(ft))if(Hm)ze=_y;else{ze=Sy;var Wt=wy}else yt=ft.nodeName,!yt||yt.toLowerCase()!=="input"||ft.type!=="checkbox"&&ft.type!=="radio"?ct&&_u(ct.elementType)&&(ze=jm):ze=Ay;if(ze&&(ze=ze(n,ct))){Um(Et,ze,c,St);break t}Wt&&Wt(n,ft,ct),n==="focusout"&&ct&&ft.type==="number"&&ct.memoizedProps.value!=null&&me(ft,"number",ft.value)}switch(Wt=ct?Vs(ct):window,n){case"focusin":(Pm(Wt)||Wt.contentEditable==="true")&&(Ma=Wt,Fu=ct,Po=null);break;case"focusout":Po=Fu=Ma=null;break;case"mousedown":Pu=!0;break;case"contextmenu":case"mouseup":case"dragend":Pu=!1,Wm(Et,c,St);break;case"selectionchange":if(ky)break;case"keydown":case"keyup":Wm(Et,c,St)}var xe;if(zu)t:{switch(n){case"compositionstart":var Ce="onCompositionStart";break t;case"compositionend":Ce="onCompositionEnd";break t;case"compositionupdate":Ce="onCompositionUpdate";break t}Ce=void 0}else Ca?Im(n,c)&&(Ce="onCompositionEnd"):n==="keydown"&&c.keyCode===229&&(Ce="onCompositionStart");Ce&&(zm&&c.locale!=="ko"&&(Ca||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Ca&&(xe=Mm()):(os=St,Mu="value"in os?os.value:os.textContent,Ca=!0)),Wt=n0(ct,Ce),0<Wt.length&&(Ce=new Nm(Ce,n,null,c,St),Et.push({event:Ce,listeners:Wt}),xe?Ce.data=xe:(xe=Fm(c),xe!==null&&(Ce.data=xe)))),(xe=gy?by(n,c):vy(n,c))&&(Ce=n0(ct,"onBeforeInput"),0<Ce.length&&(Wt=new Nm("onBeforeInput","beforeinput",null,c,St),Et.push({event:Wt,listeners:Ce}),Wt.data=xe)),c3(Et,n,ct,c,St)}Sg(Et,s)})}function ul(n,s,c){return{instance:n,listener:s,currentTarget:c}}function n0(n,s){for(var c=s+"Capture",d=[];n!==null;){var g=n,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=Do(n,c),g!=null&&d.unshift(ul(n,g,y)),g=Do(n,s),g!=null&&d.push(ul(n,g,y))),n.tag===3)return d;n=n.return}return[]}function f3(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function _g(n,s,c,d,g){for(var y=s._reactName,k=[];c!==null&&c!==d;){var I=c,K=I.alternate,ct=I.stateNode;if(I=I.tag,K!==null&&K===d)break;I!==5&&I!==26&&I!==27||ct===null||(K=ct,g?(ct=Do(c,y),ct!=null&&k.unshift(ul(c,ct,K))):g||(ct=Do(c,y),ct!=null&&k.push(ul(c,ct,K)))),c=c.return}k.length!==0&&n.push({event:s,listeners:k})}var m3=/\r\n?/g,p3=/\u0000|\uFFFD/g;function Eg(n){return(typeof n=="string"?n:""+n).replace(m3,`
`).replace(p3,"")}function kg(n,s){return s=Eg(s),Eg(n)===s}function $e(n,s,c,d,g,y){switch(c){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||ii(n,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&ii(n,""+d);break;case"className":ee(n,"class",d);break;case"tabIndex":ee(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":ee(n,c,d);break;case"style":km(n,d,y);break;case"data":if(s!=="object"){ee(n,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||c!=="href")){n.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=cc(""+d),n.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(s!=="input"&&$e(n,s,"name",g.name,g,null),$e(n,s,"formEncType",g.formEncType,g,null),$e(n,s,"formMethod",g.formMethod,g,null),$e(n,s,"formTarget",g.formTarget,g,null)):($e(n,s,"encType",g.encType,g,null),$e(n,s,"method",g.method,g,null),$e(n,s,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(c);break}d=cc(""+d),n.setAttribute(c,d);break;case"onClick":d!=null&&(n.onclick=Mr);break;case"onScroll":d!=null&&Ee("scroll",n);break;case"onScrollEnd":d!=null&&Ee("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}c=cc(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""+d):n.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,""):n.removeAttribute(c);break;case"capture":case"download":d===!0?n.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(c,d):n.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(c,d):n.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(c):n.setAttribute(c,d);break;case"popover":Ee("beforetoggle",n),Ee("toggle",n),Ct(n,"popover",d);break;case"xlinkActuate":re(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":re(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":re(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":re(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":re(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":re(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":re(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":re(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":re(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ct(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Gv.get(c)||c,Ct(n,c,d))}}function ud(n,s,c,d,g,y){switch(c){case"style":km(n,d,y);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(i(60));n.innerHTML=c}}break;case"children":typeof d=="string"?ii(n,d):(typeof d=="number"||typeof d=="bigint")&&ii(n,""+d);break;case"onScroll":d!=null&&Ee("scroll",n);break;case"onScrollEnd":d!=null&&Ee("scrollend",n);break;case"onClick":d!=null&&(n.onclick=Mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wt.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),s=c.slice(2,g?c.length-7:void 0),y=n[$i]||null,y=y!=null?y[c]:null,typeof y=="function"&&n.removeEventListener(s,y,g),typeof d=="function")){typeof y!="function"&&y!==null&&(c in n?n[c]=null:n.hasAttribute(c)&&n.removeAttribute(c)),n.addEventListener(s,d,g);break t}c in n?n[c]=d:d===!0?n.setAttribute(c,""):Ct(n,c,d)}}}function Fi(n,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",n),Ee("load",n);var d=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var k=c[y];if(k!=null)switch(y){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:$e(n,s,y,k,c,null)}}g&&$e(n,s,"srcSet",c.srcSet,c,null),d&&$e(n,s,"src",c.src,c,null);return;case"input":Ee("invalid",n);var I=y=k=g=null,K=null,ct=null;for(d in c)if(c.hasOwnProperty(d)){var St=c[d];if(St!=null)switch(d){case"name":g=St;break;case"type":k=St;break;case"checked":K=St;break;case"defaultChecked":ct=St;break;case"value":y=St;break;case"defaultValue":I=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(i(137,s));break;default:$e(n,s,d,St,c,null)}}It(n,y,I,K,ct,k,g,!1);return;case"select":Ee("invalid",n),d=k=y=null;for(g in c)if(c.hasOwnProperty(g)&&(I=c[g],I!=null))switch(g){case"value":y=I;break;case"defaultValue":k=I;break;case"multiple":d=I;default:$e(n,s,g,I,c,null)}s=y,c=k,n.multiple=!!d,s!=null?Ne(n,!!d,s,!1):c!=null&&Ne(n,!!d,c,!0);return;case"textarea":Ee("invalid",n),y=g=d=null;for(k in c)if(c.hasOwnProperty(k)&&(I=c[k],I!=null))switch(k){case"value":d=I;break;case"defaultValue":g=I;break;case"children":y=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:$e(n,s,k,I,c,null)}di(n,d,g,y);return;case"option":for(K in c)if(c.hasOwnProperty(K)&&(d=c[K],d!=null))switch(K){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:$e(n,s,K,d,c,null)}return;case"dialog":Ee("beforetoggle",n),Ee("toggle",n),Ee("cancel",n),Ee("close",n);break;case"iframe":case"object":Ee("load",n);break;case"video":case"audio":for(d=0;d<cl.length;d++)Ee(cl[d],n);break;case"image":Ee("error",n),Ee("load",n);break;case"details":Ee("toggle",n);break;case"embed":case"source":case"link":Ee("error",n),Ee("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ct in c)if(c.hasOwnProperty(ct)&&(d=c[ct],d!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:$e(n,s,ct,d,c,null)}return;default:if(_u(s)){for(St in c)c.hasOwnProperty(St)&&(d=c[St],d!==void 0&&ud(n,s,St,d,c,void 0));return}}for(I in c)c.hasOwnProperty(I)&&(d=c[I],d!=null&&$e(n,s,I,d,c,null))}function g3(n,s,c,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,k=null,I=null,K=null,ct=null,St=null;for(yt in c){var Et=c[yt];if(c.hasOwnProperty(yt)&&Et!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":K=Et;default:d.hasOwnProperty(yt)||$e(n,s,yt,null,d,Et)}}for(var ft in d){var yt=d[ft];if(Et=c[ft],d.hasOwnProperty(ft)&&(yt!=null||Et!=null))switch(ft){case"type":y=yt;break;case"name":g=yt;break;case"checked":ct=yt;break;case"defaultChecked":St=yt;break;case"value":k=yt;break;case"defaultValue":I=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(i(137,s));break;default:yt!==Et&&$e(n,s,ft,yt,d,Et)}}Qt(n,k,I,K,ct,St,y,g);return;case"select":yt=k=I=ft=null;for(y in c)if(K=c[y],c.hasOwnProperty(y)&&K!=null)switch(y){case"value":break;case"multiple":yt=K;default:d.hasOwnProperty(y)||$e(n,s,y,null,d,K)}for(g in d)if(y=d[g],K=c[g],d.hasOwnProperty(g)&&(y!=null||K!=null))switch(g){case"value":ft=y;break;case"defaultValue":I=y;break;case"multiple":k=y;default:y!==K&&$e(n,s,g,y,d,K)}s=I,c=k,d=yt,ft!=null?Ne(n,!!c,ft,!1):!!d!=!!c&&(s!=null?Ne(n,!!c,s,!0):Ne(n,!!c,c?[]:"",!1));return;case"textarea":yt=ft=null;for(I in c)if(g=c[I],c.hasOwnProperty(I)&&g!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:$e(n,s,I,null,d,g)}for(k in d)if(g=d[k],y=c[k],d.hasOwnProperty(k)&&(g!=null||y!=null))switch(k){case"value":ft=g;break;case"defaultValue":yt=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&$e(n,s,k,g,d,y)}Yi(n,ft,yt);return;case"option":for(var Vt in c)if(ft=c[Vt],c.hasOwnProperty(Vt)&&ft!=null&&!d.hasOwnProperty(Vt))switch(Vt){case"selected":n.selected=!1;break;default:$e(n,s,Vt,null,d,ft)}for(K in d)if(ft=d[K],yt=c[K],d.hasOwnProperty(K)&&ft!==yt&&(ft!=null||yt!=null))switch(K){case"selected":n.selected=ft&&typeof ft!="function"&&typeof ft!="symbol";break;default:$e(n,s,K,ft,d,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var le in c)ft=c[le],c.hasOwnProperty(le)&&ft!=null&&!d.hasOwnProperty(le)&&$e(n,s,le,null,d,ft);for(ct in d)if(ft=d[ct],yt=c[ct],d.hasOwnProperty(ct)&&ft!==yt&&(ft!=null||yt!=null))switch(ct){case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(i(137,s));break;default:$e(n,s,ct,ft,d,yt)}return;default:if(_u(s)){for(var Ye in c)ft=c[Ye],c.hasOwnProperty(Ye)&&ft!==void 0&&!d.hasOwnProperty(Ye)&&ud(n,s,Ye,void 0,d,ft);for(St in d)ft=d[St],yt=c[St],!d.hasOwnProperty(St)||ft===yt||ft===void 0&&yt===void 0||ud(n,s,St,ft,d,yt);return}}for(var et in c)ft=c[et],c.hasOwnProperty(et)&&ft!=null&&!d.hasOwnProperty(et)&&$e(n,s,et,null,d,ft);for(Et in d)ft=d[Et],yt=c[Et],!d.hasOwnProperty(Et)||ft===yt||ft==null&&yt==null||$e(n,s,Et,ft,d,yt)}function Tg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function b3(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],y=g.transferSize,k=g.initiatorType,I=g.duration;if(y&&I&&Tg(k)){for(k=0,I=g.responseEnd,d+=1;d<c.length;d++){var K=c[d],ct=K.startTime;if(ct>I)break;var St=K.transferSize,Et=K.initiatorType;St&&Tg(Et)&&(K=K.responseEnd,k+=St*(K<I?1:(I-ct)/(K-ct)))}if(--d,s+=8*(y+k)/(g.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var hd=null,dd=null;function r0(n){return n.nodeType===9?n:n.ownerDocument}function Cg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Mg(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function fd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var md=null;function v3(){var n=window.event;return n&&n.type==="popstate"?n===md?!1:(md=n,!0):(md=null,!1)}var Rg=typeof setTimeout=="function"?setTimeout:void 0,y3=typeof clearTimeout=="function"?clearTimeout:void 0,Dg=typeof Promise=="function"?Promise:void 0,x3=typeof queueMicrotask=="function"?queueMicrotask:typeof Dg<"u"?function(n){return Dg.resolve(null).then(n).catch(w3)}:Rg;function w3(n){setTimeout(function(){throw n})}function _s(n){return n==="head"}function Ng(n,s){var c=s,d=0;do{var g=c.nextSibling;if(n.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){n.removeChild(g),io(s);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")hl(n.ownerDocument.documentElement);else if(c==="head"){c=n.ownerDocument.head,hl(c);for(var y=c.firstChild;y;){var k=y.nextSibling,I=y.nodeName;y[Ys]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=k}}else c==="body"&&hl(n.ownerDocument.body);c=g}while(c);io(s)}function Og(n,s){var c=n;n=0;do{var d=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(n===0)break;n--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||n++;c=d}while(c)}function pd(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":pd(c),Mo(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}n.removeChild(c)}}function S3(n,s,c,d){for(;n.nodeType===1;){var g=c;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Ys])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=jn(n.nextSibling),n===null)break}return null}function A3(n,s,c){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!c||(n=jn(n.nextSibling),n===null))return null;return n}function zg(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=jn(n.nextSibling),n===null))return null;return n}function gd(n){return n.data==="$?"||n.data==="$~"}function bd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function _3(n,s){var c=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||c.readyState!=="loading")s();else{var d=function(){s(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function jn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var vd=null;function Lg(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="/$"||c==="/&"){if(s===0)return jn(n.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}n=n.nextSibling}return null}function Bg(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var c=n.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return n;s--}else c!=="/$"&&c!=="/&"||s++}n=n.previousSibling}return null}function Ig(n,s,c){switch(s=r0(c),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function hl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Mo(n)}var Hn=new Map,Fg=new Set;function s0(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var $r=W.d;W.d={f:E3,r:k3,D:T3,C:C3,L:M3,m:R3,X:N3,S:D3,M:O3};function E3(){var n=$r.f(),s=Wc();return n||s}function k3(n){var s=Cr(n);s!==null&&s.tag===5&&s.type==="form"?e1(s):$r.r(n)}var Ja=typeof document>"u"?null:document;function Pg(n,s,c){var d=Ja;if(d&&typeof s=="string"&&s){var g=Ni(s);g='link[rel="'+n+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Fg.has(g)||(Fg.add(g),n={rel:n,crossOrigin:c,href:s},d.querySelector(g)===null&&(s=d.createElement("link"),Fi(s,"link",n),tt(s),d.head.appendChild(s)))}}function T3(n){$r.D(n),Pg("dns-prefetch",n,null)}function C3(n,s){$r.C(n,s),Pg("preconnect",n,s)}function M3(n,s,c){$r.L(n,s,c);var d=Ja;if(d&&n&&s){var g='link[rel="preload"][as="'+Ni(s)+'"]';s==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+Ni(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+Ni(c.imageSizes)+'"]')):g+='[href="'+Ni(n)+'"]';var y=g;switch(s){case"style":y=to(n);break;case"script":y=eo(n)}Hn.has(y)||(n=p({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:n,as:s},c),Hn.set(y,n),d.querySelector(g)!==null||s==="style"&&d.querySelector(dl(y))||s==="script"&&d.querySelector(fl(y))||(s=d.createElement("link"),Fi(s,"link",n),tt(s),d.head.appendChild(s)))}}function R3(n,s){$r.m(n,s);var c=Ja;if(c&&n){var d=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+Ni(d)+'"][href="'+Ni(n)+'"]',y=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=eo(n)}if(!Hn.has(y)&&(n=p({rel:"modulepreload",href:n},s),Hn.set(y,n),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(fl(y)))return}d=c.createElement("link"),Fi(d,"link",n),tt(d),c.head.appendChild(d)}}}function D3(n,s,c){$r.S(n,s,c);var d=Ja;if(d&&n){var g=as(d).hoistableStyles,y=to(n);s=s||"default";var k=g.get(y);if(!k){var I={loading:0,preload:null};if(k=d.querySelector(dl(y)))I.loading=5;else{n=p({rel:"stylesheet",href:n,"data-precedence":s},c),(c=Hn.get(y))&&yd(n,c);var K=k=d.createElement("link");tt(K),Fi(K,"link",n),K._p=new Promise(function(ct,St){K.onload=ct,K.onerror=St}),K.addEventListener("load",function(){I.loading|=1}),K.addEventListener("error",function(){I.loading|=2}),I.loading|=4,a0(k,s,d)}k={type:"stylesheet",instance:k,count:1,state:I},g.set(y,k)}}}function N3(n,s){$r.X(n,s);var c=Ja;if(c&&n){var d=as(c).hoistableScripts,g=eo(n),y=d.get(g);y||(y=c.querySelector(fl(g)),y||(n=p({src:n,async:!0},s),(s=Hn.get(g))&&xd(n,s),y=c.createElement("script"),tt(y),Fi(y,"link",n),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function O3(n,s){$r.M(n,s);var c=Ja;if(c&&n){var d=as(c).hoistableScripts,g=eo(n),y=d.get(g);y||(y=c.querySelector(fl(g)),y||(n=p({src:n,async:!0,type:"module"},s),(s=Hn.get(g))&&xd(n,s),y=c.createElement("script"),tt(y),Fi(y,"link",n),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},d.set(g,y))}}function Ug(n,s,c,d){var g=(g=Ut.current)?s0(g):null;if(!g)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=to(c.href),c=as(g).hoistableStyles,d=c.get(s),d||(d={type:"style",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){n=to(c.href);var y=as(g).hoistableStyles,k=y.get(n);if(k||(g=g.ownerDocument||g,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,k),(y=g.querySelector(dl(n)))&&!y._p&&(k.instance=y,k.state.loading=5),Hn.has(n)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Hn.set(n,c),y||z3(g,n,c,k.state))),s&&d===null)throw Error(i(528,""));return k}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=eo(c),c=as(g).hoistableScripts,d=c.get(s),d||(d={type:"script",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function to(n){return'href="'+Ni(n)+'"'}function dl(n){return'link[rel="stylesheet"]['+n+"]"}function jg(n){return p({},n,{"data-precedence":n.precedence,precedence:null})}function z3(n,s,c,d){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=n.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Fi(s,"link",c),tt(s),n.head.appendChild(s))}function eo(n){return'[src="'+Ni(n)+'"]'}function fl(n){return"script[async]"+n}function Hg(n,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var d=n.querySelector('style[data-href~="'+Ni(c.href)+'"]');if(d)return s.instance=d,tt(d),d;var g=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),tt(d),Fi(d,"style",g),a0(d,c.precedence,n),s.instance=d;case"stylesheet":g=to(c.href);var y=n.querySelector(dl(g));if(y)return s.state.loading|=4,s.instance=y,tt(y),y;d=jg(c),(g=Hn.get(g))&&yd(d,g),y=(n.ownerDocument||n).createElement("link"),tt(y);var k=y;return k._p=new Promise(function(I,K){k.onload=I,k.onerror=K}),Fi(y,"link",d),s.state.loading|=4,a0(y,c.precedence,n),s.instance=y;case"script":return y=eo(c.src),(g=n.querySelector(fl(y)))?(s.instance=g,tt(g),g):(d=c,(g=Hn.get(y))&&(d=p({},c),xd(d,g)),n=n.ownerDocument||n,g=n.createElement("script"),tt(g),Fi(g,"link",d),n.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,a0(d,c.precedence,n));return s.instance}function a0(n,s,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,y=g,k=0;k<d.length;k++){var I=d[k];if(I.dataset.precedence===s)y=I;else if(y!==g)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(n,s.firstChild))}function yd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function xd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var o0=null;function Gg(n,s,c){if(o0===null){var d=new Map,g=o0=new Map;g.set(c,d)}else g=o0,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(n))return d;for(d.set(n,null),c=c.getElementsByTagName(n),g=0;g<c.length;g++){var y=c[g];if(!(y[Ys]||y[Mi]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var k=y.getAttribute(s)||"";k=n+k;var I=d.get(k);I?I.push(y):d.set(k,[y])}}return d}function qg(n,s,c){n=n.ownerDocument||n,n.head.insertBefore(c,s==="title"?n.querySelector("head > title"):null)}function L3(n,s,c){if(c===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function $g(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function B3(n,s,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=to(d.href),y=s.querySelector(dl(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=l0.bind(n),s.then(n,n)),c.state.loading|=4,c.instance=y,tt(y);return}y=s.ownerDocument||s,d=jg(d),(g=Hn.get(g))&&yd(d,g),y=y.createElement("link"),tt(y);var k=y;k._p=new Promise(function(I,K){k.onload=I,k.onerror=K}),Fi(y,"link",d),c.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(n.count++,c=l0.bind(n),s.addEventListener("load",c),s.addEventListener("error",c))}}var wd=0;function I3(n,s){return n.stylesheets&&n.count===0&&u0(n,n.stylesheets),0<n.count||0<n.imgCount?function(c){var d=setTimeout(function(){if(n.stylesheets&&u0(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+s);0<n.imgBytes&&wd===0&&(wd=62500*b3());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&u0(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>wd?50:800)+s);return n.unsuspend=c,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function l0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)u0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var c0=null;function u0(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,c0=new Map,s.forEach(F3,n),c0=null,l0.call(n))}function F3(n,s){if(!(s.state.loading&4)){var c=c0.get(n);if(c)var d=c.get(null);else{c=new Map,c0.set(n,c);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var k=g[y];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(c.set(k.dataset.precedence,k),d=k)}d&&c.set(null,d)}g=s.instance,k=g.getAttribute("data-precedence"),y=c.get(k)||d,y===d&&c.set(null,g),c.set(k,g),this.count++,d=l0.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),y?y.parentNode.insertBefore(g,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),s.state.loading|=4}}var ml={$$typeof:M,Provider:null,Consumer:null,_currentValue:xt,_currentValue2:xt,_threadCount:0};function P3(n,s,c,d,g,y,k,I,K){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Eo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eo(0),this.hiddenUpdates=Eo(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Yg(n,s,c,d,g,y,k,I,K,ct,St,Et){return n=new P3(n,s,c,k,K,ct,St,Et,I),s=1,y===!0&&(s|=24),y=An(3,null,null,s),n.current=y,y.stateNode=n,s=th(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:d,isDehydrated:c,cache:s},rh(y),n}function Vg(n){return n?(n=Na,n):Na}function Xg(n,s,c,d,g,y){g=Vg(g),d.context===null?d.context=g:d.pendingContext=g,d=fs(s),d.payload={element:c},y=y===void 0?null:y,y!==null&&(d.callback=y),c=ms(n,d,s),c!==null&&(pn(c,n,s),Yo(c,n,s))}function Kg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var c=n.retryLane;n.retryLane=c!==0&&c<s?c:s}}function Sd(n,s){Kg(n,s),(n=n.alternate)&&Kg(n,s)}function Wg(n){if(n.tag===13||n.tag===31){var s=Zs(n,67108864);s!==null&&pn(s,n,67108864),Sd(n,67108864)}}function Zg(n){if(n.tag===13||n.tag===31){var s=Cn();s=ko(s);var c=Zs(n,s);c!==null&&pn(c,n,s),Sd(n,s)}}var h0=!0;function U3(n,s,c,d){var g=X.T;X.T=null;var y=W.p;try{W.p=2,Ad(n,s,c,d)}finally{W.p=y,X.T=g}}function j3(n,s,c,d){var g=X.T;X.T=null;var y=W.p;try{W.p=8,Ad(n,s,c,d)}finally{W.p=y,X.T=g}}function Ad(n,s,c,d){if(h0){var g=_d(d);if(g===null)cd(n,s,d,d0,c),Jg(n,d);else if(G3(g,n,s,c,d))d.stopPropagation();else if(Jg(n,d),s&4&&-1<H3.indexOf(n)){for(;g!==null;){var y=Cr(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var k=on(y.pendingLanes);if(k!==0){var I=y;for(I.pendingLanes|=2,I.entangledLanes|=2;k;){var K=1<<31-Ze(k);I.entanglements[1]|=K,k&=~K}ur(y),(Pe&6)===0&&(Xc=Lt()+500,ll(0))}}break;case 31:case 13:I=Zs(y,2),I!==null&&pn(I,y,2),Wc(),Sd(y,2)}if(y=_d(d),y===null&&cd(n,s,d,d0,c),y===g)break;g=y}g!==null&&d.stopPropagation()}else cd(n,s,d,null,c)}}function _d(n){return n=ku(n),Ed(n)}var d0=null;function Ed(n){if(d0=null,n=Tr(n),n!==null){var s=a(n);if(s===null)n=null;else{var c=s.tag;if(c===13){if(n=o(s),n!==null)return n;n=null}else if(c===31){if(n=u(s),n!==null)return n;n=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return d0=n,null}function Qg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case Zt:return 2;case ve:return 8;case ye:case Gi:return 32;case rr:return 268435456;default:return 32}default:return 32}}var kd=!1,Es=null,ks=null,Ts=null,pl=new Map,gl=new Map,Cs=[],H3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jg(n,s){switch(n){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":pl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(s.pointerId)}}function bl(n,s,c,d,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[g]},s!==null&&(s=Cr(s),s!==null&&Wg(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function G3(n,s,c,d,g){switch(s){case"focusin":return Es=bl(Es,n,s,c,d,g),!0;case"dragenter":return ks=bl(ks,n,s,c,d,g),!0;case"mouseover":return Ts=bl(Ts,n,s,c,d,g),!0;case"pointerover":var y=g.pointerId;return pl.set(y,bl(pl.get(y)||null,n,s,c,d,g)),!0;case"gotpointercapture":return y=g.pointerId,gl.set(y,bl(gl.get(y)||null,n,s,c,d,g)),!0}return!1}function t2(n){var s=Tr(n.target);if(s!==null){var c=a(s);if(c!==null){if(s=c.tag,s===13){if(s=o(c),s!==null){n.blockedOn=s,oc(n.priority,function(){Zg(c)});return}}else if(s===31){if(s=u(c),s!==null){n.blockedOn=s,oc(n.priority,function(){Zg(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){n.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}n.blockedOn=null}function f0(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var c=_d(n.nativeEvent);if(c===null){c=n.nativeEvent;var d=new c.constructor(c.type,c);Eu=d,c.target.dispatchEvent(d),Eu=null}else return s=Cr(c),s!==null&&Wg(s),n.blockedOn=c,!1;s.shift()}return!0}function e2(n,s,c){f0(n)&&c.delete(s)}function q3(){kd=!1,Es!==null&&f0(Es)&&(Es=null),ks!==null&&f0(ks)&&(ks=null),Ts!==null&&f0(Ts)&&(Ts=null),pl.forEach(e2),gl.forEach(e2)}function m0(n,s){n.blockedOn===s&&(n.blockedOn=null,kd||(kd=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,q3)))}var p0=null;function i2(n){p0!==n&&(p0=n,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){p0===n&&(p0=null);for(var s=0;s<n.length;s+=3){var c=n[s],d=n[s+1],g=n[s+2];if(typeof d!="function"){if(Ed(d||c)===null)continue;break}var y=Cr(c);y!==null&&(n.splice(s,3),s-=3,_h(y,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function io(n){function s(K){return m0(K,n)}Es!==null&&m0(Es,n),ks!==null&&m0(ks,n),Ts!==null&&m0(Ts,n),pl.forEach(s),gl.forEach(s);for(var c=0;c<Cs.length;c++){var d=Cs[c];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Cs.length&&(c=Cs[0],c.blockedOn===null);)t2(c),c.blockedOn===null&&Cs.shift();if(c=(n.ownerDocument||n).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],y=c[d+1],k=g[$i]||null;if(typeof y=="function")k||i2(c);else if(k){var I=null;if(y&&y.hasAttribute("formAction")){if(g=y,k=y[$i]||null)I=k.formAction;else if(Ed(g)!==null)continue}else I=k.action;typeof I=="function"?c[d+1]=I:(c.splice(d,3),d-=3),i2(c)}}}function n2(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(k){return g=k})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Td(n){this._internalRoot=n}g0.prototype.render=Td.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var c=s.current,d=Cn();Xg(c,d,n,s,null,null)},g0.prototype.unmount=Td.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Xg(n.current,2,null,n,null,null),Wc(),s[ss]=null}};function g0(n){this._internalRoot=n}g0.prototype.unstable_scheduleHydration=function(n){if(n){var s=$s();n={blockedOn:null,target:n,priority:s};for(var c=0;c<Cs.length&&s!==0&&s<Cs[c].priority;c++);Cs.splice(c,0,n),c===0&&t2(n)}};var r2=t.version;if(r2!=="19.2.0")throw Error(i(527,r2,"19.2.0"));W.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var $3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var b0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!b0.isDisabled&&b0.supportsFiber)try{je=b0.inject($3),wi=b0}catch{}}return yl.createRoot=function(n,s){if(!r(n))throw Error(i(299));var c=!1,d="",g=h1,y=d1,k=f1;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(k=s.onRecoverableError)),s=Yg(n,1,!1,null,null,c,d,null,g,y,k,n2),n[ss]=s.current,ld(n),new Td(s)},yl.hydrateRoot=function(n,s,c){if(!r(n))throw Error(i(299));var d=!1,g="",y=h1,k=d1,I=f1,K=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(I=c.onRecoverableError),c.formState!==void 0&&(K=c.formState)),s=Yg(n,1,!0,s,c??null,d,g,K,y,k,I,n2),s.context=Vg(null),c=s.current,d=Cn(),d=ko(d),g=fs(d),g.callback=null,ms(c,g,d),c=d,s.current.lanes=c,qs(s,c),ur(s),n[ss]=s.current,ld(n),new g0(s)},yl.version="19.2.0",yl}var g2;function i5(){if(g2)return Dd.exports;g2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(t){console.error(t)}}return l(),Dd.exports=e5(),Dd.exports}var n5=i5();const Ji=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),af=[.001,0,0,.001,0,0],Ld=1.35,Mn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Os={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Bl="pdfjs_internal_editor_",ge={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Re={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},r5={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Pi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},U0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ti={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ao={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ru={ERRORS:0,WARNINGS:1,INFOS:5},Il={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},y0={moveTo:0,lineTo:1,curveTo:2,closePath:3},s5={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let su=ru.WARNINGS;function a5(l){Number.isInteger(l)&&(su=l)}function o5(){return su}function au(l){su>=ru.INFOS&&console.info(`Info: ${l}`)}function fe(l){su>=ru.WARNINGS&&console.warn(`Warning: ${l}`)}function Ke(l){throw new Error(l)}function De(l,t){l||Ke(t)}function l5(l){switch(l?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Qb(l,t=null,e=null){if(!l)return null;if(e&&typeof l=="string"&&(e.addDefaultProtocol&&l.startsWith("www.")&&l.match(/\./g)?.length>=2&&(l=`http://${l}`),e.tryConvertEncoding))try{l=f5(l)}catch{}const i=t?URL.parse(l,t):URL.parse(l);return l5(i)?i:null}function Jb(l,t,e=!1){const i=URL.parse(l);return i?(i.hash=t,i.href):e&&Qb(l,"http://example.com")?l.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Se(l,t,e,i=!1){return Object.defineProperty(l,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const xa=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class b2 extends xa{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Bd extends xa{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class of extends xa{constructor(t){super(t,"InvalidPDFException")}}class Y0 extends xa{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class c5 extends xa{constructor(t){super(t,"FormatError")}}class Is extends xa{constructor(t){super(t,"AbortException")}}function t4(l){(typeof l!="object"||l?.length===void 0)&&Ke("Invalid argument for bytesToString");const t=l.length,e=8192;if(t<e)return String.fromCharCode.apply(null,l);const i=[];for(let r=0;r<t;r+=e){const a=Math.min(r+e,t),o=l.subarray(r,a);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Yl(l){typeof l!="string"&&Ke("Invalid argument for stringToBytes");const t=l.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=l.charCodeAt(i)&255;return e}function u5(l){return String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255)}function h5(){const l=new Uint8Array(4);return l[0]=1,new Uint32Array(l.buffer,0,1)[0]===1}function d5(){try{return new Function(""),!0}catch{return!1}}class Hi{static get isLittleEndian(){return Se(this,"isLittleEndian",h5())}static get isEvalSupported(){return Se(this,"isEvalSupported",d5())}static get isOffscreenCanvasSupported(){return Se(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Se(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Se(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Se(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Id=Array.from(Array(256).keys(),l=>l.toString(16).padStart(2,"0"));class Xt{static makeHexColor(t,e,i){return`#${Id[t]}${Id[e]}${Id[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const r=t[i],a=t[i+1];t[i]=r*e[0]+a*e[2]+e[4],t[i+1]=r*e[1]+a*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const r=e[0],a=e[1],o=e[2],u=e[3],h=e[4],f=e[5];for(let m=0;m<6;m+=2){const p=t[i+m],b=t[i+m+1];t[i+m]=p*r+b*o+h,t[i+m+1]=p*a+b*u+f}}static applyInverseTransform(t,e){const i=t[0],r=t[1],a=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/a,t[1]=(-i*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/a}static axialAlignedBoundingBox(t,e,i){const r=e[0],a=e[1],o=e[2],u=e[3],h=e[4],f=e[5],m=t[0],p=t[1],b=t[2],v=t[3];let w=r*m+h,x=w,_=r*b+h,A=_,T=u*p+f,M=T,R=u*v+f,D=R;if(a!==0||o!==0){const L=a*m,z=a*b,q=o*p,U=o*v;w+=q,A+=q,_+=U,x+=U,T+=L,D+=L,R+=z,M+=z}i[0]=Math.min(i[0],w,_,x,A),i[1]=Math.min(i[1],T,R,M,D),i[2]=Math.max(i[2],w,_,x,A),i[3]=Math.max(i[3],T,R,M,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],r=t[1],a=t[2],o=t[3],u=i**2+r**2,h=i*a+r*o,f=a**2+o**2,m=(u+f)/2,p=Math.sqrt(m**2-(u*f-h**2));e[0]=Math.sqrt(m+p||1),e[1]=Math.sqrt(m-p||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>o?null:[i,a,r,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,r,a){a[0]=Math.min(a[0],t,i),a[1]=Math.min(a[1],e,r),a[2]=Math.max(a[2],t,i),a[3]=Math.max(a[3],e,r)}static#t(t,e,i,r,a,o,u,h,f,m){if(f<=0||f>=1)return;const p=1-f,b=f*f,v=b*f,w=p*(p*(p*t+3*f*e)+3*b*i)+v*r,x=p*(p*(p*a+3*f*o)+3*b*u)+v*h;m[0]=Math.min(m[0],w),m[1]=Math.min(m[1],x),m[2]=Math.max(m[2],w),m[3]=Math.max(m[3],x)}static#e(t,e,i,r,a,o,u,h,f,m,p,b){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,e,i,r,a,o,u,h,-p/m,b);return}const v=m**2-4*p*f;if(v<0)return;const w=Math.sqrt(v),x=2*f;this.#t(t,e,i,r,a,o,u,h,(-m+w)/x,b),this.#t(t,e,i,r,a,o,u,h,(-m-w)/x,b)}static bezierBoundingBox(t,e,i,r,a,o,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),this.#e(t,i,a,u,e,r,o,h,3*(-t+3*(i-a)+u),6*(t-2*i+a),3*(i-t),f),this.#e(t,i,a,u,e,r,o,h,3*(-e+3*(r-o)+h),6*(e-2*r+o),3*(r-e),f)}}function f5(l){return decodeURIComponent(escape(l))}let Fd=null,v2=null;function m5(l){return Fd||(Fd=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,v2=new Map([["","t"]])),l.replaceAll(Fd,(t,e,i)=>e?e.normalize("NFKC"):v2.get(i))}function e4(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const l=new Uint8Array(32);return crypto.getRandomValues(l),t4(l)}const Of="pdfjs_internal_id_";function p5(l,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,r,...a]=e;if(!l(i)&&!Number.isInteger(i)||!t(r))return!1;const o=a.length;let u=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;u=!1;break;default:return!1}for(const h of a)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function tn(l,t,e){return Math.min(Math.max(l,t),e)}function i4(l){return Uint8Array.prototype.toBase64?l.toBase64():btoa(t4(l))}function g5(l){return Uint8Array.fromBase64?Uint8Array.fromBase64(l):Yl(atob(l))}typeof Promise.try!="function"&&(Promise.try=function(l,...t){return new Promise(e=>{e(l(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(l){return l.reduce((t,e)=>t+e,0)});class Fl{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(a){if(!a)return;let o=null;const u=a.name;if(u==="#text")o=a.value;else if(Fl.shouldBuildText(u))a?.attributes?.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&e.push({str:o}),!!a.children)for(const h of a.children)r(h)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class n4{static setupStorage(t,e,i,r,a){const o=r.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),a==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",u=>{r.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),a==="print")break;t.addEventListener("input",u=>{r.setValue(e,{value:u.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const u of i.children)u.attributes.value===o.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:a}){const{attributes:o}=e,u=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[h,f]of Object.entries(o))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&a.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,a=t.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:a,linkService:i});const u=a!=="richText",h=t.div;if(h.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=p}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);o.append(p),u&&Fl.shouldBuildText(r.name)&&f.push(p)}return{textDivs:f}}const m=[[r,-1,o]];for(;m.length>0;){const[p,b,v]=m.at(-1);if(b+1===p.children.length){m.pop();continue}const w=p.children[++m.at(-1)[1]];if(w===null)continue;const{name:x}=w;if(x==="#text"){const A=document.createTextNode(w.value);f.push(A),v.append(A);continue}const _=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,x):document.createElement(x);if(v.append(_),w.attributes&&this.setAttributes({html:_,element:w,storage:e,intent:a,linkService:i}),w.children?.length>0)m.push([w,-1,_]);else if(w.value){const A=document.createTextNode(w.value);u&&Fl.shouldBuildText(x)&&f.push(A),_.append(A)}}for(const p of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Vr="http://www.w3.org/2000/svg";class yo{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Vl(l,t="text"){if(kl(l,document.baseURI)){const e=await fetch(l);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",l,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Xl{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:a=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=a,this.offsetY=o,i*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,p,b,v;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,p=0,b=0,v=1;break;case 90:m=0,p=1,b=1,v=0;break;case 270:m=0,p=-1,b=-1,v=0;break;case 0:m=1,p=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,v=-v);let w,x,_,A;m===0?(w=Math.abs(f-t[1])*i+a,x=Math.abs(h-t[0])*i+o,_=(t[3]-t[1])*i,A=(t[2]-t[0])*i):(w=Math.abs(h-t[0])*i+a,x=Math.abs(f-t[1])*i+o,_=(t[2]-t[0])*i,A=(t[3]-t[1])*i),this.transform=[m*i,p*i,b*i,v*i,w-m*i*h-b*i*f,x-p*i*h-v*i*f],this.width=_,this.height=A}get rawDims(){const t=this.viewBox;return Se(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new Xl({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(t,e){const i=[t,e];return Xt.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];Xt.applyTransform(e,this.transform);const i=[t[2],t[3]];return Xt.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return Xt.applyInverseTransform(i,this.transform),i}}class zf extends xa{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function ou(l){const t=l.length;let e=0;for(;e<t&&l[e].trim()==="";)e++;return l.substring(e,e+5).toLowerCase()==="data:"}function Lf(l){return typeof l=="string"&&/\.pdf$/i.test(l)}function b5(l){return[l]=l.split(/[#?]/,1),l.substring(l.lastIndexOf("/")+1)}function v5(l,t="document.pdf"){if(typeof l!="string")return t;if(ou(l))return fe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(l);if(!i)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},a=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(a.test(o))return r(o);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const f of u)if(a.test(f))return r(f);const h=Array.from(i.searchParams.keys()).reverse();for(const f of h)if(a.test(f))return r(f)}if(i.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(h)return r(h[0])}return t}class y2{started=Object.create(null);times=[];time(t){t in this.started&&fe(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||fe(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:a}of this.times)t.push(`${i.padEnd(e)} ${a-r}ms
`);return t.join("")}}function kl(l,t){const e=t?URL.parse(l,t):URL.parse(l);return e?.protocol==="http:"||e?.protocol==="https:"}function Vn(l){l.preventDefault()}function gi(l){l.preventDefault(),l.stopPropagation()}function y5(l){console.log("Deprecated API usage: "+l)}class lf{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,f==="-"?(o+=m,u+=p):f==="+"&&(o-=m,u-=p),new Date(Date.UTC(i,r,a,o,u,h))}}function x5(l,{scale:t=1,rotation:e=0}){const{width:i,height:r}=l.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new Xl({viewBox:a,userUnit:1,scale:t,rotation:e})}function Kl(l){if(l.startsWith("#")){const t=parseInt(l.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return l.startsWith("rgb(")?l.slice(4,-1).split(",").map(t=>parseInt(t)):l.startsWith("rgba(")?l.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(fe(`Not a valid color format: "${l}"`),[0,0,0])}function w5(l){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of l.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;l.set(e,Kl(i))}t.remove()}function oi(l){const{a:t,b:e,c:i,d:r,e:a,f:o}=l.getTransform();return[t,e,i,r,a,o]}function fr(l){const{a:t,b:e,c:i,d:r,e:a,f:o}=l.getTransform().invertSelf();return[t,e,i,r,a,o]}function ga(l,t,e=!1,i=!0){if(t instanceof Xl){const{pageWidth:r,pageHeight:a}=t.rawDims,{style:o}=l,u=Hi.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${a}px`,m=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,p=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(o.width=m,o.height=p):(o.width=p,o.height=m)}i&&l.setAttribute("data-main-rotation",t.rotation)}class wr{constructor(){const{pixelRatio:t}=wr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,r,a=-1){let o=1/0,u=1/0,h=1/0;i=wr.capPixels(i,a),i>0&&(o=Math.sqrt(i/(t*e))),r!==-1&&(u=r/t,h=r/e);const f=Math.min(o,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const cf=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class S5{static get isDarkMode(){return Se(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class A5{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),Se(this,"commentForegroundColor",Kl(i))}}function _5(l,t,e,i){i=Math.min(Math.max(i??1,0),1);const r=255*(1-i);return l=Math.round(l*i+r),t=Math.round(t*i+r),e=Math.round(e*i+r),[l,t,e]}function x2(l,t){const e=l[0]/255,i=l[1]/255,r=l[2]/255,a=Math.max(e,i,r),o=Math.min(e,i,r),u=(a+o)/2;if(a===o)t[0]=t[1]=0;else{const h=a-o;switch(t[1]=u<.5?h/(a+o):h/(2-a-o),a){case e:t[0]=((i-r)/h+(i<r?6:0))*60;break;case i:t[0]=((r-e)/h+2)*60;break;case r:t[0]=((e-i)/h+4)*60;break}}t[2]=u}function uf(l,t){const e=l[0],i=l[1],r=l[2],a=(1-Math.abs(2*r-1))*i,o=a*(1-Math.abs(e/60%2-1)),u=r-a/2;switch(Math.floor(e/60)){case 0:t[0]=a+u,t[1]=o+u,t[2]=u;break;case 1:t[0]=o+u,t[1]=a+u,t[2]=u;break;case 2:t[0]=u,t[1]=a+u,t[2]=o+u;break;case 3:t[0]=u,t[1]=o+u,t[2]=a+u;break;case 4:t[0]=o+u,t[1]=u,t[2]=a+u;break;case 5:case 6:t[0]=a+u,t[1]=u,t[2]=o+u;break}}function w2(l){return l<=.03928?l/12.92:((l+.055)/1.055)**2.4}function S2(l,t,e){uf(l,e),e.map(w2);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];uf(t,e),e.map(w2);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const A2=new Map;function E5(l,t){const e=l[0]+l[1]*256+l[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=A2.get(e);if(i)return i;const r=new Float32Array(9),a=r.subarray(0,3),o=r.subarray(3,6);x2(l,o);const u=r.subarray(6,9);x2(t,u);const h=u[2]<.5,f=h?12:4.5;if(o[2]=h?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),S2(o,u,a)<f){let m,p;h?(m=o[2],p=1):(m=0,p=o[2]);const b=.005;for(;p-m>b;){const v=o[2]=(m+p)/2;h===S2(o,u,a)<f?m=v:p=v}o[2]=h?p:m}return uf(o,a),i=Xt.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),A2.set(e,i),i}function r4({html:l,dir:t,className:e},i){const r=document.createDocumentFragment();if(typeof l=="string"){const a=document.createElement("p");a.dir=t||"auto";const o=l.split(/(?:\r\n?|\n)/);for(let u=0,h=o.length;u<h;++u){const f=o[u];a.append(document.createTextNode(f)),u<h-1&&a.append(document.createElement("br"))}r.append(a)}else n4.render({xfaHtml:l,div:r,intent:"richText"});r.firstChild.classList.add("richText",e),i.append(r)}class Nl{#t=null;#e=null;#n;#i=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(t){this.#n=t,Nl.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Vn,{signal:e}),t.addEventListener("pointerdown",Nl.#l,{signal:e}));const i=this.#i=document.createElement("div");i.className="buttons",t.append(i);const r=this.#n.toolbarPosition;if(r){const{style:a}=t,o=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,gi(t)}#h(t){this.#n._focusEventsAllowed=!0,gi(t)}#f(t){const e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Vn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#n,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Nl.#c[t]),this.#f(i)&&i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#i.append(e,this.#g),this.#a=t}addComment(t,e=null){if(this.#r)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const r=this.#s=this.#g;e?(this.#i.insertBefore(i,e),this.#i.insertBefore(r,e)):this.#i.append(i,r),this.#r=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#i.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#n);this.#f(e),this.#i.append(e,this.#g)}removeButton(t){switch(t){case"comment":this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const r=this.#i.querySelector(i);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class k5{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Vn,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#n.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#a(t,e){let i=0,r=0;for(const a of t){const o=a.y+a.height;if(o<i)continue;const u=a.x+(e?a.width:0);if(o>i){r=u,i=o;continue}e?u>r&&(r=u):u<r&&(r=u)}return[e?1-r:r,i]}show(t,e,i){const[r,a]=this.#a(e,i),{style:o}=this.#e||=this.#i();t.append(this.#e),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(t,e,i,r){const a=document.createElement("button");a.classList.add("basic",t),a.tabIndex=0,a.setAttribute("data-l10n-id",e);const o=document.createElement("span");a.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",i);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(a.addEventListener("contextmenu",Vn,{signal:u}),a.addEventListener("click",r,{signal:u})),this.#t.append(a)}}function s4(l,t,e){for(const i of e)t.addEventListener(i,l[i].bind(l))}class T5{#t=0;get id(){return`${Bl}${this.#t++}`}}class Bf{#t=e4();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Se(this,"_isSVGFittingCanvas",a)}async#i(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(i.url=e,r=await Vl(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const a=Bf._isSVGFittingCanvas,o=new FileReader,u=new Image,h=new Promise((f,m)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,f()},o.onload=async()=>{const p=i.svgUrl=o.result;u.src=await a?`${p}#svgView(preserveAspectRatio(none))`:p},u.onerror=o.onerror=m});o.readAsDataURL(r),await h}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){fe(r),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:r,type:a}=t;return this.#i(`${e}_${i}_${r}_${a}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,e){const i=await e;return this.#i(t,i)}async getFromId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){const e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;const e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class C5{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:e,post:i,type:a};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(o&&this.#t[this.#i].type===a){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const f=this.#i+1;f===this.#n?this.#t.splice(0,1):(this.#i=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#i];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#i-e),this.#i=e;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class Wl{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Hi.platform;for(const[i,r,a={}]of t)for(const o of i){const u=o.startsWith("mac+");e&&u?(this.callbacks.set(o.slice(4),{callback:r,options:a}),this.allKeys.add(o.split("+").at(-1))):!e&&!u&&(this.callbacks.set(o,{callback:r,options:a}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:r,options:{bubbles:a=!1,args:o=[],checker:u=null}}=i;u&&!u(t,e)||(r.bind(t,...o,e)(),a||gi(e))}}class If{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return w5(t),Se(this,"_colors",t)}convert(t){const e=Kl(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((a,o)=>a===e[o]))return If._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?Xt.makeHexColor(...e):t}}class Fs{#t=new AbortController;#e=null;#n=null;#i=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new C5;#l=null;#d=null;#h=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#b=!1;#y=!1;#v=!1;#E=null;#A=null;#x=null;#T=null;#S=!1;#_=null;#R=new T5;#C=!1;#M=!1;#I=!1;#N=null;#z=null;#F=null;#L=null;#q=null;#k=ge.NONE;#w=new Set;#O=null;#P=null;#j=null;#V=null;#Y=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#B=null;#$=null;#Q=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Fs.prototype,e=o=>o.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Se(this,"_keyboardManager",new Wl([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#$.contains(u)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,i,r,a,o,u,h,f,m,p,b,v,w,x,_){const A=this._signal=this.#t.signal;this.#$=t,this.#Q=e,this.#J=i,this.#r=r,this.#l=a,this.#P=o,this.#Y=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:A}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),u._on("setpreference",this.onSetPreference.bind(this),{signal:A}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:A}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:A}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:A}),this.#lt(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#E=h.filterFactory,this.#j=f,this.#T=m||null,this.#b=p,this.#y=b,this.#v=v,this.#q=w||null,this.viewParameters={realScale:yo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=_!==!1,a?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#a.values())t.destroy();this.#a.clear(),this.#i.clear(),this.#p.clear(),this.#L?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#P?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#y}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Se(this,"hcmFilter",this.#j?this.#E.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return Se(this,"direction",getComputedStyle(this.#$).direction)}get _highlightColors(){return Se(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Se(this,"highlightColors",null);const e=new Map,i=!!this.#j;for(const[r,a]of t){const o=r.endsWith("_HCM");if(i&&o){e.set(r.replace("_HCM",""),a);continue}!i&&!o&&e.set(r,a)}return Se(this,"highlightColors",e)}get highlightColorNames(){return Se(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#r?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,r){this.#l?.showDialog(this,t,e,i,r)}selectComment(t,e){this.#a.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#a.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),r=a=>{a.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await i}getSignature(t){this.#P?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#P}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#v=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#$.focus()}findParent(t,e){for(const i of this.#a.values()){const{x:r,y:a,width:o,height:u}=i.div.getBoundingClientRect();if(t>=r&&t<=r+o&&e>=a&&e<=a+u)return i}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*yo.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#a.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:a,focusNode:o,focusOffset:u}=i,h=i.toString(),m=this.#Z(i).closest(".textLayer"),p=this.getSelectionBoxes(m);if(!p)return;i.empty();const b=this.#tt(m),v=this.#k===ge.NONE,w=()=>{const x=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:r,anchorOffset:a,focusNode:o,focusOffset:u,text:h});v&&this.showAllEditors("highlight",!0,!0),e&&x?.editComment()};if(v){this.switchToMode(ge.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#at(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Z(t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(this.#_||=new k5(this),this.#_.show(i,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${Bl}${t}`,i=this.#s.getRawValue(e);return i&&this.#s.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#_?.hide(),this.#O=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const r=this.#Z(t).closest(".textLayer");if(!r){this.#O&&(this.#_?.hide(),this.#O=null,this.#D({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#O=e,this.#D({hasSelectedText:!0}),!(this.#k!==ge.HIGHLIGHT&&this.#k!==ge.NONE)&&(this.#k===ge.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#k===ge.HIGHLIGHT?this.#tt(r):null;if(a?.toggleDrawing(),this.#M){const o=new AbortController,u=this.combinedSignal(o),h=f=>{f.type==="pointerup"&&f.button!==0||(o.abort(),a?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else a?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#k===ge.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#at()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#z=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#z)return;const[t,e]=this.#z;this.#z=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#N)return;this.#N=new AbortController;const t=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#N?.abort(),this.#N=null}#it(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#nt(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#it()}removeEditListeners(){this.#ht(),this.#nt()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#w){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const o of this.#u)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){fe(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const h of i){const f=await r.deserialize(h);if(!f)return;a.push(f)}const o=()=>{for(const h of a)this.#rt(h);this.#st(a)},u=()=>{for(const h of a)h.remove()};this.addCommands({cmd:o,undo:u,mustExec:!0})}catch(a){fe(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#k!==ge.NONE&&!this.isEditorHandlingKeyboard&&Fs._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(t){Object.entries(t).some(([i,r])=>this.#X[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#k===ge.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Re.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#it(),this.#D({isEditing:this.#k!==ge.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#nt(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(t){return this.#a.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#a.set(t.pageIndex,t),this.#C?t.enable():t.disable()}removeLayer(t){this.#a.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,r=!1,a=!1){if(this.#k!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#k===ge.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#k=t,t===ge.NONE){this.setEditingState(!1),this.#mt();for(const o of this.#i.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const o of this.#i.values())o.addStandaloneCommentButton();t===ge.SIGNATURE&&await this.#P?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const o of this.#a.values())o.updateMode(t);if(t===ge.POPUP){this.#n||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const o=new Set,u=[];for(const h of this.#i.values()){const{annotationElementId:f,hasComment:m,deleted:p}=h;f&&o.add(f),m&&!p&&u.push(h.getData())}for(const h of this.#n){const{id:f,popupRef:m,contentsObj:p}=h;m&&p?.str&&!o.has(f)&&!this.#g.has(f)&&u.push(h)}this.#l?.showSidebar(u)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const o of this.#i.values())o.uid===e?(this.setSelected(o),a?o.editComment():r?o.enterInEditMode():o.focus()):o.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#k&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Re.CREATE:this.currentLayer.addNewEditor(e);return;case Re.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#V||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#w)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const a of this.#i.values())a.editorType===t&&a.show(e);(this.#V?.get(Re.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Re.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#I!==t){this.#I=t;for(const e of this.#a.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#C){this.#C=!0;const t=[];for(const e of this.#a.values())t.push(e.enable());await Promise.all(t);for(const e of this.#i.values())e.enable()}}#mt(){if(this.unselectAll(),this.#C){this.#C=!1;for(const t of this.#a.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const e of this.#i.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#rt(t){const e=this.#a.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#pt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],i=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},r=()=>{for(const a of e)this.#rt(a)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#st(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#st(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#k!==ge.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[r,a]=this.#H,o=[...this.#w],u=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of o)this.#i.has(h.id)&&(h.translateInPage(r,a),h.translationDone())},undo:()=>{for(const h of o)this.#i.has(h.id)&&(h.translateInPage(-r,-a),h.translationDone())},mustExec:!1})},u);for(const h of o)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#w)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:r,y:a,pageIndex:o},u]of t)u.newX=r,u.newY=a,u.newPageIndex=o,e||=r!==u.savedX||a!==u.savedY||o!==u.savedPageIndex;if(!e)return!1;const i=(r,a,o,u)=>{if(this.#i.has(r.id)){const h=this.#a.get(u);h?r._setParentAndPosition(h,a,o):(r.pageIndex=u,r.x=a,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:o,newPageIndex:u}]of t)i(r,a,o,u)},undo:()=>{for(const[r,{savedX:a,savedY:o,savedPageIndex:u}]of t)i(r,a,o,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const i of this.#m.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#k}isEditingMode(){return this.#k!==ge.NONE}get imageManager(){return Se(this,"imageManager",new Bf)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:r,width:a,height:o}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,m,p,b)=>({x:(m-r)/o,y:1-(f+p-i)/a,width:b/o,height:p/a});break;case"180":u=(f,m,p,b)=>({x:1-(f+p-i)/a,y:1-(m+b-r)/o,width:p/a,height:b/o});break;case"270":u=(f,m,p,b)=>({x:1-(m+b-r)/o,y:(f-i)/a,width:b/o,height:p/a});break;default:u=(f,m,p,b)=>({x:(f-i)/a,y:(m-r)/o,width:p/a,height:b/o});break}const h=[];for(let f=0,m=e.rangeCount;f<m;f++){const p=e.getRangeAt(f);if(!p.collapsed)for(const{x:b,y:v,width:w,height:x}of p.getClientRects())w===0||x===0||h.push(u(b,v,w,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#s.getRawValue(e);i&&(this.#k===ge.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const r=this.#L?.get(t);r&&(r.setCanvas(e,i),this.#L.delete(t))}addMissingCanvas(t,e){(this.#L||=new Map).set(t,e)}}class br{#t=null;#e=!1;#n=null;#i=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,br.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){br._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#i=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",br.#f.missing),e.setAttribute("data-l10n-id",br.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",Vn,{signal:i}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#s=!0,r(a))},{signal:i}),await this.#m(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await br._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:a=!1}){i&&(this.#l=i,this.#d=r),!(this.#t===t&&this.#e===e)&&(a||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#n&&(!t&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#a=null,this.#o?.remove(),this.#o=null}async#m(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",br.#f[this.#g]),this.#i?.setAttribute("data-l10n-id",br.#f[`${this.#g}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#a;if(!e){this.#a=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const r=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:a}),t.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:a})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class x0{#t=null;#e=null;#n=!1;#i=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#i.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(i.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:r,y:a,width:o,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/o,(e+i-a)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=this.#i._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",Vn,{signal:i}),e&&(t.addEventListener("focusin",a=>{this.#i._focusEventsAllowed=!1,gi(a)},{capture:!0,signal:i}),t.addEventListener("focusout",a=>{this.#i._focusEventsAllowed=!0,gi(a)},{capture:!0,signal:i})),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(this.#n=!0,r(a))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,r;if(e)[i,r]=e;else{[i,r]=this.#i.commentButtonPosition;const{width:m,height:p,x:b,y:v}=this.#i;i=b+i*m,r=v+r*p}const a=this.#i.parent.boundingClientRect,{x:o,y:u,width:h,height:f}=a;this.#i._uiManager.editComment(this.#i,o+i*h,u+r*f,{...t,parentDimensions:a})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#r=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#a=t,this.data=t,this.#o=null,this.#r=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#r=null,this.#o=null,this.#i=null,this.#n=!1,this.#c=!1}}class lu{#t;#e=!1;#n=null;#i;#a;#r;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:a=null,onPinchEnd:o=null,signal:u}){this.#t=t,this.#n=i,this.#i=e,this.#a=r,this.#r=a,this.#s=o,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/wr.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,a=AbortSignal.any([this.#c,r.signal]),o=this.#t,u={capture:!0,signal:a,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(gi(f),h(f))},u),o.addEventListener("pointerup",h,u),o.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),a=this.#t,o={signal:r,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),o);const u=this.#m.bind(this);a.addEventListener("touchend",u,o),a.addEventListener("touchcancel",u,o),o.capture=!0,a.addEventListener("pointerdown",gi,o),a.addEventListener("pointermove",gi,o),a.addEventListener("pointercancel",gi,o),a.addEventListener("pointerup",gi,o),this.#a?.()}if(gi(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;gi(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:a}=e,{screenX:o,screenY:u}=i,h=this.#l,{touch0X:f,touch0Y:m,touch1X:p,touch1Y:b}=h,v=p-f,w=b-m,x=o-r,_=u-a,A=Math.hypot(x,_)||1,T=Math.hypot(v,w)||1;if(!this.#e&&Math.abs(T-A)<=lu.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=a,h.touch1X=o,h.touch1Y=u,!this.#e){this.#e=!0;return}const M=[(r+o)/2,(a+u)/2];this.#r?.(M,T,A)}#m(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(gi(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ne{#t=null;#e=null;#n=null;#i=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#b=!1;#y=!1;#v=null;#E=0;#A=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#_=ne._zIndex++;static _borderLineWidth=-1;static _colorManager=new If;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ne.prototype._resizeWithKeyboard,e=Fs.TRANSLATE_SMALL,i=Fs.TRANSLATE_BIG;return Se(this,"_resizerKeyboardManager",new Wl([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],ne.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,o];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Se(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new M5({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ne._l10n??=t,ne._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ne._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ne._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ke("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[a,o]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/a,this.y=(e+r)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,r]=this.parentDimensions;this.setAt(t*i,e*r,this.width*i,this.height*r),this._onTranslated()}#R([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[r,a]}=this;if(this.x+=t/r,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[h,f]=this.getBaseTranslation();o+=h,u+=f;const{style:m}=i;m.left=`${(100*o).toFixed(2)}%`,m.top=`${(100*u).toFixed(2)}%`,this._onTranslating(o,u),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=ne,r=i/t,a=i/e;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:a,y:o,width:u,height:h}=this;if(u*=i,h*=r,a*=i,o*=r,this._mustFixPosition)switch(t){case 0:a=tn(a,0,i-u),o=tn(o,0,r-h);break;case 90:a=tn(a,0,i-h),o=tn(o,u,r);break;case 180:a=tn(a,u,i),o=tn(o,h,r);break;case 270:a=tn(a,h,i),o=tn(o,0,r-u);break}this.x=a/=i,this.y=o/=r;const[f,m]=this.getBaseTranslation();a+=f,o+=m,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#C(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return ne.#C(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return ne.#C(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#N.bind(this,i),{signal:e}),r.addEventListener("contextmenu",Vn,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#c)}#N(t,e){e.preventDefault();const{isMac:i}=Hi.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",gi,{passive:!1,signal:o}),window.addEventListener("contextmenu",Vn,{signal:o}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})}#z(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=this.#d;this.#d=null;const a=this.x,o=this.y,u=this.width,h=this.height;a===t&&o===e&&u===i&&h===r||this.addCommands({cmd:this.#z.bind(this,a,o,u,h),undo:this.#z.bind(this,t,e,i,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#L(t,e){const[i,r]=this.parentDimensions,a=this.x,o=this.y,u=this.width,h=this.height,f=ne.MIN_SIZE/i,m=ne.MIN_SIZE/r,p=this.#M(this.rotation),b=(X,W)=>[p[0]*X+p[2]*W,p[1]*X+p[3]*W],v=this.#M(360-this.rotation),w=(X,W)=>[v[0]*X+v[2]*W,v[1]*X+v[3]*W];let x,_,A=!1,T=!1;switch(t){case"topLeft":A=!0,x=(X,W)=>[0,0],_=(X,W)=>[X,W];break;case"topMiddle":x=(X,W)=>[X/2,0],_=(X,W)=>[X/2,W];break;case"topRight":A=!0,x=(X,W)=>[X,0],_=(X,W)=>[0,W];break;case"middleRight":T=!0,x=(X,W)=>[X,W/2],_=(X,W)=>[0,W/2];break;case"bottomRight":A=!0,x=(X,W)=>[X,W],_=(X,W)=>[0,0];break;case"bottomMiddle":x=(X,W)=>[X/2,W],_=(X,W)=>[X/2,0];break;case"bottomLeft":A=!0,x=(X,W)=>[0,W],_=(X,W)=>[X,0];break;case"middleLeft":T=!0,x=(X,W)=>[0,W/2],_=(X,W)=>[X,W/2];break}const M=x(u,h),R=_(u,h);let D=b(...R);const L=ne._round(a+D[0]),z=ne._round(o+D[1]);let q=1,U=1,it,ut;if(e.fromKeyboard)({deltaX:it,deltaY:ut}=e);else{const{screenX:X,screenY:W}=e,[xt,bt]=this.#l;[it,ut]=this.screenToPageTranslation(X-xt,W-bt),this.#l[0]=X,this.#l[1]=W}if([it,ut]=w(it/i,ut/r),A){const X=Math.hypot(u,h);q=U=Math.max(Math.min(Math.hypot(R[0]-M[0]-it,R[1]-M[1]-ut)/X,1/u,1/h),f/u,m/h)}else T?q=tn(Math.abs(R[0]-M[0]-it),f,1)/u:U=tn(Math.abs(R[1]-M[1]-ut),m,1)/h;const H=ne._round(u*q),rt=ne._round(h*U);D=b(..._(H,rt));const N=L-D[0],at=z-D[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=H,this.height=rt,this.x=N,this.y=at,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new Nl(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(br.initialize(ne._l10n),this.#n=new br(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.#i||=new x0(this)}addStandaloneCommentButton(){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#i.renderForStandalone(),this.div.append(this.#a))}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:r}}=this.#i;return{text:e,richText:t,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new x0(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#i||=new x0(this),this.#i.setInitialText(t,i),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new x0(this),this.#i.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[a]=this.pageDimensions,[o]=this.pageTranslation,u=o+a+1,h=r-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#i.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#r?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#j();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[r,a]=this.getInitialTranslation();return this.translate(r,a),s4(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new lu({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#k.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#k(t,e,i){let a=.7*(i/e)+1-.7;if(a===1)return;const o=this.#M(this.rotation),u=(L,z)=>[o[0]*L+o[2]*z,o[1]*L+o[3]*z],[h,f]=this.parentDimensions,m=this.x,p=this.y,b=this.width,v=this.height,w=ne.MIN_SIZE/h,x=ne.MIN_SIZE/f;a=Math.max(Math.min(a,1/b,1/v),w/b,x/v);const _=ne._round(b*a),A=ne._round(v*a);if(_===b&&A===v)return;this.#u||=[m,p,b,v];const T=u(b/2,v/2),M=ne._round(m+T[0]),R=ne._round(p+T[1]),D=u(_/2,A/2);this.x=M-D[0],this.y=R-D[1],this.width=_,this.height=A,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=Hi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#P(t);return}this.#O(t)}#O(t){const{isMac:e}=Hi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:a},u=f=>{r.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#O(f),i&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#A=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:p,pointerId:b}=f;if(b!==this.#s){gi(f);return}const[v,w]=this.screenToPageTranslation(m-this.#E,p-this.#A);this.#E=m,this.#A=p,this._uiManager.dragSelectedEditors(v,w)},o),window.addEventListener("touchmove",gi,o),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&u(f),gi(f)},o));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}gi(f)};window.addEventListener("pointerup",h,{signal:a}),window.addEventListener("blur",h,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[a,o]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/r,m=e/r,p=this.x*a,b=this.y*o,v=this.width*a,w=this.height*o;switch(i){case 0:return[p+f+u,o-b-m-w+h,p+f+v+u,o-b-m+h];case 90:return[p+m+u,o-b+f+h,p+m+w+u,o-b+f+v+h];case 180:return[p-f-v+u,o-b+m+h,p-f+u,o-b+m+w+h];case 270:return[p-m-w+u,o-b-f-v+h,p-m+u,o-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,a,o]=t,u=a-i,h=o-r;switch(this.rotation){case 0:return[i,e-o,u,h];case 90:return[i,e-r,h,u];case 180:return[a,e-r,u,h];case 270:return[a,e-o,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ne._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:r,deleted:a,richText:o},uid:u,pageIndex:h,creationDate:f,modificationDate:m}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:f,modificationDate:i||m,popupRef:!a,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#y}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return e<o&&r>0&&t<a&&i>0}#j(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#j()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[a,o]=r.pageDimensions,[u,h,f,m]=r.getRectInCurrentCoords(t.rect,o);return r.x=u/a,r.y=h/o,r.width=f/a,r.height=m/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#B(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,r,a,o]=this.getPDFRect();return[ne._round(i+(a-i)*t),ne._round(r+(o-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const o=this.#V.bind(this),u=this.#Y.bind(this),h=this._uiManager._signal;for(const f of this.#e){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",o,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#X.bind(this,m),{signal:h}),f.setAttribute("data-l10n-id",ne._l10nResizer[m])}}const i=this.#e[0];let r=0;for(const o of e){if(o===i)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(a!==r){if(a<r)for(let u=0;u<r-a;u++)this.#c.append(this.#c.firstChild);else if(a>r)for(let u=0;u<a-r;u++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const u of e){const f=this.#e[o++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ne._l10nResizer[f])}}this.#H(0),this.#y=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#V(t){ne._resizerKeyboardManager.exec(this,t)}#Y(t){this.#y&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#X(t){this.#g=this.#y?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#y&&this.#L(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#B(){this.#y=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:i}=t;let r=this.#x.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(i),this.#x.size===0&&(this.#x=null)},ne._telemetryTimeout),this.#x.set(i,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class M5 extends ne{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const _2=3285377520,Gn=4294901760,mr=65535;class a4{constructor(t){this.h1=t?t&4294967295:_2,this.h2=t?t&4294967295:_2}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let x=0,_=t.length;x<_;x++){const A=t.charCodeAt(x);A<=255?e[i++]=A:(e[i++]=A>>>8,e[i++]=A&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,a=i-r*4,o=new Uint32Array(e.buffer,0,r);let u=0,h=0,f=this.h1,m=this.h2;const p=3432918353,b=461845907,v=p&mr,w=b&mr;for(let x=0;x<r;x++)x&1?(u=o[x],u=u*p&Gn|u*v&mr,u=u<<15|u>>>17,u=u*b&Gn|u*w&mr,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=o[x],h=h*p&Gn|h*v&mr,h=h<<15|h>>>17,h=h*b&Gn|h*w&mr,m^=h,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,a){case 3:u^=e[r*4+2]<<16;case 2:u^=e[r*4+1]<<8;case 1:u^=e[r*4],u=u*p&Gn|u*v&mr,u=u<<15|u>>>17,u=u*b&Gn|u*w&mr,r&1?f^=u:m^=u}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Gn|t*36045&mr,e=e*4283543511&Gn|((e<<16|t>>>16)*2950163797&Gn)>>>16,t^=e>>>1,t=t*444984403&Gn|t*60499&mr,e=e*3301882366&Gn|((e<<16|t>>>16)*3120437893&Gn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const hf=Object.freeze({map:null,hash:"",transfer:void 0});class Ff{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#i.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#i.get(t)}remove(t){const e=this.#i.get(t);if(e!==void 0&&(e instanceof ne&&this.#n.delete(e.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#i.values())if(i instanceof ne)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#i.get(t);let r=!1;if(i!==void 0)for(const[a,o]of Object.entries(e))i[a]!==o&&(r=!0,i[a]=o);else r=!0,this.#i.set(t,e);r&&this.#a(),e instanceof ne&&((this.#n||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#a(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new o4(this)}get serializable(){if(this.#i.size===0)return hf;const t=new Map,e=new a4,i=[],r=Object.create(null);let a=!1;for(const[o,u]of this.#i){const h=u instanceof ne?u.serialize(!1,r):u;h&&(t.set(o,h),e.update(`${o}:${JSON.stringify(h)}`),a||=!!h.bitmap)}if(a)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:hf}get editorStats(){let t=null;const e=new Map;let i=0,r=0;for(const a of this.#i.values()){if(!(a instanceof ne)){a.popup&&(a.popup.deleted?r+=1:i+=1);continue}a.isCommentDeleted?r+=1:a.hasEditedComment&&(i+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:u}=o;e.has(u)||e.set(u,Object.getPrototypeOf(a).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,m]of Object.entries(o)){if(f==="type")continue;let p=h.get(f);p||(p=new Map,h.set(f,p));const b=p.get(m)??0;p.set(m,b+1)}}if((r>0||i>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:i}),!t)return null;for(const[a,o]of e)t[a]=o.computeTelemetryFinalData(t[a]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#n?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const e of this.#n.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class o4 extends Ff{#t;constructor(t){super();const{map:e,hash:i,transfer:r}=t.serializable,a=structuredClone(e,r?{transfer:r}:null);this.#t={map:a,hash:i,transfer:r}}get print(){Ke("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Se(this,"modifiedIds",{ids:new Set,hash:""})}}class R5{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(De(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:a,style:o}=t,u=new FontFace(r,a,o);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),i?.(t)}catch{fe(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Ke("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw fe(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Se(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Se(this,"isSyncFontLoadingSupported",Ji||Hi.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(De(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Se(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(R,D){return R.charCodeAt(D)<<24|R.charCodeAt(D+1)<<16|R.charCodeAt(D+2)<<8|R.charCodeAt(D+3)&255}function r(R,D,L,z){const q=R.substring(0,D),U=R.substring(D+L);return q+z+U}let a,o;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function m(R,D){if(++f>30){fe("Load test font never loaded."),D();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(m.bind(null,R,D))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,p.length,p);const w=16,x=1482184792;let _=i(b,w);for(a=0,o=p.length-3;a<o;a+=4)_=_-x+i(p,a)|0;a<p.length&&(_=_-x+i(p+"XXX",a)|0),b=r(b,w,4,u5(_));const A=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${p}";src:${A}}`;this.insertRule(T);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const R of[t.loadedName,p]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=R,M.append(D)}this._document.body.append(M),m(p,()=>{M.remove(),e.complete()})}}class D5{#t;constructor(t,e=null,i,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${i4(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(o){fe(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=a}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function N5(l){if(l instanceof URL)return l.href;if(typeof l=="string"){if(Ji)return l;const t=URL.parse(l,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function O5(l){if(Ji&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return Yl(l);if(l instanceof ArrayBuffer||ArrayBuffer.isView(l)||typeof l=="object"&&!isNaN(l?.length))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function w0(l){if(typeof l!="string")return null;if(l.endsWith("/"))return l;throw new Error(`Invalid factory url: "${l}" must include trailing slash.`)}const df=l=>typeof l=="object"&&Number.isInteger(l?.num)&&l.num>=0&&Number.isInteger(l?.gen)&&l.gen>=0,z5=l=>typeof l=="object"&&typeof l?.name=="string",L5=p5.bind(null,df,z5);class B5{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:a}=i;if(a.aborted){fe("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);r=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const S0={DATA:1,ERROR:2},ki={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function E2(){}function bn(l){if(l instanceof Is||l instanceof of||l instanceof b2||l instanceof Y0||l instanceof Bd)return l;switch(l instanceof Error||typeof l=="object"&&l!==null||Ke('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),l.name){case"AbortException":return new Is(l.message);case"InvalidPDFException":return new of(l.message);case"PasswordException":return new b2(l.message,l.code);case"ResponseException":return new Y0(l.message,l.status,l.missing);case"UnknownErrorException":return new Bd(l.message,l.details)}return new Bd(l.message,l.toString())}class Tl{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===S0.DATA)r.resolve(t.data);else if(t.callback===S0.ERROR)r.reject(bn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(o){a.postMessage({sourceName:i,targetName:r,callback:S0.DATA,callbackId:t.callbackId,data:o})},function(o){a.postMessage({sourceName:i,targetName:r,callback:S0.ERROR,callbackId:t.callbackId,reason:bn(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(o){a.reject(o)}return a.promise}sendWithStream(t,e,i,r){const a=this.streamId++,o=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:u,action:t,streamId:a,data:e,desiredSize:f.desiredSize},r),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,h.postMessage({sourceName:o,targetName:u,stream:ki.PULL,streamId:a,desiredSize:f.desiredSize}),m.promise},cancel:f=>{De(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:o,targetName:u,stream:ki.CANCEL,streamId:a,reason:bn(f)}),m.promise}},i)}#n(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,o=this,u=this.actionHandler[t.action],h={enqueue(f,m=1,p){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:ki.ENQUEUE,streamId:e,chunk:f},p)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:ki.CLOSE,streamId:e}),delete o.streamSinks[e])},error(f){De(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:ki.ERROR,streamId:e,reason:bn(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){a.postMessage({sourceName:i,targetName:r,stream:ki.START_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:ki.START_COMPLETE,streamId:e,reason:bn(f)})})}#i(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,o=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case ki.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(bn(t.reason));break;case ki.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(bn(t.reason));break;case ki.PULL:if(!u){a.postMessage({sourceName:i,targetName:r,stream:ki.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||E2).then(function(){a.postMessage({sourceName:i,targetName:r,stream:ki.PULL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:ki.PULL_COMPLETE,streamId:e,reason:bn(f)})});break;case ki.ENQUEUE:if(De(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case ki.CLOSE:if(De(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#a(o,e);break;case ki.ERROR:De(o,"error should have stream controller"),o.controller.error(bn(t.reason)),this.#a(o,e);break;case ki.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(bn(t.reason)),this.#a(o,e);break;case ki.CANCEL:if(!u)break;const h=bn(t.reason);Promise.try(u.onCancel||E2,h).then(function(){a.postMessage({sourceName:i,targetName:r,stream:ki.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){a.postMessage({sourceName:i,targetName:r,stream:ki.CANCEL_COMPLETE,streamId:e,reason:bn(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#a(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class l4{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ke("Abstract method `_createCanvas` called.")}}class I5 extends l4{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class c4{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ke("Abstract method `_fetch` called.")}}class k2 extends c4{async _fetch(t){const e=await Vl(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Yl(e)}}class u4{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,a){return"none"}destroy(t=!1){}}class F5 extends u4{#t;#e;#n;#i;#a;#r;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#a=e}get#o(){return this.#e||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#n){const t=this.#a.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#a.createElementNS(Vr,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#a.createElementNS(Vr,"defs"),t.append(i),i.append(this.#n),this.#a.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let p=0;p<256;p++)f[p]=h[p]/255;const m=f.join(",");return[m,m,m]}const[e,i,r]=t,a=new Array(256),o=new Array(256),u=new Array(256);for(let h=0;h<256;h++)a[h]=e[h]/255,o[h]=i[h]/255,u[h]=r[h]/255;return[a.join(","),o.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#a.URL;e!==this.#a.baseURI&&(ou(e)?fe('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Jb(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,r,a]=this.#d(t),o=t.length===1?i:`${i}${r}${a}`;if(e=this.#o.get(o),e)return this.#o.set(t,e),e;const u=`g_${this.#i}_transfer_map_${this.#s++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(o,h);const f=this.#m(u);return this.#p(i,r,a,f),h}addHCMFilter(t,e){const i=`${t}-${e}`,r="base";let a=this.#c.get(r);if(a?.key===i||(a?(a.filter?.remove(),a.key=i,a.url="none",a.filter=null):(a={key:i,url:"none",filter:null},this.#c.set(r,a)),!t||!e))return a.url;const o=this.#y(t);t=Xt.makeHexColor(...o);const u=this.#y(e);if(e=Xt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return a.url;const h=new Array(256);for(let v=0;v<=255;v++){const w=v/255;h[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=h.join(","),m=`g_${this.#i}_hcm_filter`,p=a.filter=this.#m(m);this.#p(f,f,f,p),this.#g(p);const b=(v,w)=>{const x=o[v]/255,_=u[v]/255,A=new Array(w+1);for(let T=0;T<=w;T++)A[T]=x+T/w*(_-x);return A.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),p),a.url=this.#h(m),a.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),r=`alpha_${i}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;const a=`g_${this.#i}_alpha_map_${this.#s++}`,o=this.#h(a);this.#o.set(t,o),this.#o.set(r,o);const u=this.#m(a);return this.#b(i,u),o}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,r;if(t?([i]=this.#d([t]),r=`luminosity_${i}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;const a=`g_${this.#i}_luminosity_map_${this.#s++}`,o=this.#h(a);this.#o.set(t,o),this.#o.set(r,o);const u=this.#m(a);return this.#f(u),t&&this.#b(i,u),o}addHighlightHCMFilter(t,e,i,r,a){const o=`${e}-${i}-${r}-${a}`;let u=this.#c.get(t);if(u?.key===o||(u?(u.filter?.remove(),u.key=o,u.url="none",u.filter=null):(u={key:o,url:"none",filter:null},this.#c.set(t,u)),!e||!i))return u.url;const[h,f]=[e,i].map(this.#y.bind(this));let m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,v]=[r,a].map(this.#y.bind(this));p<m&&([m,p,b,v]=[p,m,v,b]),this.#l.style.color="";const w=(A,T,M)=>{const R=new Array(256),D=(p-m)/M,L=A/255,z=(T-A)/(255*M);let q=0;for(let U=0;U<=M;U++){const it=Math.round(m+U*D),ut=L+U*z;for(let H=q;H<=it;H++)R[H]=ut;q=it+1}for(let U=q;U<256;U++)R[U]=R[q-1];return R.join(",")},x=`g_${this.#i}_hcm_${t}_filter`,_=u.filter=this.#m(x);return this.#g(_),this.#p(w(b[0],v[0],5),w(b[1],v[1],5),w(b[2],v[2],5),_),u.url=this.#h(x),u.url}destroy(t=!1){t&&this.#r?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(t){const e=this.#a.createElementNS(Vr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#a.createElementNS(Vr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#a.createElementNS(Vr,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const r=this.#a.createElementNS(Vr,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)}#p(t,e,i,r){const a=this.#a.createElementNS(Vr,"feComponentTransfer");r.append(a),this.#u(a,"feFuncR",t),this.#u(a,"feFuncG",e),this.#u(a,"feFuncB",i)}#b(t,e){const i=this.#a.createElementNS(Vr,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#y(t){return this.#l.style.color=t,Kl(getComputedStyle(this.#l).getPropertyValue("color"))}}class h4{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ke("Abstract method `_fetch` called.")}}class T2 extends h4{async _fetch(t){const e=await Vl(t,"arraybuffer");return new Uint8Array(e)}}class d4{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ke("Abstract method `_fetch` called.")}}class C2 extends d4{async _fetch(t){const e=await Vl(t,"arraybuffer");return new Uint8Array(e)}}Ji&&fe("Please use the `legacy` build in Node.js environments.");async function Pf(l){const e=await process.getBuiltinModule("fs").promises.readFile(l);return new Uint8Array(e)}class P5 extends u4{}class U5 extends l4{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class j5 extends c4{async _fetch(t){return Pf(t)}}class H5 extends h4{async _fetch(t){return Pf(t)}}class G5 extends d4{async _fetch(t){return Pf(t)}}const no="__forcedDependency",{floor:M2,ceil:R2}=Math;function A0(l,t,e,i,r,a){l[t*4+0]=Math.min(l[t*4+0],e),l[t*4+1]=Math.min(l[t*4+1],i),l[t*4+2]=Math.max(l[t*4+2],r),l[t*4+3]=Math.max(l[t*4+3],a)}const ff=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class q5{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===ff}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const _0=(l,t)=>{if(!l)return;let e=l.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},l.set(t,e)),e};class $5{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[no]:[]};#n=new Map;#i=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#m;#u;#p;constructor(t,e,i=!1){this.#f=t.width,this.#g=t.height,this.#b(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,e){const i=new ArrayBuffer(t*4);this.#m=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(ff,e.length)):this.#u.fill(ff)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[no]:{__proto__:this.#e[no]}},this.#s={__proto__:this.#s},this.#i.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const i=this.#i.pop();return i!==void 0&&(_0(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const e=this.#i.pop();return e!==void 0&&(_0(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#a.push(t),this}endMarkedContent(t){const e=this.#a.pop();return e!==void 0&&(_0(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#r.push(Xt.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#n.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(no,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(no,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,r,a,o){const u=Xt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];Xt.axialAlignedBoundingBox([i,a,r,o],u,h);const f=Xt.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,i,r,a,o){const u=this.#s;if(u[0]===1/0)return this;const h=Xt.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform());if(u[0]===-1/0)return Xt.axialAlignedBoundingBox([i,a,r,o],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return Xt.axialAlignedBoundingBox([i,a,r,o],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,i,r=1,a=0,o=0,u){const h=i.bbox;let f,m;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(i),f!==!1&&(m=[0,0,0,0],Xt.axialAlignedBoundingBox(h,i.fontMatrix,m),(r!==1||a!==0||o!==0)&&Xt.scaleMinMax([r,0,0,-r,a,o],m),f)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!u)return this.recordFullPageBBox(t);const p=u();return h&&m&&f===void 0&&(f=m[0]<=a-p.actualBoundingBoxLeft&&m[2]>=a+p.actualBoundingBoxRight&&m[1]<=o-p.actualBoundingBoxAscent&&m[3]>=o+p.actualBoundingBoxDescent,this.#h.set(i,f),f)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,a-p.actualBoundingBoxLeft,a+p.actualBoundingBoxRight,o-p.actualBoundingBoxAscent,o+p.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,r=this.#t,a=this.#e;for(const o of e)o in this.#t?i.add(r[o]):o in a&&a[o].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#l.add(this.#n.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[no]),this.#p){const i=_0(this.#p,t),{dependencies:r}=i;this.#l.forEach(r.add,r),this.#i.forEach(r.add,r),this.#a.forEach(r.add,r),r.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=M2(this.#o[0]*256/this.#f),r=M2(this.#o[1]*256/this.#g),a=R2(this.#o[2]*256/this.#f),o=R2(this.#o[3]*256/this.#g);A0(this.#m,t,i,r,a,o);for(const u of this.#l)u!==t&&A0(this.#m,u,i,r,a,o);for(const u of this.#i)u!==t&&A0(this.#m,u,i,r,a,o);for(const u of this.#a)u!==t&&A0(this.#m,u,i,r,a,o);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new q5(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class V0{#t;#e;#n;#i=0;#a=0;constructor(t,e,i){if(t instanceof V0&&t.#n===!!i)return t;this.#t=t,this.#e=e,this.#n=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#a++,this.#t.save(this.#e),this}restore(t){return this.#a>0&&(this.#t.restore(this.#e),this.#a--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,r,a,o){return this.#n||this.#t.recordClipBox(this.#e,e,i,r,a,o),this}recordBBox(t,e,i,r,a,o){return this.#n||this.#t.recordBBox(this.#e,e,i,r,a,o),this}recordCharacterBBox(t,e,i,r,a,o,u){return this.#n||this.#t.recordCharacterBBox(this.#e,e,i,r,a,o,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const qn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ji={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function mf(l,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),l.clip(r)}class Uf{isModifyingCurrentTransform(){return!1}getPattern(){Ke("Abstract method `getPattern` called.")}}class Y5 extends Uf{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let a;if(r===ji.STROKE||r===ji.FILL){const o=e.current.getClippedPathBoundingBox(r,oi(t))||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-o[0],-o[1]),i=Xt.transform(i,[1,0,0,1,o[0],o[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),mf(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=t.createPattern(f.canvas,"no-repeat");const p=new DOMMatrix(i);a.setTransform(p)}else mf(t,this._bbox),a=this._createGradient(t);return a}}function Pd(l,t,e,i,r,a,o,u){const h=t.coords,f=t.colors,m=l.data,p=l.width*4;let b;h[e+1]>h[i+1]&&(b=e,e=i,i=b,b=a,a=o,o=b),h[i+1]>h[r+1]&&(b=i,i=r,r=b,b=o,o=u,u=b),h[e+1]>h[i+1]&&(b=e,e=i,i=b,b=a,a=o,o=b);const v=(h[e]+t.offsetX)*t.scaleX,w=(h[e+1]+t.offsetY)*t.scaleY,x=(h[i]+t.offsetX)*t.scaleX,_=(h[i+1]+t.offsetY)*t.scaleY,A=(h[r]+t.offsetX)*t.scaleX,T=(h[r+1]+t.offsetY)*t.scaleY;if(w>=T)return;const M=f[a],R=f[a+1],D=f[a+2],L=f[o],z=f[o+1],q=f[o+2],U=f[u],it=f[u+1],ut=f[u+2],H=Math.round(w),rt=Math.round(T);let N,at,X,W,xt,bt,Rt,B;for(let P=H;P<=rt;P++){if(P<_){const Ft=P<w?0:(w-P)/(w-_);N=v-(v-x)*Ft,at=M-(M-L)*Ft,X=R-(R-z)*Ft,W=D-(D-q)*Ft}else{let Ft;P>T?Ft=1:_===T?Ft=0:Ft=(_-P)/(_-T),N=x-(x-A)*Ft,at=L-(L-U)*Ft,X=z-(z-it)*Ft,W=q-(q-ut)*Ft}let st;P<w?st=0:P>T?st=1:st=(w-P)/(w-T),xt=v-(v-A)*st,bt=M-(M-U)*st,Rt=R-(R-it)*st,B=D-(D-ut)*st;const pt=Math.round(Math.min(N,xt)),vt=Math.round(Math.max(N,xt));let Ut=p*P+pt*4;for(let Ft=pt;Ft<=vt;Ft++)st=(N-Ft)/(N-xt),st<0?st=0:st>1&&(st=1),m[Ut++]=at-(at-bt)*st|0,m[Ut++]=X-(X-Rt)*st|0,m[Ut++]=W-(W-B)*st|0,m[Ut++]=255}}function V5(l,t,e){const i=t.coords,r=t.colors;let a,o;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(i.length/u)-1,f=u-1;for(a=0;a<h;a++){let m=a*u;for(let p=0;p<f;p++,m++)Pd(l,e,i[m],i[m+1],i[m+u],r[m],r[m+1],r[m+u]),Pd(l,e,i[m+u+1],i[m+1],i[m+u],r[m+u+1],r[m+1],r[m+u])}break;case"triangles":for(a=0,o=i.length;a<o;a+=3)Pd(l,e,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class X5 extends Uf{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-h,p=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),v=f/p,w=m/b,x={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/v,scaleY:1/w},_=p+4,A=b+4,T=i.getCanvas("mesh",_,A),M=T.context,R=M.createImageData(p,b);if(e){const L=R.data;for(let z=0,q=L.length;z<q;z+=4)L[z]=e[0],L[z+1]=e[1],L[z+2]=e[2],L[z+3]=255}for(const L of this._figures)V5(R,L,x);return M.putImageData(R,2,2),{canvas:T.canvas,offsetX:u-2*v,offsetY:h-2*w,scaleX:v,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,r){mf(t,this._bbox);const a=new Float32Array(2);if(r===ji.SHADING)Xt.singularValueDecompose2dScale(oi(t),a);else if(this.matrix){Xt.singularValueDecompose2dScale(this.matrix,a);const[u,h]=a;Xt.singularValueDecompose2dScale(e.baseTransform,a),a[0]*=u,a[1]*=h}else Xt.singularValueDecompose2dScale(e.baseTransform,a);const o=this._createMeshCanvas(a,r===ji.SHADING?null:this._background,e.cachedCanvases);return r!==ji.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class K5 extends Uf{getPattern(){return"hotpink"}}function W5(l){switch(l[0]){case"RadialAxial":return new Y5(l);case"Mesh":return new X5(l);case"Dummy":return new K5}throw new Error(`Unknown IR type: ${l[0]}`)}const D2={COLORED:1,UNCOLORED:2};class jf{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t,e){const{bbox:i,operatorList:r,paintType:a,tilingType:o,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),au("TilingType: "+o);const p=i[0],b=i[1],v=i[2],w=i[3],x=v-p,_=w-b,A=new Float32Array(2);Xt.singularValueDecompose2dScale(this.matrix,A);const[T,M]=A;Xt.singularValueDecompose2dScale(this.baseTransform,A);const R=T*A[0],D=M*A[1];let L=x,z=_,q=!1,U=!1;const it=Math.ceil(f*R),ut=Math.ceil(m*D),H=Math.ceil(x*R),rt=Math.ceil(_*D);it>=H?L=f:q=!0,ut>=rt?z=m:U=!0;const N=this.getSizeAndScale(L,this.ctx.canvas.width,R),at=this.getSizeAndScale(z,this.ctx.canvas.height,D),X=t.cachedCanvases.getCanvas("pattern",N.size,at.size),W=X.context,xt=h.createCanvasGraphics(W,e);if(xt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(xt,a,u),W.translate(-N.scale*p,-at.scale*b),xt.transform(0,N.scale,0,0,at.scale,0,0),W.save(),xt.dependencyTracker?.save(),this.clipBbox(xt,p,b,v,w),xt.baseTransform=oi(xt.ctx),xt.executeOperatorList(r),xt.endDrawing(),xt.dependencyTracker?.restore(),W.restore(),q||U){const bt=X.canvas;q&&(L=f),U&&(z=m);const Rt=this.getSizeAndScale(L,this.ctx.canvas.width,R),B=this.getSizeAndScale(z,this.ctx.canvas.height,D),P=Rt.size,st=B.size,pt=t.cachedCanvases.getCanvas("pattern-workaround",P,st),vt=pt.context,Ut=q?Math.floor(x/f):0,Ft=U?Math.floor(_/m):0;for(let Yt=0;Yt<=Ut;Yt++)for(let qt=0;qt<=Ft;qt++)vt.drawImage(bt,P*Yt,st*qt,P,st,0,0,P,st);return{canvas:pt.canvas,scaleX:Rt.scale,scaleY:B.scale,offsetX:p,offsetY:b}}return{canvas:X.canvas,scaleX:N.scale,scaleY:at.scale,offsetX:p,offsetY:b}}getSizeAndScale(t,e,i){const r=Math.max(jf.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*i);return a>=r?a=r:i=a/t,{scale:i,size:a}}clipBbox(t,e,i,r,a){const o=r-e,u=a-i;t.ctx.rect(e,i,o,u),Xt.axialAlignedBoundingBox([e,i,r,a],oi(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,a=t.current;switch(e){case D2.COLORED:const{fillStyle:o,strokeStyle:u}=this.ctx;r.fillStyle=a.fillColor=o,r.strokeStyle=a.strokeColor=u;break;case D2.UNCOLORED:r.fillStyle=r.strokeStyle=i,a.fillColor=a.strokeColor=i;break;default:throw new c5(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,r,a){let o=i;r!==ji.SHADING&&(o=Xt.transform(o,e.baseTransform),this.matrix&&(o=Xt.transform(o,this.matrix)));const u=this.createPatternCanvas(e,a);let h=new DOMMatrix(o);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function Z5({src:l,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const u=Hi.isLittleEndian?4278190080:255,[h,f]=o?[a,u]:[u,a],m=i>>3,p=i&7,b=l.length;e=new Uint32Array(e.buffer);let v=0;for(let w=0;w<r;w++){for(const _=t+m;t<_;t++){const A=t<b?l[t]:255;e[v++]=A&128?f:h,e[v++]=A&64?f:h,e[v++]=A&32?f:h,e[v++]=A&16?f:h,e[v++]=A&8?f:h,e[v++]=A&4?f:h,e[v++]=A&2?f:h,e[v++]=A&1?f:h}if(p===0)continue;const x=t<b?l[t++]:255;for(let _=0;_<p;_++)e[v++]=x&1<<7-_?f:h}return{srcPos:t,destPos:v}}const N2=16,O2=100,Q5=15,z2=10,yn=16,Ud=new DOMMatrix,Rn=new Float32Array(2),uo=new Float32Array([1/0,1/0,-1/0,-1/0]);function J5(l,t){if(l._removeMirroring)throw new Error("Context is already forwarding operations.");l.__originalSave=l.save,l.__originalRestore=l.restore,l.__originalRotate=l.rotate,l.__originalScale=l.scale,l.__originalTranslate=l.translate,l.__originalTransform=l.transform,l.__originalSetTransform=l.setTransform,l.__originalResetTransform=l.resetTransform,l.__originalClip=l.clip,l.__originalMoveTo=l.moveTo,l.__originalLineTo=l.lineTo,l.__originalBezierCurveTo=l.bezierCurveTo,l.__originalRect=l.rect,l.__originalClosePath=l.closePath,l.__originalBeginPath=l.beginPath,l._removeMirroring=()=>{l.save=l.__originalSave,l.restore=l.__originalRestore,l.rotate=l.__originalRotate,l.scale=l.__originalScale,l.translate=l.__originalTranslate,l.transform=l.__originalTransform,l.setTransform=l.__originalSetTransform,l.resetTransform=l.__originalResetTransform,l.clip=l.__originalClip,l.moveTo=l.__originalMoveTo,l.lineTo=l.__originalLineTo,l.bezierCurveTo=l.__originalBezierCurveTo,l.rect=l.__originalRect,l.closePath=l.__originalClosePath,l.beginPath=l.__originalBeginPath,delete l._removeMirroring},l.save=function(){t.save(),this.__originalSave()},l.restore=function(){t.restore(),this.__originalRestore()},l.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},l.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},l.transform=function(e,i,r,a,o,u){t.transform(e,i,r,a,o,u),this.__originalTransform(e,i,r,a,o,u)},l.setTransform=function(e,i,r,a,o,u){t.setTransform(e,i,r,a,o,u),this.__originalSetTransform(e,i,r,a,o,u)},l.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},l.rotate=function(e){t.rotate(e),this.__originalRotate(e)},l.clip=function(e){t.clip(e),this.__originalClip(e)},l.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},l.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},l.bezierCurveTo=function(e,i,r,a,o,u){t.bezierCurveTo(e,i,r,a,o,u),this.__originalBezierCurveTo(e,i,r,a,o,u)},l.rect=function(e,i,r,a){t.rect(e,i,r,a),this.__originalRect(e,i,r,a)},l.closePath=function(){t.closePath(),this.__originalClosePath()},l.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class t6{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function E0(l,t,e,i,r,a,o,u,h,f){const[m,p,b,v,w,x]=oi(l);if(p===0&&b===0){const T=o*m+w,M=Math.round(T),R=u*v+x,D=Math.round(R),L=(o+h)*m+w,z=Math.abs(Math.round(L)-M)||1,q=(u+f)*v+x,U=Math.abs(Math.round(q)-D)||1;return l.setTransform(Math.sign(m),0,0,Math.sign(v),M,D),l.drawImage(t,e,i,r,a,0,0,z,U),l.setTransform(m,p,b,v,w,x),[z,U]}if(m===0&&v===0){const T=u*b+w,M=Math.round(T),R=o*p+x,D=Math.round(R),L=(u+f)*b+w,z=Math.abs(Math.round(L)-M)||1,q=(o+h)*p+x,U=Math.abs(Math.round(q)-D)||1;return l.setTransform(0,Math.sign(p),Math.sign(b),0,M,D),l.drawImage(t,e,i,r,a,0,0,U,z),l.setTransform(m,p,b,v,w,x),[U,z]}l.drawImage(t,e,i,r,a,o,u,h,f);const _=Math.hypot(m,p),A=Math.hypot(b,v);return[_*h,A*f]}class L2{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=af;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Pi.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=uo.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=ji.FILL,e=null){const i=this.minMax.slice();if(t===ji.STROKE){e||Ke("Stroke bounding box must include transform."),Xt.singularValueDecompose2dScale(e,Rn);const r=Rn[0]*this.lineWidth/2,a=Rn[1]*this.lineWidth/2;i[0]-=r,i[1]-=a,i[2]+=r,i[3]+=a}return i}updateClipFromPath(){const t=Xt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(uo,0)}getClippedPathBoundingBox(t=ji.FILL,e=null){return Xt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function B2(l,t){if(t instanceof ImageData){l.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%yn,a=(e-r)/yn,o=r===0?a:a+1,u=l.createImageData(i,yn);let h=0,f;const m=t.data,p=u.data;let b,v,w,x;if(t.kind===U0.GRAYSCALE_1BPP){const _=m.byteLength,A=new Uint32Array(p.buffer,0,p.byteLength>>2),T=A.length,M=i+7>>3,R=4294967295,D=Hi.isLittleEndian?4278190080:255;for(b=0;b<o;b++){for(w=b<a?yn:r,f=0,v=0;v<w;v++){const L=_-h;let z=0;const q=L>M?i:L*8-7,U=q&-8;let it=0,ut=0;for(;z<U;z+=8)ut=m[h++],A[f++]=ut&128?R:D,A[f++]=ut&64?R:D,A[f++]=ut&32?R:D,A[f++]=ut&16?R:D,A[f++]=ut&8?R:D,A[f++]=ut&4?R:D,A[f++]=ut&2?R:D,A[f++]=ut&1?R:D;for(;z<q;z++)it===0&&(ut=m[h++],it=128),A[f++]=ut&it?R:D,it>>=1}for(;f<T;)A[f++]=0;l.putImageData(u,0,b*yn)}}else if(t.kind===U0.RGBA_32BPP){for(v=0,x=i*yn*4,b=0;b<a;b++)p.set(m.subarray(h,h+x)),h+=x,l.putImageData(u,0,v),v+=yn;b<o&&(x=i*r*4,p.set(m.subarray(h,h+x)),l.putImageData(u,0,v))}else if(t.kind===U0.RGB_24BPP)for(w=yn,x=i*w,b=0;b<o;b++){for(b>=a&&(w=r,x=i*w),f=0,v=x;v--;)p[f++]=m[h++],p[f++]=m[h++],p[f++]=m[h++],p[f++]=255;l.putImageData(u,0,b*yn)}else throw new Error(`bad image kind: ${t.kind}`)}function I2(l,t){if(t.bitmap){l.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%yn,a=(e-r)/yn,o=r===0?a:a+1,u=l.createImageData(i,yn);let h=0;const f=t.data,m=u.data;for(let p=0;p<o;p++){const b=p<a?yn:r;({srcPos:h}=Z5({src:f,srcPos:h,dest:m,width:i,height:b,nonBlackColor:0})),l.putImageData(u,0,p*yn)}}function xl(l,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)l[i]!==void 0&&(t[i]=l[i]);l.setLineDash!==void 0&&(t.setLineDash(l.getLineDash()),t.lineDashOffset=l.lineDashOffset)}function k0(l){l.strokeStyle=l.fillStyle="#000000",l.fillRule="nonzero",l.globalAlpha=1,l.lineWidth=1,l.lineCap="butt",l.lineJoin="miter",l.miterLimit=10,l.globalCompositeOperation="source-over",l.font="10px sans-serif",l.setLineDash!==void 0&&(l.setLineDash([]),l.lineDashOffset=0);const{filter:t}=l;t!=="none"&&t!==""&&(l.filter="none")}function F2(l,t){if(t)return!0;Xt.singularValueDecompose2dScale(l,Rn);const e=Math.fround(wr.pixelRatio*yo.PDF_TO_CSS_UNITS);return Rn[0]<=e&&Rn[1]<=e}const e6=["butt","round","square"],i6=["miter","round","bevel"],n6={},P2={};class fo{constructor(t,e,i,r,a,{optionalContentConfig:o,markedContentStack:u=null},h,f,m){this.ctx=t,this.current=new L2(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=o,this.cachedCanvases=new t6(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=u,i){const h=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...oi(this.compositeCtx))}this.ctx.save(),k0(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=oi(this.ctx)}executeOperatorList(t,e,i,r,a){const o=t.argsArray,u=t.fnArray;let h=e||0;const f=o.length;if(f===h)return h;const m=f-h>z2&&typeof i=="function",p=m?Date.now()+Q5:0;let b=0;const v=this.commonObjs,w=this.objs;let x,_;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,i),h;if(!a||a(h))if(x=u[h],_=o[h]??null,x!==Il.dependency)_===null?this[x](h):this[x](h,..._);else for(const A of _){this.dependencyTracker?.recordNamedData(A,h);const T=A.startsWith("g_")?v:w;if(!T.has(A))return T.get(A,i),h}if(h++,h===f)return h;if(m&&++b>z2){if(Date.now()>p)return i(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),u=i,h=r,f="prescale1",m,p;for(;a>2&&u>1||o>2&&h>1;){let b=u,v=h;a>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),a/=u/b),o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/v),m=this.cachedCanvases.getCanvas(f,b,v),p=m.context,p.clearRect(0,0,b,v),p.drawImage(t,0,0,u,h,0,0,b,v),t=m.canvas,u=b,h=v,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){const i=this.ctx,{width:r,height:a}=e,o=this.current.fillColor,u=this.current.patternFill,h=oi(i);let f,m,p,b;if((e.bitmap||e.data)&&e.count>1){const it=e.bitmap||e.data.buffer;m=JSON.stringify(u?h:[h.slice(0,4),o]),f=this._cachedBitmapsMap.get(it),f||(f=new Map,this._cachedBitmapsMap.set(it,f));const ut=f.get(m);if(ut&&!u){const H=Math.round(Math.min(h[0],h[2])+h[4]),rt=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,qn.transformAndFill),{canvas:ut,offsetX:H,offsetY:rt}}p=ut}p||(b=this.cachedCanvases.getCanvas("maskCanvas",r,a),I2(b.context,e));let v=Xt.transform(h,[1/r,0,0,-1/a,0,0]);v=Xt.transform(v,[1,0,0,1,0,-a]);const w=uo.slice();Xt.axialAlignedBoundingBox([0,0,r,a],v,w);const[x,_,A,T]=w,M=Math.round(A-x)||1,R=Math.round(T-_)||1,D=this.cachedCanvases.getCanvas("fillCanvas",M,R),L=D.context,z=x,q=_;L.translate(-z,-q),L.transform(...v),p||(p=this._scaleImage(b.canvas,fr(L)),p=p.img,f&&u&&f.set(m,p)),L.imageSmoothingEnabled=F2(oi(L),e.interpolate),E0(L,p,0,0,p.width,p.height,0,0,r,a),L.globalCompositeOperation="source-in";const U=Xt.transform(fr(L),[1,0,0,1,-z,-q]);return L.fillStyle=u?o.getPattern(i,this,U,ji.FILL,t):o,L.fillRect(0,0,r,a),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,D.canvas)),this.dependencyTracker?.recordDependencies(t,qn.transformAndFill),{canvas:D.canvas,offsetX:Math.round(z),offsetY:Math.round(q)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=e6[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=i6[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,r]of e)switch(i){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(r,e,i);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),xl(this.suspendedCtx,o),J5(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),xl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const a=r[0],o=r[1],u=r[2]-a,h=r[3]-o;u===0||h===0||(this.genericComposeSMask(e.context,i,u,h,e.subtype,e.backdrop,e.transferMap,a,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,a,o,u,h,f,m,p){let b=t.canvas,v=h-m,w=f-p;if(o)if(v<0||w<0||v+i>b.width||w+r>b.height){const _=this.cachedCanvases.getCanvas("maskExtension",i,r),A=_.context;A.drawImage(b,-v,-w),A.globalCompositeOperation="destination-atop",A.fillStyle=o,A.fillRect(0,0,i,r),A.globalCompositeOperation="source-over",b=_.canvas,v=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(v,w,i,r),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(v,w,i,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const x=new Path2D;x.rect(h,f,i,r),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(b,v,w,i,r,h,f,i,r),e.restore()}save(t){this.inSMaskMode&&xl(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&xl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,r,a,o,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,r,a,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,r){let[a]=i;if(!r){a||=i[0]=new Path2D,this[e](t,a);return}if(this.dependencyTracker!==null){const o=e===Il.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(t,["transform"])}if(!(a instanceof Path2D)){const o=i[0]=new Path2D;for(let u=0,h=a.length;u<h;)switch(a[u++]){case y0.moveTo:o.moveTo(a[u++],a[u++]);break;case y0.lineTo:o.lineTo(a[u++],a[u++]);break;case y0.curveTo:o.bezierCurveTo(a[u++],a[u++],a[u++],a[u++],a[u++],a[u++]);break;case y0.closePath:o.closePath();break;default:fe(`Unrecognized drawing path operator: ${a[u-1]}`);break}a=o}Xt.axialAlignedBoundingBox(r,oi(this.ctx),this.current.minMax),this[e](t,a),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const r=this.ctx,a=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const o=a.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=a.getPattern(r,this,fr(r),ji.STROKE,t),o){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(o)),e=u}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,qn.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(ji.STROKE,oi(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const r=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let u=!1;if(o){const f=a.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=a.getPattern(r,this,fr(r),ji.FILL,t),f){const m=new Path2D;m.addPath(e,r.getTransform().invertSelf().multiplySelf(f)),e=m}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),this.dependencyTracker?.recordDependencies(t,qn.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,qn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=n6}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=P2}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,a=i.getTransform().invertSelf();for(const{transform:o,x:u,y:h,fontSize:f,path:m}of e)m&&r.addPath(m,new DOMMatrix(o).preMultiplySelf(a).translate(u,h).scale(f,-f));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),a=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(a.fontMatrix=r.fontMatrix||af,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&fe("Invalid font matrix for font "+e),i<0?(i=-i,a.fontDirection=-1):a.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;const o=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${o}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const f=r.italic?"italic":"normal";let m=i;i<N2?m=N2:i>O2&&(m=O2),this.current.fontSizeScale=i/m,this.ctx.font=`${f} ${h} ${m}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r}paintChar(t,e,i,r,a,o){const u=this.ctx,h=this.current,f=h.font,m=h.textRenderingMode,p=h.fontSize/h.fontSizeScale,b=m&Pi.FILL_STROKE_MASK,v=!!(m&Pi.ADD_TO_PATH_FLAG),w=h.patternFill&&!f.missingFile,x=h.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||v||w||x)&&!f.missingFile&&(_=f.getPathGenerator(this.commonObjs,e)),_&&(f.disableFontFace||w||x)){u.save(),u.translate(i,r),u.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(t,u,f);let A;if(b===Pi.FILL||b===Pi.FILL_STROKE)if(a){A=u.getTransform(),u.setTransform(...a);const T=this.#n(_,A,a);u.fill(T)}else u.fill(_);if(b===Pi.STROKE||b===Pi.FILL_STROKE)if(o){A||=u.getTransform(),u.setTransform(...o);const{a:T,b:M,c:R,d:D}=A,L=Xt.inverseTransform(o),z=Xt.transform([T,M,R,D,0,0],L);Xt.singularValueDecompose2dScale(z,Rn),u.lineWidth*=Math.max(Rn[0],Rn[1])/p,u.stroke(this.#n(_,A,o))}else u.lineWidth/=p,u.stroke(_);u.restore()}else(b===Pi.FILL||b===Pi.FILL_STROKE)&&(u.fillText(e,i,r),this.dependencyTracker?.recordCharacterBBox(t,u,f,p,i,r,()=>u.measureText(e))),(b===Pi.STROKE||b===Pi.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,p,i,r,()=>u.measureText(e)).recordDependencies(t,qn.stroke),u.strokeText(e,i,r));v&&((this.pendingTextPaths||=[]).push({transform:oi(u),x:i,y:r,fontSize:p,path:_}),this.dependencyTracker?.recordCharacterBBox(t,u,f,p,i,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return Se(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,qn.showText).resetBBox(t),this.current.textRenderingMode&Pi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const a=i.fontSize;if(a===0){this.dependencyTracker?.recordOperation(t);return}const o=this.ctx,u=i.fontSizeScale,h=i.charSpacing,f=i.wordSpacing,m=i.fontDirection,p=i.textHScale*m,b=e.length,v=r.vertical,w=v?1:-1,x=r.defaultVMetrics,_=a*i.fontMatrix[0],A=i.textRenderingMode===Pi.FILL&&!r.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),m>0?o.scale(p,-1):o.scale(p,1);let T,M;if(i.patternFill){o.save();const q=i.fillColor.getPattern(o,this,fr(o),ji.FILL,t);T=oi(o),o.restore(),o.fillStyle=q}if(i.patternStroke){o.save();const q=i.strokeColor.getPattern(o,this,fr(o),ji.STROKE,t);M=oi(o),o.restore(),o.strokeStyle=q}let R=i.lineWidth;const D=i.textMatrixScale;if(D===0||R===0){const q=i.textRenderingMode&Pi.FILL_STROKE_MASK;(q===Pi.STROKE||q===Pi.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=D;if(u!==1&&(o.scale(u,u),R/=u),o.lineWidth=R,r.isInvalidPDFjsFont){const q=[];let U=0;for(const ut of e)q.push(ut.unicode),U+=ut.width;const it=q.join("");if(o.fillText(it,0,0),this.dependencyTracker!==null){const ut=o.measureText(it);this.dependencyTracker.recordBBox(t,this.ctx,-ut.actualBoundingBoxLeft,ut.actualBoundingBoxRight,-ut.actualBoundingBoxAscent,ut.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=U*_*p,o.restore(),this.compose();return}let L=0,z;for(z=0;z<b;++z){const q=e[z];if(typeof q=="number"){L+=w*q*a/1e3;continue}let U=!1;const it=(q.isSpace?f:0)+h,ut=q.fontChar,H=q.accent;let rt,N,at=q.width;if(v){const xt=q.vmetric||x,bt=-(q.vmetric?xt[1]:at*.5)*_,Rt=xt[2]*_;at=xt?-xt[0]:at,rt=bt/u,N=(L+Rt)/u}else rt=L/u,N=0;let X;if(r.remeasure&&at>0){X=o.measureText(ut);const xt=X.width*1e3/a*u;if(at<xt&&this.isFontSubpixelAAEnabled){const bt=at/xt;U=!0,o.save(),o.scale(bt,1),rt/=bt}else at!==xt&&(rt+=(at-xt)/2e3*a/u)}if(this.contentVisible&&(q.isInFont||r.missingFile)){if(A&&!H)o.fillText(ut,rt,N),this.dependencyTracker?.recordCharacterBBox(t,o,X?{bbox:null}:r,a/u,rt,N,()=>X??o.measureText(ut));else if(this.paintChar(t,ut,rt,N,T,M),H){const xt=rt+a*H.offset.x/u,bt=N-a*H.offset.y/u;this.paintChar(t,H.fontChar,xt,bt,T,M)}}const W=v?at*_-it*m:at*_+it*m;L+=W,U&&o.restore()}v?i.y-=L:i.x+=L*p,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,r=this.current,a=r.font,o=r.fontSize,u=r.fontDirection,h=a.vertical?1:-1,f=r.charSpacing,m=r.wordSpacing,p=r.textHScale*u,b=r.fontMatrix||af,v=e.length,w=r.textRenderingMode===Pi.INVISIBLE;let x,_,A,T;if(w||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(p,u);const M=this.dependencyTracker;for(this.dependencyTracker=M?new V0(M,t):null,x=0;x<v;++x){if(_=e[x],typeof _=="number"){T=h*_*o/1e3,this.ctx.translate(T,0),r.x+=T*p;continue}const R=(_.isSpace?m:0)+f,D=a.charProcOperatorList[_.operatorListId];D?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...b),this.executeOperatorList(D),this.restore()):fe(`Type3 character "${_.operatorListId}" is not available.`);const L=[_.width,0];Xt.applyTransform(L,b),A=L[0]*o+R,i.translate(A,0),r.x+=A*p}i.restore(),M&&(this.dependencyTracker=M)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,r,a,o,u){const h=new Path2D;h.rect(r,a,o-r,u-a),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,o,a,u).recordClipBox(t,this.ctx,r,o,a,u),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const r=this.baseTransform||oi(this.ctx),a={createCanvasGraphics:(o,u)=>new fo(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new V0(this.dependencyTracker,u,!0):null)};i=new jf(e,this.ctx,a,r)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=W5(this.getObject(t,e)),this.cachedPatterns.set(e,r)),i&&(r.matrix=i),r}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const r=this._getPattern(t,e);i.fillStyle=r.getPattern(i,this,fr(i),ji.SHADING,t);const a=fr(i);if(a){const{width:o,height:u}=i.canvas,h=uo.slice();Xt.axialAlignedBoundingBox([0,0,o,u],a,h);const[f,m,p,b]=h;this.ctx.fillRect(f,m,p-f,b-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,qn.transform).recordDependencies(t,qn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Ke("Should not call beginInlineImage")}beginImageData(){Ke("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=oi(this.ctx),i)){Xt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,a,o,u]=i,h=new Path2D;h.rect(r,a,o-r,u-a),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,o,a,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||au("TODO: Support non-isolated groups."),e.knockout&&fe("Knockout groups not supported.");const r=oi(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let a=uo.slice();Xt.axialAlignedBoundingBox(e.bbox,oi(i),a);const o=[0,0,i.canvas.width,i.canvas.height];a=Xt.intersect(a,o)||[0,0,0,0];const u=Math.floor(a[0]),h=Math.floor(a[1]),f=Math.max(Math.ceil(a[2])-u,1),m=Math.max(Math.ceil(a[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,m]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(p,f,m),v=b.context;v.translate(-u,-h),v.transform(...r);let w=new Path2D;const[x,_,A,T]=e.bbox;if(w.rect(x,_,A-x,T-_),e.matrix){const M=new Path2D;M.addPath(w,new DOMMatrix(e.matrix)),w=M}v.clip(w),e.smask&&this.smaskStack.push({canvas:b.canvas,context:v,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(u,h),i.save()),xl(i,v),this.ctx=v,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=oi(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...a);const o=uo.slice();Xt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],a,o),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,i,r,a,o){if(this.#t(),k0(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],h=i[3]-i[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=h,Xt.singularValueDecompose2dScale(oi(this.ctx),Rn);const{viewportScale:f}=this,m=Math.ceil(u*this.outputScaleX*f),p=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,p);const{canvas:b,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(Rn[0],0,0,-Rn[1],0,h*Rn[1]),k0(this.ctx)}else{k0(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],u,h),this.ctx.clip(f)}}this.current=new L2(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...a)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const r=this.ctx,a=this._createMaskCanvas(t,e),o=a.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,a.offsetX,a.offsetX+o.width,a.offsetY,a.offsetY+o.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,r=0,a=0,o,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=oi(h);h.transform(i,r,a,o,0,0);const m=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let p=0,b=u.length;p<b;p+=2){const v=Xt.transform(f,[i,r,a,o,u[p],u[p+1]]);h.drawImage(m.canvas,v[4],v[5]),this.dependencyTracker?.recordBBox(t,this.ctx,v[4],v[4]+m.canvas.width,v[5],v[5]+m.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,r=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,qn.transformAndFill);for(const o of e){const{data:u,width:h,height:f,transform:m}=o,p=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=p.context;b.save();const v=this.getObject(t,u,o);I2(b,v),b.globalCompositeOperation="source-in",b.fillStyle=a?r.getPattern(b,this,fr(i),ji.FILL,t):r,b.fillRect(0,0,h,f),b.restore(),i.save(),i.transform(...m),i.scale(1,-1),E0(i,p.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,h,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){fe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,r,a){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){fe("Dependent image isn't ready yet");return}const u=o.width,h=o.height,f=[];for(let m=0,p=a.length;m<p;m+=2)f.push({transform:[i,0,0,r,a[m],a[m+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,o,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,a=this.cachedCanvases.getCanvas("inlineImage",i,r),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",a.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,r=e.height,a=this.ctx;this.save(t);const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/i,-1/r);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",i,r).context;B2(m,e),u=this.applyTransferMapsToCanvas(m)}const h=this._scaleImage(u,fr(a));a.imageSmoothingEnabled=F2(oi(a),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,a,0,i,-r,0).recordDependencies(t,qn.imageXObject).recordOperation(t),E0(a,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,i,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const r=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const o=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",o,u).context;B2(f,e),a=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const o of i)r.save(),r.transform(...o.transform),r.scale(1,-1),E0(r,a,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,qn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const a=this.ctx;this.pendingClip?(r||(this.pendingClip===P2?a.clip(e,"evenodd"):a.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=oi(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:a}=this.ctx.getTransform();let o,u;if(i===0&&r===0){const h=Math.abs(e),f=Math.abs(a);if(h===f)if(t===0)o=u=1/h;else{const m=h*t;o=u=m<1?1/m:1}else if(t===0)o=1/h,u=1/f;else{const m=h*t,p=f*t;o=m<1?1/m:1,u=p<1?1/p:1}}else{const h=Math.abs(e*a-i*r),f=Math.hypot(e,i),m=Math.hypot(r,a);if(t===0)o=m/h,u=f/h;else{const p=t*h;o=m>p?m/p:1,u=f>p?f/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:r}}=this,[a,o]=this.getScaleForStroking();if(a===o){i.lineWidth=(r||1)*a,i.stroke(t);return}const u=i.getLineDash();e&&i.save(),i.scale(a,o),Ud.a=1/a,Ud.d=1/o;const h=new Path2D;if(h.addPath(t,Ud),u.length>0){const f=Math.max(a,o);i.setLineDash(u.map(m=>m/f)),i.lineDashOffset/=f}i.lineWidth=r||1,i.stroke(h),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const l in Il)fo.prototype[l]!==void 0&&(fo.prototype[Il[l]]=fo.prototype[l]);class mo{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let r=0;for(const f of mo.strings){const m=e.encode(t[f]);i[f]=m,r+=4+m.length}const a=new ArrayBuffer(r),o=new Uint8Array(a),u=new DataView(a);let h=0;for(const f of mo.strings){const m=i[f],p=m.length;u.setUint32(h,p),o.set(m,h+4),h+=4+p}return De(h===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){De(t<mo.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class po{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let r=0;for(const b of po.strings){const v=e.encode(t[b]);i[b]=v,r+=4+v.length}r+=4;let a,o,u=1+r;t.style&&(a=e.encode(t.style.style),o=e.encode(t.style.weight),u+=4+a.length+4+o.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),m=new DataView(h);let p=0;m.setUint8(p++,t.guessFallback?1:0),m.setUint32(p,0),p+=4,r=0;for(const b of po.strings){const v=i[b],w=v.length;r+=4+w,m.setUint32(p,w),f.set(v,p+4),p+=4+w}return m.setUint32(p-r-4,r),t.style&&(m.setUint32(p,a.length),f.set(a,p+4),p+=4+a.length,m.setUint32(p,o.length),f.set(o,p+4),p+=4+o.length),De(p<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(p)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){De(t<po.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#n.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#n.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const r=this.#e.getUint32(t),a=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:i,weight:a}}}class Ve{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#a=this.#i+1+6;#r;#s;#o;constructor({data:t,extra:e}){this.#r=t,this.#s=new TextDecoder,this.#o=new DataView(this.#r),e&&Object.assign(this,e)}#c(t){De(t<Ve.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,r=this.#o.getUint8(e)>>i&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return De(t<Ve.numbers.length,"Invalid number index"),this.#o.getFloat64(Ve.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Ve.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<4;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=Ve.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<6;r++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=Ve.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<3;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){De(t<Ve.strings.length,"Invalid string index");let e=Ve.#a+4;for(let a=0;a<t;a++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),r=new Uint8Array(i);return r.set(new Uint8Array(this.#r,e+4,i)),this.#s.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Ve.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);t+=4+r;const a=this.#o.getUint32(t);if(a!==0)return new Uint8Array(this.#r,t+4,a)}clearData(){let t=Ve.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);t+=4+r;const a=this.#o.getUint32(t);new Uint8Array(this.#r,t+4,a).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Ve.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);if(r===0)return null;const a=new Uint8Array(r);return a.set(new Uint8Array(this.#r,t+4,r)),new mo(a.buffer)}get systemFontInfo(){let t=Ve.#a;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#r,t+4,i)),new po(r.buffer)}static write(t){const e=t.systemFontInfo?po.write(t.systemFontInfo):null,i=t.cssFontInfo?mo.write(t.cssFontInfo):null,r=new TextEncoder,a={};let o=0;for(const x of Ve.strings)a[x]=r.encode(t[x]),o+=4+a[x].length;const u=Ve.#a+4+o+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),m=new DataView(h);let p=0;const b=Ve.bools.length;let v=0,w=0;for(let x=0;x<b;x++){const _=t[Ve.bools[x]];v|=(_===void 0?0:_?2:1)<<w,w+=2,(w===8||x===b-1)&&(m.setUint8(p++,v),v=0,w=0)}De(p===Ve.#t,"FontInfo.write: Boolean properties offset mismatch");for(const x of Ve.numbers)m.setFloat64(p,t[x]),p+=8;if(De(p===Ve.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(p++,4);for(const x of t.bbox)m.setInt16(p,x,!0),p+=2}else m.setUint8(p++,0),p+=8;if(De(p===Ve.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(p++,6);for(const x of t.fontMatrix)m.setFloat64(p,x,!0),p+=8}else m.setUint8(p++,0),p+=48;if(De(p===Ve.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(p++,1);for(const x of t.defaultVMetrics)m.setInt16(p,x,!0),p+=2}else m.setUint8(p++,0),p+=6;De(p===Ve.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(Ve.#a,0),p+=4;for(const x of Ve.strings){const _=a[x],A=_.length;m.setUint32(p,A),f.set(_,p+4),p+=4+A}if(m.setUint32(Ve.#a,p-Ve.#a-4),!e)m.setUint32(p,0),p+=4;else{const x=e.byteLength;m.setUint32(p,x),De(p+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),p+4),p+=4+x}if(!i)m.setUint32(p,0),p+=4;else{const x=i.byteLength;m.setUint32(p,x),De(p+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),p+4),p+=4+x}return t.data===void 0?(m.setUint32(p,0),p+=4):(m.setUint32(p,t.data.length),f.set(t.data,p+4),p+=4+t.data.length),De(p<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(p)}}class go{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class r6{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const oo=Symbol("INTERNAL");class s6{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:i,usage:r,rbGroups:a}){this.#t=!!(t&Mn.DISPLAY),this.#e=!!(t&Mn.PRINT),this.name=e,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==oo&&Ke("Internal method `_setVisible` called."),this.#n=i,this.#i=e}}class a6{#t=null;#e=new Map;#n=null;#i=null;constructor(t,e=Mn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const i of t.groups)this.#e.set(i.id,new s6(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(oo,!1);for(const i of t.on)this.#e.get(i)._setVisible(oo,!0);for(const i of t.off)this.#e.get(i)._setVisible(oo,!1);this.#n=this.getHash()}}#a(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const a=t[r];let o;if(Array.isArray(a))o=this.#a(a);else if(this.#e.has(a))o=this.#e.get(a).visible;else return fe(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return au("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(fe(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return fe(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return fe(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return fe(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return fe(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return fe(`Unknown optional content policy ${t.policy}.`),!0}return fe(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const r=this.#e.get(t);if(!r){fe(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const a of r.rbGroups)for(const o of a)o!==t&&this.#e.get(o)?._setVisible(oo,!1,!0);r._setVisible(oo,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const a=this.#e.get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!a.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new a4;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class o6{constructor(t,{disableRange:e=!1,disableStream:i=!1}){De(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:o,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=u,a?.length>0){const h=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(i),!0)});De(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){De(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new l6(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new c6(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class l6{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=Lf(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class c6{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function u6(l){let t=!0,e=i("filename\\*","i").exec(l);if(e){e=e[1];let m=u(e);return m=unescape(m),m=h(m),m=f(m),a(m)}if(e=o(l),e){const m=f(e);return a(m)}if(e=i("filename","i").exec(l),e){e=e[1];let m=u(e);return m=f(m),a(m)}function i(m,p){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function r(m,p){if(m){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const b=new TextDecoder(m,{fatal:!0}),v=Yl(p);p=b.decode(v),t=!1}catch{}}return p}function a(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function o(m){const p=[];let b;const v=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(m))!==null;){let[,x,_,A]=b;if(x=parseInt(x,10),x in p){if(x===0)break;continue}p[x]=[_,A]}const w=[];for(let x=0;x<p.length&&x in p;++x){let[_,A]=p[x];A=u(A),_&&(A=unescape(A),x===0&&(A=h(A))),w.push(A)}return w.join("")}function u(m){if(m.startsWith('"')){const p=m.slice(1).split('\\"');for(let b=0;b<p.length;++b){const v=p[b].indexOf('"');v!==-1&&(p[b]=p[b].slice(0,v),p.length=b+1),p[b]=p[b].replaceAll(/\\(.)/g,"$1")}m=p.join('"')}return m}function h(m){const p=m.indexOf("'");if(p===-1)return m;const b=m.slice(0,p),w=m.slice(p+1).replace(/^[^']*'/,"");return r(b,w)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,b,v,w){if(v==="q"||v==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,_){return String.fromCharCode(parseInt(_,16))}),r(b,w);try{w=atob(w)}catch{}return r(b,w)})}return""}function f4(l,t){const e=new Headers;if(!l||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function cu(l){return URL.parse(l)?.origin??null}function m4({responseHeaders:l,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(l.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*e)||i||!t||l.get("Accept-Ranges")!=="bytes"||(l.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function p4(l){const t=l.get("Content-Disposition");if(t){let e=u6(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Lf(e))return e}return null}function Zl(l,t){return new Y0(`Unexpected server response (${l}) while retrieving PDF "${t}".`,l,l===404||l===0&&t.startsWith("file:"))}function g4(l){return l===200||l===206}function b4(l,t,e){return{method:"GET",headers:l,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function v4(l){return l instanceof Uint8Array?l.buffer:l instanceof ArrayBuffer?l:(fe(`getArrayBuffer - unexpected data format: ${l}`),new Uint8Array(l).buffer)}class h6{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=f4(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return De(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d6(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new f6(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class d6{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,b4(i,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=cu(a.url),!g4(a.status))throw Zl(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:u,suggestedLength:h}=m4({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=p4(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Is("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:v4(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class f6{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${i-1}`);const o=r.url;fetch(o,b4(a,this._withCredentials,this._abortController)).then(u=>{const h=cu(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!g4(u.status))throw Zl(u.status,o);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:v4(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const jd=200,Hd=206;function m6(l){const t=l.response;return typeof t!="string"?t:Yl(t).buffer}class p6{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=f4(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,o]of this.headers)e.setRequestHeader(a,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Hd):r.expectedStatus=jd,e.responseType="arraybuffer",De(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const a=r.status||jd;if(!(a===jd&&i.expectedStatus===Hd)&&a!==i.expectedStatus){i.onError(r.status);return}const u=m6(r);if(a===Hd){const h=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?i.onDone({begin:parseInt(f[1],10),chunk:u}):(fe('Missing or invalid "Content-Range" header.'),i.onError(0))}else u?i.onDone({begin:0,chunk:u}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class g6{constructor(t){this._source=t,this._manager=new p6(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return De(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new b6(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new v6(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class b6{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=cu(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=m4({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=p4(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Zl(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class v6{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=cu(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Zl(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const y6=/^[a-z][a-z0-9\-+.]+:/i;function x6(l){if(y6.test(l))return new URL(l);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(l))}class w6{constructor(t){this.source=t,this.url=x6(t.url),De(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return De(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new S6(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new A6(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class S6{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Zl(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Is("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class A6{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const wl=Symbol("INITIAL_DATA");class y4{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:wl}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const i=this.#t[t];if(!i||i.data===wl)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==wl}delete(t){const e=this.#t[t];return!e||e.data===wl?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==wl&&(yield[t,e])}}}const _6=1e5,U2=30;class Qi{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#b=null;static#y=new Map;static#v=new Map;static#E=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*wr.pixelRatio,this.#d=i.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:a,pageX:o,pageY:u}=i.rawDims;this.#b=[1,0,0,-1,-o,u+a],this.#o=r,this.#s=a,Qi.#M(),ga(e,i),this.#t.promise.finally(()=>{Qi.#x.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Hi.platform;return Se(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#a??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#m.getReader(),Qi.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*wr.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,ga(this.#l,{rotation:r})),i!==this.#h){e?.(),this.#h=i;const a={div:null,properties:null,ctx:Qi.#R(this.#a)};for(const o of this.#u)a.properties=this.#p.get(o),a.div=o,this.#_(a)}}cancel(){const t=new Is("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(t){if(this.#n)return;this.#r.ctx??=Qi.#R(this.#a);const e=this.#u,i=this.#g;for(const r of t){if(e.length>_6){fe("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),a.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(r.str),this.#S(r)}}#S(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const r=Xt.transform(this.#b,t.transform);let a=Math.atan2(r[1],r[0]);const o=this.#f[t.fontName];o.vertical&&(a+=Math.PI/2);let u=this.#i&&o.fontSubstitution||o.fontFamily;u=Qi.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),f=h*Qi.#I(u,o,this.#a);let m,p;a===0?(m=r[4],p=r[5]-f):(m=r[4]+f*Math.sin(a),p=r[5]-f*Math.cos(a));const b="calc(var(--total-scale-factor) *",v=e.style;this.#e===this.#l?(v.left=`${(100*m/this.#o).toFixed(2)}%`,v.top=`${(100*p/this.#s).toFixed(2)}%`):(v.left=`${b}${m.toFixed(2)}px)`,v.top=`${b}${p.toFixed(2)}px)`),v.fontSize=`${b}${(Qi.#A*h).toFixed(2)}px)`,v.fontFamily=u,i.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),a!==0&&(i.angle=a*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),_=Math.abs(t.transform[3]);x!==_&&Math.max(x,_)/Math.min(x,_)>1.5&&(w=!0)}if(w&&(i.canvasWidth=o.vertical?t.height:t.width),this.#p.set(e,i),this.#r.div=e,this.#r.properties=i,this.#_(this.#r),i.hasText&&this.#e.append(e),i.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#_(t){const{div:e,properties:i,ctx:r}=t,{style:a}=e;let o="";if(Qi.#A>1&&(o=`scale(${1/Qi.#A})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:u}=a,{canvasWidth:h,fontSize:f}=i;Qi.#C(r,f*this.#h,u);const{width:m}=r.measureText(e.textContent);m>0&&(o=`scaleX(${h*this.#h/m}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#x.size>0)){this.#y.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#R(t=null){let e=this.#v.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#C(t,e,i){const r=this.#E.get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)}static#M(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#I(t,e,i){const r=this.#y.get(t);if(r)return r;const a=this.#R(i);a.canvas.width=a.canvas.height=U2,this.#C(a,U2,t);const o=a.measureText(""),u=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let f=.8;return u?f=u/(u+h):(Hi.platform.isFirefox&&fe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#y.set(t,f),f}}const E6=100;function x4(l={}){typeof l=="string"||l instanceof URL?l={url:l}:(l instanceof ArrayBuffer||ArrayBuffer.isView(l))&&(l={data:l});const t=new Hf,{docId:e}=t,i=l.url?N5(l.url):null,r=l.data?O5(l.data):null,a=l.httpHeaders||null,o=l.withCredentials===!0,u=l.password??null,h=l.range instanceof w4?l.range:null,f=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:2**16;let m=l.worker instanceof Pl?l.worker:null;const p=l.verbosity,b=typeof l.docBaseUrl=="string"&&!ou(l.docBaseUrl)?l.docBaseUrl:null,v=w0(l.cMapUrl),w=l.cMapPacked!==!1,x=l.CMapReaderFactory||(Ji?j5:k2),_=w0(l.iccUrl),A=w0(l.standardFontDataUrl),T=l.StandardFontDataFactory||(Ji?H5:T2),M=w0(l.wasmUrl),R=l.WasmFactory||(Ji?G5:C2),D=l.stopAtErrors!==!0,L=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,z=l.isEvalSupported!==!1,q=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!Ji,U=typeof l.isImageDecoderSupported=="boolean"?l.isImageDecoderSupported:!Ji&&(Hi.platform.isFirefox||!globalThis.chrome),it=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,ut=typeof l.disableFontFace=="boolean"?l.disableFontFace:Ji,H=l.fontExtraProperties===!0,rt=l.enableXfa===!0,N=l.ownerDocument||globalThis.document,at=l.disableRange===!0,X=l.disableStream===!0,W=l.disableAutoFetch===!0,xt=l.pdfBug===!0,bt=l.CanvasFactory||(Ji?U5:I5),Rt=l.FilterFactory||(Ji?P5:F5),B=l.enableHWA===!0,P=l.useWasm!==!1,st=h?h.length:l.length??NaN,pt=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!Ji&&!ut,vt=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:!!(x===k2&&T===T2&&R===C2&&v&&A&&M&&kl(v,document.baseURI)&&kl(A,document.baseURI)&&kl(M,document.baseURI)),Ut=null;a5(p);const Ft={canvasFactory:new bt({ownerDocument:N,enableHWA:B}),filterFactory:new Rt({docId:e,ownerDocument:N}),cMapReaderFactory:vt?null:new x({baseUrl:v,isCompressed:w}),standardFontDataFactory:vt?null:new T({baseUrl:A}),wasmFactory:vt?null:new R({baseUrl:M})};m||(m=Pl.create({verbosity:p,port:go.workerPort}),t._worker=m);const Yt={docId:e,apiVersion:"5.4.296",data:r,password:u,disableAutoFetch:W,rangeChunkSize:f,length:st,docBaseUrl:b,enableXfa:rt,evaluatorOptions:{maxImageSize:L,disableFontFace:ut,ignoreErrors:D,isEvalSupported:z,isOffscreenCanvasSupported:q,isImageDecoderSupported:U,canvasMaxAreaInBytes:it,fontExtraProperties:H,useSystemFonts:pt,useWasm:P,useWorkerFetch:vt,cMapUrl:v,iccUrl:_,standardFontDataUrl:A,wasmUrl:M}},qt={ownerDocument:N,pdfBug:xt,styleElement:Ut,loadingParams:{disableAutoFetch:W,enableXfa:rt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ke=m.messageHandler.sendWithPromise("GetDocRequest",Yt,r?[r.buffer]:null);let Ae;if(h)Ae=new o6(h,{disableRange:at,disableStream:X});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ei=kl(i)?h6:Ji?w6:g6;Ae=new ei({url:i,length:st,httpHeaders:a,withCredentials:o,rangeChunkSize:f,disableRange:at,disableStream:X})}return ke.then(ei=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const hi=new Tl(e,ei,m.port),C=new C6(hi,t,Ae,qt,Ft,B);t._transport=C,hi.send("Ready",null)})}).catch(t._capability.reject),t}class Hf{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Hf.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class w4{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#a=[];constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#a)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#i)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#n)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Ke("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class k6{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Se(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class T6{#t=!1;constructor(t,e,i,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new y2:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new y4,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new Xl({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Se(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:r="display",annotationMode:a=Os.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:p=null,isEditing:b=!1,recordOperations:v=!1,operationsFilter:w=null}){this._stats?.time("Overall");const x=this._transport.getRenderingIntent(r,a,p,b),{renderingIntent:_,cacheKey:A}=x;this.#t=!1,h||=this._transport.getOptionalContentConfig(_);let T=this._intentStates.get(A);T||(T=Object.create(null),this._intentStates.set(A,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const M=!!(_&Mn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(x));const R=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(v||R),L=U=>{if(T.renderTasks.delete(z),D){const it=z.gfx?.dependencyTracker.take();it&&(z.stepper&&z.stepper.setOperatorBBoxes(it,z.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=it))}M&&(this.#t=!0),this.#e(),U?(z.capability.reject(U),this._abortOperatorList({intentState:T,reason:U instanceof Error?U:new Error(U)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},z=new ho({callback:L,params:{canvas:e,canvasContext:t,dependencyTracker:D?new $5(e,T.operatorList.length,R):null,viewport:i,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:w});(T.renderTasks||=new Set).add(z);const q=z.task;return Promise.all([T.displayReadyCapability.promise,h]).then(([U,it])=>{if(this.destroyed){L();return}if(this._stats?.time("Rendering"),!(it.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");z.initializeGraphics({transparency:U,optionalContentConfig:it}),z.operatorListChanged()}).catch(L),q}getOperatorList({intent:t="display",annotationMode:e=Os.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function a(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,e,i,r,!0);let u=this._intentStates.get(o.cacheKey);u||(u=Object.create(null),this._intentStates.set(o.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=a,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Fl.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function a(){o.read().then(function({value:h,done:f}){if(f){i(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),a()},r)}const o=e.getReader(),u={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new y2),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:a,transfer:o}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:r},o).getReader(),f=this._intentStates.get(e);f.streamReader=h;const m=()=>{h.read().then(({value:p,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,f),m())},p=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(p);else if(f.opListReadCapability)f.opListReadCapability.reject(p);else throw p}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof zf){let r=E6;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Is(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var zs,tr,Wr,fa,nu,ma,pa,rn,j0,S4,A4,Cl,vo,H0;const si=class si{constructor({name:t=null,port:e=null,verbosity:i=o5()}={}){hr(this,rn);hr(this,zs,Promise.withResolvers());hr(this,tr,null);hr(this,Wr,null);hr(this,fa,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(ri(si,pa).has(e))throw new Error("Cannot use more than one PDFWorker per port.");ri(si,pa).set(e,this),dr(this,rn,S4).call(this,e)}else dr(this,rn,A4).call(this)}get promise(){return ri(this,zs).promise}get port(){return ri(this,Wr)}get messageHandler(){return ri(this,tr)}destroy(){this.destroyed=!0,ri(this,fa)?.terminate(),gn(this,fa,null),ri(si,pa).delete(ri(this,Wr)),gn(this,Wr,null),ri(this,tr)?.destroy(),gn(this,tr,null)}static create(t){const e=ri(this,pa).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new si(t)}static get workerSrc(){if(go.workerSrc)return go.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Se(this,"_setupFakeWorkerGlobal",(async()=>ri(this,vo,H0)?ri(this,vo,H0):(await import(this.workerSrc)).WorkerMessageHandler)())}};zs=new WeakMap,tr=new WeakMap,Wr=new WeakMap,fa=new WeakMap,nu=new WeakMap,ma=new WeakMap,pa=new WeakMap,rn=new WeakSet,j0=function(){ri(this,zs).resolve(),ri(this,tr).send("configure",{verbosity:this.verbosity})},S4=function(t){gn(this,Wr,t),gn(this,tr,new Tl("main","worker",t)),ri(this,tr).on("ready",()=>{}),dr(this,rn,j0).call(this)},A4=function(){if(ri(si,ma)||ri(si,vo,H0)){dr(this,rn,Cl).call(this);return}let{workerSrc:t}=si;try{si._isSameOrigin(window.location,t)||(t=si._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Tl("main","worker",e),r=()=>{a.abort(),i.destroy(),e.terminate(),this.destroyed?ri(this,zs).reject(new Error("Worker was destroyed")):dr(this,rn,Cl).call(this)},a=new AbortController;e.addEventListener("error",()=>{ri(this,fa)||r()},{signal:a.signal}),i.on("test",u=>{if(a.abort(),this.destroyed||!u){r();return}gn(this,tr,i),gn(this,Wr,e),gn(this,fa,e),dr(this,rn,j0).call(this)}),i.on("ready",u=>{if(a.abort(),this.destroyed){r();return}try{o()}catch{dr(this,rn,Cl).call(this)}});const o=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};o();return}catch{au("The worker has been disabled.")}dr(this,rn,Cl).call(this)},Cl=function(){ri(si,ma)||(fe("Setting up fake worker."),gn(si,ma,!0)),si._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){ri(this,zs).reject(new Error("Worker was destroyed"));return}const e=new B5;gn(this,Wr,e);const i=`fake${a2(si,nu)._++}`,r=new Tl(i+"_worker",i,e);t.setup(r,e),gn(this,tr,new Tl(i,i+"_worker",e)),dr(this,rn,j0).call(this)}).catch(t=>{ri(this,zs).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},vo=new WeakSet,H0=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},hr(si,vo),hr(si,nu,0),hr(si,ma,!1),hr(si,pa,new WeakMap),Ji&&(gn(si,ma,!0),go.workerSrc||="./pdf.worker.mjs"),si._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const r=new URL(e,i);return i.origin===r.origin},si._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},si.fromPort=t=>{if(y5("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return si.create(t)};let Pl=si;class C6{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#a=null;constructor(t,e,i,r,a,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new y4,this.fontLoader=new R5({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#r(t,e=null){const i=this.#t.get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return Se(this,"annotationStorage",new Ff)}getRenderingIntent(t,e=Os.ENABLE,i=null,r=!1,a=!1){let o=Mn.DISPLAY,u=hf;switch(t){case"any":o=Mn.ANY;break;case"display":break;case"print":o=Mn.PRINT;break;default:fe(`getRenderingIntent - invalid intent: ${t}`)}const h=o&Mn.PRINT&&i instanceof o4?i:this.annotationStorage;switch(e){case Os.DISABLE:o+=Mn.ANNOTATIONS_DISABLE;break;case Os.ENABLE:break;case Os.ENABLE_FORMS:o+=Mn.ANNOTATIONS_FORMS;break;case Os.ENABLE_STORAGE:o+=Mn.ANNOTATIONS_STORAGE,u=h.serializable;break;default:fe(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(o+=Mn.IS_EDITING),a&&(o+=Mn.OPLIST);const{ids:f,hash:m}=h.modifiedIds,p=[o,u.hash,m];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Qi.cleanup(),this._networkStream?.cancelAllRequests(new Is("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{De(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){r.close();return}De(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:o}=this._fullReader;return(!r||!a)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:o}}),t.on("GetRangeReader",(i,r)=>{De(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:o,done:u}){if(u){r.close();return}De(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{a.cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new k6(i,this))}),t.on("DocException",i=>{e._capability.reject(bn(i))}),t.on("PasswordRequest",i=>{this.#a=Promise.withResolvers();try{if(!e.onPassword)throw bn(i);const r=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};e.onPassword(r,i.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,a])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in a){const m=a.error;fe(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const o=new Ve(a),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,p)=>globalThis.FontInspector.fontAdded(m,p):null,h=new D5(o,u,a.extra,a.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:f}=a;De(f,"The imageRef must be defined.");for(const m of this.#e.values())for(const[,p]of m.objs)if(p?.ref===f)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,a,o])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(i)){if(u._intentStates.size===0){o?.bitmap?.close();return}switch(a){case"Image":case"Pattern":u.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&fe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#n.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#i.set(a.refStr,t);const o=new T6(e,a,this,this._params.pdfBug);return this.#e.set(e,o),o});return this.#n.set(e,r),r}getPageIndex(t){return df(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new a6(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new r6(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Qi.cleanup()}}cachedPageNumber(t){if(!df(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}}class M6{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ho{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:o,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:p=!1,pageColors:b=null,enableHWA:v=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=p,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new M6(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ho.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ho.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:r,background:a,dependencyTracker:o}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new fo(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ho.#e.delete(this._canvas),t||=new zf(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ho.#e.delete(this._canvas),this.callback())))}}const R6="5.4.296",D6="f56dc8601";class $n{#t=null;#e=null;#n;#i=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Se(this,"_keyboardManager",new Wl([[["Escape","mac+Escape"],$n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],$n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],$n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],$n.prototype._moveToPrevious],[["Home","mac+Home"],$n.prototype._moveToBeginning],[["End","mac+End"],$n.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#s=t):this.#r=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",$n.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Vn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[i,r]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",$n.#d[i]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=r,a.ariaSelected=r===this.#n,a.addEventListener("click",this.#f.bind(this,r),{signal:e}),t.append(a)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Re.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#m(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#m(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#m(t);return}this.#i.lastChild?.focus()}#g(t){$n._keyboardManager.exec(this,t)}#m(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const e=this.#i=this.#h();this.#t.append(e)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const e=this.#l.highlightColors.values();for(const i of this.#i.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class Ul{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,Ul.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Ul.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(e,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function j2(l){return Math.floor(Math.max(0,Math.min(1,l))*255).toString(16).padStart(2,"0")}function Sl(l){return Math.max(0,Math.min(255,255*l))}class H2{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Sl(t),[t,t,t]}static G_HTML([t]){const e=j2(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Sl)}static RGB_HTML(t){return`#${t.map(j2).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[Sl(1-Math.min(1,t+r)),Sl(1-Math.min(1,i+r)),Sl(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,a=1-e,o=1-i,u=Math.min(r,a,o);return["CMYK",r,a,o,u]}}class N6{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ke("Abstract method `_createSVG` called.")}}class X0 extends N6{_createSVG(t){return document.createElementNS(Vr,t)}}const O6=9,ba=new WeakSet,z6=new Date().getTimezoneOffset()*60*1e3;class G2{static create(t){switch(t.data.annotationType){case Ti.LINK:return new Gf(t);case Ti.TEXT:return new B6(t);case Ti.WIDGET:switch(t.data.fieldType){case"Tx":return new I6(t);case"Btn":return t.data.radioButton?new _4(t):t.data.checkBox?new P6(t):new U6(t);case"Ch":return new j6(t);case"Sig":return new F6(t)}return new wa(t);case Ti.POPUP:return new pf(t);case Ti.FREETEXT:return new E4(t);case Ti.LINE:return new G6(t);case Ti.SQUARE:return new q6(t);case Ti.CIRCLE:return new $6(t);case Ti.POLYLINE:return new k4(t);case Ti.CARET:return new V6(t);case Ti.INK:return new qf(t);case Ti.POLYGON:return new Y6(t);case Ti.HIGHLIGHT:return new T4(t);case Ti.UNDERLINE:return new X6(t);case Ti.SQUIGGLY:return new K6(t);case Ti.STRIKEOUT:return new W6(t);case Ti.STAMP:return new C4(t);case Ti.FILEATTACHMENT:return new Z6(t);default:return new ui(t)}}}class ui{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ui._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:r}=this.data;let a=-1/0,o=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>o?(o=e[u+1],a=e[u+2]):e[u+1]===o&&(a=Math.max(a,e[u+2]));return[a,o]}if(i?.length>=1){for(const u of i)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>o?(o=u[h+1],a=u[h]):u[h+1]===o&&(a=Math.max(a,u[h]));if(a!==1/0)return[a,o]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-a)/i,t[1]=100*(t[1]-o)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Bl}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${Bl}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#i(e);let r=this.#n?.popup||this.popup;!r&&i?.text&&(this._createPopup(i),r=this.#n.popup),r&&(r.updateEdited(t),i?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:u,pageY:h}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-u)/a}%`,e.top=`${100*(o-t[3]+h)/o}%`,r===0?(e.width=`${100*(t[2]-t[0])/a}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),!(this instanceof wa)&&!(this instanceof Gf)&&(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof pf){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,a),a}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(x>0||_>0){const T=`calc(${x}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;o.borderRadius=T}else if(this instanceof _4){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;o.borderRadius=T}switch(e.borderStyle.style){case ao.SOLID:o.borderStyle="solid";break;case ao.DASHED:o.borderStyle="dashed";break;case ao.BEVELED:fe("Unimplemented border style: beveled");break;case ao.INSET:fe("Unimplemented border style: inset");break;case ao.UNDERLINE:o.borderBottomStyle="solid";break}const A=e.borderColor||null;A?(this.#e=!0,o.borderColor=Xt.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):o.borderWidth=0}const f=Xt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:p,pageX:b,pageY:v}=r.rawDims;o.left=`${100*(f[0]-b)/m}%`,o.top=`${100*(f[1]-v)/p}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(o.width=`${100*u/m}%`,o.height=`${100*h/p}%`):this.setRotation(w,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims;let{width:a,height:o}=this;t%180!==0&&([a,o]=[o,a]),e.style.width=`${100*a/i}%`,e.style.height=`${100*o/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const a=r.detail[e],o=a[0],u=a.slice(1);r.target.style[i]=H2[`${o}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:H2[`${o}_rgb`](u)})};return Se(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||i[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,a]of Object.entries(e)){const o=i[r];if(o){const u={detail:{[r]:a},target:t};o(u),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,a]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,_,A,T]=t.subarray(2,6);if(r===x&&a===_&&e===A&&i===T)return}const{style:o}=this.container;let u;if(this.#e){const{borderColor:x,borderWidth:_}=o;o.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const h=r-e,f=a-i,{svgFactory:m}=this,p=m.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const b=m.createElement("defs");p.append(b);const v=m.createElement("clipPath"),w=`clippath_${this.data.id}`;v.setAttribute("id",w),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let x=2,_=t.length;x<_;x+=8){const A=t[x],T=t[x+1],M=t[x+2],R=t[x+3],D=m.createElement("rect"),L=(M-e)/h,z=(a-T)/f,q=(A-M)/h,U=(T-R)/f;D.setAttribute("x",L),D.setAttribute("y",z),D.setAttribute("width",q),D.setAttribute("height",U),v.append(D),u?.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${z}" width="${q}" height="${U}"/>`)}this.#e&&(u.push("</g></svg>')"),o.backgroundImage=u.join("")),this.container.append(p),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let i,r;t?(i={str:t.text},r=t.date):(i=e.contentsObj,r=e.modificationDate);const a=this.#n=new pf({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Ke("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:a,id:o,exportValues:u}of r){if(a===-1||o===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${o}"]`);if(f&&!ba.has(f)){fe(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:h,domElement:f})}return i}for(const r of document.getElementsByName(t)){const{exportValue:a}=r,o=r.getAttribute("data-element-id");o!==e&&ba.has(r)&&i.push({id:o,exportValue:a,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class L6 extends ui{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Gf extends ui{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(i,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#n(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const a=i.get(r);a&&(t[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){fe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:r,refs:a,include:o}=e,u=[];if(r.length!==0||a.length!==0){const m=new Set(a);for(const p of r){const b=this._fieldObjects[p]||[];for(const{id:v}of b)m.add(v)}for(const p of Object.values(this._fieldObjects))for(const b of p)m.has(b.id)===o&&u.push(b)}else for(const m of Object.values(this._fieldObjects))u.push(...m);const h=this.annotationStorage,f=[];for(const m of u){const{id:p}=m;switch(f.push(p),m.type){case"text":{const v=m.defaultValue||"";h.setValue(p,{value:v});break}case"checkbox":case"radiobutton":{const v=m.defaultValue===m.exportValues;h.setValue(p,{value:v});break}case"combobox":case"listbox":{const v=m.defaultValue||"";h.setValue(p,{value:v});break}default:continue}const b=document.querySelector(`[data-element-id="${p}"]`);if(b){if(!ba.has(b)){fe(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class B6 extends ui{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class wa extends ui{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Hi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,a){i.includes("mouse")?t.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(o)}})})}_setEventListeners(t,e,i,r){for(const[a,o]of i)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,a,o,r),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Xt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||O6,a=t.style;let o;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(f/(Ld*r))||1,p=f/m;o=Math.min(r,h(p/Ld))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);o=Math.min(r,h(f/Ld))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=Xt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class I6 extends wa{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const a=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),a.setValue(o.id,{[r]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let a=r.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),ba.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:p}=this.data,b=!!m&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",w=>{const x=this.data.defaultFieldValue??"";i.value=h.userValue=x,h.formattedValue=null});let v=w=>{const{formattedValue:x}=h;x!=null&&(w.target.value=x),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",x=>{if(h.focused)return;const{target:_}=x;if(b&&(_.type=m,p&&(_.step=p)),h.userValue){const A=h.userValue;if(b)if(m==="time"){const T=new Date(A),M=[T.getHours(),T.getMinutes(),T.getSeconds()];_.value=M.map(R=>R.toString().padStart(2,"0")).join(":")}else _.value=new Date(A-z6).toISOString().split(m==="date"?"T":".",1)[0];else _.value=A}h.lastCommittedValue=_.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const _={value(A){h.userValue=A.detail.value??"",b||t.setValue(e,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:T}=A.detail;h.formattedValue=T,T!=null&&A.target!==document.activeElement&&(A.target.value=T);const M={formattedValue:T};b&&(M.value=T),t.setValue(e,M)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:T}=A.detail,{target:M}=A;if(T===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",T);let R=h.userValue;!R||R.length<=T||(R=R.slice(0,T),M.value=h.userValue=R,t.setValue(e,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(_,x)}),i.addEventListener("keydown",x=>{h.commitKey=1;let _=-1;if(x.key==="Escape"?_=0:x.key==="Enter"&&!this.data.multiLine?_=2:x.key==="Tab"&&(h.commitKey=3),_===-1)return;const{value:A}=x.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:_,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const w=v;v=null,i.addEventListener("blur",x=>{if(!h.focused||!x.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:_}=x;let{value:A}=_;if(b){if(A&&m==="time"){const T=A.split(":").map(M=>parseInt(M,10));A=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),_.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();_.type="text"}h.userValue=A,h.lastCommittedValue!==A&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:h.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),w(x)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",x=>{h.lastCommittedValue=null;const{data:_,target:A}=x,{value:T,selectionStart:M,selectionEnd:R}=A;let D=M,L=R;switch(x.inputType){case"deleteWordBackward":{const z=T.substring(0,M).match(/\w*[^\w]*$/);z&&(D-=z[0].length);break}case"deleteWordForward":{const z=T.substring(M).match(/^[^\w]*\w*/);z&&(L+=z[0].length);break}case"deleteContentBackward":M===R&&(D-=1);break;case"deleteContentForward":M===R&&(L+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:_||"",willCommit:!1,selStart:D,selEnd:L}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class F6 extends wa{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class P6 extends wa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return ba.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const f of this._getElementsByName(u,i)){const m=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(i,{value:h})}),a.addEventListener("resetform",o=>{const u=e.defaultFieldValue||"Off";o.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class _4 extends wa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const a=document.createElement("input");if(ba.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const f of this._getElementsByName(u,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:h})}),a.addEventListener("resetform",o=>{const u=e.defaultFieldValue;o.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;a.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const m=o===f.detail.value;for(const p of this._getElementsByName(f.target.name)){const b=m&&p.id===i;p.domElement&&(p.domElement.checked=b),t.setValue(p.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class U6 extends Gf{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class j6 extends wa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");ba.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const p=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===p});for(const m of this.data.options){const p=document.createElement("option");p.textContent=m.displayValue,p.value=m.exportValue,i.value.includes(m.exportValue)&&(p.setAttribute("selected",!0),a=!1),r.append(p)}let o=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),o=()=>{m.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const u=m=>{const p=m?"value":"textContent",{options:b,multiple:v}=r;return v?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[p]):b.selectedIndex===-1?null:b[b.selectedIndex][p]};let h=u(!1);const f=m=>{const p=m.target.options;return Array.prototype.map.call(p,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const p={value(b){o?.();const v=b.detail.value,w=new Set(Array.isArray(v)?v:[v]);for(const x of r.options)x.selected=w.has(x.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(b){r.multiple=!0},remove(b){const v=r.options,w=b.detail.remove;v[w].selected=!1,r.remove(w),v.length>0&&Array.prototype.findIndex.call(v,_=>_.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(b){const{index:v,displayValue:w,exportValue:x}=b.detail.insert,_=r.children[v],A=document.createElement("option");A.textContent=w,A.value=x,_?_.before(A):r.append(A),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:v}=b.detail;for(;r.length!==0;)r.remove(0);for(const w of v){const{displayValue:x,exportValue:_}=w,A=document.createElement("option");A.textContent=x,A.value=_,r.append(A)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const v=new Set(b.detail.indices);for(const w of b.target.options)w.selected=v.has(w.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(p,m)}),r.addEventListener("input",m=>{const p=u(!0),b=u(!1);t.setValue(e,{value:p}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:b,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class pf extends ui{constructor(t){const{data:e,elements:i,parent:r}=t,a=!!r._commentManager;if(super(t,{isRenderable:!a&&ui._hasPopupData(e)}),this.elements=i,a&&ui._hasPopupData(e)){const o=this.popup=this.#t();for(const u of i)u.popup=o}else this.popup=null}#t(){return new H6({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${Of}${r}`).join(",")),this.container}}class H6{#t=null;#e=this.#q.bind(this);#n=this.#P.bind(this);#i=this.#O.bind(this);#a=this.#w.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#b=null;#y=null;#v=null;#E=null;#A=null;#x=null;#T=!1;#S=null;#_=null;constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:a,contentsObj:o,richText:u,parent:h,rect:f,parentRect:m,open:p,commentManager:b=null}){this.#s=t,this.#A=r,this.#o=o,this.#E=u,this.#d=h,this.#r=e,this.#v=f,this.#h=m,this.#l=i,this.#t=b,this.#S=i[0],this.#c=lf.toDateObject(a),this.trigger=i.flatMap(v=>v.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#R(),this.#s.hidden=!0,p&&this.#w())}#R(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#a,{signal:t}),e.addEventListener("pointerenter",this.#i,{signal:t}),e.addEventListener("pointerleave",this.#n,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#C(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#b||this.#C(),!this.#b))return;const{signal:t}=this.#m=new AbortController,e=!!this.#S.extraPopupElement,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#S.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",a,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=this.#p=document.createElement("button");o.className="annotationCommentButton";const u=this.#S.container;o.style.zIndex=u.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#M(),o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",a,{signal:t}),u.after(o)}}#M(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[t,e]=this.#b,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#I(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#S.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:r,modificationDate:a}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:r,modificationDate:a}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#S.commentText,this.#_}set comment(t){t!==this.comment&&(this.#S.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#y)return this.#y;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:r,y:a,width:o,height:u}=this.#S.layer.getBoundingClientRect();return[(t-r)/o,(e+i-a)/u]}set commentPopupPosition(t){this.#y=t}hasDefaultPopupPosition(){return this.#y===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#y||this.commentButtonPosition.map(f=>f/100),r=this.parentBoundingClientRect,{x:a,y:o,width:u,height:h}=r;this.#t.showDialog(null,this,a+e*u,o+i*h,{...t,parentDimensions:r})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#r){const i=t.style.outlineColor=Xt.makeHexColor(...this.#r);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#A?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#A}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}r4({html:this.#N||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#N(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#z(){return this.#N?.attributes?.style?.fontSize||0}get#F(){return this.#N?.attributes?.style?.color||null}#L(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#F,fontSize:this.#z?`calc(${this.#z}px * var(--total-scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:r});return i}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#I(),this.#_=e.text)),t&&(this.#b=null,this.#C(),this.#M());return}if(i||e?.deleted){this.remove();return}this.#R(),this.#x||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),e&&e.text&&(this.#E=this.#L(e.text),this.#c=lf.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#E}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#k(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:a}}}=this.#d;let o=!!this.#h,u=o?this.#h:this.#v;for(const w of this.#l)if(!u||Xt.intersect(w.data.rect,u)!==null){u=w.data.rect,o=!0;break}const h=Xt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),m=o?u[2]-u[0]+5:0,p=h[0]+m,b=h[1];this.#u=[100*(p-r)/e,100*(b-a)/i];const{style:v}=this.#s;v.left=`${this.#u[0]}%`,v.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#e)):(this.#P(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#e))}#O(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#k(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#P(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#T&&(this.#g||this.#O(),this.#T=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class E4 extends ui{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ge.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class G6 extends ui{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=this.#t=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class q6 extends ui{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",e-a),o.setAttribute("height",i-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class $6 extends ui{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),a=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",i/2),o.setAttribute("rx",e/2-a/2),o.setAttribute("ry",i/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class k4 extends ui{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:r},width:a,height:o}=this;if(!e)return this.container;const u=this.svgFactory.create(a,o,!0);let h=[];for(let m=0,p=e.length;m<p;m+=2){const b=e[m]-t[0],v=t[3]-e[m+1];h.push(`${b},${v}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Y6 extends k4{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class V6 extends ui{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class qf extends ui{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ge.HIGHLIGHT:ge.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:r,popupRef:a}}=this,{transform:o,width:u,height:h}=this.#n(e,t),f=this.svgFactory.create(u,h,!0),m=this.#t=this.svgFactory.createElement("svg:g");f.append(m),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",o);for(let p=0,b=i.length;p<b;p++){const v=this.svgFactory.createElement(this.svgElementName);this.#e.push(v),v.setAttribute("points",i[p].join(",")),m.append(v)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:r}=t,a=this.#t;if(e>=0&&a.setAttribute("stroke-width",e||1),i)for(let o=0,u=this.#e.length;o<u;o++)this.#e[o].setAttribute("points",i[o].join(","));if(r){const{transform:o,width:u,height:h}=this.#n(this.data.rotation,r);a.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class T4 extends ui{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ge.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class X6 extends ui{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class K6 extends ui{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class W6 extends ui{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class C4 extends ui{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ge.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Z6 extends ui{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:r}=Hi.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class $f{#t=null;#e=null;#n=null;#i=new Map;#a=null;#r=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:o,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:m}){this.div=t,this.#t=e,this.#e=i,this.#a=u||null,this.#r=f||null,this.#n=m||new Ff,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async#s(t,e,i){const r=t.firstChild||t,a=r.id=`${Of}${e}`,o=await this.#a?.getAriaAttributes(a);if(o)for(const[u,h]of o)r.setAttribute(u,h);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:e}=t,i=this.div;ga(i,this.viewport);const r=new Map,a={data:null,layer:i,linkService:this.#r,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new X0,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const u=o.annotationType===Ti.POPUP;if(u){const m=r.get(o.id);if(!m)continue;a.elements=m}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const h=G2.create(a);if(!h.isRenderable)continue;if(!u&&o.popupRef){const m=r.get(o.popupRef);m?m.push(h):r.set(o.popupRef,[h])}const f=h.render();o.hidden&&(f.style.visibility="hidden"),await this.#s(f,o.id,a.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#i.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#r,svgFactory:new X0,parent:this};for(const i of t){i.borderStyle||=$f._defaultBorderStyle,e.data=i;const r=G2.create(e);if(!r.isRenderable)continue;const a=r.render();await this.#s(a,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,ga(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i);const o=this.#i.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,i),o._hasNoCanvas=!1):o.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:r}=t,a=new L6({data:{id:i,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#n}),o=a.render();return e.append(o),this.#t?.moveElementInDOM(e,o,o,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return Se(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ao.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const T0=/\r\n?|\n/g;class zi extends ne{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=zi.prototype,e=a=>a.isEmpty(),i=Fs.TRANSLATE_SMALL,r=Fs.TRANSLATE_BIG;return Se(this,"_keyboardManager",new Wl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=ge.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||zi._defaultColor||ne._defaultLineColor,this.#i=t.fontSize||zi._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){ne.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Re.FREETEXT_SIZE:zi._defaultFontSize=e;break;case Re.FREETEXT_COLOR:zi._defaultColor=e;break}}updateParams(t,e){switch(t){case Re.FREETEXT_SIZE:this.#a(e);break;case Re.FREETEXT_COLOR:this.#r(e);break}}static get defaultPropertiesToUpdate(){return[[Re.FREETEXT_SIZE,zi._defaultFontSize],[Re.FREETEXT_COLOR,zi._defaultColor||ne._defaultLineColor]]}get propertiesToUpdate(){return[[Re.FREETEXT_SIZE,this.#i],[Re.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Ul(this),[["colorPicker",this._colorPicker]]}get colorType(){return Re.FREETEXT_COLOR}#a(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#o()},i=this.#i;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(t){const e=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-zi._internalPadding*t,-(zi._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(zi.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,u=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),i=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const i=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){zi._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,m]=this.pageDimensions,[p,b]=this.pageTranslation;let v,w;switch(this.rotation){case 0:v=t+(o[0]-p)/f,w=e+this.height-(o[1]-b)/m;break;case 90:v=t+(o[0]-p)/f,w=e-(o[1]-b)/m,[u,h]=[h,-u];break;case 180:v=t-this.width+(o[0]-p)/f,w=e-(o[1]-b)/m,[u,h]=[-u,-h];break;case 270:v=t+(o[0]-p-this.height*m)/f,w=e+(o[1]-b-this.width*f)/m,[u,h]=[-h,u];break}this.setAt(v*r,w*a,u,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(T0,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=zi.#h(e.getData("text")||"").replaceAll(T0,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:u,startOffset:h}=o,f=[],m=[];if(u.nodeType===Node.TEXT_NODE){const v=u.parentElement;if(m.push(u.nodeValue.slice(h).replaceAll(T0,"")),v!==this.editorDiv){let w=f;for(const x of this.editorDiv.childNodes){if(x===v){w=m;continue}w.push(zi.#c(x))}}f.push(u.nodeValue.slice(0,h).replaceAll(T0,""))}else if(u===this.editorDiv){let v=f,w=0;for(const x of this.editorDiv.childNodes)w++===h&&(v=m),v.push(zi.#c(x))}this.#t=`${f.join(`
`)}${r}${m.join(`
`)}`,this.#l();const p=new Range;let b=Math.sumPrecise(f.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(b<=w){p.setStart(v,b),p.setEnd(v,b);break}b-=w}a.removeAllRanges(),a.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=zi._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let r=null;if(t instanceof E4){const{data:{defaultAppearanceData:{fontSize:o,fontColor:u},rect:h,rotation:f,id:m,popupRef:p,richText:b,contentsObj:v,creationDate:w,modificationDate:x},textContent:_,textPosition:A,parent:{page:{pageNumber:T}}}=t;if(!_||_.length===0)return null;r=t={annotationType:ge.FREETEXT,color:Array.from(u),fontSize:o,value:_.join(`
`),position:A,pageIndex:T-1,rect:h.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:p,comment:v?.str||null,richText:b,creationDate:w,modificationDate:x}}const a=await super.deserialize(t,e,i);return a.#i=t.fontSize,a.color=Xt.makeHexColor(...t.color),a.#t=zi.#h(t.value),a._initialData=r,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=ne._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#i,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((o,u)=>o!==r[u])||t.pageIndex!==a}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const r of this.#t.split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),e.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class $t{static PRECISION=1e-4;toSVGPath(){Ke("Abstract method `toSVGPath` must be implemented.")}get box(){Ke("Abstract getter `box` must be implemented.")}serialize(t,e){Ke("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,a,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=e+t[u]*r,o[u+1]=i+t[u+1]*a;return o}static _rescaleAndSwap(t,e,i,r,a,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=e+t[u+1]*r,o[u+1]=i+t[u]*a;return o}static _translate(t,e,i,r){r||=new Float32Array(t.length);for(let a=0,o=t.length;a<o;a+=2)r[a]=e+t[a],r[a+1]=i+t[a+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,a){switch(a){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,a,o){return[(t+5*i)/6,(e+5*r)/6,(5*i+a)/6,(5*r+o)/6,(i+a)/2,(r+o)/2]}}class da{#t;#e=[];#n;#i;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#g=8;static#m=2;static#u=da.#g+da.#m;constructor({x:t,y:e},i,r,a,o,u=0){this.#t=i,this.#h=a*r,this.#i=o,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=u,this.#l=da.#g*r,this.#c=da.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#p(){const t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[i,r,a,o]=this.#t;return[(this.#s+(t[0]-e[0])/2-i)/a,(this.#o+(t[1]-e[1])/2-r)/o,(this.#s+(e[0]-t[0])/2-i)/a,(this.#o+(e[1]-t[1])/2-r)/o]}add({x:t,y:e}){this.#s=t,this.#o=e;const[i,r,a,o]=this.#t;let[u,h,f,m]=this.#r.subarray(8,12);const p=t-f,b=e-m,v=Math.hypot(p,b);if(v<this.#c)return!1;const w=v-this.#l,x=w/v,_=x*p,A=x*b;let T=u,M=h;u=f,h=m,f+=_,m+=A,this.#f?.push(t,e);const R=-A/w,D=_/w,L=R*this.#h,z=D*this.#h;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+L,m+z],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-L,m-z],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+L,h+z],2),this.#a.push(NaN,NaN,NaN,NaN,(u+L-i)/a,(h+z-r)/o),this.#r.set([u-L,h-z],14),this.#e.push(NaN,NaN,NaN,NaN,(u-L-i)/a,(h-z-r)/o)),this.#r.set([T,M,u,h,f,m],6),!this.isEmpty()):(this.#r.set([T,M,u,h,f,m],6),Math.abs(Math.atan2(M-h,T-u)-Math.atan2(A,_))<Math.PI/2?([u,h,f,m]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-i)/a,((h+m)/2-r)/o),[u,h,T,M]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-i)/a,((M+h)/2-r)/o),!0):([T,M,u,h,f,m]=this.#r.subarray(0,6),this.#a.push(((T+5*u)/6-i)/a,((M+5*h)/6-r)/o,((5*u+f)/6-i)/a,((5*h+m)/6-r)/o,((u+f)/2-i)/a,((h+m)/2-r)/o),[f,m,u,h,T,M]=this.#r.subarray(12,18),this.#e.push(((T+5*u)/6-i)/a,((M+5*h)/6-r)/o,((5*u+f)/6-i)/a,((5*h+m)/6-r)/o,((u+f)/2-i)/a,((h+m)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#b();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#v(i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#y(i),i.join(" ")}#b(){const[t,e,i,r]=this.#t,[a,o,u,h]=this.#p();return`M${(this.#r[2]-t)/i} ${(this.#r[3]-e)/r} L${(this.#r[4]-t)/i} ${(this.#r[5]-e)/r} L${a} ${o} L${u} ${h} L${(this.#r[16]-t)/i} ${(this.#r[17]-e)/r} L${(this.#r[14]-t)/i} ${(this.#r[15]-e)/r} Z`}#y(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,i,r,a]=this.#t,o=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[h,f,m,p]=this.#p();t.push(`L${(o[0]-e)/r} ${(o[1]-i)/a} L${h} ${f} L${m} ${p} L${(u[0]-e)/r} ${(u[1]-i)/a}`)}newFreeDrawOutline(t,e,i,r,a,o){return new M4(t,e,i,r,a,o)}getOutlines(){const t=this.#a,e=this.#e,i=this.#r,[r,a,o,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let p=0,b=h.length-2;p<b;p+=2)h[p]=(this.#f[p]-r)/o,h[p+1]=(this.#f[p+1]-a)/u;if(h[h.length-2]=(this.#s-r)/o,h[h.length-1]=(this.#o-a)/u,isNaN(i[6])&&!this.isEmpty())return this.#E(h);const f=new Float32Array(this.#a.length+24+this.#e.length);let m=t.length;for(let p=0;p<m;p+=2){if(isNaN(t[p])){f[p]=f[p+1]=NaN;continue}f[p]=t[p],f[p+1]=t[p+1]}m=this.#x(f,m);for(let p=e.length-6;p>=6;p-=6)for(let b=0;b<6;b+=2){if(isNaN(e[p+b])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[p+b],f[m+1]=e[p+b+1],m+=2}return this.#A(f,m),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#n,this.#i)}#E(t){const e=this.#r,[i,r,a,o]=this.#t,[u,h,f,m]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-i)/a,(e[3]-r)/o,NaN,NaN,NaN,NaN,(e[4]-i)/a,(e[5]-r)/o,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-i)/a,(e[17]-r)/o,NaN,NaN,NaN,NaN,(e[14]-i)/a,(e[15]-r)/o],0),this.newFreeDrawOutline(p,t,this.#t,this.#d,this.#n,this.#i)}#A(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#x(t,e){const i=this.#r.subarray(4,6),r=this.#r.subarray(16,18),[a,o,u,h]=this.#t,[f,m,p,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-a)/u,(i[1]-o)/h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,p,b,NaN,NaN,NaN,NaN,(r[0]-a)/u,(r[1]-o)/h],e),e+=24}}class M4 extends $t{#t;#e=new Float32Array(4);#n;#i;#a;#r;#s;constructor(t,e,i,r,a,o){super(),this.#s=t,this.#a=e,this.#t=i,this.#r=r,this.#n=a,this.#i=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(o);const[u,h,f,m]=this.#e;for(let p=0,b=t.length;p<b;p+=2)t[p]=(t[p]-u)/f,t[p+1]=(t[p+1]-h)/m;for(let p=0,b=e.length;p<b;p+=2)e[p]=(e[p]-u)/f,e[p+1]=(e[p+1]-h)/m}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,i=this.#s.length;e<i;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,r],a){const o=i-t,u=r-e;let h,f;switch(a){case 0:h=$t._rescale(this.#s,t,r,o,-u),f=$t._rescale(this.#a,t,r,o,-u);break;case 90:h=$t._rescaleAndSwap(this.#s,t,e,o,u),f=$t._rescaleAndSwap(this.#a,t,e,o,u);break;case 180:h=$t._rescale(this.#s,i,e,-o,u),f=$t._rescale(this.#a,i,e,-o,u);break;case 270:h=$t._rescaleAndSwap(this.#s,i,r,-o,-u),f=$t._rescaleAndSwap(this.#a,i,r,-o,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const e=this.#s;let i=e[4],r=e[5];const a=[i,r,i,r];let o=i,u=r,h=i,f=r;const m=t?Math.max:Math.min,p=new Float32Array(4);for(let v=6,w=e.length;v<w;v+=6){const x=e[v+4],_=e[v+5];isNaN(e[v])?(Xt.pointBoundingBox(x,_,a),u>_?(o=x,u=_):u===_&&(o=m(o,x)),f<_?(h=x,f=_):f===_&&(h=m(h,x))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,Xt.bezierBoundingBox(i,r,...e.slice(v,v+6),p),Xt.rectBoundingBox(p[0],p[1],p[2],p[3],a),u>p[1]?(o=p[0],u=p[1]):u===p[1]&&(o=m(o,p[0])),f<p[3]?(h=p[2],f=p[3]):f===p[3]&&(h=m(h,p[2]))),i=x,r=_}const b=this.#e;b[0]=a[0]-this.#n,b[1]=a[1]-this.#n,b[2]=a[2]-a[0]+2*this.#n,b[3]=a[3]-a[1]+2*this.#n,this.firstPoint=[o,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,e,i,r,a,o=0){return new da(t,e,i,r,a,o)}getNewOutline(t,e){const[i,r,a,o]=this.#e,[u,h,f,m]=this.#t,p=a*f,b=o*m,v=i*f+u,w=r*m+h,x=this.newOutliner({x:this.#a[0]*p+v,y:this.#a[1]*b+w},this.#t,this.#r,t,this.#i,e??this.#n);for(let _=2;_<this.#a.length;_+=2)x.add({x:this.#a[_]*p+v,y:this.#a[_+1]*b+w});return x.getOutlines()}}class gf{#t;#e;#n;#i=[];#a=[];constructor(t,e=0,i=0,r=!0){const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x,y:_,width:A,height:T}of t){const M=Math.floor((x-e)/o)*o,R=Math.ceil((x+A+e)/o)*o,D=Math.floor((_-e)/o)*o,L=Math.ceil((_+T+e)/o)*o,z=[M,D,L,!0],q=[R,D,L,!1];this.#i.push(z,q),Xt.rectBoundingBox(M,D,R,L,a)}const u=a[2]-a[0]+2*i,h=a[3]-a[1]+2*i,f=a[0]-i,m=a[1]-i;let p=r?-1/0:1/0,b=1/0;const v=this.#i.at(r?-1:-2),w=[v[0],v[2]];for(const x of this.#i){const[_,A,T,M]=x;!M&&r?A<b?(b=A,p=_):A===b&&(p=Math.max(p,_)):M&&!r&&(A<b?(b=A,p=_):A===b&&(p=Math.min(p,_))),x[0]=(_-f)/u,x[1]=(A-m)/h,x[2]=(T-m)/h}this.#t=new Float32Array([f,m,u,h]),this.#e=[p,b],this.#n=w}getOutlines(){this.#i.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#i)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#r(t)}#r(t){const e=[],i=new Set;for(const o of t){const[u,h,f]=o;e.push([u,h,o],[u,f,o])}e.sort((o,u)=>o[1]-u[1]||o[0]-u[0]);for(let o=0,u=e.length;o<u;o+=2){const h=e[o][2],f=e[o+1][2];h.push(f),f.push(h),i.add(h),i.add(f)}const r=[];let a;for(;i.size>0;){const o=i.values().next().value;let[u,h,f,m,p]=o;i.delete(o);let b=u,v=h;for(a=[u,f],r.push(a);;){let w;if(i.has(m))w=m;else if(i.has(p))w=p;else break;i.delete(w),[u,h,f,m,p]=w,b!==u&&(a.push(b,v,u,v===h?h:f),b=u),v=v===h?f:h}a.push(b,v)}return new Q6(r,this.#t,this.#e,this.#n)}#s(t){const e=this.#a;let i=0,r=e.length-1;for(;i<=r;){const a=i+r>>1,o=e[a][0];if(o===t)return a;o<t?i=a+1:r=a-1}return r+1}#o([,t,e]){const i=this.#s(t);this.#a.splice(i,0,[t,e])}#c([,t,e]){const i=this.#s(t);for(let r=i;r<this.#a.length;r++){const[a,o]=this.#a[r];if(a!==t)break;if(a===t&&o===e){this.#a.splice(r,1);return}}for(let r=i-1;r>=0;r--){const[a,o]=this.#a[r];if(a!==t)break;if(a===t&&o===e){this.#a.splice(r,1);return}}}#l(t){const[e,i,r]=t,a=[[e,i,r]],o=this.#s(r);for(let u=0;u<o;u++){const[h,f]=this.#a[u];for(let m=0,p=a.length;m<p;m++){const[,b,v]=a[m];if(!(f<=b||v<=h)){if(b>=h){if(v>f)a[m][1]=f;else{if(p===1)return[];a.splice(m,1),m--,p--}continue}a[m][2]=h,v>f&&a.push([e,f,v])}}}return a}}class Q6 extends $t{#t;#e;constructor(t,e,i,r){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=r}toSVGPath(){const t=[];for(const e of this.#e){let[i,r]=e;t.push(`M${i} ${r}`);for(let a=2;a<e.length;a+=2){const o=e[a],u=e[a+1];o===i?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,e,i,r],a){const o=[],u=i-t,h=r-e;for(const f of this.#e){const m=new Array(f.length);for(let p=0;p<f.length;p+=2)m[p]=t+f[p]*u,m[p+1]=r-f[p+1]*h;o.push(m)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class bf extends da{newFreeDrawOutline(t,e,i,r,a,o){return new J6(t,e,i,r,a,o)}}class J6 extends M4{newOutliner(t,e,i,r,a,o=0){return new bf(t,e,i,r,a,o)}}class yi extends ne{#t=null;#e=0;#n;#i=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#m=null;#u="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ge.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=yi.prototype;return Se(this,"_keyboardManager",new Wl([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||yi._defaultColor,this.#p=t.thickness||yi._defaultThickness,this.opacity=t.opacity||yi._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#v(t),this.#S()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#y(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#y(){const t=new gf(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new gf(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:r}=this.#r;this.#g=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const r=1.5;if(this.#r=t.getNewOutline(this.#p/2+r,.0025),e>=0)this.#d=e,this.#i=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:yi.#_(this.#l.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:yi.#_(this.#r.box,p),path:{d:this.#r.toSVGPath()}})}const[a,o,u,h]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=u,this.height=h;break;case 90:{const[p,b]=this.parentDimensions;this.x=o,this.y=1-a,this.width=u*b/p,this.height=h*p/b;break}case 180:this.x=1-a,this.y=1-o,this.width=u,this.height=h;break;case 270:{const[p,b]=this.parentDimensions;this.x=1-o,this.y=a,this.width=u*b/p,this.height=h*p/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-a)/u,(f[1]-o)/h];const{lastPoint:m}=this.#r;this.#g=[(m[0]-a)/u,(m[1]-o)/h]}static initialize(t,e){ne.initialize(t,e),yi._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Re.HIGHLIGHT_COLOR:yi._defaultColor=e;break;case Re.HIGHLIGHT_THICKNESS:yi._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Re.HIGHLIGHT_COLOR:this.#E(e);break;case Re.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[Re.HIGHLIGHT_COLOR,yi._defaultColor],[Re.HIGHLIGHT_THICKNESS,yi._defaultThickness]]}get propertiesToUpdate(){return[[Re.HIGHLIGHT_COLOR,this.color||yi._defaultColor],[Re.HIGHLIGHT_THICKNESS,this.#p||yi._defaultThickness],[Re.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:e.bind(this,t,yi._defaultOpacity),undo:e.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#A(t){const e=this.#p,i=r=>{this.#p=r,this.#x(r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Re.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new $n({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#h&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#S(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#_([t,e,i,r],a){switch(a){case 90:return[1-e-r,t,r,i];case 180:return[1-t-i,1-e-r,i,r];case 270:return[e,1-t-i,r,i]}return[t,e,i,r]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=yi.#_(this.#l.box,t)):i=yi.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:yi.#_(this.#r.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i,this.setDims(this.width,this.height),s4(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#R(t){yi._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#h||this.#C(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#I(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,r]=this.pageTranslation,a=this.#n,o=new Float32Array(a.length*8);let u=0;for(const{x:h,y:f,width:m,height:p}of a){const b=h*t+i,v=(1-f)*e+r;o[u]=o[u+4]=b,o[u+1]=o[u+3]=v,o[u+2]=o[u+6]=b+m*t,o[u+5]=o[u+7]=v-p*e,u+=8}return o}#N(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:i,x:r,y:a}){const{x:o,y:u,width:h,height:f}=i.getBoundingClientRect(),m=new AbortController,p=t.combinedSignal(m),b=v=>{m.abort(),this.#F(t,v)};window.addEventListener("blur",b,{signal:p}),window.addEventListener("pointerup",b,{signal:p}),window.addEventListener("pointerdown",gi,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Vn,{signal:p}),i.addEventListener("pointermove",this.#z.bind(this,t),{signal:p}),this._freeHighlight=new bf({x:r,y:a},[o,u,h,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#z(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let r=null;if(t instanceof T4){const{data:{quadPoints:w,rect:x,rotation:_,id:A,color:T,opacity:M,popupRef:R,richText:D,contentsObj:L,creationDate:z,modificationDate:q},parent:{page:{pageNumber:U}}}=t;r=t={annotationType:ge.HIGHLIGHT,color:Array.from(T),opacity:M,quadPoints:w,boxes:null,pageIndex:U-1,rect:x.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,popupRef:R,richText:D,comment:L?.str||null,creationDate:z,modificationDate:q}}else if(t instanceof qf){const{data:{inkLists:w,rect:x,rotation:_,id:A,color:T,borderStyle:{rawWidth:M},popupRef:R,richText:D,contentsObj:L,creationDate:z,modificationDate:q},parent:{page:{pageNumber:U}}}=t;r=t={annotationType:ge.HIGHLIGHT,color:Array.from(T),thickness:M,inkLists:w,boxes:null,pageIndex:U-1,rect:x.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,popupRef:R,richText:D,comment:L?.str||null,creationDate:z,modificationDate:q}}const{color:a,quadPoints:o,inkLists:u,opacity:h}=t,f=await super.deserialize(t,e,i);f.color=Xt.makeHexColor(...a),f.opacity=h||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t);const[m,p]=f.pageDimensions,[b,v]=f.pageTranslation;if(o){const w=f.#n=[];for(let x=0;x<o.length;x+=8)w.push({x:(o[x]-b)/m,y:1-(o[x+1]-v)/p,width:(o[x+2]-o[x])/m,height:(o[x+1]-o[x+5])/p});f.#y(),f.#S(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],x={x:w[0]-b,y:p-(w[1]-v)},_=new bf(x,[0,0,m,p],1,f.#p/2,!0,.001);for(let M=0,R=w.length;M<R;M+=2)x.x=w[M]-b,x.y=p-(w[M+1]-v),_.add(x);const{id:A,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);f.#v({highlightOutlines:_.getOutlines(),highlightId:A,clipPathId:T}),f.#S(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=ne._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#I(),outlines:this.#N(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#L(i)?null:(i.id=this.annotationElementId,i)}#L(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,r)=>i!==e[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class R4{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Ke("Not implemented")}}class ue extends ne{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#a=null;static#r=NaN;static#s=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(ue._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[r,a]of Object.entries(e))i.has(r)?Object.assign(t[r],a):t[r]=a;return t}static getDefaultDrawingOptions(t){Ke("Not implemented")}static get typesMap(){Ke("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(ue.#n.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,e[r]]);return t}_updateProperty(t,e,i){const r=this._drawingOptions,a=r[e],o=u=>{r.updateProperty(e,u);const h=this.#t.updateProperty(e,u);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#m()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#m()),{bbox:this.#p()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,i,r]){const{parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[e,1-t,i*(o/a),r*(a/o)];case 180:return[1-t,1-e,i,r];case 270:return[1-e,t,i*(o/a),r*(a/o)];default:return[t,e,i,r]}}#m(){const{x:t,y:e,width:i,height:r,parentDimensions:[a,o],rotation:u}=this;switch(u){case 90:return[1-e,t,i*(a/o),r*(o/a)];case 180:return[1-t,1-e,i,r];case 270:return[e,1-t,i*(a/o),r*(o/a)];default:return[t,e,i,r]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:t,y:e,width:i,height:r,rotation:a,parentRotation:o,parentDimensions:[u,h]}=this;switch((a*4+o)/90){case 1:return[1-e-r,t,r,i];case 2:return[1-t-i,1-e-r,i,r];case 3:return[e,1-t-i,r,i];case 4:return[t,e-i*(u/h),r*(h/u),i*(u/h)];case 5:return[1-e,t,i*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-e,r*(h/u),i*(u/h)];case 7:return[e-i*(u/h),1-t-r*(h/u),i*(u/h),r*(h/u)];case 8:return[t-i,e-r,i,r];case 9:return[1-e,t-i,r,i];case 10:return[1-t,1-e,i,r];case 11:return[e-r,1-t,r,i];case 12:return[t-r*(h/u),e,r*(h/u),i*(u/h)];case 13:return[1-e-i*(u/h),t-r*(h/u),i*(u/h),r*(h/u)];case 14:return[1-t,1-e-i*(u/h),r*(h/u),i*(u/h)];case 15:return[e,1-t,i*(u/h),r*(h/u)];default:return[t,e,i,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties({bbox:this.#p()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,r,a){Ke("Not implemented")}static startDrawing(t,e,i,r){const{target:a,offsetX:o,offsetY:u,pointerId:h,pointerType:f}=r;if(ue.#s&&ue.#s!==f)return;const{viewport:{rotation:m}}=t,{width:p,height:b}=a.getBoundingClientRect(),v=ue.#i=new AbortController,w=t.combinedSignal(v);if(ue.#r||=h,ue.#s??=f,window.addEventListener("pointerup",x=>{ue.#r===x.pointerId?this._endDraw(x):ue.#o?.delete(x.pointerId)},{signal:w}),window.addEventListener("pointercancel",x=>{ue.#r===x.pointerId?this._currentParent.endDrawingSession():ue.#o?.delete(x.pointerId)},{signal:w}),window.addEventListener("pointerdown",x=>{ue.#s===x.pointerType&&((ue.#o||=new Set).add(x.pointerId),ue.#n.isCancellable()&&(ue.#n.removeLastElement(),ue.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Vn,{signal:w}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),a.addEventListener("touchmove",x=>{x.timeStamp===ue.#c&&gi(x)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),ue.#n){t.drawLayer.updateProperties(this._currentDrawId,ue.#n.startNew(o,u,p,b,m));return}e.updateUIForDefaultProperties(this),ue.#n=this.createDrawerInstance(o,u,p,b,m),ue.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(ue.#a.toSVGProperties(),ue.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ue.#c=-1,!ue.#n)return;const{offsetX:e,offsetY:i,pointerId:r}=t;if(ue.#r===r){if(ue.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ue.#n.add(e,i)),ue.#c=t.timeStamp,gi(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,ue.#n=null,ue.#a=null,ue.#s=null,ue.#c=NaN),ue.#i&&(ue.#i.abort(),ue.#i=null,ue.#r=NaN,ue.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,ue.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=ue.#n,r=this._currentDrawId,a=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,i.setLastElement(a))},undo:()=>{e.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Re.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Re.DRAW_STEP),!ue.#n.isEmpty()){const{pageDimensions:[i,r],scale:a}=e,o=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ue.#n.getOutlines(i*a,r*a,a,this._INNER_MARGIN),drawingOptions:ue.#a,mustBeCommitted:!t});return this._cleanup(!0),o}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,r,a,o){Ke("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:u}}=e.viewport,h=this.deserializeDraw(o,u,r,a,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#l({drawOutlines:h}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[r,a]=this.pageDimensions;return this.#t.serialize([e,i,r,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class t7{#t=new Float64Array(6);#e;#n;#i;#a;#r;#s="";#o=0;#c=new Ql;#l;#d;constructor(t,e,i,r,a,o){this.#l=i,this.#d=r,this.#i=a,this.#a=o,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e],this.#n=[{line:u,points:this.#r}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#a=e)}#h(t,e){return $t._normalizePoint(t,e,this.#l,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#r.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,r,a,o]=this.#t.subarray(2,6),u=t-a,h=e-o;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#r.push(t,e),isNaN(i)?(this.#t.set([a,o,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,r,a,o,t,e],0),this.#e.push(...$t.createBezierPoints(i,r,a,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,a){this.#l=i,this.#d=r,this.#i=a,[t,e]=this.#h(t,e);const o=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#r=[t,e];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:o,points:this.#r}),this.#t.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#r=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#s="";for(let t=0,e=this.#n.length;t<e;t++){const{line:i,points:r}=this.#n[t];this.#e=i,this.#r=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=$t.svgRound(this.#e[4]),e=$t.svgRound(this.#e[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#r.length<=6){const r=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#r.length===4){const r=$t.svgRound(this.#e[10]),a=$t.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${r} ${a}`,this.#o=12,this.#s}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,a=this.#e.length;r<a;r+=6){const[o,u,h,f,m,p]=this.#e.slice(r,r+6).map($t.svgRound);i.push(`C${o} ${u} ${h} ${f} ${m} ${p}`)}return this.#s+=i.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,i,r){const a=this.#n.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#n,t,e,i,this.#i,this.#a,r),this.#t=null,this.#e=null,this.#n=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Ql extends $t{#t;#e=0;#n;#i;#a;#r;#s;#o;#c;build(t,e,i,r,a,o,u){this.#a=e,this.#r=i,this.#s=r,this.#o=a,this.#c=o,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#i){if(t.push(`M${$t.svgRound(e[4])} ${$t.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${$t.svgRound(e[10])} ${$t.svgRound(e[11])}`);continue}for(let i=6,r=e.length;i<r;i+=6){const[a,o,u,h,f,m]=e.subarray(i,i+6).map($t.svgRound);t.push(`C${a} ${o} ${u} ${h} ${f} ${m}`)}}return t.join("")}serialize([t,e,i,r],a){const o=[],u=[],[h,f,m,p]=this.#d();let b,v,w,x,_,A,T,M,R;switch(this.#o){case 0:R=$t._rescale,b=t,v=e+r,w=i,x=-r,_=t+h*i,A=e+(1-f-p)*r,T=t+(h+m)*i,M=e+(1-f)*r;break;case 90:R=$t._rescaleAndSwap,b=t,v=e,w=i,x=r,_=t+f*i,A=e+h*r,T=t+(f+p)*i,M=e+(h+m)*r;break;case 180:R=$t._rescale,b=t+i,v=e,w=-i,x=r,_=t+(1-h-m)*i,A=e+f*r,T=t+(1-h)*i,M=e+(f+p)*r;break;case 270:R=$t._rescaleAndSwap,b=t+i,v=e+r,w=-i,x=-r,_=t+(1-f-p)*i,A=e+(1-h-m)*r,T=t+(1-f)*i,M=e+(1-h)*r;break}for(const{line:D,points:L}of this.#i)o.push(R(D,b,v,w,x,a?new Array(D.length):null)),u.push(R(L,b,v,w,x,a?new Array(L.length):null));return{lines:o,points:u,rect:[_,A,T,M]}}static deserialize(t,e,i,r,a,{paths:{lines:o,points:u},rotation:h,thickness:f}){const m=[];let p,b,v,w,x;switch(h){case 0:x=$t._rescale,p=-t/i,b=e/r+1,v=1/i,w=-1/r;break;case 90:x=$t._rescaleAndSwap,p=-e/r,b=-t/i,v=1/r,w=1/i;break;case 180:x=$t._rescale,p=t/i+1,b=-e/r,v=-1/i,w=1/r;break;case 270:x=$t._rescaleAndSwap,p=e/r+1,b=t/i+1,v=-1/r,w=-1/i;break}if(!o){o=[];for(const A of u){const T=A.length;if(T===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1]]));continue}if(T===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1],NaN,NaN,NaN,NaN,A[2],A[3]]));continue}const M=new Float32Array(3*(T-2));o.push(M);let[R,D,L,z]=A.subarray(0,4);M.set([NaN,NaN,NaN,NaN,R,D],0);for(let q=4;q<T;q+=2){const U=A[q],it=A[q+1];M.set($t.createBezierPoints(R,D,L,z,U,it),(q-2)*3),[R,D,L,z]=[L,z,U,it]}}}for(let A=0,T=o.length;A<T;A++)m.push({line:x(o[A].map(M=>M??NaN),p,b,v,w),points:x(u[A].map(M=>M??NaN),p,b,v,w)});const _=new this.prototype.constructor;return _.build(m,i,r,1,h,f,a),_}#l(t=this.#c){const e=this.#n+t/2*this.#s;return this.#o%180===0?[e/this.#a,e/this.#r]:[e/this.#r,e/this.#a]}#d(){const[t,e,i,r]=this.#t,[a,o]=this.#l(0);return[t+a,e+o,i-2*a,r-2*o]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)Xt.pointBoundingBox(r[u],r[u+1],t);continue}let a=r[4],o=r[5];for(let u=6,h=r.length;u<h;u+=6){const[f,m,p,b,v,w]=r.subarray(u,u+6);Xt.bezierBoundingBox(a,o,f,m,p,b,v,w,t),a=v,o=w}}const[e,i]=this.#l();t[0]=tn(t[0]-e,0,1),t[1]=tn(t[1]-i,0,1),t[2]=tn(t[2]+e,0,1),t[3]=tn(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[r,a]=this.#l(),[o,u]=[r-e,a-i],h=this.#t;return h[0]-=o,h[1]-=u,h[2]+=2*o,h[3]+=2*u,h}updateParentDimensions([t,e],i){const[r,a]=this.#l();this.#a=t,this.#r=e,this.#s=i;const[o,u]=this.#l(),h=o-r,f=u-a,m=this.#t;return m[0]-=h,m[1]-=f,m[2]+=2*h,m[3]+=2*f,m}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map($t.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${$t.svgRound(t)} ${$t.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,r=0,a=0,o=0,u=0,h=0;switch(this.#e){case 90:r=e/t,a=-t/e,u=t;break;case 180:i=-1,o=-1,u=t,h=e;break;case 270:r=-e/t,a=t/e,h=e;break;default:return""}return`matrix(${i} ${r} ${a} ${o} ${$t.svgRound(u)} ${$t.svgRound(h)})`}getPathResizingSVGProperties([t,e,i,r]){const[a,o]=this.#l(),[u,h,f,m]=this.#t;if(Math.abs(f-a)<=$t.PRECISION||Math.abs(m-o)<=$t.PRECISION){const x=t+i/2-(u+f/2),_=e+r/2-(h+m/2);return{path:{"transform-origin":`${$t.svgRound(t)} ${$t.svgRound(e)}`,transform:`${this.rotationTransform} translate(${x} ${_})`}}}const p=(i-2*a)/(f-2*a),b=(r-2*o)/(m-2*o),v=f/i,w=m/r;return{path:{"transform-origin":`${$t.svgRound(u)} ${$t.svgRound(h)}`,transform:`${this.rotationTransform} scale(${v} ${w}) translate(${$t.svgRound(a)} ${$t.svgRound(o)}) scale(${p} ${b}) translate(${$t.svgRound(-a)} ${$t.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,i,r]){const[a,o]=this.#l(),u=this.#t,[h,f,m,p]=u;if(u[0]=t,u[1]=e,u[2]=i,u[3]=r,Math.abs(m-a)<=$t.PRECISION||Math.abs(p-o)<=$t.PRECISION){const _=t+i/2-(h+m/2),A=e+r/2-(f+p/2);for(const{line:T,points:M}of this.#i)$t._translate(T,_,A,T),$t._translate(M,_,A,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${$t.svgRound(t)} ${$t.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*a)/(m-2*a),v=(r-2*o)/(p-2*o),w=-b*(h+a)+t+a,x=-v*(f+o)+e+o;if(b!==1||v!==1||w!==0||x!==0)for(const{line:_,points:A}of this.#i)$t._rescale(_,w,x,b,v,_),$t._rescale(A,w,x,b,v,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${$t.svgRound(t)} ${$t.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[r,a]=i,o=this.#t,u=t-o[0],h=e-o[1];if(this.#a===r&&this.#r===a)for(const{line:f,points:m}of this.#i)$t._translate(f,u,h,f),$t._translate(m,u,h,m);else{const f=this.#a/r,m=this.#r/a;this.#a=r,this.#r=a;for(const{line:p,points:b}of this.#i)$t._rescale(p,u,h,f,m,p),$t._rescale(b,u,h,f,m,b);o[2]*=f,o[3]*=m}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${$t.svgRound(t)} ${$t.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${$t.svgRound(t[0])} ${$t.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class uu extends R4{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ne._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new uu(this._viewParameters);return t.updateAll(this),t}}class Yf extends ue{static _type="ink";static _editorType=ge.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ne.initialize(t,e),this._defaultDrawingOptions=new uu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Se(this,"typesMap",new Map([[Re.INK_THICKNESS,"stroke-width"],[Re.INK_COLOR,"stroke"],[Re.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,r,a){return new t7(t,e,i,r,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,r,a,o){return Ql.deserialize(t,e,i,r,a,o)}static async deserialize(t,e,i){let r=null;if(t instanceof qf){const{data:{inkLists:o,rect:u,rotation:h,id:f,color:m,opacity:p,borderStyle:{rawWidth:b},popupRef:v,richText:w,contentsObj:x,creationDate:_,modificationDate:A},parent:{page:{pageNumber:T}}}=t;r=t={annotationType:ge.INK,color:Array.from(m),thickness:b,opacity:p,paths:{points:o},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:v,richText:w,comment:x?.str||null,creationDate:_,modificationDate:A}}const a=await super.deserialize(t,e,i);return a._initialData=r,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||=new Ul(this),[["colorPicker",this._colorPicker]]}get colorType(){return Re.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Yf.getDefaultDrawingOptions({stroke:Xt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":o}}=this,u=Object.assign(super.serialize(t),{color:ne._colorManager.convert(r),opacity:a,thickness:o,paths:{lines:e,points:i}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:i,opacity:r,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,u)=>o!==e[u])||t.thickness!==i||t.opacity!==r||t.pageIndex!==a}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class vf extends Ql{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const C0=8,Al=3;class lo{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,r){return i-=t,r-=e,i===0?r>0?0:4:i===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,i,r,a,o,u){const h=this.#e(i,r,a,o);for(let f=0;f<8;f++){const m=(-f+h-u+16)%8,p=this.#n[2*m],b=this.#n[2*m+1];if(t[(i+p)*e+(r+b)]!==0)return m}return-1}static#a(t,e,i,r,a,o,u){const h=this.#e(i,r,a,o);for(let f=0;f<8;f++){const m=(f+h+u+16)%8,p=this.#n[2*m],b=this.#n[2*m+1];if(t[(i+p)*e+(r+b)]!==0)return m}return-1}static#r(t,e,i,r){const a=t.length,o=new Int32Array(a);for(let m=0;m<a;m++)o[m]=t[m]<=r?1:0;for(let m=1;m<i-1;m++)o[m*e]=o[m*e+e-1]=0;for(let m=0;m<e;m++)o[m]=o[e*i-1-m]=0;let u=1,h;const f=[];for(let m=1;m<i-1;m++){h=1;for(let p=1;p<e-1;p++){const b=m*e+p,v=o[b];if(v===0)continue;let w=m,x=p;if(v===1&&o[b-1]===0)u+=1,x-=1;else if(v>=1&&o[b+1]===0)u+=1,x+=1,v>1&&(h=v);else{v!==1&&(h=Math.abs(v));continue}const _=[p,m],A=x===p+1,T={isHole:A,points:_,id:u,parent:0};f.push(T);let M;for(const ut of f)if(ut.id===h){M=ut;break}M?M.isHole?T.parent=A?M.parent:h:T.parent=A?h:M.parent:T.parent=A?h:0;const R=this.#i(o,e,m,p,w,x,0);if(R===-1){o[b]=-u,o[b]!==1&&(h=Math.abs(o[b]));continue}let D=this.#n[2*R],L=this.#n[2*R+1];const z=m+D,q=p+L;w=z,x=q;let U=m,it=p;for(;;){const ut=this.#a(o,e,U,it,w,x,1);D=this.#n[2*ut],L=this.#n[2*ut+1];const H=U+D,rt=it+L;_.push(rt,H);const N=U*e+it;if(o[N+1]===0?o[N]=-u:o[N]===1&&(o[N]=u),H===m&&rt===p&&U===z&&it===q){o[b]!==1&&(h=Math.abs(o[b]));break}else w=U,x=it,U=H,it=rt}}}return f}static#s(t,e,i,r){if(i-e<=4){for(let z=e;z<i-2;z+=2)r.push(t[z],t[z+1]);return}const a=t[e],o=t[e+1],u=t[i-4]-a,h=t[i-3]-o,f=Math.hypot(u,h),m=u/f,p=h/f,b=m*o-p*a,v=h/u,w=1/f,x=Math.atan(v),_=Math.cos(x),A=Math.sin(x),T=w*(Math.abs(_)+Math.abs(A)),M=w*(1-T+T**2),R=Math.max(Math.atan(Math.abs(A+_)*M),Math.atan(Math.abs(A-_)*M));let D=0,L=e;for(let z=e+2;z<i-2;z+=2){const q=Math.abs(b-m*t[z+1]+p*t[z]);q>D&&(L=z,D=q)}D>(f*R)**2?(this.#s(t,e,L+2,r),this.#s(t,L,i,r)):r.push(a,o)}static#o(t){const e=[],i=t.length;return this.#s(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,r,a,o){const u=new Float32Array(o**2),h=-2*r**2,f=o>>1;for(let x=0;x<o;x++){const _=(x-f)**2;for(let A=0;A<o;A++)u[x*o+A]=Math.exp((_+(A-f)**2)/h)}const m=new Float32Array(256),p=-2*a**2;for(let x=0;x<256;x++)m[x]=Math.exp(x**2/p);const b=t.length,v=new Uint8Array(b),w=new Uint32Array(256);for(let x=0;x<i;x++)for(let _=0;_<e;_++){const A=x*e+_,T=t[A];let M=0,R=0;for(let L=0;L<o;L++){const z=x+L-f;if(!(z<0||z>=i))for(let q=0;q<o;q++){const U=_+q-f;if(U<0||U>=e)continue;const it=t[z*e+U],ut=u[L*o+q]*m[Math.abs(it-T)];M+=it*ut,R+=ut}}const D=v[A]=Math.round(M/R);w[D]++}return[v,w]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let r=-1/0,a=1/0;for(let u=0,h=i.length;u<h;u++){const f=i[u]=t[u<<2];r=Math.max(r,f),a=Math.min(a,f)}const o=255/(r-a);for(let u=0,h=i.length;u<h;u++)i[u]=(i[u]-a)*o;return i}static#h(t){let e,i=-1/0,r=-1/0;const a=t.findIndex(h=>h!==0);let o=a,u=a;for(e=a;e<256;e++){const h=t[e];h>i&&(e-o>r&&(r=e-o,u=e-1),i=h,o=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:r}=t,{maxDim:a}=this.#t;let o=i,u=r;if(i>a||r>a){let b=i,v=r,w=Math.log2(Math.max(i,r)/a);const x=Math.floor(w);w=w===x?x-1:x;for(let A=0;A<w;A++){o=Math.ceil(b/2),u=Math.ceil(v/2);const T=new OffscreenCanvas(o,u);T.getContext("2d").drawImage(t,0,0,b,v,0,0,o,u),b=o,v=u,t!==e&&t.close(),t=T.transferToImageBitmap()}const _=Math.min(a/o,a/u);o=Math.round(o*_),u=Math.round(u*_)}const f=new OffscreenCanvas(o,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,o,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,o,u);const m=f.getImageData(0,0,o,u).data;return[this.#d(m),o,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:r},a,o,u,h){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const p=200,b=m.font=`${i} ${r} ${p}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:w,actualBoundingBoxAscent:x,actualBoundingBoxDescent:_,fontBoundingBoxAscent:A,fontBoundingBoxDescent:T,width:M}=m.measureText(t),R=1.5,D=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||0,M)*R),L=Math.ceil(Math.max(Math.abs(x)+Math.abs(_)||p,Math.abs(A)+Math.abs(T)||p)*R);f=new OffscreenCanvas(D,L),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,D,L),m.fillStyle="black",m.fillText(t,D*(R-1)/2,L*(3-R)/2);const z=this.#d(m.getImageData(0,0,D,L).data),q=this.#l(z),U=this.#h(q),it=this.#r(z,D,L,U);return this.processDrawnLines({lines:{curves:it,width:D,height:L},pageWidth:a,pageHeight:o,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,i,r,a){const[o,u,h]=this.#f(t),[f,m]=this.#c(o,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),p=this.#h(m),b=this.#r(f,u,h,p);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:e,pageHeight:i,rotation:r,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:a,mustSmooth:o,areContours:u}){r%180!==0&&([e,i]=[i,e]);const{curves:h,width:f,height:m}=t,p=t.thickness??0,b=[],v=Math.min(e/f,i/m),w=v/e,x=v/i,_=[];for(const{points:T}of h){const M=o?this.#o(T):T;if(!M)continue;_.push(M);const R=M.length,D=new Float32Array(R),L=new Float32Array(3*(R===2?2:R-2));if(b.push({line:L,points:D}),R===2){D[0]=M[0]*w,D[1]=M[1]*x,L.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[z,q,U,it]=M;z*=w,q*=x,U*=w,it*=x,D.set([z,q,U,it],0),L.set([NaN,NaN,NaN,NaN,z,q],0);for(let ut=4;ut<R;ut+=2){const H=D[ut]=M[ut]*w,rt=D[ut+1]=M[ut+1]*x;L.set($t.createBezierPoints(z,q,U,it,H,rt),(ut-2)*3),[z,q,U,it]=[U,it,H,rt]}}if(b.length===0)return null;const A=u?new vf:new Ql;return A.build(b,e,i,1,r,u?0:p,a),{outline:A,newCurves:_,areContours:u,thickness:p,width:f,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:r,height:a}){let o=1/0,u=-1/0,h=0;for(const M of t){h+=M.length;for(let R=2,D=M.length;R<D;R++){const L=M[R]-M[R-2];o=Math.min(o,L),u=Math.max(u,L)}}let f;o>=-128&&u<=127?f=Int8Array:o>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const m=t.length,p=C0+Al*m,b=new Uint32Array(p);let v=0;b[v++]=p*Uint32Array.BYTES_PER_ELEMENT+(h-2*m)*f.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=r,b[v++]=a,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(i??0)),b[v++]=m,b[v++]=f.BYTES_PER_ELEMENT;for(const M of t)b[v++]=M.length-2,b[v++]=M[0],b[v++]=M[1];const w=new CompressionStream("deflate-raw"),x=w.writable.getWriter();await x.ready,x.write(b);const _=f.prototype.constructor;for(const M of t){const R=new _(M.length-2);for(let D=2,L=M.length;D<L;D++)R[D-2]=M[D]-M[D-2];x.write(R)}x.close();const A=await new Response(w.readable).arrayBuffer(),T=new Uint8Array(A);return i4(T)}static async decompressSignature(t){try{const e=g5(t),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),a=r.getWriter();await a.ready,a.write(e).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,u=0;for await(const M of i)o||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),o.set(M,u),u+=M.length;const h=new Uint32Array(o.buffer,0,o.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=h[2],p=h[3],b=h[4]===0,v=h[5],w=h[6],x=h[7],_=[],A=(C0+Al*w)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(x){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(o.buffer,A);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(o.buffer,A);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(o.buffer,A);break}u=0;for(let M=0;M<w;M++){const R=h[Al*M+C0],D=new Float32Array(R+2);_.push(D);for(let L=0;L<Al-1;L++)D[L]=h[Al*M+C0+L+1];for(let L=0;L<R;L++)D[L+2]=D[L]+T[u++]}return{areContours:b,thickness:v,outlines:_,width:m,height:p}}catch(e){return fe(`decompressSignature: ${e}`),null}}}class Vf extends R4{constructor(){super(),super.updateProperties({fill:ne._defaultLineColor,"stroke-width":0})}clone(){const t=new Vf;return t.updateAll(this),t}}class Xf extends uu{constructor(t){super(t),super.updateProperties({stroke:ne._defaultLineColor,"stroke-width":1})}clone(){const t=new Xf(this._viewParameters);return t.updateAll(this),t}}class gr extends ue{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=ge.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){ne.initialize(t,e),this._defaultDrawingOptions=new Vf,this._defaultDrawnSignatureOptions=new Xf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Se(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:a,areContours:o,description:u,uuid:h,heightInPage:f}=this.#n,{rawDims:{pageWidth:m,pageHeight:p},rotation:b}=this.parent.viewport,v=lo.processDrawnLines({lines:r,pageWidth:m,pageHeight:p,rotation:b,innerMargin:gr._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(v,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:r,height:a}=this.#n,o=Math.max(r,a),u=lo.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:i,width:r,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,r){const{x:a,y:o}=this,{outline:u}=this.#n=t;this.#t=u instanceof vf,this.description=i;let h;this.#t?h=gr.getDefaultDrawingOptions():(h=gr._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let m=e/f;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return lo.process(t,e,i,r,gr._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:r},rotation:a}=this.parent.viewport;return lo.extractContoursFromText(t,e,i,r,a,gr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return lo.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:gr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=gr.getDefaultDrawingOptions():(this._drawingOptions=gr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(a),t?(a.paths={lines:e,points:i},a.uuid=this.#i,a.isCopy=!0):a.lines=e,this.#e&&(a.accessibilityData={type:"Figure",alt:this.#e}),a}static deserializeDraw(t,e,i,r,a,o){return o.areContours?vf.deserialize(t,e,i,r,a,o):Ql.deserialize(t,e,i,r,a,o)}static async deserialize(t,e,i){const r=await super.deserialize(t,e,i);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class e7 extends ne{#t=null;#e=null;#n=null;#i=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=ge.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ne.initialize(t,e)}static isHandlingMimeForPasting(t){return cf.includes(t)}static paste(t,e){e.pasteEditor({mode:ge.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#r=t.file.name),this.#m()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=cf.join(",");const e=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#a||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,r&&(this.#t=r),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#m(){const{div:t}=this;let{width:e,height:i}=this.#t;const[r,a]=this.pageDimensions,o=.75;if(this.width)e=this.width*r,i=this.height*a;else if(e>o*r||i>o*a){const h=Math.min(o*r/e,o*a/i);e*=h,i*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/r,this.height=i/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:r,height:a}=this.#t,o=new wr;let u=this.#t,h=r,f=a,m=null;if(e){if(r>e||a>e){const L=Math.min(e/r,e/a);h=Math.floor(r*L),f=Math.floor(a*L)}m=document.createElement("canvas");const b=m.width=Math.ceil(h*o.sx),v=m.height=Math.ceil(f*o.sy);this.#l||(u=this.#u(b,v));const w=m.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":S5.isDarkMode&&(x="#8f8f9d",_="#42414d");const A=15,T=A*o.sx,M=A*o.sy,R=new OffscreenCanvas(T*2,M*2),D=R.getContext("2d");D.fillStyle=x,D.fillRect(0,0,T*2,M*2),D.fillStyle=_,D.fillRect(0,0,T,M),D.fillRect(T,M,T,M),w.fillStyle=w.createPattern(R,"repeat"),w.fillRect(0,0,b,v),w.drawImage(u,0,0,u.width,u.height,0,0,b,v)}let p=null;if(i){let b,v;if(o.symmetric&&u.width<t&&u.height<t)b=u.width,v=u.height;else if(u=this.#t,r>t||a>t){const _=Math.min(t/r,t/a);b=Math.floor(r*_),v=Math.floor(a*_),this.#l||(u=this.#u(b,v))}const x=new OffscreenCanvas(b,v).getContext("2d",{willReadFrequently:!0});x.drawImage(u,0,0,u.width,u.height,0,0,b,v),p={width:b,height:v,data:x.getImageData(0,0,b,v).data}}return{canvas:m,width:h,height:f,imageData:p}}#u(t,e){const{width:i,height:r}=this.#t;let a=i,o=r,u=this.#t;for(;a>2*t||o>2*e;){const h=a,f=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const m=new OffscreenCanvas(a,o);m.getContext("2d").drawImage(u,0,0,h,f,0,0,a,o),u=m.transferToImageBitmap()}return u}#p(){const[t,e]=this.parentDimensions,{width:i,height:r}=this,a=new wr,o=Math.ceil(i*t*a.sx),u=Math.ceil(r*e*a.sy),h=this.#s;if(!h||h.width===o&&h.height===u)return;h.width=o,h.height=u;const f=this.#l?this.#t:this.#u(o,u),m=h.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(f,0,0,f.width,f.height,0,0,o,u)}#b(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,r=Math.round(this.width*e*yo.PDF_TO_CSS_UNITS),a=Math.round(this.height*i*yo.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let r=null,a=!1;if(t instanceof C4){const{data:{rect:x,rotation:_,id:A,structParent:T,popupRef:M,richText:R,contentsObj:D,creationDate:L,modificationDate:z},container:q,parent:{page:{pageNumber:U}},canvas:it}=t;let ut,H;it?(delete t.canvas,{id:ut,bitmap:H}=i.imageManager.getFromCanvas(q.id,it),it.remove()):(a=!0,t._hasNoCanvas=!0);const rt=(await e._structTree.getAriaAttributes(`${Of}${A}`))?.get("aria-label")||"";r=t={annotationType:ge.STAMP,bitmapId:ut,bitmap:H,pageIndex:U-1,rect:x.slice(0),rotation:_,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:rt},isSvg:!1,structParent:T,popupRef:M,richText:R,comment:D?.str||null,creationDate:L,modificationDate:z}}const o=await super.deserialize(t,e,i),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:m,isSvg:p,accessibilityData:b}=t;a?(i.addMissingCanvas(t.id,o),o.#o=!0):m&&i.imageManager.isValidId(m)?(o.#e=m,h&&(o.#t=h)):o.#i=f,o.#l=p;const[v,w]=o.pageDimensions;return o.width=(u[2]-u[0])/v,o.height=(u[3]-u[1])/w,b&&(o.altTextData=b),o._initialData=r,t.comment&&o.setCommentData(t),o.#d=!!r,o}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#b(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(i.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const u=this.#y(i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const o=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:o,serialized:i}),i.bitmap=this.#b(!1);else if(this.#l){const u=e.stamps.get(this.#e);o>u.area&&(u.area=o,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return i}#y(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===e,a=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&a,isSameAltText:a}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Xr{#t;#e=!1;#n=null;#i=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([zi,Yf,e7,yi,gr].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:a,annotationLayer:o,drawLayer:u,textLayer:h,viewport:f,l10n:m}){const p=[...Xr.#p.values()];if(!Xr._initialized){Xr._initialized=!0;for(const b of p)b.initialize(m,t)}t.registerEditorTypes(p),this.#u=t,this.pageIndex=e,this.div=i,this.#t=a,this.#n=o,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===ge.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case ge.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ge.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ge.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===ge.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of Xr.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}get#b(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const i of this.#b)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#n;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const i=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:o,clientY:u,timeStamp:h}=r,f=this.#m;if(h-f>500){this.#m=h;return}this.#m=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const p=document.elementsFromPoint(o,u);if(m.toggle("getElements",!1),!this.div.contains(p[0]))return;let b;const v=new RegExp(`^${Bl}[0-9]+$`);for(const x of p)if(v.test(x.id)){b=x.id;break}if(!b)return;const w=this.#r.get(b);w?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick(r))},{signal:i,capture:!0})}const t=this.#n;if(t){const i=new Map,r=new Map;for(const o of this.#b){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(t);continue}if(o.serialize()!==null){i.set(o.annotationElementId,o);continue}else r.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const a=t.getEditableAnnotations();for(const o of a){const{id:u}=o.data;if(this.#u.isDeletedAnnotationElement(u)){o.updateEdited({deleted:!0});continue}let h=r.get(u);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=i.get(u),h&&(this.#u.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const i of Xr.#p.values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#y.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#y(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=Hi.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),yi.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#r.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),ne.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#r.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Xr.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:r}=this.#A(),a=this.getNextId(),o=this.#E({parent:this,id:a,x:i,y:r,uiManager:this.#u,isCentered:!0,...e});o&&this.add(o)}async deserialize(t){return await Xr.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),a=this.#E({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:t,y:e,width:i,height:r}=this.boundingClientRect,a=Math.max(0,t),o=Math.max(0,e),u=Math.min(window.innerWidth,t+i),h=Math.min(window.innerHeight,e+r),f=(a+u)/2-t,m=(o+h)/2-e,[p,b]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:p,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Hi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===ge.STAMP||i===ge.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===ge.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=Hi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#v.endDrawing(t)):null}findNewParent(t,e,i){const r=this.#u.findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#r.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#r.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ga(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,ga(this.div,{rotation:i}),e!==i)for(const r of this.#r.values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Ui{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Se(this,"_svgFactory",new X0)}static#a(t,[e,i,r,a]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*r}%`,o.height=`${100*a}%`}#r(){const t=Ui._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const i=Ui._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const a=Ui._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),r}#o(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)}draw(t,e=!1,i=!1){const r=Ui.#i++,a=this.#r(),o=Ui._svgFactory.createElement("defs");a.append(o);const u=Ui._svgFactory.createElement("path");o.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(r,u);const f=i?this.#s(o,h):null,m=Ui._svgFactory.createElement("use");return a.append(m),m.setAttribute("href",`#${h}`),this.updateProperties(a,t),this.#e.set(r,a),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Ui.#i++,r=this.#r(),a=Ui._svgFactory.createElement("defs");r.append(a);const o=Ui._svgFactory.createElement("path");a.append(o);const u=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const p=Ui._svgFactory.createElement("mask");a.append(p),h=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",h),p.setAttribute("maskUnits","objectBoundingBox");const b=Ui._svgFactory.createElement("rect");p.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=Ui._svgFactory.createElement("use");p.append(v),v.setAttribute("href",`#${u}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const f=Ui._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const m=f.cloneNode();return r.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(i,r),i}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:r,rootClass:a,path:o}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(i&&this.#o(u,i),r&&Ui.#a(u,r),a){const{classList:h}=u;for(const[f,m]of Object.entries(a))h.toggle(f,m)}if(o){const f=u.firstChild.firstChild;this.#o(f,o)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:gf};globalThis.pdfjsLib={AbortException:Is,AnnotationEditorLayer:Xr,AnnotationEditorParamsType:Re,AnnotationEditorType:ge,AnnotationEditorUIManager:Fs,AnnotationLayer:$f,AnnotationMode:Os,AnnotationType:Ti,applyOpacity:_5,build:D6,ColorPicker:$n,createValidAbsoluteUrl:Qb,CSSConstants:A5,DOMSVGFactory:X0,DrawLayer:Ui,FeatureTest:Hi,fetchData:Vl,findContrastColor:E5,getDocument:x4,getFilenameFromUrl:b5,getPdfFilenameFromUrl:v5,getRGB:Kl,getUuid:e4,getXfaPageViewport:x5,GlobalWorkerOptions:go,ImageKind:U0,InvalidPDFException:of,isDataScheme:ou,isPdfFile:Lf,isValidExplicitDest:L5,MathClamp:tn,noContextMenu:Vn,normalizeUnicode:m5,OPS:Il,OutputScale:wr,PasswordResponses:s5,PDFDataRangeTransport:w4,PDFDateString:lf,PDFWorker:Pl,PermissionFlag:r5,PixelsPerInch:yo,RenderingCancelledException:zf,renderRichText:r4,ResponseException:Y0,setLayerDimensions:ga,shadow:Se,SignatureExtractor:lo,stopEvent:gi,SupportedImageMimeTypes:cf,TextLayer:Qi,TouchManager:lu,updateUrlHash:Jb,Util:Xt,VerbosityLevel:ru,version:R6,XfaLayer:n4};var q2;(function(l){l.STRING="string",l.NUMBER="number",l.INTEGER="integer",l.BOOLEAN="boolean",l.ARRAY="array",l.OBJECT="object"})(q2||(q2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $2;(function(l){l.LANGUAGE_UNSPECIFIED="language_unspecified",l.PYTHON="python"})($2||($2={}));var Y2;(function(l){l.OUTCOME_UNSPECIFIED="outcome_unspecified",l.OUTCOME_OK="outcome_ok",l.OUTCOME_FAILED="outcome_failed",l.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Y2||(Y2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=["user","model","function","system"];var X2;(function(l){l.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",l.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",l.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",l.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",l.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",l.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(X2||(X2={}));var K2;(function(l){l.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",l.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",l.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",l.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",l.BLOCK_NONE="BLOCK_NONE"})(K2||(K2={}));var W2;(function(l){l.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",l.NEGLIGIBLE="NEGLIGIBLE",l.LOW="LOW",l.MEDIUM="MEDIUM",l.HIGH="HIGH"})(W2||(W2={}));var Z2;(function(l){l.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",l.SAFETY="SAFETY",l.OTHER="OTHER"})(Z2||(Z2={}));var Ol;(function(l){l.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",l.STOP="STOP",l.MAX_TOKENS="MAX_TOKENS",l.SAFETY="SAFETY",l.RECITATION="RECITATION",l.LANGUAGE="LANGUAGE",l.BLOCKLIST="BLOCKLIST",l.PROHIBITED_CONTENT="PROHIBITED_CONTENT",l.SPII="SPII",l.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",l.OTHER="OTHER"})(Ol||(Ol={}));var Q2;(function(l){l.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",l.RETRIEVAL_QUERY="RETRIEVAL_QUERY",l.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",l.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",l.CLASSIFICATION="CLASSIFICATION",l.CLUSTERING="CLUSTERING"})(Q2||(Q2={}));var J2;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.AUTO="AUTO",l.ANY="ANY",l.NONE="NONE"})(J2||(J2={}));var tb;(function(l){l.MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.MODE_DYNAMIC="MODE_DYNAMIC"})(tb||(tb={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class ro extends Xi{constructor(t,e){super(t),this.response=e}}class D4 extends Xi{constructor(t,e,i,r){super(t),this.status=e,this.statusText=i,this.errorDetails=r}}class Bs extends Xi{}class N4 extends Xi{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="https://generativelanguage.googleapis.com",n7="v1beta",r7="0.24.1",s7="genai-js";var va;(function(l){l.GENERATE_CONTENT="generateContent",l.STREAM_GENERATE_CONTENT="streamGenerateContent",l.COUNT_TOKENS="countTokens",l.EMBED_CONTENT="embedContent",l.BATCH_EMBED_CONTENTS="batchEmbedContents"})(va||(va={}));class a7{constructor(t,e,i,r,a){this.model=t,this.task=e,this.apiKey=i,this.stream=r,this.requestOptions=a}toString(){var t,e;const i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||n7;let a=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||i7}/${i}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function o7(l){const t=[];return l?.apiClient&&t.push(l.apiClient),t.push(`${s7}/${r7}`),t.join(" ")}async function l7(l){var t;const e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",o7(l.requestOptions)),e.append("x-goog-api-key",l.apiKey);let i=(t=l.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new Bs(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,a]of i.entries()){if(r==="x-goog-api-key")throw new Bs(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new Bs(`Header name ${r} can only be set using the apiClient field`);e.append(r,a)}}return e}async function c7(l,t,e,i,r,a){const o=new a7(l,t,e,i,a);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},f7(a)),{method:"POST",headers:await l7(o),body:r})}}async function Jl(l,t,e,i,r,a={},o=fetch){const{url:u,fetchOptions:h}=await c7(l,t,e,i,r,a);return u7(u,h,o)}async function u7(l,t,e=fetch){let i;try{i=await e(l,t)}catch(r){h7(r,l)}return i.ok||await d7(i,l),i}function h7(l,t){let e=l;throw e.name==="AbortError"?(e=new N4(`Request aborted when fetching ${t.toString()}: ${l.message}`),e.stack=l.stack):l instanceof D4||l instanceof Bs||(e=new Xi(`Error fetching from ${t.toString()}: ${l.message}`),e.stack=l.stack),e}async function d7(l,t){let e="",i;try{const r=await l.json();e=r.error.message,r.error.details&&(e+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new D4(`Error fetching from ${t.toString()}: [${l.status} ${l.statusText}] ${e}`,l.status,l.statusText,i)}function f7(l){const t={};if(l?.signal!==void 0||l?.timeout>=0){const e=new AbortController;l?.timeout>=0&&setTimeout(()=>e.abort(),l.timeout),l?.signal&&l.signal.addEventListener("abort",()=>{e.abort()}),t.signal=e.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(l){return l.text=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),G0(l.candidates[0]))throw new ro(`${Ns(l)}`,l);return m7(l)}else if(l.promptFeedback)throw new ro(`Text not available. ${Ns(l)}`,l);return""},l.functionCall=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),G0(l.candidates[0]))throw new ro(`${Ns(l)}`,l);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),eb(l)[0]}else if(l.promptFeedback)throw new ro(`Function call not available. ${Ns(l)}`,l)},l.functionCalls=()=>{if(l.candidates&&l.candidates.length>0){if(l.candidates.length>1&&console.warn(`This response had ${l.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),G0(l.candidates[0]))throw new ro(`${Ns(l)}`,l);return eb(l)}else if(l.promptFeedback)throw new ro(`Function call not available. ${Ns(l)}`,l)},l}function m7(l){var t,e,i,r;const a=[];if(!((e=(t=l.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const o of(r=(i=l.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.text&&a.push(o.text),o.executableCode&&a.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&a.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function eb(l){var t,e,i,r;const a=[];if(!((e=(t=l.candidates)===null||t===void 0?void 0:t[0].content)===null||e===void 0)&&e.parts)for(const o of(r=(i=l.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.functionCall&&a.push(o.functionCall);if(a.length>0)return a}const p7=[Ol.RECITATION,Ol.SAFETY,Ol.LANGUAGE];function G0(l){return!!l.finishReason&&p7.includes(l.finishReason)}function Ns(l){var t,e,i;let r="";if((!l.candidates||l.candidates.length===0)&&l.promptFeedback)r+="Response was blocked",!((t=l.promptFeedback)===null||t===void 0)&&t.blockReason&&(r+=` due to ${l.promptFeedback.blockReason}`),!((e=l.promptFeedback)===null||e===void 0)&&e.blockReasonMessage&&(r+=`: ${l.promptFeedback.blockReasonMessage}`);else if(!((i=l.candidates)===null||i===void 0)&&i[0]){const a=l.candidates[0];G0(a)&&(r+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(r+=`: ${a.finishMessage}`))}return r}function jl(l){return this instanceof jl?(this.v=l,this):new jl(l)}function g7(l,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(l,t||[]),r,a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(b){i[b]&&(r[b]=function(v){return new Promise(function(w,x){a.push([b,v,w,x])>1||u(b,v)})})}function u(b,v){try{h(i[b](v))}catch(w){p(a[0][3],w)}}function h(b){b.value instanceof jl?Promise.resolve(b.value.v).then(f,m):p(a[0][2],b)}function f(b){u("next",b)}function m(b){u("throw",b)}function p(b,v){b(v),a.shift(),a.length&&u(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function b7(l){const t=l.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),e=x7(t),[i,r]=e.tee();return{stream:y7(i),response:v7(r)}}async function v7(l){const t=[],e=l.getReader();for(;;){const{done:i,value:r}=await e.read();if(i)return Kf(w7(t));t.push(r)}}function y7(l){return g7(this,arguments,function*(){const e=l.getReader();for(;;){const{value:i,done:r}=yield jl(e.read());if(r)break;yield yield jl(Kf(i))}})}function x7(l){const t=l.getReader();return new ReadableStream({start(i){let r="";return a();function a(){return t.read().then(({value:o,done:u})=>{if(u){if(r.trim()){i.error(new Xi("Failed to parse stream"));return}i.close();return}r+=o;let h=r.match(ib),f;for(;h;){try{f=JSON.parse(h[1])}catch{i.error(new Xi(`Error parsing JSON response: "${h[1]}"`));return}i.enqueue(f),r=r.substring(h[0].length),h=r.match(ib)}return a()}).catch(o=>{let u=o;throw u.stack=o.stack,u.name==="AbortError"?u=new N4("Request aborted when reading from the stream"):u=new Xi("Error reading from the stream"),u})}}})}function w7(l){const t=l[l.length-1],e={promptFeedback:t?.promptFeedback};for(const i of l){if(i.candidates){let r=0;for(const a of i.candidates)if(e.candidates||(e.candidates=[]),e.candidates[r]||(e.candidates[r]={index:r}),e.candidates[r].citationMetadata=a.citationMetadata,e.candidates[r].groundingMetadata=a.groundingMetadata,e.candidates[r].finishReason=a.finishReason,e.candidates[r].finishMessage=a.finishMessage,e.candidates[r].safetyRatings=a.safetyRatings,a.content&&a.content.parts){e.candidates[r].content||(e.candidates[r].content={role:a.content.role||"user",parts:[]});const o={};for(const u of a.content.parts)u.text&&(o.text=u.text),u.functionCall&&(o.functionCall=u.functionCall),u.executableCode&&(o.executableCode=u.executableCode),u.codeExecutionResult&&(o.codeExecutionResult=u.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),e.candidates[r].content.parts.push(o)}r++}i.usageMetadata&&(e.usageMetadata=i.usageMetadata)}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(l,t,e,i){const r=await Jl(t,va.STREAM_GENERATE_CONTENT,l,!0,JSON.stringify(e),i);return b7(r)}async function z4(l,t,e,i){const a=await(await Jl(t,va.GENERATE_CONTENT,l,!1,JSON.stringify(e),i)).json();return{response:Kf(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(l){if(l!=null){if(typeof l=="string")return{role:"system",parts:[{text:l}]};if(l.text)return{role:"system",parts:[l]};if(l.parts)return l.role?l:{role:"system",parts:l.parts}}}function Hl(l){let t=[];if(typeof l=="string")t=[{text:l}];else for(const e of l)typeof e=="string"?t.push({text:e}):t.push(e);return S7(t)}function S7(l){const t={role:"user",parts:[]},e={role:"function",parts:[]};let i=!1,r=!1;for(const a of l)"functionResponse"in a?(e.parts.push(a),r=!0):(t.parts.push(a),i=!0);if(i&&r)throw new Xi("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new Xi("No content is provided for sending chat message.");return i?t:e}function A7(l,t){var e;let i={model:t?.model,generationConfig:t?.generationConfig,safetySettings:t?.safetySettings,tools:t?.tools,toolConfig:t?.toolConfig,systemInstruction:t?.systemInstruction,cachedContent:(e=t?.cachedContent)===null||e===void 0?void 0:e.name,contents:[]};const r=l.generateContentRequest!=null;if(l.contents){if(r)throw new Bs("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=l.contents}else if(r)i=Object.assign(Object.assign({},i),l.generateContentRequest);else{const a=Hl(l);i.contents=[a]}return{generateContentRequest:i}}function nb(l){let t;return l.contents?t=l:t={contents:[Hl(l)]},l.systemInstruction&&(t.systemInstruction=L4(l.systemInstruction)),t}function _7(l){return typeof l=="string"||Array.isArray(l)?{content:Hl(l)}:l}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],E7={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function k7(l){let t=!1;for(const e of l){const{role:i,parts:r}=e;if(!t&&i!=="user")throw new Xi(`First content should be with role 'user', got ${i}`);if(!V2.includes(i))throw new Xi(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(V2)}`);if(!Array.isArray(r))throw new Xi("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new Xi("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const u of r)for(const h of rb)h in u&&(a[h]+=1);const o=E7[i];for(const u of rb)if(!o.includes(u)&&a[u]>0)throw new Xi(`Content with role '${i}' can't contain '${u}' part`);t=!0}}function sb(l){var t;if(l.candidates===void 0||l.candidates.length===0)return!1;const e=(t=l.candidates[0])===null||t===void 0?void 0:t.content;if(e===void 0||e.parts===void 0||e.parts.length===0)return!1;for(const i of e.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="SILENT_ERROR";class T7{constructor(t,e,i,r={}){this.model=e,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i?.history&&(k7(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var i,r,a,o,u,h;await this._sendPromise;const f=Hl(t),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},p=Object.assign(Object.assign({},this._requestOptions),e);let b;return this._sendPromise=this._sendPromise.then(()=>z4(this._apiKey,this.model,m,p)).then(v=>{var w;if(sb(v.response)){this._history.push(f);const x=Object.assign({parts:[],role:"model"},(w=v.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(x)}else{const x=Ns(v.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}b=v}).catch(v=>{throw this._sendPromise=Promise.resolve(),v}),await this._sendPromise,b}async sendMessageStream(t,e={}){var i,r,a,o,u,h;await this._sendPromise;const f=Hl(t),m={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(u=this.params)===null||u===void 0?void 0:u.systemInstruction,cachedContent:(h=this.params)===null||h===void 0?void 0:h.cachedContent,contents:[...this._history,f]},p=Object.assign(Object.assign({},this._requestOptions),e),b=O4(this._apiKey,this.model,m,p);return this._sendPromise=this._sendPromise.then(()=>b).catch(v=>{throw new Error(ab)}).then(v=>v.response).then(v=>{if(sb(v)){this._history.push(f);const w=Object.assign({},v.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=Ns(v);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(v=>{v.message!==ab&&console.error(v)}),b}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7(l,t,e,i){return(await Jl(t,va.COUNT_TOKENS,l,!1,JSON.stringify(e),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M7(l,t,e,i){return(await Jl(t,va.EMBED_CONTENT,l,!1,JSON.stringify(e),i)).json()}async function R7(l,t,e,i){const r=e.requests.map(o=>Object.assign(Object.assign({},o),{model:t}));return(await Jl(t,va.BATCH_EMBED_CONTENTS,l,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,e,i={}){this.apiKey=t,this._requestOptions=i,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=L4(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var i;const r=nb(t),a=Object.assign(Object.assign({},this._requestOptions),e);return z4(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}async generateContentStream(t,e={}){var i;const r=nb(t),a=Object.assign(Object.assign({},this._requestOptions),e);return O4(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),a)}startChat(t){var e;return new T7(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(e=this.cachedContent)===null||e===void 0?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){const i=A7(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),e);return C7(this.apiKey,this.model,i,r)}async embedContent(t,e={}){const i=_7(t),r=Object.assign(Object.assign({},this._requestOptions),e);return M7(this.apiKey,this.model,i,r)}async batchEmbedContents(t,e={}){const i=Object.assign(Object.assign({},this._requestOptions),e);return R7(this.apiKey,this.model,t,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D7{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new Xi("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new ob(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,i){if(!t.name)throw new Bs("Cached content must contain a `name` field.");if(!t.model)throw new Bs("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const o of r)if(e?.[o]&&t[o]&&e?.[o]!==t[o]){if(o==="model"){const u=e.model.startsWith("models/")?e.model.replace("models/",""):e.model,h=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(u===h)continue}throw new Bs(`Different value for "${o}" specified in modelParams (${e[o]}) and cachedContent (${t[o]})`)}const a=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new ob(this.apiKey,a,i)}}function M0(l){throw new Error('Could not dynamically require "'+l+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Gd={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var lb;function N7(){return lb||(lb=1,(function(l,t){(function(e){l.exports=e()})(function(){return(function e(i,r,a){function o(f,m){if(!r[f]){if(!i[f]){var p=typeof M0=="function"&&M0;if(!m&&p)return p(f,!0);if(u)return u(f,!0);var b=new Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b}var v=r[f]={exports:{}};i[f][0].call(v.exports,function(w){var x=i[f][1][w];return o(x||w)},v,v.exports,e,i,r,a)}return r[f].exports}for(var u=typeof M0=="function"&&M0,h=0;h<a.length;h++)o(a[h]);return o})({1:[function(e,i,r){var a=e("./utils"),o=e("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(h){for(var f,m,p,b,v,w,x,_=[],A=0,T=h.length,M=T,R=a.getTypeOf(h)!=="string";A<h.length;)M=T-A,p=R?(f=h[A++],m=A<T?h[A++]:0,A<T?h[A++]:0):(f=h.charCodeAt(A++),m=A<T?h.charCodeAt(A++):0,A<T?h.charCodeAt(A++):0),b=f>>2,v=(3&f)<<4|m>>4,w=1<M?(15&m)<<2|p>>6:64,x=2<M?63&p:64,_.push(u.charAt(b)+u.charAt(v)+u.charAt(w)+u.charAt(x));return _.join("")},r.decode=function(h){var f,m,p,b,v,w,x=0,_=0,A="data:";if(h.substr(0,A.length)===A)throw new Error("Invalid base64 input, it looks like a data url.");var T,M=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===u.charAt(64)&&M--,h.charAt(h.length-2)===u.charAt(64)&&M--,M%1!=0)throw new Error("Invalid base64 input, bad content length.");for(T=o.uint8array?new Uint8Array(0|M):new Array(0|M);x<h.length;)f=u.indexOf(h.charAt(x++))<<2|(b=u.indexOf(h.charAt(x++)))>>4,m=(15&b)<<4|(v=u.indexOf(h.charAt(x++)))>>2,p=(3&v)<<6|(w=u.indexOf(h.charAt(x++))),T[_++]=f,v!==64&&(T[_++]=m),w!==64&&(T[_++]=p);return T}},{"./support":30,"./utils":32}],2:[function(e,i,r){var a=e("./external"),o=e("./stream/DataWorker"),u=e("./stream/Crc32Probe"),h=e("./stream/DataLengthProbe");function f(m,p,b,v,w){this.compressedSize=m,this.uncompressedSize=p,this.crc32=b,this.compression=v,this.compressedContent=w}f.prototype={getContentWorker:function(){var m=new o(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new o(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(m,p,b){return m.pipe(new u).pipe(new h("uncompressedSize")).pipe(p.compressWorker(b)).pipe(new h("compressedSize")).withStreamInfo("compression",p)},i.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,i,r){var a=e("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},r.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,i,r){var a=e("./utils"),o=(function(){for(var u,h=[],f=0;f<256;f++){u=f;for(var m=0;m<8;m++)u=1&u?3988292384^u>>>1:u>>>1;h[f]=u}return h})();i.exports=function(u,h){return u!==void 0&&u.length?a.getTypeOf(u)!=="string"?(function(f,m,p,b){var v=o,w=b+p;f^=-1;for(var x=b;x<w;x++)f=f>>>8^v[255&(f^m[x])];return-1^f})(0|h,u,u.length,0):(function(f,m,p,b){var v=o,w=b+p;f^=-1;for(var x=b;x<w;x++)f=f>>>8^v[255&(f^m.charCodeAt(x))];return-1^f})(0|h,u,u.length,0):0}},{"./utils":32}],5:[function(e,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(e,i,r){var a=null;a=typeof Promise<"u"?Promise:e("lie"),i.exports={Promise:a}},{lie:37}],7:[function(e,i,r){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),u=e("./utils"),h=e("./stream/GenericWorker"),f=a?"uint8array":"array";function m(p,b){h.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=b,this.meta={}}r.magic="\b\0",u.inherits(m,h),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(f,p.data),!1)},m.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(b){p.push({data:b,meta:p.meta})}},r.compressWorker=function(p){return new m("Deflate",p)},r.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,i,r){function a(v,w){var x,_="";for(x=0;x<w;x++)_+=String.fromCharCode(255&v),v>>>=8;return _}function o(v,w,x,_,A,T){var M,R,D=v.file,L=v.compression,z=T!==f.utf8encode,q=u.transformTo("string",T(D.name)),U=u.transformTo("string",f.utf8encode(D.name)),it=D.comment,ut=u.transformTo("string",T(it)),H=u.transformTo("string",f.utf8encode(it)),rt=U.length!==D.name.length,N=H.length!==it.length,at="",X="",W="",xt=D.dir,bt=D.date,Rt={crc32:0,compressedSize:0,uncompressedSize:0};w&&!x||(Rt.crc32=v.crc32,Rt.compressedSize=v.compressedSize,Rt.uncompressedSize=v.uncompressedSize);var B=0;w&&(B|=8),z||!rt&&!N||(B|=2048);var P=0,st=0;xt&&(P|=16),A==="UNIX"?(st=798,P|=(function(vt,Ut){var Ft=vt;return vt||(Ft=Ut?16893:33204),(65535&Ft)<<16})(D.unixPermissions,xt)):(st=20,P|=(function(vt){return 63&(vt||0)})(D.dosPermissions)),M=bt.getUTCHours(),M<<=6,M|=bt.getUTCMinutes(),M<<=5,M|=bt.getUTCSeconds()/2,R=bt.getUTCFullYear()-1980,R<<=4,R|=bt.getUTCMonth()+1,R<<=5,R|=bt.getUTCDate(),rt&&(X=a(1,1)+a(m(q),4)+U,at+="up"+a(X.length,2)+X),N&&(W=a(1,1)+a(m(ut),4)+H,at+="uc"+a(W.length,2)+W);var pt="";return pt+=`
\0`,pt+=a(B,2),pt+=L.magic,pt+=a(M,2),pt+=a(R,2),pt+=a(Rt.crc32,4),pt+=a(Rt.compressedSize,4),pt+=a(Rt.uncompressedSize,4),pt+=a(q.length,2),pt+=a(at.length,2),{fileRecord:p.LOCAL_FILE_HEADER+pt+q+at,dirRecord:p.CENTRAL_FILE_HEADER+a(st,2)+pt+a(ut.length,2)+"\0\0\0\0"+a(P,4)+a(_,4)+q+at+ut}}var u=e("../utils"),h=e("../stream/GenericWorker"),f=e("../utf8"),m=e("../crc32"),p=e("../signature");function b(v,w,x,_){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=x,this.encodeFileName=_,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(b,h),b.prototype.push=function(v){var w=v.meta.percent||0,x=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,h.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:x?(w+100*(x-_-1))/x:100}}))},b.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var w=this.streamFiles&&!v.file.dir;if(w){var x=o(v,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:x.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(v){this.accumulate=!1;var w=this.streamFiles&&!v.file.dir,x=o(v,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(x.dirRecord),w)this.push({data:(function(_){return p.DATA_DESCRIPTOR+a(_.crc32,4)+a(_.compressedSize,4)+a(_.uncompressedSize,4)})(v),meta:{percent:100}});else for(this.push({data:x.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var v=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var x=this.bytesWritten-v,_=(function(A,T,M,R,D){var L=u.transformTo("string",D(R));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(A,2)+a(A,2)+a(T,4)+a(M,4)+a(L.length,2)+L})(this.dirRecords.length,x,v,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(v){this._sources.push(v);var w=this;return v.on("data",function(x){w.processChunk(x)}),v.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),v.on("error",function(x){w.error(x)}),this},b.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(v){var w=this._sources;if(!h.prototype.error.call(this,v))return!1;for(var x=0;x<w.length;x++)try{w[x].error(v)}catch{}return!0},b.prototype.lock=function(){h.prototype.lock.call(this);for(var v=this._sources,w=0;w<v.length;w++)v[w].lock()},i.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,i,r){var a=e("../compressions"),o=e("./ZipFileWorker");r.generateWorker=function(u,h,f){var m=new o(h.streamFiles,f,h.platform,h.encodeFileName),p=0;try{u.forEach(function(b,v){p++;var w=(function(T,M){var R=T||M,D=a[R];if(!D)throw new Error(R+" is not a valid compression method !");return D})(v.options.compression,h.compression),x=v.options.compressionOptions||h.compressionOptions||{},_=v.dir,A=v.date;v._compressWorker(w,x).withStreamInfo("file",{name:b,dir:_,date:A,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(b){m.error(b)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,i,r){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new a;for(var u in this)typeof this[u]!="function"&&(o[u]=this[u]);return o}}(a.prototype=e("./object")).loadAsync=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.version="3.10.1",a.loadAsync=function(o,u){return new a().loadAsync(o,u)},a.external=e("./external"),i.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,i,r){var a=e("./utils"),o=e("./external"),u=e("./utf8"),h=e("./zipEntries"),f=e("./stream/Crc32Probe"),m=e("./nodejsUtils");function p(b){return new o.Promise(function(v,w){var x=b.decompressed.getContentWorker().pipe(new f);x.on("error",function(_){w(_)}).on("end",function(){x.streamInfo.crc32!==b.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}i.exports=function(b,v){var w=this;return v=a.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),m.isNode&&m.isStream(b)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",b,!0,v.optimizedBinaryString,v.base64).then(function(x){var _=new h(v);return _.load(x),_}).then(function(x){var _=[o.Promise.resolve(x)],A=x.files;if(v.checkCRC32)for(var T=0;T<A.length;T++)_.push(p(A[T]));return o.Promise.all(_)}).then(function(x){for(var _=x.shift(),A=_.files,T=0;T<A.length;T++){var M=A[T],R=M.fileNameStr,D=a.resolve(M.fileNameStr);w.file(D,M.decompressed,{binary:!0,optimizedBinaryString:!0,date:M.date,dir:M.dir,comment:M.fileCommentStr.length?M.fileCommentStr:null,unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions,createFolders:v.createFolders}),M.dir||(w.file(D).unsafeOriginalName=R)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,i,r){var a=e("../utils"),o=e("../stream/GenericWorker");function u(h,f){o.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(f)}a.inherits(u,o),u.prototype._bindStream=function(h){var f=this;(this._stream=h).pause(),h.on("data",function(m){f.push({data:m,meta:{percent:0}})}).on("error",function(m){f.isPaused?this.generatedError=m:f.error(m)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},u.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,i,r){var a=e("readable-stream").Readable;function o(u,h,f){a.call(this,h),this._helper=u;var m=this;u.on("data",function(p,b){m.push(p)||m._helper.pause(),f&&f(b)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}e("../utils").inherits(o,a),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,o);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,o)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var o=new Buffer(a);return o.fill(0),o},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(e,i,r){function a(D,L,z){var q,U=u.getTypeOf(L),it=u.extend(z||{},m);it.date=it.date||new Date,it.compression!==null&&(it.compression=it.compression.toUpperCase()),typeof it.unixPermissions=="string"&&(it.unixPermissions=parseInt(it.unixPermissions,8)),it.unixPermissions&&16384&it.unixPermissions&&(it.dir=!0),it.dosPermissions&&16&it.dosPermissions&&(it.dir=!0),it.dir&&(D=A(D)),it.createFolders&&(q=_(D))&&T.call(this,q,!0);var ut=U==="string"&&it.binary===!1&&it.base64===!1;z&&z.binary!==void 0||(it.binary=!ut),(L instanceof p&&L.uncompressedSize===0||it.dir||!L||L.length===0)&&(it.base64=!1,it.binary=!0,L="",it.compression="STORE",U="string");var H=null;H=L instanceof p||L instanceof h?L:w.isNode&&w.isStream(L)?new x(D,L):u.prepareContent(D,L,it.binary,it.optimizedBinaryString,it.base64);var rt=new b(D,H,it);this.files[D]=rt}var o=e("./utf8"),u=e("./utils"),h=e("./stream/GenericWorker"),f=e("./stream/StreamHelper"),m=e("./defaults"),p=e("./compressedObject"),b=e("./zipObject"),v=e("./generate"),w=e("./nodejsUtils"),x=e("./nodejs/NodejsStreamInputAdapter"),_=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var L=D.lastIndexOf("/");return 0<L?D.substring(0,L):""},A=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},T=function(D,L){return L=L!==void 0?L:m.createFolders,D=A(D),this.files[D]||a.call(this,D,null,{dir:!0,createFolders:L}),this.files[D]};function M(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var L,z,q;for(L in this.files)q=this.files[L],(z=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&D(z,q)},filter:function(D){var L=[];return this.forEach(function(z,q){D(z,q)&&L.push(q)}),L},file:function(D,L,z){if(arguments.length!==1)return D=this.root+D,a.call(this,D,L,z),this;if(M(D)){var q=D;return this.filter(function(it,ut){return!ut.dir&&q.test(it)})}var U=this.files[this.root+D];return U&&!U.dir?U:null},folder:function(D){if(!D)return this;if(M(D))return this.filter(function(U,it){return it.dir&&D.test(U)});var L=this.root+D,z=T.call(this,L),q=this.clone();return q.root=z.name,q},remove:function(D){D=this.root+D;var L=this.files[D];if(L||(D.slice(-1)!=="/"&&(D+="/"),L=this.files[D]),L&&!L.dir)delete this.files[D];else for(var z=this.filter(function(U,it){return it.name.slice(0,D.length)===D}),q=0;q<z.length;q++)delete this.files[z[q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var L,z={};try{if((z=u.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");u.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var q=z.comment||this.comment||"";L=v.generateWorker(this,z,q)}catch(U){(L=new h("error")).error(U)}return new f(L,z.type||"string",z.mimeType)},generateAsync:function(D,L){return this.generateInternalStream(D).accumulate(L)},generateNodeStream:function(D,L){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(L)}};i.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,i,r){i.exports=e("stream")},{stream:void 0}],17:[function(e,i,r){var a=e("./DataReader");function o(u){a.call(this,u);for(var h=0;h<this.data.length;h++)u[h]=255&u[h]}e("../utils").inherits(o,a),o.prototype.byteAt=function(u){return this.data[this.zero+u]},o.prototype.lastIndexOfSignature=function(u){for(var h=u.charCodeAt(0),f=u.charCodeAt(1),m=u.charCodeAt(2),p=u.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===h&&this.data[b+1]===f&&this.data[b+2]===m&&this.data[b+3]===p)return b-this.zero;return-1},o.prototype.readAndCheckSignature=function(u){var h=u.charCodeAt(0),f=u.charCodeAt(1),m=u.charCodeAt(2),p=u.charCodeAt(3),b=this.readData(4);return h===b[0]&&f===b[1]&&m===b[2]&&p===b[3]},o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,i,r){var a=e("../utils");function o(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var h,f=0;for(this.checkOffset(u),h=this.index+u-1;h>=this.index;h--)f=(f<<8)+this.byteAt(h);return this.index+=u,f},readString:function(u){return a.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},i.exports=o},{"../utils":32}],19:[function(e,i,r){var a=e("./Uint8ArrayReader");function o(u){a.call(this,u)}e("../utils").inherits(o,a),o.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,i,r){var a=e("./DataReader");function o(u){a.call(this,u)}e("../utils").inherits(o,a),o.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},o.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},o.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},o.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,i,r){var a=e("./ArrayReader");function o(u){a.call(this,u)}e("../utils").inherits(o,a),o.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,i,r){var a=e("../utils"),o=e("../support"),u=e("./ArrayReader"),h=e("./StringReader"),f=e("./NodeBufferReader"),m=e("./Uint8ArrayReader");i.exports=function(p){var b=a.getTypeOf(p);return a.checkSupport(b),b!=="string"||o.uint8array?b==="nodebuffer"?new f(p):o.uint8array?new m(a.transformTo("uint8array",p)):new u(a.transformTo("array",p)):new h(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,i,r){var a=e("./GenericWorker"),o=e("../utils");function u(h){a.call(this,"ConvertWorker to "+h),this.destType=h}o.inherits(u,a),u.prototype.processChunk=function(h){this.push({data:o.transformTo(this.destType,h.data),meta:h.meta})},i.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(e,i,r){var a=e("./GenericWorker"),o=e("../crc32");function u(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(u,a),u.prototype.processChunk=function(h){this.streamInfo.crc32=o(h.data,this.streamInfo.crc32||0),this.push(h)},i.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,i,r){var a=e("../utils"),o=e("./GenericWorker");function u(h){o.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}a.inherits(u,o),u.prototype.processChunk=function(h){if(h){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+h.data.length}o.prototype.processChunk.call(this,h)},i.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(e,i,r){var a=e("../utils"),o=e("./GenericWorker");function u(h){o.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(m){f.dataIsReady=!0,f.data=m,f.max=m&&m.length||0,f.type=a.getTypeOf(m),f.isPaused||f._tickAndRepeat()},function(m){f.error(m)})}a.inherits(u,o),u.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,f);break;case"uint8array":h=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":h=this.data.slice(this.index,f)}return this.index=f,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(e,i,r){function a(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,u){return this._listeners[o].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,u){if(this._listeners[o])for(var h=0;h<this._listeners[o].length;h++)this._listeners[o][h].call(this,u)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var u=this;return o.on("data",function(h){u.processChunk(h)}),o.on("end",function(){u.end()}),o.on("error",function(h){u.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,u){return this.extraStreamInfo[o]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=a},{}],29:[function(e,i,r){var a=e("../utils"),o=e("./ConvertWorker"),u=e("./GenericWorker"),h=e("../base64"),f=e("../support"),m=e("../external"),p=null;if(f.nodestream)try{p=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(w,x){return new m.Promise(function(_,A){var T=[],M=w._internalType,R=w._outputType,D=w._mimeType;w.on("data",function(L,z){T.push(L),x&&x(z)}).on("error",function(L){T=[],A(L)}).on("end",function(){try{var L=(function(z,q,U){switch(z){case"blob":return a.newBlob(a.transformTo("arraybuffer",q),U);case"base64":return h.encode(q);default:return a.transformTo(z,q)}})(R,(function(z,q){var U,it=0,ut=null,H=0;for(U=0;U<q.length;U++)H+=q[U].length;switch(z){case"string":return q.join("");case"array":return Array.prototype.concat.apply([],q);case"uint8array":for(ut=new Uint8Array(H),U=0;U<q.length;U++)ut.set(q[U],it),it+=q[U].length;return ut;case"nodebuffer":return Buffer.concat(q);default:throw new Error("concat : unsupported type '"+z+"'")}})(M,T),D);_(L)}catch(z){A(z)}T=[]}).resume()})}function v(w,x,_){var A=x;switch(x){case"blob":case"arraybuffer":A="uint8array";break;case"base64":A="string"}try{this._internalType=A,this._outputType=x,this._mimeType=_,a.checkSupport(A),this._worker=w.pipe(new o(A)),w.lock()}catch(T){this._worker=new u("error"),this._worker.error(T)}}v.prototype={accumulate:function(w){return b(this,w)},on:function(w,x){var _=this;return w==="data"?this._worker.on(w,function(A){x.call(_,A.data,A.meta)}):this._worker.on(w,function(){a.delay(x,arguments,_)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},w)}},i.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var a=new ArrayBuffer(0);try{r.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(a),r.blob=o.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(e,i,r){for(var a=e("./utils"),o=e("./support"),u=e("./nodejsUtils"),h=e("./stream/GenericWorker"),f=new Array(256),m=0;m<256;m++)f[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;f[254]=f[254]=1;function p(){h.call(this,"utf-8 decode"),this.leftOver=null}function b(){h.call(this,"utf-8 encode")}r.utf8encode=function(v){return o.nodebuffer?u.newBufferFrom(v,"utf-8"):(function(w){var x,_,A,T,M,R=w.length,D=0;for(T=0;T<R;T++)(64512&(_=w.charCodeAt(T)))==55296&&T+1<R&&(64512&(A=w.charCodeAt(T+1)))==56320&&(_=65536+(_-55296<<10)+(A-56320),T++),D+=_<128?1:_<2048?2:_<65536?3:4;for(x=o.uint8array?new Uint8Array(D):new Array(D),T=M=0;M<D;T++)(64512&(_=w.charCodeAt(T)))==55296&&T+1<R&&(64512&(A=w.charCodeAt(T+1)))==56320&&(_=65536+(_-55296<<10)+(A-56320),T++),_<128?x[M++]=_:(_<2048?x[M++]=192|_>>>6:(_<65536?x[M++]=224|_>>>12:(x[M++]=240|_>>>18,x[M++]=128|_>>>12&63),x[M++]=128|_>>>6&63),x[M++]=128|63&_);return x})(v)},r.utf8decode=function(v){return o.nodebuffer?a.transformTo("nodebuffer",v).toString("utf-8"):(function(w){var x,_,A,T,M=w.length,R=new Array(2*M);for(x=_=0;x<M;)if((A=w[x++])<128)R[_++]=A;else if(4<(T=f[A]))R[_++]=65533,x+=T-1;else{for(A&=T===2?31:T===3?15:7;1<T&&x<M;)A=A<<6|63&w[x++],T--;1<T?R[_++]=65533:A<65536?R[_++]=A:(A-=65536,R[_++]=55296|A>>10&1023,R[_++]=56320|1023&A)}return R.length!==_&&(R.subarray?R=R.subarray(0,_):R.length=_),a.applyFromCharCode(R)})(v=a.transformTo(o.uint8array?"uint8array":"array",v))},a.inherits(p,h),p.prototype.processChunk=function(v){var w=a.transformTo(o.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var x=w;(w=new Uint8Array(x.length+this.leftOver.length)).set(this.leftOver,0),w.set(x,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=(function(T,M){var R;for((M=M||T.length)>T.length&&(M=T.length),R=M-1;0<=R&&(192&T[R])==128;)R--;return R<0||R===0?M:R+f[T[R]]>M?R:M})(w),A=w;_!==w.length&&(o.uint8array?(A=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(A=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:r.utf8decode(A),meta:v.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=p,a.inherits(b,h),b.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,i,r){var a=e("./support"),o=e("./base64"),u=e("./nodejsUtils"),h=e("./external");function f(x){return x}function m(x,_){for(var A=0;A<x.length;++A)_[A]=255&x.charCodeAt(A);return _}e("setimmediate"),r.newBlob=function(x,_){r.checkSupport("blob");try{return new Blob([x],{type:_})}catch{try{var A=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return A.append(x),A.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(x,_,A){var T=[],M=0,R=x.length;if(R<=A)return String.fromCharCode.apply(null,x);for(;M<R;)_==="array"||_==="nodebuffer"?T.push(String.fromCharCode.apply(null,x.slice(M,Math.min(M+A,R)))):T.push(String.fromCharCode.apply(null,x.subarray(M,Math.min(M+A,R)))),M+=A;return T.join("")},stringifyByChar:function(x){for(var _="",A=0;A<x.length;A++)_+=String.fromCharCode(x[A]);return _},applyCanBeUsed:{uint8array:(function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function b(x){var _=65536,A=r.getTypeOf(x),T=!0;if(A==="uint8array"?T=p.applyCanBeUsed.uint8array:A==="nodebuffer"&&(T=p.applyCanBeUsed.nodebuffer),T)for(;1<_;)try{return p.stringifyByChunk(x,A,_)}catch{_=Math.floor(_/2)}return p.stringifyByChar(x)}function v(x,_){for(var A=0;A<x.length;A++)_[A]=x[A];return _}r.applyFromCharCode=b;var w={};w.string={string:f,array:function(x){return m(x,new Array(x.length))},arraybuffer:function(x){return w.string.uint8array(x).buffer},uint8array:function(x){return m(x,new Uint8Array(x.length))},nodebuffer:function(x){return m(x,u.allocBuffer(x.length))}},w.array={string:b,array:f,arraybuffer:function(x){return new Uint8Array(x).buffer},uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return u.newBufferFrom(x)}},w.arraybuffer={string:function(x){return b(new Uint8Array(x))},array:function(x){return v(new Uint8Array(x),new Array(x.byteLength))},arraybuffer:f,uint8array:function(x){return new Uint8Array(x)},nodebuffer:function(x){return u.newBufferFrom(new Uint8Array(x))}},w.uint8array={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return x.buffer},uint8array:f,nodebuffer:function(x){return u.newBufferFrom(x)}},w.nodebuffer={string:b,array:function(x){return v(x,new Array(x.length))},arraybuffer:function(x){return w.nodebuffer.uint8array(x).buffer},uint8array:function(x){return v(x,new Uint8Array(x.length))},nodebuffer:f},r.transformTo=function(x,_){if(_=_||"",!x)return _;r.checkSupport(x);var A=r.getTypeOf(_);return w[A][x](_)},r.resolve=function(x){for(var _=x.split("/"),A=[],T=0;T<_.length;T++){var M=_[T];M==="."||M===""&&T!==0&&T!==_.length-1||(M===".."?A.pop():A.push(M))}return A.join("/")},r.getTypeOf=function(x){return typeof x=="string"?"string":Object.prototype.toString.call(x)==="[object Array]"?"array":a.nodebuffer&&u.isBuffer(x)?"nodebuffer":a.uint8array&&x instanceof Uint8Array?"uint8array":a.arraybuffer&&x instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(x){if(!a[x.toLowerCase()])throw new Error(x+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(x){var _,A,T="";for(A=0;A<(x||"").length;A++)T+="\\x"+((_=x.charCodeAt(A))<16?"0":"")+_.toString(16).toUpperCase();return T},r.delay=function(x,_,A){setImmediate(function(){x.apply(A||null,_||[])})},r.inherits=function(x,_){function A(){}A.prototype=_.prototype,x.prototype=new A},r.extend=function(){var x,_,A={};for(x=0;x<arguments.length;x++)for(_ in arguments[x])Object.prototype.hasOwnProperty.call(arguments[x],_)&&A[_]===void 0&&(A[_]=arguments[x][_]);return A},r.prepareContent=function(x,_,A,T,M){return h.Promise.resolve(_).then(function(R){return a.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new h.Promise(function(D,L){var z=new FileReader;z.onload=function(q){D(q.target.result)},z.onerror=function(q){L(q.target.error)},z.readAsArrayBuffer(R)}):R}).then(function(R){var D=r.getTypeOf(R);return D?(D==="arraybuffer"?R=r.transformTo("uint8array",R):D==="string"&&(M?R=o.decode(R):A&&T!==!0&&(R=(function(L){return m(L,a.uint8array?new Uint8Array(L.length):new Array(L.length))})(R))),R):h.Promise.reject(new Error("Can't read the data of '"+x+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,i,r){var a=e("./reader/readerFor"),o=e("./utils"),u=e("./signature"),h=e("./zipEntry"),f=e("./support");function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(b)+", expected "+o.pretty(p)+")")}},isSignature:function(p,b){var v=this.reader.index;this.reader.setIndex(p);var w=this.reader.readString(4)===b;return this.reader.setIndex(v),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),b=f.uint8array?"uint8array":"array",v=o.transformTo(b,p);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,b,v,w=this.zip64EndOfCentralSize-44;0<w;)p=this.reader.readInt(2),b=this.reader.readInt(4),v=this.reader.readData(b),this.zip64ExtensibleData[p]={id:p,length:b,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,b;for(p=0;p<this.files.length;p++)b=this.files[p],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(p=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var b=p;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var w=b-v;if(0<w)this.isSignature(b,u.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(p){this.reader=a(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,i,r){var a=e("./reader/readerFor"),o=e("./utils"),u=e("./compressedObject"),h=e("./crc32"),f=e("./utf8"),m=e("./compressions"),p=e("./support");function b(v,w){this.options=v,this.loadOptions=w}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var w,x;if(v.skip(22),this.fileNameLength=v.readInt(2),x=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=(function(_){for(var A in m)if(Object.prototype.hasOwnProperty.call(m,A)&&m[A].magic===_)return m[A];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,w,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var w=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(w),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=a(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var w,x,_,A=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<A;)w=v.readInt(2),x=v.readInt(2),_=v.readData(x),this.extraFields[w]={id:w,length:x,value:_};v.setIndex(A)},handleUTF8:function(){var v=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var x=o.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var A=o.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(A)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var w=a(v.value);return w.readInt(1)!==1||h(this.fileName)!==w.readInt(4)?null:f.utf8decode(w.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var w=a(v.value);return w.readInt(1)!==1||h(this.fileComment)!==w.readInt(4)?null:f.utf8decode(w.readData(v.length-5))}return null}},i.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,i,r){function a(w,x,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=x,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=e("./stream/StreamHelper"),u=e("./stream/DataWorker"),h=e("./utf8"),f=e("./compressedObject"),m=e("./stream/GenericWorker");a.prototype={internalStream:function(w){var x=null,_="string";try{if(!w)throw new Error("No output type specified.");var A=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),x=this._decompressWorker();var T=!this._dataBinary;T&&!A&&(x=x.pipe(new h.Utf8EncodeWorker)),!T&&A&&(x=x.pipe(new h.Utf8DecodeWorker))}catch(M){(x=new m("error")).error(M)}return new o(x,_,"")},async:function(w,x){return this.internalStream(w).accumulate(x)},nodeStream:function(w,x){return this.internalStream(w||"nodebuffer").toNodejsStream(x)},_compressWorker:function(w,x){if(this._data instanceof f&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new h.Utf8EncodeWorker)),f.createWorkerFrom(_,w,x)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof m?this._data:new u(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<p.length;v++)a.prototype[p[v]]=b;i.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,i,r){(function(a){var o,u,h=a.MutationObserver||a.WebKitMutationObserver;if(h){var f=0,m=new h(w),p=a.document.createTextNode("");m.observe(p,{characterData:!0}),o=function(){p.data=f=++f%2}}else if(a.setImmediate||a.MessageChannel===void 0)o="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var x=a.document.createElement("script");x.onreadystatechange=function(){w(),x.onreadystatechange=null,x.parentNode.removeChild(x),x=null},a.document.documentElement.appendChild(x)}:function(){setTimeout(w,0)};else{var b=new a.MessageChannel;b.port1.onmessage=w,o=function(){b.port2.postMessage(0)}}var v=[];function w(){var x,_;u=!0;for(var A=v.length;A;){for(_=v,v=[],x=-1;++x<A;)_[x]();A=v.length}u=!1}i.exports=function(x){v.push(x)!==1||u||o()}}).call(this,typeof v0<"u"?v0:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,i,r){var a=e("immediate");function o(){}var u={},h=["REJECTED"],f=["FULFILLED"],m=["PENDING"];function p(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,A!==o&&x(this,A)}function b(A,T,M){this.promise=A,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function v(A,T,M){a(function(){var R;try{R=T(M)}catch(D){return u.reject(A,D)}R===A?u.reject(A,new TypeError("Cannot resolve promise with itself")):u.resolve(A,R)})}function w(A){var T=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof T=="function")return function(){T.apply(A,arguments)}}function x(A,T){var M=!1;function R(z){M||(M=!0,u.reject(A,z))}function D(z){M||(M=!0,u.resolve(A,z))}var L=_(function(){T(D,R)});L.status==="error"&&R(L.value)}function _(A,T){var M={};try{M.value=A(T),M.status="success"}catch(R){M.status="error",M.value=R}return M}(i.exports=p).prototype.finally=function(A){if(typeof A!="function")return this;var T=this.constructor;return this.then(function(M){return T.resolve(A()).then(function(){return M})},function(M){return T.resolve(A()).then(function(){throw M})})},p.prototype.catch=function(A){return this.then(null,A)},p.prototype.then=function(A,T){if(typeof A!="function"&&this.state===f||typeof T!="function"&&this.state===h)return this;var M=new this.constructor(o);return this.state!==m?v(M,this.state===f?A:T,this.outcome):this.queue.push(new b(M,A,T)),M},b.prototype.callFulfilled=function(A){u.resolve(this.promise,A)},b.prototype.otherCallFulfilled=function(A){v(this.promise,this.onFulfilled,A)},b.prototype.callRejected=function(A){u.reject(this.promise,A)},b.prototype.otherCallRejected=function(A){v(this.promise,this.onRejected,A)},u.resolve=function(A,T){var M=_(w,T);if(M.status==="error")return u.reject(A,M.value);var R=M.value;if(R)x(A,R);else{A.state=f,A.outcome=T;for(var D=-1,L=A.queue.length;++D<L;)A.queue[D].callFulfilled(T)}return A},u.reject=function(A,T){A.state=h,A.outcome=T;for(var M=-1,R=A.queue.length;++M<R;)A.queue[M].callRejected(T);return A},p.resolve=function(A){return A instanceof this?A:u.resolve(new this(o),A)},p.reject=function(A){var T=new this(o);return u.reject(T,A)},p.all=function(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=A.length,R=!1;if(!M)return this.resolve([]);for(var D=new Array(M),L=0,z=-1,q=new this(o);++z<M;)U(A[z],z);return q;function U(it,ut){T.resolve(it).then(function(H){D[ut]=H,++L!==M||R||(R=!0,u.resolve(q,D))},function(H){R||(R=!0,u.reject(q,H))})}},p.race=function(A){var T=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=A.length,R=!1;if(!M)return this.resolve([]);for(var D=-1,L=new this(o);++D<M;)z=A[D],T.resolve(z).then(function(q){R||(R=!0,u.resolve(L,q))},function(q){R||(R=!0,u.reject(L,q))});var z;return L}},{immediate:36}],38:[function(e,i,r){var a={};(0,e("./lib/utils/common").assign)(a,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),i.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,i,r){var a=e("./zlib/deflate"),o=e("./utils/common"),u=e("./utils/strings"),h=e("./zlib/messages"),f=e("./zlib/zstream"),m=Object.prototype.toString,p=0,b=-1,v=0,w=8;function x(A){if(!(this instanceof x))return new x(A);this.options=o.assign({level:b,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},A||{});var T=this.options;T.raw&&0<T.windowBits?T.windowBits=-T.windowBits:T.gzip&&0<T.windowBits&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var M=a.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(M!==p)throw new Error(h[M]);if(T.header&&a.deflateSetHeader(this.strm,T.header),T.dictionary){var R;if(R=typeof T.dictionary=="string"?u.string2buf(T.dictionary):m.call(T.dictionary)==="[object ArrayBuffer]"?new Uint8Array(T.dictionary):T.dictionary,(M=a.deflateSetDictionary(this.strm,R))!==p)throw new Error(h[M]);this._dict_set=!0}}function _(A,T){var M=new x(T);if(M.push(A,!0),M.err)throw M.msg||h[M.err];return M.result}x.prototype.push=function(A,T){var M,R,D=this.strm,L=this.options.chunkSize;if(this.ended)return!1;R=T===~~T?T:T===!0?4:0,typeof A=="string"?D.input=u.string2buf(A):m.call(A)==="[object ArrayBuffer]"?D.input=new Uint8Array(A):D.input=A,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new o.Buf8(L),D.next_out=0,D.avail_out=L),(M=a.deflate(D,R))!==1&&M!==p)return this.onEnd(M),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(o.shrinkBuf(D.output,D.next_out))):this.onData(o.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&M!==1);return R===4?(M=a.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===p):R!==2||(this.onEnd(p),!(D.avail_out=0))},x.prototype.onData=function(A){this.chunks.push(A)},x.prototype.onEnd=function(A){A===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg},r.Deflate=x,r.deflate=_,r.deflateRaw=function(A,T){return(T=T||{}).raw=!0,_(A,T)},r.gzip=function(A,T){return(T=T||{}).gzip=!0,_(A,T)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,i,r){var a=e("./zlib/inflate"),o=e("./utils/common"),u=e("./utils/strings"),h=e("./zlib/constants"),f=e("./zlib/messages"),m=e("./zlib/zstream"),p=e("./zlib/gzheader"),b=Object.prototype.toString;function v(x){if(!(this instanceof v))return new v(x);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},x||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||x&&x.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var A=a.inflateInit2(this.strm,_.windowBits);if(A!==h.Z_OK)throw new Error(f[A]);this.header=new p,a.inflateGetHeader(this.strm,this.header)}function w(x,_){var A=new v(_);if(A.push(x,!0),A.err)throw A.msg||f[A.err];return A.result}v.prototype.push=function(x,_){var A,T,M,R,D,L,z=this.strm,q=this.options.chunkSize,U=this.options.dictionary,it=!1;if(this.ended)return!1;T=_===~~_?_:_===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof x=="string"?z.input=u.binstring2buf(x):b.call(x)==="[object ArrayBuffer]"?z.input=new Uint8Array(x):z.input=x,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new o.Buf8(q),z.next_out=0,z.avail_out=q),(A=a.inflate(z,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&U&&(L=typeof U=="string"?u.string2buf(U):b.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,A=a.inflateSetDictionary(this.strm,L)),A===h.Z_BUF_ERROR&&it===!0&&(A=h.Z_OK,it=!1),A!==h.Z_STREAM_END&&A!==h.Z_OK)return this.onEnd(A),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&A!==h.Z_STREAM_END&&(z.avail_in!==0||T!==h.Z_FINISH&&T!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(M=u.utf8border(z.output,z.next_out),R=z.next_out-M,D=u.buf2string(z.output,M),z.next_out=R,z.avail_out=q-R,R&&o.arraySet(z.output,z.output,M,R,0),this.onData(D)):this.onData(o.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(it=!0)}while((0<z.avail_in||z.avail_out===0)&&A!==h.Z_STREAM_END);return A===h.Z_STREAM_END&&(T=h.Z_FINISH),T===h.Z_FINISH?(A=a.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===h.Z_OK):T!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(z.avail_out=0))},v.prototype.onData=function(x){this.chunks.push(x)},v.prototype.onEnd=function(x){x===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},r.Inflate=v,r.inflate=w,r.inflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},r.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,i,r){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(h){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var m=f.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(h[p]=m[p])}}return h},r.shrinkBuf=function(h,f){return h.length===f?h:h.subarray?h.subarray(0,f):(h.length=f,h)};var o={arraySet:function(h,f,m,p,b){if(f.subarray&&h.subarray)h.set(f.subarray(m,m+p),b);else for(var v=0;v<p;v++)h[b+v]=f[m+v]},flattenChunks:function(h){var f,m,p,b,v,w;for(f=p=0,m=h.length;f<m;f++)p+=h[f].length;for(w=new Uint8Array(p),f=b=0,m=h.length;f<m;f++)v=h[f],w.set(v,b),b+=v.length;return w}},u={arraySet:function(h,f,m,p,b){for(var v=0;v<p;v++)h[b+v]=f[m+v]},flattenChunks:function(h){return[].concat.apply([],h)}};r.setTyped=function(h){h?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,u))},r.setTyped(a)},{}],42:[function(e,i,r){var a=e("./common"),o=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var h=new a.Buf8(256),f=0;f<256;f++)h[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function m(p,b){if(b<65537&&(p.subarray&&u||!p.subarray&&o))return String.fromCharCode.apply(null,a.shrinkBuf(p,b));for(var v="",w=0;w<b;w++)v+=String.fromCharCode(p[w]);return v}h[254]=h[254]=1,r.string2buf=function(p){var b,v,w,x,_,A=p.length,T=0;for(x=0;x<A;x++)(64512&(v=p.charCodeAt(x)))==55296&&x+1<A&&(64512&(w=p.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(w-56320),x++),T+=v<128?1:v<2048?2:v<65536?3:4;for(b=new a.Buf8(T),x=_=0;_<T;x++)(64512&(v=p.charCodeAt(x)))==55296&&x+1<A&&(64512&(w=p.charCodeAt(x+1)))==56320&&(v=65536+(v-55296<<10)+(w-56320),x++),v<128?b[_++]=v:(v<2048?b[_++]=192|v>>>6:(v<65536?b[_++]=224|v>>>12:(b[_++]=240|v>>>18,b[_++]=128|v>>>12&63),b[_++]=128|v>>>6&63),b[_++]=128|63&v);return b},r.buf2binstring=function(p){return m(p,p.length)},r.binstring2buf=function(p){for(var b=new a.Buf8(p.length),v=0,w=b.length;v<w;v++)b[v]=p.charCodeAt(v);return b},r.buf2string=function(p,b){var v,w,x,_,A=b||p.length,T=new Array(2*A);for(v=w=0;v<A;)if((x=p[v++])<128)T[w++]=x;else if(4<(_=h[x]))T[w++]=65533,v+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&v<A;)x=x<<6|63&p[v++],_--;1<_?T[w++]=65533:x<65536?T[w++]=x:(x-=65536,T[w++]=55296|x>>10&1023,T[w++]=56320|1023&x)}return m(T,w)},r.utf8border=function(p,b){var v;for((b=b||p.length)>p.length&&(b=p.length),v=b-1;0<=v&&(192&p[v])==128;)v--;return v<0||v===0?b:v+h[p[v]]>b?v:b}},{"./common":41}],43:[function(e,i,r){i.exports=function(a,o,u,h){for(var f=65535&a|0,m=a>>>16&65535|0,p=0;u!==0;){for(u-=p=2e3<u?2e3:u;m=m+(f=f+o[h++]|0)|0,--p;);f%=65521,m%=65521}return f|m<<16|0}},{}],44:[function(e,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,i,r){var a=(function(){for(var o,u=[],h=0;h<256;h++){o=h;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;u[h]=o}return u})();i.exports=function(o,u,h,f){var m=a,p=f+h;o^=-1;for(var b=f;b<p;b++)o=o>>>8^m[255&(o^u[b])];return-1^o}},{}],46:[function(e,i,r){var a,o=e("../utils/common"),u=e("./trees"),h=e("./adler32"),f=e("./crc32"),m=e("./messages"),p=0,b=4,v=0,w=-2,x=-1,_=4,A=2,T=8,M=9,R=286,D=30,L=19,z=2*R+1,q=15,U=3,it=258,ut=it+U+1,H=42,rt=113,N=1,at=2,X=3,W=4;function xt(C,At){return C.msg=m[At],At}function bt(C){return(C<<1)-(4<C?9:0)}function Rt(C){for(var At=C.length;0<=--At;)C[At]=0}function B(C){var At=C.state,gt=At.pending;gt>C.avail_out&&(gt=C.avail_out),gt!==0&&(o.arraySet(C.output,At.pending_buf,At.pending_out,gt,C.next_out),C.next_out+=gt,At.pending_out+=gt,C.total_out+=gt,C.avail_out-=gt,At.pending-=gt,At.pending===0&&(At.pending_out=0))}function P(C,At){u._tr_flush_block(C,0<=C.block_start?C.block_start:-1,C.strstart-C.block_start,At),C.block_start=C.strstart,B(C.strm)}function st(C,At){C.pending_buf[C.pending++]=At}function pt(C,At){C.pending_buf[C.pending++]=At>>>8&255,C.pending_buf[C.pending++]=255&At}function vt(C,At){var gt,$,j=C.max_chain_length,Z=C.strstart,kt=C.prev_length,Tt=C.nice_match,ht=C.strstart>C.w_size-ut?C.strstart-(C.w_size-ut):0,zt=C.window,Lt=C.w_mask,nt=C.prev,Zt=C.strstart+it,ve=zt[Z+kt-1],ye=zt[Z+kt];C.prev_length>=C.good_match&&(j>>=2),Tt>C.lookahead&&(Tt=C.lookahead);do if(zt[(gt=At)+kt]===ye&&zt[gt+kt-1]===ve&&zt[gt]===zt[Z]&&zt[++gt]===zt[Z+1]){Z+=2,gt++;do;while(zt[++Z]===zt[++gt]&&zt[++Z]===zt[++gt]&&zt[++Z]===zt[++gt]&&zt[++Z]===zt[++gt]&&zt[++Z]===zt[++gt]&&zt[++Z]===zt[++gt]&&zt[++Z]===zt[++gt]&&zt[++Z]===zt[++gt]&&Z<Zt);if($=it-(Zt-Z),Z=Zt-it,kt<$){if(C.match_start=At,Tt<=(kt=$))break;ve=zt[Z+kt-1],ye=zt[Z+kt]}}while((At=nt[At&Lt])>ht&&--j!=0);return kt<=C.lookahead?kt:C.lookahead}function Ut(C){var At,gt,$,j,Z,kt,Tt,ht,zt,Lt,nt=C.w_size;do{if(j=C.window_size-C.lookahead-C.strstart,C.strstart>=nt+(nt-ut)){for(o.arraySet(C.window,C.window,nt,nt,0),C.match_start-=nt,C.strstart-=nt,C.block_start-=nt,At=gt=C.hash_size;$=C.head[--At],C.head[At]=nt<=$?$-nt:0,--gt;);for(At=gt=nt;$=C.prev[--At],C.prev[At]=nt<=$?$-nt:0,--gt;);j+=nt}if(C.strm.avail_in===0)break;if(kt=C.strm,Tt=C.window,ht=C.strstart+C.lookahead,zt=j,Lt=void 0,Lt=kt.avail_in,zt<Lt&&(Lt=zt),gt=Lt===0?0:(kt.avail_in-=Lt,o.arraySet(Tt,kt.input,kt.next_in,Lt,ht),kt.state.wrap===1?kt.adler=h(kt.adler,Tt,Lt,ht):kt.state.wrap===2&&(kt.adler=f(kt.adler,Tt,Lt,ht)),kt.next_in+=Lt,kt.total_in+=Lt,Lt),C.lookahead+=gt,C.lookahead+C.insert>=U)for(Z=C.strstart-C.insert,C.ins_h=C.window[Z],C.ins_h=(C.ins_h<<C.hash_shift^C.window[Z+1])&C.hash_mask;C.insert&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[Z+U-1])&C.hash_mask,C.prev[Z&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=Z,Z++,C.insert--,!(C.lookahead+C.insert<U)););}while(C.lookahead<ut&&C.strm.avail_in!==0)}function Ft(C,At){for(var gt,$;;){if(C.lookahead<ut){if(Ut(C),C.lookahead<ut&&At===p)return N;if(C.lookahead===0)break}if(gt=0,C.lookahead>=U&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+U-1])&C.hash_mask,gt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),gt!==0&&C.strstart-gt<=C.w_size-ut&&(C.match_length=vt(C,gt)),C.match_length>=U)if($=u._tr_tally(C,C.strstart-C.match_start,C.match_length-U),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=U){for(C.match_length--;C.strstart++,C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+U-1])&C.hash_mask,gt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart,--C.match_length!=0;);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+1])&C.hash_mask;else $=u._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if($&&(P(C,!1),C.strm.avail_out===0))return N}return C.insert=C.strstart<U-1?C.strstart:U-1,At===b?(P(C,!0),C.strm.avail_out===0?X:W):C.last_lit&&(P(C,!1),C.strm.avail_out===0)?N:at}function Yt(C,At){for(var gt,$,j;;){if(C.lookahead<ut){if(Ut(C),C.lookahead<ut&&At===p)return N;if(C.lookahead===0)break}if(gt=0,C.lookahead>=U&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+U-1])&C.hash_mask,gt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=U-1,gt!==0&&C.prev_length<C.max_lazy_match&&C.strstart-gt<=C.w_size-ut&&(C.match_length=vt(C,gt),C.match_length<=5&&(C.strategy===1||C.match_length===U&&4096<C.strstart-C.match_start)&&(C.match_length=U-1)),C.prev_length>=U&&C.match_length<=C.prev_length){for(j=C.strstart+C.lookahead-U,$=u._tr_tally(C,C.strstart-1-C.prev_match,C.prev_length-U),C.lookahead-=C.prev_length-1,C.prev_length-=2;++C.strstart<=j&&(C.ins_h=(C.ins_h<<C.hash_shift^C.window[C.strstart+U-1])&C.hash_mask,gt=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),--C.prev_length!=0;);if(C.match_available=0,C.match_length=U-1,C.strstart++,$&&(P(C,!1),C.strm.avail_out===0))return N}else if(C.match_available){if(($=u._tr_tally(C,0,C.window[C.strstart-1]))&&P(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return N}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&($=u._tr_tally(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<U-1?C.strstart:U-1,At===b?(P(C,!0),C.strm.avail_out===0?X:W):C.last_lit&&(P(C,!1),C.strm.avail_out===0)?N:at}function qt(C,At,gt,$,j){this.good_length=C,this.max_lazy=At,this.nice_length=gt,this.max_chain=$,this.func=j}function ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=T,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*z),this.dyn_dtree=new o.Buf16(2*(2*D+1)),this.bl_tree=new o.Buf16(2*(2*L+1)),Rt(this.dyn_ltree),Rt(this.dyn_dtree),Rt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(q+1),this.heap=new o.Buf16(2*R+1),Rt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*R+1),Rt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ae(C){var At;return C&&C.state?(C.total_in=C.total_out=0,C.data_type=A,(At=C.state).pending=0,At.pending_out=0,At.wrap<0&&(At.wrap=-At.wrap),At.status=At.wrap?H:rt,C.adler=At.wrap===2?0:1,At.last_flush=p,u._tr_init(At),v):xt(C,w)}function ei(C){var At=Ae(C);return At===v&&(function(gt){gt.window_size=2*gt.w_size,Rt(gt.head),gt.max_lazy_match=a[gt.level].max_lazy,gt.good_match=a[gt.level].good_length,gt.nice_match=a[gt.level].nice_length,gt.max_chain_length=a[gt.level].max_chain,gt.strstart=0,gt.block_start=0,gt.lookahead=0,gt.insert=0,gt.match_length=gt.prev_length=U-1,gt.match_available=0,gt.ins_h=0})(C.state),At}function hi(C,At,gt,$,j,Z){if(!C)return w;var kt=1;if(At===x&&(At=6),$<0?(kt=0,$=-$):15<$&&(kt=2,$-=16),j<1||M<j||gt!==T||$<8||15<$||At<0||9<At||Z<0||_<Z)return xt(C,w);$===8&&($=9);var Tt=new ke;return(C.state=Tt).strm=C,Tt.wrap=kt,Tt.gzhead=null,Tt.w_bits=$,Tt.w_size=1<<Tt.w_bits,Tt.w_mask=Tt.w_size-1,Tt.hash_bits=j+7,Tt.hash_size=1<<Tt.hash_bits,Tt.hash_mask=Tt.hash_size-1,Tt.hash_shift=~~((Tt.hash_bits+U-1)/U),Tt.window=new o.Buf8(2*Tt.w_size),Tt.head=new o.Buf16(Tt.hash_size),Tt.prev=new o.Buf16(Tt.w_size),Tt.lit_bufsize=1<<j+6,Tt.pending_buf_size=4*Tt.lit_bufsize,Tt.pending_buf=new o.Buf8(Tt.pending_buf_size),Tt.d_buf=1*Tt.lit_bufsize,Tt.l_buf=3*Tt.lit_bufsize,Tt.level=At,Tt.strategy=Z,Tt.method=gt,ei(C)}a=[new qt(0,0,0,0,function(C,At){var gt=65535;for(gt>C.pending_buf_size-5&&(gt=C.pending_buf_size-5);;){if(C.lookahead<=1){if(Ut(C),C.lookahead===0&&At===p)return N;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;var $=C.block_start+gt;if((C.strstart===0||C.strstart>=$)&&(C.lookahead=C.strstart-$,C.strstart=$,P(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-ut&&(P(C,!1),C.strm.avail_out===0))return N}return C.insert=0,At===b?(P(C,!0),C.strm.avail_out===0?X:W):(C.strstart>C.block_start&&(P(C,!1),C.strm.avail_out),N)}),new qt(4,4,8,4,Ft),new qt(4,5,16,8,Ft),new qt(4,6,32,32,Ft),new qt(4,4,16,16,Yt),new qt(8,16,32,32,Yt),new qt(8,16,128,128,Yt),new qt(8,32,128,256,Yt),new qt(32,128,258,1024,Yt),new qt(32,258,258,4096,Yt)],r.deflateInit=function(C,At){return hi(C,At,T,15,8,0)},r.deflateInit2=hi,r.deflateReset=ei,r.deflateResetKeep=Ae,r.deflateSetHeader=function(C,At){return C&&C.state?C.state.wrap!==2?w:(C.state.gzhead=At,v):w},r.deflate=function(C,At){var gt,$,j,Z;if(!C||!C.state||5<At||At<0)return C?xt(C,w):w;if($=C.state,!C.output||!C.input&&C.avail_in!==0||$.status===666&&At!==b)return xt(C,C.avail_out===0?-5:w);if($.strm=C,gt=$.last_flush,$.last_flush=At,$.status===H)if($.wrap===2)C.adler=0,st($,31),st($,139),st($,8),$.gzhead?(st($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),st($,255&$.gzhead.time),st($,$.gzhead.time>>8&255),st($,$.gzhead.time>>16&255),st($,$.gzhead.time>>24&255),st($,$.level===9?2:2<=$.strategy||$.level<2?4:0),st($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(st($,255&$.gzhead.extra.length),st($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(C.adler=f(C.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(st($,0),st($,0),st($,0),st($,0),st($,0),st($,$.level===9?2:2<=$.strategy||$.level<2?4:0),st($,3),$.status=rt);else{var kt=T+($.w_bits-8<<4)<<8;kt|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(kt|=32),kt+=31-kt%31,$.status=rt,pt($,kt),$.strstart!==0&&(pt($,C.adler>>>16),pt($,65535&C.adler)),C.adler=1}if($.status===69)if($.gzhead.extra){for(j=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>j&&(C.adler=f(C.adler,$.pending_buf,$.pending-j,j)),B(C),j=$.pending,$.pending!==$.pending_buf_size));)st($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>j&&(C.adler=f(C.adler,$.pending_buf,$.pending-j,j)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){j=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>j&&(C.adler=f(C.adler,$.pending_buf,$.pending-j,j)),B(C),j=$.pending,$.pending===$.pending_buf_size)){Z=1;break}Z=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,st($,Z)}while(Z!==0);$.gzhead.hcrc&&$.pending>j&&(C.adler=f(C.adler,$.pending_buf,$.pending-j,j)),Z===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){j=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>j&&(C.adler=f(C.adler,$.pending_buf,$.pending-j,j)),B(C),j=$.pending,$.pending===$.pending_buf_size)){Z=1;break}Z=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,st($,Z)}while(Z!==0);$.gzhead.hcrc&&$.pending>j&&(C.adler=f(C.adler,$.pending_buf,$.pending-j,j)),Z===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&B(C),$.pending+2<=$.pending_buf_size&&(st($,255&C.adler),st($,C.adler>>8&255),C.adler=0,$.status=rt)):$.status=rt),$.pending!==0){if(B(C),C.avail_out===0)return $.last_flush=-1,v}else if(C.avail_in===0&&bt(At)<=bt(gt)&&At!==b)return xt(C,-5);if($.status===666&&C.avail_in!==0)return xt(C,-5);if(C.avail_in!==0||$.lookahead!==0||At!==p&&$.status!==666){var Tt=$.strategy===2?(function(ht,zt){for(var Lt;;){if(ht.lookahead===0&&(Ut(ht),ht.lookahead===0)){if(zt===p)return N;break}if(ht.match_length=0,Lt=u._tr_tally(ht,0,ht.window[ht.strstart]),ht.lookahead--,ht.strstart++,Lt&&(P(ht,!1),ht.strm.avail_out===0))return N}return ht.insert=0,zt===b?(P(ht,!0),ht.strm.avail_out===0?X:W):ht.last_lit&&(P(ht,!1),ht.strm.avail_out===0)?N:at})($,At):$.strategy===3?(function(ht,zt){for(var Lt,nt,Zt,ve,ye=ht.window;;){if(ht.lookahead<=it){if(Ut(ht),ht.lookahead<=it&&zt===p)return N;if(ht.lookahead===0)break}if(ht.match_length=0,ht.lookahead>=U&&0<ht.strstart&&(nt=ye[Zt=ht.strstart-1])===ye[++Zt]&&nt===ye[++Zt]&&nt===ye[++Zt]){ve=ht.strstart+it;do;while(nt===ye[++Zt]&&nt===ye[++Zt]&&nt===ye[++Zt]&&nt===ye[++Zt]&&nt===ye[++Zt]&&nt===ye[++Zt]&&nt===ye[++Zt]&&nt===ye[++Zt]&&Zt<ve);ht.match_length=it-(ve-Zt),ht.match_length>ht.lookahead&&(ht.match_length=ht.lookahead)}if(ht.match_length>=U?(Lt=u._tr_tally(ht,1,ht.match_length-U),ht.lookahead-=ht.match_length,ht.strstart+=ht.match_length,ht.match_length=0):(Lt=u._tr_tally(ht,0,ht.window[ht.strstart]),ht.lookahead--,ht.strstart++),Lt&&(P(ht,!1),ht.strm.avail_out===0))return N}return ht.insert=0,zt===b?(P(ht,!0),ht.strm.avail_out===0?X:W):ht.last_lit&&(P(ht,!1),ht.strm.avail_out===0)?N:at})($,At):a[$.level].func($,At);if(Tt!==X&&Tt!==W||($.status=666),Tt===N||Tt===X)return C.avail_out===0&&($.last_flush=-1),v;if(Tt===at&&(At===1?u._tr_align($):At!==5&&(u._tr_stored_block($,0,0,!1),At===3&&(Rt($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),B(C),C.avail_out===0))return $.last_flush=-1,v}return At!==b?v:$.wrap<=0?1:($.wrap===2?(st($,255&C.adler),st($,C.adler>>8&255),st($,C.adler>>16&255),st($,C.adler>>24&255),st($,255&C.total_in),st($,C.total_in>>8&255),st($,C.total_in>>16&255),st($,C.total_in>>24&255)):(pt($,C.adler>>>16),pt($,65535&C.adler)),B(C),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?v:1)},r.deflateEnd=function(C){var At;return C&&C.state?(At=C.state.status)!==H&&At!==69&&At!==73&&At!==91&&At!==103&&At!==rt&&At!==666?xt(C,w):(C.state=null,At===rt?xt(C,-3):v):w},r.deflateSetDictionary=function(C,At){var gt,$,j,Z,kt,Tt,ht,zt,Lt=At.length;if(!C||!C.state||(Z=(gt=C.state).wrap)===2||Z===1&&gt.status!==H||gt.lookahead)return w;for(Z===1&&(C.adler=h(C.adler,At,Lt,0)),gt.wrap=0,Lt>=gt.w_size&&(Z===0&&(Rt(gt.head),gt.strstart=0,gt.block_start=0,gt.insert=0),zt=new o.Buf8(gt.w_size),o.arraySet(zt,At,Lt-gt.w_size,gt.w_size,0),At=zt,Lt=gt.w_size),kt=C.avail_in,Tt=C.next_in,ht=C.input,C.avail_in=Lt,C.next_in=0,C.input=At,Ut(gt);gt.lookahead>=U;){for($=gt.strstart,j=gt.lookahead-(U-1);gt.ins_h=(gt.ins_h<<gt.hash_shift^gt.window[$+U-1])&gt.hash_mask,gt.prev[$&gt.w_mask]=gt.head[gt.ins_h],gt.head[gt.ins_h]=$,$++,--j;);gt.strstart=$,gt.lookahead=U-1,Ut(gt)}return gt.strstart+=gt.lookahead,gt.block_start=gt.strstart,gt.insert=gt.lookahead,gt.lookahead=0,gt.match_length=gt.prev_length=U-1,gt.match_available=0,C.next_in=Tt,C.input=ht,C.avail_in=kt,gt.wrap=Z,v},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,i,r){i.exports=function(a,o){var u,h,f,m,p,b,v,w,x,_,A,T,M,R,D,L,z,q,U,it,ut,H,rt,N,at;u=a.state,h=a.next_in,N=a.input,f=h+(a.avail_in-5),m=a.next_out,at=a.output,p=m-(o-a.avail_out),b=m+(a.avail_out-257),v=u.dmax,w=u.wsize,x=u.whave,_=u.wnext,A=u.window,T=u.hold,M=u.bits,R=u.lencode,D=u.distcode,L=(1<<u.lenbits)-1,z=(1<<u.distbits)-1;t:do{M<15&&(T+=N[h++]<<M,M+=8,T+=N[h++]<<M,M+=8),q=R[T&L];e:for(;;){if(T>>>=U=q>>>24,M-=U,(U=q>>>16&255)===0)at[m++]=65535&q;else{if(!(16&U)){if((64&U)==0){q=R[(65535&q)+(T&(1<<U)-1)];continue e}if(32&U){u.mode=12;break t}a.msg="invalid literal/length code",u.mode=30;break t}it=65535&q,(U&=15)&&(M<U&&(T+=N[h++]<<M,M+=8),it+=T&(1<<U)-1,T>>>=U,M-=U),M<15&&(T+=N[h++]<<M,M+=8,T+=N[h++]<<M,M+=8),q=D[T&z];i:for(;;){if(T>>>=U=q>>>24,M-=U,!(16&(U=q>>>16&255))){if((64&U)==0){q=D[(65535&q)+(T&(1<<U)-1)];continue i}a.msg="invalid distance code",u.mode=30;break t}if(ut=65535&q,M<(U&=15)&&(T+=N[h++]<<M,(M+=8)<U&&(T+=N[h++]<<M,M+=8)),v<(ut+=T&(1<<U)-1)){a.msg="invalid distance too far back",u.mode=30;break t}if(T>>>=U,M-=U,(U=m-p)<ut){if(x<(U=ut-U)&&u.sane){a.msg="invalid distance too far back",u.mode=30;break t}if(rt=A,(H=0)===_){if(H+=w-U,U<it){for(it-=U;at[m++]=A[H++],--U;);H=m-ut,rt=at}}else if(_<U){if(H+=w+_-U,(U-=_)<it){for(it-=U;at[m++]=A[H++],--U;);if(H=0,_<it){for(it-=U=_;at[m++]=A[H++],--U;);H=m-ut,rt=at}}}else if(H+=_-U,U<it){for(it-=U;at[m++]=A[H++],--U;);H=m-ut,rt=at}for(;2<it;)at[m++]=rt[H++],at[m++]=rt[H++],at[m++]=rt[H++],it-=3;it&&(at[m++]=rt[H++],1<it&&(at[m++]=rt[H++]))}else{for(H=m-ut;at[m++]=at[H++],at[m++]=at[H++],at[m++]=at[H++],2<(it-=3););it&&(at[m++]=at[H++],1<it&&(at[m++]=at[H++]))}break}}break}}while(h<f&&m<b);h-=it=M>>3,T&=(1<<(M-=it<<3))-1,a.next_in=h,a.next_out=m,a.avail_in=h<f?f-h+5:5-(h-f),a.avail_out=m<b?b-m+257:257-(m-b),u.hold=T,u.bits=M}},{}],49:[function(e,i,r){var a=e("../utils/common"),o=e("./adler32"),u=e("./crc32"),h=e("./inffast"),f=e("./inftrees"),m=1,p=2,b=0,v=-2,w=1,x=852,_=592;function A(H){return(H>>>24&255)+(H>>>8&65280)+((65280&H)<<8)+((255&H)<<24)}function T(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(H){var rt;return H&&H.state?(rt=H.state,H.total_in=H.total_out=rt.total=0,H.msg="",rt.wrap&&(H.adler=1&rt.wrap),rt.mode=w,rt.last=0,rt.havedict=0,rt.dmax=32768,rt.head=null,rt.hold=0,rt.bits=0,rt.lencode=rt.lendyn=new a.Buf32(x),rt.distcode=rt.distdyn=new a.Buf32(_),rt.sane=1,rt.back=-1,b):v}function R(H){var rt;return H&&H.state?((rt=H.state).wsize=0,rt.whave=0,rt.wnext=0,M(H)):v}function D(H,rt){var N,at;return H&&H.state?(at=H.state,rt<0?(N=0,rt=-rt):(N=1+(rt>>4),rt<48&&(rt&=15)),rt&&(rt<8||15<rt)?v:(at.window!==null&&at.wbits!==rt&&(at.window=null),at.wrap=N,at.wbits=rt,R(H))):v}function L(H,rt){var N,at;return H?(at=new T,(H.state=at).window=null,(N=D(H,rt))!==b&&(H.state=null),N):v}var z,q,U=!0;function it(H){if(U){var rt;for(z=new a.Buf32(512),q=new a.Buf32(32),rt=0;rt<144;)H.lens[rt++]=8;for(;rt<256;)H.lens[rt++]=9;for(;rt<280;)H.lens[rt++]=7;for(;rt<288;)H.lens[rt++]=8;for(f(m,H.lens,0,288,z,0,H.work,{bits:9}),rt=0;rt<32;)H.lens[rt++]=5;f(p,H.lens,0,32,q,0,H.work,{bits:5}),U=!1}H.lencode=z,H.lenbits=9,H.distcode=q,H.distbits=5}function ut(H,rt,N,at){var X,W=H.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new a.Buf8(W.wsize)),at>=W.wsize?(a.arraySet(W.window,rt,N-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(at<(X=W.wsize-W.wnext)&&(X=at),a.arraySet(W.window,rt,N-at,X,W.wnext),(at-=X)?(a.arraySet(W.window,rt,N-at,at,0),W.wnext=at,W.whave=W.wsize):(W.wnext+=X,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=X))),0}r.inflateReset=R,r.inflateReset2=D,r.inflateResetKeep=M,r.inflateInit=function(H){return L(H,15)},r.inflateInit2=L,r.inflate=function(H,rt){var N,at,X,W,xt,bt,Rt,B,P,st,pt,vt,Ut,Ft,Yt,qt,ke,Ae,ei,hi,C,At,gt,$,j=0,Z=new a.Buf8(4),kt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!H||!H.state||!H.output||!H.input&&H.avail_in!==0)return v;(N=H.state).mode===12&&(N.mode=13),xt=H.next_out,X=H.output,Rt=H.avail_out,W=H.next_in,at=H.input,bt=H.avail_in,B=N.hold,P=N.bits,st=bt,pt=Rt,At=b;t:for(;;)switch(N.mode){case w:if(N.wrap===0){N.mode=13;break}for(;P<16;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if(2&N.wrap&&B===35615){Z[N.check=0]=255&B,Z[1]=B>>>8&255,N.check=u(N.check,Z,2,0),P=B=0,N.mode=2;break}if(N.flags=0,N.head&&(N.head.done=!1),!(1&N.wrap)||(((255&B)<<8)+(B>>8))%31){H.msg="incorrect header check",N.mode=30;break}if((15&B)!=8){H.msg="unknown compression method",N.mode=30;break}if(P-=4,C=8+(15&(B>>>=4)),N.wbits===0)N.wbits=C;else if(C>N.wbits){H.msg="invalid window size",N.mode=30;break}N.dmax=1<<C,H.adler=N.check=1,N.mode=512&B?10:12,P=B=0;break;case 2:for(;P<16;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if(N.flags=B,(255&N.flags)!=8){H.msg="unknown compression method",N.mode=30;break}if(57344&N.flags){H.msg="unknown header flags set",N.mode=30;break}N.head&&(N.head.text=B>>8&1),512&N.flags&&(Z[0]=255&B,Z[1]=B>>>8&255,N.check=u(N.check,Z,2,0)),P=B=0,N.mode=3;case 3:for(;P<32;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}N.head&&(N.head.time=B),512&N.flags&&(Z[0]=255&B,Z[1]=B>>>8&255,Z[2]=B>>>16&255,Z[3]=B>>>24&255,N.check=u(N.check,Z,4,0)),P=B=0,N.mode=4;case 4:for(;P<16;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}N.head&&(N.head.xflags=255&B,N.head.os=B>>8),512&N.flags&&(Z[0]=255&B,Z[1]=B>>>8&255,N.check=u(N.check,Z,2,0)),P=B=0,N.mode=5;case 5:if(1024&N.flags){for(;P<16;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}N.length=B,N.head&&(N.head.extra_len=B),512&N.flags&&(Z[0]=255&B,Z[1]=B>>>8&255,N.check=u(N.check,Z,2,0)),P=B=0}else N.head&&(N.head.extra=null);N.mode=6;case 6:if(1024&N.flags&&(bt<(vt=N.length)&&(vt=bt),vt&&(N.head&&(C=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Array(N.head.extra_len)),a.arraySet(N.head.extra,at,W,vt,C)),512&N.flags&&(N.check=u(N.check,at,vt,W)),bt-=vt,W+=vt,N.length-=vt),N.length))break t;N.length=0,N.mode=7;case 7:if(2048&N.flags){if(bt===0)break t;for(vt=0;C=at[W+vt++],N.head&&C&&N.length<65536&&(N.head.name+=String.fromCharCode(C)),C&&vt<bt;);if(512&N.flags&&(N.check=u(N.check,at,vt,W)),bt-=vt,W+=vt,C)break t}else N.head&&(N.head.name=null);N.length=0,N.mode=8;case 8:if(4096&N.flags){if(bt===0)break t;for(vt=0;C=at[W+vt++],N.head&&C&&N.length<65536&&(N.head.comment+=String.fromCharCode(C)),C&&vt<bt;);if(512&N.flags&&(N.check=u(N.check,at,vt,W)),bt-=vt,W+=vt,C)break t}else N.head&&(N.head.comment=null);N.mode=9;case 9:if(512&N.flags){for(;P<16;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if(B!==(65535&N.check)){H.msg="header crc mismatch",N.mode=30;break}P=B=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),H.adler=N.check=0,N.mode=12;break;case 10:for(;P<32;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}H.adler=N.check=A(B),P=B=0,N.mode=11;case 11:if(N.havedict===0)return H.next_out=xt,H.avail_out=Rt,H.next_in=W,H.avail_in=bt,N.hold=B,N.bits=P,2;H.adler=N.check=1,N.mode=12;case 12:if(rt===5||rt===6)break t;case 13:if(N.last){B>>>=7&P,P-=7&P,N.mode=27;break}for(;P<3;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}switch(N.last=1&B,P-=1,3&(B>>>=1)){case 0:N.mode=14;break;case 1:if(it(N),N.mode=20,rt!==6)break;B>>>=2,P-=2;break t;case 2:N.mode=17;break;case 3:H.msg="invalid block type",N.mode=30}B>>>=2,P-=2;break;case 14:for(B>>>=7&P,P-=7&P;P<32;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if((65535&B)!=(B>>>16^65535)){H.msg="invalid stored block lengths",N.mode=30;break}if(N.length=65535&B,P=B=0,N.mode=15,rt===6)break t;case 15:N.mode=16;case 16:if(vt=N.length){if(bt<vt&&(vt=bt),Rt<vt&&(vt=Rt),vt===0)break t;a.arraySet(X,at,W,vt,xt),bt-=vt,W+=vt,Rt-=vt,xt+=vt,N.length-=vt;break}N.mode=12;break;case 17:for(;P<14;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if(N.nlen=257+(31&B),B>>>=5,P-=5,N.ndist=1+(31&B),B>>>=5,P-=5,N.ncode=4+(15&B),B>>>=4,P-=4,286<N.nlen||30<N.ndist){H.msg="too many length or distance symbols",N.mode=30;break}N.have=0,N.mode=18;case 18:for(;N.have<N.ncode;){for(;P<3;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}N.lens[kt[N.have++]]=7&B,B>>>=3,P-=3}for(;N.have<19;)N.lens[kt[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,gt={bits:N.lenbits},At=f(0,N.lens,0,19,N.lencode,0,N.work,gt),N.lenbits=gt.bits,At){H.msg="invalid code lengths set",N.mode=30;break}N.have=0,N.mode=19;case 19:for(;N.have<N.nlen+N.ndist;){for(;qt=(j=N.lencode[B&(1<<N.lenbits)-1])>>>16&255,ke=65535&j,!((Yt=j>>>24)<=P);){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if(ke<16)B>>>=Yt,P-=Yt,N.lens[N.have++]=ke;else{if(ke===16){for($=Yt+2;P<$;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if(B>>>=Yt,P-=Yt,N.have===0){H.msg="invalid bit length repeat",N.mode=30;break}C=N.lens[N.have-1],vt=3+(3&B),B>>>=2,P-=2}else if(ke===17){for($=Yt+3;P<$;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}P-=Yt,C=0,vt=3+(7&(B>>>=Yt)),B>>>=3,P-=3}else{for($=Yt+7;P<$;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}P-=Yt,C=0,vt=11+(127&(B>>>=Yt)),B>>>=7,P-=7}if(N.have+vt>N.nlen+N.ndist){H.msg="invalid bit length repeat",N.mode=30;break}for(;vt--;)N.lens[N.have++]=C}}if(N.mode===30)break;if(N.lens[256]===0){H.msg="invalid code -- missing end-of-block",N.mode=30;break}if(N.lenbits=9,gt={bits:N.lenbits},At=f(m,N.lens,0,N.nlen,N.lencode,0,N.work,gt),N.lenbits=gt.bits,At){H.msg="invalid literal/lengths set",N.mode=30;break}if(N.distbits=6,N.distcode=N.distdyn,gt={bits:N.distbits},At=f(p,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,gt),N.distbits=gt.bits,At){H.msg="invalid distances set",N.mode=30;break}if(N.mode=20,rt===6)break t;case 20:N.mode=21;case 21:if(6<=bt&&258<=Rt){H.next_out=xt,H.avail_out=Rt,H.next_in=W,H.avail_in=bt,N.hold=B,N.bits=P,h(H,pt),xt=H.next_out,X=H.output,Rt=H.avail_out,W=H.next_in,at=H.input,bt=H.avail_in,B=N.hold,P=N.bits,N.mode===12&&(N.back=-1);break}for(N.back=0;qt=(j=N.lencode[B&(1<<N.lenbits)-1])>>>16&255,ke=65535&j,!((Yt=j>>>24)<=P);){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if(qt&&(240&qt)==0){for(Ae=Yt,ei=qt,hi=ke;qt=(j=N.lencode[hi+((B&(1<<Ae+ei)-1)>>Ae)])>>>16&255,ke=65535&j,!(Ae+(Yt=j>>>24)<=P);){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}B>>>=Ae,P-=Ae,N.back+=Ae}if(B>>>=Yt,P-=Yt,N.back+=Yt,N.length=ke,qt===0){N.mode=26;break}if(32&qt){N.back=-1,N.mode=12;break}if(64&qt){H.msg="invalid literal/length code",N.mode=30;break}N.extra=15&qt,N.mode=22;case 22:if(N.extra){for($=N.extra;P<$;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}N.length+=B&(1<<N.extra)-1,B>>>=N.extra,P-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=23;case 23:for(;qt=(j=N.distcode[B&(1<<N.distbits)-1])>>>16&255,ke=65535&j,!((Yt=j>>>24)<=P);){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if((240&qt)==0){for(Ae=Yt,ei=qt,hi=ke;qt=(j=N.distcode[hi+((B&(1<<Ae+ei)-1)>>Ae)])>>>16&255,ke=65535&j,!(Ae+(Yt=j>>>24)<=P);){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}B>>>=Ae,P-=Ae,N.back+=Ae}if(B>>>=Yt,P-=Yt,N.back+=Yt,64&qt){H.msg="invalid distance code",N.mode=30;break}N.offset=ke,N.extra=15&qt,N.mode=24;case 24:if(N.extra){for($=N.extra;P<$;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}N.offset+=B&(1<<N.extra)-1,B>>>=N.extra,P-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){H.msg="invalid distance too far back",N.mode=30;break}N.mode=25;case 25:if(Rt===0)break t;if(vt=pt-Rt,N.offset>vt){if((vt=N.offset-vt)>N.whave&&N.sane){H.msg="invalid distance too far back",N.mode=30;break}Ut=vt>N.wnext?(vt-=N.wnext,N.wsize-vt):N.wnext-vt,vt>N.length&&(vt=N.length),Ft=N.window}else Ft=X,Ut=xt-N.offset,vt=N.length;for(Rt<vt&&(vt=Rt),Rt-=vt,N.length-=vt;X[xt++]=Ft[Ut++],--vt;);N.length===0&&(N.mode=21);break;case 26:if(Rt===0)break t;X[xt++]=N.length,Rt--,N.mode=21;break;case 27:if(N.wrap){for(;P<32;){if(bt===0)break t;bt--,B|=at[W++]<<P,P+=8}if(pt-=Rt,H.total_out+=pt,N.total+=pt,pt&&(H.adler=N.check=N.flags?u(N.check,X,pt,xt-pt):o(N.check,X,pt,xt-pt)),pt=Rt,(N.flags?B:A(B))!==N.check){H.msg="incorrect data check",N.mode=30;break}P=B=0}N.mode=28;case 28:if(N.wrap&&N.flags){for(;P<32;){if(bt===0)break t;bt--,B+=at[W++]<<P,P+=8}if(B!==(4294967295&N.total)){H.msg="incorrect length check",N.mode=30;break}P=B=0}N.mode=29;case 29:At=1;break t;case 30:At=-3;break t;case 31:return-4;case 32:default:return v}return H.next_out=xt,H.avail_out=Rt,H.next_in=W,H.avail_in=bt,N.hold=B,N.bits=P,(N.wsize||pt!==H.avail_out&&N.mode<30&&(N.mode<27||rt!==4))&&ut(H,H.output,H.next_out,pt-H.avail_out)?(N.mode=31,-4):(st-=H.avail_in,pt-=H.avail_out,H.total_in+=st,H.total_out+=pt,N.total+=pt,N.wrap&&pt&&(H.adler=N.check=N.flags?u(N.check,X,pt,H.next_out-pt):o(N.check,X,pt,H.next_out-pt)),H.data_type=N.bits+(N.last?64:0)+(N.mode===12?128:0)+(N.mode===20||N.mode===15?256:0),(st==0&&pt===0||rt===4)&&At===b&&(At=-5),At)},r.inflateEnd=function(H){if(!H||!H.state)return v;var rt=H.state;return rt.window&&(rt.window=null),H.state=null,b},r.inflateGetHeader=function(H,rt){var N;return H&&H.state?(2&(N=H.state).wrap)==0?v:((N.head=rt).done=!1,b):v},r.inflateSetDictionary=function(H,rt){var N,at=rt.length;return H&&H.state?(N=H.state).wrap!==0&&N.mode!==11?v:N.mode===11&&o(1,rt,at,0)!==N.check?-3:ut(H,rt,at,at)?(N.mode=31,-4):(N.havedict=1,b):v},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,i,r){var a=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(m,p,b,v,w,x,_,A){var T,M,R,D,L,z,q,U,it,ut=A.bits,H=0,rt=0,N=0,at=0,X=0,W=0,xt=0,bt=0,Rt=0,B=0,P=null,st=0,pt=new a.Buf16(16),vt=new a.Buf16(16),Ut=null,Ft=0;for(H=0;H<=15;H++)pt[H]=0;for(rt=0;rt<v;rt++)pt[p[b+rt]]++;for(X=ut,at=15;1<=at&&pt[at]===0;at--);if(at<X&&(X=at),at===0)return w[x++]=20971520,w[x++]=20971520,A.bits=1,0;for(N=1;N<at&&pt[N]===0;N++);for(X<N&&(X=N),H=bt=1;H<=15;H++)if(bt<<=1,(bt-=pt[H])<0)return-1;if(0<bt&&(m===0||at!==1))return-1;for(vt[1]=0,H=1;H<15;H++)vt[H+1]=vt[H]+pt[H];for(rt=0;rt<v;rt++)p[b+rt]!==0&&(_[vt[p[b+rt]]++]=rt);if(z=m===0?(P=Ut=_,19):m===1?(P=o,st-=257,Ut=u,Ft-=257,256):(P=h,Ut=f,-1),H=N,L=x,xt=rt=B=0,R=-1,D=(Rt=1<<(W=X))-1,m===1&&852<Rt||m===2&&592<Rt)return 1;for(;;){for(q=H-xt,it=_[rt]<z?(U=0,_[rt]):_[rt]>z?(U=Ut[Ft+_[rt]],P[st+_[rt]]):(U=96,0),T=1<<H-xt,N=M=1<<W;w[L+(B>>xt)+(M-=T)]=q<<24|U<<16|it|0,M!==0;);for(T=1<<H-1;B&T;)T>>=1;if(T!==0?(B&=T-1,B+=T):B=0,rt++,--pt[H]==0){if(H===at)break;H=p[b+_[rt]]}if(X<H&&(B&D)!==R){for(xt===0&&(xt=X),L+=N,bt=1<<(W=H-xt);W+xt<at&&!((bt-=pt[W+xt])<=0);)W++,bt<<=1;if(Rt+=1<<W,m===1&&852<Rt||m===2&&592<Rt)return 1;w[R=B&D]=X<<24|W<<16|L-x|0}}return B!==0&&(w[L+B]=H-xt<<24|64<<16|0),A.bits=X,0}},{"../utils/common":41}],51:[function(e,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,i,r){var a=e("../utils/common"),o=0,u=1;function h(j){for(var Z=j.length;0<=--Z;)j[Z]=0}var f=0,m=29,p=256,b=p+1+m,v=30,w=19,x=2*b+1,_=15,A=16,T=7,M=256,R=16,D=17,L=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],it=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ut=new Array(2*(b+2));h(ut);var H=new Array(2*v);h(H);var rt=new Array(512);h(rt);var N=new Array(256);h(N);var at=new Array(m);h(at);var X,W,xt,bt=new Array(v);function Rt(j,Z,kt,Tt,ht){this.static_tree=j,this.extra_bits=Z,this.extra_base=kt,this.elems=Tt,this.max_length=ht,this.has_stree=j&&j.length}function B(j,Z){this.dyn_tree=j,this.max_code=0,this.stat_desc=Z}function P(j){return j<256?rt[j]:rt[256+(j>>>7)]}function st(j,Z){j.pending_buf[j.pending++]=255&Z,j.pending_buf[j.pending++]=Z>>>8&255}function pt(j,Z,kt){j.bi_valid>A-kt?(j.bi_buf|=Z<<j.bi_valid&65535,st(j,j.bi_buf),j.bi_buf=Z>>A-j.bi_valid,j.bi_valid+=kt-A):(j.bi_buf|=Z<<j.bi_valid&65535,j.bi_valid+=kt)}function vt(j,Z,kt){pt(j,kt[2*Z],kt[2*Z+1])}function Ut(j,Z){for(var kt=0;kt|=1&j,j>>>=1,kt<<=1,0<--Z;);return kt>>>1}function Ft(j,Z,kt){var Tt,ht,zt=new Array(_+1),Lt=0;for(Tt=1;Tt<=_;Tt++)zt[Tt]=Lt=Lt+kt[Tt-1]<<1;for(ht=0;ht<=Z;ht++){var nt=j[2*ht+1];nt!==0&&(j[2*ht]=Ut(zt[nt]++,nt))}}function Yt(j){var Z;for(Z=0;Z<b;Z++)j.dyn_ltree[2*Z]=0;for(Z=0;Z<v;Z++)j.dyn_dtree[2*Z]=0;for(Z=0;Z<w;Z++)j.bl_tree[2*Z]=0;j.dyn_ltree[2*M]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function qt(j){8<j.bi_valid?st(j,j.bi_buf):0<j.bi_valid&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function ke(j,Z,kt,Tt){var ht=2*Z,zt=2*kt;return j[ht]<j[zt]||j[ht]===j[zt]&&Tt[Z]<=Tt[kt]}function Ae(j,Z,kt){for(var Tt=j.heap[kt],ht=kt<<1;ht<=j.heap_len&&(ht<j.heap_len&&ke(Z,j.heap[ht+1],j.heap[ht],j.depth)&&ht++,!ke(Z,Tt,j.heap[ht],j.depth));)j.heap[kt]=j.heap[ht],kt=ht,ht<<=1;j.heap[kt]=Tt}function ei(j,Z,kt){var Tt,ht,zt,Lt,nt=0;if(j.last_lit!==0)for(;Tt=j.pending_buf[j.d_buf+2*nt]<<8|j.pending_buf[j.d_buf+2*nt+1],ht=j.pending_buf[j.l_buf+nt],nt++,Tt===0?vt(j,ht,Z):(vt(j,(zt=N[ht])+p+1,Z),(Lt=z[zt])!==0&&pt(j,ht-=at[zt],Lt),vt(j,zt=P(--Tt),kt),(Lt=q[zt])!==0&&pt(j,Tt-=bt[zt],Lt)),nt<j.last_lit;);vt(j,M,Z)}function hi(j,Z){var kt,Tt,ht,zt=Z.dyn_tree,Lt=Z.stat_desc.static_tree,nt=Z.stat_desc.has_stree,Zt=Z.stat_desc.elems,ve=-1;for(j.heap_len=0,j.heap_max=x,kt=0;kt<Zt;kt++)zt[2*kt]!==0?(j.heap[++j.heap_len]=ve=kt,j.depth[kt]=0):zt[2*kt+1]=0;for(;j.heap_len<2;)zt[2*(ht=j.heap[++j.heap_len]=ve<2?++ve:0)]=1,j.depth[ht]=0,j.opt_len--,nt&&(j.static_len-=Lt[2*ht+1]);for(Z.max_code=ve,kt=j.heap_len>>1;1<=kt;kt--)Ae(j,zt,kt);for(ht=Zt;kt=j.heap[1],j.heap[1]=j.heap[j.heap_len--],Ae(j,zt,1),Tt=j.heap[1],j.heap[--j.heap_max]=kt,j.heap[--j.heap_max]=Tt,zt[2*ht]=zt[2*kt]+zt[2*Tt],j.depth[ht]=(j.depth[kt]>=j.depth[Tt]?j.depth[kt]:j.depth[Tt])+1,zt[2*kt+1]=zt[2*Tt+1]=ht,j.heap[1]=ht++,Ae(j,zt,1),2<=j.heap_len;);j.heap[--j.heap_max]=j.heap[1],(function(ye,Gi){var rr,qi,Er,je,wi,an,Ze=Gi.dyn_tree,_a=Gi.max_code,Ao=Gi.stat_desc.static_tree,_o=Gi.stat_desc.has_stree,ns=Gi.stat_desc.extra_bits,kr=Gi.stat_desc.extra_base,zn=Gi.stat_desc.max_length,on=0;for(je=0;je<=_;je++)ye.bl_count[je]=0;for(Ze[2*ye.heap[ye.heap_max]+1]=0,rr=ye.heap_max+1;rr<x;rr++)zn<(je=Ze[2*Ze[2*(qi=ye.heap[rr])+1]+1]+1)&&(je=zn,on++),Ze[2*qi+1]=je,_a<qi||(ye.bl_count[je]++,wi=0,kr<=qi&&(wi=ns[qi-kr]),an=Ze[2*qi],ye.opt_len+=an*(je+wi),_o&&(ye.static_len+=an*(Ao[2*qi+1]+wi)));if(on!==0){do{for(je=zn-1;ye.bl_count[je]===0;)je--;ye.bl_count[je]--,ye.bl_count[je+1]+=2,ye.bl_count[zn]--,on-=2}while(0<on);for(je=zn;je!==0;je--)for(qi=ye.bl_count[je];qi!==0;)_a<(Er=ye.heap[--rr])||(Ze[2*Er+1]!==je&&(ye.opt_len+=(je-Ze[2*Er+1])*Ze[2*Er],Ze[2*Er+1]=je),qi--)}})(j,Z),Ft(zt,ve,j.bl_count)}function C(j,Z,kt){var Tt,ht,zt=-1,Lt=Z[1],nt=0,Zt=7,ve=4;for(Lt===0&&(Zt=138,ve=3),Z[2*(kt+1)+1]=65535,Tt=0;Tt<=kt;Tt++)ht=Lt,Lt=Z[2*(Tt+1)+1],++nt<Zt&&ht===Lt||(nt<ve?j.bl_tree[2*ht]+=nt:ht!==0?(ht!==zt&&j.bl_tree[2*ht]++,j.bl_tree[2*R]++):nt<=10?j.bl_tree[2*D]++:j.bl_tree[2*L]++,zt=ht,ve=(nt=0)===Lt?(Zt=138,3):ht===Lt?(Zt=6,3):(Zt=7,4))}function At(j,Z,kt){var Tt,ht,zt=-1,Lt=Z[1],nt=0,Zt=7,ve=4;for(Lt===0&&(Zt=138,ve=3),Tt=0;Tt<=kt;Tt++)if(ht=Lt,Lt=Z[2*(Tt+1)+1],!(++nt<Zt&&ht===Lt)){if(nt<ve)for(;vt(j,ht,j.bl_tree),--nt!=0;);else ht!==0?(ht!==zt&&(vt(j,ht,j.bl_tree),nt--),vt(j,R,j.bl_tree),pt(j,nt-3,2)):nt<=10?(vt(j,D,j.bl_tree),pt(j,nt-3,3)):(vt(j,L,j.bl_tree),pt(j,nt-11,7));zt=ht,ve=(nt=0)===Lt?(Zt=138,3):ht===Lt?(Zt=6,3):(Zt=7,4)}}h(bt);var gt=!1;function $(j,Z,kt,Tt){pt(j,(f<<1)+(Tt?1:0),3),(function(ht,zt,Lt,nt){qt(ht),st(ht,Lt),st(ht,~Lt),a.arraySet(ht.pending_buf,ht.window,zt,Lt,ht.pending),ht.pending+=Lt})(j,Z,kt)}r._tr_init=function(j){gt||((function(){var Z,kt,Tt,ht,zt,Lt=new Array(_+1);for(ht=Tt=0;ht<m-1;ht++)for(at[ht]=Tt,Z=0;Z<1<<z[ht];Z++)N[Tt++]=ht;for(N[Tt-1]=ht,ht=zt=0;ht<16;ht++)for(bt[ht]=zt,Z=0;Z<1<<q[ht];Z++)rt[zt++]=ht;for(zt>>=7;ht<v;ht++)for(bt[ht]=zt<<7,Z=0;Z<1<<q[ht]-7;Z++)rt[256+zt++]=ht;for(kt=0;kt<=_;kt++)Lt[kt]=0;for(Z=0;Z<=143;)ut[2*Z+1]=8,Z++,Lt[8]++;for(;Z<=255;)ut[2*Z+1]=9,Z++,Lt[9]++;for(;Z<=279;)ut[2*Z+1]=7,Z++,Lt[7]++;for(;Z<=287;)ut[2*Z+1]=8,Z++,Lt[8]++;for(Ft(ut,b+1,Lt),Z=0;Z<v;Z++)H[2*Z+1]=5,H[2*Z]=Ut(Z,5);X=new Rt(ut,z,p+1,b,_),W=new Rt(H,q,0,v,_),xt=new Rt(new Array(0),U,0,w,T)})(),gt=!0),j.l_desc=new B(j.dyn_ltree,X),j.d_desc=new B(j.dyn_dtree,W),j.bl_desc=new B(j.bl_tree,xt),j.bi_buf=0,j.bi_valid=0,Yt(j)},r._tr_stored_block=$,r._tr_flush_block=function(j,Z,kt,Tt){var ht,zt,Lt=0;0<j.level?(j.strm.data_type===2&&(j.strm.data_type=(function(nt){var Zt,ve=4093624447;for(Zt=0;Zt<=31;Zt++,ve>>>=1)if(1&ve&&nt.dyn_ltree[2*Zt]!==0)return o;if(nt.dyn_ltree[18]!==0||nt.dyn_ltree[20]!==0||nt.dyn_ltree[26]!==0)return u;for(Zt=32;Zt<p;Zt++)if(nt.dyn_ltree[2*Zt]!==0)return u;return o})(j)),hi(j,j.l_desc),hi(j,j.d_desc),Lt=(function(nt){var Zt;for(C(nt,nt.dyn_ltree,nt.l_desc.max_code),C(nt,nt.dyn_dtree,nt.d_desc.max_code),hi(nt,nt.bl_desc),Zt=w-1;3<=Zt&&nt.bl_tree[2*it[Zt]+1]===0;Zt--);return nt.opt_len+=3*(Zt+1)+5+5+4,Zt})(j),ht=j.opt_len+3+7>>>3,(zt=j.static_len+3+7>>>3)<=ht&&(ht=zt)):ht=zt=kt+5,kt+4<=ht&&Z!==-1?$(j,Z,kt,Tt):j.strategy===4||zt===ht?(pt(j,2+(Tt?1:0),3),ei(j,ut,H)):(pt(j,4+(Tt?1:0),3),(function(nt,Zt,ve,ye){var Gi;for(pt(nt,Zt-257,5),pt(nt,ve-1,5),pt(nt,ye-4,4),Gi=0;Gi<ye;Gi++)pt(nt,nt.bl_tree[2*it[Gi]+1],3);At(nt,nt.dyn_ltree,Zt-1),At(nt,nt.dyn_dtree,ve-1)})(j,j.l_desc.max_code+1,j.d_desc.max_code+1,Lt+1),ei(j,j.dyn_ltree,j.dyn_dtree)),Yt(j),Tt&&qt(j)},r._tr_tally=function(j,Z,kt){return j.pending_buf[j.d_buf+2*j.last_lit]=Z>>>8&255,j.pending_buf[j.d_buf+2*j.last_lit+1]=255&Z,j.pending_buf[j.l_buf+j.last_lit]=255&kt,j.last_lit++,Z===0?j.dyn_ltree[2*kt]++:(j.matches++,Z--,j.dyn_ltree[2*(N[kt]+p+1)]++,j.dyn_dtree[2*P(Z)]++),j.last_lit===j.lit_bufsize-1},r._tr_align=function(j){pt(j,2,3),vt(j,M,ut),(function(Z){Z.bi_valid===16?(st(Z,Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0):8<=Z.bi_valid&&(Z.pending_buf[Z.pending++]=255&Z.bi_buf,Z.bi_buf>>=8,Z.bi_valid-=8)})(j)}},{"../utils/common":41}],53:[function(e,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,i,r){(function(a){(function(o,u){if(!o.setImmediate){var h,f,m,p,b=1,v={},w=!1,x=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,h={}.toString.call(o.process)==="[object process]"?function(R){process.nextTick(function(){T(R)})}:(function(){if(o.postMessage&&!o.importScripts){var R=!0,D=o.onmessage;return o.onmessage=function(){R=!1},o.postMessage("","*"),o.onmessage=D,R}})()?(p="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",M,!1):o.attachEvent("onmessage",M),function(R){o.postMessage(p+R,"*")}):o.MessageChannel?((m=new MessageChannel).port1.onmessage=function(R){T(R.data)},function(R){m.port2.postMessage(R)}):x&&"onreadystatechange"in x.createElement("script")?(f=x.documentElement,function(R){var D=x.createElement("script");D.onreadystatechange=function(){T(R),D.onreadystatechange=null,f.removeChild(D),D=null},f.appendChild(D)}):function(R){setTimeout(T,0,R)},_.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var D=new Array(arguments.length-1),L=0;L<D.length;L++)D[L]=arguments[L+1];var z={callback:R,args:D};return v[b]=z,h(b),b++},_.clearImmediate=A}function A(R){delete v[R]}function T(R){if(w)setTimeout(T,0,R);else{var D=v[R];if(D){w=!0;try{(function(L){var z=L.callback,q=L.args;switch(q.length){case 0:z();break;case 1:z(q[0]);break;case 2:z(q[0],q[1]);break;case 3:z(q[0],q[1],q[2]);break;default:z.apply(u,q)}})(D)}finally{A(R),w=!1}}}}function M(R){R.source===o&&typeof R.data=="string"&&R.data.indexOf(p)===0&&T(+R.data.slice(p.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof v0<"u"?v0:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Gd)),Gd.exports}var O7=N7();const z7=V3(O7),L7={title_slide:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');
        :root {
            --bg-color-dark: #0f172a; --text-color-dark: #f1f5f9; --accent-color-dark: #38bdf8; --sub-text-color-dark: #94a3b8;
            --bg-color-light: #F8FAFC; --text-color-light: #1E293B; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 80px; 
            background: var(--bg-color); color: var(--text-color); 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center; /* : flex-start  center  */
            text-align: center; /* : left  center  */
        }
        h1 { font-size: 80px; font-weight: 900; margin: 0; line-height: 1.3; }
        p { font-size: 28px; margin: 24px 0 0; color: var(--sub-text-color); font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
        <p>{summary}</p>
    </div>
</body>
</html>`,agenda:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        ol { padding-left: 50px; margin: 0; }
        li { font-size: 32px; color: var(--sub-text-color); line-height: 2.0; /*  */ margin-bottom: 15px; font-weight: 400; }
        li::marker { color: var(--accent-color); font-weight: 700; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <ol>{agenda_items_html}</ol>
    </div>
</body>
</html>`,section_header:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@900&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #f1f5f9; --accent-color-dark: #38bdf8;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 80px; 
            background: var(--bg-color); 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: flex-start; /*  */
        }
        h1 { 
            font-size: 96px; font-weight: 900; color: var(--text-color); 
            margin: 0; line-height: 1.2; 
            border-left: 10px solid var(--accent-color); /*  */
            padding-left: 40px; 
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
    </div>
</body>
</html>`,content_basic:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { padding-left: 20px; overflow: hidden; /* :  */}
        ul { 
            padding-left: 0; /* :  */
            margin: 0; 
            list-style-type: none; /* :  */
        }
        li { 
            font-size: 22px; /* : 24px -> 22px  */
            color: var(--sub-text-color); 
            line-height: 1.7; /* : 1.8 -> 1.7  */
            margin-bottom: 12px; /* : 15px -> 12px  */
            font-weight: 400; 
            white-space: pre-wrap;
            position: relative;
            padding-left: 1.5em;
        }
        li[data-level="0"]::before { /* : li::before  (0) */
            content: '';
            color: var(--accent-color);
            font-size: 0.8em;
            position: absolute;
            left: 0.2em;
            top: 0.15em;
        }
        li[data-level="1"]::before {
            content: '';
            color: var(--accent-color); /* :  */
            font-size: 0.7em;
            position: absolute; /* :  */
            left: 0.25em;
            top: 0.2em;
        }
        li[data-level="2"]::before,
        li[data-level="3"]::before,
        li[data-level="4"]::before {
            content: '';
            color: var(--accent-color); /* :  */
            font-size: 0.6em;
            position: absolute; /* :  */
            left: 0.3em;
            top: 0.3em;
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <ul>{items_html}</ul>
        </div>
    </div>
</body>
</html>`,content_with_diagram:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { display: grid; grid-template-columns: 40% 60%; gap: 40px; flex-grow: 1; align-items: center; }
        
        .content { 
            font-size: 22px; 
            line-height: 1.7; /* :  1.7  */
            color: var(--sub-text-color); 
            /* white-space: pre-wrap; */ /* : markedp */
            font-weight: 400; 
            display: flex; 
            flex-direction: column; 
            justify-content: flex-start;
            /* :  */
            height: 100%;
            overflow: hidden;
        }

        /*    */
        /* marked.parse()  */
        .content p {
            margin: 0 0 16px 0; /* 16px */
            line-height: 1.7;
        }
        .content p:last-child {
            margin-bottom: 0; /*  */
        }
        .content ul {
            margin: 0 0 16px 0; /*  */
            padding-left: 1.5em; /*  */
            list-style-type: none; /*  */
        }
        .content li {
            margin: 0 0 12px 0; /*  */
            line-height: 1.7;
            position: relative;
            padding-left: 0.5em;
        }
        .content li::before {
            content: ''; /* content_basic  */
            color: var(--accent-color);
            font-size: 0.8em;
            position: absolute;
            left: -1.2em;
            top: 0.15em;
        }
        .content strong {
            font-weight: 700;
            color: var(--text-color); /* AI */
        }
        /*    */
        
        #infographic-slot { display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; }
        #infographic-slot svg {
            width: 100%; /* max-width  */
            height: 100%; /* max-height  */
            object-fit: contain; /*  */
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <div class="content">{content}</div>
            <div id="infographic-slot">{infographic_svg}</div>
        </div>
    </div>
</body>
</html>`,three_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1; --card-bg-color-dark: #334155;
            --bg-color-light: #F8FAFC; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569; --card-bg-color-light: #FFFFFF;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); --card-bg-color: var(--card-bg-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: flex; justify-content: space-around; gap: 30px; align-items: stretch; }
        .point { 
            background: var(--card-bg-color); 
            border-radius: 8px; 
            padding: 25px; flex: 1; 
            border-top: 4px solid var(--accent-color); 
            display: flex; flex-direction: column; align-items: center; text-align: center; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.05); /*  */
        }
        .point-icon { height: 120px; width: 100%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; color: var(--accent-color); }
        .point-icon svg {
            width: 80px;  /* SVG80px */
            height: 80px; /* SVG80px */
        }
        h2 { font-size: 26px; color: var(--text-color); margin: 0 0 15px; font-weight: 700; }
        p { font-size: 18px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_3_svg}</div>
                <h2>{point_3_title}</h2>
                <p>{point_3_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,vertical_steps:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #94a3b8;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        .steps-container { position: relative; padding-left: 80px; }
        .timeline { position: absolute; left: 30px; top: 15px; bottom: 15px; width: 4px; background-color: var(--accent-color); opacity: 0.3; }
        .step { position: relative; margin-bottom: 25px; }
        .step-marker { position: absolute; left: -52px; top: 5px; width: 24px; height: 24px; background-color: var(--accent-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--bg-color-light); font-weight: 700; font-size: 14px; }
        body.theme-dark .step-marker { color: var(--bg-color-dark); }
        h2 { font-size: 28px; color: var(--text-color); margin: 0 0 8px; font-weight: 700; }
        p { font-size: 20px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="steps-container">
            <div class="timeline"></div>
            {items_html}
        </div>
    </div>
</body>
</html>`,comparison:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        :root {
            /*    () */
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1; --card-bg-color-dark: #334155;
            --bg-color-light: #F8FAFC; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569; --card-bg-color-light: #FFFFFF;
            /*    */
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); --card-bg-color: var(--card-bg-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 40px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        /*    (Grid  Flex ) */
        .slide-body { 
            display: flex; /* grid  */
            gap: 30px; /* 50px  (4) */
            flex-grow: 1; 
            align-items: stretch; /*  */
        }
        .column { 
            padding: 20px; /* 0  */
            flex: 1; /*  */
            display: flex; 
            flex-direction: column; /*  */
            
            /*  */
            background: var(--card-bg-color);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-top: 4px solid var(--accent-color);
        }
        .column h2 { 
            font-size: 24px; /* 28px  (4) */
            color: var(--text-color); 
            margin: 0 0 20px; 
            font-weight: 700; 
            text-align: center; 
        }
        .column ul { 
            padding-left: 20px; /* 30px  */
            margin: 0; 
            flex-grow: 1; /*  */
        }
        .column li { 
            font-size: 18px; /* 20px  */
            color: var(--sub-text-color); 
            line-height: 1.7; /* 1.8  */
            margin-bottom: 10px; /* 12px  */
            font-weight: 400; 
            white-space: pre-wrap; 
        }
        /*    */
        .column li::marker { color: var(--accent-color); font-size: 1.2em; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            {comparison_columns_html}
            </div>
    </div>
</body>
</html>`,summary_or_thankyou:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;900&display=swap');
        :root {
            --bg-color-dark: #0f172a; --text-color-dark: #f1f5f9; --accent-color-dark: #38bdf8; --sub-text-color-dark: #94a3b8;
            --bg-color-light: #F8FAFC; --text-color-light: #1E293B; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 80px; 
            background: var(--bg-color); color: var(--text-color); 
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center; /*  */
            text-align: center; 
        }
        h1 { font-size: 72px; font-weight: 900; margin: 0; line-height: 1.3; color: var(--accent-color); }
        p { font-size: 24px; margin: 24px 0 0; color: var(--sub-text-color); font-weight: 400; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
        <p>{summary}</p>
    </div>
</body>
</html>`,table_basic:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display.swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px 80px; background: var(--bg-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        /*  CSS  */
        .table-container { 
            width: 100%; 
            /* flex-grow: 1;  */
            min-height: 0;
            overflow-y: auto; 
            /* :  */
            max-height: calc(100% - 150px); /*  */
        }
        /*    */

        table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }
        th, td {
            border: 1px solid var(--sub-text-color);
            padding: 8px;
            font-size: 16px; 
            color: var(--sub-text-color);
            word-wrap: break-word;
            text-align: left;
        }
        th {
            background-color: var(--accent-color);
            color: var(--bg-color-light);
            font-weight: 700;
        }
        body.theme-dark th { color: var(--bg-color-dark); }
        tr:nth-child(even) { 
            background-color: rgba(128, 128, 128, 0.1);
        }
        body.theme-light tr:nth-child(even) {
             background-color: #f8f9fa;
        }

        /* () */
        .content {
            flex-shrink: 0;
            max-height: 25%;
            overflow-y: auto;
            padding-top: 20px;
            
            font-size: 18px; 
            line-height: 1.6;
            color: var(--sub-text-color); 
            font-weight: 400;
            text-align: center; 
            width: 100%;
        }

        .content p { margin: 0 0 10px 0; line-height: 1.6; }
        .content p:last-child { margin-bottom: 0; }
        .content ul { margin: 0 0 10px 0; padding-left: 1.5em; list-style-type: none; }
        .content li { margin: 0 0 8px 0; line-height: 1.6; position: relative; padding-left: 0.5em; }
        .content li::before { content: ''; color: var(--accent-color); font-size: 0.8em; position: absolute; left: -1.2em; top: 0.15em; }
        .content strong { font-weight: 700; color: var(--text-color); }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="table-container">
            <table>
                {table_html}
            </table>
        </div>
        <div class="content">{content}</div>
    </div>
</body>
</html>`,math_basic:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        /* KaTeX CSS () */
        @import url('https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css');

        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 60px 80px; 
            background: var(--bg-color); 
            display: flex; flex-direction: column; 
        }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        /*  */
        .content { 
            font-size: 22px; 
            line-height: 1.7;
            color: var(--sub-text-color); 
            font-weight: 400; 
            height: 40%; /*  */
            overflow: auto; /*  */
            padding-bottom: 20px;
        }
        /* marked.parse()  */
        .content p { margin: 0 0 16px 0; line-height: 1.7; }
        .content ul { margin: 0 0 16px 0; padding-left: 1.5em; }
        .content li { margin: 0 0 12px 0; line-height: 1.7; }

        .content strong {
            font-weight: 700;
            color: var(--text-color); /* AI */
        }
        .content a { /*  */
            color: var(--accent-color);
            text-decoration: none;
        }

        /*  */
        .formula-container {
            flex-grow: 1; /*  */
            display: flex;
            align-items: top; /*  */
            justify-content: center; /*  */
            overflow: hidden;
            
            /* KaTeX  */
            font-size: 28px; /*  */
            color: var(--text-color); /*  */
        }
        
        /* KaTeXkatex-display */
        .formula-container .katex-display {
            margin: 0; /*  */
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        
        <div class="content">{content}</div> <div class="formula-container">
            {formula}
        </div>
    </div>
</body>
</html>`,quote:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 60px 80px; 
            background: var(--bg-color); 
            display: flex; flex-direction: column; 
        }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        .quote-container {
            flex-grow: 1;
            display: flex;
            flex-direction: column; 
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        blockquote {
            margin: 0;
            padding: 0 40px;
            font-size: 52px;
            font-weight: 700;
            line-height: 1.6;
            color: var(--accent-color);
            white-space: pre-wrap;
            
            /*  :   */
            /* position: relative; () */
        }
        /* blockquote::before () */
        /* blockquote::after () */
        /*    */

        /*  */
        .description {
            font-size: 20px;
            font-weight: 400;
            line-height: 1.7;
            color: var(--sub-text-color);
            margin: 30px 0 0;
            padding: 0 40px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        
        <div class="quote-container">
            <blockquote>{summary}</blockquote>
            <p class="description">{description}</p>
        </div>
    </div>
</body>
</html>`,highlighted_number:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&display=swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); }
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 60px 80px; 
            background: var(--bg-color); 
            display: flex; flex-direction: column; 
        }
        .slide-header { border-bottom: 3px solid var(--accent-color); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        /*   ()  */
        .slide-body { 
            display: grid; 
            grid-template-columns: 45% 55%; /* : 45%, : 55% */
            gap: 40px; 
            flex-grow: 1; 
            align-items: center; 
        }

        .number-side {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .number {
            font-size: 160px; /* 180px */
            font-weight: 900; /* Black */
            line-height: 1.1;
            color: var(--accent-color);
            margin: 0;
        }
        .description { /*  */
            font-size: 30px; /* 32px */
            font-weight: 700; /* Bold */
            line-height: 1.5;
            color: var(--text-color);
            margin: 10px 0 0;
        }

        .content-side {
            display: flex; 
            flex-direction: column; 
            justify-content: center; /*  */
            height: 100%;
            overflow: hidden;
        }
        .content-side h2 { /*  */
            font-size: 32px;
            font-weight: 700;
            color: var(--text-color);
            margin: 0 0 20px 0;
        }
        .content { /*  */
            font-size: 22px; 
            line-height: 1.7;
            color: var(--sub-text-color); 
            font-weight: 400; 
            max-height: 300px; /*  */
            overflow: auto; /*  */
        }
        /* marked.parse()  (content_with_diagram) */
        .content p { margin: 0 0 16px 0; line-height: 1.7; }
        .content p:last-child { margin-bottom: 0; }
        .content ul { margin: 0 0 16px 0; padding-left: 1.5em; list-style-type: none; }
        .content li { margin: 0 0 12px 0; line-height: 1.7; position: relative; padding-left: 0.5em; }
        .content li::before { content: ''; color: var(--accent-color); font-size: 0.8em; position: absolute; left: -1.2em; top: 0.15em; }
        .content strong { font-weight: 700; color: var(--text-color); }
        /*   ()  */
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        
        <div class="slide-body">
            <div class="number-side">
                <div class="number">{number}</div>
                <p class="description">{description}</p>
            </div>
            <div class="content-side">
                <h2>{content_title}</h2>
                <div class="content">{content}</div>
            </div>
        </div>
        </div>
</body>
</html>`,bar_chart:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"><\/script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"><\/script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display.swap');
        :root {
            --bg-color-dark: #1e293b; --text-color-dark: #e2e8f0; --accent-color-dark: #38bdf8; --sub-text-color-dark: #cbd5e1;
            --grid-color-dark: rgba(255, 255, 255, 0.1); 
            --bg-color-light: #FFFFFF; --text-color-light: #1e293b; --accent-color-light: #0284c7; --sub-text-color-light: #475569;
            --grid-color-light: rgba(0, 0, 0, 0.1); 

            --label-color-dark: #1E293B; /*  ()  =  */
            --label-color-light: #FFFFFF; /*  ()  =  */
        }
        body { margin: 0; font-family: 'Noto Sans JP', sans-serif; }
        body.theme-dark { --bg-color: var(--bg-color-dark); --text-color: var(--text-color-dark); --accent-color: var(--accent-color-dark); --sub-text-color: var(--sub-text-color-dark); --grid-color: var(--grid-color-dark); --label-color: var(--label-color-dark); }
        body.theme-light { --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --sub-text-color: var(--sub-text-color-light); --grid-color: var(--grid-color-light); --label-color: var(--label-color-light); }
        
        .slide-container { 
            width: 1280px; height: 720px; box-sizing: border-box; 
            padding: 60px 80px; 
            background: var(--bg-color); 
            display: flex; flex-direction: column; 
        }
        .slide-header { 
            border-bottom: 3px solid var(--accent-color); 
            padding-bottom: 20px; 
            margin-bottom: 30px; 
            flex-shrink: 0; 
        }
        h1 { font-size: 42px; margin: 0; color: var(--text-color); font-weight: 700; }
        
        .chart-container {
            flex-grow: 1; 
            position: relative; 
            min-height: 0; 
        }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        
        <div class="chart-container">
            <canvas id="myChart"></canvas>
        </div>
    </div>

    <script>
        // generateSlide 
        const chartData = {chart_data_json};

        // --- Chart.js  ---
        (function() {
            const ctx = document.getElementById('myChart');
            if (!ctx || !chartData) return;

            // dark/light
            const isDark = document.body.classList.contains('theme-dark');
            const textColor = isDark ? 'rgba(226, 232, 240, 0.9)' : 'rgba(30, 41, 59, 0.9)';
            const gridColor = isDark ? 'rgba(255, 255, 255, 0.1)' : 'rgba(0, 0, 0, 0.1)';
            const accentColor = isDark ? '#38bdf8' : '#0284c7';
            const labelColor = isDark ? 'var(--label-color-dark)' : 'var(--label-color-light)'; // 

            // AI
            const defaultBackgroundColor = isDark ? 'rgba(56, 189, 248, 0.6)' : 'rgba(2, 132, 199, 0.6)';
            const defaultBorderColor = isDark ? '#38bdf8' : '#0284c7';

            // AI
            chartData.datasets.forEach(dataset => {
                if (!dataset.backgroundColor) {
                    dataset.backgroundColor = defaultBackgroundColor;
                }
                if (!dataset.borderColor) {
                    dataset.borderColor = defaultBorderColor;
                }
                if (!dataset.borderWidth) {
                    dataset.borderWidth = 1;
                }
            });

            // Chart.js
            Chart.register(ChartDataLabels);

            new Chart(ctx, {
                type: 'bar',
                data: chartData,
                options: {
                    //  [NEW]  
                    animation: false,
                    //   

                    responsive: true,
                    maintainAspectRatio: false, // 
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: textColor, font: { family: "'Noto Sans JP', sans-serif", size: 14 } },
                            grid: { color: gridColor }
                        },
                        x: {
                            ticks: { color: textColor, font: { family: "'Noto Sans JP', sans-serif", size: 14 } },
                            grid: { color: gridColor }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: { 
                                color: textColor, 
                                font: { family: "'Noto Sans JP', sans-serif", size: 16, weight: '700' }
                            }
                        },
                        tooltip: {
                            titleFont: { family: "'Noto Sans JP', sans-serif", size: 16, weight: '700' },
                            bodyFont: { family: "'Noto Sans JP', sans-serif", size: 14 }
                        },
                        
                        // datalabels 
                        datalabels: {
                            anchor: 'end', // 
                            align: 'end', // 
                            color: labelColor, // 
                            font: {
                                family: "'Noto Sans JP', sans-serif",
                                weight: '700', // Bold
                                size: 14
                            },
                            //  (: 85 -> "85%")
                            formatter: (value, context) => {
                                // AI (85) "%" 
                                // (0null)
                                if (!value) return null;
                                return value + '%'; 
                            },
                            //  ()
                            display: (context) => {
                                return context.dataset.data[context.dataIndex] > 0; // 0
                            }
                        }
                    }
                }
            });
        })();
    <\/script>
</body>
</html>`},B7={title_slide:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@700;900&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; overflow: hidden; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        h1 { font-size: 100px; font-weight: 900; margin: 0; line-height: 1.3; color: var(--accent-color-2); text-shadow: 2px 2px 4px rgba(0,0,0,0.1); }
        p { font-size: 32px; margin: 20px 0 0; color: var(--sub-text-color); font-weight: 700; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
        <p>{summary}</p>
    </div>
</body>
</html>`,agenda:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        ol { padding-left: 50px; }
        li { font-size: 34px; color: var(--sub-text-color); line-height: 1.8; margin-bottom: 15px; font-weight: 700; }
        li::marker { color: var(--accent-color); font-weight: 900; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <ol>{agenda_items_html}</ol>
    </div>
</body>
</html>`,section_header:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@900&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--accent-color-3); color: var(--text-color); display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        h1 { font-size: 110px; font-weight: 900; color: var(--text-color); margin: 0; line-height: 1.2; padding: 20px 40px; background: var(--bg-color); border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <h1>{title}</h1>
    </div>
</body>
</html>`,quote:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 80px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; justify-content: center; align-items: center; }
        blockquote { margin: 0; padding: 0; border-left: 10px solid var(--accent-color); padding-left: 40px; }
        p { font-size: 52px; font-weight: 700; color: var(--text-color); margin: 0; }
        footer { font-size: 28px; color: var(--text-color); margin-top: 30px; align-self: flex-end; font-weight: 700; padding: 10px 20px; background: var(--accent-color-3); border-radius: 10px; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <blockquote>
            <p>{title}</p>
        </blockquote>
        <footer>{summary}</footer>
    </div>
</body>
</html>`,content_left_infographic_right:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 30px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .slide-body { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; flex-grow: 1; }
        .content { font-size: 24px; line-height: 1.8; color: var(--sub-text-color); white-space: pre-wrap; font-weight: 400; }
        #infographic-slot { display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="slide-body">
            <div class="content">{content}</div>
            <div id="infographic-slot">{infographic_svg}</div>
        </div>
    </div>
</body>
</html>`,two_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: flex; justify-content: space-around; gap: 40px; align-items: stretch; }
        .point { background: var(--card-bg-color); border-radius: 16px; padding: 30px; flex: 1; border-top: 8px solid var(--accent-color-2); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .point-icon { height: 150px; width: 100%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; }
        h2 { font-size: 30px; color: var(--text-color); margin: 0 0 15px; font-weight: 700; }
        p { font-size: 22px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,three_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: flex; justify-content: space-around; gap: 30px; align-items: stretch; }
        .point { background: var(--card-bg-color); border-radius: 16px; padding: 25px; flex: 1; border-top: 8px solid var(--accent-color-2); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .point-icon { height: 140px; width: 100%; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; }
        h2 { font-size: 28px; color: var(--text-color); margin: 0 0 15px; font-weight: 700; }
        p { font-size: 20px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_3_svg}</div>
                <h2>{point_3_title}</h2>
                <p>{point_3_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,four_points:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 30px; }
        h1 { font-size: 44px; margin: 0; color: var(--text-color); font-weight: 700; }
        .points-container { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; gap: 25px; flex-grow: 1; }
        .point { background: var(--card-bg-color); border-radius: 16px; padding: 20px; border-top: 8px solid var(--accent-color-2); display: flex; flex-direction: column; align-items: center; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .point-icon { height: 80px; width: 100%; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; }
        h2 { font-size: 24px; color: var(--text-color); margin: 0 0 10px; font-weight: 700; }
        p { font-size: 18px; line-height: 1.6; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="points-container">
            <div class="point">
                <div class="point-icon">{icon_1_svg}</div>
                <h2>{point_1_title}</h2>
                <p>{point_1_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_2_svg}</div>
                <h2>{point_2_title}</h2>
                <p>{point_2_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_3_svg}</div>
                <h2>{point_3_title}</h2>
                <p>{point_3_summary}</p>
            </div>
            <div class="point">
                <div class="point-icon">{icon_4_svg}</div>
                <h2>{point_4_title}</h2>
                <p>{point_4_summary}</p>
            </div>
        </div>
    </div>
</body>
</html>`,vertical_steps:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .steps-container { position: relative; padding-left: 60px; }
        .timeline { position: absolute; left: 20px; top: 15px; bottom: 15px; width: 8px; background-color: var(--accent-color); opacity: 0.3; border-radius: 4px; }
        .step { position: relative; margin-bottom: 25px; }
        .step-marker { position: absolute; left: -48px; top: 0px; width: 36px; height: 36px; background-color: var(--accent-color-2); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--bg-color); font-weight: 700; font-size: 18px; border: 4px solid var(--bg-color); box-shadow: 0 0 0 4px var(--accent-color-2); }
        h2 { font-size: 30px; color: var(--text-color); margin: 0 0 8px; font-weight: 700; }
        p { font-size: 22px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="steps-container">
            <div class="timeline"></div>
            {items_html}
        </div>
    </div>
</body>
</html>`,icon_list:`
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1280, initial-scale=1.0">
    <title>{title}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap');
        :root {
            --bg-color-light: #ffffff; --text-color-light: #333333; --accent-color-light: #00C4FF; --accent-color-2-light: #FF3D8B; --accent-color-3-light: #FFD600; --sub-text-color-light: #555555; --card-bg-color-light: #f9f9f9;
        }
        body { margin: 0; font-family: 'Zen Maru Gothic', sans-serif; }
        body.theme-light, body.theme-dark {
            --bg-color: var(--bg-color-light); --text-color: var(--text-color-light); --accent-color: var(--accent-color-light); --accent-color-2: var(--accent-color-2-light); --accent-color-3: var(--accent-color-3-light); --sub-text-color: var(--sub-text-color-light); --card-bg-color: var(--card-bg-color-light);
        }
        .slide-container { width: 1280px; height: 720px; box-sizing: border-box; padding: 60px; background: var(--bg-color); color: var(--text-color); display: flex; flex-direction: column; }
        .slide-header { border-bottom: 4px dotted var(--accent-color-3); padding-bottom: 15px; margin-bottom: 40px; }
        h1 { font-size: 48px; margin: 0; color: var(--text-color); font-weight: 700; }
        .list-container { display: flex; flex-direction: column; gap: 30px; }
        .list-item { display: flex; align-items: center; gap: 25px; }
        .item-icon { flex-shrink: 0; width: 72px; height: 72px; color: var(--accent-color); background: var(--card-bg-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; padding: 10px; box-sizing: border-box; }
        .item-icon svg { width: 48px; height: 48px; }
        .item-content h2 { font-size: 28px; color: var(--text-color); margin: 0 0 8px; font-weight: 700; }
        .item-content p { font-size: 22px; line-height: 1.7; color: var(--sub-text-color); margin: 0; white-space: pre-wrap; }
    </style>
</head>
<body class="{theme_class}">
    <div class="slide-container">
        <div class="slide-header"><h1>{title}</h1></div>
        <div class="list-container">
            {items_html}
        </div>
    </div>
</body>
</html>`},Gl={standard:{name:" ()",templates:L7},pop:{name:"",templates:B7}};function Wf(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Sa=Wf();function B4(l){Sa=l}var zl={exec:()=>null};function Ie(l,t=""){let e=typeof l=="string"?l:l.source,i={replace:(r,a)=>{let o=typeof a=="string"?a:a.source;return o=o.replace(en.caret,"$1"),e=e.replace(r,o),i},getRegex:()=>new RegExp(e,t)};return i}var en={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:l=>new RegExp(`^( {0,3}${l})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}#`),htmlBeginRegex:l=>new RegExp(`^ {0,${Math.min(3,l-1)}}<(?:[a-z].*>|!--)`,"i")},I7=/^(?:[ \t]*(?:\n|$))+/,F7=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,P7=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,tc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,U7=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Zf=/(?:[*+-]|\d{1,9}[.)])/,I4=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,F4=Ie(I4).replace(/bull/g,Zf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),j7=Ie(I4).replace(/bull/g,Zf).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Qf=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,H7=/^[^\n]+/,Jf=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,G7=Ie(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Jf).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),q7=Ie(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Zf).getRegex(),hu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",tm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,$7=Ie("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",tm).replace("tag",hu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),P4=Ie(Qf).replace("hr",tc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hu).getRegex(),Y7=Ie(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",P4).getRegex(),em={blockquote:Y7,code:F7,def:G7,fences:P7,heading:U7,hr:tc,html:$7,lheading:F4,list:q7,newline:I7,paragraph:P4,table:zl,text:H7},cb=Ie("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",tc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hu).getRegex(),V7={...em,lheading:j7,table:cb,paragraph:Ie(Qf).replace("hr",tc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",cb).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hu).getRegex()},X7={...em,html:Ie(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",tm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:zl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ie(Qf).replace("hr",tc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",F4).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},K7=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,W7=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,U4=/^( {2,}|\\)\n(?!\s*$)/,Z7=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,du=/[\p{P}\p{S}]/u,im=/[\s\p{P}\p{S}]/u,j4=/[^\s\p{P}\p{S}]/u,Q7=Ie(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,im).getRegex(),H4=/(?!~)[\p{P}\p{S}]/u,J7=/(?!~)[\s\p{P}\p{S}]/u,t8=/(?:[^\s\p{P}\p{S}]|~)/u,e8=Ie(/link|code|html/,"g").replace("link",new RegExp("\\[(?:[^\\[\\]`]|(?<!`)(?<a>`+)[^`]+\\k<a>(?!`))*?\\]\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)]|\\((?:\\\\[\\s\\S]|[^\\\\\\(\\)])*\\))*\\)")).replace("code",new RegExp("(?<!`)(?<b>`+)[^`]+\\k<b>(?!`)")).replace("html",/<(?! )[^<>]*?>/).getRegex(),G4=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,i8=Ie(G4,"u").replace(/punct/g,du).getRegex(),n8=Ie(G4,"u").replace(/punct/g,H4).getRegex(),q4="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",r8=Ie(q4,"gu").replace(/notPunctSpace/g,j4).replace(/punctSpace/g,im).replace(/punct/g,du).getRegex(),s8=Ie(q4,"gu").replace(/notPunctSpace/g,t8).replace(/punctSpace/g,J7).replace(/punct/g,H4).getRegex(),a8=Ie("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,j4).replace(/punctSpace/g,im).replace(/punct/g,du).getRegex(),o8=Ie(/\\(punct)/,"gu").replace(/punct/g,du).getRegex(),l8=Ie(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),c8=Ie(tm).replace("(?:-->|$)","-->").getRegex(),u8=Ie("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",c8).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),K0=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,h8=Ie(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",K0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),$4=Ie(/^!?\[(label)\]\[(ref)\]/).replace("label",K0).replace("ref",Jf).getRegex(),Y4=Ie(/^!?\[(ref)\](?:\[\])?/).replace("ref",Jf).getRegex(),d8=Ie("reflink|nolink(?!\\()","g").replace("reflink",$4).replace("nolink",Y4).getRegex(),ub=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,nm={_backpedal:zl,anyPunctuation:o8,autolink:l8,blockSkip:e8,br:U4,code:W7,del:zl,emStrongLDelim:i8,emStrongRDelimAst:r8,emStrongRDelimUnd:a8,escape:K7,link:h8,nolink:Y4,punctuation:Q7,reflink:$4,reflinkSearch:d8,tag:u8,text:Z7,url:zl},f8={...nm,link:Ie(/^!?\[(label)\]\((.*?)\)/).replace("label",K0).getRegex(),reflink:Ie(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",K0).getRegex()},yf={...nm,emStrongRDelimAst:s8,emStrongLDelim:n8,url:Ie(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",ub).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ie(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",ub).getRegex()},m8={...yf,br:Ie(U4).replace("{2,}","*").getRegex(),text:Ie(yf.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},R0={normal:em,gfm:V7,pedantic:X7},_l={normal:nm,gfm:yf,breaks:m8,pedantic:f8},p8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hb=l=>p8[l];function pr(l,t){if(t){if(en.escapeTest.test(l))return l.replace(en.escapeReplace,hb)}else if(en.escapeTestNoEncode.test(l))return l.replace(en.escapeReplaceNoEncode,hb);return l}function db(l){try{l=encodeURI(l).replace(en.percentDecode,"%")}catch{return null}return l}function fb(l,t){let e=l.replace(en.findPipe,(a,o,u)=>{let h=!1,f=o;for(;--f>=0&&u[f]==="\\";)h=!h;return h?"|":" |"}),i=e.split(en.splitPipe),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(en.slashPipe,"|");return i}function El(l,t,e){let i=l.length;if(i===0)return"";let r=0;for(;r<i&&l.charAt(i-r-1)===t;)r++;return l.slice(0,i-r)}function g8(l,t){if(l.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<l.length;i++)if(l[i]==="\\")i++;else if(l[i]===t[0])e++;else if(l[i]===t[1]&&(e--,e<0))return i;return e>0?-2:-1}function mb(l,t,e,i,r){let a=t.href,o=t.title||null,u=l[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;let h={type:l[0].charAt(0)==="!"?"image":"link",raw:e,href:a,title:o,text:u,tokens:i.inlineTokens(u)};return i.state.inLink=!1,h}function b8(l,t,e){let i=l.match(e.other.indentCodeCompensation);if(i===null)return t;let r=i[1];return t.split(`
`).map(a=>{let o=a.match(e.other.beginningSpace);if(o===null)return a;let[u]=o;return u.length>=r.length?a.slice(r.length):a}).join(`
`)}var W0=class{options;rules;lexer;constructor(l){this.options=l||Sa}space(l){let t=this.rules.block.newline.exec(l);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(l){let t=this.rules.block.code.exec(l);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:El(e,`
`)}}}fences(l){let t=this.rules.block.fences.exec(l);if(t){let e=t[0],i=b8(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(l){let t=this.rules.block.heading.exec(l);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let i=El(e,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(e=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(l){let t=this.rules.block.hr.exec(l);if(t)return{type:"hr",raw:El(t[0],`
`)}}blockquote(l){let t=this.rules.block.blockquote.exec(l);if(t){let e=El(t[0],`
`).split(`
`),i="",r="",a=[];for(;e.length>0;){let o=!1,u=[],h;for(h=0;h<e.length;h++)if(this.rules.other.blockquoteStart.test(e[h]))u.push(e[h]),o=!0;else if(!o)u.push(e[h]);else break;e=e.slice(h);let f=u.join(`
`),m=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,r=r?`${r}
${m}`:m;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(m,a,!0),this.lexer.state.top=p,e.length===0)break;let b=a.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let v=b,w=v.raw+`
`+e.join(`
`),x=this.blockquote(w);a[a.length-1]=x,i=i.substring(0,i.length-v.raw.length)+x.raw,r=r.substring(0,r.length-v.text.length)+x.text;break}else if(b?.type==="list"){let v=b,w=v.raw+`
`+e.join(`
`),x=this.list(w);a[a.length-1]=x,i=i.substring(0,i.length-b.raw.length)+x.raw,r=r.substring(0,r.length-v.raw.length)+x.raw,e=w.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:a,text:r}}}list(l){let t=this.rules.block.list.exec(l);if(t){let e=t[1].trim(),i=e.length>1,r={type:"list",raw:"",ordered:i,start:i?+e.slice(0,-1):"",loose:!1,items:[]};e=i?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=i?e:"[*+-]");let a=this.rules.other.listItemRegex(e),o=!1;for(;l;){let h=!1,f="",m="";if(!(t=a.exec(l))||this.rules.block.hr.test(l))break;f=t[0],l=l.substring(f.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,A=>" ".repeat(3*A.length)),b=l.split(`
`,1)[0],v=!p.trim(),w=0;if(this.options.pedantic?(w=2,m=p.trimStart()):v?w=t[1].length+1:(w=t[2].search(this.rules.other.nonSpaceChar),w=w>4?1:w,m=p.slice(w),w+=t[1].length),v&&this.rules.other.blankLine.test(b)&&(f+=b+`
`,l=l.substring(b.length+1),h=!0),!h){let A=this.rules.other.nextBulletRegex(w),T=this.rules.other.hrRegex(w),M=this.rules.other.fencesBeginRegex(w),R=this.rules.other.headingBeginRegex(w),D=this.rules.other.htmlBeginRegex(w);for(;l;){let L=l.split(`
`,1)[0],z;if(b=L,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),z=b):z=b.replace(this.rules.other.tabCharGlobal,"    "),M.test(b)||R.test(b)||D.test(b)||A.test(b)||T.test(b))break;if(z.search(this.rules.other.nonSpaceChar)>=w||!b.trim())m+=`
`+z.slice(w);else{if(v||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||M.test(p)||R.test(p)||T.test(p))break;m+=`
`+b}!v&&!b.trim()&&(v=!0),f+=L+`
`,l=l.substring(L.length+1),p=z.slice(w)}}r.loose||(o?r.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(o=!0));let x=null,_;this.options.gfm&&(x=this.rules.other.listIsTask.exec(m),x&&(_=x[0]!=="[ ] ",m=m.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:f,task:!!x,checked:_,loose:!1,text:m,tokens:[]}),r.raw+=f}let u=r.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let h=0;h<r.items.length;h++)if(this.lexer.state.top=!1,r.items[h].tokens=this.lexer.blockTokens(r.items[h].text,[]),!r.loose){let f=r.items[h].tokens.filter(p=>p.type==="space"),m=f.length>0&&f.some(p=>this.rules.other.anyLine.test(p.raw));r.loose=m}if(r.loose)for(let h=0;h<r.items.length;h++)r.items[h].loose=!0;return r}}html(l){let t=this.rules.block.html.exec(l);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(l){let t=this.rules.block.def.exec(l);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:r}}}table(l){let t=this.rules.block.table.exec(l);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=fb(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===i.length){for(let o of i)this.rules.other.tableAlignRight.test(o)?a.align.push("right"):this.rules.other.tableAlignCenter.test(o)?a.align.push("center"):this.rules.other.tableAlignLeft.test(o)?a.align.push("left"):a.align.push(null);for(let o=0;o<e.length;o++)a.header.push({text:e[o],tokens:this.lexer.inline(e[o]),header:!0,align:a.align[o]});for(let o of r)a.rows.push(fb(o,a.header.length).map((u,h)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:a.align[h]})));return a}}lheading(l){let t=this.rules.block.lheading.exec(l);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(l){let t=this.rules.block.paragraph.exec(l);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(l){let t=this.rules.block.text.exec(l);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(l){let t=this.rules.inline.escape.exec(l);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(l){let t=this.rules.inline.tag.exec(l);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(l){let t=this.rules.inline.link.exec(l);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let a=El(e.slice(0,-1),"\\");if((e.length-a.length)%2===0)return}else{let a=g8(t[2],"()");if(a===-2)return;if(a>-1){let o=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,o).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(i);a&&(i=a[1],r=a[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i=i.slice(1):i=i.slice(1,-1)),mb(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(l,t){let e;if((e=this.rules.inline.reflink.exec(l))||(e=this.rules.inline.nolink.exec(l))){let i=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[i.toLowerCase()];if(!r){let a=e[0].charAt(0);return{type:"text",raw:a,text:a}}return mb(e,r,e[0],this.lexer,this.rules)}}emStrong(l,t,e=""){let i=this.rules.inline.emStrongLDelim.exec(l);if(!(!i||i[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!e||this.rules.inline.punctuation.exec(e))){let r=[...i[0]].length-1,a,o,u=r,h=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,t=t.slice(-1*l.length+r);(i=f.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(o=[...a].length,i[3]||i[4]){u+=o;continue}else if((i[5]||i[6])&&r%3&&!((r+o)%3)){h+=o;continue}if(u-=o,u>0)continue;o=Math.min(o,o+u+h);let m=[...i[0]][0].length,p=l.slice(0,r+i.index+m+o);if(Math.min(r,o)%2){let v=p.slice(1,-1);return{type:"em",raw:p,text:v,tokens:this.lexer.inlineTokens(v)}}let b=p.slice(2,-2);return{type:"strong",raw:p,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(l){let t=this.rules.inline.code.exec(l);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(e),r=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&r&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(l){let t=this.rules.inline.br.exec(l);if(t)return{type:"br",raw:t[0]}}del(l){let t=this.rules.inline.del.exec(l);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(l){let t=this.rules.inline.autolink.exec(l);if(t){let e,i;return t[2]==="@"?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(l){let t;if(t=this.rules.inline.url.exec(l)){let e,i;if(t[2]==="@")e=t[0],i="mailto:"+e;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(r!==t[0]);e=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(l){let t=this.rules.inline.text.exec(l);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},ir=class xf{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Sa,this.options.tokenizer=this.options.tokenizer||new W0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:en,block:R0.normal,inline:_l.normal};this.options.pedantic?(e.block=R0.pedantic,e.inline=_l.pedantic):this.options.gfm&&(e.block=R0.gfm,this.options.breaks?e.inline=_l.breaks:e.inline=_l.gfm),this.tokenizer.rules=e}static get rules(){return{block:R0,inline:_l}}static lex(t,e){return new xf(e).lex(t)}static lexInline(t,e){return new xf(e).inlineTokens(t)}lex(t){t=t.replace(en.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){for(this.options.pedantic&&(t=t.replace(en.tabCharGlobal,"    ").replace(en.spaceLine,""));t;){let r;if(this.options.extensions?.block?.some(o=>(r=o.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))continue;if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length);let o=e.at(-1);r.raw.length===1&&o!==void 0?o.raw+=`
`:e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.at(-1).src=o.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},e.push(r));continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}let a=t;if(this.options.extensions?.startBlock){let o=1/0,u=t.slice(1),h;this.options.extensions.startBlock.forEach(f=>{h=f.call({lexer:this},u),typeof h=="number"&&h>=0&&(o=Math.min(o,h))}),o<1/0&&o>=0&&(a=t.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){let o=e.at(-1);i&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(r),i=a.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length);let o=e.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(r);continue}if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i=t,r=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)u.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let a=!1,o="";for(;t;){a||(o=""),a=!1;let u;if(this.options.extensions?.inline?.some(f=>(u=f.call({lexer:this},t,e))?(t=t.substring(u.raw.length),e.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);let f=e.at(-1);u.type==="text"&&f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):e.push(u);continue}if(u=this.tokenizer.emStrong(t,i,o)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),e.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),e.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),e.push(u);continue}let h=t;if(this.options.extensions?.startInline){let f=1/0,m=t.slice(1),p;this.options.extensions.startInline.forEach(b=>{p=b.call({lexer:this},m),typeof p=="number"&&p>=0&&(f=Math.min(f,p))}),f<1/0&&f>=0&&(h=t.substring(0,f+1))}if(u=this.tokenizer.inlineText(h)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),a=!0;let f=e.at(-1);f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):e.push(u);continue}if(t){let f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return e}},Z0=class{options;parser;constructor(l){this.options=l||Sa}space(l){return""}code({text:l,lang:t,escaped:e}){let i=(t||"").match(en.notSpaceStart)?.[0],r=l.replace(en.endingNewline,"")+`
`;return i?'<pre><code class="language-'+pr(i)+'">'+(e?r:pr(r,!0))+`</code></pre>
`:"<pre><code>"+(e?r:pr(r,!0))+`</code></pre>
`}blockquote({tokens:l}){return`<blockquote>
${this.parser.parse(l)}</blockquote>
`}html({text:l}){return l}def(l){return""}heading({tokens:l,depth:t}){return`<h${t}>${this.parser.parseInline(l)}</h${t}>
`}hr(l){return`<hr>
`}list(l){let t=l.ordered,e=l.start,i="";for(let o=0;o<l.items.length;o++){let u=l.items[o];i+=this.listitem(u)}let r=t?"ol":"ul",a=t&&e!==1?' start="'+e+'"':"";return"<"+r+a+`>
`+i+"</"+r+`>
`}listitem(l){let t="";if(l.task){let e=this.checkbox({checked:!!l.checked});l.loose?l.tokens[0]?.type==="paragraph"?(l.tokens[0].text=e+" "+l.tokens[0].text,l.tokens[0].tokens&&l.tokens[0].tokens.length>0&&l.tokens[0].tokens[0].type==="text"&&(l.tokens[0].tokens[0].text=e+" "+pr(l.tokens[0].tokens[0].text),l.tokens[0].tokens[0].escaped=!0)):l.tokens.unshift({type:"text",raw:e+" ",text:e+" ",escaped:!0}):t+=e+" "}return t+=this.parser.parse(l.tokens,!!l.loose),`<li>${t}</li>
`}checkbox({checked:l}){return"<input "+(l?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:l}){return`<p>${this.parser.parseInline(l)}</p>
`}table(l){let t="",e="";for(let r=0;r<l.header.length;r++)e+=this.tablecell(l.header[r]);t+=this.tablerow({text:e});let i="";for(let r=0;r<l.rows.length;r++){let a=l.rows[r];e="";for(let o=0;o<a.length;o++)e+=this.tablecell(a[o]);i+=this.tablerow({text:e})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:l}){return`<tr>
${l}</tr>
`}tablecell(l){let t=this.parser.parseInline(l.tokens),e=l.header?"th":"td";return(l.align?`<${e} align="${l.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:l}){return`<strong>${this.parser.parseInline(l)}</strong>`}em({tokens:l}){return`<em>${this.parser.parseInline(l)}</em>`}codespan({text:l}){return`<code>${pr(l,!0)}</code>`}br(l){return"<br>"}del({tokens:l}){return`<del>${this.parser.parseInline(l)}</del>`}link({href:l,title:t,tokens:e}){let i=this.parser.parseInline(e),r=db(l);if(r===null)return i;l=r;let a='<a href="'+l+'"';return t&&(a+=' title="'+pr(t)+'"'),a+=">"+i+"</a>",a}image({href:l,title:t,text:e,tokens:i}){i&&(e=this.parser.parseInline(i,this.parser.textRenderer));let r=db(l);if(r===null)return pr(e);l=r;let a=`<img src="${l}" alt="${e}"`;return t&&(a+=` title="${pr(t)}"`),a+=">",a}text(l){return"tokens"in l&&l.tokens?this.parser.parseInline(l.tokens):"escaped"in l&&l.escaped?l.text:pr(l.text)}},rm=class{strong({text:l}){return l}em({text:l}){return l}codespan({text:l}){return l}del({text:l}){return l}html({text:l}){return l}text({text:l}){return l}link({text:l}){return""+l}image({text:l}){return""+l}br(){return""}},nr=class wf{options;renderer;textRenderer;constructor(t){this.options=t||Sa,this.options.renderer=this.options.renderer||new Z0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new rm}static parse(t,e){return new wf(e).parse(t)}static parseInline(t,e){return new wf(e).parseInline(t)}parse(t,e=!0){let i="";for(let r=0;r<t.length;r++){let a=t[r];if(this.options.extensions?.renderers?.[a.type]){let u=a,h=this.options.extensions.renderers[u.type].call({parser:this},u);if(h!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(u.type)){i+=h||"";continue}}let o=a;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"def":{i+=this.renderer.def(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let u=o,h=this.renderer.text(u);for(;r+1<t.length&&t[r+1].type==="text";)u=t[++r],h+=`
`+this.renderer.text(u);e?i+=this.renderer.paragraph({type:"paragraph",raw:h,text:h,tokens:[{type:"text",raw:h,text:h,escaped:!0}]}):i+=h;continue}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return i}parseInline(t,e=this.renderer){let i="";for(let r=0;r<t.length;r++){let a=t[r];if(this.options.extensions?.renderers?.[a.type]){let u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=u||"";continue}}let o=a;switch(o.type){case"escape":{i+=e.text(o);break}case"html":{i+=e.html(o);break}case"link":{i+=e.link(o);break}case"image":{i+=e.image(o);break}case"strong":{i+=e.strong(o);break}case"em":{i+=e.em(o);break}case"codespan":{i+=e.codespan(o);break}case"br":{i+=e.br(o);break}case"del":{i+=e.del(o);break}case"text":{i+=e.text(o);break}default:{let u='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return i}},Ml=class{options;block;constructor(t){this.options=t||Sa}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?ir.lex:ir.lexInline}provideParser(){return this.block?nr.parse:nr.parseInline}},V4=class{defaults=Wf();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=nr;Renderer=Z0;TextRenderer=rm;Lexer=ir;Tokenizer=W0;Hooks=Ml;constructor(...l){this.use(...l)}walkTokens(l,t){let e=[];for(let i of l)switch(e=e.concat(t.call(this,i)),i.type){case"table":{let r=i;for(let a of r.header)e=e.concat(this.walkTokens(a.tokens,t));for(let a of r.rows)for(let o of a)e=e.concat(this.walkTokens(o.tokens,t));break}case"list":{let r=i;e=e.concat(this.walkTokens(r.items,t));break}default:{let r=i;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(a=>{let o=r[a].flat(1/0);e=e.concat(this.walkTokens(o,t))}):r.tokens&&(e=e.concat(this.walkTokens(r.tokens,t)))}}return e}use(...l){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return l.forEach(e=>{let i={...e};if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let a=t.renderers[r.name];a?t.renderers[r.name]=function(...o){let u=r.renderer.apply(this,o);return u===!1&&(u=a.apply(this,o)),u}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=t[r.level];a?a.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),i.extensions=t),e.renderer){let r=this.defaults.renderer||new Z0(this.defaults);for(let a in e.renderer){if(!(a in r))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let o=a,u=e.renderer[o],h=r[o];r[o]=(...f)=>{let m=u.apply(r,f);return m===!1&&(m=h.apply(r,f)),m||""}}i.renderer=r}if(e.tokenizer){let r=this.defaults.tokenizer||new W0(this.defaults);for(let a in e.tokenizer){if(!(a in r))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let o=a,u=e.tokenizer[o],h=r[o];r[o]=(...f)=>{let m=u.apply(r,f);return m===!1&&(m=h.apply(r,f)),m}}i.tokenizer=r}if(e.hooks){let r=this.defaults.hooks||new Ml;for(let a in e.hooks){if(!(a in r))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let o=a,u=e.hooks[o],h=r[o];Ml.passThroughHooks.has(a)?r[o]=f=>{if(this.defaults.async&&Ml.passThroughHooksRespectAsync.has(a))return(async()=>{let p=await u.call(r,f);return h.call(r,p)})();let m=u.call(r,f);return h.call(r,m)}:r[o]=(...f)=>{if(this.defaults.async)return(async()=>{let p=await u.apply(r,f);return p===!1&&(p=await h.apply(r,f)),p})();let m=u.apply(r,f);return m===!1&&(m=h.apply(r,f)),m}}i.hooks=r}if(e.walkTokens){let r=this.defaults.walkTokens,a=e.walkTokens;i.walkTokens=function(o){let u=[];return u.push(a.call(this,o)),r&&(u=u.concat(r.call(this,o))),u}}this.defaults={...this.defaults,...i}}),this}setOptions(l){return this.defaults={...this.defaults,...l},this}lexer(l,t){return ir.lex(l,t??this.defaults)}parser(l,t){return nr.parse(l,t??this.defaults)}parseMarkdown(l){return(t,e)=>{let i={...e},r={...this.defaults,...i},a=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&i.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(r.hooks&&(r.hooks.options=r,r.hooks.block=l),r.async)return(async()=>{let o=r.hooks?await r.hooks.preprocess(t):t,u=await(r.hooks?await r.hooks.provideLexer():l?ir.lex:ir.lexInline)(o,r),h=r.hooks?await r.hooks.processAllTokens(u):u;r.walkTokens&&await Promise.all(this.walkTokens(h,r.walkTokens));let f=await(r.hooks?await r.hooks.provideParser():l?nr.parse:nr.parseInline)(h,r);return r.hooks?await r.hooks.postprocess(f):f})().catch(a);try{r.hooks&&(t=r.hooks.preprocess(t));let o=(r.hooks?r.hooks.provideLexer():l?ir.lex:ir.lexInline)(t,r);r.hooks&&(o=r.hooks.processAllTokens(o)),r.walkTokens&&this.walkTokens(o,r.walkTokens);let u=(r.hooks?r.hooks.provideParser():l?nr.parse:nr.parseInline)(o,r);return r.hooks&&(u=r.hooks.postprocess(u)),u}catch(o){return a(o)}}}onError(l,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,l){let i="<p>An error occurred:</p><pre>"+pr(e.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(e);throw e}}},ya=new V4;function Ue(l,t){return ya.parse(l,t)}Ue.options=Ue.setOptions=function(l){return ya.setOptions(l),Ue.defaults=ya.defaults,B4(Ue.defaults),Ue};Ue.getDefaults=Wf;Ue.defaults=Sa;Ue.use=function(...l){return ya.use(...l),Ue.defaults=ya.defaults,B4(Ue.defaults),Ue};Ue.walkTokens=function(l,t){return ya.walkTokens(l,t)};Ue.parseInline=ya.parseInline;Ue.Parser=nr;Ue.parser=nr.parse;Ue.Renderer=Z0;Ue.TextRenderer=rm;Ue.Lexer=ir;Ue.lexer=ir.lex;Ue.Tokenizer=W0;Ue.Hooks=Ml;Ue.parse=Ue;Ue.options;Ue.setOptions;Ue.use;Ue.walkTokens;Ue.parseInline;nr.parse;ir.lex;class xn{constructor(t,e,i){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=e,this.end=i}static range(t,e){return e?!t||!t.loc||!e.loc||t.loc.lexer!==e.loc.lexer?null:new xn(t.loc.lexer,t.loc.start,e.loc.end):t&&t.loc}}class Nn{constructor(t,e){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=e}range(t,e){return new Nn(e,xn.range(this,t))}}class Ot{constructor(t,e){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var i="KaTeX parse error: "+t,r,a,o=e&&e.loc;if(o&&o.start<=o.end){var u=o.lexer.input;r=o.start,a=o.end,r===u.length?i+=" at end of input: ":i+=" at position "+(r+1)+": ";var h=u.slice(r,a).replace(/[^]/g,"$&"),f;r>15?f=""+u.slice(r-15,r):f=u.slice(0,r);var m;a+15<u.length?m=u.slice(a,a+15)+"":m=u.slice(a),i+=f+h+m}var p=new Error(i);return p.name="ParseError",p.__proto__=Ot.prototype,p.position=r,r!=null&&a!=null&&(p.length=a-r),p.rawMessage=t,p}}Ot.prototype.__proto__=Error.prototype;var v8=function(t,e){return t===void 0?e:t},y8=/([A-Z])/g,x8=function(t){return t.replace(y8,"-$1").toLowerCase()},w8={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},S8=/[&><"']/g;function A8(l){return String(l).replace(S8,t=>w8[t])}var X4=function l(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?l(t.body[0]):t:t.type==="font"?l(t.body):t},_8=function(t){var e=X4(t);return e.type==="mathord"||e.type==="textord"||e.type==="atom"},E8=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},k8=function(t){var e=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return e?e[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(e[1])?null:e[1].toLowerCase():"_relative"},Be={deflt:v8,escape:A8,hyphenate:x8,getBaseElem:X4,isCharacterBox:_8,protocolFromUrl:k8},q0={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:l=>"#"+l},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(l,t)=>(t.push(l),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:l=>Math.max(0,l),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:l=>Math.max(0,l),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:l=>Math.max(0,l),cli:"-e, --max-expand <n>",cliProcessor:l=>l==="Infinity"?1/0:parseInt(l)},globalGroup:{type:"boolean",cli:!1}};function T8(l){if(l.default)return l.default;var t=l.type,e=Array.isArray(t)?t[0]:t;if(typeof e!="string")return e.enum[0];switch(e){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class sm{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var e in q0)if(q0.hasOwnProperty(e)){var i=q0[e];this[e]=t[e]!==void 0?i.processor?i.processor(t[e]):t[e]:T8(i)}}reportNonstrict(t,e,i){var r=this.strict;if(typeof r=="function"&&(r=r(t,e,i)),!(!r||r==="ignore")){if(r===!0||r==="error")throw new Ot("LaTeX-incompatible input and strict mode is set to 'error': "+(e+" ["+t+"]"),i);r==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(e+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+e+" ["+t+"]"))}}useStrictBehavior(t,e,i){var r=this.strict;if(typeof r=="function")try{r=r(t,e,i)}catch{r="error"}return!r||r==="ignore"?!1:r===!0||r==="error"?!0:r==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(e+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+r+"': "+e+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var e=Be.protocolFromUrl(t.url);if(e==null)return!1;t.protocol=e}var i=typeof this.trust=="function"?this.trust(t):this.trust;return!!i}}class Rs{constructor(t,e,i){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=e,this.cramped=i}sup(){return vr[C8[this.id]]}sub(){return vr[M8[this.id]]}fracNum(){return vr[R8[this.id]]}fracDen(){return vr[D8[this.id]]}cramp(){return vr[N8[this.id]]}text(){return vr[O8[this.id]]}isTight(){return this.size>=2}}var am=0,Q0=1,bo=2,Zr=3,ql=4,Yn=5,xo=6,nn=7,vr=[new Rs(am,0,!1),new Rs(Q0,0,!0),new Rs(bo,1,!1),new Rs(Zr,1,!0),new Rs(ql,2,!1),new Rs(Yn,2,!0),new Rs(xo,3,!1),new Rs(nn,3,!0)],C8=[ql,Yn,ql,Yn,xo,nn,xo,nn],M8=[Yn,Yn,Yn,Yn,nn,nn,nn,nn],R8=[bo,Zr,ql,Yn,xo,nn,xo,nn],D8=[Zr,Zr,Yn,Yn,nn,nn,nn,nn],N8=[Q0,Q0,Zr,Zr,Yn,Yn,nn,nn],O8=[am,Q0,bo,Zr,bo,Zr,bo,Zr],oe={DISPLAY:vr[am],TEXT:vr[bo],SCRIPT:vr[ql],SCRIPTSCRIPT:vr[xo]},Sf=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function z8(l){for(var t=0;t<Sf.length;t++)for(var e=Sf[t],i=0;i<e.blocks.length;i++){var r=e.blocks[i];if(l>=r[0]&&l<=r[1])return e.name}return null}var $0=[];Sf.forEach(l=>l.blocks.forEach(t=>$0.push(...t)));function K4(l){for(var t=0;t<$0.length;t+=2)if(l>=$0[t]&&l<=$0[t+1])return!0;return!1}var so=80,L8=function(t,e){return"M95,"+(622+t+e)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},B8=function(t,e){return"M263,"+(601+t+e)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},I8=function(t,e){return"M983 "+(10+t+e)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+e+"h400000v"+(40+t)+"h-400000z"},F8=function(t,e){return"M424,"+(2398+t+e)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+e+`
h400000v`+(40+t)+"h-400000z"},P8=function(t,e){return"M473,"+(2713+t+e)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+e+"h400000v"+(40+t)+"H1017.7z"},U8=function(t){var e=t/2;return"M400000 "+t+" H0 L"+e+" 0 l65 45 L145 "+(t-80)+" H400000z"},j8=function(t,e,i){var r=i-54-e-t;return"M702 "+(t+e)+"H400000"+(40+t)+`
H742v`+r+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+e+"H400000v"+(40+t)+"H742z"},H8=function(t,e,i){e=1e3*e;var r="";switch(t){case"sqrtMain":r=L8(e,so);break;case"sqrtSize1":r=B8(e,so);break;case"sqrtSize2":r=I8(e,so);break;case"sqrtSize3":r=F8(e,so);break;case"sqrtSize4":r=P8(e,so);break;case"sqrtTall":r=j8(e,so,i)}return r},G8=function(t,e){switch(t){case"":return"M291 0 H417 V"+e+" H291z M291 0 H417 V"+e+" H291z";case"":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z";case"":return"M145 0 H188 V"+e+" H145z M145 0 H188 V"+e+" H145z"+("M367 0 H410 V"+e+" H367z M367 0 H410 V"+e+" H367z");case"":return"M457 0 H583 V"+e+" H457z M457 0 H583 V"+e+" H457z";case"":return"M319 0 H403 V"+e+" H319z M319 0 H403 V"+e+" H319z";case"":return"M263 0 H347 V"+e+" H263z M263 0 H347 V"+e+" H263z";case"":return"M384 0 H504 V"+e+" H384z M384 0 H504 V"+e+" H384z";case"":return"M312 0 H355 V"+e+" H312z M312 0 H355 V"+e+" H312z";case"":return"M257 0 H300 V"+e+" H257z M257 0 H300 V"+e+" H257z"+("M478 0 H521 V"+e+" H478z M478 0 H521 V"+e+" H478z");default:return""}},pb={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},q8=function(t,e){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+e+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+e+" v1759 h84z";case"vert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+" v585 h43z";case"doublevert":return"M145 15 v585 v"+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+e+` v585 h43z
M367 15 v585 v`+e+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-e+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+e+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+e+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+e+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+e+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+e+` v602 h84z
M403 1759 V0 H319 V1759 v`+e+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+e+` v602 h84z
M347 1759 V0 h-84 V1759 v`+e+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(e+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(e+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(e+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(e+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class ec{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t}toMarkup(){for(var t="",e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t}toText(){var t=e=>e.toText();return this.children.map(t).join("")}}var yr={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},D0={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},gb={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function $8(l,t){yr[l]=t}function om(l,t,e){if(!yr[t])throw new Error("Font metrics not found for font: "+t+".");var i=l.charCodeAt(0),r=yr[t][i];if(!r&&l[0]in gb&&(i=gb[l[0]].charCodeAt(0),r=yr[t][i]),!r&&e==="text"&&K4(i)&&(r=yr[t][77]),r)return{depth:r[0],height:r[1],italic:r[2],skew:r[3],width:r[4]}}var qd={};function Y8(l){var t;if(l>=5?t=0:l>=3?t=1:t=2,!qd[t]){var e=qd[t]={cssEmPerMu:D0.quad[t]/18};for(var i in D0)D0.hasOwnProperty(i)&&(e[i]=D0[i][t])}return qd[t]}var V8=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],bb=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],vb=function(t,e){return e.size<2?t:V8[t-1][e.size-1]};class Kr{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||Kr.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=bb[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var e={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return new Kr(e)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:vb(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:bb[t-1]})}havingBaseStyle(t){t=t||this.style.text();var e=vb(Kr.BASESIZE,t);return this.size===e&&this.textSize===Kr.BASESIZE&&this.style===t?this:this.extend({style:t,size:e})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Kr.BASESIZE?["sizing","reset-size"+this.size,"size"+Kr.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Y8(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Kr.BASESIZE=6;var Af={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},X8={ex:!0,em:!0,mu:!0},W4=function(t){return typeof t!="string"&&(t=t.unit),t in Af||t in X8||t==="ex"},ci=function(t,e){var i;if(t.unit in Af)i=Af[t.unit]/e.fontMetrics().ptPerEm/e.sizeMultiplier;else if(t.unit==="mu")i=e.fontMetrics().cssEmPerMu;else{var r;if(e.style.isTight()?r=e.havingStyle(e.style.text()):r=e,t.unit==="ex")i=r.fontMetrics().xHeight;else if(t.unit==="em")i=r.fontMetrics().quad;else throw new Ot("Invalid unit: '"+t.unit+"'");r!==e&&(i*=r.sizeMultiplier/e.sizeMultiplier)}return Math.min(t.number*i,e.maxSize)},Bt=function(t){return+t.toFixed(4)+"em"},Ps=function(t){return t.filter(e=>e).join(" ")},Z4=function(t,e,i){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=i||{},e){e.style.isTight()&&this.classes.push("mtight");var r=e.getColor();r&&(this.style.color=r)}},Q4=function(t){var e=document.createElement(t);e.className=Ps(this.classes);for(var i in this.style)this.style.hasOwnProperty(i)&&(e.style[i]=this.style[i]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&e.setAttribute(r,this.attributes[r]);for(var a=0;a<this.children.length;a++)e.appendChild(this.children[a].toNode());return e},K8=/[\s"'>/=\x00-\x1f]/,J4=function(t){var e="<"+t;this.classes.length&&(e+=' class="'+Be.escape(Ps(this.classes))+'"');var i="";for(var r in this.style)this.style.hasOwnProperty(r)&&(i+=Be.hyphenate(r)+":"+this.style[r]+";");i&&(e+=' style="'+Be.escape(i)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(K8.test(a))throw new Ot("Invalid attribute name '"+a+"'");e+=" "+a+'="'+Be.escape(this.attributes[a])+'"'}e+=">";for(var o=0;o<this.children.length;o++)e+=this.children[o].toMarkup();return e+="</"+t+">",e};class ic{constructor(t,e,i,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Z4.call(this,t,i,r),this.children=e||[]}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return this.classes.includes(t)}toNode(){return Q4.call(this,"span")}toMarkup(){return J4.call(this,"span")}}class lm{constructor(t,e,i,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Z4.call(this,e,r),this.children=i||[],this.setAttribute("href",t)}setAttribute(t,e){this.attributes[t]=e}hasClass(t){return this.classes.includes(t)}toNode(){return Q4.call(this,"a")}toMarkup(){return J4.call(this,"a")}}class W8{constructor(t,e,i){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=e,this.src=t,this.classes=["mord"],this.style=i}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var e in this.style)this.style.hasOwnProperty(e)&&(t.style[e]=this.style[e]);return t}toMarkup(){var t='<img src="'+Be.escape(this.src)+'"'+(' alt="'+Be.escape(this.alt)+'"'),e="";for(var i in this.style)this.style.hasOwnProperty(i)&&(e+=Be.hyphenate(i)+":"+this.style[i]+";");return e&&(t+=' style="'+Be.escape(e)+'"'),t+="'/>",t}}var Z8={:"",:"",:"",:""};class Xn{constructor(t,e,i,r,a,o,u,h){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=e||0,this.depth=i||0,this.italic=r||0,this.skew=a||0,this.width=o||0,this.classes=u||[],this.style=h||{},this.maxFontSize=0;var f=z8(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[]/.test(this.text)&&(this.text=Z8[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),e=null;this.italic>0&&(e=document.createElement("span"),e.style.marginRight=Bt(this.italic)),this.classes.length>0&&(e=e||document.createElement("span"),e.className=Ps(this.classes));for(var i in this.style)this.style.hasOwnProperty(i)&&(e=e||document.createElement("span"),e.style[i]=this.style[i]);return e?(e.appendChild(t),e):t}toMarkup(){var t=!1,e="<span";this.classes.length&&(t=!0,e+=' class="',e+=Be.escape(Ps(this.classes)),e+='"');var i="";this.italic>0&&(i+="margin-right:"+this.italic+"em;");for(var r in this.style)this.style.hasOwnProperty(r)&&(i+=Be.hyphenate(r)+":"+this.style[r]+";");i&&(t=!0,e+=' style="'+Be.escape(i)+'"');var a=Be.escape(this.text);return t?(e+=">",e+=a,e+="</span>",e):a}}class Jr{constructor(t,e){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=e||{}}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&e.setAttribute(i,this.attributes[i]);for(var r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+Be.escape(this.attributes[e])+'"');t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</svg>",t}}class Us{constructor(t,e){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=e}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",pb[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+Be.escape(this.alternate)+'"/>':'<path d="'+Be.escape(pb[this.pathName])+'"/>'}}class _f{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"line");for(var i in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,i)&&e.setAttribute(i,this.attributes[i]);return e}toMarkup(){var t="<line";for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="'+Be.escape(this.attributes[e])+'"');return t+="/>",t}}function yb(l){if(l instanceof Xn)return l;throw new Error("Expected symbolNode but got "+String(l)+".")}function Q8(l){if(l instanceof ic)return l;throw new Error("Expected span<HtmlDomNode> but got "+String(l)+".")}var J8={bin:1,close:1,inner:1,open:1,punct:1,rel:1},tx={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Qe={math:{},text:{}};function S(l,t,e,i,r,a){Qe[l][r]={font:t,group:e,replace:i},a&&i&&(Qe[l][i]=Qe[l][r])}var E="math",Mt="text",O="main",Y="ams",ai="accent-token",Ht="bin",sn="close",wo="inner",ae="mathord",Ci="op-token",On="open",fu="punct",V="rel",is="spacing",J="textord";S(E,O,V,"","\\equiv",!0);S(E,O,V,"","\\prec",!0);S(E,O,V,"","\\succ",!0);S(E,O,V,"","\\sim",!0);S(E,O,V,"","\\perp");S(E,O,V,"","\\preceq",!0);S(E,O,V,"","\\succeq",!0);S(E,O,V,"","\\simeq",!0);S(E,O,V,"","\\mid",!0);S(E,O,V,"","\\ll",!0);S(E,O,V,"","\\gg",!0);S(E,O,V,"","\\asymp",!0);S(E,O,V,"","\\parallel");S(E,O,V,"","\\bowtie",!0);S(E,O,V,"","\\smile",!0);S(E,O,V,"","\\sqsubseteq",!0);S(E,O,V,"","\\sqsupseteq",!0);S(E,O,V,"","\\doteq",!0);S(E,O,V,"","\\frown",!0);S(E,O,V,"","\\ni",!0);S(E,O,V,"","\\propto",!0);S(E,O,V,"","\\vdash",!0);S(E,O,V,"","\\dashv",!0);S(E,O,V,"","\\owns");S(E,O,fu,".","\\ldotp");S(E,O,fu,"","\\cdotp");S(E,O,J,"#","\\#");S(Mt,O,J,"#","\\#");S(E,O,J,"&","\\&");S(Mt,O,J,"&","\\&");S(E,O,J,"","\\aleph",!0);S(E,O,J,"","\\forall",!0);S(E,O,J,"","\\hbar",!0);S(E,O,J,"","\\exists",!0);S(E,O,J,"","\\nabla",!0);S(E,O,J,"","\\flat",!0);S(E,O,J,"","\\ell",!0);S(E,O,J,"","\\natural",!0);S(E,O,J,"","\\clubsuit",!0);S(E,O,J,"","\\wp",!0);S(E,O,J,"","\\sharp",!0);S(E,O,J,"","\\diamondsuit",!0);S(E,O,J,"","\\Re",!0);S(E,O,J,"","\\heartsuit",!0);S(E,O,J,"","\\Im",!0);S(E,O,J,"","\\spadesuit",!0);S(E,O,J,"","\\S",!0);S(Mt,O,J,"","\\S");S(E,O,J,"","\\P",!0);S(Mt,O,J,"","\\P");S(E,O,J,"","\\dag");S(Mt,O,J,"","\\dag");S(Mt,O,J,"","\\textdagger");S(E,O,J,"","\\ddag");S(Mt,O,J,"","\\ddag");S(Mt,O,J,"","\\textdaggerdbl");S(E,O,sn,"","\\rmoustache",!0);S(E,O,On,"","\\lmoustache",!0);S(E,O,sn,"","\\rgroup",!0);S(E,O,On,"","\\lgroup",!0);S(E,O,Ht,"","\\mp",!0);S(E,O,Ht,"","\\ominus",!0);S(E,O,Ht,"","\\uplus",!0);S(E,O,Ht,"","\\sqcap",!0);S(E,O,Ht,"","\\ast");S(E,O,Ht,"","\\sqcup",!0);S(E,O,Ht,"","\\bigcirc",!0);S(E,O,Ht,"","\\bullet",!0);S(E,O,Ht,"","\\ddagger");S(E,O,Ht,"","\\wr",!0);S(E,O,Ht,"","\\amalg");S(E,O,Ht,"&","\\And");S(E,O,V,"","\\longleftarrow",!0);S(E,O,V,"","\\Leftarrow",!0);S(E,O,V,"","\\Longleftarrow",!0);S(E,O,V,"","\\longrightarrow",!0);S(E,O,V,"","\\Rightarrow",!0);S(E,O,V,"","\\Longrightarrow",!0);S(E,O,V,"","\\leftrightarrow",!0);S(E,O,V,"","\\longleftrightarrow",!0);S(E,O,V,"","\\Leftrightarrow",!0);S(E,O,V,"","\\Longleftrightarrow",!0);S(E,O,V,"","\\mapsto",!0);S(E,O,V,"","\\longmapsto",!0);S(E,O,V,"","\\nearrow",!0);S(E,O,V,"","\\hookleftarrow",!0);S(E,O,V,"","\\hookrightarrow",!0);S(E,O,V,"","\\searrow",!0);S(E,O,V,"","\\leftharpoonup",!0);S(E,O,V,"","\\rightharpoonup",!0);S(E,O,V,"","\\swarrow",!0);S(E,O,V,"","\\leftharpoondown",!0);S(E,O,V,"","\\rightharpoondown",!0);S(E,O,V,"","\\nwarrow",!0);S(E,O,V,"","\\rightleftharpoons",!0);S(E,Y,V,"","\\nless",!0);S(E,Y,V,"","\\@nleqslant");S(E,Y,V,"","\\@nleqq");S(E,Y,V,"","\\lneq",!0);S(E,Y,V,"","\\lneqq",!0);S(E,Y,V,"","\\@lvertneqq");S(E,Y,V,"","\\lnsim",!0);S(E,Y,V,"","\\lnapprox",!0);S(E,Y,V,"","\\nprec",!0);S(E,Y,V,"","\\npreceq",!0);S(E,Y,V,"","\\precnsim",!0);S(E,Y,V,"","\\precnapprox",!0);S(E,Y,V,"","\\nsim",!0);S(E,Y,V,"","\\@nshortmid");S(E,Y,V,"","\\nmid",!0);S(E,Y,V,"","\\nvdash",!0);S(E,Y,V,"","\\nvDash",!0);S(E,Y,V,"","\\ntriangleleft");S(E,Y,V,"","\\ntrianglelefteq",!0);S(E,Y,V,"","\\subsetneq",!0);S(E,Y,V,"","\\@varsubsetneq");S(E,Y,V,"","\\subsetneqq",!0);S(E,Y,V,"","\\@varsubsetneqq");S(E,Y,V,"","\\ngtr",!0);S(E,Y,V,"","\\@ngeqslant");S(E,Y,V,"","\\@ngeqq");S(E,Y,V,"","\\gneq",!0);S(E,Y,V,"","\\gneqq",!0);S(E,Y,V,"","\\@gvertneqq");S(E,Y,V,"","\\gnsim",!0);S(E,Y,V,"","\\gnapprox",!0);S(E,Y,V,"","\\nsucc",!0);S(E,Y,V,"","\\nsucceq",!0);S(E,Y,V,"","\\succnsim",!0);S(E,Y,V,"","\\succnapprox",!0);S(E,Y,V,"","\\ncong",!0);S(E,Y,V,"","\\@nshortparallel");S(E,Y,V,"","\\nparallel",!0);S(E,Y,V,"","\\nVDash",!0);S(E,Y,V,"","\\ntriangleright");S(E,Y,V,"","\\ntrianglerighteq",!0);S(E,Y,V,"","\\@nsupseteqq");S(E,Y,V,"","\\supsetneq",!0);S(E,Y,V,"","\\@varsupsetneq");S(E,Y,V,"","\\supsetneqq",!0);S(E,Y,V,"","\\@varsupsetneqq");S(E,Y,V,"","\\nVdash",!0);S(E,Y,V,"","\\precneqq",!0);S(E,Y,V,"","\\succneqq",!0);S(E,Y,V,"","\\@nsubseteqq");S(E,Y,Ht,"","\\unlhd");S(E,Y,Ht,"","\\unrhd");S(E,Y,V,"","\\nleftarrow",!0);S(E,Y,V,"","\\nrightarrow",!0);S(E,Y,V,"","\\nLeftarrow",!0);S(E,Y,V,"","\\nRightarrow",!0);S(E,Y,V,"","\\nleftrightarrow",!0);S(E,Y,V,"","\\nLeftrightarrow",!0);S(E,Y,V,"","\\vartriangle");S(E,Y,J,"","\\hslash");S(E,Y,J,"","\\triangledown");S(E,Y,J,"","\\lozenge");S(E,Y,J,"","\\circledS");S(E,Y,J,"","\\circledR");S(Mt,Y,J,"","\\circledR");S(E,Y,J,"","\\measuredangle",!0);S(E,Y,J,"","\\nexists");S(E,Y,J,"","\\mho");S(E,Y,J,"","\\Finv",!0);S(E,Y,J,"","\\Game",!0);S(E,Y,J,"","\\backprime");S(E,Y,J,"","\\blacktriangle");S(E,Y,J,"","\\blacktriangledown");S(E,Y,J,"","\\blacksquare");S(E,Y,J,"","\\blacklozenge");S(E,Y,J,"","\\bigstar");S(E,Y,J,"","\\sphericalangle",!0);S(E,Y,J,"","\\complement",!0);S(E,Y,J,"","\\eth",!0);S(Mt,O,J,"","");S(E,Y,J,"","\\diagup");S(E,Y,J,"","\\diagdown");S(E,Y,J,"","\\square");S(E,Y,J,"","\\Box");S(E,Y,J,"","\\Diamond");S(E,Y,J,"","\\yen",!0);S(Mt,Y,J,"","\\yen",!0);S(E,Y,J,"","\\checkmark",!0);S(Mt,Y,J,"","\\checkmark");S(E,Y,J,"","\\beth",!0);S(E,Y,J,"","\\daleth",!0);S(E,Y,J,"","\\gimel",!0);S(E,Y,J,"","\\digamma",!0);S(E,Y,J,"","\\varkappa");S(E,Y,On,"","\\@ulcorner",!0);S(E,Y,sn,"","\\@urcorner",!0);S(E,Y,On,"","\\@llcorner",!0);S(E,Y,sn,"","\\@lrcorner",!0);S(E,Y,V,"","\\leqq",!0);S(E,Y,V,"","\\leqslant",!0);S(E,Y,V,"","\\eqslantless",!0);S(E,Y,V,"","\\lesssim",!0);S(E,Y,V,"","\\lessapprox",!0);S(E,Y,V,"","\\approxeq",!0);S(E,Y,Ht,"","\\lessdot");S(E,Y,V,"","\\lll",!0);S(E,Y,V,"","\\lessgtr",!0);S(E,Y,V,"","\\lesseqgtr",!0);S(E,Y,V,"","\\lesseqqgtr",!0);S(E,Y,V,"","\\doteqdot");S(E,Y,V,"","\\risingdotseq",!0);S(E,Y,V,"","\\fallingdotseq",!0);S(E,Y,V,"","\\backsim",!0);S(E,Y,V,"","\\backsimeq",!0);S(E,Y,V,"","\\subseteqq",!0);S(E,Y,V,"","\\Subset",!0);S(E,Y,V,"","\\sqsubset",!0);S(E,Y,V,"","\\preccurlyeq",!0);S(E,Y,V,"","\\curlyeqprec",!0);S(E,Y,V,"","\\precsim",!0);S(E,Y,V,"","\\precapprox",!0);S(E,Y,V,"","\\vartriangleleft");S(E,Y,V,"","\\trianglelefteq");S(E,Y,V,"","\\vDash",!0);S(E,Y,V,"","\\Vvdash",!0);S(E,Y,V,"","\\smallsmile");S(E,Y,V,"","\\smallfrown");S(E,Y,V,"","\\bumpeq",!0);S(E,Y,V,"","\\Bumpeq",!0);S(E,Y,V,"","\\geqq",!0);S(E,Y,V,"","\\geqslant",!0);S(E,Y,V,"","\\eqslantgtr",!0);S(E,Y,V,"","\\gtrsim",!0);S(E,Y,V,"","\\gtrapprox",!0);S(E,Y,Ht,"","\\gtrdot");S(E,Y,V,"","\\ggg",!0);S(E,Y,V,"","\\gtrless",!0);S(E,Y,V,"","\\gtreqless",!0);S(E,Y,V,"","\\gtreqqless",!0);S(E,Y,V,"","\\eqcirc",!0);S(E,Y,V,"","\\circeq",!0);S(E,Y,V,"","\\triangleq",!0);S(E,Y,V,"","\\thicksim");S(E,Y,V,"","\\thickapprox");S(E,Y,V,"","\\supseteqq",!0);S(E,Y,V,"","\\Supset",!0);S(E,Y,V,"","\\sqsupset",!0);S(E,Y,V,"","\\succcurlyeq",!0);S(E,Y,V,"","\\curlyeqsucc",!0);S(E,Y,V,"","\\succsim",!0);S(E,Y,V,"","\\succapprox",!0);S(E,Y,V,"","\\vartriangleright");S(E,Y,V,"","\\trianglerighteq");S(E,Y,V,"","\\Vdash",!0);S(E,Y,V,"","\\shortmid");S(E,Y,V,"","\\shortparallel");S(E,Y,V,"","\\between",!0);S(E,Y,V,"","\\pitchfork",!0);S(E,Y,V,"","\\varpropto");S(E,Y,V,"","\\blacktriangleleft");S(E,Y,V,"","\\therefore",!0);S(E,Y,V,"","\\backepsilon");S(E,Y,V,"","\\blacktriangleright");S(E,Y,V,"","\\because",!0);S(E,Y,V,"","\\llless");S(E,Y,V,"","\\gggtr");S(E,Y,Ht,"","\\lhd");S(E,Y,Ht,"","\\rhd");S(E,Y,V,"","\\eqsim",!0);S(E,O,V,"","\\Join");S(E,Y,V,"","\\Doteq",!0);S(E,Y,Ht,"","\\dotplus",!0);S(E,Y,Ht,"","\\smallsetminus");S(E,Y,Ht,"","\\Cap",!0);S(E,Y,Ht,"","\\Cup",!0);S(E,Y,Ht,"","\\doublebarwedge",!0);S(E,Y,Ht,"","\\boxminus",!0);S(E,Y,Ht,"","\\boxplus",!0);S(E,Y,Ht,"","\\divideontimes",!0);S(E,Y,Ht,"","\\ltimes",!0);S(E,Y,Ht,"","\\rtimes",!0);S(E,Y,Ht,"","\\leftthreetimes",!0);S(E,Y,Ht,"","\\rightthreetimes",!0);S(E,Y,Ht,"","\\curlywedge",!0);S(E,Y,Ht,"","\\curlyvee",!0);S(E,Y,Ht,"","\\circleddash",!0);S(E,Y,Ht,"","\\circledast",!0);S(E,Y,Ht,"","\\centerdot");S(E,Y,Ht,"","\\intercal",!0);S(E,Y,Ht,"","\\doublecap");S(E,Y,Ht,"","\\doublecup");S(E,Y,Ht,"","\\boxtimes",!0);S(E,Y,V,"","\\dashrightarrow",!0);S(E,Y,V,"","\\dashleftarrow",!0);S(E,Y,V,"","\\leftleftarrows",!0);S(E,Y,V,"","\\leftrightarrows",!0);S(E,Y,V,"","\\Lleftarrow",!0);S(E,Y,V,"","\\twoheadleftarrow",!0);S(E,Y,V,"","\\leftarrowtail",!0);S(E,Y,V,"","\\looparrowleft",!0);S(E,Y,V,"","\\leftrightharpoons",!0);S(E,Y,V,"","\\curvearrowleft",!0);S(E,Y,V,"","\\circlearrowleft",!0);S(E,Y,V,"","\\Lsh",!0);S(E,Y,V,"","\\upuparrows",!0);S(E,Y,V,"","\\upharpoonleft",!0);S(E,Y,V,"","\\downharpoonleft",!0);S(E,O,V,"","\\origof",!0);S(E,O,V,"","\\imageof",!0);S(E,Y,V,"","\\multimap",!0);S(E,Y,V,"","\\leftrightsquigarrow",!0);S(E,Y,V,"","\\rightrightarrows",!0);S(E,Y,V,"","\\rightleftarrows",!0);S(E,Y,V,"","\\twoheadrightarrow",!0);S(E,Y,V,"","\\rightarrowtail",!0);S(E,Y,V,"","\\looparrowright",!0);S(E,Y,V,"","\\curvearrowright",!0);S(E,Y,V,"","\\circlearrowright",!0);S(E,Y,V,"","\\Rsh",!0);S(E,Y,V,"","\\downdownarrows",!0);S(E,Y,V,"","\\upharpoonright",!0);S(E,Y,V,"","\\downharpoonright",!0);S(E,Y,V,"","\\rightsquigarrow",!0);S(E,Y,V,"","\\leadsto");S(E,Y,V,"","\\Rrightarrow",!0);S(E,Y,V,"","\\restriction");S(E,O,J,"","`");S(E,O,J,"$","\\$");S(Mt,O,J,"$","\\$");S(Mt,O,J,"$","\\textdollar");S(E,O,J,"%","\\%");S(Mt,O,J,"%","\\%");S(E,O,J,"_","\\_");S(Mt,O,J,"_","\\_");S(Mt,O,J,"_","\\textunderscore");S(E,O,J,"","\\angle",!0);S(E,O,J,"","\\infty",!0);S(E,O,J,"","\\prime");S(E,O,J,"","\\triangle");S(E,O,J,"","\\Gamma",!0);S(E,O,J,"","\\Delta",!0);S(E,O,J,"","\\Theta",!0);S(E,O,J,"","\\Lambda",!0);S(E,O,J,"","\\Xi",!0);S(E,O,J,"","\\Pi",!0);S(E,O,J,"","\\Sigma",!0);S(E,O,J,"","\\Upsilon",!0);S(E,O,J,"","\\Phi",!0);S(E,O,J,"","\\Psi",!0);S(E,O,J,"","\\Omega",!0);S(E,O,J,"A","");S(E,O,J,"B","");S(E,O,J,"E","");S(E,O,J,"Z","");S(E,O,J,"H","");S(E,O,J,"I","");S(E,O,J,"K","");S(E,O,J,"M","");S(E,O,J,"N","");S(E,O,J,"O","");S(E,O,J,"P","");S(E,O,J,"T","");S(E,O,J,"X","");S(E,O,J,"","\\neg",!0);S(E,O,J,"","\\lnot");S(E,O,J,"","\\top");S(E,O,J,"","\\bot");S(E,O,J,"","\\emptyset");S(E,Y,J,"","\\varnothing");S(E,O,ae,"","\\alpha",!0);S(E,O,ae,"","\\beta",!0);S(E,O,ae,"","\\gamma",!0);S(E,O,ae,"","\\delta",!0);S(E,O,ae,"","\\epsilon",!0);S(E,O,ae,"","\\zeta",!0);S(E,O,ae,"","\\eta",!0);S(E,O,ae,"","\\theta",!0);S(E,O,ae,"","\\iota",!0);S(E,O,ae,"","\\kappa",!0);S(E,O,ae,"","\\lambda",!0);S(E,O,ae,"","\\mu",!0);S(E,O,ae,"","\\nu",!0);S(E,O,ae,"","\\xi",!0);S(E,O,ae,"","\\omicron",!0);S(E,O,ae,"","\\pi",!0);S(E,O,ae,"","\\rho",!0);S(E,O,ae,"","\\sigma",!0);S(E,O,ae,"","\\tau",!0);S(E,O,ae,"","\\upsilon",!0);S(E,O,ae,"","\\phi",!0);S(E,O,ae,"","\\chi",!0);S(E,O,ae,"","\\psi",!0);S(E,O,ae,"","\\omega",!0);S(E,O,ae,"","\\varepsilon",!0);S(E,O,ae,"","\\vartheta",!0);S(E,O,ae,"","\\varpi",!0);S(E,O,ae,"","\\varrho",!0);S(E,O,ae,"","\\varsigma",!0);S(E,O,ae,"","\\varphi",!0);S(E,O,Ht,"","*",!0);S(E,O,Ht,"+","+");S(E,O,Ht,"","-",!0);S(E,O,Ht,"","\\cdot",!0);S(E,O,Ht,"","\\circ",!0);S(E,O,Ht,"","\\div",!0);S(E,O,Ht,"","\\pm",!0);S(E,O,Ht,"","\\times",!0);S(E,O,Ht,"","\\cap",!0);S(E,O,Ht,"","\\cup",!0);S(E,O,Ht,"","\\setminus",!0);S(E,O,Ht,"","\\land");S(E,O,Ht,"","\\lor");S(E,O,Ht,"","\\wedge",!0);S(E,O,Ht,"","\\vee",!0);S(E,O,J,"","\\surd");S(E,O,On,"","\\langle",!0);S(E,O,On,"","\\lvert");S(E,O,On,"","\\lVert");S(E,O,sn,"?","?");S(E,O,sn,"!","!");S(E,O,sn,"","\\rangle",!0);S(E,O,sn,"","\\rvert");S(E,O,sn,"","\\rVert");S(E,O,V,"=","=");S(E,O,V,":",":");S(E,O,V,"","\\approx",!0);S(E,O,V,"","\\cong",!0);S(E,O,V,"","\\ge");S(E,O,V,"","\\geq",!0);S(E,O,V,"","\\gets");S(E,O,V,">","\\gt",!0);S(E,O,V,"","\\in",!0);S(E,O,V,"","\\@not");S(E,O,V,"","\\subset",!0);S(E,O,V,"","\\supset",!0);S(E,O,V,"","\\subseteq",!0);S(E,O,V,"","\\supseteq",!0);S(E,Y,V,"","\\nsubseteq",!0);S(E,Y,V,"","\\nsupseteq",!0);S(E,O,V,"","\\models");S(E,O,V,"","\\leftarrow",!0);S(E,O,V,"","\\le");S(E,O,V,"","\\leq",!0);S(E,O,V,"<","\\lt",!0);S(E,O,V,"","\\rightarrow",!0);S(E,O,V,"","\\to");S(E,Y,V,"","\\ngeq",!0);S(E,Y,V,"","\\nleq",!0);S(E,O,is,"","\\ ");S(E,O,is,"","\\space");S(E,O,is,"","\\nobreakspace");S(Mt,O,is,"","\\ ");S(Mt,O,is,""," ");S(Mt,O,is,"","\\space");S(Mt,O,is,"","\\nobreakspace");S(E,O,is,null,"\\nobreak");S(E,O,is,null,"\\allowbreak");S(E,O,fu,",",",");S(E,O,fu,";",";");S(E,Y,Ht,"","\\barwedge",!0);S(E,Y,Ht,"","\\veebar",!0);S(E,O,Ht,"","\\odot",!0);S(E,O,Ht,"","\\oplus",!0);S(E,O,Ht,"","\\otimes",!0);S(E,O,J,"","\\partial",!0);S(E,O,Ht,"","\\oslash",!0);S(E,Y,Ht,"","\\circledcirc",!0);S(E,Y,Ht,"","\\boxdot",!0);S(E,O,Ht,"","\\bigtriangleup");S(E,O,Ht,"","\\bigtriangledown");S(E,O,Ht,"","\\dagger");S(E,O,Ht,"","\\diamond");S(E,O,Ht,"","\\star");S(E,O,Ht,"","\\triangleleft");S(E,O,Ht,"","\\triangleright");S(E,O,On,"{","\\{");S(Mt,O,J,"{","\\{");S(Mt,O,J,"{","\\textbraceleft");S(E,O,sn,"}","\\}");S(Mt,O,J,"}","\\}");S(Mt,O,J,"}","\\textbraceright");S(E,O,On,"{","\\lbrace");S(E,O,sn,"}","\\rbrace");S(E,O,On,"[","\\lbrack",!0);S(Mt,O,J,"[","\\lbrack",!0);S(E,O,sn,"]","\\rbrack",!0);S(Mt,O,J,"]","\\rbrack",!0);S(E,O,On,"(","\\lparen",!0);S(E,O,sn,")","\\rparen",!0);S(Mt,O,J,"<","\\textless",!0);S(Mt,O,J,">","\\textgreater",!0);S(E,O,On,"","\\lfloor",!0);S(E,O,sn,"","\\rfloor",!0);S(E,O,On,"","\\lceil",!0);S(E,O,sn,"","\\rceil",!0);S(E,O,J,"\\","\\backslash");S(E,O,J,"","|");S(E,O,J,"","\\vert");S(Mt,O,J,"|","\\textbar",!0);S(E,O,J,"","\\|");S(E,O,J,"","\\Vert");S(Mt,O,J,"","\\textbardbl");S(Mt,O,J,"~","\\textasciitilde");S(Mt,O,J,"\\","\\textbackslash");S(Mt,O,J,"^","\\textasciicircum");S(E,O,V,"","\\uparrow",!0);S(E,O,V,"","\\Uparrow",!0);S(E,O,V,"","\\downarrow",!0);S(E,O,V,"","\\Downarrow",!0);S(E,O,V,"","\\updownarrow",!0);S(E,O,V,"","\\Updownarrow",!0);S(E,O,Ci,"","\\coprod");S(E,O,Ci,"","\\bigvee");S(E,O,Ci,"","\\bigwedge");S(E,O,Ci,"","\\biguplus");S(E,O,Ci,"","\\bigcap");S(E,O,Ci,"","\\bigcup");S(E,O,Ci,"","\\int");S(E,O,Ci,"","\\intop");S(E,O,Ci,"","\\iint");S(E,O,Ci,"","\\iiint");S(E,O,Ci,"","\\prod");S(E,O,Ci,"","\\sum");S(E,O,Ci,"","\\bigotimes");S(E,O,Ci,"","\\bigoplus");S(E,O,Ci,"","\\bigodot");S(E,O,Ci,"","\\oint");S(E,O,Ci,"","\\oiint");S(E,O,Ci,"","\\oiiint");S(E,O,Ci,"","\\bigsqcup");S(E,O,Ci,"","\\smallint");S(Mt,O,wo,"","\\textellipsis");S(E,O,wo,"","\\mathellipsis");S(Mt,O,wo,"","\\ldots",!0);S(E,O,wo,"","\\ldots",!0);S(E,O,wo,"","\\@cdots",!0);S(E,O,wo,"","\\ddots",!0);S(E,O,J,"","\\varvdots");S(Mt,O,J,"","\\varvdots");S(E,O,ai,"","\\acute");S(E,O,ai,"","\\grave");S(E,O,ai,"","\\ddot");S(E,O,ai,"~","\\tilde");S(E,O,ai,"","\\bar");S(E,O,ai,"","\\breve");S(E,O,ai,"","\\check");S(E,O,ai,"^","\\hat");S(E,O,ai,"","\\vec");S(E,O,ai,"","\\dot");S(E,O,ai,"","\\mathring");S(E,O,ae,"","\\@imath");S(E,O,ae,"","\\@jmath");S(E,O,J,"","");S(E,O,J,"","");S(Mt,O,J,"","\\i",!0);S(Mt,O,J,"","\\j",!0);S(Mt,O,J,"","\\ss",!0);S(Mt,O,J,"","\\ae",!0);S(Mt,O,J,"","\\oe",!0);S(Mt,O,J,"","\\o",!0);S(Mt,O,J,"","\\AE",!0);S(Mt,O,J,"","\\OE",!0);S(Mt,O,J,"","\\O",!0);S(Mt,O,ai,"","\\'");S(Mt,O,ai,"","\\`");S(Mt,O,ai,"","\\^");S(Mt,O,ai,"","\\~");S(Mt,O,ai,"","\\=");S(Mt,O,ai,"","\\u");S(Mt,O,ai,"","\\.");S(Mt,O,ai,"","\\c");S(Mt,O,ai,"","\\r");S(Mt,O,ai,"","\\v");S(Mt,O,ai,"",'\\"');S(Mt,O,ai,"","\\H");S(Mt,O,ai,"","\\textcircled");var tv={"--":!0,"---":!0,"``":!0,"''":!0};S(Mt,O,J,"","--",!0);S(Mt,O,J,"","\\textendash");S(Mt,O,J,"","---",!0);S(Mt,O,J,"","\\textemdash");S(Mt,O,J,"","`",!0);S(Mt,O,J,"","\\textquoteleft");S(Mt,O,J,"","'",!0);S(Mt,O,J,"","\\textquoteright");S(Mt,O,J,"","``",!0);S(Mt,O,J,"","\\textquotedblleft");S(Mt,O,J,"","''",!0);S(Mt,O,J,"","\\textquotedblright");S(E,O,J,"","\\degree",!0);S(Mt,O,J,"","\\degree");S(Mt,O,J,"","\\textdegree",!0);S(E,O,J,"","\\pounds");S(E,O,J,"","\\mathsterling",!0);S(Mt,O,J,"","\\pounds");S(Mt,O,J,"","\\textsterling",!0);S(E,Y,J,"","\\maltese");S(Mt,Y,J,"","\\maltese");var xb='0123456789/@."';for(var $d=0;$d<xb.length;$d++){var wb=xb.charAt($d);S(E,O,J,wb,wb)}var Sb='0123456789!@*()-=+";:?/.,';for(var Yd=0;Yd<Sb.length;Yd++){var Ab=Sb.charAt(Yd);S(Mt,O,J,Ab,Ab)}var J0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Vd=0;Vd<J0.length;Vd++){var N0=J0.charAt(Vd);S(E,O,ae,N0,N0),S(Mt,O,J,N0,N0)}S(E,Y,J,"C","");S(Mt,Y,J,"C","");S(E,Y,J,"H","");S(Mt,Y,J,"H","");S(E,Y,J,"N","");S(Mt,Y,J,"N","");S(E,Y,J,"P","");S(Mt,Y,J,"P","");S(E,Y,J,"Q","");S(Mt,Y,J,"Q","");S(E,Y,J,"R","");S(Mt,Y,J,"R","");S(E,Y,J,"Z","");S(Mt,Y,J,"Z","");S(E,O,ae,"h","");S(Mt,O,ae,"h","");var he="";for(var Zi=0;Zi<J0.length;Zi++){var pi=J0.charAt(Zi);he=String.fromCharCode(55349,56320+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),he=String.fromCharCode(55349,56372+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),he=String.fromCharCode(55349,56424+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),he=String.fromCharCode(55349,56580+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),he=String.fromCharCode(55349,56684+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),he=String.fromCharCode(55349,56736+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),he=String.fromCharCode(55349,56788+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),he=String.fromCharCode(55349,56840+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),he=String.fromCharCode(55349,56944+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),Zi<26&&(he=String.fromCharCode(55349,56632+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he),he=String.fromCharCode(55349,56476+Zi),S(E,O,ae,pi,he),S(Mt,O,J,pi,he))}he="";S(E,O,ae,"k",he);S(Mt,O,J,"k",he);for(var ua=0;ua<10;ua++){var Ds=ua.toString();he=String.fromCharCode(55349,57294+ua),S(E,O,ae,Ds,he),S(Mt,O,J,Ds,he),he=String.fromCharCode(55349,57314+ua),S(E,O,ae,Ds,he),S(Mt,O,J,Ds,he),he=String.fromCharCode(55349,57324+ua),S(E,O,ae,Ds,he),S(Mt,O,J,Ds,he),he=String.fromCharCode(55349,57334+ua),S(E,O,ae,Ds,he),S(Mt,O,J,Ds,he)}var Ef="";for(var Xd=0;Xd<Ef.length;Xd++){var O0=Ef.charAt(Xd);S(E,O,ae,O0,O0),S(Mt,O,J,O0,O0)}var z0=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],_b=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],ex=function(t,e){var i=t.charCodeAt(0),r=t.charCodeAt(1),a=(i-55296)*1024+(r-56320)+65536,o=e==="math"?0:1;if(119808<=a&&a<120484){var u=Math.floor((a-119808)/26);return[z0[u][2],z0[u][o]]}else if(120782<=a&&a<=120831){var h=Math.floor((a-120782)/10);return[_b[h][2],_b[h][o]]}else{if(a===120485||a===120486)return[z0[0][2],z0[0][o]];if(120486<a&&a<120782)return["",""];throw new Ot("Unsupported character: "+t)}},mu=function(t,e,i){return Qe[i][t]&&Qe[i][t].replace&&(t=Qe[i][t].replace),{value:t,metrics:om(t,e,i)}},er=function(t,e,i,r,a){var o=mu(t,e,i),u=o.metrics;t=o.value;var h;if(u){var f=u.italic;(i==="text"||r&&r.font==="mathit")&&(f=0),h=new Xn(t,u.height,u.depth,f,u.skew,u.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+e+"' and mode '"+i+"'")),h=new Xn(t,0,0,0,0,0,a);if(r){h.maxFontSize=r.sizeMultiplier,r.style.isTight()&&h.classes.push("mtight");var m=r.getColor();m&&(h.style.color=m)}return h},ix=function(t,e,i,r){return r===void 0&&(r=[]),i.font==="boldsymbol"&&mu(t,"Main-Bold",e).metrics?er(t,"Main-Bold",e,i,r.concat(["mathbf"])):t==="\\"||Qe[e][t].font==="main"?er(t,"Main-Regular",e,i,r):er(t,"AMS-Regular",e,i,r.concat(["amsrm"]))},nx=function(t,e,i,r,a){return a!=="textord"&&mu(t,"Math-BoldItalic",e).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},rx=function(t,e,i){var r=t.mode,a=t.text,o=["mord"],u=r==="math"||r==="text"&&e.font,h=u?e.font:e.fontFamily,f="",m="";if(a.charCodeAt(0)===55349&&([f,m]=ex(a,r)),f.length>0)return er(a,f,r,e,o.concat(m));if(h){var p,b;if(h==="boldsymbol"){var v=nx(a,r,e,o,i);p=v.fontName,b=[v.fontClass]}else u?(p=nv[h].fontName,b=[h]):(p=L0(h,e.fontWeight,e.fontShape),b=[h,e.fontWeight,e.fontShape]);if(mu(a,p,r).metrics)return er(a,p,r,e,o.concat(b));if(tv.hasOwnProperty(a)&&p.slice(0,10)==="Typewriter"){for(var w=[],x=0;x<a.length;x++)w.push(er(a[x],p,r,e,o.concat(b)));return iv(w)}}if(i==="mathord")return er(a,"Math-Italic",r,e,o.concat(["mathnormal"]));if(i==="textord"){var _=Qe[r][a]&&Qe[r][a].font;if(_==="ams"){var A=L0("amsrm",e.fontWeight,e.fontShape);return er(a,A,r,e,o.concat("amsrm",e.fontWeight,e.fontShape))}else if(_==="main"||!_){var T=L0("textrm",e.fontWeight,e.fontShape);return er(a,T,r,e,o.concat(e.fontWeight,e.fontShape))}else{var M=L0(_,e.fontWeight,e.fontShape);return er(a,M,r,e,o.concat(M,e.fontWeight,e.fontShape))}}else throw new Error("unexpected type: "+i+" in makeOrd")},sx=(l,t)=>{if(Ps(l.classes)!==Ps(t.classes)||l.skew!==t.skew||l.maxFontSize!==t.maxFontSize)return!1;if(l.classes.length===1){var e=l.classes[0];if(e==="mbin"||e==="mord")return!1}for(var i in l.style)if(l.style.hasOwnProperty(i)&&l.style[i]!==t.style[i])return!1;for(var r in t.style)if(t.style.hasOwnProperty(r)&&l.style[r]!==t.style[r])return!1;return!0},ax=l=>{for(var t=0;t<l.length-1;t++){var e=l[t],i=l[t+1];e instanceof Xn&&i instanceof Xn&&sx(e,i)&&(e.text+=i.text,e.height=Math.max(e.height,i.height),e.depth=Math.max(e.depth,i.depth),e.italic=i.italic,l.splice(t+1,1),t--)}return l},cm=function(t){for(var e=0,i=0,r=0,a=0;a<t.children.length;a++){var o=t.children[a];o.height>e&&(e=o.height),o.depth>i&&(i=o.depth),o.maxFontSize>r&&(r=o.maxFontSize)}t.height=e,t.depth=i,t.maxFontSize=r},vn=function(t,e,i,r){var a=new ic(t,e,i,r);return cm(a),a},ev=(l,t,e,i)=>new ic(l,t,e,i),ox=function(t,e,i){var r=vn([t],[],e);return r.height=Math.max(i||e.fontMetrics().defaultRuleThickness,e.minRuleThickness),r.style.borderBottomWidth=Bt(r.height),r.maxFontSize=1,r},lx=function(t,e,i,r){var a=new lm(t,e,i,r);return cm(a),a},iv=function(t){var e=new ec(t);return cm(e),e},cx=function(t,e){return t instanceof ec?vn([],[t],e):t},ux=function(t){if(t.positionType==="individualShift"){for(var e=t.children,i=[e[0]],r=-e[0].shift-e[0].elem.depth,a=r,o=1;o<e.length;o++){var u=-e[o].shift-a-e[o].elem.depth,h=u-(e[o-1].elem.height+e[o-1].elem.depth);a=a+u,i.push({type:"kern",size:h}),i.push(e[o])}return{children:i,depth:r}}var f;if(t.positionType==="top"){for(var m=t.positionData,p=0;p<t.children.length;p++){var b=t.children[p];m-=b.type==="kern"?b.size:b.elem.height+b.elem.depth}f=m}else if(t.positionType==="bottom")f=-t.positionData;else{var v=t.children[0];if(v.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")f=-v.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")f=-v.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:f}},hx=function(t,e){for(var{children:i,depth:r}=ux(t),a=0,o=0;o<i.length;o++){var u=i[o];if(u.type==="elem"){var h=u.elem;a=Math.max(a,h.maxFontSize,h.height)}}a+=2;var f=vn(["pstrut"],[]);f.style.height=Bt(a);for(var m=[],p=r,b=r,v=r,w=0;w<i.length;w++){var x=i[w];if(x.type==="kern")v+=x.size;else{var _=x.elem,A=x.wrapperClasses||[],T=x.wrapperStyle||{},M=vn(A,[f,_],void 0,T);M.style.top=Bt(-a-v-_.depth),x.marginLeft&&(M.style.marginLeft=x.marginLeft),x.marginRight&&(M.style.marginRight=x.marginRight),m.push(M),v+=_.height+_.depth}p=Math.min(p,v),b=Math.max(b,v)}var R=vn(["vlist"],m);R.style.height=Bt(b);var D;if(p<0){var L=vn([],[]),z=vn(["vlist"],[L]);z.style.height=Bt(-p);var q=vn(["vlist-s"],[new Xn("")]);D=[vn(["vlist-r"],[R,q]),vn(["vlist-r"],[z])]}else D=[vn(["vlist-r"],[R])];var U=vn(["vlist-t"],D);return D.length===2&&U.classes.push("vlist-t2"),U.height=b,U.depth=-p,U},dx=(l,t)=>{var e=vn(["mspace"],[],t),i=ci(l,t);return e.style.marginRight=Bt(i),e},L0=function(t,e,i){var r="";switch(t){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=t}var a;return e==="textbf"&&i==="textit"?a="BoldItalic":e==="textbf"?a="Bold":e==="textit"?a="Italic":a="Regular",r+"-"+a},nv={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},rv={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},fx=function(t,e){var[i,r,a]=rv[t],o=new Us(i),u=new Jr([o],{width:Bt(r),height:Bt(a),style:"width:"+Bt(r),viewBox:"0 0 "+1e3*r+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),h=ev(["overlay"],[u],e);return h.height=a,h.style.height=Bt(a),h.style.width=Bt(r),h},lt={fontMap:nv,makeSymbol:er,mathsym:ix,makeSpan:vn,makeSvgSpan:ev,makeLineSpan:ox,makeAnchor:lx,makeFragment:iv,wrapFragment:cx,makeVList:hx,makeOrd:rx,makeGlue:dx,staticSvg:fx,svgData:rv,tryCombineChars:ax},li={number:3,unit:"mu"},ha={number:4,unit:"mu"},Yr={number:5,unit:"mu"},mx={mord:{mop:li,mbin:ha,mrel:Yr,minner:li},mop:{mord:li,mop:li,mrel:Yr,minner:li},mbin:{mord:ha,mop:ha,mopen:ha,minner:ha},mrel:{mord:Yr,mop:Yr,mopen:Yr,minner:Yr},mopen:{},mclose:{mop:li,mbin:ha,mrel:Yr,minner:li},mpunct:{mord:li,mop:li,mrel:Yr,mopen:li,mclose:li,mpunct:li,minner:li},minner:{mord:li,mop:li,mbin:ha,mrel:Yr,mopen:li,mpunct:li,minner:li}},px={mord:{mop:li},mop:{mord:li,mop:li},mbin:{},mrel:{},mopen:{},mclose:{mop:li},mpunct:{},minner:{mop:li}},sv={},tu={},eu={};function jt(l){for(var{type:t,names:e,props:i,handler:r,htmlBuilder:a,mathmlBuilder:o}=l,u={type:t,numArgs:i.numArgs,argTypes:i.argTypes,allowedInArgument:!!i.allowedInArgument,allowedInText:!!i.allowedInText,allowedInMath:i.allowedInMath===void 0?!0:i.allowedInMath,numOptionalArgs:i.numOptionalArgs||0,infix:!!i.infix,primitive:!!i.primitive,handler:r},h=0;h<e.length;++h)sv[e[h]]=u;t&&(a&&(tu[t]=a),o&&(eu[t]=o))}function Aa(l){var{type:t,htmlBuilder:e,mathmlBuilder:i}=l;jt({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:e,mathmlBuilder:i})}var iu=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},xi=function(t){return t.type==="ordgroup"?t.body:[t]},ts=lt.makeSpan,gx=["leftmost","mbin","mopen","mrel","mop","mpunct"],bx=["rightmost","mrel","mclose","mpunct"],vx={display:oe.DISPLAY,text:oe.TEXT,script:oe.SCRIPT,scriptscript:oe.SCRIPTSCRIPT},yx={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Di=function(t,e,i,r){r===void 0&&(r=[null,null]);for(var a=[],o=0;o<t.length;o++){var u=Oe(t[o],e);if(u instanceof ec){var h=u.children;a.push(...h)}else a.push(u)}if(lt.tryCombineChars(a),!i)return a;var f=e;if(t.length===1){var m=t[0];m.type==="sizing"?f=e.havingSize(m.size):m.type==="styling"&&(f=e.havingStyle(vx[m.style]))}var p=ts([r[0]||"leftmost"],[],e),b=ts([r[1]||"rightmost"],[],e),v=i==="root";return Eb(a,(w,x)=>{var _=x.classes[0],A=w.classes[0];_==="mbin"&&bx.includes(A)?x.classes[0]="mord":A==="mbin"&&gx.includes(_)&&(w.classes[0]="mord")},{node:p},b,v),Eb(a,(w,x)=>{var _=kf(x),A=kf(w),T=_&&A?w.hasClass("mtight")?px[_][A]:mx[_][A]:null;if(T)return lt.makeGlue(T,f)},{node:p},b,v),a},Eb=function l(t,e,i,r,a){r&&t.push(r);for(var o=0;o<t.length;o++){var u=t[o],h=av(u);if(h){l(h.children,e,i,null,a);continue}var f=!u.hasClass("mspace");if(f){var m=e(u,i.node);m&&(i.insertAfter?i.insertAfter(m):(t.unshift(m),o++))}f?i.node=u:a&&u.hasClass("newline")&&(i.node=ts(["leftmost"])),i.insertAfter=(p=>b=>{t.splice(p+1,0,b),o++})(o)}r&&t.pop()},av=function(t){return t instanceof ec||t instanceof lm||t instanceof ic&&t.hasClass("enclosing")?t:null},xx=function l(t,e){var i=av(t);if(i){var r=i.children;if(r.length){if(e==="right")return l(r[r.length-1],"right");if(e==="left")return l(r[0],"left")}}return t},kf=function(t,e){return t?(e&&(t=xx(t,e)),yx[t.classes[0]]||null):null},$l=function(t,e){var i=["nulldelimiter"].concat(t.baseSizingClasses());return ts(e.concat(i))},Oe=function(t,e,i){if(!t)return ts();if(tu[t.type]){var r=tu[t.type](t,e);if(i&&e.size!==i.size){r=ts(e.sizingClasses(i),[r],e);var a=e.sizeMultiplier/i.sizeMultiplier;r.height*=a,r.depth*=a}return r}else throw new Ot("Got group of unknown type: '"+t.type+"'")};function B0(l,t){var e=ts(["base"],l,t),i=ts(["strut"]);return i.style.height=Bt(e.height+e.depth),e.depth&&(i.style.verticalAlign=Bt(-e.depth)),e.children.unshift(i),e}function Tf(l,t){var e=null;l.length===1&&l[0].type==="tag"&&(e=l[0].tag,l=l[0].body);var i=Di(l,t,"root"),r;i.length===2&&i[1].hasClass("tag")&&(r=i.pop());for(var a=[],o=[],u=0;u<i.length;u++)if(o.push(i[u]),i[u].hasClass("mbin")||i[u].hasClass("mrel")||i[u].hasClass("allowbreak")){for(var h=!1;u<i.length-1&&i[u+1].hasClass("mspace")&&!i[u+1].hasClass("newline");)u++,o.push(i[u]),i[u].hasClass("nobreak")&&(h=!0);h||(a.push(B0(o,t)),o=[])}else i[u].hasClass("newline")&&(o.pop(),o.length>0&&(a.push(B0(o,t)),o=[]),a.push(i[u]));o.length>0&&a.push(B0(o,t));var f;e?(f=B0(Di(e,t,!0)),f.classes=["tag"],a.push(f)):r&&a.push(r);var m=ts(["katex-html"],a);if(m.setAttribute("aria-hidden","true"),f){var p=f.children[0];p.style.height=Bt(m.height+m.depth),m.depth&&(p.style.verticalAlign=Bt(-m.depth))}return m}function ov(l){return new ec(l)}class Dn{constructor(t,e,i){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=e||[],this.classes=i||[]}setAttribute(t,e){this.attributes[t]=e}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);this.classes.length>0&&(t.className=Ps(this.classes));for(var i=0;i<this.children.length;i++)if(this.children[i]instanceof xr&&this.children[i+1]instanceof xr){for(var r=this.children[i].toText()+this.children[++i].toText();this.children[i+1]instanceof xr;)r+=this.children[++i].toText();t.appendChild(new xr(r).toNode())}else t.appendChild(this.children[i].toNode());return t}toMarkup(){var t="<"+this.type;for(var e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=" "+e+'="',t+=Be.escape(this.attributes[e]),t+='"');this.classes.length>0&&(t+=' class ="'+Be.escape(Ps(this.classes))+'"'),t+=">";for(var i=0;i<this.children.length;i++)t+=this.children[i].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class xr{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Be.escape(this.toText())}toText(){return this.text}}class wx{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",Bt(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Bt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Dt={MathNode:Dn,TextNode:xr,SpaceNode:wx,newDocumentFragment:ov},Kn=function(t,e,i){return Qe[e][t]&&Qe[e][t].replace&&t.charCodeAt(0)!==55349&&!(tv.hasOwnProperty(t)&&i&&(i.fontFamily&&i.fontFamily.slice(4,6)==="tt"||i.font&&i.font.slice(4,6)==="tt"))&&(t=Qe[e][t].replace),new Dt.TextNode(t)},um=function(t){return t.length===1?t[0]:new Dt.MathNode("mrow",t)},hm=function(t,e){if(e.fontFamily==="texttt")return"monospace";if(e.fontFamily==="textsf")return e.fontShape==="textit"&&e.fontWeight==="textbf"?"sans-serif-bold-italic":e.fontShape==="textit"?"sans-serif-italic":e.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(e.fontShape==="textit"&&e.fontWeight==="textbf")return"bold-italic";if(e.fontShape==="textit")return"italic";if(e.fontWeight==="textbf")return"bold";var i=e.font;if(!i||i==="mathnormal")return null;var r=t.mode;if(i==="mathit")return"italic";if(i==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(i==="mathbf")return"bold";if(i==="mathbb")return"double-struck";if(i==="mathsfit")return"sans-serif-italic";if(i==="mathfrak")return"fraktur";if(i==="mathscr"||i==="mathcal")return"script";if(i==="mathsf")return"sans-serif";if(i==="mathtt")return"monospace";var a=t.text;if(["\\imath","\\jmath"].includes(a))return null;Qe[r][a]&&Qe[r][a].replace&&(a=Qe[r][a].replace);var o=lt.fontMap[i].fontName;return om(a,o,r)?lt.fontMap[i].variant:null};function Kd(l){if(!l)return!1;if(l.type==="mi"&&l.children.length===1){var t=l.children[0];return t instanceof xr&&t.text==="."}else if(l.type==="mo"&&l.children.length===1&&l.getAttribute("separator")==="true"&&l.getAttribute("lspace")==="0em"&&l.getAttribute("rspace")==="0em"){var e=l.children[0];return e instanceof xr&&e.text===","}else return!1}var wn=function(t,e,i){if(t.length===1){var r=We(t[0],e);return i&&r instanceof Dn&&r.type==="mo"&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var a=[],o,u=0;u<t.length;u++){var h=We(t[u],e);if(h instanceof Dn&&o instanceof Dn){if(h.type==="mtext"&&o.type==="mtext"&&h.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...h.children);continue}else if(h.type==="mn"&&o.type==="mn"){o.children.push(...h.children);continue}else if(Kd(h)&&o.type==="mn"){o.children.push(...h.children);continue}else if(h.type==="mn"&&Kd(o))h.children=[...o.children,...h.children],a.pop();else if((h.type==="msup"||h.type==="msub")&&h.children.length>=1&&(o.type==="mn"||Kd(o))){var f=h.children[0];f instanceof Dn&&f.type==="mn"&&(f.children=[...o.children,...f.children],a.pop())}else if(o.type==="mi"&&o.children.length===1){var m=o.children[0];if(m instanceof xr&&m.text===""&&(h.type==="mo"||h.type==="mi"||h.type==="mn")){var p=h.children[0];p instanceof xr&&p.text.length>0&&(p.text=p.text.slice(0,1)+""+p.text.slice(1),a.pop())}}}a.push(h),o=h}return a},js=function(t,e,i){return um(wn(t,e,i))},We=function(t,e){if(!t)return new Dt.MathNode("mrow");if(eu[t.type]){var i=eu[t.type](t,e);return i}else throw new Ot("Got group of unknown type: '"+t.type+"'")};function kb(l,t,e,i,r){var a=wn(l,e),o;a.length===1&&a[0]instanceof Dn&&["mrow","mtable"].includes(a[0].type)?o=a[0]:o=new Dt.MathNode("mrow",a);var u=new Dt.MathNode("annotation",[new Dt.TextNode(t)]);u.setAttribute("encoding","application/x-tex");var h=new Dt.MathNode("semantics",[o,u]),f=new Dt.MathNode("math",[h]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),i&&f.setAttribute("display","block");var m=r?"katex":"katex-mathml";return lt.makeSpan([m],[f])}var lv=function(t){return new Kr({style:t.displayMode?oe.DISPLAY:oe.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},cv=function(t,e){if(e.displayMode){var i=["katex-display"];e.leqno&&i.push("leqno"),e.fleqn&&i.push("fleqn"),t=lt.makeSpan(i,[t])}return t},Sx=function(t,e,i){var r=lv(i),a;if(i.output==="mathml")return kb(t,e,r,i.displayMode,!0);if(i.output==="html"){var o=Tf(t,r);a=lt.makeSpan(["katex"],[o])}else{var u=kb(t,e,r,i.displayMode,!1),h=Tf(t,r);a=lt.makeSpan(["katex"],[u,h])}return cv(a,i)},Ax=function(t,e,i){var r=lv(i),a=Tf(t,r),o=lt.makeSpan(["katex"],[a]);return cv(o,i)},_x={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Ex=function(t){var e=new Dt.MathNode("mo",[new Dt.TextNode(_x[t.replace(/^\\/,"")])]);return e.setAttribute("stretchy","true"),e},kx={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Tx=function(t){return t.type==="ordgroup"?t.body.length:1},Cx=function(t,e){function i(){var u=4e5,h=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(h)){var f=t,m=Tx(f.base),p,b,v;if(m>5)h==="widehat"||h==="widecheck"?(p=420,u=2364,v=.42,b=h+"4"):(p=312,u=2340,v=.34,b="tilde4");else{var w=[1,1,2,2,3,3][m];h==="widehat"||h==="widecheck"?(u=[0,1062,2364,2364,2364][w],p=[0,239,300,360,420][w],v=[0,.24,.3,.3,.36,.42][w],b=h+w):(u=[0,600,1033,2339,2340][w],p=[0,260,286,306,312][w],v=[0,.26,.286,.3,.306,.34][w],b="tilde"+w)}var x=new Us(b),_=new Jr([x],{width:"100%",height:Bt(v),viewBox:"0 0 "+u+" "+p,preserveAspectRatio:"none"});return{span:lt.makeSvgSpan([],[_],e),minWidth:0,height:v}}else{var A=[],T=kx[h],[M,R,D]=T,L=D/1e3,z=M.length,q,U;if(z===1){var it=T[3];q=["hide-tail"],U=[it]}else if(z===2)q=["halfarrow-left","halfarrow-right"],U=["xMinYMin","xMaxYMin"];else if(z===3)q=["brace-left","brace-center","brace-right"],U=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+z+" children.");for(var ut=0;ut<z;ut++){var H=new Us(M[ut]),rt=new Jr([H],{width:"400em",height:Bt(L),viewBox:"0 0 "+u+" "+D,preserveAspectRatio:U[ut]+" slice"}),N=lt.makeSvgSpan([q[ut]],[rt],e);if(z===1)return{span:N,minWidth:R,height:L};N.style.height=Bt(L),A.push(N)}return{span:lt.makeSpan(["stretchy"],A,e),minWidth:R,height:L}}}var{span:r,minWidth:a,height:o}=i();return r.height=o,r.style.height=Bt(o),a>0&&(r.style.minWidth=Bt(a)),r},Mx=function(t,e,i,r,a){var o,u=t.height+t.depth+i+r;if(/fbox|color|angl/.test(e)){if(o=lt.makeSpan(["stretchy",e],[],a),e==="fbox"){var h=a.color&&a.getColor();h&&(o.style.borderColor=h)}}else{var f=[];/^[bx]cancel$/.test(e)&&f.push(new _f({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(e)&&f.push(new _f({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var m=new Jr(f,{width:"100%",height:Bt(u)});o=lt.makeSvgSpan([],[m],a)}return o.height=u,o.style.height=Bt(u),o},es={encloseSpan:Mx,mathMLnode:Ex,svgSpan:Cx};function we(l,t){if(!l||l.type!==t)throw new Error("Expected node of type "+t+", but got "+(l?"node of type "+l.type:String(l)));return l}function dm(l){var t=pu(l);if(!t)throw new Error("Expected node of symbol group type, but got "+(l?"node of type "+l.type:String(l)));return t}function pu(l){return l&&(l.type==="atom"||tx.hasOwnProperty(l.type))?l:null}var fm=(l,t)=>{var e,i,r;l&&l.type==="supsub"?(i=we(l.base,"accent"),e=i.base,l.base=e,r=Q8(Oe(l,t)),l.base=i):(i=we(l,"accent"),e=i.base);var a=Oe(e,t.havingCrampedStyle()),o=i.isShifty&&Be.isCharacterBox(e),u=0;if(o){var h=Be.getBaseElem(e),f=Oe(h,t.havingCrampedStyle());u=yb(f).skew}var m=i.label==="\\c",p=m?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),b;if(i.isStretchy)b=es.svgSpan(i,t),b=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:b,wrapperClasses:["svg-align"],wrapperStyle:u>0?{width:"calc(100% - "+Bt(2*u)+")",marginLeft:Bt(2*u)}:void 0}]},t);else{var v,w;i.label==="\\vec"?(v=lt.staticSvg("vec",t),w=lt.svgData.vec[1]):(v=lt.makeOrd({mode:i.mode,text:i.label},t,"textord"),v=yb(v),v.italic=0,w=v.width,m&&(p+=v.depth)),b=lt.makeSpan(["accent-body"],[v]);var x=i.label==="\\textcircled";x&&(b.classes.push("accent-full"),p=a.height);var _=u;x||(_-=w/2),b.style.left=Bt(_),i.label==="\\textcircled"&&(b.style.top=".2em"),b=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-p},{type:"elem",elem:b}]},t)}var A=lt.makeSpan(["mord","accent"],[b],t);return r?(r.children[0]=A,r.height=Math.max(A.height,r.height),r.classes[0]="mord",r):A},uv=(l,t)=>{var e=l.isStretchy?es.mathMLnode(l.label):new Dt.MathNode("mo",[Kn(l.label,l.mode)]),i=new Dt.MathNode("mover",[We(l.base,t),e]);return i.setAttribute("accent","true"),i},Rx=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(l=>"\\"+l).join("|"));jt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(l,t)=>{var e=iu(t[0]),i=!Rx.test(l.funcName),r=!i||l.funcName==="\\widehat"||l.funcName==="\\widetilde"||l.funcName==="\\widecheck";return{type:"accent",mode:l.parser.mode,label:l.funcName,isStretchy:i,isShifty:r,base:e}},htmlBuilder:fm,mathmlBuilder:uv});jt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(l,t)=>{var e=t[0],i=l.parser.mode;return i==="math"&&(l.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+l.funcName+" works only in text mode"),i="text"),{type:"accent",mode:i,label:l.funcName,isStretchy:!1,isShifty:!0,base:e}},htmlBuilder:fm,mathmlBuilder:uv});jt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0];return{type:"accentUnder",mode:e.mode,label:i,base:r}},htmlBuilder:(l,t)=>{var e=Oe(l.base,t),i=es.svgSpan(l,t),r=l.label==="\\utilde"?.12:0,a=lt.makeVList({positionType:"top",positionData:e.height,children:[{type:"elem",elem:i,wrapperClasses:["svg-align"]},{type:"kern",size:r},{type:"elem",elem:e}]},t);return lt.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(l,t)=>{var e=es.mathMLnode(l.label),i=new Dt.MathNode("munder",[We(l.base,t),e]);return i.setAttribute("accentunder","true"),i}});var I0=l=>{var t=new Dt.MathNode("mpadded",l?[l]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};jt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(l,t,e){var{parser:i,funcName:r}=l;return{type:"xArrow",mode:i.mode,label:r,body:t[0],below:e[0]}},htmlBuilder(l,t){var e=t.style,i=t.havingStyle(e.sup()),r=lt.wrapFragment(Oe(l.body,i,t),t),a=l.label.slice(0,2)==="\\x"?"x":"cd";r.classes.push(a+"-arrow-pad");var o;l.below&&(i=t.havingStyle(e.sub()),o=lt.wrapFragment(Oe(l.below,i,t),t),o.classes.push(a+"-arrow-pad"));var u=es.svgSpan(l,t),h=-t.fontMetrics().axisHeight+.5*u.height,f=-t.fontMetrics().axisHeight-.5*u.height-.111;(r.depth>.25||l.label==="\\xleftequilibrium")&&(f-=r.depth);var m;if(o){var p=-t.fontMetrics().axisHeight+o.height+.5*u.height+.111;m=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:f},{type:"elem",elem:u,shift:h},{type:"elem",elem:o,shift:p}]},t)}else m=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:f},{type:"elem",elem:u,shift:h}]},t);return m.children[0].children[0].children[1].classes.push("svg-align"),lt.makeSpan(["mrel","x-arrow"],[m],t)},mathmlBuilder(l,t){var e=es.mathMLnode(l.label);e.setAttribute("minsize",l.label.charAt(0)==="x"?"1.75em":"3.0em");var i;if(l.body){var r=I0(We(l.body,t));if(l.below){var a=I0(We(l.below,t));i=new Dt.MathNode("munderover",[e,a,r])}else i=new Dt.MathNode("mover",[e,r])}else if(l.below){var o=I0(We(l.below,t));i=new Dt.MathNode("munder",[e,o])}else i=I0(),i=new Dt.MathNode("mover",[e,i]);return i}});var Dx=lt.makeSpan;function hv(l,t){var e=Di(l.body,t,!0);return Dx([l.mclass],e,t)}function dv(l,t){var e,i=wn(l.body,t);return l.mclass==="minner"?e=new Dt.MathNode("mpadded",i):l.mclass==="mord"?l.isCharacterBox?(e=i[0],e.type="mi"):e=new Dt.MathNode("mi",i):(l.isCharacterBox?(e=i[0],e.type="mo"):e=new Dt.MathNode("mo",i),l.mclass==="mbin"?(e.attributes.lspace="0.22em",e.attributes.rspace="0.22em"):l.mclass==="mpunct"?(e.attributes.lspace="0em",e.attributes.rspace="0.17em"):l.mclass==="mopen"||l.mclass==="mclose"?(e.attributes.lspace="0em",e.attributes.rspace="0em"):l.mclass==="minner"&&(e.attributes.lspace="0.0556em",e.attributes.width="+0.1111em")),e}jt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];return{type:"mclass",mode:e.mode,mclass:"m"+i.slice(5),body:xi(r),isCharacterBox:Be.isCharacterBox(r)}},htmlBuilder:hv,mathmlBuilder:dv});var gu=l=>{var t=l.type==="ordgroup"&&l.body.length?l.body[0]:l;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};jt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(l,t){var{parser:e}=l;return{type:"mclass",mode:e.mode,mclass:gu(t[0]),body:xi(t[1]),isCharacterBox:Be.isCharacterBox(t[1])}}});jt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(l,t){var{parser:e,funcName:i}=l,r=t[1],a=t[0],o;i!=="\\stackrel"?o=gu(r):o="mrel";var u={type:"op",mode:r.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:i!=="\\stackrel",body:xi(r)},h={type:"supsub",mode:a.mode,base:u,sup:i==="\\underset"?null:a,sub:i==="\\underset"?a:null};return{type:"mclass",mode:e.mode,mclass:o,body:[h],isCharacterBox:Be.isCharacterBox(h)}},htmlBuilder:hv,mathmlBuilder:dv});jt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(l,t){var{parser:e}=l;return{type:"pmb",mode:e.mode,mclass:gu(t[0]),body:xi(t[0])}},htmlBuilder(l,t){var e=Di(l.body,t,!0),i=lt.makeSpan([l.mclass],e,t);return i.style.textShadow="0.02em 0.01em 0.04px",i},mathmlBuilder(l,t){var e=wn(l.body,t),i=new Dt.MathNode("mstyle",e);return i.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),i}});var Nx={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Tb=()=>({type:"styling",body:[],mode:"math",style:"display"}),Cb=l=>l.type==="textord"&&l.text==="@",Ox=(l,t)=>(l.type==="mathord"||l.type==="atom")&&l.text===t;function zx(l,t,e){var i=Nx[l];switch(i){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return e.callFunction(i,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var r=e.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:i,mode:"math",family:"rel"},o=e.callFunction("\\Big",[a],[]),u=e.callFunction("\\\\cdright",[t[1]],[]),h={type:"ordgroup",mode:"math",body:[r,o,u]};return e.callFunction("\\\\cdparent",[h],[])}case"\\\\cdlongequal":return e.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return e.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Lx(l){var t=[];for(l.gullet.beginGroup(),l.gullet.macros.set("\\cr","\\\\\\relax"),l.gullet.beginGroup();;){t.push(l.parseExpression(!1,"\\\\")),l.gullet.endGroup(),l.gullet.beginGroup();var e=l.fetch().text;if(e==="&"||e==="\\\\")l.consume();else if(e==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new Ot("Expected \\\\ or \\cr or \\end",l.nextToken)}for(var i=[],r=[i],a=0;a<t.length;a++){for(var o=t[a],u=Tb(),h=0;h<o.length;h++)if(!Cb(o[h]))u.body.push(o[h]);else{i.push(u),h+=1;var f=dm(o[h]).text,m=new Array(2);if(m[0]={type:"ordgroup",mode:"math",body:[]},m[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var p=0;p<2;p++){for(var b=!0,v=h+1;v<o.length;v++){if(Ox(o[v],f)){b=!1,h=v;break}if(Cb(o[v]))throw new Ot("Missing a "+f+" character to complete a CD arrow.",o[v]);m[p].body.push(o[v])}if(b)throw new Ot("Missing a "+f+" character to complete a CD arrow.",o[h])}else throw new Ot('Expected one of "<>AV=|." after @',o[h]);var w=zx(f,m,l),x={type:"styling",body:[w],mode:"math",style:"display"};i.push(x),u=Tb()}a%2===0?i.push(u):i.shift(),i=[],r.push(i)}l.gullet.endGroup(),l.gullet.endGroup();var _=new Array(r[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:r,arraystretch:1,addJot:!0,rowGaps:[null],cols:_,colSeparationType:"CD",hLinesBeforeRow:new Array(r.length+1).fill([])}}jt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(l,t){var{parser:e,funcName:i}=l;return{type:"cdlabel",mode:e.mode,side:i.slice(4),label:t[0]}},htmlBuilder(l,t){var e=t.havingStyle(t.style.sup()),i=lt.wrapFragment(Oe(l.label,e,t),t);return i.classes.push("cd-label-"+l.side),i.style.bottom=Bt(.8-i.depth),i.height=0,i.depth=0,i},mathmlBuilder(l,t){var e=new Dt.MathNode("mrow",[We(l.label,t)]);return e=new Dt.MathNode("mpadded",[e]),e.setAttribute("width","0"),l.side==="left"&&e.setAttribute("lspace","-1width"),e.setAttribute("voffset","0.7em"),e=new Dt.MathNode("mstyle",[e]),e.setAttribute("displaystyle","false"),e.setAttribute("scriptlevel","1"),e}});jt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(l,t){var{parser:e}=l;return{type:"cdlabelparent",mode:e.mode,fragment:t[0]}},htmlBuilder(l,t){var e=lt.wrapFragment(Oe(l.fragment,t),t);return e.classes.push("cd-vert-arrow"),e},mathmlBuilder(l,t){return new Dt.MathNode("mrow",[We(l.fragment,t)])}});jt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(l,t){for(var{parser:e}=l,i=we(t[0],"ordgroup"),r=i.body,a="",o=0;o<r.length;o++){var u=we(r[o],"textord");a+=u.text}var h=parseInt(a),f;if(isNaN(h))throw new Ot("\\@char has non-numeric argument "+a);if(h<0||h>=1114111)throw new Ot("\\@char with invalid code point "+a);return h<=65535?f=String.fromCharCode(h):(h-=65536,f=String.fromCharCode((h>>10)+55296,(h&1023)+56320)),{type:"textord",mode:e.mode,text:f}}});var fv=(l,t)=>{var e=Di(l.body,t.withColor(l.color),!1);return lt.makeFragment(e)},mv=(l,t)=>{var e=wn(l.body,t.withColor(l.color)),i=new Dt.MathNode("mstyle",e);return i.setAttribute("mathcolor",l.color),i};jt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(l,t){var{parser:e}=l,i=we(t[0],"color-token").color,r=t[1];return{type:"color",mode:e.mode,color:i,body:xi(r)}},htmlBuilder:fv,mathmlBuilder:mv});jt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(l,t){var{parser:e,breakOnTokenText:i}=l,r=we(t[0],"color-token").color;e.gullet.macros.set("\\current@color",r);var a=e.parseExpression(!0,i);return{type:"color",mode:e.mode,color:r,body:a}},htmlBuilder:fv,mathmlBuilder:mv});jt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(l,t,e){var{parser:i}=l,r=i.gullet.future().text==="["?i.parseSizeGroup(!0):null,a=!i.settings.displayMode||!i.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:i.mode,newLine:a,size:r&&we(r,"size").value}},htmlBuilder(l,t){var e=lt.makeSpan(["mspace"],[],t);return l.newLine&&(e.classes.push("newline"),l.size&&(e.style.marginTop=Bt(ci(l.size,t)))),e},mathmlBuilder(l,t){var e=new Dt.MathNode("mspace");return l.newLine&&(e.setAttribute("linebreak","newline"),l.size&&e.setAttribute("height",Bt(ci(l.size,t)))),e}});var Cf={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},pv=l=>{var t=l.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new Ot("Expected a control sequence",l);return t},Bx=l=>{var t=l.gullet.popToken();return t.text==="="&&(t=l.gullet.popToken(),t.text===" "&&(t=l.gullet.popToken())),t},gv=(l,t,e,i)=>{var r=l.gullet.macros.get(e.text);r==null&&(e.noexpand=!0,r={tokens:[e],numArgs:0,unexpandable:!l.gullet.isExpandable(e.text)}),l.gullet.macros.set(t,r,i)};jt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(l){var{parser:t,funcName:e}=l;t.consumeSpaces();var i=t.fetch();if(Cf[i.text])return(e==="\\global"||e==="\\\\globallong")&&(i.text=Cf[i.text]),we(t.parseFunction(),"internal");throw new Ot("Invalid token after macro prefix",i)}});jt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l){var{parser:t,funcName:e}=l,i=t.gullet.popToken(),r=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new Ot("Expected a control sequence",i);for(var a=0,o,u=[[]];t.gullet.future().text!=="{";)if(i=t.gullet.popToken(),i.text==="#"){if(t.gullet.future().text==="{"){o=t.gullet.future(),u[a].push("{");break}if(i=t.gullet.popToken(),!/^[1-9]$/.test(i.text))throw new Ot('Invalid argument number "'+i.text+'"');if(parseInt(i.text)!==a+1)throw new Ot('Argument number "'+i.text+'" out of order');a++,u.push([])}else{if(i.text==="EOF")throw new Ot("Expected a macro definition");u[a].push(i.text)}var{tokens:h}=t.gullet.consumeArg();return o&&h.unshift(o),(e==="\\edef"||e==="\\xdef")&&(h=t.gullet.expandTokens(h),h.reverse()),t.gullet.macros.set(r,{tokens:h,numArgs:a,delimiters:u},e===Cf[e]),{type:"internal",mode:t.mode}}});jt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l){var{parser:t,funcName:e}=l,i=pv(t.gullet.popToken());t.gullet.consumeSpaces();var r=Bx(t);return gv(t,i,r,e==="\\\\globallet"),{type:"internal",mode:t.mode}}});jt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l){var{parser:t,funcName:e}=l,i=pv(t.gullet.popToken()),r=t.gullet.popToken(),a=t.gullet.popToken();return gv(t,i,a,e==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(r),{type:"internal",mode:t.mode}}});var Rl=function(t,e,i){var r=Qe.math[t]&&Qe.math[t].replace,a=om(r||t,e,i);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+e+".");return a},mm=function(t,e,i,r){var a=i.havingBaseStyle(e),o=lt.makeSpan(r.concat(a.sizingClasses(i)),[t],i),u=a.sizeMultiplier/i.sizeMultiplier;return o.height*=u,o.depth*=u,o.maxFontSize=a.sizeMultiplier,o},bv=function(t,e,i){var r=e.havingBaseStyle(i),a=(1-e.sizeMultiplier/r.sizeMultiplier)*e.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=Bt(a),t.height-=a,t.depth+=a},Ix=function(t,e,i,r,a,o){var u=lt.makeSymbol(t,"Main-Regular",a,r),h=mm(u,e,r,o);return i&&bv(h,r,e),h},Fx=function(t,e,i,r){return lt.makeSymbol(t,"Size"+e+"-Regular",i,r)},vv=function(t,e,i,r,a,o){var u=Fx(t,e,a,r),h=mm(lt.makeSpan(["delimsizing","size"+e],[u],r),oe.TEXT,r,o);return i&&bv(h,r,oe.TEXT),h},Wd=function(t,e,i){var r;e==="Size1-Regular"?r="delim-size1":r="delim-size4";var a=lt.makeSpan(["delimsizinginner",r],[lt.makeSpan([],[lt.makeSymbol(t,e,i)])]);return{type:"elem",elem:a}},Zd=function(t,e,i){var r=yr["Size4-Regular"][t.charCodeAt(0)]?yr["Size4-Regular"][t.charCodeAt(0)][4]:yr["Size1-Regular"][t.charCodeAt(0)][4],a=new Us("inner",G8(t,Math.round(1e3*e))),o=new Jr([a],{width:Bt(r),height:Bt(e),style:"width:"+Bt(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*e),preserveAspectRatio:"xMinYMin"}),u=lt.makeSvgSpan([],[o],i);return u.height=e,u.style.height=Bt(e),u.style.width=Bt(r),{type:"elem",elem:u}},Mf=.008,F0={type:"kern",size:-1*Mf},Px=["|","\\lvert","\\rvert","\\vert"],Ux=["\\|","\\lVert","\\rVert","\\Vert"],yv=function(t,e,i,r,a,o){var u,h,f,m,p="",b=0;u=f=m=t,h=null;var v="Size1-Regular";t==="\\uparrow"?f=m="":t==="\\Uparrow"?f=m="":t==="\\downarrow"?u=f="":t==="\\Downarrow"?u=f="":t==="\\updownarrow"?(u="\\uparrow",f="",m="\\downarrow"):t==="\\Updownarrow"?(u="\\Uparrow",f="",m="\\Downarrow"):Px.includes(t)?(f="",p="vert",b=333):Ux.includes(t)?(f="",p="doublevert",b=556):t==="["||t==="\\lbrack"?(u="",f="",m="",v="Size4-Regular",p="lbrack",b=667):t==="]"||t==="\\rbrack"?(u="",f="",m="",v="Size4-Regular",p="rbrack",b=667):t==="\\lfloor"||t===""?(f=u="",m="",v="Size4-Regular",p="lfloor",b=667):t==="\\lceil"||t===""?(u="",f=m="",v="Size4-Regular",p="lceil",b=667):t==="\\rfloor"||t===""?(f=u="",m="",v="Size4-Regular",p="rfloor",b=667):t==="\\rceil"||t===""?(u="",f=m="",v="Size4-Regular",p="rceil",b=667):t==="("||t==="\\lparen"?(u="",f="",m="",v="Size4-Regular",p="lparen",b=875):t===")"||t==="\\rparen"?(u="",f="",m="",v="Size4-Regular",p="rparen",b=875):t==="\\{"||t==="\\lbrace"?(u="",h="",m="",f="",v="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(u="",h="",m="",f="",v="Size4-Regular"):t==="\\lgroup"||t===""?(u="",m="",f="",v="Size4-Regular"):t==="\\rgroup"||t===""?(u="",m="",f="",v="Size4-Regular"):t==="\\lmoustache"||t===""?(u="",m="",f="",v="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(u="",m="",f="",v="Size4-Regular");var w=Rl(u,v,a),x=w.height+w.depth,_=Rl(f,v,a),A=_.height+_.depth,T=Rl(m,v,a),M=T.height+T.depth,R=0,D=1;if(h!==null){var L=Rl(h,v,a);R=L.height+L.depth,D=2}var z=x+M+R,q=Math.max(0,Math.ceil((e-z)/(D*A))),U=z+q*D*A,it=r.fontMetrics().axisHeight;i&&(it*=r.sizeMultiplier);var ut=U/2-it,H=[];if(p.length>0){var rt=U-x-M,N=Math.round(U*1e3),at=q8(p,Math.round(rt*1e3)),X=new Us(p,at),W=(b/1e3).toFixed(3)+"em",xt=(N/1e3).toFixed(3)+"em",bt=new Jr([X],{width:W,height:xt,viewBox:"0 0 "+b+" "+N}),Rt=lt.makeSvgSpan([],[bt],r);Rt.height=N/1e3,Rt.style.width=W,Rt.style.height=xt,H.push({type:"elem",elem:Rt})}else{if(H.push(Wd(m,v,a)),H.push(F0),h===null){var B=U-x-M+2*Mf;H.push(Zd(f,B,r))}else{var P=(U-x-M-R)/2+2*Mf;H.push(Zd(f,P,r)),H.push(F0),H.push(Wd(h,v,a)),H.push(F0),H.push(Zd(f,P,r))}H.push(F0),H.push(Wd(u,v,a))}var st=r.havingBaseStyle(oe.TEXT),pt=lt.makeVList({positionType:"bottom",positionData:ut,children:H},st);return mm(lt.makeSpan(["delimsizing","mult"],[pt],st),oe.TEXT,r,o)},Qd=80,Jd=.08,tf=function(t,e,i,r,a){var o=H8(t,r,i),u=new Us(t,o),h=new Jr([u],{width:"400em",height:Bt(e),viewBox:"0 0 400000 "+i,preserveAspectRatio:"xMinYMin slice"});return lt.makeSvgSpan(["hide-tail"],[h],a)},jx=function(t,e){var i=e.havingBaseSizing(),r=Av("\\surd",t*i.sizeMultiplier,Sv,i),a=i.sizeMultiplier,o=Math.max(0,e.minRuleThickness-e.fontMetrics().sqrtRuleThickness),u,h=0,f=0,m=0,p;return r.type==="small"?(m=1e3+1e3*o+Qd,t<1?a=1:t<1.4&&(a=.7),h=(1+o+Jd)/a,f=(1+o)/a,u=tf("sqrtMain",h,m,o,e),u.style.minWidth="0.853em",p=.833/a):r.type==="large"?(m=(1e3+Qd)*Ll[r.size],f=(Ll[r.size]+o)/a,h=(Ll[r.size]+o+Jd)/a,u=tf("sqrtSize"+r.size,h,m,o,e),u.style.minWidth="1.02em",p=1/a):(h=t+o+Jd,f=t+o,m=Math.floor(1e3*t+o)+Qd,u=tf("sqrtTall",h,m,o,e),u.style.minWidth="0.742em",p=1.056),u.height=f,u.style.height=Bt(h),{span:u,advanceWidth:p,ruleWidth:(e.fontMetrics().sqrtRuleThickness+o)*a}},xv=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Hx=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],wv=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Ll=[0,1.2,1.8,2.4,3],Gx=function(t,e,i,r,a){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),xv.includes(t)||wv.includes(t))return vv(t,e,!1,i,r,a);if(Hx.includes(t))return yv(t,Ll[e],!1,i,r,a);throw new Ot("Illegal delimiter: '"+t+"'")},qx=[{type:"small",style:oe.SCRIPTSCRIPT},{type:"small",style:oe.SCRIPT},{type:"small",style:oe.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],$x=[{type:"small",style:oe.SCRIPTSCRIPT},{type:"small",style:oe.SCRIPT},{type:"small",style:oe.TEXT},{type:"stack"}],Sv=[{type:"small",style:oe.SCRIPTSCRIPT},{type:"small",style:oe.SCRIPT},{type:"small",style:oe.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Yx=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},Av=function(t,e,i,r){for(var a=Math.min(2,3-r.style.size),o=a;o<i.length&&i[o].type!=="stack";o++){var u=Rl(t,Yx(i[o]),"math"),h=u.height+u.depth;if(i[o].type==="small"){var f=r.havingBaseStyle(i[o].style);h*=f.sizeMultiplier}if(h>e)return i[o]}return i[i.length-1]},_v=function(t,e,i,r,a,o){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var u;wv.includes(t)?u=qx:xv.includes(t)?u=Sv:u=$x;var h=Av(t,e,u,r);return h.type==="small"?Ix(t,h.style,i,r,a,o):h.type==="large"?vv(t,h.size,i,r,a,o):yv(t,e,i,r,a,o)},Vx=function(t,e,i,r,a,o){var u=r.fontMetrics().axisHeight*r.sizeMultiplier,h=901,f=5/r.fontMetrics().ptPerEm,m=Math.max(e-u,i+u),p=Math.max(m/500*h,2*m-f);return _v(t,p,!0,r,a,o)},Qr={sqrtImage:jx,sizedDelim:Gx,sizeToMaxHeight:Ll,customSizedDelim:_v,leftRightDelim:Vx},Mb={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Xx=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function bu(l,t){var e=pu(l);if(e&&Xx.includes(e.text))return e;throw e?new Ot("Invalid delimiter '"+e.text+"' after '"+t.funcName+"'",l):new Ot("Invalid delimiter type '"+l.type+"'",l)}jt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(l,t)=>{var e=bu(t[0],l);return{type:"delimsizing",mode:l.parser.mode,size:Mb[l.funcName].size,mclass:Mb[l.funcName].mclass,delim:e.text}},htmlBuilder:(l,t)=>l.delim==="."?lt.makeSpan([l.mclass]):Qr.sizedDelim(l.delim,l.size,t,l.mode,[l.mclass]),mathmlBuilder:l=>{var t=[];l.delim!=="."&&t.push(Kn(l.delim,l.mode));var e=new Dt.MathNode("mo",t);l.mclass==="mopen"||l.mclass==="mclose"?e.setAttribute("fence","true"):e.setAttribute("fence","false"),e.setAttribute("stretchy","true");var i=Bt(Qr.sizeToMaxHeight[l.size]);return e.setAttribute("minsize",i),e.setAttribute("maxsize",i),e}});function Rb(l){if(!l.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}jt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var e=l.parser.gullet.macros.get("\\current@color");if(e&&typeof e!="string")throw new Ot("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:l.parser.mode,delim:bu(t[0],l).text,color:e}}});jt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var e=bu(t[0],l),i=l.parser;++i.leftrightDepth;var r=i.parseExpression(!1);--i.leftrightDepth,i.expect("\\right",!1);var a=we(i.parseFunction(),"leftright-right");return{type:"leftright",mode:i.mode,body:r,left:e.text,right:a.delim,rightColor:a.color}},htmlBuilder:(l,t)=>{Rb(l);for(var e=Di(l.body,t,!0,["mopen","mclose"]),i=0,r=0,a=!1,o=0;o<e.length;o++)e[o].isMiddle?a=!0:(i=Math.max(e[o].height,i),r=Math.max(e[o].depth,r));i*=t.sizeMultiplier,r*=t.sizeMultiplier;var u;if(l.left==="."?u=$l(t,["mopen"]):u=Qr.leftRightDelim(l.left,i,r,t,l.mode,["mopen"]),e.unshift(u),a)for(var h=1;h<e.length;h++){var f=e[h],m=f.isMiddle;m&&(e[h]=Qr.leftRightDelim(m.delim,i,r,m.options,l.mode,[]))}var p;if(l.right===".")p=$l(t,["mclose"]);else{var b=l.rightColor?t.withColor(l.rightColor):t;p=Qr.leftRightDelim(l.right,i,r,b,l.mode,["mclose"])}return e.push(p),lt.makeSpan(["minner"],e,t)},mathmlBuilder:(l,t)=>{Rb(l);var e=wn(l.body,t);if(l.left!=="."){var i=new Dt.MathNode("mo",[Kn(l.left,l.mode)]);i.setAttribute("fence","true"),e.unshift(i)}if(l.right!=="."){var r=new Dt.MathNode("mo",[Kn(l.right,l.mode)]);r.setAttribute("fence","true"),l.rightColor&&r.setAttribute("mathcolor",l.rightColor),e.push(r)}return um(e)}});jt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var e=bu(t[0],l);if(!l.parser.leftrightDepth)throw new Ot("\\middle without preceding \\left",e);return{type:"middle",mode:l.parser.mode,delim:e.text}},htmlBuilder:(l,t)=>{var e;if(l.delim===".")e=$l(t,[]);else{e=Qr.sizedDelim(l.delim,1,t,l.mode,[]);var i={delim:l.delim,options:t};e.isMiddle=i}return e},mathmlBuilder:(l,t)=>{var e=l.delim==="\\vert"||l.delim==="|"?Kn("|","text"):Kn(l.delim,l.mode),i=new Dt.MathNode("mo",[e]);return i.setAttribute("fence","true"),i.setAttribute("lspace","0.05em"),i.setAttribute("rspace","0.05em"),i}});var pm=(l,t)=>{var e=lt.wrapFragment(Oe(l.body,t),t),i=l.label.slice(1),r=t.sizeMultiplier,a,o=0,u=Be.isCharacterBox(l.body);if(i==="sout")a=lt.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/r,o=-.5*t.fontMetrics().xHeight;else if(i==="phase"){var h=ci({number:.6,unit:"pt"},t),f=ci({number:.35,unit:"ex"},t),m=t.havingBaseSizing();r=r/m.sizeMultiplier;var p=e.height+e.depth+h+f;e.style.paddingLeft=Bt(p/2+h);var b=Math.floor(1e3*p*r),v=U8(b),w=new Jr([new Us("phase",v)],{width:"400em",height:Bt(b/1e3),viewBox:"0 0 400000 "+b,preserveAspectRatio:"xMinYMin slice"});a=lt.makeSvgSpan(["hide-tail"],[w],t),a.style.height=Bt(p),o=e.depth+h+f}else{/cancel/.test(i)?u||e.classes.push("cancel-pad"):i==="angl"?e.classes.push("anglpad"):e.classes.push("boxpad");var x=0,_=0,A=0;/box/.test(i)?(A=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),x=t.fontMetrics().fboxsep+(i==="colorbox"?0:A),_=x):i==="angl"?(A=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),x=4*A,_=Math.max(0,.25-e.depth)):(x=u?.2:0,_=x),a=es.encloseSpan(e,i,x,_,t),/fbox|boxed|fcolorbox/.test(i)?(a.style.borderStyle="solid",a.style.borderWidth=Bt(A)):i==="angl"&&A!==.049&&(a.style.borderTopWidth=Bt(A),a.style.borderRightWidth=Bt(A)),o=e.depth+_,l.backgroundColor&&(a.style.backgroundColor=l.backgroundColor,l.borderColor&&(a.style.borderColor=l.borderColor))}var T;if(l.backgroundColor)T=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:o},{type:"elem",elem:e,shift:0}]},t);else{var M=/cancel|phase/.test(i)?["svg-align"]:[];T=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:e,shift:0},{type:"elem",elem:a,shift:o,wrapperClasses:M}]},t)}return/cancel/.test(i)&&(T.height=e.height,T.depth=e.depth),/cancel/.test(i)&&!u?lt.makeSpan(["mord","cancel-lap"],[T],t):lt.makeSpan(["mord"],[T],t)},gm=(l,t)=>{var e=0,i=new Dt.MathNode(l.label.indexOf("colorbox")>-1?"mpadded":"menclose",[We(l.body,t)]);switch(l.label){case"\\cancel":i.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":i.setAttribute("notation","downdiagonalstrike");break;case"\\phase":i.setAttribute("notation","phasorangle");break;case"\\sout":i.setAttribute("notation","horizontalstrike");break;case"\\fbox":i.setAttribute("notation","box");break;case"\\angl":i.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(e=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,i.setAttribute("width","+"+2*e+"pt"),i.setAttribute("height","+"+2*e+"pt"),i.setAttribute("lspace",e+"pt"),i.setAttribute("voffset",e+"pt"),l.label==="\\fcolorbox"){var r=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);i.setAttribute("style","border: "+r+"em solid "+String(l.borderColor))}break;case"\\xcancel":i.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return l.backgroundColor&&i.setAttribute("mathbackground",l.backgroundColor),i};jt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(l,t,e){var{parser:i,funcName:r}=l,a=we(t[0],"color-token").color,o=t[1];return{type:"enclose",mode:i.mode,label:r,backgroundColor:a,body:o}},htmlBuilder:pm,mathmlBuilder:gm});jt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(l,t,e){var{parser:i,funcName:r}=l,a=we(t[0],"color-token").color,o=we(t[1],"color-token").color,u=t[2];return{type:"enclose",mode:i.mode,label:r,backgroundColor:o,borderColor:a,body:u}},htmlBuilder:pm,mathmlBuilder:gm});jt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(l,t){var{parser:e}=l;return{type:"enclose",mode:e.mode,label:"\\fbox",body:t[0]}}});jt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];return{type:"enclose",mode:e.mode,label:i,body:r}},htmlBuilder:pm,mathmlBuilder:gm});jt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(l,t){var{parser:e}=l;return{type:"enclose",mode:e.mode,label:"\\angl",body:t[0]}}});var Ev={};function Sr(l){for(var{type:t,names:e,props:i,handler:r,htmlBuilder:a,mathmlBuilder:o}=l,u={type:t,numArgs:i.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:r},h=0;h<e.length;++h)Ev[e[h]]=u;a&&(tu[t]=a),o&&(eu[t]=o)}var kv={};function F(l,t){kv[l]=t}function Db(l){var t=[];l.consumeSpaces();var e=l.fetch().text;for(e==="\\relax"&&(l.consume(),l.consumeSpaces(),e=l.fetch().text);e==="\\hline"||e==="\\hdashline";)l.consume(),t.push(e==="\\hdashline"),l.consumeSpaces(),e=l.fetch().text;return t}var vu=l=>{var t=l.parser.settings;if(!t.displayMode)throw new Ot("{"+l.envName+"} can be used only in display mode.")};function bm(l){if(l.indexOf("ed")===-1)return l.indexOf("*")===-1}function Hs(l,t,e){var{hskipBeforeAndAfter:i,addJot:r,cols:a,arraystretch:o,colSeparationType:u,autoTag:h,singleRow:f,emptySingleRow:m,maxNumCols:p,leqno:b}=t;if(l.gullet.beginGroup(),f||l.gullet.macros.set("\\cr","\\\\\\relax"),!o){var v=l.gullet.expandMacroAsText("\\arraystretch");if(v==null)o=1;else if(o=parseFloat(v),!o||o<0)throw new Ot("Invalid \\arraystretch: "+v)}l.gullet.beginGroup();var w=[],x=[w],_=[],A=[],T=h!=null?[]:void 0;function M(){h&&l.gullet.macros.set("\\@eqnsw","1",!0)}function R(){T&&(l.gullet.macros.get("\\df@tag")?(T.push(l.subparse([new Nn("\\df@tag")])),l.gullet.macros.set("\\df@tag",void 0,!0)):T.push(!!h&&l.gullet.macros.get("\\@eqnsw")==="1"))}for(M(),A.push(Db(l));;){var D=l.parseExpression(!1,f?"\\end":"\\\\");l.gullet.endGroup(),l.gullet.beginGroup(),D={type:"ordgroup",mode:l.mode,body:D},e&&(D={type:"styling",mode:l.mode,style:e,body:[D]}),w.push(D);var L=l.fetch().text;if(L==="&"){if(p&&w.length===p){if(f||u)throw new Ot("Too many tab characters: &",l.nextToken);l.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}l.consume()}else if(L==="\\end"){R(),w.length===1&&D.type==="styling"&&D.body[0].body.length===0&&(x.length>1||!m)&&x.pop(),A.length<x.length+1&&A.push([]);break}else if(L==="\\\\"){l.consume();var z=void 0;l.gullet.future().text!==" "&&(z=l.parseSizeGroup(!0)),_.push(z?z.value:null),R(),A.push(Db(l)),w=[],x.push(w),M()}else throw new Ot("Expected & or \\\\ or \\cr or \\end",l.nextToken)}return l.gullet.endGroup(),l.gullet.endGroup(),{type:"array",mode:l.mode,addJot:r,arraystretch:o,body:x,cols:a,rowGaps:_,hskipBeforeAndAfter:i,hLinesBeforeRow:A,colSeparationType:u,tags:T,leqno:b}}function vm(l){return l.slice(0,1)==="d"?"display":"text"}var Ar=function(t,e){var i,r,a=t.body.length,o=t.hLinesBeforeRow,u=0,h=new Array(a),f=[],m=Math.max(e.fontMetrics().arrayRuleWidth,e.minRuleThickness),p=1/e.fontMetrics().ptPerEm,b=5*p;if(t.colSeparationType&&t.colSeparationType==="small"){var v=e.havingStyle(oe.SCRIPT).sizeMultiplier;b=.2778*(v/e.sizeMultiplier)}var w=t.colSeparationType==="CD"?ci({number:3,unit:"ex"},e):12*p,x=3*p,_=t.arraystretch*w,A=.7*_,T=.3*_,M=0;function R(j){for(var Z=0;Z<j.length;++Z)Z>0&&(M+=.25),f.push({pos:M,isDashed:j[Z]})}for(R(o[0]),i=0;i<t.body.length;++i){var D=t.body[i],L=A,z=T;u<D.length&&(u=D.length);var q=new Array(D.length);for(r=0;r<D.length;++r){var U=Oe(D[r],e);z<U.depth&&(z=U.depth),L<U.height&&(L=U.height),q[r]=U}var it=t.rowGaps[i],ut=0;it&&(ut=ci(it,e),ut>0&&(ut+=T,z<ut&&(z=ut),ut=0)),t.addJot&&(z+=x),q.height=L,q.depth=z,M+=L,q.pos=M,M+=z+ut,h[i]=q,R(o[i+1])}var H=M/2+e.fontMetrics().axisHeight,rt=t.cols||[],N=[],at,X,W=[];if(t.tags&&t.tags.some(j=>j))for(i=0;i<a;++i){var xt=h[i],bt=xt.pos-H,Rt=t.tags[i],B=void 0;Rt===!0?B=lt.makeSpan(["eqn-num"],[],e):Rt===!1?B=lt.makeSpan([],[],e):B=lt.makeSpan([],Di(Rt,e,!0),e),B.depth=xt.depth,B.height=xt.height,W.push({type:"elem",elem:B,shift:bt})}for(r=0,X=0;r<u||X<rt.length;++r,++X){for(var P=rt[X]||{},st=!0;P.type==="separator";){if(st||(at=lt.makeSpan(["arraycolsep"],[]),at.style.width=Bt(e.fontMetrics().doubleRuleSep),N.push(at)),P.separator==="|"||P.separator===":"){var pt=P.separator==="|"?"solid":"dashed",vt=lt.makeSpan(["vertical-separator"],[],e);vt.style.height=Bt(M),vt.style.borderRightWidth=Bt(m),vt.style.borderRightStyle=pt,vt.style.margin="0 "+Bt(-m/2);var Ut=M-H;Ut&&(vt.style.verticalAlign=Bt(-Ut)),N.push(vt)}else throw new Ot("Invalid separator type: "+P.separator);X++,P=rt[X]||{},st=!1}if(!(r>=u)){var Ft=void 0;(r>0||t.hskipBeforeAndAfter)&&(Ft=Be.deflt(P.pregap,b),Ft!==0&&(at=lt.makeSpan(["arraycolsep"],[]),at.style.width=Bt(Ft),N.push(at)));var Yt=[];for(i=0;i<a;++i){var qt=h[i],ke=qt[r];if(ke){var Ae=qt.pos-H;ke.depth=qt.depth,ke.height=qt.height,Yt.push({type:"elem",elem:ke,shift:Ae})}}Yt=lt.makeVList({positionType:"individualShift",children:Yt},e),Yt=lt.makeSpan(["col-align-"+(P.align||"c")],[Yt]),N.push(Yt),(r<u-1||t.hskipBeforeAndAfter)&&(Ft=Be.deflt(P.postgap,b),Ft!==0&&(at=lt.makeSpan(["arraycolsep"],[]),at.style.width=Bt(Ft),N.push(at)))}}if(h=lt.makeSpan(["mtable"],N),f.length>0){for(var ei=lt.makeLineSpan("hline",e,m),hi=lt.makeLineSpan("hdashline",e,m),C=[{type:"elem",elem:h,shift:0}];f.length>0;){var At=f.pop(),gt=At.pos-H;At.isDashed?C.push({type:"elem",elem:hi,shift:gt}):C.push({type:"elem",elem:ei,shift:gt})}h=lt.makeVList({positionType:"individualShift",children:C},e)}if(W.length===0)return lt.makeSpan(["mord"],[h],e);var $=lt.makeVList({positionType:"individualShift",children:W},e);return $=lt.makeSpan(["tag"],[$],e),lt.makeFragment([h,$])},Kx={c:"center ",l:"left ",r:"right "},_r=function(t,e){for(var i=[],r=new Dt.MathNode("mtd",[],["mtr-glue"]),a=new Dt.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<t.body.length;o++){for(var u=t.body[o],h=[],f=0;f<u.length;f++)h.push(new Dt.MathNode("mtd",[We(u[f],e)]));t.tags&&t.tags[o]&&(h.unshift(r),h.push(r),t.leqno?h.unshift(a):h.push(a)),i.push(new Dt.MathNode("mtr",h))}var m=new Dt.MathNode("mtable",i),p=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);m.setAttribute("rowspacing",Bt(p));var b="",v="";if(t.cols&&t.cols.length>0){var w=t.cols,x="",_=!1,A=0,T=w.length;w[0].type==="separator"&&(b+="top ",A=1),w[w.length-1].type==="separator"&&(b+="bottom ",T-=1);for(var M=A;M<T;M++)w[M].type==="align"?(v+=Kx[w[M].align],_&&(x+="none "),_=!0):w[M].type==="separator"&&_&&(x+=w[M].separator==="|"?"solid ":"dashed ",_=!1);m.setAttribute("columnalign",v.trim()),/[sd]/.test(x)&&m.setAttribute("columnlines",x.trim())}if(t.colSeparationType==="align"){for(var R=t.cols||[],D="",L=1;L<R.length;L++)D+=L%2?"0em ":"1em ";m.setAttribute("columnspacing",D.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?m.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?m.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?m.setAttribute("columnspacing","0.5em"):m.setAttribute("columnspacing","1em");var z="",q=t.hLinesBeforeRow;b+=q[0].length>0?"left ":"",b+=q[q.length-1].length>0?"right ":"";for(var U=1;U<q.length-1;U++)z+=q[U].length===0?"none ":q[U][0]?"dashed ":"solid ";return/[sd]/.test(z)&&m.setAttribute("rowlines",z.trim()),b!==""&&(m=new Dt.MathNode("menclose",[m]),m.setAttribute("notation",b.trim())),t.arraystretch&&t.arraystretch<1&&(m=new Dt.MathNode("mstyle",[m]),m.setAttribute("scriptlevel","1")),m},Tv=function(t,e){t.envName.indexOf("ed")===-1&&vu(t);var i=[],r=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",o=Hs(t.parser,{cols:i,addJot:!0,autoTag:a?void 0:bm(t.envName),emptySingleRow:!0,colSeparationType:r,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),u,h=0,f={type:"ordgroup",mode:t.mode,body:[]};if(e[0]&&e[0].type==="ordgroup"){for(var m="",p=0;p<e[0].body.length;p++){var b=we(e[0].body[p],"textord");m+=b.text}u=Number(m),h=u*2}var v=!h;o.body.forEach(function(A){for(var T=1;T<A.length;T+=2){var M=we(A[T],"styling"),R=we(M.body[0],"ordgroup");R.body.unshift(f)}if(v)h<A.length&&(h=A.length);else{var D=A.length/2;if(u<D)throw new Ot("Too many math in a row: "+("expected "+u+", but got "+D),A[0])}});for(var w=0;w<h;++w){var x="r",_=0;w%2===1?x="l":w>0&&v&&(_=1),i[w]={type:"align",align:x,pregap:_,postgap:0}}return o.colSeparationType=v?"align":"alignat",o};Sr({type:"array",names:["array","darray"],props:{numArgs:1},handler(l,t){var e=pu(t[0]),i=e?[t[0]]:we(t[0],"ordgroup").body,r=i.map(function(o){var u=dm(o),h=u.text;if("lcr".indexOf(h)!==-1)return{type:"align",align:h};if(h==="|")return{type:"separator",separator:"|"};if(h===":")return{type:"separator",separator:":"};throw new Ot("Unknown column alignment: "+h,o)}),a={cols:r,hskipBeforeAndAfter:!0,maxNumCols:r.length};return Hs(l.parser,a,vm(l.envName))},htmlBuilder:Ar,mathmlBuilder:_r});Sr({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(l){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[l.envName.replace("*","")],e="c",i={hskipBeforeAndAfter:!1,cols:[{type:"align",align:e}]};if(l.envName.charAt(l.envName.length-1)==="*"){var r=l.parser;if(r.consumeSpaces(),r.fetch().text==="["){if(r.consume(),r.consumeSpaces(),e=r.fetch().text,"lcr".indexOf(e)===-1)throw new Ot("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),i.cols=[{type:"align",align:e}]}}var a=Hs(l.parser,i,vm(l.envName)),o=Math.max(0,...a.body.map(u=>u.length));return a.cols=new Array(o).fill({type:"align",align:e}),t?{type:"leftright",mode:l.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:Ar,mathmlBuilder:_r});Sr({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(l){var t={arraystretch:.5},e=Hs(l.parser,t,"script");return e.colSeparationType="small",e},htmlBuilder:Ar,mathmlBuilder:_r});Sr({type:"array",names:["subarray"],props:{numArgs:1},handler(l,t){var e=pu(t[0]),i=e?[t[0]]:we(t[0],"ordgroup").body,r=i.map(function(o){var u=dm(o),h=u.text;if("lc".indexOf(h)!==-1)return{type:"align",align:h};throw new Ot("Unknown column alignment: "+h,o)});if(r.length>1)throw new Ot("{subarray} can contain only one column");var a={cols:r,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=Hs(l.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new Ot("{subarray} can contain only one column");return a},htmlBuilder:Ar,mathmlBuilder:_r});Sr({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(l){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},e=Hs(l.parser,t,vm(l.envName));return{type:"leftright",mode:l.mode,body:[e],left:l.envName.indexOf("r")>-1?".":"\\{",right:l.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Ar,mathmlBuilder:_r});Sr({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Tv,htmlBuilder:Ar,mathmlBuilder:_r});Sr({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(l){["gather","gather*"].includes(l.envName)&&vu(l);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:bm(l.envName),emptySingleRow:!0,leqno:l.parser.settings.leqno};return Hs(l.parser,t,"display")},htmlBuilder:Ar,mathmlBuilder:_r});Sr({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Tv,htmlBuilder:Ar,mathmlBuilder:_r});Sr({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(l){vu(l);var t={autoTag:bm(l.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:l.parser.settings.leqno};return Hs(l.parser,t,"display")},htmlBuilder:Ar,mathmlBuilder:_r});Sr({type:"array",names:["CD"],props:{numArgs:0},handler(l){return vu(l),Lx(l.parser)},htmlBuilder:Ar,mathmlBuilder:_r});F("\\nonumber","\\gdef\\@eqnsw{0}");F("\\notag","\\nonumber");jt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(l,t){throw new Ot(l.funcName+" valid only within array environment")}});var Nb=Ev;jt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];if(r.type!=="ordgroup")throw new Ot("Invalid environment name",r);for(var a="",o=0;o<r.body.length;++o)a+=we(r.body[o],"textord").text;if(i==="\\begin"){if(!Nb.hasOwnProperty(a))throw new Ot("No such environment: "+a,r);var u=Nb[a],{args:h,optArgs:f}=e.parseArguments("\\begin{"+a+"}",u),m={mode:e.mode,envName:a,parser:e},p=u.handler(m,h,f);e.expect("\\end",!1);var b=e.nextToken,v=we(e.parseFunction(),"environment");if(v.name!==a)throw new Ot("Mismatch: \\begin{"+a+"} matched by \\end{"+v.name+"}",b);return p}return{type:"environment",mode:e.mode,name:a,nameGroup:r}}});var Cv=(l,t)=>{var e=l.font,i=t.withFont(e);return Oe(l.body,i)},Mv=(l,t)=>{var e=l.font,i=t.withFont(e);return We(l.body,i)},Ob={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};jt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=iu(t[0]),a=i;return a in Ob&&(a=Ob[a]),{type:"font",mode:e.mode,font:a.slice(1),body:r}},htmlBuilder:Cv,mathmlBuilder:Mv});jt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(l,t)=>{var{parser:e}=l,i=t[0],r=Be.isCharacterBox(i);return{type:"mclass",mode:e.mode,mclass:gu(i),body:[{type:"font",mode:e.mode,font:"boldsymbol",body:i}],isCharacterBox:r}}});jt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(l,t)=>{var{parser:e,funcName:i,breakOnTokenText:r}=l,{mode:a}=e,o=e.parseExpression(!0,r),u="math"+i.slice(1);return{type:"font",mode:a,font:u,body:{type:"ordgroup",mode:e.mode,body:o}}},htmlBuilder:Cv,mathmlBuilder:Mv});var Rv=(l,t)=>{var e=t;return l==="display"?e=e.id>=oe.SCRIPT.id?e.text():oe.DISPLAY:l==="text"&&e.size===oe.DISPLAY.size?e=oe.TEXT:l==="script"?e=oe.SCRIPT:l==="scriptscript"&&(e=oe.SCRIPTSCRIPT),e},ym=(l,t)=>{var e=Rv(l.size,t.style),i=e.fracNum(),r=e.fracDen(),a;a=t.havingStyle(i);var o=Oe(l.numer,a,t);if(l.continued){var u=8.5/t.fontMetrics().ptPerEm,h=3.5/t.fontMetrics().ptPerEm;o.height=o.height<u?u:o.height,o.depth=o.depth<h?h:o.depth}a=t.havingStyle(r);var f=Oe(l.denom,a,t),m,p,b;l.hasBarLine?(l.barSize?(p=ci(l.barSize,t),m=lt.makeLineSpan("frac-line",t,p)):m=lt.makeLineSpan("frac-line",t),p=m.height,b=m.height):(m=null,p=0,b=t.fontMetrics().defaultRuleThickness);var v,w,x;e.size===oe.DISPLAY.size||l.size==="display"?(v=t.fontMetrics().num1,p>0?w=3*b:w=7*b,x=t.fontMetrics().denom1):(p>0?(v=t.fontMetrics().num2,w=b):(v=t.fontMetrics().num3,w=3*b),x=t.fontMetrics().denom2);var _;if(m){var T=t.fontMetrics().axisHeight;v-o.depth-(T+.5*p)<w&&(v+=w-(v-o.depth-(T+.5*p))),T-.5*p-(f.height-x)<w&&(x+=w-(T-.5*p-(f.height-x)));var M=-(T-.5*p);_=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:x},{type:"elem",elem:m,shift:M},{type:"elem",elem:o,shift:-v}]},t)}else{var A=v-o.depth-(f.height-x);A<w&&(v+=.5*(w-A),x+=.5*(w-A)),_=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:x},{type:"elem",elem:o,shift:-v}]},t)}a=t.havingStyle(e),_.height*=a.sizeMultiplier/t.sizeMultiplier,_.depth*=a.sizeMultiplier/t.sizeMultiplier;var R;e.size===oe.DISPLAY.size?R=t.fontMetrics().delim1:e.size===oe.SCRIPTSCRIPT.size?R=t.havingStyle(oe.SCRIPT).fontMetrics().delim2:R=t.fontMetrics().delim2;var D,L;return l.leftDelim==null?D=$l(t,["mopen"]):D=Qr.customSizedDelim(l.leftDelim,R,!0,t.havingStyle(e),l.mode,["mopen"]),l.continued?L=lt.makeSpan([]):l.rightDelim==null?L=$l(t,["mclose"]):L=Qr.customSizedDelim(l.rightDelim,R,!0,t.havingStyle(e),l.mode,["mclose"]),lt.makeSpan(["mord"].concat(a.sizingClasses(t)),[D,lt.makeSpan(["mfrac"],[_]),L],t)},xm=(l,t)=>{var e=new Dt.MathNode("mfrac",[We(l.numer,t),We(l.denom,t)]);if(!l.hasBarLine)e.setAttribute("linethickness","0px");else if(l.barSize){var i=ci(l.barSize,t);e.setAttribute("linethickness",Bt(i))}var r=Rv(l.size,t.style);if(r.size!==t.style.size){e=new Dt.MathNode("mstyle",[e]);var a=r.size===oe.DISPLAY.size?"true":"false";e.setAttribute("displaystyle",a),e.setAttribute("scriptlevel","0")}if(l.leftDelim!=null||l.rightDelim!=null){var o=[];if(l.leftDelim!=null){var u=new Dt.MathNode("mo",[new Dt.TextNode(l.leftDelim.replace("\\",""))]);u.setAttribute("fence","true"),o.push(u)}if(o.push(e),l.rightDelim!=null){var h=new Dt.MathNode("mo",[new Dt.TextNode(l.rightDelim.replace("\\",""))]);h.setAttribute("fence","true"),o.push(h)}return um(o)}return e};jt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0],a=t[1],o,u=null,h=null,f="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,u="(",h=")";break;case"\\\\bracefrac":o=!1,u="\\{",h="\\}";break;case"\\\\brackfrac":o=!1,u="[",h="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:e.mode,continued:!1,numer:r,denom:a,hasBarLine:o,leftDelim:u,rightDelim:h,size:f,barSize:null}},htmlBuilder:ym,mathmlBuilder:xm});jt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0],a=t[1];return{type:"genfrac",mode:e.mode,continued:!0,numer:r,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});jt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(l){var{parser:t,funcName:e,token:i}=l,r;switch(e){case"\\over":r="\\frac";break;case"\\choose":r="\\binom";break;case"\\atop":r="\\\\atopfrac";break;case"\\brace":r="\\\\bracefrac";break;case"\\brack":r="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:r,token:i}}});var zb=["display","text","script","scriptscript"],Lb=function(t){var e=null;return t.length>0&&(e=t,e=e==="."?null:e),e};jt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(l,t){var{parser:e}=l,i=t[4],r=t[5],a=iu(t[0]),o=a.type==="atom"&&a.family==="open"?Lb(a.text):null,u=iu(t[1]),h=u.type==="atom"&&u.family==="close"?Lb(u.text):null,f=we(t[2],"size"),m,p=null;f.isBlank?m=!0:(p=f.value,m=p.number>0);var b="auto",v=t[3];if(v.type==="ordgroup"){if(v.body.length>0){var w=we(v.body[0],"textord");b=zb[Number(w.text)]}}else v=we(v,"textord"),b=zb[Number(v.text)];return{type:"genfrac",mode:e.mode,numer:i,denom:r,continued:!1,hasBarLine:m,barSize:p,leftDelim:o,rightDelim:h,size:b}},htmlBuilder:ym,mathmlBuilder:xm});jt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(l,t){var{parser:e,funcName:i,token:r}=l;return{type:"infix",mode:e.mode,replaceWith:"\\\\abovefrac",size:we(t[0],"size").value,token:r}}});jt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0],a=E8(we(t[1],"infix").size),o=t[2],u=a.number>0;return{type:"genfrac",mode:e.mode,numer:r,denom:o,continued:!1,hasBarLine:u,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:ym,mathmlBuilder:xm});var Dv=(l,t)=>{var e=t.style,i,r;l.type==="supsub"?(i=l.sup?Oe(l.sup,t.havingStyle(e.sup()),t):Oe(l.sub,t.havingStyle(e.sub()),t),r=we(l.base,"horizBrace")):r=we(l,"horizBrace");var a=Oe(r.base,t.havingBaseStyle(oe.DISPLAY)),o=es.svgSpan(r,t),u;if(r.isOver?(u=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:o}]},t),u.children[0].children[0].children[1].classes.push("svg-align")):(u=lt.makeVList({positionType:"bottom",positionData:a.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:a}]},t),u.children[0].children[0].children[0].classes.push("svg-align")),i){var h=lt.makeSpan(["mord",r.isOver?"mover":"munder"],[u],t);r.isOver?u=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:h},{type:"kern",size:.2},{type:"elem",elem:i}]},t):u=lt.makeVList({positionType:"bottom",positionData:h.depth+.2+i.height+i.depth,children:[{type:"elem",elem:i},{type:"kern",size:.2},{type:"elem",elem:h}]},t)}return lt.makeSpan(["mord",r.isOver?"mover":"munder"],[u],t)},Wx=(l,t)=>{var e=es.mathMLnode(l.label);return new Dt.MathNode(l.isOver?"mover":"munder",[We(l.base,t),e])};jt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(l,t){var{parser:e,funcName:i}=l;return{type:"horizBrace",mode:e.mode,label:i,isOver:/^\\over/.test(i),base:t[0]}},htmlBuilder:Dv,mathmlBuilder:Wx});jt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[1],r=we(t[0],"url").url;return e.settings.isTrusted({command:"\\href",url:r})?{type:"href",mode:e.mode,href:r,body:xi(i)}:e.formatUnsupportedCmd("\\href")},htmlBuilder:(l,t)=>{var e=Di(l.body,t,!1);return lt.makeAnchor(l.href,[],e,t)},mathmlBuilder:(l,t)=>{var e=js(l.body,t);return e instanceof Dn||(e=new Dn("mrow",[e])),e.setAttribute("href",l.href),e}});jt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=we(t[0],"url").url;if(!e.settings.isTrusted({command:"\\url",url:i}))return e.formatUnsupportedCmd("\\url");for(var r=[],a=0;a<i.length;a++){var o=i[a];o==="~"&&(o="\\textasciitilde"),r.push({type:"textord",mode:"text",text:o})}var u={type:"text",mode:e.mode,font:"\\texttt",body:r};return{type:"href",mode:e.mode,href:i,body:xi(u)}}});jt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(l,t){var{parser:e}=l;return{type:"hbox",mode:e.mode,body:xi(t[0])}},htmlBuilder(l,t){var e=Di(l.body,t,!1);return lt.makeFragment(e)},mathmlBuilder(l,t){return new Dt.MathNode("mrow",wn(l.body,t))}});jt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(l,t)=>{var{parser:e,funcName:i,token:r}=l,a=we(t[0],"raw").string,o=t[1];e.settings.strict&&e.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var u,h={};switch(i){case"\\htmlClass":h.class=a,u={command:"\\htmlClass",class:a};break;case"\\htmlId":h.id=a,u={command:"\\htmlId",id:a};break;case"\\htmlStyle":h.style=a,u={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var f=a.split(","),m=0;m<f.length;m++){var p=f[m].split("=");if(p.length!==2)throw new Ot("Error parsing key-value for \\htmlData");h["data-"+p[0].trim()]=p[1].trim()}u={command:"\\htmlData",attributes:h};break}default:throw new Error("Unrecognized html command")}return e.settings.isTrusted(u)?{type:"html",mode:e.mode,attributes:h,body:xi(o)}:e.formatUnsupportedCmd(i)},htmlBuilder:(l,t)=>{var e=Di(l.body,t,!1),i=["enclosing"];l.attributes.class&&i.push(...l.attributes.class.trim().split(/\s+/));var r=lt.makeSpan(i,e,t);for(var a in l.attributes)a!=="class"&&l.attributes.hasOwnProperty(a)&&r.setAttribute(a,l.attributes[a]);return r},mathmlBuilder:(l,t)=>js(l.body,t)});jt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l;return{type:"htmlmathml",mode:e.mode,html:xi(t[0]),mathml:xi(t[1])}},htmlBuilder:(l,t)=>{var e=Di(l.html,t,!1);return lt.makeFragment(e)},mathmlBuilder:(l,t)=>js(l.mathml,t)});var ef=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var e=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!e)throw new Ot("Invalid size: '"+t+"' in \\includegraphics");var i={number:+(e[1]+e[2]),unit:e[3]};if(!W4(i))throw new Ot("Invalid unit: '"+i.unit+"' in \\includegraphics.");return i};jt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(l,t,e)=>{var{parser:i}=l,r={number:0,unit:"em"},a={number:.9,unit:"em"},o={number:0,unit:"em"},u="";if(e[0])for(var h=we(e[0],"raw").string,f=h.split(","),m=0;m<f.length;m++){var p=f[m].split("=");if(p.length===2){var b=p[1].trim();switch(p[0].trim()){case"alt":u=b;break;case"width":r=ef(b);break;case"height":a=ef(b);break;case"totalheight":o=ef(b);break;default:throw new Ot("Invalid key: '"+p[0]+"' in \\includegraphics.")}}}var v=we(t[0],"url").url;return u===""&&(u=v,u=u.replace(/^.*[\\/]/,""),u=u.substring(0,u.lastIndexOf("."))),i.settings.isTrusted({command:"\\includegraphics",url:v})?{type:"includegraphics",mode:i.mode,alt:u,width:r,height:a,totalheight:o,src:v}:i.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(l,t)=>{var e=ci(l.height,t),i=0;l.totalheight.number>0&&(i=ci(l.totalheight,t)-e);var r=0;l.width.number>0&&(r=ci(l.width,t));var a={height:Bt(e+i)};r>0&&(a.width=Bt(r)),i>0&&(a.verticalAlign=Bt(-i));var o=new W8(l.src,l.alt,a);return o.height=e,o.depth=i,o},mathmlBuilder:(l,t)=>{var e=new Dt.MathNode("mglyph",[]);e.setAttribute("alt",l.alt);var i=ci(l.height,t),r=0;if(l.totalheight.number>0&&(r=ci(l.totalheight,t)-i,e.setAttribute("valign",Bt(-r))),e.setAttribute("height",Bt(i+r)),l.width.number>0){var a=ci(l.width,t);e.setAttribute("width",Bt(a))}return e.setAttribute("src",l.src),e}});jt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(l,t){var{parser:e,funcName:i}=l,r=we(t[0],"size");if(e.settings.strict){var a=i[1]==="m",o=r.value.unit==="mu";a?(o||e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" supports only mu units, "+("not "+r.value.unit+" units")),e.mode!=="math"&&e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" works only in math mode")):o&&e.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+i+" doesn't support mu units")}return{type:"kern",mode:e.mode,dimension:r.value}},htmlBuilder(l,t){return lt.makeGlue(l.dimension,t)},mathmlBuilder(l,t){var e=ci(l.dimension,t);return new Dt.SpaceNode(e)}});jt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0];return{type:"lap",mode:e.mode,alignment:i.slice(5),body:r}},htmlBuilder:(l,t)=>{var e;l.alignment==="clap"?(e=lt.makeSpan([],[Oe(l.body,t)]),e=lt.makeSpan(["inner"],[e],t)):e=lt.makeSpan(["inner"],[Oe(l.body,t)]);var i=lt.makeSpan(["fix"],[]),r=lt.makeSpan([l.alignment],[e,i],t),a=lt.makeSpan(["strut"]);return a.style.height=Bt(r.height+r.depth),r.depth&&(a.style.verticalAlign=Bt(-r.depth)),r.children.unshift(a),r=lt.makeSpan(["thinbox"],[r],t),lt.makeSpan(["mord","vbox"],[r],t)},mathmlBuilder:(l,t)=>{var e=new Dt.MathNode("mpadded",[We(l.body,t)]);if(l.alignment!=="rlap"){var i=l.alignment==="llap"?"-1":"-0.5";e.setAttribute("lspace",i+"width")}return e.setAttribute("width","0px"),e}});jt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(l,t){var{funcName:e,parser:i}=l,r=i.mode;i.switchMode("math");var a=e==="\\("?"\\)":"$",o=i.parseExpression(!1,a);return i.expect(a),i.switchMode(r),{type:"styling",mode:i.mode,style:"text",body:o}}});jt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(l,t){throw new Ot("Mismatched "+l.funcName)}});var Bb=(l,t)=>{switch(t.style.size){case oe.DISPLAY.size:return l.display;case oe.TEXT.size:return l.text;case oe.SCRIPT.size:return l.script;case oe.SCRIPTSCRIPT.size:return l.scriptscript;default:return l.text}};jt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(l,t)=>{var{parser:e}=l;return{type:"mathchoice",mode:e.mode,display:xi(t[0]),text:xi(t[1]),script:xi(t[2]),scriptscript:xi(t[3])}},htmlBuilder:(l,t)=>{var e=Bb(l,t),i=Di(e,t,!1);return lt.makeFragment(i)},mathmlBuilder:(l,t)=>{var e=Bb(l,t);return js(e,t)}});var Nv=(l,t,e,i,r,a,o)=>{l=lt.makeSpan([],[l]);var u=e&&Be.isCharacterBox(e),h,f;if(t){var m=Oe(t,i.havingStyle(r.sup()),i);f={elem:m,kern:Math.max(i.fontMetrics().bigOpSpacing1,i.fontMetrics().bigOpSpacing3-m.depth)}}if(e){var p=Oe(e,i.havingStyle(r.sub()),i);h={elem:p,kern:Math.max(i.fontMetrics().bigOpSpacing2,i.fontMetrics().bigOpSpacing4-p.height)}}var b;if(f&&h){var v=i.fontMetrics().bigOpSpacing5+h.elem.height+h.elem.depth+h.kern+l.depth+o;b=lt.makeVList({positionType:"bottom",positionData:v,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:Bt(-a)},{type:"kern",size:h.kern},{type:"elem",elem:l},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Bt(a)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else if(h){var w=l.height-o;b=lt.makeVList({positionType:"top",positionData:w,children:[{type:"kern",size:i.fontMetrics().bigOpSpacing5},{type:"elem",elem:h.elem,marginLeft:Bt(-a)},{type:"kern",size:h.kern},{type:"elem",elem:l}]},i)}else if(f){var x=l.depth+o;b=lt.makeVList({positionType:"bottom",positionData:x,children:[{type:"elem",elem:l},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Bt(a)},{type:"kern",size:i.fontMetrics().bigOpSpacing5}]},i)}else return l;var _=[b];if(h&&a!==0&&!u){var A=lt.makeSpan(["mspace"],[],i);A.style.marginRight=Bt(a),_.unshift(A)}return lt.makeSpan(["mop","op-limits"],_,i)},Ov=["\\smallint"],So=(l,t)=>{var e,i,r=!1,a;l.type==="supsub"?(e=l.sup,i=l.sub,a=we(l.base,"op"),r=!0):a=we(l,"op");var o=t.style,u=!1;o.size===oe.DISPLAY.size&&a.symbol&&!Ov.includes(a.name)&&(u=!0);var h;if(a.symbol){var f=u?"Size2-Regular":"Size1-Regular",m="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(m=a.name.slice(1),a.name=m==="oiint"?"\\iint":"\\iiint"),h=lt.makeSymbol(a.name,f,"math",t,["mop","op-symbol",u?"large-op":"small-op"]),m.length>0){var p=h.italic,b=lt.staticSvg(m+"Size"+(u?"2":"1"),t);h=lt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:0},{type:"elem",elem:b,shift:u?.08:0}]},t),a.name="\\"+m,h.classes.unshift("mop"),h.italic=p}}else if(a.body){var v=Di(a.body,t,!0);v.length===1&&v[0]instanceof Xn?(h=v[0],h.classes[0]="mop"):h=lt.makeSpan(["mop"],v,t)}else{for(var w=[],x=1;x<a.name.length;x++)w.push(lt.mathsym(a.name[x],a.mode,t));h=lt.makeSpan(["mop"],w,t)}var _=0,A=0;return(h instanceof Xn||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(_=(h.height-h.depth)/2-t.fontMetrics().axisHeight,A=h.italic),r?Nv(h,e,i,t,o,A,_):(_&&(h.style.position="relative",h.style.top=Bt(_)),h)},nc=(l,t)=>{var e;if(l.symbol)e=new Dn("mo",[Kn(l.name,l.mode)]),Ov.includes(l.name)&&e.setAttribute("largeop","false");else if(l.body)e=new Dn("mo",wn(l.body,t));else{e=new Dn("mi",[new xr(l.name.slice(1))]);var i=new Dn("mo",[Kn("","text")]);l.parentIsSupSub?e=new Dn("mrow",[e,i]):e=ov([e,i])}return e},Zx={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};jt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=i;return r.length===1&&(r=Zx[r]),{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:So,mathmlBuilder:nc});jt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:xi(i)}},htmlBuilder:So,mathmlBuilder:nc});var Qx={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};jt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(l){var{parser:t,funcName:e}=l;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:e}},htmlBuilder:So,mathmlBuilder:nc});jt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(l){var{parser:t,funcName:e}=l;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:e}},htmlBuilder:So,mathmlBuilder:nc});jt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(l){var{parser:t,funcName:e}=l,i=e;return i.length===1&&(i=Qx[i]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:So,mathmlBuilder:nc});var zv=(l,t)=>{var e,i,r=!1,a;l.type==="supsub"?(e=l.sup,i=l.sub,a=we(l.base,"operatorname"),r=!0):a=we(l,"operatorname");var o;if(a.body.length>0){for(var u=a.body.map(p=>{var b=p.text;return typeof b=="string"?{type:"textord",mode:p.mode,text:b}:p}),h=Di(u,t.withFont("mathrm"),!0),f=0;f<h.length;f++){var m=h[f];m instanceof Xn&&(m.text=m.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=lt.makeSpan(["mop"],h,t)}else o=lt.makeSpan(["mop"],[],t);return r?Nv(o,e,i,t,t.style,0,0):o},Jx=(l,t)=>{for(var e=wn(l.body,t.withFont("mathrm")),i=!0,r=0;r<e.length;r++){var a=e[r];if(!(a instanceof Dt.SpaceNode))if(a instanceof Dt.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=a.children[0];a.children.length===1&&o instanceof Dt.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):i=!1;break}default:i=!1}else i=!1}if(i){var u=e.map(m=>m.toText()).join("");e=[new Dt.TextNode(u)]}var h=new Dt.MathNode("mi",e);h.setAttribute("mathvariant","normal");var f=new Dt.MathNode("mo",[Kn("","text")]);return l.parentIsSupSub?new Dt.MathNode("mrow",[h,f]):Dt.newDocumentFragment([h,f])};jt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(l,t)=>{var{parser:e,funcName:i}=l,r=t[0];return{type:"operatorname",mode:e.mode,body:xi(r),alwaysHandleSupSub:i==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:zv,mathmlBuilder:Jx});F("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Aa({type:"ordgroup",htmlBuilder(l,t){return l.semisimple?lt.makeFragment(Di(l.body,t,!1)):lt.makeSpan(["mord"],Di(l.body,t,!0),t)},mathmlBuilder(l,t){return js(l.body,t,!0)}});jt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(l,t){var{parser:e}=l,i=t[0];return{type:"overline",mode:e.mode,body:i}},htmlBuilder(l,t){var e=Oe(l.body,t.havingCrampedStyle()),i=lt.makeLineSpan("overline-line",t),r=t.fontMetrics().defaultRuleThickness,a=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e},{type:"kern",size:3*r},{type:"elem",elem:i},{type:"kern",size:r}]},t);return lt.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(l,t){var e=new Dt.MathNode("mo",[new Dt.TextNode("")]);e.setAttribute("stretchy","true");var i=new Dt.MathNode("mover",[We(l.body,t),e]);return i.setAttribute("accent","true"),i}});jt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"phantom",mode:e.mode,body:xi(i)}},htmlBuilder:(l,t)=>{var e=Di(l.body,t.withPhantom(),!1);return lt.makeFragment(e)},mathmlBuilder:(l,t)=>{var e=wn(l.body,t);return new Dt.MathNode("mphantom",e)}});jt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"hphantom",mode:e.mode,body:i}},htmlBuilder:(l,t)=>{var e=lt.makeSpan([],[Oe(l.body,t.withPhantom())]);if(e.height=0,e.depth=0,e.children)for(var i=0;i<e.children.length;i++)e.children[i].height=0,e.children[i].depth=0;return e=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e}]},t),lt.makeSpan(["mord"],[e],t)},mathmlBuilder:(l,t)=>{var e=wn(xi(l.body),t),i=new Dt.MathNode("mphantom",e),r=new Dt.MathNode("mpadded",[i]);return r.setAttribute("height","0px"),r.setAttribute("depth","0px"),r}});jt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(l,t)=>{var{parser:e}=l,i=t[0];return{type:"vphantom",mode:e.mode,body:i}},htmlBuilder:(l,t)=>{var e=lt.makeSpan(["inner"],[Oe(l.body,t.withPhantom())]),i=lt.makeSpan(["fix"],[]);return lt.makeSpan(["mord","rlap"],[e,i],t)},mathmlBuilder:(l,t)=>{var e=wn(xi(l.body),t),i=new Dt.MathNode("mphantom",e),r=new Dt.MathNode("mpadded",[i]);return r.setAttribute("width","0px"),r}});jt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(l,t){var{parser:e}=l,i=we(t[0],"size").value,r=t[1];return{type:"raisebox",mode:e.mode,dy:i,body:r}},htmlBuilder(l,t){var e=Oe(l.body,t),i=ci(l.dy,t);return lt.makeVList({positionType:"shift",positionData:-i,children:[{type:"elem",elem:e}]},t)},mathmlBuilder(l,t){var e=new Dt.MathNode("mpadded",[We(l.body,t)]),i=l.dy.number+l.dy.unit;return e.setAttribute("voffset",i),e}});jt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(l){var{parser:t}=l;return{type:"internal",mode:t.mode}}});jt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(l,t,e){var{parser:i}=l,r=e[0],a=we(t[0],"size"),o=we(t[1],"size");return{type:"rule",mode:i.mode,shift:r&&we(r,"size").value,width:a.value,height:o.value}},htmlBuilder(l,t){var e=lt.makeSpan(["mord","rule"],[],t),i=ci(l.width,t),r=ci(l.height,t),a=l.shift?ci(l.shift,t):0;return e.style.borderRightWidth=Bt(i),e.style.borderTopWidth=Bt(r),e.style.bottom=Bt(a),e.width=i,e.height=r+a,e.depth=-a,e.maxFontSize=r*1.125*t.sizeMultiplier,e},mathmlBuilder(l,t){var e=ci(l.width,t),i=ci(l.height,t),r=l.shift?ci(l.shift,t):0,a=t.color&&t.getColor()||"black",o=new Dt.MathNode("mspace");o.setAttribute("mathbackground",a),o.setAttribute("width",Bt(e)),o.setAttribute("height",Bt(i));var u=new Dt.MathNode("mpadded",[o]);return r>=0?u.setAttribute("height",Bt(r)):(u.setAttribute("height",Bt(r)),u.setAttribute("depth",Bt(-r))),u.setAttribute("voffset",Bt(r)),u}});function Lv(l,t,e){for(var i=Di(l,t,!1),r=t.sizeMultiplier/e.sizeMultiplier,a=0;a<i.length;a++){var o=i[a].classes.indexOf("sizing");o<0?Array.prototype.push.apply(i[a].classes,t.sizingClasses(e)):i[a].classes[o+1]==="reset-size"+t.size&&(i[a].classes[o+1]="reset-size"+e.size),i[a].height*=r,i[a].depth*=r}return lt.makeFragment(i)}var Ib=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],tw=(l,t)=>{var e=t.havingSize(l.size);return Lv(l.body,e,t)};jt({type:"sizing",names:Ib,props:{numArgs:0,allowedInText:!0},handler:(l,t)=>{var{breakOnTokenText:e,funcName:i,parser:r}=l,a=r.parseExpression(!1,e);return{type:"sizing",mode:r.mode,size:Ib.indexOf(i)+1,body:a}},htmlBuilder:tw,mathmlBuilder:(l,t)=>{var e=t.havingSize(l.size),i=wn(l.body,e),r=new Dt.MathNode("mstyle",i);return r.setAttribute("mathsize",Bt(e.sizeMultiplier)),r}});jt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(l,t,e)=>{var{parser:i}=l,r=!1,a=!1,o=e[0]&&we(e[0],"ordgroup");if(o)for(var u="",h=0;h<o.body.length;++h){var f=o.body[h];if(u=f.text,u==="t")r=!0;else if(u==="b")a=!0;else{r=!1,a=!1;break}}else r=!0,a=!0;var m=t[0];return{type:"smash",mode:i.mode,body:m,smashHeight:r,smashDepth:a}},htmlBuilder:(l,t)=>{var e=lt.makeSpan([],[Oe(l.body,t)]);if(!l.smashHeight&&!l.smashDepth)return e;if(l.smashHeight&&(e.height=0,e.children))for(var i=0;i<e.children.length;i++)e.children[i].height=0;if(l.smashDepth&&(e.depth=0,e.children))for(var r=0;r<e.children.length;r++)e.children[r].depth=0;var a=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e}]},t);return lt.makeSpan(["mord"],[a],t)},mathmlBuilder:(l,t)=>{var e=new Dt.MathNode("mpadded",[We(l.body,t)]);return l.smashHeight&&e.setAttribute("height","0px"),l.smashDepth&&e.setAttribute("depth","0px"),e}});jt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(l,t,e){var{parser:i}=l,r=e[0],a=t[0];return{type:"sqrt",mode:i.mode,body:a,index:r}},htmlBuilder(l,t){var e=Oe(l.body,t.havingCrampedStyle());e.height===0&&(e.height=t.fontMetrics().xHeight),e=lt.wrapFragment(e,t);var i=t.fontMetrics(),r=i.defaultRuleThickness,a=r;t.style.id<oe.TEXT.id&&(a=t.fontMetrics().xHeight);var o=r+a/4,u=e.height+e.depth+o+r,{span:h,ruleWidth:f,advanceWidth:m}=Qr.sqrtImage(u,t),p=h.height-f;p>e.height+e.depth+o&&(o=(o+p-e.height-e.depth)/2);var b=h.height-e.height-o-f;e.style.paddingLeft=Bt(m);var v=lt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:e,wrapperClasses:["svg-align"]},{type:"kern",size:-(e.height+b)},{type:"elem",elem:h},{type:"kern",size:f}]},t);if(l.index){var w=t.havingStyle(oe.SCRIPTSCRIPT),x=Oe(l.index,w,t),_=.6*(v.height-v.depth),A=lt.makeVList({positionType:"shift",positionData:-_,children:[{type:"elem",elem:x}]},t),T=lt.makeSpan(["root"],[A]);return lt.makeSpan(["mord","sqrt"],[T,v],t)}else return lt.makeSpan(["mord","sqrt"],[v],t)},mathmlBuilder(l,t){var{body:e,index:i}=l;return i?new Dt.MathNode("mroot",[We(e,t),We(i,t)]):new Dt.MathNode("msqrt",[We(e,t)])}});var Fb={display:oe.DISPLAY,text:oe.TEXT,script:oe.SCRIPT,scriptscript:oe.SCRIPTSCRIPT};jt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(l,t){var{breakOnTokenText:e,funcName:i,parser:r}=l,a=r.parseExpression(!0,e),o=i.slice(1,i.length-5);return{type:"styling",mode:r.mode,style:o,body:a}},htmlBuilder(l,t){var e=Fb[l.style],i=t.havingStyle(e).withFont("");return Lv(l.body,i,t)},mathmlBuilder(l,t){var e=Fb[l.style],i=t.havingStyle(e),r=wn(l.body,i),a=new Dt.MathNode("mstyle",r),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},u=o[l.style];return a.setAttribute("scriptlevel",u[0]),a.setAttribute("displaystyle",u[1]),a}});var ew=function(t,e){var i=t.base;if(i)if(i.type==="op"){var r=i.limits&&(e.style.size===oe.DISPLAY.size||i.alwaysHandleSupSub);return r?So:null}else if(i.type==="operatorname"){var a=i.alwaysHandleSupSub&&(e.style.size===oe.DISPLAY.size||i.limits);return a?zv:null}else{if(i.type==="accent")return Be.isCharacterBox(i.base)?fm:null;if(i.type==="horizBrace"){var o=!t.sub;return o===i.isOver?Dv:null}else return null}else return null};Aa({type:"supsub",htmlBuilder(l,t){var e=ew(l,t);if(e)return e(l,t);var{base:i,sup:r,sub:a}=l,o=Oe(i,t),u,h,f=t.fontMetrics(),m=0,p=0,b=i&&Be.isCharacterBox(i);if(r){var v=t.havingStyle(t.style.sup());u=Oe(r,v,t),b||(m=o.height-v.fontMetrics().supDrop*v.sizeMultiplier/t.sizeMultiplier)}if(a){var w=t.havingStyle(t.style.sub());h=Oe(a,w,t),b||(p=o.depth+w.fontMetrics().subDrop*w.sizeMultiplier/t.sizeMultiplier)}var x;t.style===oe.DISPLAY?x=f.sup1:t.style.cramped?x=f.sup3:x=f.sup2;var _=t.sizeMultiplier,A=Bt(.5/f.ptPerEm/_),T=null;if(h){var M=l.base&&l.base.type==="op"&&l.base.name&&(l.base.name==="\\oiint"||l.base.name==="\\oiiint");(o instanceof Xn||M)&&(T=Bt(-o.italic))}var R;if(u&&h){m=Math.max(m,x,u.depth+.25*f.xHeight),p=Math.max(p,f.sub2);var D=f.defaultRuleThickness,L=4*D;if(m-u.depth-(h.height-p)<L){p=L-(m-u.depth)+h.height;var z=.8*f.xHeight-(m-u.depth);z>0&&(m+=z,p-=z)}var q=[{type:"elem",elem:h,shift:p,marginRight:A,marginLeft:T},{type:"elem",elem:u,shift:-m,marginRight:A}];R=lt.makeVList({positionType:"individualShift",children:q},t)}else if(h){p=Math.max(p,f.sub1,h.height-.8*f.xHeight);var U=[{type:"elem",elem:h,marginLeft:T,marginRight:A}];R=lt.makeVList({positionType:"shift",positionData:p,children:U},t)}else if(u)m=Math.max(m,x,u.depth+.25*f.xHeight),R=lt.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:u,marginRight:A}]},t);else throw new Error("supsub must have either sup or sub.");var it=kf(o,"right")||"mord";return lt.makeSpan([it],[o,lt.makeSpan(["msupsub"],[R])],t)},mathmlBuilder(l,t){var e=!1,i,r;l.base&&l.base.type==="horizBrace"&&(r=!!l.sup,r===l.base.isOver&&(e=!0,i=l.base.isOver)),l.base&&(l.base.type==="op"||l.base.type==="operatorname")&&(l.base.parentIsSupSub=!0);var a=[We(l.base,t)];l.sub&&a.push(We(l.sub,t)),l.sup&&a.push(We(l.sup,t));var o;if(e)o=i?"mover":"munder";else if(l.sub)if(l.sup){var f=l.base;f&&f.type==="op"&&f.limits&&t.style===oe.DISPLAY||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(t.style===oe.DISPLAY||f.limits)?o="munderover":o="msubsup"}else{var h=l.base;h&&h.type==="op"&&h.limits&&(t.style===oe.DISPLAY||h.alwaysHandleSupSub)||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(h.limits||t.style===oe.DISPLAY)?o="munder":o="msub"}else{var u=l.base;u&&u.type==="op"&&u.limits&&(t.style===oe.DISPLAY||u.alwaysHandleSupSub)||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(u.limits||t.style===oe.DISPLAY)?o="mover":o="msup"}return new Dt.MathNode(o,a)}});Aa({type:"atom",htmlBuilder(l,t){return lt.mathsym(l.text,l.mode,t,["m"+l.family])},mathmlBuilder(l,t){var e=new Dt.MathNode("mo",[Kn(l.text,l.mode)]);if(l.family==="bin"){var i=hm(l,t);i==="bold-italic"&&e.setAttribute("mathvariant",i)}else l.family==="punct"?e.setAttribute("separator","true"):(l.family==="open"||l.family==="close")&&e.setAttribute("stretchy","false");return e}});var Bv={mi:"italic",mn:"normal",mtext:"normal"};Aa({type:"mathord",htmlBuilder(l,t){return lt.makeOrd(l,t,"mathord")},mathmlBuilder(l,t){var e=new Dt.MathNode("mi",[Kn(l.text,l.mode,t)]),i=hm(l,t)||"italic";return i!==Bv[e.type]&&e.setAttribute("mathvariant",i),e}});Aa({type:"textord",htmlBuilder(l,t){return lt.makeOrd(l,t,"textord")},mathmlBuilder(l,t){var e=Kn(l.text,l.mode,t),i=hm(l,t)||"normal",r;return l.mode==="text"?r=new Dt.MathNode("mtext",[e]):/[0-9]/.test(l.text)?r=new Dt.MathNode("mn",[e]):l.text==="\\prime"?r=new Dt.MathNode("mo",[e]):r=new Dt.MathNode("mi",[e]),i!==Bv[r.type]&&r.setAttribute("mathvariant",i),r}});var nf={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},rf={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Aa({type:"spacing",htmlBuilder(l,t){if(rf.hasOwnProperty(l.text)){var e=rf[l.text].className||"";if(l.mode==="text"){var i=lt.makeOrd(l,t,"textord");return i.classes.push(e),i}else return lt.makeSpan(["mspace",e],[lt.mathsym(l.text,l.mode,t)],t)}else{if(nf.hasOwnProperty(l.text))return lt.makeSpan(["mspace",nf[l.text]],[],t);throw new Ot('Unknown type of space "'+l.text+'"')}},mathmlBuilder(l,t){var e;if(rf.hasOwnProperty(l.text))e=new Dt.MathNode("mtext",[new Dt.TextNode("")]);else{if(nf.hasOwnProperty(l.text))return new Dt.MathNode("mspace");throw new Ot('Unknown type of space "'+l.text+'"')}return e}});var Pb=()=>{var l=new Dt.MathNode("mtd",[]);return l.setAttribute("width","50%"),l};Aa({type:"tag",mathmlBuilder(l,t){var e=new Dt.MathNode("mtable",[new Dt.MathNode("mtr",[Pb(),new Dt.MathNode("mtd",[js(l.body,t)]),Pb(),new Dt.MathNode("mtd",[js(l.tag,t)])])]);return e.setAttribute("width","100%"),e}});var Ub={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},jb={"\\textbf":"textbf","\\textmd":"textmd"},iw={"\\textit":"textit","\\textup":"textup"},Hb=(l,t)=>{var e=l.font;if(e){if(Ub[e])return t.withTextFontFamily(Ub[e]);if(jb[e])return t.withTextFontWeight(jb[e]);if(e==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(iw[e])};jt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(l,t){var{parser:e,funcName:i}=l,r=t[0];return{type:"text",mode:e.mode,body:xi(r),font:i}},htmlBuilder(l,t){var e=Hb(l,t),i=Di(l.body,e,!0);return lt.makeSpan(["mord","text"],i,e)},mathmlBuilder(l,t){var e=Hb(l,t);return js(l.body,e)}});jt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(l,t){var{parser:e}=l;return{type:"underline",mode:e.mode,body:t[0]}},htmlBuilder(l,t){var e=Oe(l.body,t),i=lt.makeLineSpan("underline-line",t),r=t.fontMetrics().defaultRuleThickness,a=lt.makeVList({positionType:"top",positionData:e.height,children:[{type:"kern",size:r},{type:"elem",elem:i},{type:"kern",size:3*r},{type:"elem",elem:e}]},t);return lt.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(l,t){var e=new Dt.MathNode("mo",[new Dt.TextNode("")]);e.setAttribute("stretchy","true");var i=new Dt.MathNode("munder",[We(l.body,t),e]);return i.setAttribute("accentunder","true"),i}});jt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(l,t){var{parser:e}=l;return{type:"vcenter",mode:e.mode,body:t[0]}},htmlBuilder(l,t){var e=Oe(l.body,t),i=t.fontMetrics().axisHeight,r=.5*(e.height-i-(e.depth+i));return lt.makeVList({positionType:"shift",positionData:r,children:[{type:"elem",elem:e}]},t)},mathmlBuilder(l,t){return new Dt.MathNode("mpadded",[We(l.body,t)],["vcenter"])}});jt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(l,t,e){throw new Ot("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(l,t){for(var e=Gb(l),i=[],r=t.havingStyle(t.style.text()),a=0;a<e.length;a++){var o=e[a];o==="~"&&(o="\\textasciitilde"),i.push(lt.makeSymbol(o,"Typewriter-Regular",l.mode,r,["mord","texttt"]))}return lt.makeSpan(["mord","text"].concat(r.sizingClasses(t)),lt.tryCombineChars(i),r)},mathmlBuilder(l,t){var e=new Dt.TextNode(Gb(l)),i=new Dt.MathNode("mtext",[e]);return i.setAttribute("mathvariant","monospace"),i}});var Gb=l=>l.body.replace(/ /g,l.star?"":""),Ls=sv,Iv=`[ \r
	]`,nw="\\\\[a-zA-Z@]+",rw="\\\\[^\uD800-\uDFFF]",sw="("+nw+")"+Iv+"*",aw=`\\\\(
|[ \r	]+
?)[ \r	]*`,Rf="[-]",ow=new RegExp(Rf+"+$"),lw="("+Iv+"+)|"+(aw+"|")+"([!-\\[\\]---]"+(Rf+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Rf+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+sw)+("|"+rw+")");class qb{constructor(t,e){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=e,this.tokenRegex=new RegExp(lw,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,e){this.catcodes[t]=e}lex(){var t=this.input,e=this.tokenRegex.lastIndex;if(e===t.length)return new Nn("EOF",new xn(this,e,e));var i=this.tokenRegex.exec(t);if(i===null||i.index!==e)throw new Ot("Unexpected character: '"+t[e]+"'",new Nn(t[e],new xn(this,e,e+1)));var r=i[6]||i[3]||(i[2]?"\\ ":" ");if(this.catcodes[r]===14){var a=t.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new Nn(r,new xn(this,e,this.tokenRegex.lastIndex))}}class cw{constructor(t,e){t===void 0&&(t={}),e===void 0&&(e={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=e,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ot("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var e in t)t.hasOwnProperty(e)&&(t[e]==null?delete this.current[e]:this.current[e]=t[e])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,e,i){if(i===void 0&&(i=!1),i){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=e)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}e==null?delete this.current[t]:this.current[t]=e}}var uw=kv;F("\\noexpand",function(l){var t=l.popToken();return l.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});F("\\expandafter",function(l){var t=l.popToken();return l.expandOnce(!0),{tokens:[t],numArgs:0}});F("\\@firstoftwo",function(l){var t=l.consumeArgs(2);return{tokens:t[0],numArgs:0}});F("\\@secondoftwo",function(l){var t=l.consumeArgs(2);return{tokens:t[1],numArgs:0}});F("\\@ifnextchar",function(l){var t=l.consumeArgs(3);l.consumeSpaces();var e=l.future();return t[0].length===1&&t[0][0].text===e.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});F("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");F("\\TextOrMath",function(l){var t=l.consumeArgs(2);return l.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var $b={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};F("\\char",function(l){var t=l.popToken(),e,i="";if(t.text==="'")e=8,t=l.popToken();else if(t.text==='"')e=16,t=l.popToken();else if(t.text==="`")if(t=l.popToken(),t.text[0]==="\\")i=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new Ot("\\char` missing argument");i=t.text.charCodeAt(0)}else e=10;if(e){if(i=$b[t.text],i==null||i>=e)throw new Ot("Invalid base-"+e+" digit "+t.text);for(var r;(r=$b[l.future().text])!=null&&r<e;)i*=e,i+=r,l.popToken()}return"\\@char{"+i+"}"});var wm=(l,t,e,i)=>{var r=l.consumeArg().tokens;if(r.length!==1)throw new Ot("\\newcommand's first argument must be a macro name");var a=r[0].text,o=l.isDefined(a);if(o&&!t)throw new Ot("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!o&&!e)throw new Ot("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var u=0;if(r=l.consumeArg().tokens,r.length===1&&r[0].text==="["){for(var h="",f=l.expandNextToken();f.text!=="]"&&f.text!=="EOF";)h+=f.text,f=l.expandNextToken();if(!h.match(/^\s*[0-9]+\s*$/))throw new Ot("Invalid number of arguments: "+h);u=parseInt(h),r=l.consumeArg().tokens}return o&&i||l.macros.set(a,{tokens:r,numArgs:u}),""};F("\\newcommand",l=>wm(l,!1,!0,!1));F("\\renewcommand",l=>wm(l,!0,!1,!1));F("\\providecommand",l=>wm(l,!0,!0,!0));F("\\message",l=>{var t=l.consumeArgs(1)[0];return console.log(t.reverse().map(e=>e.text).join("")),""});F("\\errmessage",l=>{var t=l.consumeArgs(1)[0];return console.error(t.reverse().map(e=>e.text).join("")),""});F("\\show",l=>{var t=l.popToken(),e=t.text;return console.log(t,l.macros.get(e),Ls[e],Qe.math[e],Qe.text[e]),""});F("\\bgroup","{");F("\\egroup","}");F("~","\\nobreakspace");F("\\lq","`");F("\\rq","'");F("\\aa","\\r a");F("\\AA","\\r A");F("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");F("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");F("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");F("","\\mathscr{B}");F("","\\mathscr{E}");F("","\\mathscr{F}");F("","\\mathscr{H}");F("","\\mathscr{I}");F("","\\mathscr{L}");F("","\\mathscr{M}");F("","\\mathscr{R}");F("","\\mathfrak{C}");F("","\\mathfrak{H}");F("","\\mathfrak{Z}");F("\\Bbbk","\\Bbb{k}");F("","\\cdotp");F("\\llap","\\mathllap{\\textrm{#1}}");F("\\rlap","\\mathrlap{\\textrm{#1}}");F("\\clap","\\mathclap{\\textrm{#1}}");F("\\mathstrut","\\vphantom{(}");F("\\underbar","\\underline{\\text{#1}}");F("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');F("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");F("\\ne","\\neq");F("","\\neq");F("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");F("","\\notin");F("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");F("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");F("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");F("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");F("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");F("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");F("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");F("","\\perp");F("","\\mathclose{!\\mkern-0.8mu!}");F("","\\notni");F("","\\ulcorner");F("","\\urcorner");F("","\\llcorner");F("","\\lrcorner");F("","\\copyright");F("","\\textregistered");F("","\\textregistered");F("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');F("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');F("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');F("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');F("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");F("","\\vdots");F("\\varGamma","\\mathit{\\Gamma}");F("\\varDelta","\\mathit{\\Delta}");F("\\varTheta","\\mathit{\\Theta}");F("\\varLambda","\\mathit{\\Lambda}");F("\\varXi","\\mathit{\\Xi}");F("\\varPi","\\mathit{\\Pi}");F("\\varSigma","\\mathit{\\Sigma}");F("\\varUpsilon","\\mathit{\\Upsilon}");F("\\varPhi","\\mathit{\\Phi}");F("\\varPsi","\\mathit{\\Psi}");F("\\varOmega","\\mathit{\\Omega}");F("\\substack","\\begin{subarray}{c}#1\\end{subarray}");F("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");F("\\boxed","\\fbox{$\\displaystyle{#1}$}");F("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");F("\\implies","\\DOTSB\\;\\Longrightarrow\\;");F("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");F("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");F("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var Yb={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};F("\\dots",function(l){var t="\\dotso",e=l.expandAfterFuture().text;return e in Yb?t=Yb[e]:(e.slice(0,4)==="\\not"||e in Qe.math&&["bin","rel"].includes(Qe.math[e].group))&&(t="\\dotsb"),t});var Sm={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};F("\\dotso",function(l){var t=l.future().text;return t in Sm?"\\ldots\\,":"\\ldots"});F("\\dotsc",function(l){var t=l.future().text;return t in Sm&&t!==","?"\\ldots\\,":"\\ldots"});F("\\cdots",function(l){var t=l.future().text;return t in Sm?"\\@cdots\\,":"\\@cdots"});F("\\dotsb","\\cdots");F("\\dotsm","\\cdots");F("\\dotsi","\\!\\cdots");F("\\dotsx","\\ldots\\,");F("\\DOTSI","\\relax");F("\\DOTSB","\\relax");F("\\DOTSX","\\relax");F("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");F("\\,","\\tmspace+{3mu}{.1667em}");F("\\thinspace","\\,");F("\\>","\\mskip{4mu}");F("\\:","\\tmspace+{4mu}{.2222em}");F("\\medspace","\\:");F("\\;","\\tmspace+{5mu}{.2777em}");F("\\thickspace","\\;");F("\\!","\\tmspace-{3mu}{.1667em}");F("\\negthinspace","\\!");F("\\negmedspace","\\tmspace-{4mu}{.2222em}");F("\\negthickspace","\\tmspace-{5mu}{.277em}");F("\\enspace","\\kern.5em ");F("\\enskip","\\hskip.5em\\relax");F("\\quad","\\hskip1em\\relax");F("\\qquad","\\hskip2em\\relax");F("\\tag","\\@ifstar\\tag@literal\\tag@paren");F("\\tag@paren","\\tag@literal{({#1})}");F("\\tag@literal",l=>{if(l.macros.get("\\df@tag"))throw new Ot("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});F("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");F("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");F("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");F("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");F("\\newline","\\\\\\relax");F("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Fv=Bt(yr["Main-Regular"][84][1]-.7*yr["Main-Regular"][65][1]);F("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Fv+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");F("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Fv+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");F("\\hspace","\\@ifstar\\@hspacer\\@hspace");F("\\@hspace","\\hskip #1\\relax");F("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");F("\\ordinarycolon",":");F("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");F("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');F("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');F("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');F("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');F("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');F("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');F("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');F("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');F("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');F("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');F("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');F("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');F("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');F("","\\dblcolon");F("","\\eqcolon");F("","\\coloneqq");F("","\\eqqcolon");F("","\\Coloneqq");F("\\ratio","\\vcentcolon");F("\\coloncolon","\\dblcolon");F("\\colonequals","\\coloneqq");F("\\coloncolonequals","\\Coloneqq");F("\\equalscolon","\\eqqcolon");F("\\equalscoloncolon","\\Eqqcolon");F("\\colonminus","\\coloneq");F("\\coloncolonminus","\\Coloneq");F("\\minuscolon","\\eqcolon");F("\\minuscoloncolon","\\Eqcolon");F("\\coloncolonapprox","\\Colonapprox");F("\\coloncolonsim","\\Colonsim");F("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");F("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");F("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");F("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");F("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");F("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");F("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");F("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");F("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");F("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");F("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");F("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");F("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");F("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");F("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");F("\\ngeqq","\\html@mathml{\\@ngeqq}{}");F("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");F("\\nleqq","\\html@mathml{\\@nleqq}{}");F("\\nleqslant","\\html@mathml{\\@nleqslant}{}");F("\\nshortmid","\\html@mathml{\\@nshortmid}{}");F("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");F("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");F("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");F("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");F("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");F("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");F("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");F("\\imath","\\html@mathml{\\@imath}{}");F("\\jmath","\\html@mathml{\\@jmath}{}");F("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");F("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");F("","\\llbracket");F("","\\rrbracket");F("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");F("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");F("","\\lBrace");F("","\\rBrace");F("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");F("","\\minuso");F("\\darr","\\downarrow");F("\\dArr","\\Downarrow");F("\\Darr","\\Downarrow");F("\\lang","\\langle");F("\\rang","\\rangle");F("\\uarr","\\uparrow");F("\\uArr","\\Uparrow");F("\\Uarr","\\Uparrow");F("\\N","\\mathbb{N}");F("\\R","\\mathbb{R}");F("\\Z","\\mathbb{Z}");F("\\alef","\\aleph");F("\\alefsym","\\aleph");F("\\Alpha","\\mathrm{A}");F("\\Beta","\\mathrm{B}");F("\\bull","\\bullet");F("\\Chi","\\mathrm{X}");F("\\clubs","\\clubsuit");F("\\cnums","\\mathbb{C}");F("\\Complex","\\mathbb{C}");F("\\Dagger","\\ddagger");F("\\diamonds","\\diamondsuit");F("\\empty","\\emptyset");F("\\Epsilon","\\mathrm{E}");F("\\Eta","\\mathrm{H}");F("\\exist","\\exists");F("\\harr","\\leftrightarrow");F("\\hArr","\\Leftrightarrow");F("\\Harr","\\Leftrightarrow");F("\\hearts","\\heartsuit");F("\\image","\\Im");F("\\infin","\\infty");F("\\Iota","\\mathrm{I}");F("\\isin","\\in");F("\\Kappa","\\mathrm{K}");F("\\larr","\\leftarrow");F("\\lArr","\\Leftarrow");F("\\Larr","\\Leftarrow");F("\\lrarr","\\leftrightarrow");F("\\lrArr","\\Leftrightarrow");F("\\Lrarr","\\Leftrightarrow");F("\\Mu","\\mathrm{M}");F("\\natnums","\\mathbb{N}");F("\\Nu","\\mathrm{N}");F("\\Omicron","\\mathrm{O}");F("\\plusmn","\\pm");F("\\rarr","\\rightarrow");F("\\rArr","\\Rightarrow");F("\\Rarr","\\Rightarrow");F("\\real","\\Re");F("\\reals","\\mathbb{R}");F("\\Reals","\\mathbb{R}");F("\\Rho","\\mathrm{P}");F("\\sdot","\\cdot");F("\\sect","\\S");F("\\spades","\\spadesuit");F("\\sub","\\subset");F("\\sube","\\subseteq");F("\\supe","\\supseteq");F("\\Tau","\\mathrm{T}");F("\\thetasym","\\vartheta");F("\\weierp","\\wp");F("\\Zeta","\\mathrm{Z}");F("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");F("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");F("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");F("\\bra","\\mathinner{\\langle{#1}|}");F("\\ket","\\mathinner{|{#1}\\rangle}");F("\\braket","\\mathinner{\\langle{#1}\\rangle}");F("\\Bra","\\left\\langle#1\\right|");F("\\Ket","\\left|#1\\right\\rangle");var Pv=l=>t=>{var e=t.consumeArg().tokens,i=t.consumeArg().tokens,r=t.consumeArg().tokens,a=t.consumeArg().tokens,o=t.macros.get("|"),u=t.macros.get("\\|");t.macros.beginGroup();var h=p=>b=>{l&&(b.macros.set("|",o),r.length&&b.macros.set("\\|",u));var v=p;if(!p&&r.length){var w=b.future();w.text==="|"&&(b.popToken(),v=!0)}return{tokens:v?r:i,numArgs:0}};t.macros.set("|",h(!1)),r.length&&t.macros.set("\\|",h(!0));var f=t.consumeArg().tokens,m=t.expandTokens([...a,...f,...e]);return t.macros.endGroup(),{tokens:m.reverse(),numArgs:0}};F("\\bra@ket",Pv(!1));F("\\bra@set",Pv(!0));F("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");F("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");F("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");F("\\angln","{\\angl n}");F("\\blue","\\textcolor{##6495ed}{#1}");F("\\orange","\\textcolor{##ffa500}{#1}");F("\\pink","\\textcolor{##ff00af}{#1}");F("\\red","\\textcolor{##df0030}{#1}");F("\\green","\\textcolor{##28ae7b}{#1}");F("\\gray","\\textcolor{gray}{#1}");F("\\purple","\\textcolor{##9d38bd}{#1}");F("\\blueA","\\textcolor{##ccfaff}{#1}");F("\\blueB","\\textcolor{##80f6ff}{#1}");F("\\blueC","\\textcolor{##63d9ea}{#1}");F("\\blueD","\\textcolor{##11accd}{#1}");F("\\blueE","\\textcolor{##0c7f99}{#1}");F("\\tealA","\\textcolor{##94fff5}{#1}");F("\\tealB","\\textcolor{##26edd5}{#1}");F("\\tealC","\\textcolor{##01d1c1}{#1}");F("\\tealD","\\textcolor{##01a995}{#1}");F("\\tealE","\\textcolor{##208170}{#1}");F("\\greenA","\\textcolor{##b6ffb0}{#1}");F("\\greenB","\\textcolor{##8af281}{#1}");F("\\greenC","\\textcolor{##74cf70}{#1}");F("\\greenD","\\textcolor{##1fab54}{#1}");F("\\greenE","\\textcolor{##0d923f}{#1}");F("\\goldA","\\textcolor{##ffd0a9}{#1}");F("\\goldB","\\textcolor{##ffbb71}{#1}");F("\\goldC","\\textcolor{##ff9c39}{#1}");F("\\goldD","\\textcolor{##e07d10}{#1}");F("\\goldE","\\textcolor{##a75a05}{#1}");F("\\redA","\\textcolor{##fca9a9}{#1}");F("\\redB","\\textcolor{##ff8482}{#1}");F("\\redC","\\textcolor{##f9685d}{#1}");F("\\redD","\\textcolor{##e84d39}{#1}");F("\\redE","\\textcolor{##bc2612}{#1}");F("\\maroonA","\\textcolor{##ffbde0}{#1}");F("\\maroonB","\\textcolor{##ff92c6}{#1}");F("\\maroonC","\\textcolor{##ed5fa6}{#1}");F("\\maroonD","\\textcolor{##ca337c}{#1}");F("\\maroonE","\\textcolor{##9e034e}{#1}");F("\\purpleA","\\textcolor{##ddd7ff}{#1}");F("\\purpleB","\\textcolor{##c6b9fc}{#1}");F("\\purpleC","\\textcolor{##aa87ff}{#1}");F("\\purpleD","\\textcolor{##7854ab}{#1}");F("\\purpleE","\\textcolor{##543b78}{#1}");F("\\mintA","\\textcolor{##f5f9e8}{#1}");F("\\mintB","\\textcolor{##edf2df}{#1}");F("\\mintC","\\textcolor{##e0e5cc}{#1}");F("\\grayA","\\textcolor{##f6f7f7}{#1}");F("\\grayB","\\textcolor{##f0f1f2}{#1}");F("\\grayC","\\textcolor{##e3e5e6}{#1}");F("\\grayD","\\textcolor{##d6d8da}{#1}");F("\\grayE","\\textcolor{##babec2}{#1}");F("\\grayF","\\textcolor{##888d93}{#1}");F("\\grayG","\\textcolor{##626569}{#1}");F("\\grayH","\\textcolor{##3b3e40}{#1}");F("\\grayI","\\textcolor{##21242c}{#1}");F("\\kaBlue","\\textcolor{##314453}{#1}");F("\\kaGreen","\\textcolor{##71B307}{#1}");var Uv={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class hw{constructor(t,e,i){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=e,this.expansionCount=0,this.feed(t),this.macros=new cw(uw,e.macros),this.mode=i,this.stack=[]}feed(t){this.lexer=new qb(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var e,i,r;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;e=this.popToken(),{tokens:r,end:i}=this.consumeArg(["]"])}else({tokens:r,start:e,end:i}=this.consumeArg());return this.pushToken(new Nn("EOF",i.loc)),this.pushTokens(r),new Nn("",xn.range(e,i))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var e=[],i=t&&t.length>0;i||this.consumeSpaces();var r=this.future(),a,o=0,u=0;do{if(a=this.popToken(),e.push(a),a.text==="{")++o;else if(a.text==="}"){if(--o,o===-1)throw new Ot("Extra }",a)}else if(a.text==="EOF")throw new Ot("Unexpected end of input in a macro argument, expected '"+(t&&i?t[u]:"}")+"'",a);if(t&&i)if((o===0||o===1&&t[u]==="{")&&a.text===t[u]){if(++u,u===t.length){e.splice(-u,u);break}}else u=0}while(o!==0||i);return r.text==="{"&&e[e.length-1].text==="}"&&(e.pop(),e.shift()),e.reverse(),{tokens:e,start:r,end:a}}consumeArgs(t,e){if(e){if(e.length!==t+1)throw new Ot("The length of delimiters doesn't match the number of args!");for(var i=e[0],r=0;r<i.length;r++){var a=this.popToken();if(i[r]!==a.text)throw new Ot("Use of the macro doesn't match its definition",a)}}for(var o=[],u=0;u<t;u++)o.push(this.consumeArg(e&&e[u+1]).tokens);return o}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new Ot("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var e=this.popToken(),i=e.text,r=e.noexpand?null:this._getExpansion(i);if(r==null||t&&r.unexpandable){if(t&&r==null&&i[0]==="\\"&&!this.isDefined(i))throw new Ot("Undefined control sequence: "+i);return this.pushToken(e),!1}this.countExpansion(1);var a=r.tokens,o=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs){a=a.slice();for(var u=a.length-1;u>=0;--u){var h=a[u];if(h.text==="#"){if(u===0)throw new Ot("Incomplete placeholder at end of macro body",h);if(h=a[--u],h.text==="#")a.splice(u+1,1);else if(/^[1-9]$/.test(h.text))a.splice(u,2,...o[+h.text-1]);else throw new Ot("Not a valid argument number",h)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Nn(t)]):void 0}expandTokens(t){var e=[],i=this.stack.length;for(this.pushTokens(t);this.stack.length>i;)if(this.expandOnce(!0)===!1){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),e.push(r)}return this.countExpansion(e.length),e}expandMacroAsText(t){var e=this.expandMacro(t);return e&&e.map(i=>i.text).join("")}_getExpansion(t){var e=this.macros.get(t);if(e==null)return e;if(t.length===1){var i=this.lexer.catcodes[t];if(i!=null&&i!==13)return}var r=typeof e=="function"?e(this):e;if(typeof r=="string"){var a=0;if(r.indexOf("#")!==-1)for(var o=r.replace(/##/g,"");o.indexOf("#"+(a+1))!==-1;)++a;for(var u=new qb(r,this.settings),h=[],f=u.lex();f.text!=="EOF";)h.push(f),f=u.lex();h.reverse();var m={tokens:h,numArgs:a};return m}return r}isDefined(t){return this.macros.has(t)||Ls.hasOwnProperty(t)||Qe.math.hasOwnProperty(t)||Qe.text.hasOwnProperty(t)||Uv.hasOwnProperty(t)}isExpandable(t){var e=this.macros.get(t);return e!=null?typeof e=="string"||typeof e=="function"||!e.unexpandable:Ls.hasOwnProperty(t)&&!Ls[t].primitive}}var Vb=/^[]/,P0=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),sf={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},Xb={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class yu{constructor(t,e){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new hw(t,e,this.mode),this.settings=e,this.leftrightDepth=0}expect(t,e){if(e===void 0&&(e=!0),this.fetch().text!==t)throw new Ot("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());e&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var e=this.nextToken;this.consume(),this.gullet.pushToken(new Nn("}")),this.gullet.pushTokens(t);var i=this.parseExpression(!1);return this.expect("}"),this.nextToken=e,i}parseExpression(t,e){for(var i=[];;){this.mode==="math"&&this.consumeSpaces();var r=this.fetch();if(yu.endOfExpression.indexOf(r.text)!==-1||e&&r.text===e||t&&Ls[r.text]&&Ls[r.text].infix)break;var a=this.parseAtom(e);if(a){if(a.type==="internal")continue}else break;i.push(a)}return this.mode==="text"&&this.formLigatures(i),this.handleInfixNodes(i)}handleInfixNodes(t){for(var e=-1,i,r=0;r<t.length;r++)if(t[r].type==="infix"){if(e!==-1)throw new Ot("only one infix operator per group",t[r].token);e=r,i=t[r].replaceWith}if(e!==-1&&i){var a,o,u=t.slice(0,e),h=t.slice(e+1);u.length===1&&u[0].type==="ordgroup"?a=u[0]:a={type:"ordgroup",mode:this.mode,body:u},h.length===1&&h[0].type==="ordgroup"?o=h[0]:o={type:"ordgroup",mode:this.mode,body:h};var f;return i==="\\\\abovefrac"?f=this.callFunction(i,[a,t[e],o],[]):f=this.callFunction(i,[a,o],[]),[f]}else return t}handleSupSubscript(t){var e=this.fetch(),i=e.text;this.consume(),this.consumeSpaces();var r;do{var a;r=this.parseGroup(t)}while(((a=r)==null?void 0:a.type)==="internal");if(!r)throw new Ot("Expected group after '"+i+"'",e);return r}formatUnsupportedCmd(t){for(var e=[],i=0;i<t.length;i++)e.push({type:"textord",mode:"text",text:t[i]});var r={type:"text",mode:this.mode,body:e},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]};return a}parseAtom(t){var e=this.parseGroup("atom",t);if(e?.type==="internal"||this.mode==="text")return e;for(var i,r;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(e&&e.type==="op"){var o=a.text==="\\limits";e.limits=o,e.alwaysHandleSupSub=!0}else if(e&&e.type==="operatorname")e.alwaysHandleSupSub&&(e.limits=a.text==="\\limits");else throw new Ot("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(i)throw new Ot("Double superscript",a);i=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(r)throw new Ot("Double subscript",a);r=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(i)throw new Ot("Double superscript",a);var u={type:"textord",mode:this.mode,text:"\\prime"},h=[u];for(this.consume();this.fetch().text==="'";)h.push(u),this.consume();this.fetch().text==="^"&&h.push(this.handleSupSubscript("superscript")),i={type:"ordgroup",mode:this.mode,body:h}}else if(P0[a.text]){var f=Vb.test(a.text),m=[];for(m.push(new Nn(P0[a.text])),this.consume();;){var p=this.fetch().text;if(!P0[p]||Vb.test(p)!==f)break;m.unshift(new Nn(P0[p])),this.consume()}var b=this.subparse(m);f?r={type:"ordgroup",mode:"math",body:b}:i={type:"ordgroup",mode:"math",body:b}}else break}return i||r?{type:"supsub",mode:this.mode,base:e,sup:i,sub:r}:e}parseFunction(t,e){var i=this.fetch(),r=i.text,a=Ls[r];if(!a)return null;if(this.consume(),e&&e!=="atom"&&!a.allowedInArgument)throw new Ot("Got function '"+r+"' with no arguments"+(e?" as "+e:""),i);if(this.mode==="text"&&!a.allowedInText)throw new Ot("Can't use function '"+r+"' in text mode",i);if(this.mode==="math"&&a.allowedInMath===!1)throw new Ot("Can't use function '"+r+"' in math mode",i);var{args:o,optArgs:u}=this.parseArguments(r,a);return this.callFunction(r,o,u,i,t)}callFunction(t,e,i,r,a){var o={funcName:t,parser:this,token:r,breakOnTokenText:a},u=Ls[t];if(u&&u.handler)return u.handler(o,e,i);throw new Ot("No function handler for "+t)}parseArguments(t,e){var i=e.numArgs+e.numOptionalArgs;if(i===0)return{args:[],optArgs:[]};for(var r=[],a=[],o=0;o<i;o++){var u=e.argTypes&&e.argTypes[o],h=o<e.numOptionalArgs;(e.primitive&&u==null||e.type==="sqrt"&&o===1&&a[0]==null)&&(u="primitive");var f=this.parseGroupOfType("argument to '"+t+"'",u,h);if(h)a.push(f);else if(f!=null)r.push(f);else throw new Ot("Null argument, please report this as a bug")}return{args:r,optArgs:a}}parseGroupOfType(t,e,i){switch(e){case"color":return this.parseColorGroup(i);case"size":return this.parseSizeGroup(i);case"url":return this.parseUrlGroup(i);case"math":case"text":return this.parseArgumentGroup(i,e);case"hbox":{var r=this.parseArgumentGroup(i,"text");return r!=null?{type:"styling",mode:r.mode,body:[r],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",i);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(i)throw new Ot("A primitive argument cannot be optional");var o=this.parseGroup(t);if(o==null)throw new Ot("Expected group as "+t,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(i);default:throw new Ot("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,e){var i=this.gullet.scanArgument(e);if(i==null)return null;for(var r="",a;(a=this.fetch()).text!=="EOF";)r+=a.text,this.consume();return this.consume(),i.text=r,i}parseRegexGroup(t,e){for(var i=this.fetch(),r=i,a="",o;(o=this.fetch()).text!=="EOF"&&t.test(a+o.text);)r=o,a+=r.text,this.consume();if(a==="")throw new Ot("Invalid "+e+": '"+i.text+"'",i);return i.range(r,a)}parseColorGroup(t){var e=this.parseStringGroup("color",t);if(e==null)return null;var i=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(e.text);if(!i)throw new Ot("Invalid color: '"+e.text+"'",e);var r=i[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(t){var e,i=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?e=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):e=this.parseStringGroup("size",t),!e)return null;!t&&e.text.length===0&&(e.text="0pt",i=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e.text);if(!r)throw new Ot("Invalid size: '"+e.text+"'",e);var a={number:+(r[1]+r[2]),unit:r[3]};if(!W4(a))throw new Ot("Invalid unit: '"+a.unit+"'",e);return{type:"size",mode:this.mode,value:a,isBlank:i}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var e=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),e==null)return null;var i=e.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:i}}parseArgumentGroup(t,e){var i=this.gullet.scanArgument(t);if(i==null)return null;var r=this.mode;e&&this.switchMode(e),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:i.loc,body:a};return e&&this.switchMode(r),o}parseGroup(t,e){var i=this.fetch(),r=i.text,a;if(r==="{"||r==="\\begingroup"){this.consume();var o=r==="{"?"}":"\\endgroup";this.gullet.beginGroup();var u=this.parseExpression(!1,o),h=this.fetch();this.expect(o),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:xn.range(i,h),body:u,semisimple:r==="\\begingroup"||void 0}}else if(a=this.parseFunction(e,t)||this.parseSymbol(),a==null&&r[0]==="\\"&&!Uv.hasOwnProperty(r)){if(this.settings.throwOnError)throw new Ot("Undefined control sequence: "+r,i);a=this.formatUnsupportedCmd(r),this.consume()}return a}formLigatures(t){for(var e=t.length-1,i=0;i<e;++i){var r=t[i],a=r.text;a==="-"&&t[i+1].text==="-"&&(i+1<e&&t[i+2].text==="-"?(t.splice(i,3,{type:"textord",mode:"text",loc:xn.range(r,t[i+2]),text:"---"}),e-=2):(t.splice(i,2,{type:"textord",mode:"text",loc:xn.range(r,t[i+1]),text:"--"}),e-=1)),(a==="'"||a==="`")&&t[i+1].text===a&&(t.splice(i,2,{type:"textord",mode:"text",loc:xn.range(r,t[i+1]),text:a+a}),e-=1)}}parseSymbol(){var t=this.fetch(),e=t.text;if(/^\\verb[^a-zA-Z]/.test(e)){this.consume();var i=e.slice(5),r=i.charAt(0)==="*";if(r&&(i=i.slice(1)),i.length<2||i.charAt(0)!==i.slice(-1))throw new Ot(`\\verb assertion failed --
                    please report what input caused this bug`);return i=i.slice(1,-1),{type:"verb",mode:"text",body:i,star:r}}Xb.hasOwnProperty(e[0])&&!Qe[this.mode][e[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+e[0]+'" used in math mode',t),e=Xb[e[0]]+e.slice(1));var a=ow.exec(e);a&&(e=e.substring(0,a.index),e==="i"?e="":e==="j"&&(e=""));var o;if(Qe[this.mode][e]){this.settings.strict&&this.mode==="math"&&Ef.indexOf(e)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+e[0]+'" used in math mode',t);var u=Qe[this.mode][e].group,h=xn.range(t),f;if(J8.hasOwnProperty(u)){var m=u;f={type:"atom",mode:this.mode,family:m,loc:h,text:e}}else f={type:u,mode:this.mode,loc:h,text:e};o=f}else if(e.charCodeAt(0)>=128)this.settings.strict&&(K4(e.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+e[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+e[0]+'"'+(" ("+e.charCodeAt(0)+")"),t)),o={type:"textord",mode:"text",loc:xn.range(t),text:e};else return null;if(this.consume(),a)for(var p=0;p<a[0].length;p++){var b=a[0][p];if(!sf[b])throw new Ot("Unknown accent ' "+b+"'",t);var v=sf[b][this.mode]||sf[b].text;if(!v)throw new Ot("Accent "+b+" unsupported in "+this.mode+" mode",t);o={type:"accent",mode:this.mode,loc:xn.range(t),label:v,isStretchy:!1,isShifty:!0,base:o}}return o}}yu.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Am=function(t,e){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var i=new yu(t,e);delete i.gullet.macros.current["\\df@tag"];var r=i.parse();if(delete i.gullet.macros.current["\\current@color"],delete i.gullet.macros.current["\\color"],i.gullet.macros.get("\\df@tag")){if(!e.displayMode)throw new Ot("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:i.subparse([new Nn("\\df@tag")])}]}return r},jv=function(t,e,i){e.textContent="";var r=_m(t,i).toNode();e.appendChild(r)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),jv=function(){throw new Ot("KaTeX doesn't work in quirks mode.")});var dw=function(t,e){var i=_m(t,e).toMarkup();return i},fw=function(t,e){var i=new sm(e);return Am(t,i)},Hv=function(t,e,i){if(i.throwOnError||!(t instanceof Ot))throw t;var r=lt.makeSpan(["katex-error"],[new Xn(e)]);return r.setAttribute("title",t.toString()),r.setAttribute("style","color:"+i.errorColor),r},_m=function(t,e){var i=new sm(e);try{var r=Am(t,i);return Sx(r,t,i)}catch(a){return Hv(a,t,i)}},mw=function(t,e){var i=new sm(e);try{var r=Am(t,i);return Ax(r,t,i)}catch(a){return Hv(a,t,i)}},pw="0.16.25",gw={Span:ic,Anchor:lm,SymbolNode:Xn,SvgNode:Jr,PathNode:Us,LineNode:_f},bw={version:pw,render:jv,renderToString:dw,ParseError:Ot,SETTINGS_SCHEMA:q0,__parse:fw,__renderToDomTree:_m,__renderToHTMLTree:mw,__setFontMetrics:$8,__defineSymbol:S,__defineFunction:jt,__defineMacro:F,__domTree:gw};const vw=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1(?=[\s?!\.,:]|$)/,yw=/^(\${1,2})(?!\$)((?:\\.|[^\\\n])*?(?:\\.|[^\\\n\$]))\1/,xw=/^(\${1,2})\n((?:\\[^]|[^\\])+?)\n\1(?:\n|$)/;function ww(l={}){return{extensions:[Sw(l,Kb(l,!1)),Aw(l,Kb(l,!0))]}}function Kb(l,t){return e=>bw.renderToString(e.text,{...l,displayMode:e.displayMode})+(t?`
`:"")}function Sw(l,t){const e=l&&l.nonStandard,i=e?yw:vw;return{name:"inlineKatex",level:"inline",start(r){let a,o=r;for(;o;){if(a=o.indexOf("$"),a===-1)return;if((e?a>-1:a===0||o.charAt(a-1)===" ")&&o.substring(a).match(i))return a;o=o.substring(a+1).replace(/^\$+/,"")}},tokenizer(r,a){const o=r.match(i);if(o)return{type:"inlineKatex",raw:o[0],text:o[2].trim(),displayMode:o[1].length===2}},renderer:t}}function Aw(l,t){return{name:"blockKatex",level:"block",tokenizer(e,i){const r=e.match(xw);if(r)return{type:"blockKatex",raw:r[0],text:r[2].trim(),displayMode:r[1].length===2}},renderer:t}}go.workerSrc=new URL("/ai-slide-generater/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const Jt={INITIAL:"initial",STRUCTURING:"structuring",STRUCTURED:"structured",SELECTING_THEME:"selecting_theme",CREATING_OUTLINE:"creating_outline",SELECTING_SECTION_HEADERS:"selecting_section_headers",GENERATING_OUTLINE:"generating_outline",OUTLINE_CREATED:"outline_created",GENERATING_SLIDES:"generating_slides",SLIDE_GENERATED:"slide_generated",ALL_SLIDES_GENERATED:"all_slides_generated"},Jn={structureText:l=>`### 
PDF 
Markdown

### 
${l}`,analyzeContext:l=>`### 

AIJSON

### AI
1.  ** (Purpose)**
    * \`approval\`: 
    * \`information_sharing\`: 
    * \`education\`: 
2.  ** (Audience)**
    * \`expert\`: 
    * \`manager\`: KGI
    * \`beginner\`: 

### 
1.  
2.  1
3.  JSON

###  (JSON)
- ****: JSON\`\`\`json
{
  "purpose": "(approval, information_sharing, education )",
  "audience": "(expert, manager, beginner )"
}

### 
${l}
`,createOutline:(l,t,e,i)=>{const r=t?'- 2""`template``agenda``summary`3\n- ****: `summary`3**6**`template``agenda`****\n- 1** (1/2)**2** (2/2)**\n- 6':"- ****",a=e?"- Markdown`template``section_header`":"- `section_header`",o=i||{purpose:"information_sharing",audience:"expert"};return`### 
MarkdownJSON

${`### 
- ** (Purpose)**: \`${o.purpose}\`
- ** (Audience)**: \`${o.audience}\`

### 
Markdown
****Markdown****

#### : 3
1.  ** \`approval\` () :**
    * **:** ****
    * **:** [][][][] [][][][] 

2.  ** \`education\` () :**
    * **:** ****
    * **:** [][][]  

3.  ** \`information_sharing\` () :**
    * **:** ****
    * **:** Markdown

4.  **:**
    *  \`manager\` () : ****
    *  \`expert\` () : 
    *  \`beginner\` () : 
`} //  

### 
- \`title_slide\`: 
- \`agenda\`: 
- \`section_header\`: 
- \`highlighted_number\`: **NEW**KPI****2
- \`table_basic\`: ****
- \`bar_chart\`: 
- \`comparison\`: **24/A/B/C**
- \`three_points\`: 3
- \`vertical_steps\`: 
- \`math_basic\`: ****
- \`quote\`: **NEW**
- \`content_with_diagram\`: 
- \`content_basic\`: ****
- \`summary_or_thankyou\`: 

### 
Markdown

1.  **[] **: : 98%KPI: 150******** \`highlighted_number\` 
    * ** (Markdown)**:
        \`\`\`markdown
        #### KPI
        98%
        
        ****
        - A
        - 
        \`\`\`
    * ****: \`highlighted_number\`

2.  **[] **:  \`table_basic\` 
    * ** (Markdown)**:
        \`\`\`markdown
        #### 
        |  | A | B |
        |---|---|---|
        |  |  |  |
        |  | - |  |
        \`\`\`
    * ****: \`table_basic\`

3.  **[] **:  **24**/A/B/A/B/C \`comparison\` 
    * ** (Markdown)**:
        \`\`\`markdown
        #### 
        ****
        - 1: 
        - 2: 
        ****
        - 1: 50%
        - 2: 
        \`\`\`
    * ****: \`comparison\`

4.  **[] **: : A: 75%, B: 50%**** \`bar_chart\` 
    * ** (Markdown)**:
        \`\`\`markdown
        #### 
        - A: 75%
        - B: 50%
        - C: 90%
        \`\`\`
    * ****: \`bar_chart\`
    * **AI**: \`table_basic\`  \`comparison\` 

5.  **[] 3**: 3\`three_points\` 
    * ** (Markdown)**:
        \`\`\`markdown
        #### 3
        1.  ****: ...
        2.  ****: ...
        3.  ****: ...
        \`\`\`
    * ****: \`three_points\`

6.  **[] **: \`vertical_steps\` 
    * ** (Markdown)**:
        \`\`\`markdown
        #### 
        - 1: 
        - 2: 
        - 3: 
        \`\`\`
    * ****: \`vertical_steps\`

7.  **[] **: **$$...$$** \`math_basic\` 
    * ** (Markdown)**:
        \`\`\`markdown
        #### 
         $ax^2 + bx + c = 0$ 
        $$ x = \frac{-b pm sqrt{b^2 - 4ac}}{2a} $$
         $b^2 - 4ac$ ...
        \`\`\`
    * ****: \`math_basic\`

8.  **[] **: ... \`quote\` 
    * ** (Markdown)**:
        \`\`\`markdown
        ...A
        \`\`\`
    * ****: \`quote\`

9.  **[] **: ****\`content_with_diagram\` 
    * ** (Markdown)**:
        \`\`\`markdown
        #### 
        3...
        \`\`\`
    * ****: \`content_with_diagram\`

10.  **[] **: \`content_basic\` 

### 
- 1\`template\`\`title_slide\`Markdown
- **JSON**: \`summary\`\`description\`JSON\`\\\`\`\\\\\`: \`"summary": "C:\\\\Windows"\`
- ****: \`title\`**27**2
- ****: \`summary\`****-  1.

- ****: \`summary\`, \`items\`, \`points\`, \`columns\`, \`table\`, \`description\`, \`content_title\` ****Markdown\`****\`
- ****:  \`\`  \`****\` 

- ** NEW **
- **Markdown**: \`summary\`, \`description\`, \`content_title\` Markdown: \`****\`**\`\\\`**
  - ****: \`"summary": " \\\`**\\\`**\\\`**\\\`** "\`
  - ****: \`"summary": " **** "\`

- ****:  \`y = ax + b\`  \` - \`** KaTeX **
  - ****: \`$\`: \` $y = ax + b$ \`
  - ****: \`$$\`: \`$$ sum_{i=1}^{n} x_i $$ \`
  - ****: \`\` \`	ext{...}\` : \`$$ 	ext{} = 	ext{} - (	ext{} + 	ext{}) - 	ext{} $$ \`

- **table_basic, comparison, three_points **/****\`content_basic\` 
  - \`content_basic\` **\`summary\`""** **\`items\`** 
  - **\`items\` -*1.****CSS
  - ******2** \`"  "\`
  - 4\`"    "\`
  - ****: \`content_basic\`  \`items\`  **77** 
  - ****:  ****1
  - ****: \`template\`  \`content_basic\`  **** 1** (1/2)**2** (2/2)**82

- **24**\`comparison\` \`summary\`\`columns\` **24** \`{title: "...", items: [...]}\`
  - ****: \`items\` **\`"****\`\`** \`\`"\` \`"****10,000"\`****
  - 

- ****\`table_basic\` 
  - **\`summary\`Markdown** ""  - ****: \`table_basic\`  **75** 
  - ****: 7****1
  - **AI** 150******\\n**
  - 1AI7\`template\`  \`table_basic\`  **** 
    - 1** (1/2)**2** (2/2)**2****

- **bar_chart **
- ****\`bar_chart\` 
  - **\`summary\`""**
  -  **\`chart_data\`** **Chart.js **
  - **AI**:
    1.  Markdown: A, B, C: 75, 50, 90
    2.  \`labels\` 
    3.  \`datasets\` 
    4.   \`label\` : "" \`data\` 
  - ****:
    \`\`\`json
    {
      "labels": ["A", "B", "C"],
      "datasets": [
        {
          "label": " (%)",
          "data": [75, 50, 90]
        }
      ]
    }
    \`\`\`

- **  **
- \`three_points\` 
  - **\`summary\`""**
  -  **\`points\`** **3**
  -  **\`title\`** (), **\`summary\`** (), **\`icon_description\`** () 3****
  
  - **icon_description **: \`icon_description\` **Lucide (lucide.dev) **: "check-circle", "braces", "database", "shield-check", "brain-cog"****
  - ****: **: "API""RAG"**
  - ****:
    1.  : "API"
    2.  Lucide: "braces"  "code"1
    3.  "braces" \`icon_description\` 
  - : \`{"title": "API", "summary": "...", "icon_description": "braces"}\`
- **  **

- **  **
- **vertical_steps **
- \`vertical_steps\` 
  - **\`summary\`""**
  -  **\`items\`** ****
  -  **\`title\`** ()  **\`description\`** () 2****
  - : \`{"title": "1", "description": ""}\`
- **  **

- **  **
- \`content_with_diagram\` 
  - ** \`summary\` **
  - ** \`infographic\` **  \`{ "needed": true, "description": "AI..." }\` 
  - AIdescription\`summary\`
- **  **

- **math_basic **
- \`math_basic\` 
  - **\`summary\`**Markdown****200****
  - **\`formula\`KaTeX**: \`$$ x = \frac{-b pm sqrt{b^2 - 4ac}}{2a} $$\`
  - **\`summary\` \`formula\` $...$****
  - \`... $x=y$\` \`...\` 

- ** NEW **
- **quote **
- \`quote\` 
  - ** \`summary\` **
  - AI****
  - **NEW** **** **\`description\` ** 
  -  \`description: ""\` 
- **highlighted_number **
- **number**: \`number\` **: "98%", "150", "3.14"**
- ****: \`number\` \`description\`: "": "****"Markdown\`**\`****
- \`description\`  ****: "", ""
- **AI**: **30%**\`number: "30%"\`  \`description: ""\` **\`description\`\`summary\`**
- **NEW\`content_title\` ** ****: "", ""
- **NEW\`summary\` ** ****Markdown
- **  **
${r}
${a}

-  \`summary_or_thankyou\` 

### (JSON)
- ****: JSON\`\`\`json
[
  { "title": "", "summary": "", "template": "title_slide" },
  { "title": "KPI", "template": "highlighted_number", "number": "98%", "description": "", "content_title": "", "summary": "**98%**
- " },
  { "title": "", "summary": "A", "template": "quote", "description": " " },
  { "title": "", "summary": "...", "template": "content_with_diagram", "infographic": { "needed": true, "description": "" } },
  { "title": "", "summary": "...", "template": "math_basic", "formula": "$$ x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$" },
  { 
    "title": "",
    "summary": "",
    "template": "bar_chart",
    "chart_data": {
      "labels": ["A", "B", "C"],
      "datasets": [
        {
          "label": " (%)",
          "data": [75, 50, 90],
          "backgroundColor": [ // () AI
            "rgba(54, 162, 235, 0.6)",
            "rgba(54, 162, 235, 0.6)",
            "rgba(54, 162, 235, 0.6)"
          ]
        }
      ]
    }
  }, 
  { 
    "title": "3", 
    "summary": "", 
    "template": "three_points", 
    "points": [ 
      { "title": "A", "summary": "A...", "icon_description": "braces" }, 
      { "title": "B", "summary": "B...", "icon_description": "database" }, 
      { "title": "C", "summary": "C...", "icon_description": "shield-check" }
    ] 
  },
  
  { "title": "3", "summary": "", "template": "vertical_steps", "items": [ {"title": "1", "description": "1..."}, {"title": "2", "description": "2..."} ] },
  { "title": "", "summary": "", "template": "content_basic", "items": [ "1", "2" ] },
  { 
    "title": "ABC", 
    "summary": "", 
    "template": "comparison", 
    "columns": [ 
      {"title": "A", "items": ["****10", "****3"]}, 
      {"title": "B", "items": ["****12", "****2"]},
      {"title": "C", "items": ["****8", "****4"]}
    ] 
  },
  {
    "title": " (1/2)",
    "summary": "",
    "template": "table_basic",
    "table": {
      "headers": [ "", "A", "B" ],
      "rows": [
        [ "", "", "" ],
        [ "", "-", "" ],
        [ "", "-", "-" ]
      ]
    }
  },
  { "title": "", "summary": "", "template": "summary_or_thankyou" }
]

### Markdown
${l}`},generateInfographic:(l,t)=>`### 
SVG

### 
SVG

### 
- **:** \`<svg\`\`</svg>\`XML
- **SVG\`<text>\`**

- ****:
- SVG \`width="100%"\`  \`height="100%"\` ****
- \`viewBox="0 0 100 100"\` viewBox
- ** \`width\`  \`height\` : \`width="500px"\`**

- ****:
${t==="light"?"#FFFFFF: #1E293B, #0284c7":"#1e293b: #e2e8f0, #38bdf8"}
- **SVG: \`<rect width="100%" height="100%" fill="...">\`** 

### 
${l}`,modifySlide:(l,t)=>`### 
100%HTML

### 
HTMLJSON

### 
1. HTML
2. HTML
3. 
4. HTMLJSON

###  (JSON)
- ****: JSON\`\`\`json
\`\`\`json
{
  "html": "(HTML)",
  "changes": "(: \\n#e0f7fa)"
}
\`\`\`

### 
${l}

### HTML
\`\`\`html
${t}
\`\`\`
`,regenerateSlideContent:(l,t,e,i)=>{const r=t!=="{}"&&t?`### JSON
${t}`:`### 
${l}`;return`### 



### 
${l}

${r}

### 
${e}

### JSON
${i.map(a=>`- **${a.name}**: ${a.description}`).join(`
`)}

### 
- ****: ${e}: \`items\`, \`points\`, \`columns\`, \`summary\`JSON
- \`\`\`json
- 

### 
- ${e}  "content_basic" : \`{ "items": ["1", "2", "3"] }\`
- ${e}  "three_points" : \`{ "points": [ { "title": "...", "summary": "...", "icon_description": "..." }, ... ] }\`
- ${e}  "comparison" : \`{ "columns": [ { "title": "A", "items": [...] }, { "title": "B", "items": [...] } ] }\`
- ${e}  "table_basic" : \`{ "table": { "headers": ["H1", "H2"], "rows": [["R1C1", "R1C2"], ["R2C1", "R2C2"]] } }\`
- ${e}  "math_basic" : \`{ "summary": "...", "formula": "$$ y = ax + b $$" }\` 
- ${e}  "content_with_diagram" : \`{ "summary": "...", "infographic": { "needed": true, "description": "..." } }\`
`},modifyFullOutline:(l,t)=>`### 

(JSON)

### 
- **:** **JSON**\`\`\`json
- ****
- 

### 
${t}

### (JSON)
${l}
`,modifySingleSlideOutline:(l,t)=>`### 

(JSON)

### 
- **:** **JSON**\`\`\`json
-  \`template\` ****
- summaryitems

### 
${t}

### (JSON)
${l}
`,findIconName:l=>`### 
Lucide (lucide.dev)****

### 
- ****: Lucide: "braces", "shield-check", "database"****
- JSON****
- **1**
- 

### 
- : "API"
- : braces
- : ""
- : shield-check
- : "AI"
- : brain-cog
- : ""
- : circle

### 
${l}`,findIconNameRetry:(l,t)=>`### 
Lucide (lucide.dev)****

### 
${l}${t}** (404)**

### 
- ****: ${t}**Lucide**1
- JSON****
-  "circle" 

### 
${l}`},Dl=[{key:"analyzing_context",text:"..."},{key:"cleaning",text:"... (:  )"},{key:"analyzing",text:"... ()"},{key:"formatting",text:"Markdown..."}],co=[{key:"analyzing_doc",text:"Markdown..."},{key:"selecting_templates",text:"... (: )"},{key:"creating_title_agenda",text:"..."},{key:"generating_content",text:"..."},{key:"formatting_json",text:"JSON..."}],_w=[{key:"analyzing",text:"..."},{key:"designing",text:"/..."},{key:"coding",text:"HTML..."}],Wb={purpose:{approval:"",information_sharing:"",education:""},audience:{expert:"",manager:"",beginner:""}},Ew=()=>G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400 hover:text-white transition-colors",children:[G.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l-.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),G.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),kw=()=>G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400",children:[G.jsx("path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"}),G.jsx("path",{d:"M12 12v9"}),G.jsx("path",{d:"m16 16-4-4-4 4"})]}),Tw=()=>G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:[G.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),G.jsx("path",{d:"M22 2 11 13"})]}),Cw=({onSettingsClick:l,onDownloadLog:t})=>G.jsxs("header",{className:"flex-shrink-0 h-14 bg-black/25 flex items-center px-6 justify-between border-b border-white/10 z-10",children:[G.jsx("h1",{className:"text-lg font-semibold",children:""}),G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx("button",{onClick:t,title:"",className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-400 hover:text-white transition-colors",children:[G.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),G.jsx("polyline",{points:"7 10 12 15 17 10"}),G.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]})}),G.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:G.jsx(Ew,{})})]})]}),Mw=({isProcessing:l,processingStatus:t,fileName:e,handleDragOver:i,handleDrop:r,onFileSelect:a,appStatus:o,thinkingState:u,totalWaitTime:h})=>G.jsx("div",{className:`w-full h-full bg-white/5 rounded-xl flex flex-col items-center justify-center p-6 border-2 border-dashed ${l?"border-indigo-500":"border-white/20 hover:border-indigo-500"} transition-colors`,onDragOver:i,onDrop:r,children:l?G.jsxs("div",{className:"text-center w-full max-w-md px-4",children:[o===Jt.STRUCTURING?G.jsx(Df,{title:"...",steps:Dl,currentStepKey:u,totalWaitTime:h}):o===Jt.GENERATING_OUTLINE?G.jsx(Df,{title:"...",steps:co,currentStepKey:u,totalWaitTime:h}):G.jsxs(G.Fragment,{children:[G.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"}),G.jsx("p",{className:"mt-4 text-lg font-semibold",children:t})]}),G.jsx("p",{className:"mt-4 text-sm text-gray-400",children:e})]}):o!==Jt.INITIAL?G.jsxs("div",{className:"text-center",children:[G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-400 mx-auto",children:[G.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),G.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),G.jsx("p",{className:"mt-4 text-lg font-semibold",children:""}),G.jsx("p",{className:"mt-1 text-sm text-gray-400",children:e}),G.jsx("p",{className:"mt-4 text-xs text-gray-500",children:""})]}):G.jsxs("div",{className:"text-center",children:[G.jsx(kw,{}),G.jsx("p",{className:"mt-4 text-lg font-semibold",children:""}),G.jsx("p",{className:"mt-1 text-xs text-gray-400",children:""}),G.jsx("button",{className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md text-sm font-medium transition-colors",onClick:()=>document.getElementById("file-upload").click(),children:""}),G.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.txt,.md",onChange:f=>a(f.target.files[0])}),G.jsx("p",{className:"mt-4 text-xs text-gray-500",children:": PDF, TXT, MD"})]})}),Rw=({messages:l})=>G.jsx("div",{className:"flex-grow p-6 overflow-y-auto space-y-4",children:l.map((t,e)=>G.jsx("div",{className:`flex ${t.type==="user"?"justify-end":"justify-start"}`,children:G.jsx("div",{className:`px-4 py-2 rounded-lg max-w-2xl ${t.type==="user"?"bg-indigo-600":"bg-gray-700"}`,children:G.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.text})})},e))}),Dw=({markdown:l,setMarkdown:t,onApprove:e,onRegenerate:i})=>G.jsxs("div",{className:"bg-black/20 p-4 rounded-lg",children:[G.jsx("p",{className:"text-sm text-gray-300 mb-2",children:""}),G.jsx("textarea",{value:l,onChange:r=>t(r.target.value),className:"w-full h-64 bg-gray-900/50 border border-white/20 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow font-mono"}),G.jsxs("div",{className:"flex justify-between items-center mt-4",children:[" ",G.jsx("button",{onClick:i,className:"px-6 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors",children:"AI"}),G.jsx("button",{onClick:e,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors",children:""})]})]}),Nw=({selectedTheme:l,selectedDesign:t,onThemeSelect:e,onDesignSelect:i,onApprove:r})=>G.jsxs("div",{className:"bg-black/20 p-4 rounded-lg space-y-4",children:[G.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[G.jsx("p",{className:"text-sm text-gray-300",children:"1. :"}),Object.entries(Gl).map(([a,o])=>G.jsx("button",{onClick:()=>e(a),className:`px-6 py-2 text-sm font-medium rounded-md transition-colors ${l===a?"bg-indigo-600":"bg-gray-700 hover:bg-gray-600"}`,children:o.name},a))]}),G.jsxs("div",{className:"flex justify-center items-center space-x-4 border-t border-white/10 pt-4",children:[G.jsx("p",{className:"text-sm text-gray-300",children:"2. :"}),G.jsx("button",{onClick:()=>i("dark"),className:`px-6 py-2 text-sm font-medium rounded-md transition-colors ${t==="dark"?"bg-gray-800 ring-2 ring-indigo-400":"bg-gray-800 hover:bg-gray-700"}`,children:""}),G.jsx("button",{onClick:()=>i("light"),className:`px-6 py-2 text-black text-sm font-medium rounded-md transition-colors ${t==="light"?"bg-gray-200 ring-2 ring-indigo-400":"bg-gray-200 hover:bg-gray-300"}`,children:""})]}),G.jsx("div",{className:"flex justify-end pt-2",children:G.jsx("button",{onClick:r,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors",children:""})})]}),Ow=({onSelect:l})=>G.jsxs("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center items-center space-x-4",children:[G.jsx("p",{className:"text-sm text-gray-300",children:""}),G.jsx("button",{onClick:()=>l(!0),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-sm font-medium rounded-md transition-colors",children:""}),G.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-sm font-medium rounded-md transition-colors",children:""})]}),zw=({onSelect:l})=>G.jsxs("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center items-center space-x-4",children:[G.jsx("p",{className:"text-sm text-gray-300",children:""}),G.jsx("button",{onClick:()=>l(!0),className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-sm font-medium rounded-md transition-colors",children:""}),G.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-sm font-medium rounded-md transition-colors",children:""})]}),Lw=({outline:l,onChange:t,onInsert:e,onDelete:i,onStart:r,selectedTheme:a,onRegenerate:o,onRegenerateContent:u,onModifySlide:h,onModifyAll:f})=>{const m=(R,D,L)=>{const q={...[...l][R].table||{headers:[],rows:[]}};q.headers=L.split(",").map(U=>U.trim()),t(R,"table",q)},p=(R,D)=>{const z={...[...l][R].table||{headers:[],rows:[]}};z.rows=D.split(`
`).map(q=>q.split(",").map(U=>U.trim())),t(R,"table",z)},b=(R,D,L,z)=>{const U=[...[...l][R].points||[]];U[D]={...U[D],[L]:z},t(R,"points",U)},v=(R,D,L,z)=>{const U=[...[...l][R].items||[]];U[D]={...U[D],[L]:z},t(R,"items",U)},w=(R,D,L,z)=>{const U=[...[...l][R].columns||[{},{}]];U[D]={...U[D],[L]:z},t(R,"columns",U)},x=(R,D,L,z)=>{const U=[...[...l][R].columns||[{},{}]],it=[...U[D].items||[]];it[L]=z,U[D]={...U[D],items:it},t(R,"columns",U)},_=(R,D)=>{const q=[...[...l][R].columns||[{},{}]];q[D]||(q[D]={title:"",items:[]});const U=[...q[D].items||[],""];q[D]={...q[D],items:U},t(R,"columns",q)},A=R=>{const L=[...l][R].columns||[];if(L.length>=4){alert("4");return}const z=[...L,{title:"",items:[""]}];t(R,"columns",z)},T=(R,D)=>{const z=[...l][R].columns||[];if(z.length<=2){alert("2");return}const q=z.filter((U,it)=>it!==D);t(R,"columns",q)},M=Gl[a]?.templates?Object.keys(Gl[a].templates):[];return G.jsxs("div",{className:"bg-black/20 p-4 rounded-lg space-y-4",children:[G.jsx("p",{className:"text-sm text-gray-300 mb-2 font-semibold",children:""}),G.jsx("div",{className:"space-y-4 max-h-[40vh] overflow-y-auto pr-2",children:l.map((R,D)=>G.jsxs("div",{className:"bg-gray-900/50 border border-white/10 rounded-lg p-4",children:[G.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[G.jsxs("div",{children:[G.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:[" ",D+1," - "]}),G.jsx("input",{type:"text",value:R.title,onChange:L=>t(D,"title",L.target.value),className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),G.jsxs("div",{children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:""}),G.jsxs("div",{className:"flex items-center space-x-2",children:[G.jsx("select",{value:R.template||"",onChange:L=>t(D,"template",L.target.value),className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500",children:M.map(L=>G.jsx("option",{value:L,children:L},L))}),G.jsx("button",{onClick:()=>u(D),title:"AI",className:"p-2 bg-indigo-600 hover:bg-indigo-500 rounded-md transition-colors flex-shrink-0",children:G.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[G.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),G.jsx("path",{d:"M3 3v5h5"}),G.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),G.jsx("path",{d:"M21 21v-5h-5"})]})})]})]})]}),["three_points"].includes(R.template)?G.jsx("div",{className:"space-y-3 mt-3",children:R.points?.map((L,z)=>G.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[G.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:[" ",z+1," - "]}),G.jsx("input",{type:"text",value:L.title,onChange:q=>b(D,z,"title",q.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),G.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:[" ",z+1," - "]}),G.jsx("textarea",{value:L.summary,onChange:q=>b(D,z,"summary",q.target.value),rows:2,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"}),G.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:[" ",z+1," - "]}),G.jsx("textarea",{value:L.icon_description,onChange:q=>b(D,z,"icon_description",q.target.value),rows:2,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]},z))}):["vertical_steps","content_basic"].includes(R.template)?G.jsx("div",{className:"space-y-3 mt-3",children:R.template==="content_basic"?G.jsxs("div",{children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:" (11)"}),G.jsx("textarea",{value:Array.isArray(R.items)?R.items.join(`
`):"",onChange:L=>t(D,"items",L.target.value.split(`
`)),rows:5,className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]}):R.items?.map((L,z)=>G.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[G.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:[" ",z+1," - "]}),G.jsx("input",{type:"text",value:L.title||"",onChange:q=>v(D,z,"title",q.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),G.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:[" ",z+1," - "]}),G.jsx("textarea",{value:L.description||L.summary||"",onChange:q=>v(D,z,"description",q.target.value),rows:2,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]},z))}):R.template==="comparison"?G.jsxs("div",{className:"space-y-3 mt-3",children:[G.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.columns?.map((L,z)=>G.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10 relative",children:[R.columns.length>2&&G.jsx("button",{onClick:()=>T(D,z),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-700 hover:bg-red-600 rounded-full text-white text-xs font-bold flex items-center justify-center",title:"",children:""}),G.jsxs("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:[" ",z+1," - "]}),G.jsx("input",{type:"text",value:L.title||"",onChange:q=>w(D,z,"title",q.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),G.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:[" ",z+1," - "]}),L.items?.map((q,U)=>G.jsx("input",{type:"text",value:q,onChange:it=>x(D,z,U,it.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 mb-1",placeholder:": ****10,000"},U)),G.jsx("button",{onClick:()=>_(D,z),className:"mt-2 text-xs px-2 py-1 bg-sky-700 hover:bg-sky-600 rounded",children:""})]},z))}),(R.columns?.length||0)<4&&G.jsx("div",{className:"text-center",children:G.jsx("button",{onClick:()=>A(D),className:"mt-2 text-sm px-4 py-2 bg-green-700 hover:bg-green-600 rounded",children:" (4)"})})]}):R.template==="table_basic"?G.jsx("div",{className:"space-y-3 mt-3",children:G.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:" ()"}),G.jsx("input",{type:"text",value:Array.isArray(R.table?.headers)?R.table.headers.join(", "):"",onChange:L=>m(D,"headers",L.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:" (11)"}),G.jsx("textarea",{value:Array.isArray(R.table?.rows)?R.table.rows.map(L=>L.join(", ")).join(`
`):"",onChange:L=>p(D,L.target.value),rows:5,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"}),G.jsxs("div",{children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:" (Summary)"}),G.jsx("textarea",{value:R.summary||"",onChange:L=>t(D,"summary",L.target.value),rows:3,className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:"Markdown..."})]})]})}):R.template==="bar_chart"?G.jsx("div",{className:"space-y-3 mt-3",children:G.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:" (:  (%))"}),G.jsx("input",{type:"text",value:R.chart_data?.datasets?.[0]?.label||"",onChange:L=>{const z={...R.chart_data||{}};z.datasets||(z.datasets=[{}]),z.datasets[0]={...z.datasets[0],label:L.target.value},t(D,"chart_data",z)},className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500"}),G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:"X  ()"}),G.jsx("input",{type:"text",value:Array.isArray(R.chart_data?.labels)?R.chart_data.labels.join(", "):"",onChange:L=>{const z={...R.chart_data||{}};z.labels=L.target.value.split(",").map(q=>q.trim()),t(D,"chart_data",z)},className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:": A, B, C"}),G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:"Y  ()"}),G.jsx("input",{type:"text",value:Array.isArray(R.chart_data?.datasets?.[0]?.data)?R.chart_data.datasets[0].data.join(", "):"",onChange:L=>{const z={...R.chart_data||{}};z.datasets||(z.datasets=[{}]);const q=L.target.value.split(",").map(U=>parseFloat(U.trim())||0);z.datasets[0]={...z.datasets[0],data:q},t(D,"chart_data",z)},className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:": 75, 50, 90"})]})}):R.template==="math_basic"?G.jsx("div",{className:"space-y-3 mt-3",children:G.jsxs("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:" (Summary)"}),G.jsx("textarea",{value:R.summary||"",onChange:L=>t(D,"summary",L.target.value),rows:4,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:"Markdown..."}),G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:" (Formula) - KaTeX"}),G.jsx("textarea",{value:R.formula||"",onChange:L=>t(D,"formula",L.target.value),rows:3,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:": $$ x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$"})]})}):R.template==="highlighted_number"?G.jsx("div",{className:"space-y-3 mt-3",children:G.jsx("div",{className:"bg-gray-800/50 p-3 rounded-md border border-white/10",children:G.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[G.jsxs("div",{children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:":  (Number)"}),G.jsx("input",{type:"text",value:R.number||"",onChange:L=>t(D,"number",L.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:": 98%"}),G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:":  (Description)"}),G.jsx("input",{type:"text",value:R.description||"",onChange:L=>t(D,"description",L.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:": "})]}),G.jsxs("div",{children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mb-2 block",children:":  (Content Title)"}),G.jsx("input",{type:"text",value:R.content_title||"",onChange:L=>t(D,"content_title",L.target.value),className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:": "}),G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:":  (Summary)"}),G.jsx("textarea",{value:R.summary||"",onChange:L=>t(D,"summary",L.target.value),rows:3,className:"w-full bg-gray-700/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:"..."})]})]})})}):R.template==="quote"?G.jsxs("div",{children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-3 mb-2 block",children:" (Summary)"}),G.jsx("textarea",{value:R.summary||"",onChange:L=>t(D,"summary",L.target.value),rows:3,className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono",placeholder:": A"}),G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-2 mb-2 block",children:" (Description)"}),G.jsx("input",{type:"text",value:R.description||"",onChange:L=>t(D,"description",L.target.value),className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:":  "})]}):G.jsxs("div",{children:[G.jsxs("label",{className:"text-xs font-bold text-gray-400 mt-3 mb-2 block",children:[" ",D+1," - "]}),G.jsx("textarea",{value:R.summary,onChange:L=>t(D,"summary",L.target.value),rows:3,className:"w-full bg-gray-800/60 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"}),R.infographic?.needed&&G.jsxs("div",{children:[G.jsx("label",{className:"text-xs font-bold text-gray-400 mt-3 mb-2 block",children:""}),G.jsx("textarea",{value:R.infographic.description,onChange:L=>t(D,"infographic",{...R.infographic,description:L.target.value}),rows:3,className:"w-full bg-indigo-900/30 border border-indigo-500/50 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono"})]})]}),G.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-2 border-t border-white/10",children:[G.jsx("button",{onClick:()=>h(D),title:"AI",className:"px-3 py-1 bg-indigo-600 hover:bg-indigo-500 text-xs font-medium rounded-md transition-colors",children:"AI"}),G.jsx("button",{onClick:()=>e(D),className:"px-3 py-1 bg-sky-600 hover:bg-sky-500 text-xs font-medium rounded-md transition-colors",children:""}),G.jsx("button",{onClick:()=>i(D),className:"px-3 py-1 bg-red-700 hover:bg-red-600 text-xs font-medium rounded-md transition-colors disabled:opacity-50",disabled:l.length<=1,children:""})]})]},D))}),G.jsxs("div",{className:"flex flex-col items-center pt-2 space-y-3",children:[G.jsx("button",{onClick:f,className:"w-full max-w-md px-6 py-2 bg-indigo-700 hover:bg-indigo-600 text-sm font-medium rounded-md transition-colors",children:"AI..."}),G.jsxs("div",{className:"flex justify-center space-x-4",children:[G.jsx("button",{onClick:o,className:"px-6 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors",children:""}),G.jsx("button",{onClick:r,className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors",disabled:l.length===0,children:""})]})]})]})},Bw=({onDownload:l,onDownloadPdf:t,isGeneratingPdf:e})=>G.jsxs("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center space-x-4",children:[G.jsx("button",{onClick:l,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-sm font-medium rounded-md transition-colors",children:"ZIP"}),G.jsx("button",{onClick:t,className:`px-6 py-2 bg-green-700 hover:bg-green-600 text-sm font-medium rounded-md transition-colors ${e?"opacity-50 cursor-not-allowed":""}`,disabled:e,children:e?"PDF...":"PDF"})]}),Iw=({value:l,onChange:t,onSend:e,disabled:i})=>G.jsxs("div",{className:"relative",children:[G.jsx("input",{type:"text",value:l,onChange:t,onKeyPress:r=>r.key==="Enter"&&e(),placeholder:"...",className:"w-full bg-gray-900/50 border border-white/20 rounded-lg py-3 pl-4 pr-14 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow",disabled:i}),G.jsxs("button",{onClick:e,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 bg-indigo-600 hover:bg-indigo-500 rounded-full transition-colors disabled:opacity-50",disabled:i||!l.trim(),children:[" ",G.jsx(Tw,{})," "]})]}),Fw=({onPreview:l,onApprove:t,onEditCode:e,onRegenerate:i,onReturnToOutline:r,disabled:a})=>G.jsxs("div",{className:"flex justify-end mt-4 space-x-2",children:[G.jsx("button",{className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50 hidden",disabled:a,onClick:l,children:""}),G.jsx("button",{className:"px-4 py-2 bg-sky-800 hover:bg-sky-700 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:r,title:"",children:""}),G.jsx("button",{className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:i,children:""}),G.jsx("button",{className:"px-4 py-2 bg-sky-600 hover:bg-sky-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:e,children:""}),G.jsx("button",{className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition-colors disabled:opacity-50",disabled:a,onClick:t,children:""})]}),Df=({title:l,steps:t,currentStepKey:e,totalWaitTime:i})=>{const r=t.findIndex(u=>u.key===e),[a,o]=pe.useState(Math.ceil(i/1e3));return pe.useEffect(()=>{if(i>0){const u=Math.ceil(i/1e3);o(u);const h=setInterval(()=>{o(f=>f<=1?(clearInterval(h),0):f-1)},1e3);return()=>clearInterval(h)}else o(0)},[i]),G.jsxs("div",{className:"bg-gray-900/50 border border-white/10 rounded-lg p-4",children:[G.jsxs("p",{className:"font-semibold text-sm flex items-center mb-3",children:[G.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),l,a>0&&G.jsxs("span",{className:"ml-auto text-xs text-gray-400",children:["( ",a," )"]})]}),G.jsx("div",{className:"ml-6 pl-4 border-l-2 border-indigo-500 space-y-2",children:t.map((u,h)=>G.jsxs("p",{className:`text-xs flex items-center transition-colors ${h<=r?"text-gray-200":"text-gray-500"}`,children:[h<r?G.jsx("span",{className:"text-green-400 mr-2",children:""}):h===r?G.jsx("span",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):G.jsx("span",{className:"mr-2",children:""}),u.text]},u.key))})]})},Pw=({outline:l,currentIndex:t,thinkingState:e})=>{const i=pe.useRef(null);return pe.useEffect(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[t]),G.jsxs("div",{className:"bg-black/20 p-4 rounded-lg space-y-3",children:[G.jsx("p",{className:"text-sm text-gray-300 mb-2 font-semibold",children:"..."}),G.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto pr-2",children:l.map((r,a)=>{const o=a<t,u=a===t;return G.jsxs("div",{ref:u?i:null,className:`border border-white/10 rounded-lg p-3 transition-all duration-300 ${u?"bg-indigo-900/50":"bg-gray-900/50"}`,children:[G.jsxs("p",{className:"font-semibold text-sm flex items-center",children:[o?G.jsx("span",{className:"text-green-400 mr-2",children:""}):u?G.jsx("span",{className:"animate-pulse mr-2",children:""}):G.jsx("span",{className:"text-gray-500 mr-2",children:""}),a+1,". ",r.title,o&&G.jsx("span",{className:"ml-auto text-xs text-green-400 font-medium",children:""}),u&&G.jsx("span",{className:"ml-auto text-xs text-indigo-300 font-medium",children:""})]}),u&&G.jsx("div",{className:"mt-3",children:G.jsx(Df,{title:"...",steps:_w,currentStepKey:e})})]},a)})})]})},Uw=({chatState:l})=>G.jsxs("div",{className:"w-full h-full bg-white/5 rounded-xl flex flex-col border border-white/10 overflow-hidden",children:[G.jsxs("div",{className:"flex-grow p-6 overflow-y-auto space-y-4",children:[G.jsx(Rw,{messages:l.messages}),l.apiErrorStep&&G.jsx("div",{className:"bg-black/20 p-4 rounded-lg flex justify-center",children:G.jsx("button",{onClick:l.handleRetry,className:"px-6 py-2 bg-yellow-600 hover:bg-yellow-500 text-sm font-medium rounded-md transition-colors",children:""})}),l.appStatus===Jt.STRUCTURED&&G.jsx(Dw,{markdown:l.structuredMarkdown,setMarkdown:l.setStructuredMarkdown,onApprove:l.handleMarkdownApproval,onRegenerate:l.handleRegenerateStructure}),l.appStatus===Jt.SELECTING_THEME&&G.jsx(Nw,{selectedTheme:l.selectedTheme,selectedDesign:l.design,onThemeSelect:l.handleThemeSelection,onDesignSelect:l.handleDesignSelection,onApprove:l.handleThemeApproval}),l.appStatus===Jt.CREATING_OUTLINE&&G.jsx(Ow,{onSelect:l.handleAgendaChoice}),l.appStatus===Jt.SELECTING_SECTION_HEADERS&&G.jsx(zw,{onSelect:l.handleSectionHeaderChoice}),l.appStatus===Jt.OUTLINE_CREATED&&G.jsx(Lw,{outline:l.slideOutline,onChange:l.handleOutlineChange,onInsert:l.handleInsertSlide,onDelete:l.handleDeleteSlide,onStart:l.handleStartGeneration,selectedTheme:l.selectedTheme,onRegenerate:l.handleRegenerateOutline,onRegenerateContent:l.handleRegenerateSlideContent,onModifySlide:l.handleOpenModifyModal,onModifyAll:l.handleOpenModifyAllModal}),(l.appStatus===Jt.GENERATING_SLIDES||l.appStatus===Jt.SLIDE_GENERATED)&&G.jsx(Pw,{outline:l.slideOutline,currentIndex:l.currentSlideIndex,thinkingState:l.thinkingState}),l.appStatus===Jt.ALL_SLIDES_GENERATED&&G.jsx(Bw,{onDownload:l.handleDownloadZip,onDownloadPdf:l.handleDownloadPdf,isGeneratingPdf:l.isGeneratingPdf}),G.jsx("div",{ref:l.chatEndRef})]}),G.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-white/10 bg-black/20",children:[G.jsx(Iw,{value:l.userInput,onChange:t=>l.setUserInput(t.target.value),onSend:l.handleSendMessage,disabled:l.appStatus!==Jt.SLIDE_GENERATED}),G.jsx(Fw,{onPreview:l.handlePreview,onApprove:l.handleApproveAndNext,onEditCode:l.handleOpenCodeEditor,onRegenerate:l.handleRegenerateCurrentSlide,onReturnToOutline:l.handleReturnToOutline,disabled:l.appStatus!==Jt.SLIDE_GENERATED})]})]}),Zb=({htmlContent:l,containerWidth:t})=>{const r=t>0?(t-16)/1280:1,a=720*r;return G.jsx("div",{className:"relative w-full rounded-lg overflow-hidden shadow-lg border border-white/10",style:{height:`${a}px`},children:G.jsx("iframe",{srcDoc:l,width:1280,height:720,className:"border-none",style:{transform:`scale(${r})`,transformOrigin:"top left"},sandbox:"allow-same-origin allow-scripts",title:"Slide Preview Item"},l)})},jw=({generatedSlides:l,htmlContent:t,isLoading:e,loadingSlideTitle:i})=>{const r=pe.useRef(null),a=pe.useRef(null),[o,u]=pe.useState(0);return pe.useEffect(()=>{const h=new ResizeObserver(f=>{if(f[0]){const{width:m}=f[0].contentRect;u(m)}});return r.current&&h.observe(r.current),()=>h.disconnect()},[]),pe.useEffect(()=>{a.current?.scrollIntoView({behavior:"smooth"})},[l,t,e]),G.jsxs("div",{ref:r,className:"w-full h-full bg-black/10 rounded-xl flex flex-col p-4 border border-white/10 overflow-y-auto",children:[G.jsxs("div",{className:"space-y-4",children:[l.map((h,f)=>G.jsx(Zb,{htmlContent:h,containerWidth:o},f)),t&&!e&&G.jsx(Zb,{htmlContent:t,containerWidth:o}),e&&G.jsx("div",{className:"w-full flex flex-col items-center justify-center bg-white/5 rounded-lg border border-dashed border-indigo-500",style:{height:`${720*((o-16)/1280)}px`},children:G.jsxs("div",{className:"text-center",children:[G.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto"}),G.jsx("p",{className:"mt-4 text-lg font-semibold",children:i||"..."}),G.jsx("p",{className:"mt-1 text-sm text-gray-400",children:"HTML..."})]})})]}),G.jsx("div",{ref:a})]})},Hw=({isOpen:l,tempApiKey:t,setTempApiKey:e,handleSave:i})=>l?G.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:G.jsxs("div",{className:"bg-[#2a2a2e] border border-white/10 rounded-lg shadow-xl p-8 w-full max-w-md",children:[G.jsx("h2",{className:"text-xl font-bold mb-4",children:"Gemini API"}),G.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Google AI StudioAPI"}),G.jsx("input",{type:"password",value:t,onChange:r=>e(r.target.value),placeholder:"API...",className:"w-full bg-gray-900/50 border border-white/20 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),G.jsx("div",{className:"flex justify-end mt-6",children:G.jsx("button",{onClick:i,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md font-medium transition-colors",children:""})})]})}):null,Gw=({isOpen:l,html:t,setHtml:e,onSave:i,onCancel:r})=>l?G.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:G.jsxs("div",{className:"bg-[#2a2a2e] border border-white/10 rounded-lg shadow-xl p-6 w-full max-w-4xl h-[80vh] flex flex-col",children:[G.jsx("h2",{className:"text-xl font-bold mb-4 flex-shrink-0",children:"HTML"}),G.jsx("textarea",{value:t,onChange:a=>e(a.target.value),className:"w-full flex-grow bg-gray-900/50 border border-white/20 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow font-mono",placeholder:"HTML..."}),G.jsxs("div",{className:"flex justify-end mt-4 flex-shrink-0 space-x-2",children:[G.jsx("button",{onClick:r,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-md font-medium transition-colors",children:""}),G.jsx("button",{onClick:i,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md font-medium transition-colors",children:""})]})]})}):null,qw=({isOpen:l,mode:t,index:e,value:i,onChange:r,onSave:a,onCancel:o})=>{if(!l)return null;const u=t==="all"?"AI":` ${e+1} AI`,h=t==="all"?"":`${e+1}3`;return G.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:G.jsxs("div",{className:"bg-[#2a2a2e] border border-white/10 rounded-lg shadow-xl p-6 w-full max-w-2xl flex flex-col",children:[G.jsx("h2",{className:"text-xl font-bold mb-4 flex-shrink-0",children:u}),G.jsx("p",{className:"text-sm text-gray-400 mb-4",children:h}),G.jsx("textarea",{value:i,onChange:f=>r(f.target.value),className:"w-full h-40 bg-gray-900/50 border border-white/20 rounded-md p-3 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-shadow font-mono",placeholder:"..."}),G.jsxs("div",{className:"flex justify-end mt-4 flex-shrink-0 space-x-2",children:[G.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-600 hover:bg-gray-500 rounded-md font-medium transition-colors",children:""}),G.jsx("button",{onClick:a,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-md font-medium transition-colors",children:""})]})]})})};function $w(){const[l,t]=pe.useState(""),[e,i]=pe.useState(!1),[r,a]=pe.useState(""),[o,u]=pe.useState(Jt.INITIAL),[h,f]=pe.useState([]),[m,p]=pe.useState([]),[b,v]=pe.useState(""),[w,x]=pe.useState(""),[_,A]=pe.useState(""),[T,M]=pe.useState(""),[R,D]=pe.useState([]),[L,z]=pe.useState(!1),[q,U]=pe.useState(""),[it,ut]=pe.useState(null),[H,rt]=pe.useState("standard"),[N,at]=pe.useState("dark"),[X,W]=pe.useState(!1),[xt,bt]=pe.useState(0),[Rt,B]=pe.useState([]),[P,st]=pe.useState(""),[pt,vt]=pe.useState(!1),[Ut,Ft]=pe.useState(""),[Yt,qt]=pe.useState(!1),[ke,Ae]=pe.useState(""),[ei,hi]=pe.useState({index:null,mode:"single"}),[C,At]=pe.useState([]),[gt,$]=pe.useState(null),[j,Z]=pe.useState(null),[kt,Tt]=pe.useState(0),[ht,zt]=pe.useState(!1),Lt=pe.useRef(null);pe.useEffect(()=>{const tt=localStorage.getItem("gemini_api_key");if(tt){t(tt);const dt="";f([{type:"system",text:dt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","useEffect",dt)}else{i(!0);const dt="Gemini API";f([{type:"system",text:dt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_WARN","useEffect",dt)}},[]),pe.useEffect(()=>{Lt.current?.scrollIntoView({behavior:"smooth"})},[h,j]);const nt=(tt,dt,wt)=>{const mt={timestamp:new Date().toISOString(),type:tt,context:dt,data:wt};p(Nt=>[...Nt,mt])},Zt=tt=>{if(typeof tt=="string")return tt.replace(/\\n/g,`
`);if(Array.isArray(tt))return tt.map(Zt);if(typeof tt=="object"&&tt!==null){const dt={};for(const wt in tt)Object.prototype.hasOwnProperty.call(tt,wt)&&(dt[wt]=Zt(tt[wt]));return dt}return tt},ve=async(tt,dt,wt)=>{if(!l){const mt="API";return f(Nt=>[...Nt,{type:"system",text:mt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","callGeminiApi",mt),null}try{const Nt=new D7(l).getGenerativeModel({model:dt});console.log(`[INFO] Calling Gemini API for: ${wt} using ${dt}`),console.debug(`[DEBUG] Prompt for ${wt}:`,tt),nt("API_REQUEST",wt,{model:dt,prompt:tt});let te=await(await(await Nt.generateContent(tt)).response).text();return te=te.replace(/^```(json|html|svg)?\s*|```\s*$/g,"").trim(),te=te.replace(/^xml\s*/,""),console.log(`[INFO] Received response for: ${wt}`),nt("API_RESPONSE_SUCCESS",wt,te),te}catch(mt){return console.error(`[FATAL] API Error during ${wt}:`,mt),nt("API_ERROR",wt,mt.message),{error:`API: ${mt.message}`}}},ye=tt=>{let dt=null;const wt=/[\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Han}]+/gu;return{sanitizedOutline:tt.map(Nt=>{if(Nt.template!=="highlighted_number"||!Nt.number||typeof Nt.number!="string")return Nt;let Kt=Nt.number,se=Kt,te="";se=se.replace(/[*_]/g,"");const Pt=se.match(wt);if(Pt&&(te=Pt.join(""),se=se.replace(wt,"").trim()),Kt!==se){const Ct={...Nt};return Ct.number=se,te&&Ct.description&&!Ct.description.includes(te)?Ct.description=Ct.description+te:te&&!Ct.description&&(Ct.description=te),dt="''  'number' : '''description' ",Ct}return Nt}),notification:dt}},Gi=tt=>{if(!tt||typeof tt!="string"||!tt.startsWith("<svg"))return console.warn("[WARN] Invalid SVG string received:",tt),tt;let dt=tt;return dt=dt.replace(/<svg([^>]*?)width=".*?"/g,"<svg$1"),dt=dt.replace(/<svg([^>]*?)height=".*?"/g,"<svg$1"),/<svg([^>]*?)viewBox=".*?"/g.test(dt)?dt=dt.replace("<svg",'<svg width="100%" height="100%"'):(console.warn('[WARN] SVG missing viewBox. Adding default "0 0 100 100".'),dt=dt.replace("<svg",'<svg width="100%" height="100%" viewBox="0 0 100 100"')),dt=dt.replace(/<svg([^>]*?)fill="(#fff|#ffffff|#000|#000000)"/gi,'<svg$1fill="transparent"'),dt=dt.replace(/<rect([^>]*?)fill="(#fff|#ffffff|#000|#000000)"([^>]*?)width="100%"([^>]*?)height="100%"/gi,'<rect$1fill="transparent"$3width="100%"$4height="100%"'),dt},rr=async tt=>{const dt=/^[a-z0-9-]+$/;let wt=(tt.icon_description||"").trim(),mt=wt,Nt=null;if(dt.test(wt))mt=`${tt.title}: ${tt.summary}`,console.log(`[INFO] Icon name is valid: "${wt}". Attempting fetch...`);else{console.warn(`[WARN] Invalid icon name: "${wt}". Translating via AI...`);const Kt=Jn.findIconName(wt),se=await ve(Kt,"gemini-2.5-flash-lite","Icon Translation");se&&!se.error?(wt=se.trim().toLowerCase(),console.log(`[INFO] AI translation: "${tt.icon_description}" -> "${wt}"`)):(console.error(`[ERROR] Icon translation failed for: "${tt.icon_description}"`),wt="circle")}if(Nt=await qi(wt),Nt===null){console.warn(`[WARN] Retrying translation. (Failed attempt: "${wt}")`);const Kt=Jn.findIconNameRetry(mt,wt),se=await ve(Kt,"gemini-2.5-flash-lite","Icon Translation Retry");let te="circle";se&&!se.error?(te=se.trim().toLowerCase(),console.log(`[INFO] AI retry translation: "${mt}" -> "${te}"`)):console.error("[ERROR] Icon retry translation failed."),Nt=await qi(te)}return Nt===null&&(console.log("[INFO] Final fallback: fetching 'circle'."),Nt=await qi("circle")),Nt||""},qi=async tt=>{(!tt||!/^[a-z0-9-]+$/.test(tt))&&(console.warn(`[WARN] Invalid icon name received: "${tt}". Using default 'circle'.`),tt="circle");try{const wt=await fetch(`https://cdn.jsdelivr.net/npm/lucide-static@latest/icons/${tt}.svg`);return wt.ok?await wt.text():(console.warn(`[WARN] Failed to fetch icon: ${tt}. Server responded with ${wt.status}.`),null)}catch(wt){return console.error(`[ERROR] Fetching icon ${tt}:`,wt),null}},Er=()=>{if(r){localStorage.setItem("gemini_api_key",r),t(r),i(!1);const tt="API";f(dt=>[...dt,{type:"system",text:tt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleApiKeySave",tt)}},je=()=>{if(it==="structure"){const tt="";f(dt=>[...dt,{type:"system",text:tt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_INFO","handleRetry: structure",tt),ut(null),u(Jt.STRUCTURED)}else if(it==="outline"){const tt=h.slice().reverse().find(dt=>dt.text.includes(""))?.text.includes("");rs(tt)}},wi=tt=>tt.preventDefault(),an=tt=>{tt.preventDefault();const dt=tt.dataTransfer.files;dt.length>0&&Ze(dt[0])},Ze=async tt=>{if(!tt)return;if(!["application/pdf","text/plain","text/markdown"].includes(tt.type)){const mt=`: ${tt.type}`;f(Nt=>[...Nt,{type:"system",text:mt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleFileSelect",mt);return}x(tt.name),z(!0),U("...");const wt=`${tt.name} `;f(mt=>[...mt,{type:"system",text:wt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleFileSelect",wt);try{let mt="";if(tt.type==="application/pdf"){const Nt=new Uint8Array(await tt.arrayBuffer()),Kt=await x4({data:Nt}).promise;for(let se=1;se<=Kt.numPages;se++){const Pt=await(await Kt.getPage(se)).getTextContent();mt+=Pt.items.map(Ct=>Ct.str).join(" ")}}else mt=await tt.text();nt("SYSTEM_EVENT","handleFileSelect",`Text extraction complete. Length: ${mt.length}`),_a(mt)}catch(mt){const Nt="";f(Kt=>[...Kt,{type:"system",text:Nt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleFileSelect",`${Nt} ${mt.message}`),z(!1),x("")}},_a=async tt=>{const dt=`(${tt.length})`;f(Ct=>[...Ct,{type:"system",text:dt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","onTextExtracted",dt),u(Jt.STRUCTURING),U("..."),ut(null),A(tt);const wt=Math.max(4e3,Math.min(18e4,tt.length*1.8));Tt(wt);const mt=wt/4,Nt=Jn.analyzeContext(tt),Kt=ve(Nt,"gemini-2.5-flash-lite",""),se=Jn.structureText(tt),te=ve(se,"gemini-2.5-flash-lite",""),Pt=(async()=>{try{Z(Dl[0].key),await new Promise(Ct=>setTimeout(Ct,mt)),Z(Dl[1].key),await new Promise(Ct=>setTimeout(Ct,mt)),Z(Dl[2].key),await new Promise(Ct=>setTimeout(Ct,mt)),Z(Dl[3].key),await new Promise(Ct=>setTimeout(Ct,mt))}catch(Ct){console.error("Dummy progress failed",Ct)}})();try{const[Ct,ee]=await Promise.all([Kt,te,Pt]);Z(null),z(!1),Tt(0);let re=!1;if(Ct&&!Ct.error)try{const Gt=JSON.parse(Ct);$(Gt),console.log("[INFO] Document Context Analyzed:",Gt);const ce=Wb.purpose[Gt.purpose]||Gt.purpose,Fe=Wb.audience[Gt.audience]||Gt.audience,ln=`
- ****: ${ce}
- ****: ${Fe}`;f(Ki=>[...Ki,{type:"system",text:ln,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","onTextExtracted (Context)",ln)}catch(Gt){console.error("[FATAL] Failed to parse document context JSON:",Gt);const ce="";f(Fe=>[...Fe,{type:"system",text:ce,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","onTextExtracted (Context Parse)",`${ce} ${Gt.message}`),re=!0}else{const Gt=Ct?Ct.error:"";f(ce=>[...ce,{type:"system",text:Gt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","onTextExtracted (Context API)",Gt),re=!0}if(ee&&!ee.error){M(ee),u(Jt.STRUCTURED);const Gt="";f(ce=>[...ce,{type:"system",text:Gt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","onTextExtracted (Structure)",Gt)}else{ut("structure");const Gt=ee?ee.error:"";f(ce=>[...ce,{type:"system",text:Gt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","onTextExtracted (Structure API)",Gt)}re&&(ut("structure"),u(Jt.INITIAL),z(!1))}catch(Ct){console.error("[FATAL] Error during structuring:",Ct),Z(null),z(!1),Tt(0),ut("structure");const ee=`: ${Ct.message}`;f(re=>[...re,{type:"system",text:ee,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_FATAL","onTextExtracted (Catch)",ee)}},Ao=async()=>{if(!_){const wt=": ";f(mt=>[...mt,{type:"system",text:wt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleRegenerateStructure",wt);return}if(!window.confirm("AI"))return;const tt="...";f(wt=>[...wt,{type:"system",text:tt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleRegenerateStructure",tt),u(Jt.STRUCTURING),z(!0),U("..."),ut(null);const dt=await ve(Jn.structureText(_),"gemini-2.5-flash-lite","");if(z(!1),dt&&!dt.error){M(dt),u(Jt.STRUCTURED);const wt="";f(mt=>[...mt,{type:"system",text:wt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleRegenerateStructure",wt)}else{ut("structure"),u(Jt.STRUCTURED);const wt=dt?dt.error:"";f(mt=>[...mt,{type:"system",text:wt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleRegenerateStructure",wt)}},_o=()=>{u(Jt.SELECTING_THEME);const tt="";f(dt=>[...dt,{type:"system",text:tt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleMarkdownApproval",tt)},ns=tt=>{rt(tt)},kr=tt=>{at(tt)},zn=()=>{u(Jt.CREATING_OUTLINE);const wt=`${Gl[H]?.name||""} (${N==="dark"?"":""}) `,mt="";f(Nt=>[...Nt,{type:"user",text:wt,timestamp:new Date().toISOString()},{type:"system",text:mt,timestamp:new Date().toISOString()}]),nt("UI_USER","handleThemeApproval",wt),nt("UI_SYSTEM","handleThemeApproval",mt)},on=tt=>{W(tt),u(Jt.SELECTING_SECTION_HEADERS);const dt=`: ${tt?"":""}`,wt="";f(mt=>[...mt,{type:"user",text:dt,timestamp:new Date().toISOString()},{type:"system",text:wt,timestamp:new Date().toISOString()}]),nt("UI_USER","handleAgendaChoice",dt),nt("UI_SYSTEM","handleAgendaChoice",wt)},rs=async tt=>{const dt=`: ${tt?"":""}`;f(te=>[...te,{type:"user",text:dt,timestamp:new Date().toISOString()}]),nt("UI_USER","handleSectionHeaderChoice",dt),u(Jt.GENERATING_OUTLINE),z(!0),U("..."),ut(null);const wt=Math.max(5e3,Math.min(18e4,T.length*1.4));Tt(wt);const mt=wt/5,Nt=Jn.createOutline(T,X,tt,gt),Kt=ve(Nt,"gemini-2.5-flash-lite",""),se=(async()=>{try{Z(co[0].key),await new Promise(te=>setTimeout(te,mt)),Z(co[1].key),await new Promise(te=>setTimeout(te,mt)),Z(co[2].key),await new Promise(te=>setTimeout(te,mt)),Z(co[3].key),await new Promise(te=>setTimeout(te,mt)),Z(co[4].key),await new Promise(te=>setTimeout(te,mt))}catch(te){console.error("Dummy progress failed",te)}})();try{const[te]=await Promise.all([Kt,se]);if(Z(null),z(!1),Tt(0),te&&!te.error){let Pt;try{Pt=JSON.parse(te)}catch(Qt){if(Qt.message.includes("escaped character")){console.warn("[WARN] JSON parse failed. Retrying with backslash fix...");try{const It=te.replace(/\\/g,"\\\\");Pt=JSON.parse(It);const me="AI()";f(Ne=>[...Ne,{type:"system",text:me,timestamp:new Date().toISOString()}]),nt("SYSTEM_AUTO_FIX","handleSectionHeaderChoice (Parse)",me)}catch(It){console.error("[FATAL] Backslash fix failed.",It),ut("outline");const me=`AI: ${Qt.message}`;f(Ne=>[...Ne,{type:"system",text:me,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleSectionHeaderChoice (Parse Fix 1)",me);return}}else if(Qt.message.includes("Bad control character")){console.warn("[WARN] JSON parse failed due to bad control character. Retrying with newline/tab fix...");try{const It=te.replace(/[\n\r\t]/g," ");Pt=JSON.parse(It);const me="AI()";f(Ne=>[...Ne,{type:"system",text:me,timestamp:new Date().toISOString()}]),nt("SYSTEM_AUTO_FIX","handleSectionHeaderChoice (Parse)",me)}catch(It){console.error("[FATAL] Control character fix failed.",It),ut("outline");const me=`AI: ${Qt.message}`;f(Ne=>[...Ne,{type:"system",text:me,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleSectionHeaderChoice (Parse Fix 2)",me);return}}else{ut("outline");const It=`AI: ${Qt.message}`;f(me=>[...me,{type:"system",text:It,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleSectionHeaderChoice (Parse)",It);return}}const Ct=Pt.map(Qt=>{const It={...Qt};if(It.template==="content_basic"){if((!It.items||Array.isArray(It.items)&&It.items.length===0)&&It.summary&&typeof It.summary=="string"&&It.summary.trim().length>0){const me=It.summary.includes(`
`)?It.summary.split(`
`):It.summary.split(" ");It.items=me.map(Ne=>Ne.trim()).filter(Ne=>Ne.length>0)}It.summary=""}else if(["three_points","comparison","vertical_steps"].includes(It.template))It.summary="";else if(It.template==="table_basic"||It.template==="highlighted_number")typeof It.summary!="string"&&(It.summary="");else if(["content_with_diagram","title_slide","agenda","summary_or_thankyou"].includes(It.template)){if((!It.summary||typeof It.summary=="string"&&It.summary.trim().length===0)&&It.items&&Array.isArray(It.items)&&It.items.length>0){const me=It.items.some(Ne=>Ne.includes(`
`))?`
`:" ";It.summary=It.items.join(me)}It.items=null,It.points=null,It.columns=null,It.table=null,typeof It.summary!="string"&&(It.summary="")}else It.template==="section_header"&&(It.summary="",It.items=null,It.points=null,It.columns=null,It.table=null);return It}),ee=Zt(Ct),{sanitizedOutline:re,notification:Gt}=ye(ee);let ce=[...re];const Fe=6;let ln=ce.length>1&&ce[1].template==="agenda";if(X){if(ln){const Qt=ce[1],It=(Qt.summary||"").includes(`
`)?(Qt.summary||"").split(`
`).filter(me=>me.trim().length>0):(Qt.summary||"").split(" ").filter(me=>me.trim().length>0);if(It.length>Fe){const me=Math.ceil(It.length/Fe),Ne=[],Yi=(Qt.title||"").replace(/\s*\(\d+\/\d+\)\s*$/,"");for(let ii=0;ii<me;ii++){const Ro=It.slice(ii*Fe,(ii+1)*Fe);Ne.push({...Qt,title:`${Yi} (${ii+1}/${me})`,summary:Ro.join(`
`),items:null,points:null,columns:null,table:null})}ce.splice(1,1,...Ne);const di="";f(ii=>[...ii,{type:"system",text:di,timestamp:new Date().toISOString()}]),nt("SYSTEM_AUTO_FIX","handleSectionHeaderChoice (Agenda Split)",di)}}if(ln=ce.length>1&&ce[1].template==="agenda",!ln){const Qt=ce.slice(1).map(di=>di.title||"").filter(di=>di.length>0),It=Qt.length>0?Qt:[""],me=Math.ceil(It.length/Fe),Ne=[];if(It.length===0||It.length===1&&It[0]==="")Ne.push({title:"",summary:"",template:"agenda",items:null,points:null,columns:null,table:null});else for(let di=0;di<me;di++){const ii=It.slice(di*Fe,(di+1)*Fe);Ne.push({title:`${me>1?` (${di+1}/${me})`:""}`,summary:ii.join(`
`),template:"agenda",items:null,points:null,columns:null,table:null})}ce.splice(1,0,...Ne);const Yi="AI2";f(di=>[...di,{type:"system",text:Yi,timestamp:new Date().toISOString()}]),nt("SYSTEM_AUTO_FIX","handleSectionHeaderChoice (Agenda Add)",Yi)}}else{if(ln){ce.splice(1,1);const Qt="AI2";f(It=>[...It,{type:"system",text:Qt,timestamp:new Date().toISOString()}]),nt("SYSTEM_AUTO_FIX","handleSectionHeaderChoice (Agenda Remove)",Qt)}ce=ce.filter((Qt,It)=>It===0||Qt.template!=="agenda")}const Ki=7;let cn=!1;if(ce=ce.flatMap(Qt=>{if(Qt.template==="table_basic"&&Qt.table&&Array.isArray(Qt.table.rows)&&Qt.table.rows.length>Ki){cn=!0;const It=Qt.table.headers||[],me=Qt.table.rows,Ne=Math.ceil(me.length/Ki),Yi=(Qt.title||"").replace(/\s*\(\d+\/\d+\)\s*$/,""),di=[];for(let ii=0;ii<Ne;ii++){const Ro=me.slice(ii*Ki,(ii+1)*Ki);di.push({...Qt,title:`${Yi} (${ii+1}/${Ne})`,table:{headers:It,rows:Ro},summary:"",items:null,points:null,columns:null})}return di}else return[Qt]}),cn){const Qt="";f(It=>[...It,{type:"system",text:Qt,timestamp:new Date().toISOString()}]),nt("SYSTEM_AUTO_FIX","handleSectionHeaderChoice (Table Split)",Qt)}const ar=ce.some(Qt=>Qt.template==="section_header");if(tt){if(!ar){const Qt="AI";f(It=>[...It,{type:"system",text:Qt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_WARN","handleSectionHeaderChoice (Section Header)",Qt)}}else if(ar){ce=ce.filter((It,me)=>me===0||It.template!=="section_header");const Qt="AI";f(It=>[...It,{type:"system",text:Qt,timestamp:new Date().toISOString()}]),nt("SYSTEM_AUTO_FIX","handleSectionHeaderChoice (Section Header)",Qt)}D(ce),u(Jt.OUTLINE_CREATED),Gt&&(f(Qt=>[...Qt,{type:"system",text:Gt,timestamp:new Date().toISOString()}]),nt("SYSTEM_AUTO_FIX","handleSectionHeaderChoice (Guardrail)",Gt));const Ni="";f(Qt=>[...Qt,{type:"system",text:Ni,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleSectionHeaderChoice (Success)",Ni)}else{ut("outline");const Pt=te?te.error:"";f(Ct=>[...Ct,{type:"system",text:Pt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleSectionHeaderChoice (API)",Pt)}}catch(te){console.error("[FATAL] Error during outline progress simulation:",te),Z(null),z(!1),Tt(0),ut("outline");const Pt=`: ${te.message}`;f(Ct=>[...Ct,{type:"system",text:Pt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_FATAL","handleSectionHeaderChoice (Catch)",Pt)}},Gs=(tt,dt,wt)=>{const mt=[...R];dt==="infographic"?mt[tt].infographic=wt:dt==="points"?mt[tt].points=wt:mt[tt][dt]=wt,D(mt)},xu=tt=>{D(dt=>dt.filter((wt,mt)=>mt!==tt))},rc=tt=>{const dt={title:"",summary:"",template:"content_left_infographic_right",infographic:{needed:!1,description:""}},wt=[...R.slice(0,tt+1),dt,...R.slice(tt+1)];D(wt)},Eo=()=>{if(window.confirm("")){const tt="";f(mt=>[...mt,{type:"system",text:tt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleRegenerateOutline",tt);const dt=h.slice().reverse().find(mt=>mt.type==="user"&&mt.text.includes(":"))?.text,wt=dt?dt.includes(""):!1;rs(wt)}},qs=async tt=>{z(!0),U("...");const dt=R[tt],{title:wt,template:mt}=dt,Nt={...dt};delete Nt.title,delete Nt.template,mt!=="content_with_diagram"&&delete Nt.infographic;const Kt=[{name:"content_basic",description:"`items` () `summary`"},{name:"three_points",description:"`points` (3) `summary`"},{name:"vertical_steps",description:"`items` () `summary`"},{name:"comparison",description:"`columns` (2) `summary`"},{name:"table_basic",description:"`table` ({headers: [...], rows: [...]}) `summary`"},{name:"math_basic",description:"`summary` ()  `formula` (KaTeX) "},{name:"content_with_diagram",description:"`summary` ()  `infographic` "},{name:"agenda",description:"`summary` () "},{name:"title_slide",description:"`summary` () "},{name:"section_header",description:"`summary`"},{name:"summary_or_thankyou",description:"`summary` () "}],se=Jn.regenerateSlideContent(wt,Object.keys(Nt).length>0?JSON.stringify(Nt):"{}",mt,Kt),te=await ve(se,"gemini-2.5-flash-lite",`${tt+1}`);if(te&&!te.error)try{const Pt=JSON.parse(te);D(ee=>{const re=[...ee],Gt={...re[tt]};return mt!=="content_basic"&&(Gt.items=null),mt!=="three_points"&&(Gt.points=null),mt!=="comparison"&&(Gt.columns=null),mt!=="table_basic"&&(Gt.table=null),Object.assign(Gt,Pt),["content_basic","three_points","comparison","vertical_steps","section_header","table_basic"].includes(mt)&&(Gt.summary=""),mt!=="math_basic"&&(Gt.formula=null),mt!=="content_with_diagram"&&(Pt.infographic||(Gt.infographic=null)),re[tt]=Gt,re});const Ct=` ${tt+1}  ${mt} `;f(ee=>[...ee,{type:"system",text:Ct,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleRegenerateSlideContent",Ct)}catch(Pt){const Ct=`: ${Pt.message}`;f(ee=>[...ee,{type:"system",text:Ct,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleRegenerateSlideContent (Parse)",Ct)}else{const Pt=te?te.error:"";f(Ct=>[...Ct,{type:"system",text:Pt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleRegenerateSlideContent (API)",Pt)}z(!1)},wu=tt=>{hi({index:tt,mode:"single"}),Ae(""),qt(!0)},sc=()=>{hi({index:null,mode:"all"}),Ae(""),qt(!0)},Ea=()=>{qt(!1),Ae("")},ac=async()=>{const{index:tt,mode:dt}=ei;if(!ke.trim()){Ea();return}z(!0),ut(null);let wt=null;if(dt==="all"){U("...");const mt=Jn.modifyFullOutline(JSON.stringify(R,null,2),ke);wt=await ve(mt,"gemini-2.5-flash-lite","")}else if(dt==="single"&&tt!==null){U(` ${tt+1} ...`);const mt=Jn.modifySingleSlideOutline(JSON.stringify(R[tt],null,2),ke);wt=await ve(mt,"gemini-2.5-flash-lite",`${tt+1}`)}if(wt&&!wt.error)try{const mt=JSON.parse(wt);let Nt="";dt==="all"?(D(mt),Nt=""):dt==="single"&&tt!==null&&(D(Kt=>{const se=[...Kt];return se[tt]=mt,se}),Nt=` ${tt+1} `),f(Kt=>[...Kt,{type:"system",text:Nt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleSubmitModification",Nt)}catch(mt){const Nt=`: ${mt.message}`;f(Kt=>[...Kt,{type:"system",text:Nt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleSubmitModification (Parse)",Nt)}else{const mt=wt?wt.error:"";f(Nt=>[...Nt,{type:"system",text:mt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleSubmitModification (API)",mt)}z(!1),Ea()},ko=()=>{if(window.confirm(`


`)){st(""),u(Jt.OUTLINE_CREATED);const tt="";f(dt=>[...dt,{type:"system",text:tt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleReturnToOutline",tt)}},To=()=>{const tt=R,dt=Rt.length;let wt=dt;for(let mt=0;mt<dt;mt++){const Nt=C[mt]?JSON.stringify(C[mt]):null,Kt=tt[mt]?JSON.stringify(tt[mt]):null;if(Nt!==Kt){wt=mt;break}}if(wt<dt){const mt=`[INFO]  ${wt+1} ${wt+1} `;f(Nt=>[...Nt,{type:"system",text:mt,timestamp:new Date().toISOString()}]),nt("SYSTEM_EVENT","handleStartGeneration (Diff)",mt),B(Nt=>Nt.slice(0,wt))}if(At([...tt]),bt(wt),wt<tt.length){const mt=`
**2: **
 ${wt+1} `;f(Nt=>[...Nt.filter(Kt=>Kt.type!=="system"),{type:"system",text:mt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleStartGeneration",mt),$s(wt)}else{u(Jt.ALL_SLIDES_GENERATED);const mt=`
ZIP`;f(Nt=>[...Nt,{type:"system",text:mt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleStartGeneration (All Done)",mt)}},$s=async tt=>{u(Jt.GENERATING_SLIDES);const dt=R[tt];z(!0),U(`${tt+1}/${R.length}...`);let wt="";try{Z("analyzing"),await new Promise(Pt=>setTimeout(Pt,800));const mt=Gl[H].templates[dt.template];if(!mt)throw new Error(`${dt.template}${H}`);const Nt=Pt=>{if(typeof Pt!="string"||!Pt)return{cleanedText:"",boldedItems:[]};let Ct=Pt;Ct=Ct.replace(/\\+([*_~`$])/g,"$1");const ee=[],re=Ct.matchAll(/\*\*(.*?)\*\*/g);for(const Gt of re)Gt[1]&&Gt[1].trim().length>0&&ee.push(Gt[1].trim());return{cleanedText:Ct,boldedItems:ee}},Kt=(Pt,Ct)=>{const{isInline:ee=!1,breaks:re=!1,context:Gt="Unknown"}=Ct,{cleanedText:ce,boldedItems:Fe}=Nt(Pt||"");let Ki=(ee?cn=>Ue.parseInline(cn):cn=>Ue.parse(cn,{breaks:re}))(ce);if(Fe.length>0){let cn=!0;const ar=[];for(const Qt of Fe)Ki.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&amp;/g,"&").includes(`<strong>${Qt}</strong>`)||(cn=!1,ar.push(Qt));const Ni=`Slide ${tt+1} (${Gt})`;if(cn){const Qt=`[SUCCESS] Bold conversion OK. Items: [${Fe.join(", ")}]`;console.log(Qt),nt("DEBUG_SUCCESS",Ni,Qt)}else{const Qt={message:`[FAILED] Bold conversion error. Failed items: [${ar.join(", ")}]`,failedItems:ar,expectedItems:Fe,cleanedText:ce,parsedHtmlBeforeFallback:Ki,rawInput:Pt},It=`[FAILED] Bold conversion error. Failed items: [${ar.join(", ")}]. Applying fallback...`;console.warn(It,Qt),nt("DEBUG_WARN",Ni,Qt);let me=Ki;const Ne=Yi=>Yi.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");for(const Yi of ar){const di=new RegExp(Ne(`**${Yi}**`),"g");me=me.replace(di,`<strong>${Yi}</strong>`);const ii=new RegExp(Ne(`** ${Yi} **`),"g");me=me.replace(ii,`<strong>${Yi}</strong>`)}Ki=me}}return Ki},se={"{theme_class}":`theme-${N}`,"{title}":dt.title||"","{summary}":Kt(dt.summary||"",{isInline:!0,breaks:!0,context:"summary"}),"{content}":Kt(dt.summary||"",{isInline:!1,breaks:!0,context:"content (from summary)"}),"{number}":dt.number||"","{description}":Kt(dt.description||"",{isInline:!0,breaks:!0,context:"description"}),"{content_title}":Kt(dt.content_title||"",{isInline:!0,breaks:!0,context:"content_title"}),"{formula}":"","{infographic_svg}":"","{agenda_items_html}":"","{items_html}":"","{comparison_columns_html}":"","{table_html}":"","{chart_data_json}":"{}"};if(dt.infographic?.needed){Z("designing"),await new Promise(re=>setTimeout(re,800));const Pt=Jn.generateInfographic(dt.infographic.description,N),Ct=await ve(Pt,"gemini-2.5-flash-lite",`SVG for Slide ${tt+1}`);if(!Ct||Ct.error){const re=Ct?.error||"SVG";throw console.error(re),new Error(re)}const ee=Gi(Ct);se["{infographic_svg}"]=ee}if(["three_points"].includes(dt.template)&&Array.isArray(dt.points)){Z("designing"),await new Promise(ee=>setTimeout(ee,800));const Pt=dt.points.map(ee=>rr(ee)),Ct=await Promise.all(Pt);dt.points.forEach((ee,re)=>{const{cleanedText:Gt}=Nt(ee.title||"");se[`{point_${re+1}_title}`]=Gt,se[`{point_${re+1}_summary}`]=Kt(ee.summary||"",{isInline:!0,breaks:!0,context:`point_${re+1}_summary`}),se[`{icon_${re+1}_svg}`]=Ct[re]||""})}if(dt.template==="agenda"){const Pt=dt.summary.split(`
`).map((Ct,ee)=>{const re=Ct.replace(/^\s*\d+\.\s*/,"");return`<li>${Kt(re||"",{isInline:!0,breaks:!0,context:`agenda_item_${ee+1}`})}</li>`}).join("");se["{agenda_items_html}"]=Pt}if(dt.template==="math_basic"&&dt.formula){Z("designing"),await new Promise(re=>setTimeout(re,800));const Pt=new V4;Pt.use(ww({throwOnError:!1}));const ee=(dt.formula||"").replace(/\n/g," ");se["{formula}"]=Pt.parse(ee,{breaks:!1})}if(["vertical_steps","content_basic"].includes(dt.template)&&Array.isArray(dt.items)){Z("designing"),await new Promise(Ct=>setTimeout(Ct,800));let Pt="";dt.template==="vertical_steps"?Pt=dt.items.map((Ct,ee)=>{const{cleanedText:re}=Nt(Ct.title||"");return`
              <div class="step">
                <div class="step-marker">${ee+1}</div>
                <h2>${re}</h2>
                <p>${Kt(Ct.description||"",{isInline:!0,breaks:!0,context:`step_${ee+1}_description`})}</p> 
              </div>
            `}).join(""):dt.template==="content_basic"&&(Pt=dt.items.map((Ct,ee)=>{const re=Ct||"",Gt=re.match(/^(\s*)/)[0].length;let ce=re.trim();ce=ce.replace(/^([\*\-\\\]|(\d+\.)|[a-z]\.)\s*/,"");const Fe=Math.floor(Gt/2),ln=Fe>0?`style="margin-left: ${Fe*2}em;"`:"";return`<li data-level="${Fe}" ${ln}>${Kt(ce||"",{isInline:!0,breaks:!0,context:`item_${ee+1}`})}</li>`}).join("")),se["{items_html}"]=Pt}if(dt.template==="comparison"&&Array.isArray(dt.columns)){const Pt=dt.columns.map((Ct,ee)=>{const{cleanedText:re}=Nt(Ct.title||""),Gt=Array.isArray(Ct.items)?Ct.items.map((ce,Fe)=>`<li>${Kt(ce||"",{isInline:!0,breaks:!0,context:`column_${ee+1}_item_${Fe+1}`})}</li>`).join(""):"";return`
                <div class="column">
                    <h2>${re}</h2>
                    <ul>${Gt}</ul>
                </div>
            `}).join("");se["{comparison_columns_html}"]=Pt}if(dt.template==="table_basic"&&dt.table){Z("designing"),await new Promise(Ct=>setTimeout(Ct,800));let Pt="<thead><tr>";Array.isArray(dt.table.headers)&&(Pt+=dt.table.headers.map((Ct,ee)=>`<th>${Kt(Ct||"",{isInline:!0,breaks:!0,context:`table_header_${ee+1}`})}</th>`).join("")),Pt+="</tr></thead>",Pt+="<tbody>",Array.isArray(dt.table.rows)&&(Pt+=dt.table.rows.map((Ct,ee)=>{let re="<tr>";return re+=Ct.map((Gt,ce)=>`<td>${Kt(Gt||"",{isInline:!0,breaks:!0,context:`table_row_${ee+1}_cell_${ce+1}`})}</td>`).join(""),re+="</tr>",re}).join("")),Pt+="</tbody>",se["{table_html}"]=Pt}if(dt.template==="bar_chart"&&dt.chart_data){Z("designing"),await new Promise(Gt=>setTimeout(Gt,800));const Pt=`Slide ${tt+1} (bar_chart)`,Ct=dt.chart_data,ee="[START] bar_chart processing started.";if(console.log(ee,{context:Pt,receivedData:Ct}),nt("DEBUG_INFO",Pt,{message:ee,receivedData:Ct}),Ct&&Array.isArray(Ct.labels)&&Array.isArray(Ct.datasets)&&Ct.datasets.length>0&&Ct.datasets[0]&&Array.isArray(Ct.datasets[0].data)){const Gt={message:"[VALID] chart_data structure is valid.",labelsCount:Ct.labels.length,datasetsCount:Ct.datasets.length,firstDatasetDataCount:Ct.datasets[0].data.length};console.log(Gt.message,{context:Pt,details:Gt}),nt("DEBUG_INFO",Pt,Gt);try{const ce=JSON.stringify(Ct).replace(/</g,"\\u003c").replace(/>/g,"\\u003e");se["{chart_data_json}"]=ce;const Fe={message:"[SUCCESS] JSON.stringify successful.",stringLength:ce.length,preview:ce.substring(0,100)+"..."};console.log(Fe.message,{context:Pt,details:Fe}),nt("DEBUG_SUCCESS",Pt,Fe)}catch(ce){const Fe=`[FAILED] JSON.stringify failed. ${ce.message}`;console.error(Fe,{context:Pt,error:ce,receivedData:Ct}),nt("DEBUG_ERROR",Pt,{message:Fe,error:ce,receivedData:Ct})}}else{const Gt="[FAILED] Invalid chart_data structure received from AI.";console.error(Gt,{context:Pt,receivedData:Ct}),nt("DEBUG_ERROR",Pt,{message:Gt,receivedData:Ct}),se["{chart_data_json}"]="{}"}}Z("coding"),await new Promise(Pt=>setTimeout(Pt,800)),wt=Object.entries(se).reduce((Pt,[Ct,ee])=>{const re=new RegExp(Ct.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return Pt.replace(re,ee)},mt);const te=`${dt.title}
`;f(Pt=>[...Pt,{type:"system",text:te,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","generateSlide",te)}catch(mt){console.error("Slide generation failed:",mt),wt="";const Nt=`: ${mt.message}`;f(Kt=>[...Kt,{type:"system",text:Nt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","generateSlide (Catch)",Nt)}finally{Z(null),z(!1),st(wt),u(Jt.SLIDE_GENERATED)}},oc=async tt=>{z(!0),U(` ${xt+1} ...`);const dt=Jn.modifySlide(tt,P),wt=await ve(dt,"gemini-2.5-flash-lite",`${xt+1}`);if(z(!1),wt)try{const mt=JSON.parse(wt);if(mt.html&&mt.changes){st(mt.html);const Nt=`

**:**
${mt.changes}`;f(Kt=>[...Kt,{type:"system",text:Nt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","modifySlide",Nt)}else throw new Error("Invalid JSON structure from API.")}catch(mt){console.error("Failed to parse JSON response for slide modification:",mt);const Nt="";f(Kt=>[...Kt,{type:"system",text:Nt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","modifySlide (Parse)",Nt)}},sr=()=>{if(!P)return;const tt=new Blob([P],{type:"text/html"}),dt=URL.createObjectURL(tt);window.open(dt,"_blank")},Mi=()=>{if(!P){const wt="";f(mt=>[...mt,{type:"system",text:wt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_INFO","handleApproveAndNext (Retry)",wt),$s(xt);return}const tt=[...Rt,P];B(tt),st("");const dt=xt+1;if(dt<R.length){bt(dt);const wt=R[dt],mt=` ${xt+1} 
${wt.title}`;f(Nt=>[...Nt.filter(Kt=>Kt.type!=="system"),{type:"system",text:mt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleApproveAndNext",mt),$s(dt)}else{u(Jt.ALL_SLIDES_GENERATED);const wt=`
ZIP`;f(mt=>[...mt,{type:"system",text:wt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleApproveAndNext (All Done)",wt)}},$i=async()=>{z(!0),U("ZIP..."),nt("SYSTEM_EVENT","handleDownloadZip","ZIP generation started.");try{const tt=new z7;Rt.forEach((mt,Nt)=>{tt.file(`s${Nt+1}.html`,mt)});const dt=await tt.generateAsync({type:"blob"}),wt=document.createElement("a");wt.href=URL.createObjectURL(dt),wt.download="slides.zip",document.body.appendChild(wt),wt.click(),document.body.removeChild(wt),nt("SYSTEM_EVENT","handleDownloadZip","ZIP generation success.")}catch(tt){const dt=`ZIP: ${tt.message}`;f(wt=>[...wt,{type:"system",text:dt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleDownloadZip",dt)}finally{z(!1)}},ss=async()=>{if(Rt.length===0){const wt="PDF";f(mt=>[...mt,{type:"system",text:wt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_WARN","handleDownloadPdf",wt);return}const tt="https://slide-pdf-backend-306538767892.asia-northeast1.run.app/generate-pdf";if(tt.includes("your-cloud-run-service-url")){const wt=": App.jsx  BACKEND_URL ";f(mt=>[...mt,{type:"system",text:wt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleDownloadPdf",wt);return}zt(!0),U("PDF... (12)");const dt="PDF...";f(wt=>[...wt,{type:"system",text:dt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleDownloadPdf",dt),nt("SYSTEM_EVENT","handleDownloadPdf",`Requesting PDF from: ${tt}`);try{const wt=await fetch(tt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({htmls:Rt})});if(!wt.ok){const se=await wt.text();throw new Error(`PDF: ${se}`)}const mt=await wt.blob(),Nt=document.createElement("a");Nt.href=URL.createObjectURL(mt),Nt.download="merged_slides.pdf",document.body.appendChild(Nt),Nt.click(),document.body.removeChild(Nt);const Kt="PDF";f(se=>[...se,{type:"system",text:Kt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleDownloadPdf",Kt)}catch(wt){console.error("PDF Download failed:",wt);const mt=`PDF: ${wt.message}`;f(Nt=>[...Nt,{type:"system",text:mt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_ERROR","handleDownloadPdf",mt)}finally{zt(!1),U("")}},Co=()=>{if(m.length===0){const Kt="";f(se=>[...se,{type:"system",text:Kt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM_WARN","handleDownloadChatLog",Kt);return}nt("SYSTEM_EVENT","handleDownloadChatLog","Log download triggered.");let tt=`---   ---

`;m.forEach(Kt=>{if(tt+=`========================================
`,tt+=`[Timestamp]: ${Kt.timestamp}
`,tt+=`[Type]:      ${Kt.type}
`,tt+=`[Context]:   ${Kt.context}
`,tt+=`---------------- Data --------------------
`,typeof Kt.data=="object")try{tt+=JSON.stringify(Kt.data,null,2)}catch{tt+="[Error] Failed to stringify object data."}else tt+=String(Kt.data);tt+=`
========================================

`});const dt=new Blob([tt],{type:"text/plain;charset=utf-8"}),wt=URL.createObjectURL(dt),mt=document.createElement("a");mt.href=wt;const Nt=new Date().toISOString().replace(/[:.]/g,"-");mt.download=`slide-generator-log-${Nt}.txt`,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt)},Su=()=>{if(o!==Jt.SLIDE_GENERATED)return;const dt=`${R[xt]?.title||""}`;f(wt=>[...wt,{type:"system",text:dt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleRegenerateCurrentSlide",dt),st(""),$s(xt)},Au=()=>{!b.trim()||o!==Jt.SLIDE_GENERATED||(f(tt=>[...tt,{type:"user",text:b,timestamp:new Date().toISOString()}]),nt("UI_USER","handleSendMessage (Modify Slide)",b),oc(b),v(""))},lc=()=>{Ft(P),vt(!0)},Ys=()=>{st(Ut),vt(!1);const tt="";f(dt=>[...dt,{type:"system",text:tt,timestamp:new Date().toISOString()}]),nt("UI_SYSTEM","handleApplyCodeChanges",tt)},Mo=()=>{vt(!1),Ft("")},Tr=o===Jt.GENERATING_SLIDES,Cr=o===Jt.SLIDE_GENERATED&&L,Vs=Tr||Cr,as=Tr?R[xt]?.title:Cr?`${R[xt]?.title} ...`:"";return G.jsxs("div",{className:"bg-[#1e1e1e] h-screen w-screen flex flex-col font-sans text-white",children:[G.jsx(Cw,{onSettingsClick:()=>i(!0),onDownloadLog:Co}),G.jsxs("main",{className:"flex-grow flex p-6 gap-6 overflow-hidden",children:[G.jsx("div",{className:`transition-all duration-300 ease-in-out ${o===Jt.INITIAL||o===Jt.STRUCTURING||o===Jt.STRUCTURED||o===Jt.SELECTING_THEME||o===Jt.CREATING_OUTLINE||o===Jt.SELECTING_SECTION_HEADERS||o===Jt.GENERATING_OUTLINE||o===Jt.OUTLINE_CREATED?"w-1/3":"w-1/2"}`,children:o===Jt.INITIAL||o===Jt.STRUCTURING||o===Jt.STRUCTURED||o===Jt.SELECTING_THEME||o===Jt.CREATING_OUTLINE||o===Jt.SELECTING_SECTION_HEADERS||o===Jt.GENERATING_OUTLINE||o===Jt.OUTLINE_CREATED?G.jsx(Mw,{isProcessing:L,processingStatus:q,fileName:w,handleDragOver:wi,handleDrop:an,onFileSelect:Ze,appStatus:o,thinkingState:j,totalWaitTime:kt}):G.jsx(jw,{generatedSlides:Rt,htmlContent:P,isLoading:Vs,loadingTitle:as})}),G.jsx("div",{className:`transition-all duration-300 ease-in-out ${o===Jt.INITIAL||o===Jt.STRUCTURING||o===Jt.STRUCTURED||o===Jt.SELECTING_THEME||o===Jt.CREATING_OUTLINE||o===Jt.SELECTING_SECTION_HEADERS||o===Jt.GENERATING_OUTLINE||o===Jt.OUTLINE_CREATED?"w-2/3":"w-1/2"}`,children:G.jsx(Uw,{chatState:{messages:h,userInput:b,setUserInput:v,handleSendMessage:Au,chatEndRef:Lt,appStatus:o,apiErrorStep:it,handleRetry:je,structuredMarkdown:T,setStructuredMarkdown:M,handleMarkdownApproval:_o,handleRegenerateStructure:Ao,selectedTheme:H,design:N,handleThemeSelection:ns,handleDesignSelection:kr,handleThemeApproval:zn,handleAgendaChoice:on,handleSectionHeaderChoice:rs,slideOutline:R,handleOutlineChange:Gs,handleInsertSlide:rc,handleDeleteSlide:xu,handleStartGeneration:To,handleRegenerateOutline:Eo,handleRegenerateSlideContent:qs,handleOpenModifyModal:wu,handleOpenModifyAllModal:sc,currentSlideIndex:xt,thinkingState:j,handlePreview:sr,handleRegenerateCurrentSlide:Su,handleReturnToOutline:ko,handleApproveAndNext:Mi,handleDownloadZip:$i,handleOpenCodeEditor:lc,handleDownloadPdf:ss,isGeneratingPdf:ht}})})]}),G.jsx(Hw,{isOpen:e,tempApiKey:r,setTempApiKey:a,handleSave:Er}),G.jsx(Gw,{isOpen:pt,html:Ut,setHtml:Ft,onSave:Ys,onCancel:Mo}),G.jsx(qw,{isOpen:Yt,mode:ei.mode,index:ei.index,value:ke,onChange:Ae,onSave:ac,onCancel:Ea})]})}n5.createRoot(document.getElementById("root")).render(G.jsx(pe.StrictMode,{children:G.jsx($w,{})}));
